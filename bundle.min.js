!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2192)}([function(t,e){function n(t,e,n){var r=n?t[e]:Object.getOwnPropertyDescriptor(t,e);return!n&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function r(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function i(t,e,i,o){for(var a in e)if(e.hasOwnProperty(a)){var u=n(e,a,i);if(!1!==u){if(r((o||t).prototype,a)){if(s.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,u)}else t.prototype[a]=e[a]}}function o(t,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)i(t,e[n].prototype||e[n])}}function s(t){var e,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;e=function(){r.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,n=t.Extends,delete t.Extends):e.prototype.constructor=e;var s=null;return t.Mixins&&(s=t.Mixins,delete t.Mixins),o(e,s),i(e,t,!0,n),e}s.extend=i,s.mixin=o,s.ignoreFinals=!1,t.exports=s},function(t,e){t.exports=function(t,e,n){var r=typeof t;return t&&"number"!==r&&"string"!==r&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:n}},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";e.name="matrix",e.factory=function(t,e,n,r){var i=r("matrix",{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i;function o(e,n,r){return new(t.Matrix.storage(n||"default"))(e,r)}}},function(t,e,n){"use strict";t.exports=function t(e,n,r){return e&&"function"==typeof e.map?e.map(function(e){return t(e,n,r)}):n(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.size=u,e.validate=function(t,e){if(0===e.length){if(Array.isArray(t))throw new o.default(t.length,0)}else!function t(e,n,r){var i;var s=e.length;if(s!==n[r])throw new o.default(s,n[r]);if(r<n.length-1){var a=r+1;for(i=0;i<s;i++){var u=e[i];if(!Array.isArray(u))throw new o.default(n.length-1,n.length,"<");t(e[i],n,a)}}else for(i=0;i<s;i++)if(Array.isArray(e[i]))throw new o.default(n.length+1,n.length,">")}(t,e,0)},e.validateIndex=function(t,e){if(!r.default.isNumber(t)||!r.default.isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new s.default(t,e)},e.resize=function(t,e,n){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");e.forEach(function(t){if(!r.default.isNumber(t)||!r.default.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+i.default.format(e)+")")});var o=void 0!==n?n:0;return function t(e,n,r,i){var o,s,a=e.length,u=n[r],c=Math.min(a,u);if(e.length=u,r<n.length-1){var h=r+1;for(o=0;o<c;o++)s=e[o],Array.isArray(s)||(s=[s],e[o]=s),t(s,n,h,i);for(o=c;o<u;o++)s=[],e[o]=s,t(s,n,h,i)}else{for(o=0;o<c;o++)for(;Array.isArray(e[o]);)e[o]=e[o][0];for(o=c;o<u;o++)e[o]=i}}(t,e,0,o),t},e.reshape=function(t,e){var n,r=c(t);function i(t){return t.reduce(function(t,e){return t*e})}if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new o.default(0,i(u(t)),"!=");for(var s=1,a=0;a<e.length;a++)s*=e[a];if(r.length!==s)throw new o.default(i(e),i(u(t)),"!=");try{n=function(t,e){for(var n,r=t,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var s=r.length/o,a=0;a<s;a++)n.push(r.slice(a*o,(a+1)*o));r=n}return r}(r,e)}catch(n){if(n instanceof o.default)throw new o.default(i(e),i(u(t)),"!=");throw n}return n},e.squeeze=function(t,e){var n=e||u(t);for(;Array.isArray(t)&&1===t.length;)t=t[0],n.shift();var r=n.length;for(;1===n[r-1];)r--;r<n.length&&(t=function t(e,n,r){var i,o;if(r<n){var s=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,s)}else for(;Array.isArray(e);)e=e[0];return e}(t,r,0),n.length=r);return t},e.unsqueeze=function(t,e,n,r){var i=r||u(t);if(n)for(var o=0;o<n;o++)t=[t],i.unshift(1);t=function t(e,n,r){var i,o;if(Array.isArray(e)){var s=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,s)}else for(var a=r;a<n;a++)e=[e];return e}(t,e,0);for(;i.length<e;)i.push(1);return t},e.flatten=c,e.map=function(t,e){return Array.prototype.map.call(t,e)},e.forEach=function(t,e){Array.prototype.forEach.call(t,e)},e.filter=function(t,e){if(1!==u(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)},e.filterRegExp=function(t,e){if(1!==u(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,function(t){return e.test(t)})},e.join=function(t,e){return Array.prototype.join.call(t,e)},e.identify=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e},e.generalize=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e};var r=a(n(7)),i=a(n(26)),o=a(n(39)),s=a(n(159));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function c(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}},function(t,e,n){(function(e){n(783);var r=n(58),i=n(37),o={Actions:n(403),Animations:n(872),BlendModes:n(86),Cache:n(887),Cameras:n(890),Core:n(973),Class:n(0),Create:n(1026),Curves:n(1032),Data:n(1035),Display:n(1037),DOM:n(1066),Events:n(1067),Game:n(1069),GameObjects:n(1168),Geom:n(585),Input:n(1442),Loader:n(1476),Math:n(294),Physics:n(1501),Plugins:n(1590),Renderer:n(1592),Scale:n(1597),ScaleModes:n(171),Scene:n(530),Scenes:n(1598),Structs:n(1600),Textures:n(1601),Tilemaps:n(1603),Time:n(1644),Tweens:n(1646),Utils:n(1656)};o.Sound=n(1666),o.Cameras.Sprite3D=n(1667),o.GameObjects.Sprite3D=n(245),o.GameObjects.Factories.Sprite3D=n(1669),o.GameObjects.Creators.Sprite3D=n(1670),o.FacebookInstantGamesPlugin=n(544),o=i(!1,o,r),t.exports=o,e.Phaser=o}).call(this,n(50))},function(t,e,n){"use strict";var r=n(15);function i(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}e.isNumber=function(t){return"number"==typeof t},e.isInteger=function(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)},e.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},e.format=function(t,n){if("function"==typeof n)return n(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var i,o="auto";switch(n&&(n.notation&&(o=n.notation),e.isNumber(n)?i=n:e.isNumber(n.precision)&&(i=n.precision)),o){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"engineering":return e.toEngineering(t,i);case"auto":if(n&&n.exponential&&(void 0!==n.exponential.lower||void 0!==n.exponential.upper)){var s=r.map(n,function(t){return t});return s.exponential=void 0,void 0!==n.exponential.lower&&(s.lowerExp=Math.round(Math.log(n.exponential.lower)/Math.LN10)),void 0!==n.exponential.upper&&(s.upperExp=Math.round(Math.log(n.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(n)+" with "+JSON.stringify(s)),e.toPrecision(t,i,s)}return e.toPrecision(t,i,n&&n).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+o+'". Choose "auto", "exponential", or "fixed".')}},e.splitNumber=function(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(t){return i-=t.length,""}).replace(/0*$/,"").split("").map(function(t){return parseInt(t)});return 0===s.length&&(s.push(0),i++),{sign:n,coefficients:s,exponent:i}},e.toEngineering=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var r=e.roundDigits(e.splitNumber(t),n),i=r.exponent,o=r.coefficients,s=i%3==0?i:i<0?i-3-i%3:i-i%3;if(e.isNumber(n))for(;n>o.length||i-s+1>o.length;)o.push(0);else for(var a=i>=0?i:Math.abs(s);o.length-1<a;)o.push(0);for(var u=Math.abs(i-s),c=1;u>0;)c++,u--;var h=o.slice(c).join(""),l=e.isNumber(n)&&h.length||h.match(/[1-9]/)?"."+h:"",f=o.slice(0,c).join("")+l+"e"+(i>=0?"+":"")+s.toString();return r.sign+f},e.toFixed=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var r=e.splitNumber(t),o="number"==typeof n?e.roundDigits(r,r.exponent+1+n):r,s=o.coefficients,a=o.exponent+1,u=a+(n||0);return s.length<u&&(s=s.concat(i(u-s.length))),a<0&&(s=i(1-a).concat(s),a=1),a<s.length&&s.splice(a,0,0===a?"0.":"."),o.sign+s.join("")},e.toExponential=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var r=e.splitNumber(t),o=n?e.roundDigits(r,n):r,s=o.coefficients,a=o.exponent;s.length<n&&(s=s.concat(i(n-s.length)));var u=s.shift();return o.sign+u+(s.length>0?"."+s.join(""):"")+"e"+(a>=0?"+":"")+a},e.toPrecision=function(t,n,r){if(isNaN(t)||!isFinite(t))return String(t);var o=r&&void 0!==r.lowerExp?r.lowerExp:-3,s=r&&void 0!==r.upperExp?r.upperExp:5,a=e.splitNumber(t);if(a.exponent<o||a.exponent>=s)return e.toExponential(t,n);var u=n?e.roundDigits(a,n):a,c=u.coefficients,h=u.exponent;c.length<n&&(c=c.concat(i(n-c.length))),c=c.concat(i(h-c.length+1+(c.length<n?n-c.length:0)));var l=h>0?h:0;return l<(c=i(-h).concat(c)).length-1&&c.splice(l+1,0,"."),u.sign+c.join("")},e.roundDigits=function(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var i=e-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n},e.digits=function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},e.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,e.nearlyEqual=function(t,n,r){if(null==r)return t===n;if(t===n)return!0;if(isNaN(t)||isNaN(n))return!1;if(isFinite(t)&&isFinite(n)){var i=Math.abs(t-n);return i<e.DBL_EPSILON||i<=Math.max(Math.abs(t),Math.abs(n))*r}return!1}},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new r(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,n=t*t+e*e;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this},transformMat3:function(t){var e=this.x,n=this.y,r=t.val;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},transformMat4:function(t){var e=this.x,n=this.y,r=t.val;return this.x=r[0]*e+r[4]*n+r[12],this.y=r[1]*e+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),t.exports=r},function(t,e,n){"use strict";var r=n(1692);e.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},e.operators={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},e.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var i={deg:"^\\circ"};e.escape=function(t){return r(t,{preserveFormatting:!0})},e.toSymbol=function(t,n){return(n=void 0!==n&&n)?i.hasOwnProperty(t)?i[t]:"\\mathrm{"+e.escape(t)+"}":e.symbols.hasOwnProperty(t)?e.symbols[t]:e.escape(t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r=n(46),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){var r=new(n(0))({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=r},function(t,e,n){var r=n(0),i=n(29),o=n(34),s=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.displayList,this.updateList,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},i.register("GameObjectFactory",s,"add"),t.exports=s},function(t,e){t.exports=function(t,e,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),i=t,o=n,s=0;s<r.length;s++){if(!i.hasOwnProperty(r[s])){o=n;break}o=i[r[s]],i=i[r[s]]}return o}return n}return n}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(364);e.clone=function t(n){var o=r(n);if("number"===o||"string"===o||"boolean"===o||null==n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map(function(e){return t(e)});if(n instanceof Date)return new Date(n.valueOf());if(i(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return e.map(n,t)},e.map=function(t,n){var r={};for(var i in t)e.hasOwnProperty(t,i)&&(r[i]=n(t[i]));return r},e.extend=function(t,n){for(var r in n)e.hasOwnProperty(n,r)&&(t[r]=n[r]);return t},e.deepExtend=function t(n,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(e.hasOwnProperty(r,i))if(r[i]&&r[i].constructor===Object)void 0===n[i]&&(n[i]={}),n[i].constructor===Object?t(n[i],r[i]):n[i]=r[i];else{if(Array.isArray(r[i]))throw new TypeError("Arrays are not supported by deepExtend");n[i]=r[i]}return n},e.deepEqual=function(t,n){var r,i,o;if(Array.isArray(t)){if(!Array.isArray(n))return!1;if(t.length!==n.length)return!1;for(i=0,o=t.length;i<o;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if(t instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(r in t)if(!e.deepEqual(t[r],n[r]))return!1;for(r in n)if(!e.deepEqual(t[r],n[r]))return!1;return!0}return t===n},e.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(t){}return!1},e.lazy=function(t,n,r){if(e.canDefineProperty()){var i,o=!0;Object.defineProperty(t,n,{get:function(){return o&&(i=r(),o=!1),i},set:function(t){i=t,o=!1},configurable:!0,enumerable:!0})}else t[n]=r()},e.traverse=function(t,e){var n=t;if(e)for(var r=e.split("."),i=0;i<r.length;i++){var o=r[i];o in n||(n[o]={}),n=n[o]}return n},e.hasOwnProperty=function(t,e){return t&&Object.hasOwnProperty.call(t,e)},e.isFactory=function(t){return t&&"function"==typeof t.factory}},function(t,e){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e){var n={},r={install:function(t){for(var e in n)t[e]=n[e]},register:function(t,e){n[t]=e},destroy:function(){n={}}};t.exports=r},function(t,e,n){"use strict";var r=n(15).clone;e.name="algorithm14",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,s){var a,u=t._data,c=t._size,h=t._datatype,l=n;"string"==typeof h&&(a=h,e=i.convert(e,a),l=i.find(n,[a,a]));var f=c.length>0?function t(e,n,r,i,o,s,a){var u=[];if(n===r.length-1)for(var c=0;c<i;c++)u[c]=a?e(s,o[c]):e(o[c],s);else for(var h=0;h<i;h++)u[h]=t(e,n+1,r,r[n+1],o[h],s,a);return u}(l,0,c,c[0],u,e,s):[];return new o({data:f,size:r(c),datatype:a})}}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm13",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n){var s,a=t._data,u=t._size,c=t._datatype,h=e._data,l=e._size,f=e._datatype,d=[];if(u.length!==l.length)throw new r(u.length,l.length);for(var p=0;p<u.length;p++){if(u[p]!==l[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+l+")");d[p]=u[p]}var m=n;"string"==typeof c&&c===f&&(s=c,m=i.find(n,[s,s]));var v=d.length>0?function t(e,n,r,i,o,s){var a=[];if(n===r.length-1)for(var u=0;u<i;u++)a[u]=e(o[u],s[u]);else for(var c=0;c<i;c++)a[c]=t(e,n+1,r,r[n+1],o[c],s[c]);return a}(m,0,d,d[0],a,h):[];return new o({data:v,size:d,datatype:s})}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,o),!0;case 6:return h.fn.call(h.context,e,n,r,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var f,d=h.length;for(c=0;c<d;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];h[c].fn.apply(h[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||u(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},function(t,e){t.exports={getTintFromFloats:function(t,e,n,r){return((255&(255*r|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*n|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},getComponentCount:function(t,e){for(var n=0,r=0;r<t.length;++r){var i=t[r];i.type===e.FLOAT?n+=i.size:n+=1}return n}}},function(t,e,n){var r=n(0),i=n(96),o=n(275),s=n(424),a=n(109),u=n(278),c=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new a),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new a),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new a),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new a),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},function(t,e,n){t.exports={Alpha:n(418),Animation:n(419),BlendMode:n(422),ComputedSize:n(815),Crop:n(816),Depth:n(423),Flip:n(817),GetBounds:n(818),Mask:n(427),Origin:n(819),PathFollower:n(820),Pipeline:n(209),ScrollFactor:n(430),Size:n(821),Texture:n(822),TextureCrop:n(823),Tint:n(824),ToJSON:n(431),Transform:n(432),TransformMatrix:n(71),Visible:n(433)}},function(t,e,n){var r=n(0),i=n(431),o=n(175),s=n(20),a=n(210),u=new r({Extends:s,initialize:function(t,e){s.call(this),this.scene=t,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(t,e){return this.data||(this.data=new o(this)),this.data.set(t,e),this},getData:function(t){return this.data||(this.data=new o(this)),this.data.get(t)},setInteractive:function(t,e,n){return this.scene.sys.input.enable(this,t,e,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},update:function(){},toJSON:function(){return i(this)},willRender:function(t){return!(u.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,n=[];e&&(n.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return n.unshift(this.scene.sys.displayList.getIndex(t)),n},destroy:function(t){if(void 0===t&&(t=!1),this.scene&&!this.ignoreDestroy){this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this);var e=this.scene.sys;t||(e.displayList.remove(this),e.updateList.remove(this)),this.input&&(e.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),t||e.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0,this.removeAllListeners()}}});u.RENDER_MASK=15,t.exports=u},function(t,e,n){var r=n(294),i=n(14);t.exports=function(t,e,n){var o=i(t,e,null);if(null===o)return n;if(Array.isArray(o))return r.RND.pick(o);if("object"==typeof o){if(o.hasOwnProperty("randInt"))return r.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return r.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if("function"==typeof o)return o(e);return o}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(7).format,o=n(1687).format,s=n(364);e.isString=function(t){return"string"==typeof t},e.endsWith=function(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e},e.format=function(t,n){if("number"==typeof t)return i(t,n);if(s(t))return o(t,n);if(function(t){return t&&"object"===r(t)&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t))return n&&"decimal"===n.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return function t(n,r){if(Array.isArray(n)){for(var i="[",o=n.length,s=0;s<o;s++)0!==s&&(i+=", "),i+=t(n[s],r);return i+="]"}return e.format(n,r)}(t,n);if(e.isString(t))return'"'+t+'"';if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"===r(t)){if("function"==typeof t.format)return t.format(n);if(t&&t.toString()!=={}.toString())return t.toString();var a=[];for(var u in t)t.hasOwnProperty(u)&&a.push('"'+u+'": '+e.format(t[u],n));return"{"+a.join(", ")+"}"}return String(t)},e.stringify=function(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);"\\"===i?(n+=i,r++,""!==(i=e.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'},e.escape=function(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(t,e,n){var r=n(0),i=n(29),o=n(34),s=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.displayList,this.updateList,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},i.register("GameObjectCreator",s,"make"),t.exports=s},function(t,e,n){"use strict";var r=n(15).extend,i=n(5);e.name="multiply",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=o(n(53)),h=o(n(62)),l=o(n(31)),f=o(n(56)),d=o(n(18)),p=t.DenseMatrix,m=t.SparseMatrix,v=s("multiply",r({"Array, Array":function(e,n){g(i.size(e),i.size(n));var r=v(u(e),u(n));return t.isMatrix(r)?r.valueOf():r},"Matrix, Matrix":function(t,e){var n=t.size(),r=e.size();return g(n,r),1===n.length?1===r.length?function(t,e,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var r,i=t._data,o=t._datatype,a=e._data,u=e._datatype,l=c,f=h;o&&u&&o===u&&"string"==typeof o&&(r=o,l=s.find(c,[r,r]),f=s.find(h,[r,r]));for(var d=f(i[0],a[0]),p=1;p<n;p++)d=l(d,f(i[p],a[p]));return d}(t,e,n[0]):function(t,e){if("dense"!==e.storage())throw new Error("Support for SparseMatrix not implemented");return function(t,e){var n,r=t._data,i=t._size,o=t._datatype,a=e._data,u=e._size,l=e._datatype,f=i[0],d=u[1],m=c,v=h;o&&l&&o===l&&"string"==typeof o&&(n=o,m=s.find(c,[n,n]),v=s.find(h,[n,n]));for(var g=[],y=0;y<d;y++){for(var b=v(r[0],a[0][y]),x=1;x<f;x++)b=m(b,v(r[x],a[x][y]));g[y]=b}return new p({data:g,size:[d],datatype:n})}(t,e)}(t,e):1===r.length?y(t,e):b(t,e)},"Matrix, Array":function(t,e){return v(t,u(e))},"Array, Matrix":function(t,e){return v(u(t,e.storage()),e)},"SparseMatrix, any":function(t,e){return f(t,e,h,!1)},"DenseMatrix, any":function(t,e){return d(t,e,h,!1)},"any, SparseMatrix":function(t,e){return f(e,t,h,!0)},"any, DenseMatrix":function(t,e){return d(e,t,h,!0)},"Array, any":function(t,e){return d(u(t),e,h,!1).valueOf()},"any, Array":function(t,e){return d(u(e),t,h,!0).valueOf()},"any, any":h,"any, any, ...any":function(t,e,n){for(var r=v(t,e),i=0;i<n.length;i++)r=v(r,n[i]);return r}},h.signatures));function g(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}var y=s("_multiplyMatrixVector",{"DenseMatrix, any":function(t,e){var n,r=t._data,i=t._size,o=t._datatype,a=e._data,u=e._datatype,l=i[0],f=i[1],d=c,m=h;o&&u&&o===u&&"string"==typeof o&&(n=o,d=s.find(c,[n,n]),m=s.find(h,[n,n]));for(var v=[],g=0;g<l;g++){for(var y=r[g],b=m(y[0],a[0]),x=1;x<f;x++)b=d(b,m(y[x],a[x]));v[g]=b}return new p({data:v,size:[l],datatype:n})},"SparseMatrix, any":function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var a,u=e._data,f=e._datatype,d=t._size[0],p=e._size[0],v=[],g=[],y=[],b=c,x=h,w=l,E=0;o&&f&&o===f&&"string"==typeof o&&(a=o,b=s.find(c,[a,a]),x=s.find(h,[a,a]),w=s.find(l,[a,a]),E=s.convert(0,a));var _=[],S=[];y[0]=0;for(var T=0;T<p;T++){var A=u[T];if(!w(A,E))for(var M=i[T],C=i[T+1],O=M;O<C;O++){var N=r[O];S[N]?_[N]=b(_[N],x(A,n[O])):(S[N]=!0,g.push(N),_[N]=x(A,n[O]))}}for(var k=g.length,R=0;R<k;R++){var P=g[R];v[R]=_[P]}return y[1]=g.length,new m({values:v,index:g,ptr:y,size:[d,1],datatype:a})}}),b=s("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,e){var n,r=t._data,i=t._size,o=t._datatype,a=e._data,u=e._size,l=e._datatype,f=i[0],d=i[1],m=u[1],v=c,g=h;o&&l&&o===l&&"string"==typeof o&&(n=o,v=s.find(c,[n,n]),g=s.find(h,[n,n]));for(var y=[],b=0;b<f;b++){var x=r[b];y[b]=[];for(var w=0;w<m;w++){for(var E=g(x[0],a[0][w]),_=1;_<d;_++)E=v(E,g(x[_],a[_][w]));y[b][w]=E}}return new p({data:y,size:[f,m],datatype:n})},"DenseMatrix, SparseMatrix":function(t,e){var n=t._data,r=t._size,i=t._datatype,o=e._values,a=e._index,u=e._ptr,f=e._size,d=e._datatype;if(!o)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,v=r[0],g=f[1],y=c,b=h,x=l,w=0;i&&d&&i===d&&"string"==typeof i&&(p=i,y=s.find(c,[p,p]),b=s.find(h,[p,p]),x=s.find(l,[p,p]),w=s.convert(0,p));for(var E=[],_=[],S=[],T=new m({values:E,index:_,ptr:S,size:[v,g],datatype:p}),A=0;A<g;A++){S[A]=_.length;var M=u[A],C=u[A+1];if(C>M)for(var O=0,N=0;N<v;N++){for(var k=N+1,R=void 0,P=M;P<C;P++){var I=a[P];O!==k?(R=b(n[N][I],o[P]),O=k):R=y(R,b(n[N][I],o[P]))}O!==k||x(R,w)||(_.push(N),E.push(R))}}return S[g]=_.length,T},"SparseMatrix, DenseMatrix":function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var a,u=e._data,f=e._datatype,d=t._size[0],p=e._size[0],v=e._size[1],g=c,y=h,b=l,x=0;o&&f&&o===f&&"string"==typeof o&&(a=o,g=s.find(c,[a,a]),y=s.find(h,[a,a]),b=s.find(l,[a,a]),x=s.convert(0,a));for(var w=[],E=[],_=[],S=new m({values:w,index:E,ptr:_,size:[d,v],datatype:a}),T=[],A=[],M=0;M<v;M++){_[M]=E.length;for(var C=M+1,O=0;O<p;O++){var N=u[O][M];if(!b(N,x))for(var k=i[O],R=i[O+1],P=k;P<R;P++){var I=r[P];A[I]!==C?(A[I]=C,E.push(I),T[I]=y(N,n[P])):T[I]=g(T[I],y(N,n[P]))}}for(var D=_[M],L=E.length,B=D;B<L;B++){var F=E[B];w[B]=T[F]}}return _[v]=E.length,S},"SparseMatrix, SparseMatrix":function(t,e){var n,r=t._values,i=t._index,o=t._ptr,a=t._datatype,u=e._values,l=e._index,f=e._ptr,d=e._datatype,p=t._size[0],v=e._size[1],g=r&&u,y=c,b=h;a&&d&&a===d&&"string"==typeof a&&(n=a,y=s.find(c,[n,n]),b=s.find(h,[n,n]));for(var x,w,E,_,S,T,A,M,C=g?[]:void 0,O=[],N=[],k=new m({values:C,index:O,ptr:N,size:[p,v],datatype:n}),R=g?[]:void 0,P=[],I=0;I<v;I++){N[I]=O.length;var D=I+1;for(S=f[I],T=f[I+1],_=S;_<T;_++)if(M=l[_],g)for(w=o[M],E=o[M+1],x=w;x<E;x++)A=i[x],P[A]!==D?(P[A]=D,O.push(A),R[A]=b(u[_],r[x])):R[A]=y(R[A],b(u[_],r[x]));else for(w=o[M],E=o[M+1],x=w;x<E;x++)A=i[x],P[A]!==D&&(P[A]=D,O.push(A));if(g)for(var L=N[I],B=O.length,F=L;F<B;F++){var z=O[F];C[F]=R[z]}}return N[v]=O.length,k}});return v.toTex={2:"\\left(${args[0]}".concat(a.operators.multiply,"${args[1]}\\right)")},v}},function(t,e){var n={},r={},i={register:function(t,e,r,i){void 0===i&&(i=!1),n[t]={plugin:e,mapping:r,custom:i}},registerCustom:function(t,e,n,i){r[t]={plugin:e,mapping:n,data:i}},hasCore:function(t){return n.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return n[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){n.hasOwnProperty(t)&&delete n[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=i},function(t,e,n){(function(e){var n={};t.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(t,e){var r,i;"boolean"==typeof e?(r=2,i=e):(r=1,i=!0);for(var o=r;o<arguments.length;o++){var s=arguments[o];if(s)for(var a in s)i&&s[a]&&s[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=s[a]:(t[a]=t[a]||{},n.extend(t[a],i,s[a])):t[a]=s[a]}return t},n.clone=function(t,e){return n.extend({},e,t)},n.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},n.values=function(t){var e=[];if(Object.keys){for(var n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}for(var i in t)e.push(t[i]);return e},n.get=function(t,e,n,r){e=e.split(".").slice(n,r);for(var i=0;i<e.length;i+=1)t=t[e[i]];return t},n.set=function(t,e,r,i,o){var s=e.split(".").slice(i,o);return n.get(t,e,0,-1)[s[s.length-1]]=r,r},n.shuffle=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(n.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t},n.choose=function(t){return t[Math.floor(n.random()*t.length)]},n.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isFunction=function(t){return"function"==typeof t},n.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},n.isString=function(t){return"[object String]"===toString.call(t)},n.clamp=function(t,e,n){return t<e?e:t>n?n:t},n.sign=function(t){return t<0?-1:1},n.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(e,n){return n=void 0!==n?n:1,(e=void 0!==e?e:0)+t()*(n-e)};var t=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n.map=function(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n},n.topologicalSort=function(t){var e=[],r=[],i=[];for(var o in t)r[o]||i[o]||n._topologicalSort(o,r,i,t,e);return e},n._topologicalSort=function(t,e,r,i,o){var s=i[t]||[];r[t]=!0;for(var a=0;a<s.length;a+=1){var u=s[a];r[u]||(e[u]||n._topologicalSort(u,e,r,i,o))}r[t]=!1,e[t]=!0,o.push(t)},n.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var n=arguments[e];n._chained?t.push.apply(t,n._chained):t.push(n)}var r=function(){for(var e,n=new Array(arguments.length),r=0,i=arguments.length;r<i;r++)n[r]=arguments[r];for(r=0;r<t.length;r+=1){var o=t[r].apply(e,n);void 0!==o&&(e=o)}return e};return r._chained=t,r},n.chainPathBefore=function(t,e,r){return n.set(t,e,n.chain(r,n.get(t,e)))},n.chainPathAfter=function(t,e,r){return n.set(t,e,n.chain(n.get(t,e),r))},n._requireGlobal=function(t,n){return"undefined"!=typeof window?window[t]:void 0!==e?e[t]:null}}()}).call(this,n(50))},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.factory=function(t,e,n,o){var s=o("equalScalar",{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,n){return t===n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.eq(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return s(t.value,e.value)}});return s}},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s=n(2137).Buffer}catch(t){}function a(t,e,n){for(var r=0,i=Math.min(t.length,n),o=e;o<i;o++){var s=t.charCodeAt(o)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function u(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=t.length-6,r=0;n>=e;n-=6)i=a(t,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==e&&(i=a(t,e,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,a=Math.min(o,o-s)+n,c=0,h=n;h<a;h+=r)c=u(t,h,h+r,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}n.words[c]=0|l,u=0|h}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=h[t],d=l[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?m+n:c[f-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,n){var r,i,o,s=t.words,a=e.words,u=n.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,v=0|s[2],g=8191&v,y=v>>>13,b=0|s[3],x=8191&b,w=b>>>13,E=0|s[4],_=8191&E,S=E>>>13,T=0|s[5],A=8191&T,M=T>>>13,C=0|s[6],O=8191&C,N=C>>>13,k=0|s[7],R=8191&k,P=k>>>13,I=0|s[8],D=8191&I,L=I>>>13,B=0|s[9],F=8191&B,z=B>>>13,j=0|a[0],U=8191&j,Y=j>>>13,W=0|a[1],X=8191&W,G=W>>>13,V=0|a[2],q=8191&V,H=V>>>13,K=0|a[3],$=8191&K,J=K>>>13,Z=0|a[4],Q=8191&Z,tt=Z>>>13,et=0|a[5],nt=8191&et,rt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var vt=(c+(r=Math.imul(l,U))|0)+((8191&(i=(i=Math.imul(l,Y))+Math.imul(f,U)|0))<<13)|0;c=((o=Math.imul(f,Y))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(p,U),i=(i=Math.imul(p,Y))+Math.imul(m,U)|0,o=Math.imul(m,Y);var gt=(c+(r=r+Math.imul(l,X)|0)|0)+((8191&(i=(i=i+Math.imul(l,G)|0)+Math.imul(f,X)|0))<<13)|0;c=((o=o+Math.imul(f,G)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(g,U),i=(i=Math.imul(g,Y))+Math.imul(y,U)|0,o=Math.imul(y,Y),r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,G)|0;var yt=(c+(r=r+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,q)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(x,U),i=(i=Math.imul(x,Y))+Math.imul(w,U)|0,o=Math.imul(w,Y),r=r+Math.imul(g,X)|0,i=(i=i+Math.imul(g,G)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,G)|0,r=r+Math.imul(p,q)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,H)|0;var bt=(c+(r=r+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(_,U),i=(i=Math.imul(_,Y))+Math.imul(S,U)|0,o=Math.imul(S,Y),r=r+Math.imul(x,X)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(g,q)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,J)|0;var xt=(c+(r=r+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(A,U),i=(i=Math.imul(A,Y))+Math.imul(M,U)|0,o=Math.imul(M,Y),r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,G)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,G)|0,r=r+Math.imul(x,q)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,J)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(c+(r=r+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(O,U),i=(i=Math.imul(O,Y))+Math.imul(N,U)|0,o=Math.imul(N,Y),r=r+Math.imul(A,X)|0,i=(i=i+Math.imul(A,G)|0)+Math.imul(M,X)|0,o=o+Math.imul(M,G)|0,r=r+Math.imul(_,q)|0,i=(i=i+Math.imul(_,H)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,J)|0,r=r+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0;var Et=(c+(r=r+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(R,U),i=(i=Math.imul(R,Y))+Math.imul(P,U)|0,o=Math.imul(P,Y),r=r+Math.imul(O,X)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,G)|0,r=r+Math.imul(A,q)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(M,q)|0,o=o+Math.imul(M,H)|0,r=r+Math.imul(_,$)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(g,nt)|0,i=(i=i+Math.imul(g,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var _t=(c+(r=r+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(f,ut)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(D,U),i=(i=Math.imul(D,Y))+Math.imul(L,U)|0,o=Math.imul(L,Y),r=r+Math.imul(R,X)|0,i=(i=i+Math.imul(R,G)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,G)|0,r=r+Math.imul(O,q)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(A,$)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,J)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(x,nt)|0,i=(i=i+Math.imul(x,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0;var St=(c+(r=r+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(F,U),i=(i=Math.imul(F,Y))+Math.imul(z,U)|0,o=Math.imul(z,Y),r=r+Math.imul(D,X)|0,i=(i=i+Math.imul(D,G)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,G)|0,r=r+Math.imul(R,q)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(x,ot)|0,i=(i=i+Math.imul(x,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,ct)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,r=r+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Tt=(c+(r=r+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;c=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(F,X),i=(i=Math.imul(F,G))+Math.imul(z,X)|0,o=Math.imul(z,G),r=r+Math.imul(D,q)|0,i=(i=i+Math.imul(D,H)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(R,$)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,J)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,rt)|0,r=r+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,r=r+Math.imul(x,ut)|0,i=(i=i+Math.imul(x,ct)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0;var At=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(F,q),i=(i=Math.imul(F,H))+Math.imul(z,q)|0,o=Math.imul(z,H),r=r+Math.imul(D,$)|0,i=(i=i+Math.imul(D,J)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,J)|0,r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,r=r+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(x,lt)|0,i=(i=i+Math.imul(x,ft)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ft)|0;var Mt=(c+(r=r+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(F,$),i=(i=Math.imul(F,J))+Math.imul(z,$)|0,o=Math.imul(z,J),r=r+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(R,nt)|0,i=(i=i+Math.imul(R,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(_,lt)|0,i=(i=i+Math.imul(_,ft)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ft)|0;var Ct=(c+(r=r+Math.imul(x,pt)|0)|0)+((8191&(i=(i=i+Math.imul(x,mt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(F,Q),i=(i=Math.imul(F,tt))+Math.imul(z,Q)|0,o=Math.imul(z,tt),r=r+Math.imul(D,nt)|0,i=(i=i+Math.imul(D,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,r=r+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,r=r+Math.imul(A,lt)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,ft)|0;var Ot=(c+(r=r+Math.imul(_,pt)|0)|0)+((8191&(i=(i=i+Math.imul(_,mt)|0)+Math.imul(S,pt)|0))<<13)|0;c=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(F,nt),i=(i=Math.imul(F,rt))+Math.imul(z,nt)|0,o=Math.imul(z,rt),r=r+Math.imul(D,ot)|0,i=(i=i+Math.imul(D,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,r=r+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(O,lt)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var Nt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,mt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(F,ot),i=(i=Math.imul(F,st))+Math.imul(z,ot)|0,o=Math.imul(z,st),r=r+Math.imul(D,ut)|0,i=(i=i+Math.imul(D,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,r=r+Math.imul(R,lt)|0,i=(i=i+Math.imul(R,ft)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ft)|0;var kt=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(F,ut),i=(i=Math.imul(F,ct))+Math.imul(z,ut)|0,o=Math.imul(z,ct),r=r+Math.imul(D,lt)|0,i=(i=i+Math.imul(D,ft)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,ft)|0;var Rt=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,mt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(F,lt),i=(i=Math.imul(F,ft))+Math.imul(z,lt)|0,o=Math.imul(z,ft);var Pt=(c+(r=r+Math.imul(D,pt)|0)|0)+((8191&(i=(i=i+Math.imul(D,mt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var It=(c+(r=Math.imul(F,pt))|0)+((8191&(i=(i=Math.imul(F,mt))+Math.imul(z,pt)|0))<<13)|0;return c=((o=Math.imul(z,mt))+(i>>>13)|0)+(It>>>26)|0,It&=67108863,u[0]=vt,u[1]=gt,u[2]=yt,u[3]=bt,u[4]=xt,u[5]=wt,u[6]=Et,u[7]=_t,u[8]=St,u[9]=Tt,u[10]=At,u[11]=Mt,u[12]=Ct,u[13]=Ot,u[14]=Nt,u[15]=kt,u[16]=Rt,u[17]=Pt,u[18]=It,0!==c&&(u[19]=c,n.length++),n};function p(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(d=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},m.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=n[h+d],m=r[h+d],v=n[h+d+s],g=r[h+d+s],y=l*v-f*g;g=l*g+f*v,v=y,n[h+d]=p+v,r[h+d]=m+g,n[h+d+s]=p-v,r[h+d+s]=m-g,d!==a&&(y=u*l-c*f,f=u*f+c*l,l=y)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,h,l,r,i);for(var d=0;d<r;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),p(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,u);0===h.negative&&(r=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var f=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(i,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(a),s.isub(u)):(n.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,f=1;0==(n.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},i(y,g),y.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,g),i(x,g),i(w,g),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return v[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},E.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,v=0;0!==m.cmp(a);v++)m=m.redSqr();r(v<p);var g=this.pow(l,new o(1).iushln(p-v-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=v}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],h=u-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===r&&0===h)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},i(_,E),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(2136)(t))},function(t,e,n){"use strict";var r=n(270),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,e,n){t.exports={BOOT:n(954),CREATE:n(955),DESTROY:n(956),PAUSE:n(957),POST_UPDATE:n(958),PRE_UPDATE:n(959),READY:n(960),RENDER:n(961),RESUME:n(962),SHUTDOWN:n(963),SLEEP:n(964),START:n(965),TRANSITION_COMPLETE:n(966),TRANSITION_INIT:n(967),TRANSITION_OUT:n(968),TRANSITION_START:n(969),TRANSITION_WAKE:n(970),UPDATE:n(971),WAKE:n(972)}},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,n){t.exports=n(1672)},function(t,e,n){var r=n(16),i=function(){var t,e,n,o,s,a,u=arguments[0]||{},c=1,h=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},c=2),h===c&&(u=this,--c);c<h;c++)if(null!=(t=arguments[c]))for(e in t)n=u[e],u!==(o=t[e])&&(l&&o&&(r(o)||(s=Array.isArray(o)))?(s?(s=!1,a=n&&Array.isArray(n)?n:[]):a=n&&r(n)?n:{},u[e]=i(l,a,o)):void 0!==o&&(u[e]=o));return u};t.exports=i},function(t,e,n){var r=n(0),i=n(35),o=n(150),s=n(1),a=n(336),u=n(337),c=n(612),h=n(234),l=new r({initialize:function(t,e){this.loader=t,this.cache=s(e,"cache",!1),this.type=s(e,"type",!1),this.key=s(e,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=s(e,"url"),void 0===this.url?this.url=t.path+n+"."+s(e,"extension",""):"function"!=typeof this.url&&(this.url=t.path+this.url),this.src="",this.xhrSettings=h(s(e,"responseType",void 0)),s(e,"xhrSettings",!1)&&(this.xhrSettings=u(this.xhrSettings,s(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?i.FILE_POPULATED:i.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===i.FILE_POPULATED?this.loader.nextFile(this,!0):(this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=c(this,this.loader.xhr))},onLoad:function(t,e){var n=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===e.target.status,r=!(e.target&&200!==e.target.status)||n;4===t.readyState&&t.status>=400&&t.status<=599&&(r=!1),this.resetXHR(),this.loader.nextFile(this,r)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=i.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=i.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=i.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,n=this.type;this.loader.emit(o.FILE_COMPLETE,e,n,t),this.loader.emit(o.FILE_KEY_COMPLETE+n+"-"+e,e,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(t,e,n){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var r=new FileReader;r.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||n)+";base64,"+r.result.split(",")[1]},r.onerror=t.onerror,r.readAsDataURL(e)}},l.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=l},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="DimensionError",r.prototype.isDimensionError=!0,t.exports=r},function(t,e){t.exports=function(t,e,n){return Math.max(e,Math.min(n,t))}},function(t,e){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null};t.exports=n},function(t,e,n){var r={};t.exports=r;var i=n(61),o=n(73),s=n(186),a=n(30),u=n(74),c=n(343);!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(e){var n={id:a.nextId(),type:"body",label:"Body",gameObject:null,parts:[],plugin:{},angle:0,vertices:i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,ignoreGravity:!1,ignorePointer:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},r=a.extend(n,e);return t(r,e),r},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var t=function(t,e){e=e||{},r.set(t,{bounds:t.bounds||u.create(t.vertices),positionPrev:t.positionPrev||o.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),i.rotate(t.vertices,t.angle,t.position),c.rotate(t.axes,t.angle),u.update(t.bounds,t.vertices,t.velocity),r.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia});var n=t.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);t.render.fillStyle=t.render.fillStyle||n,t.render.strokeStyle=t.render.strokeStyle||"#000",t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};r.set=function(t,e,n){var i;for(i in"string"==typeof e&&(i=e,(e={})[i]=n),e)if(e.hasOwnProperty(i))switch(n=e[i],i){case"isStatic":r.setStatic(t,n);break;case"isSleeping":s.set(t,n);break;case"mass":r.setMass(t,n);break;case"density":r.setDensity(t,n);break;case"inertia":r.setInertia(t,n);break;case"vertices":r.setVertices(t,n);break;case"position":r.setPosition(t,n);break;case"angle":r.setAngle(t,n);break;case"velocity":r.setVelocity(t,n);break;case"angularVelocity":r.setAngularVelocity(t,n);break;case"parts":r.setParts(t,n);break;default:t[i]=n}},r.setStatic=function(t,e){for(var n=0;n<t.parts.length;n++){var r=t.parts[n];r.isStatic=e,e?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null)}},r.setMass=function(t,e){var n=t.inertia/(t.mass/6);t.inertia=n*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,e){r.setMass(t,e*t.area),t.density=e},r.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},r.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=i.create(e,t),t.axes=c.fromVertices(t.vertices),t.area=i.area(t.vertices),r.setMass(t,t.density*t.area);var n=i.centre(t.vertices);i.translate(t.vertices,n,-1),r.setInertia(t,r._inertiaScale*i.inertia(t.vertices,t.mass)),i.translate(t.vertices,t.position),u.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,e,n){var o;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<e.length;o++){var s=e[o];s!==t&&(s.parent=t,t.parts.push(s))}if(1!==t.parts.length){if(n=void 0===n||n){var a=[];for(o=0;o<e.length;o++)a=a.concat(e[o].vertices);i.clockwiseSort(a);var u=i.hull(a),c=i.centre(u);r.setVertices(t,u),i.translate(t.vertices,c)}var h=r._totalProperties(t);t.area=h.area,t.parent=t,t.position.x=h.centre.x,t.position.y=h.centre.y,t.positionPrev.x=h.centre.x,t.positionPrev.y=h.centre.y,r.setMass(t,h.mass),r.setInertia(t,h.inertia),r.setPosition(t,h.centre)}},r.setPosition=function(t,e){var n=o.sub(e,t.position);t.positionPrev.x+=n.x,t.positionPrev.y+=n.y;for(var r=0;r<t.parts.length;r++){var s=t.parts[r];s.position.x+=n.x,s.position.y+=n.y,i.translate(s.vertices,n),u.update(s.bounds,s.vertices,t.velocity)}},r.setAngle=function(t,e){var n=e-t.angle;t.anglePrev+=n;for(var r=0;r<t.parts.length;r++){var s=t.parts[r];s.angle+=n,i.rotate(s.vertices,n,t.position),c.rotate(s.axes,n),u.update(s.bounds,s.vertices,t.velocity),r>0&&o.rotateAbout(s.position,n,t.position,s.position)}},r.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=o.magnitude(t.velocity)},r.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},r.translate=function(t,e){r.setPosition(t,o.add(t.position,e))},r.rotate=function(t,e,n){if(n){var i=Math.cos(e),o=Math.sin(e),s=t.position.x-n.x,a=t.position.y-n.y;r.setPosition(t,{x:n.x+(s*i-a*o),y:n.y+(s*o+a*i)}),r.setAngle(t,t.angle+e)}else r.setAngle(t,t.angle+e)},r.scale=function(t,e,n,o){var s=0,a=0;o=o||t.position;for(var h=0;h<t.parts.length;h++){var l=t.parts[h];i.scale(l.vertices,e,n,o),l.axes=c.fromVertices(l.vertices),l.area=i.area(l.vertices),r.setMass(l,t.density*l.area),i.translate(l.vertices,{x:-l.position.x,y:-l.position.y}),r.setInertia(l,r._inertiaScale*i.inertia(l.vertices,l.mass)),i.translate(l.vertices,{x:l.position.x,y:l.position.y}),h>0&&(s+=l.area,a+=l.inertia),l.position.x=o.x+(l.position.x-o.x)*e,l.position.y=o.y+(l.position.y-o.y)*n,u.update(l.bounds,l.vertices,t.velocity)}t.parts.length>1&&(t.area=s,t.isStatic||(r.setMass(t,t.density*s),r.setInertia(t,a))),t.circleRadius&&(e===n?t.circleRadius*=e:t.circleRadius=null)},r.update=function(t,e,n,r){var s=Math.pow(e*n*t.timeScale,2),a=1-t.frictionAir*n*t.timeScale,h=t.position.x-t.positionPrev.x,l=t.position.y-t.positionPrev.y;t.velocity.x=h*a*r+t.force.x/t.mass*s,t.velocity.y=l*a*r+t.force.y/t.mass*s,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*r+t.torque/t.inertia*s,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=o.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var f=0;f<t.parts.length;f++){var d=t.parts[f];i.translate(d.vertices,t.velocity),f>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),0!==t.angularVelocity&&(i.rotate(d.vertices,t.angularVelocity,t.position),c.rotate(d.axes,t.angularVelocity),f>0&&o.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),u.update(d.bounds,d.vertices,t.velocity)}},r.applyForce=function(t,e,n){t.force.x+=n.x,t.force.y+=n.y;var r=e.x-t.position.x,i=e.y-t.position.y;t.torque+=r*n.y-i*n.x},r._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===t.parts.length?0:1;n<t.parts.length;n++){var r=t.parts[n],i=r.mass!==1/0?r.mass:1;e.mass+=i,e.area+=r.area,e.inertia+=r.inertia,e.centre=o.add(e.centre,o.mult(r.position,i))}return e.centre=o.div(e.centre,e.mass),e}}()},function(t,e,n){var r=n(1);t.exports=function(t,e,n,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=s.width),void 0===i&&(i=s.height);var a=r(o,"isNotEmpty",!1),u=r(o,"isColliding",!1),c=r(o,"hasInterestingFace",!1);t<0&&(n+=t,t=0),e<0&&(i+=e,e=0),t+n>s.width&&(n=Math.max(s.width-t,0)),e+i>s.height&&(i=Math.max(s.height-e,0));for(var h=[],l=e;l<e+i;l++)for(var f=t;f<t+n;f++){var d=s.data[l][f];if(null!==d){if(a&&-1===d.index)continue;if(u&&!d.collides)continue;if(c&&!d.hasInterestingFace)continue;h.push(d)}}return h}},function(t,e,n){"use strict";e.factory=function(t,e,r,i){var o=r(n(249)),s=r(n(75)),a=i("divide",{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Fraction | BigNumber":function(t,e){var n=t.clone(),r=o(1,s(e));return n.value=a(null===n.value?n._normalize(r):n.value,e),n},"number | Fraction | BigNumber, Unit":function(t,e){var n=e.clone();n=n.pow(-1);var r=o(1,s(t));return n.value=a(t,null===e.value?e._normalize(r):e.value),n},"Unit, Unit":function(t,e){return t.divide(e)}});return a}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(15).hasOwnProperty;function o(t,e){return!(!t||"object"!==r(t))&&(!!i(u,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function s(t,e){return!(!t||"function"!=typeof t[e])&&(!(i(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t))&&(!!i(c,e)||!(e in Object.prototype)&&!(e in Function.prototype)))}function a(t){return"object"===r(t)&&t&&t.constructor===Object}var u={length:!0,name:!0},c={toString:!0,valueOf:!0,toLocaleString:!0};e.getSafeProperty=function(t,e){if(a(t)&&o(t,e))return t[e];if("function"==typeof t[e]&&s(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')},e.setSafeProperty=function(t,e,n){if(a(t)&&o(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')},e.isSafeProperty=o,e.validateSafeMethod=function(t,e){if(!s(t,e))throw new Error('No access to method "'+e+'"')},e.isSafeMethod=s,e.isPlainObject=a},function(t,e,n){"use strict";(function(t){var r=n(2099),i=n(2100),o=n(738);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(h(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,r){return Y(j(e,t.length-n),t,n,r)}function x(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function E(t,e,n,r){return Y(U(e),t,n,r)}function _(t,e,n,r){return Y(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return h(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),h=t.slice(e,n),l=0;l<a;++l)if(c[l]!==h[l]){o=c[l],s=h[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function O(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:j(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(50))},function(t,e,n){"use strict";var r=n(15).extend;e.name="add",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(53)),u=n(9),c=i(n(118)),h=i(n(368)),l=i(n(134)),f=i(n(19)),d=i(n(18)),p=o("add",r({"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,a)},"DenseMatrix, SparseMatrix":function(t,e){return c(t,e,a,!1)},"SparseMatrix, DenseMatrix":function(t,e){return c(e,t,a,!0)},"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,a)},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"DenseMatrix, any":function(t,e){return d(t,e,a,!1)},"SparseMatrix, any":function(t,e){return l(t,e,a,!1)},"any, DenseMatrix":function(t,e){return d(e,t,a,!0)},"any, SparseMatrix":function(t,e){return l(e,t,a,!0)},"Array, any":function(t,e){return d(s(t),e,a,!1).valueOf()},"any, Array":function(t,e){return d(s(e),t,a,!0).valueOf()},"any, any":a,"any, any, ...any":function(t,e,n){for(var r=p(t,e),i=0;i<n.length;i++)r=p(r,n[i]);return r}},a.signatures));return p.toTex={2:"\\left(${args[0]}".concat(u.operators.add,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(39);function i(t,e){var n=t.size(),i=e.size();if(n.length!==i.length)throw new r(n.length,i.length)}e.name="subtract",e.factory=function(t,e,r,o){var s=n(9),a=r(n(3)),u=r(n(53)),c=r(n(120)),h=r(n(118)),l=r(n(54)),f=r(n(250)),d=r(n(134)),p=r(n(19)),m=r(n(18)),v=o("subtract",{"number, number":function(t,e){return t-e},"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":function(t,e){if(null===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=v(n.value,e.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(t,e){return i(t,e),f(t,e,v)},"SparseMatrix, DenseMatrix":function(t,e){return i(t,e),l(e,t,v,!0)},"DenseMatrix, SparseMatrix":function(t,e){return i(t,e),h(t,e,v,!1)},"DenseMatrix, DenseMatrix":function(t,e){return i(t,e),p(t,e,v)},"Array, Array":function(t,e){return v(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return v(a(t),e)},"Matrix, Array":function(t,e){return v(t,a(e))},"SparseMatrix, any":function(t,e){return d(t,c(e),u)},"DenseMatrix, any":function(t,e){return m(t,e,v)},"any, SparseMatrix":function(t,e){return d(e,t,v,!0)},"any, DenseMatrix":function(t,e){return m(e,t,v,!0)},"Array, any":function(t,e){return m(a(t),e,v,!1).valueOf()},"any, Array":function(t,e){return m(a(e),t,v,!0).valueOf()}});return v.toTex={2:"\\left(${args[0]}".concat(s.operators.subtract,"${args[1]}\\right)")},v}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(692),o=n(15).deepEqual,s=n(15).hasOwnProperty;e.name="Node",e.path="expression.node",e.math=!0,e.factory=function(t,e,n,a,u){function c(){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator")}return c.prototype.eval=function(t){return this.compile().eval(t)},c.prototype.type="Node",c.prototype.isNode=!0,c.prototype.comment="",c.prototype.compile=function(){var t=this._compile(u.expression.mathWithTransform,{}),e={};return{eval:function(n){var r=n||{};return function(t){for(var e in t)if(s(t,e)&&e in i)throw new Error('Scope contains an illegal symbol, "'+e+'" is a reserved keyword')}(r),t(r,e,null)}}},c.prototype._compile=function(t,e){throw new Error("Method _compile should be implemented by type "+this.type)},c.prototype.forEach=function(t){throw new Error("Cannot run forEach on a Node interface")},c.prototype.map=function(t){throw new Error("Cannot run map on a Node interface")},c.prototype._ifNode=function(e){if(!t.isNode(e))throw new TypeError("Callback function must return a Node");return e},c.prototype.traverse=function(t){t(this,null,null),function t(e,n){e.forEach(function(e,r,i){n(e,r,i),t(e,n)})}(this,t)},c.prototype.transform=function(t){return function t(e,n){return e.map(function(e,r,i){return t(n(e,r,i),n)})}(t(this,null,null),t)},c.prototype.filter=function(t){var e=[];return this.traverse(function(n,r,i){t(n,r,i)&&e.push(n)}),e},c.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},c.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},c.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},c.prototype.cloneDeep=function(){return this.map(function(t){return t.cloneDeep()})},c.prototype.equals=function(t){return!!t&&o(this,t)},c.prototype.toString=function(t){var e;if(t&&"object"===r(t))switch(r(t.handler)){case"object":case"undefined":break;case"function":e=t.handler(this,t);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==e?e:this._toString(t)},c.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},c.prototype.toHTML=function(t){var e;if(t&&"object"===r(t))switch(r(t.handler)){case"object":case"undefined":break;case"function":e=t.handler(this,t);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==e?e:this.toHTML(t)},c.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},c.prototype.toTex=function(t){var e;if(t&&"object"===r(t))switch(r(t.handler)){case"object":case"undefined":break;case"function":e=t.handler(this,t);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==e?e:this._toTex(t)},c.prototype._toTex=function(t){throw new Error("_toTex not implemented for "+this.type)},c.prototype.getIdentifier=function(){return this.type},c.prototype.getContent=function(){return this},c}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r,i,o,s=n(58),a=n(213),u=[],c=!1;t.exports=(o=function(){var t=0;return u.forEach(function(e){e.parent&&t++}),t},{create2D:function(t,e,n){return r(t,e,n,s.CANVAS)},create:r=function(t,e,n,r,o){var h;void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=s.CANVAS),void 0===o&&(o=!1);var l=i(r);return null===l?(l={parent:t,canvas:document.createElement("canvas"),type:r},r===s.CANVAS&&u.push(l),h=l.canvas):(l.parent=t,h=l.canvas),o&&(l.parent=h),h.width=e,h.height=n,c&&r===s.CANVAS&&a.disable(h.getContext("2d")),h},createWebGL:function(t,e,n){return r(t,e,n,s.WEBGL)},disableSmoothing:function(){c=!0},enableSmoothing:function(){c=!1},first:i=function(t){if(void 0===t&&(t=s.CANVAS),t===s.WEBGL)return null;for(var e=0;e<u.length;e++){var n=u[e];if(!n.parent&&n.type===t)return n}return null},free:function(){return u.length-o()},pool:u,remove:function(t){var e=t instanceof HTMLCanvasElement;u.forEach(function(n){(e&&n.canvas===t||!e&&n.parent===t)&&(n.parent=null,n.canvas.width=1,n.canvas.height=1)})},total:o})},function(t,e){t.exports=function(t,e,n,r,i){var o=r.alpha*n.alpha;if(o<=0)return!1;var s=t._tempMatrix1.copyFromArray(r.matrix.matrix),a=t._tempMatrix2.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),u=t._tempMatrix3;return i?(s.multiplyWithOffset(i,-r.scrollX*n.scrollFactorX,-r.scrollY*n.scrollFactorY),a.e=n.x,a.f=n.y,s.multiply(a,u)):(a.e-=r.scrollX*n.scrollFactorX,a.f-=r.scrollY*n.scrollFactorY,s.multiply(a,u)),e.globalCompositeOperation=t.blendModes[n.blendMode],e.globalAlpha=o,e.save(),u.setToContext(e),!0}},function(t,e,n){"use strict";e.factory=function(t,e,n,r){var i=r("add",{"number, number":function(t,e){return t+e},"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null===t.value||void 0===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value||void 0===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=i(n.value,e.value),n.fixPrefix=!1,n}});return i}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm03",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,s){var a=t._data,u=t._size,c=t._datatype,h=e._values,l=e._index,f=e._ptr,d=e._size,p=e._datatype;if(u.length!==d.length)throw new r(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,v=u[0],g=u[1],y=0,b=n;"string"==typeof c&&c===p&&(m=c,y=i.convert(0,m),b=i.find(n,[m,m]));for(var x=[],w=0;w<v;w++)x[w]=[];for(var E=[],_=[],S=0;S<g;S++){for(var T=S+1,A=f[S],M=f[S+1],C=A;C<M;C++){var O=l[C];E[O]=s?b(h[C],a[O][S]):b(a[O][S],h[C]),_[O]=T}for(var N=0;N<v;N++)_[N]===T?x[N][S]=E[N]:x[N][S]=s?b(y,a[N][S]):b(a[N][S],y)}return new o({data:x,size:[v,g],datatype:m})}}},function(t,e,n){"use strict";e.name="algorithm12",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var s=t._values,a=t._index,u=t._ptr,c=t._size,h=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,f=c[0],d=c[1],p=n;"string"==typeof h&&(l=h,e=r.convert(e,l),p=r.find(n,[l,l]));for(var m=[],v=new i({data:m,size:[f,d],datatype:l}),g=[],y=[],b=0;b<d;b++){for(var x=b+1,w=u[b],E=u[b+1],_=w;_<E;_++){var S=a[_];g[S]=s[_],y[S]=x}for(var T=0;T<f;T++)0===b&&(m[T]=[]),y[T]===x?m[T][b]=o?p(e,g[T]):p(g[T],e):m[T][b]=o?p(e,0):p(0,e)}return v}}},function(t,e,n){"use strict";e.name="algorithm11",e.factory=function(t,e,r,i){var o=r(n(31)),s=t.SparseMatrix;return function(t,e,n,r){var a=t._values,u=t._index,c=t._ptr,h=t._size,l=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=h[0],p=h[1],m=o,v=0,g=n;"string"==typeof l&&(f=l,m=i.find(o,[f,f]),v=i.convert(0,f),e=i.convert(e,f),g=i.find(n,[f,f]));for(var y=[],b=[],x=[],w=new s({values:y,index:b,ptr:x,size:[d,p],datatype:f}),E=0;E<p;E++){x[E]=b.length;for(var _=c[E],S=c[E+1],T=_;T<S;T++){var A=u[T],M=r?g(e,a[T]):g(a[T],e);m(M,v)||(b.push(A),y.push(M))}}return x[p]=b.length,w}}},function(t,e,n){var r=n(86),i=n(25),o=n(171);t.exports=function(t,e,n){e.x=i(n,"x",0),e.y=i(n,"y",0),e.depth=i(n,"depth",0),e.flipX=i(n,"flipX",!1),e.flipY=i(n,"flipY",!1);var s=i(n,"scale",null);"number"==typeof s?e.setScale(s):null!==s&&(e.scaleX=i(s,"x",1),e.scaleY=i(s,"y",1));var a=i(n,"scrollFactor",null);"number"==typeof a?e.setScrollFactor(a):null!==a&&(e.scrollFactorX=i(a,"x",1),e.scrollFactorY=i(a,"y",1)),e.rotation=i(n,"rotation",0);var u=i(n,"angle",null);null!==u&&(e.angle=u),e.alpha=i(n,"alpha",1);var c=i(n,"origin",null);if("number"==typeof c)e.setOrigin(c);else if(null!==c){var h=i(c,"x",.5),l=i(c,"y",.5);e.setOrigin(h,l)}return e.scaleMode=i(n,"scaleMode",o.DEFAULT),e.blendMode=i(n,"blendMode",r.NORMAL),e.visible=i(n,"visible",!0),i(n,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e,n){var r={VERSION:"3.18.1",BlendModes:n(86),ScaleModes:n(171),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=r},function(t,e){t.exports=function(t,e,n,r,i,o){var s;void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=1);var a=0,u=t.length;if(1===o)for(s=i;s<u;s++)t[s][e]=n+a*r,a++;else for(s=i;s>=0;s--)t[s][e]=n+a*r,a++;return t}},function(t,e,n){t.exports={BLUR:n(873),BOOT:n(874),DESTROY:n(875),FOCUS:n(876),HIDDEN:n(877),PAUSE:n(878),POST_RENDER:n(879),POST_STEP:n(880),PRE_RENDER:n(881),PRE_STEP:n(882),READY:n(883),RESUME:n(884),STEP:n(885),VISIBLE:n(886)}},function(t,e,n){var r={};t.exports=r;var i=n(73),o=n(30);r.create=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o={x:i.x,y:i.y,index:r,body:e,isInternal:!1,contact:null};o.contact={vertex:o,normalImpulse:0,tangentImpulse:0},n.push(o)}return n},r.fromPath=function(t,e){var n=[];return t.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(t,e,r){n.push({x:parseFloat(e),y:parseFloat(r)})}),r.create(n,e)},r.centre=function(t){for(var e,n,o,s=r.area(t,!0),a={x:0,y:0},u=0;u<t.length;u++)o=(u+1)%t.length,e=i.cross(t[u],t[o]),n=i.mult(i.add(t[u],t[o]),e),a=i.add(a,n);return i.div(a,6*s)},r.mean=function(t){for(var e={x:0,y:0},n=0;n<t.length;n++)e.x+=t[n].x,e.y+=t[n].y;return i.div(e,t.length)},r.area=function(t,e){for(var n=0,r=t.length-1,i=0;i<t.length;i++)n+=(t[r].x-t[i].x)*(t[r].y+t[i].y),r=i;return e?n/2:Math.abs(n)/2},r.inertia=function(t,e){for(var n,r,o=0,s=0,a=t,u=0;u<a.length;u++)r=(u+1)%a.length,o+=(n=Math.abs(i.cross(a[r],a[u])))*(i.dot(a[r],a[r])+i.dot(a[r],a[u])+i.dot(a[u],a[u])),s+=n;return e/6*(o/s)},r.translate=function(t,e,n){var r;if(n)for(r=0;r<t.length;r++)t[r].x+=e.x*n,t[r].y+=e.y*n;else for(r=0;r<t.length;r++)t[r].x+=e.x,t[r].y+=e.y;return t},r.rotate=function(t,e,n){if(0!==e){for(var r=Math.cos(e),i=Math.sin(e),o=0;o<t.length;o++){var s=t[o],a=s.x-n.x,u=s.y-n.y;s.x=n.x+(a*r-u*i),s.y=n.y+(a*i+u*r)}return t}},r.contains=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=t[(n+1)%t.length];if((e.x-r.x)*(i.y-r.y)+(e.y-r.y)*(r.x-i.x)>0)return!1}return!0},r.scale=function(t,e,n,o){if(1===e&&1===n)return t;var s,a;o=o||r.centre(t);for(var u=0;u<t.length;u++)s=t[u],a=i.sub(s,o),t[u].x=o.x+a.x*e,t[u].y=o.y+a.y*n;return t},r.chamfer=function(t,e,n,r,s){e="number"==typeof e?[e]:e||[8],n=void 0!==n?n:-1,r=r||2,s=s||14;for(var a=[],u=0;u<t.length;u++){var c=t[u-1>=0?u-1:t.length-1],h=t[u],l=t[(u+1)%t.length],f=e[u<e.length?u:e.length-1];if(0!==f){var d=i.normalise({x:h.y-c.y,y:c.x-h.x}),p=i.normalise({x:l.y-h.y,y:h.x-l.x}),m=Math.sqrt(2*Math.pow(f,2)),v=i.mult(o.clone(d),f),g=i.normalise(i.mult(i.add(d,p),.5)),y=i.sub(h,i.mult(g,m)),b=n;-1===n&&(b=1.75*Math.pow(f,.32)),(b=o.clamp(b,r,s))%2==1&&(b+=1);for(var x=Math.acos(i.dot(d,p))/b,w=0;w<b;w++)a.push(i.add(i.rotate(v,x*w),y))}else a.push(h)}return a},r.clockwiseSort=function(t){var e=r.mean(t);return t.sort(function(t,n){return i.angle(e,t)-i.angle(e,n)}),t},r.isConvex=function(t){var e,n,r,i,o=0,s=t.length;if(s<3)return null;for(e=0;e<s;e++)if(r=(e+2)%s,i=(t[n=(e+1)%s].x-t[e].x)*(t[r].y-t[n].y),(i-=(t[n].y-t[e].y)*(t[r].x-t[n].x))<0?o|=1:i>0&&(o|=2),3===o)return!1;return 0!==o||null},r.hull=function(t){var e,n,r=[],o=[];for((t=t.slice(0)).sort(function(t,e){var n=t.x-e.x;return 0!==n?n:t.y-e.y}),n=0;n<t.length;n+=1){for(e=t[n];o.length>=2&&i.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}for(n=t.length-1;n>=0;n-=1){for(e=t[n];r.length>=2&&i.cross3(r[r.length-2],r[r.length-1],e)<=0;)r.pop();r.push(e)}return r.pop(),o.pop(),r.concat(o)}},function(t,e,n){"use strict";e.factory=function(t,e,n,r){var i=r("multiplyScalar",{"number, number":function(t,e){return t*e},"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var n=e.clone();return n.value=null===n.value?n._normalize(t):i(n.value,t),n},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var n=t.clone();return n.value=null===n.value?n._normalize(e):i(n.value,e),n},"Unit, Unit":function(t,e){return t.multiply(e)}});return i}},function(t,e,n){"use strict";var r=n(159);e.transform=function(t){return t&&t.isIndexError?new r(t.index+1,t.min+1,void 0!==t.max?t.max+1:void 0):t}},function(t,e,n){"use strict";var r=n(15).clone,i=n(5).validateIndex,o=n(45).getSafeProperty,s=n(45).setSafeProperty,a=n(39);function u(t,e){if(1!==e.size().length)throw new a(e.size(),1);var n=e.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return o(t,n)}function c(t,e,n){if(1!==e.size().length)throw new a(e.size(),1);var i=e.dimension(0);if("string"!=typeof i)throw new TypeError("String expected as index to retrieve an object property");var o=r(t);return s(o,i,n),o}e.name="subset",e.factory=function(t,e,o,s){var h=o(n(3)),l=s("subset",{"Array, Index":function(t,e){var n=h(t).subset(e);return e.isScalar()?n:n.valueOf()},"Matrix, Index":function(t,e){return t.subset(e)},"Object, Index":u,"string, Index":function(e,n){if(!t.isIndex(n))throw new TypeError("Index expected");if(1!==n.size().length)throw new a(n.size().length,1);var r=e.length;i(n.min()[0],r),i(n.max()[0],r);var o=n.dimension(0),s="";return o.forEach(function(t){s+=e.charAt(t)}),s},"Array, Index, any":function(t,e,n){return h(r(t)).subset(e,n,void 0).valueOf()},"Array, Index, any, any":function(t,e,n,i){return h(r(t)).subset(e,n,i).valueOf()},"Matrix, Index, any":function(t,e,n){return t.clone().subset(e,n)},"Matrix, Index, any, any":function(t,e,n,r){return t.clone().subset(e,n,r)},"string, Index, string":f,"string, Index, string, string":f,"Object, Index, any":c});return l.toTex=void 0,l;function f(t,e,n,r){if(!e||!0!==e.isIndex)throw new TypeError("Index expected");if(1!==e.size().length)throw new a(e.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var o=e.dimension(0);if(o.size()[0]!==n.length)throw new a(o.size()[0],n.length);var s=t.length;i(e.min()[0]),i(e.max()[0]);for(var u=[],c=0;c<s;c++)u[c]=t.charAt(c);if(o.forEach(function(t,e){u[t]=n.charAt(e[0])}),u.length>s)for(var h=s-1,l=u.length;h<l;h++)u[h]||(u[h]=r);return u.join("")}}},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(109),a=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.ComputedSize,i.Depth,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Transform,i.Visible],initialize:function(t,e,n){void 0===e&&(e="Shape"),o.call(this,t,e),this.geom=n,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new s,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,n){return void 0===n&&(n=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=n,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]}});t.exports=a},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,e,n){"use strict";var r=n(15).clone,i=n(7).isInteger;e.name="Index",e.path="type",e.factory=function(t){function e(r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,o=arguments.length;i<o;i++){var s=arguments[i];if(t.isRange(s))this._dimensions.push(s),this._isScalar=!1;else if(Array.isArray(s)||t.isMatrix(s)){var a=n(s.valueOf());this._dimensions.push(a);var u=a.size();1===u.length&&1===u[0]||(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(n([s]));else{if("string"!=typeof s)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(s)}}}function n(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!i(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t.ImmutableDenseMatrix(e)}return e.prototype.type="Index",e.prototype.isIndex=!0,e.prototype.clone=function(){var t=new e;return t._dimensions=r(this._dimensions),t._isScalar=this._isScalar,t},e.create=function(t){var n=new e;return e.apply(n,t),n},e.prototype.size=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?1:r.size()[0]}return t},e.prototype.max=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.max()}return t},e.prototype.min=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.min()}return t},e.prototype.forEach=function(t){for(var e=0,n=this._dimensions.length;e<n;e++)t(this._dimensions[e],e,this)},e.prototype.dimension=function(t){return this._dimensions[t]||null},e.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},e.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},e.prototype.isScalar=function(){return this._isScalar},e.prototype.toArray=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t.push("string"==typeof r?r:r.toArray())}return t},e.prototype.valueOf=e.prototype.toArray,e.prototype.toString=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];"string"==typeof r?t.push(JSON.stringify(r)):t.push(r.toString())}return"["+t.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},e.fromJSON=function(t){return e.create(t.dimensions)},e}},function(t,e,n){"use strict";var r=n(4);e.name="abs",e.factory=function(t,e,n,i){var o=i("abs",{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},Fraction:function(t){return t.abs()},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.abs()}});return o.toTex={1:"\\left|${args[0]}\\right|"},o}},function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=n,n.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},function(t,e,n){"use strict";var r=e,i=n(32),o=n(69),s=n(760);r.assert=o,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(t,e){for(var n=[],r=1<<e+1,i=t.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(r-1);o=s>(r>>1)-1?(r>>1)-s:s,i.isubn(o)}else o=0;n.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(r-1)?e+1:1,u=1;u<a;u++)n.push(0);i.iushrn(a)}return n},r.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r=0,i=0;t.cmpn(-r)>0||e.cmpn(-i)>0;){var o,s,a,u=t.andln(3)+r&3,c=e.andln(3)+i&3;3===u&&(u=-1),3===c&&(c=-1),o=0==(1&u)?0:3!=(a=t.andln(7)+r&7)&&5!==a||2!==c?u:-u,n[0].push(o),s=0==(1&c)?0:3!=(a=e.andln(7)+i&7)&&5!==a||2!==u?c:-c,n[1].push(s),2*r===o+1&&(r=1-r),2*i===s+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return n},r.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,n){var r=n(0),i=n(8),o=new r({initialize:function(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.matrix=new Float32Array([t,e,n,r,i,o,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.c*this.c)}},scaleY:{get:function(){return Math.sqrt(this.b*this.b+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var n=this.matrix;return n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5],this},scale:function(t,e){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=e,n[3]*=e,this},rotate:function(t){var e=Math.sin(t),n=Math.cos(t),r=this.matrix,i=r[0],o=r[1],s=r[2],a=r[3];return r[0]=i*n+s*e,r[1]=o*n+a*e,r[2]=i*-e+s*n,r[3]=o*-e+a*n,this},multiply:function(t,e){var n=this.matrix,r=t.matrix,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],h=r[0],l=r[1],f=r[2],d=r[3],p=r[4],m=r[5],v=void 0===e?this:e;return v.a=h*i+l*s,v.b=h*o+l*a,v.c=f*i+d*s,v.d=f*o+d*a,v.e=p*i+m*s+u,v.f=p*o+m*a+c,v},multiplyWithOffset:function(t,e,n){var r=this.matrix,i=t.matrix,o=r[0],s=r[1],a=r[2],u=r[3],c=e*o+n*a+r[4],h=e*s+n*u+r[5],l=i[0],f=i[1],d=i[2],p=i[3],m=i[4],v=i[5];return r[0]=l*o+f*a,r[1]=l*s+f*u,r[2]=d*o+p*a,r[3]=d*s+p*u,r[4]=m*o+v*a+c,r[5]=m*s+v*u+h,this},transform:function(t,e,n,r,i,o){var s=this.matrix,a=s[0],u=s[1],c=s[2],h=s[3],l=s[4],f=s[5];return s[0]=t*a+e*c,s[1]=t*u+e*h,s[2]=n*a+r*c,s[3]=n*u+r*h,s[4]=i*a+o*c+l,s[5]=i*u+o*h+f,this},transformPoint:function(t,e,n){void 0===n&&(n={x:0,y:0});var r=this.matrix,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5];return n.x=t*i+e*s+u,n.y=t*o+e*a+c,n},invert:function(){var t=this.matrix,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=e*i-n*r;return t[0]=i/a,t[1]=-n/a,t[2]=-r/a,t[3]=e/a,t[4]=(r*s-i*o)/a,t[5]=-(e*s-n*o)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,n,r,i,o){var s=this.matrix;return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-r*i;if(t.translateX=e[4],t.translateY=e[5],n||r){var a=Math.sqrt(n*n+r*r);t.rotation=r>0?Math.acos(n/a):-Math.acos(n/a),t.scaleX=a,t.scaleY=s/a}else if(i||o){var u=Math.sqrt(i*i+o*o);t.rotation=.5*Math.PI-(o>0?Math.acos(-i/u):-Math.acos(i/u)),t.scaleX=s/u,t.scaleY=u}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,n,r,i){var o=this.matrix,s=Math.sin(n),a=Math.cos(n);return o[4]=t,o[5]=e,o[0]=a*r,o[1]=s*r,o[2]=-s*i,o[3]=a*i,this},applyInverse:function(t,e,n){void 0===n&&(n=new i);var r=this.matrix,o=r[0],s=r[1],a=r[2],u=r[3],c=r[4],h=r[5],l=1/(o*u+a*-s);return n.x=u*l*t+-a*l*e+(h*a-c*u)*l,n.y=o*l*e+-s*l*t+(-h*o+c*s)*l,n},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=o},function(t,e,n){var r=n(0),i=n(289),o=n(445),s=n(290),a=n(446),u=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,n,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,n,r,i){return void 0===r&&(r=255),void 0===i&&(i=!0),this._locked=!0,this.red=t,this.green=e,this.blue=n,this.alpha=r,this._locked=!1,this.update(i)},setGLTo:function(t,e,n,r){return void 0===r&&(r=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=n,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,n){return s(t,e,n,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,n=this.g,r=this.b,s=this.a;return this._color=i(e,n,r),this._color32=o(e,n,r,s),this._rgba="rgba("+e+","+n+","+r+","+s/255+")",t&&a(e,n,r,this),this},updateHSV:function(){var t=this.r,e=this.g,n=this.b;return a(t,e,n,this),this},clone:function(){return new u(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var n=Math.floor(t+Math.random()*(e-t)),r=Math.floor(t+Math.random()*(e-t)),i=Math.floor(t+Math.random()*(e-t));return this.setTo(n,r,i)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var n=Math.floor(t+Math.random()*(e-t));return this.setTo(n,n,n)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,n=this.g,r=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),this.setTo(e,n,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,s(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,s(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,s(this._h,this._s,t,this)}}});t.exports=u},function(t,e){var n={};t.exports=n,n.create=function(t,e){return{x:t||0,y:e||0}},n.clone=function(t){return{x:t.x,y:t.y}},n.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},n.rotate=function(t,e,n){var r=Math.cos(e),i=Math.sin(e);n||(n={});var o=t.x*r-t.y*i;return n.y=t.x*i+t.y*r,n.x=o,n},n.rotateAbout=function(t,e,n,r){var i=Math.cos(e),o=Math.sin(e);r||(r={});var s=n.x+((t.x-n.x)*i-(t.y-n.y)*o);return r.y=n.y+((t.x-n.x)*o+(t.y-n.y)*i),r.x=s,r},n.normalise=function(t){var e=n.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.cross=function(t,e){return t.x*e.y-t.y*e.x},n.cross3=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},n.add=function(t,e,n){return n||(n={}),n.x=t.x+e.x,n.y=t.y+e.y,n},n.sub=function(t,e,n){return n||(n={}),n.x=t.x-e.x,n.y=t.y-e.y,n},n.mult=function(t,e){return{x:t.x*e,y:t.y*e}},n.div=function(t,e){return{x:t.x/e,y:t.y/e}},n.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},n.neg=function(t){return{x:-t.x,y:-t.y}},n.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(t,e){var n={};t.exports=n,n.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&n.update(e,t),e},n.update=function(t,e,n){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var r=0;r<e.length;r++){var i=e[r];i.x>t.max.x&&(t.max.x=i.x),i.x<t.min.x&&(t.min.x=i.x),i.y>t.max.y&&(t.max.y=i.y),i.y<t.min.y&&(t.min.y=i.y)}n&&(n.x>0?t.max.x+=n.x:t.min.x+=n.x,n.y>0?t.max.y+=n.y:t.min.y+=n.y)},n.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},n.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},n.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},n.shift=function(t,e){var n=t.max.x-t.min.x,r=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+n,t.min.y=e.y,t.max.y=e.y+r}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.name="typeof",e.factory=function(t,e,n,i){var o=i("_typeof",{any:function(e){var n=r(e);return"object"===n?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":t.isBigNumber(e)?"BigNumber":t.isComplex(e)?"Complex":t.isFraction(e)?"Fraction":t.isMatrix(e)?"Matrix":t.isUnit(e)?"Unit":t.isIndex(e)?"Index":t.isRange(e)?"Range":t.isResultSet(e)?"ResultSet":t.isNode(e)?e.type:t.isChain(e)?"Chain":t.isHelp(e)?"Help":"Object":"function"===n?"Function":n}});return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm02",e.factory=function(t,e,i,o){var s=i(n(31)),a=t.SparseMatrix;return function(t,e,n,i){var u=t._data,c=t._size,h=t._datatype,l=e._values,f=e._index,d=e._ptr,p=e._size,m=e._datatype;if(c.length!==p.length)throw new r(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v,g=c[0],y=c[1],b=s,x=0,w=n;"string"==typeof h&&h===m&&(v=h,b=o.find(s,[v,v]),x=o.convert(0,v),w=o.find(n,[v,v]));for(var E=[],_=[],S=[],T=0;T<y;T++){S[T]=_.length;for(var A=d[T],M=d[T+1],C=A;C<M;C++){var O=f[C],N=i?w(l[C],u[O][T]):w(u[O][T],l[C]);b(N,x)||(_.push(O),E.push(N))}}return S[y]=_.length,new a({values:E,index:_,ptr:S,size:[g,y],datatype:v})}}},function(t,e,n){"use strict";var r=n(5);e.name="size",e.factory=function(t,e,i,o){var s=i(n(3)),a=o("size",{Matrix:function(t){return s(t.size())},Array:r.size,string:function(t){return"Array"===e.matrix?[t.length]:s([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===e.matrix?[]:s([])}});return a.toTex=void 0,a}},function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.css=e.deepExtend=e.animationEndEvents=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.inArray=function(t,e,n){var r=void 0;if(n){for(r in e)if(e.hasOwnProperty(r)&&e[r]===t)return!0}else for(r in e)if(e.hasOwnProperty(r)&&e[r]===t)return!0;return!1},e.stopPropagation=function(t){void 0!==(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.generateID=function(){var t="noty_"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+"_";return t+="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.outerHeight=function(t){var e=t.offsetHeight,n=window.getComputedStyle(t);return e+=parseInt(n.marginTop)+parseInt(n.marginBottom)},e.addListener=o,e.hasClass=s,e.addClass=function(t,e){var n=u(t),r=n+e;if(s(n,e))return;t.className=r.substring(1)},e.removeClass=function(t,e){var n=u(t),r=void 0;if(!s(t,e))return;r=n.replace(" "+e+" "," "),t.className=r.substring(1,r.length-1)},e.remove=a,e.classList=u,e.visibilityChangeFlow=function(){var t=void 0,e=void 0;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange");function n(){i.PageHidden?setTimeout(function(){Object.keys(i.Store).forEach(function(t){i.Store.hasOwnProperty(t)&&i.Store[t].options.visibilityControl&&i.Store[t].stop()})},100):setTimeout(function(){Object.keys(i.Store).forEach(function(t){i.Store.hasOwnProperty(t)&&i.Store[t].options.visibilityControl&&i.Store[t].resume()}),i.queueRenderAll()},100)}e&&o(document,e,function(){i.PageHidden=document[t],n()});o(window,"blur",function(){i.PageHidden=!0,n()}),o(window,"focus",function(){i.PageHidden=!1,n()})},e.createAudioElements=function(t){if(t.hasSound){var e=document.createElement("audio");t.options.sounds.sources.forEach(function(t){var n=document.createElement("source");n.src=t,n.type="audio/"+t.match(/\.([^.]+)$/)[1],e.appendChild(n)}),t.barDom?t.barDom.appendChild(e):document.querySelector("body").appendChild(e),e.volume=t.options.sounds.volume,t.soundPlayed||(e.play(),t.soundPlayed=!0),e.onended=function(){a(e)}}};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(1));e.animationEndEvents="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";e.deepExtend=function t(e){e=e||{};for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)i.hasOwnProperty(o)&&(Array.isArray(i[o])?e[o]=i[o]:"object"===r(i[o])&&null!==i[o]?e[o]=t(e[o],i[o]):e[o]=i[o])}return e};e.css=function(){var t=["Webkit","O","Moz","ms"],e={};function n(n){return n=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()}),e[n]||(e[n]=function(e){var n=document.body.style;if(e in n)return e;for(var r=t.length,i=e.charAt(0).toUpperCase()+e.slice(1),o=void 0;r--;)if((o=t[r]+i)in n)return o;return e}(n))}function r(t,e,r){e=n(e),t.style[e]=r}return function(t,e){var n=arguments,i=void 0,o=void 0;if(2===n.length)for(i in e)e.hasOwnProperty(i)&&void 0!==(o=e[i])&&e.hasOwnProperty(i)&&r(t,i,o);else r(t,n[1],n[2])}}();function o(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e=e.split(" ");for(var i=0;i<e.length;i++)document.addEventListener?t.addEventListener(e[i],n,r):document.attachEvent&&t.attachEvent("on"+e[i],n)}function s(t,e){return("string"==typeof t?t:u(t)).indexOf(" "+e+" ")>=0}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function u(t){return(" "+(t&&t.className||"")+" ").replace(/\s+/gi," ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Defaults=e.Store=e.Queues=e.DefaultMaxVisible=e.docTitle=e.DocModalCount=e.PageHidden=void 0,e.getQueueCounts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",e=0,n=a;u.hasOwnProperty(t)&&(n=u[t].maxVisible,Object.keys(c).forEach(function(n){c[n].options.queue!==t||c[n].closed||e++}));return{current:e,maxVisible:n}},e.addToQueue=function(t){u.hasOwnProperty(t.options.queue)||(u[t.options.queue]={maxVisible:a,queue:[]});u[t.options.queue].queue.push(t)},e.removeFromQueue=function(t){if(u.hasOwnProperty(t.options.queue)){var e=[];Object.keys(u[t.options.queue].queue).forEach(function(n){u[t.options.queue].queue[n].id!==t.id&&e.push(u[t.options.queue].queue[n])}),u[t.options.queue].queue=e}},e.queueRender=h,e.queueRenderAll=function(){Object.keys(u).forEach(function(t){h(t)})},e.ghostFix=function(t){var e=r.generateID("ghost"),n=document.createElement("div");n.setAttribute("id",e),r.css(n,{height:r.outerHeight(t.barDom)+"px"}),t.barDom.insertAdjacentHTML("afterend",n.outerHTML),r.remove(t.barDom),n=document.getElementById(e),r.addClass(n,"noty_fix_effects_height"),r.addListener(n,r.animationEndEvents,function(){r.remove(n)})},e.build=function(t){!function(t){if(t.options.container)return void(t.layoutDom=document.querySelector(t.options.container));var e="noty_layout__"+t.options.layout;t.layoutDom=document.querySelector("div#"+e),t.layoutDom||(t.layoutDom=document.createElement("div"),t.layoutDom.setAttribute("id",e),t.layoutDom.setAttribute("role","alert"),t.layoutDom.setAttribute("aria-live","polite"),r.addClass(t.layoutDom,"noty_layout"),document.querySelector("body").appendChild(t.layoutDom))}(t);var e='<div class="noty_body">'+t.options.text+"</div>"+function(t){if(l(t)){var e=document.createElement("div");return r.addClass(e,"noty_buttons"),Object.keys(t.options.buttons).forEach(function(n){e.appendChild(t.options.buttons[n].dom)}),t.options.buttons.forEach(function(t){e.appendChild(t.dom)}),e.outerHTML}return""}(t)+'<div class="noty_progressbar"></div>';t.barDom=document.createElement("div"),t.barDom.setAttribute("id",t.id),r.addClass(t.barDom,"noty_bar noty_type__"+t.options.type+" noty_theme__"+t.options.theme),t.barDom.innerHTML=e,p(t,"onTemplate")},e.hasButtons=l,e.handleModal=function(t){t.options.modal&&(0===i&&(n=document.querySelector("body"),o=document.createElement("div"),r.addClass(o,"noty_modal"),n.insertBefore(o,n.firstChild),r.addClass(o,"noty_modal_open"),r.addListener(o,r.animationEndEvents,function(){r.removeClass(o,"noty_modal_open")})),e.DocModalCount=i+=1);var n,o},e.handleModalClose=function(t){if(t.options.modal&&i>0&&(e.DocModalCount=i-=1,i<=0)){var n=document.querySelector(".noty_modal");n&&(r.removeClass(n,"noty_modal_open"),r.addClass(n,"noty_modal_close"),r.addListener(n,r.animationEndEvents,function(){r.remove(n)}))}},e.queueClose=f,e.dequeueClose=d,e.fire=p,e.openFlow=function(t){p(t,"afterShow"),f(t),r.addListener(t.barDom,"mouseenter",function(){d(t)}),r.addListener(t.barDom,"mouseleave",function(){f(t)})},e.closeFlow=function(t){delete c[t.id],t.closing=!1,p(t,"afterClose"),r.remove(t.barDom),0!==t.layoutDom.querySelectorAll(".noty_bar").length||t.options.container||r.remove(t.layoutDom);(r.inArray("docVisible",t.options.titleCount.conditions)||r.inArray("docHidden",t.options.titleCount.conditions))&&s.decrement();h(t.options.queue)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.PageHidden=!1;var i=e.DocModalCount=0,o={originalTitle:null,count:0,changed:!1,timer:-1},s=e.docTitle={increment:function(){o.count++,s._update()},decrement:function(){o.count--,o.count<=0?s._clear():s._update()},_update:function(){var t=document.title;o.changed?document.title="("+o.count+") "+o.originalTitle:(o.originalTitle=t,document.title="("+o.count+") "+t,o.changed=!0)},_clear:function(){o.changed&&(o.count=0,document.title=o.originalTitle,o.changed=!1)}},a=e.DefaultMaxVisible=5,u=e.Queues={global:{maxVisible:a,queue:[]}},c=e.Store={};e.Defaults={type:"alert",layout:"topRight",theme:"mint",text:"",timeout:!1,progressBar:!0,closeWith:["click"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!1,queue:"global",container:!1,buttons:[],callbacks:{beforeShow:null,onShow:null,afterShow:null,onClose:null,afterClose:null,onClick:null,onHover:null,onTemplate:null},sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:!1,visibilityControl:!1};function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";if(u.hasOwnProperty(t)){var e=u[t].queue.shift();e&&e.show()}}function l(t){return!(!t.options.buttons||!Object.keys(t.options.buttons).length)}function f(t){t.options.timeout&&(t.options.progressBar&&t.progressDom&&r.css(t.progressDom,{transition:"width "+t.options.timeout+"ms linear",width:"0%"}),clearTimeout(t.closeTimer),t.closeTimer=setTimeout(function(){t.close()},t.options.timeout))}function d(t){t.options.timeout&&t.closeTimer&&(clearTimeout(t.closeTimer),t.closeTimer=-1,t.options.progressBar&&t.progressDom&&r.css(t.progressDom,{transition:"width 0ms linear",width:"100%"}))}function p(t,e){t.listeners.hasOwnProperty(e)&&t.listeners[e].forEach(function(e){"function"==typeof e&&e.apply(t)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotyButton=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.NotyButton=function t(e,n,i){var o=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=document.createElement("button"),this.dom.innerHTML=e,this.id=s.id=s.id||r.generateID("button"),this.cb=i,Object.keys(s).forEach(function(t){o.dom.setAttribute(t,s[t])}),r.addClass(this.dom,n||"noty_btn"),this}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Push=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/service-worker.js";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subData={},this.workerPath=e,this.listeners={onPermissionGranted:[],onPermissionDenied:[],onSubscriptionSuccess:[],onSubscriptionCancel:[],onWorkerError:[],onWorkerSuccess:[],onWorkerNotSupported:[]},this}return r(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof e&&this.listeners.hasOwnProperty(t)&&this.listeners[t].push(e),this}},{key:"fire",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.listeners.hasOwnProperty(t)&&this.listeners[t].forEach(function(t){"function"==typeof t&&t.apply(e,n)})}},{key:"create",value:function(){console.log("NOT IMPLEMENTED YET")}},{key:"isSupported",value:function(){var t=!1;try{t=window.Notification||window.webkitNotifications||navigator.mozNotification||window.external&&void 0!==window.external.msIsSiteMode()}catch(t){}return t}},{key:"getPermissionStatus",value:function(){var t="default";if(window.Notification&&window.Notification.permissionLevel)t=window.Notification.permissionLevel;else if(window.webkitNotifications&&window.webkitNotifications.checkPermission)switch(window.webkitNotifications.checkPermission()){case 1:t="default";break;case 0:t="granted";break;default:t="denied"}else window.Notification&&window.Notification.permission?t=window.Notification.permission:navigator.mozNotification?t="granted":window.external&&void 0!==window.external.msIsSiteMode()&&(t=window.external.msIsSiteMode()?"granted":"default");return t.toString().toLowerCase()}},{key:"getEndpoint",value:function(t){var e=t.endpoint,n=t.subscriptionId;return n&&-1===e.indexOf(n)&&(e+="/"+n),e}},{key:"isSWRegistered",value:function(){try{return"activated"===navigator.serviceWorker.controller.state}catch(t){return!1}}},{key:"unregisterWorker",value:function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){var n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.unregister(),t.fire("onSubscriptionCancel")}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}})}},{key:"requestSubscription",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this,r=this.getPermissionStatus(),i=function(r){"granted"===r?(t.fire("onPermissionGranted"),"serviceWorker"in navigator?navigator.serviceWorker.register(t.workerPath).then(function(){navigator.serviceWorker.ready.then(function(t){n.fire("onWorkerSuccess"),t.pushManager.subscribe({userVisibleOnly:e}).then(function(t){var e=t.getKey("p256dh"),r=t.getKey("auth");n.subData={endpoint:n.getEndpoint(t),p256dh:e?window.btoa(String.fromCharCode.apply(null,new Uint8Array(e))):null,auth:r?window.btoa(String.fromCharCode.apply(null,new Uint8Array(r))):null},n.fire("onSubscriptionSuccess",[n.subData])}).catch(function(t){n.fire("onWorkerError",[t])})})}):n.fire("onWorkerNotSupported")):"denied"===r&&(t.fire("onPermissionDenied"),t.unregisterWorker())};"default"===r?window.Notification&&window.Notification.requestPermission?window.Notification.requestPermission(i):window.webkitNotifications&&window.webkitNotifications.checkPermission&&window.webkitNotifications.requestPermission(i):i(r)}}]),t}()},function(t,e,n){(function(e,r){var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,s=void 0,a=void 0,u=function(t,e){m[o]=t,m[o+1]=e,2===(o+=2)&&(a?a(v):w())},c="undefined"!=typeof window?window:void 0,h=c||{},l=h.MutationObserver||h.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(v,1)}}var m=new Array(1e3);function v(){for(var t=0;t<o;t+=2){(0,m[t])(m[t+1]),m[t]=void 0,m[t+1]=void 0}o=0}var g,y,b,x,w=void 0;function E(t,e){var n=arguments,r=this,i=new this.constructor(T);void 0===i[S]&&Y(i);var o,s=r._state;return s?(o=n[s-1],u(function(){return j(s,i,o,r._result)})):L(r,i,t,e),i}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return R(e,t),e}f?w=function(){return e.nextTick(v)}:l?(y=0,b=new l(v),x=document.createTextNode(""),b.observe(x,{characterData:!0}),w=function(){x.data=y=++y%2}):d?((g=new MessageChannel).port1.onmessage=v,w=function(){return g.port2.postMessage(0)}):w=void 0===c?function(){try{var t=n(9);return void 0!==(s=t.runOnLoop||t.runOnContext)?function(){s(v)}:p()}catch(t){return p()}}():p();var S=Math.random().toString(36).substring(16);function T(){}var A=void 0,M=1,C=2,O=new F;function N(t){try{return t.then}catch(t){return O.error=t,O}}function k(e,n,r){n.constructor===e.constructor&&r===E&&n.constructor.resolve===_?function(t,e){e._state===M?I(t,e._result):e._state===C?D(t,e._result):L(e,void 0,function(e){return R(t,e)},function(e){return D(t,e)})}(e,n):r===O?(D(e,O.error),O.error=null):void 0===r?I(e,n):t(r)?function(t,e,n){u(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?R(t,n):I(t,n))},function(e){r||(r=!0,D(t,e))},t._label);!r&&i&&(r=!0,D(t,i))},t)}(e,n,r):I(e,n)}function R(t,e){var n,r;t===e?D(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?I(t,e):k(t,e,N(e)))}function P(t){t._onerror&&t._onerror(t._result),B(t)}function I(t,e){t._state===A&&(t._result=e,t._state=M,0!==t._subscribers.length&&u(B,t))}function D(t,e){t._state===A&&(t._state=C,t._result=e,u(P,t))}function L(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+M]=n,i[o+C]=r,0===o&&t._state&&u(B,t)}function B(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?j(n,r,i,o):i(o);t._subscribers.length=0}}function F(){this.error=null}var z=new F;function j(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return z.error=t,z}}(r,i))===z?(c=!0,a=s.error,s.error=null):u=!0,n===s)return void D(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;n._state!==A||(o&&u?R(n,s):c?D(n,a):e===M?I(n,s):e===C&&D(n,s))}var U=0;function Y(t){t[S]=U++,t._state=void 0,t._result=void 0,t._subscribers=[]}function W(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[S]||Y(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&I(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}function X(t){this[S]=U++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof X?function(t,e){try{e(function(e){R(t,e)},function(e){D(t,e)})}catch(e){D(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return W.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},W.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===_){var i=N(t);if(i===E&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===X){var o=new n(T);k(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},W.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===A&&(this._remaining--,t===C?D(r,n):this._result[e]=n),0===this._remaining&&I(r,this._result)},W.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){return n._settledAt(M,e,t)},function(t){return n._settledAt(C,e,t)})},X.all=function(t){return new W(this,t).promise},X.race=function(t){var e=this;return i(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},X.resolve=_,X.reject=function(t){var e=new this(T);return D(e,t),e},X._setScheduler=function(t){a=t},X._setAsap=function(t){u=t},X._asap=u,X.prototype={constructor:X,then:E,catch:function(t){return this.then(null,t)}},X.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=X},X.Promise=X,X},t.exports=i()}).call(e,n(7),n(8))},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(5);var i,o=n(4),s=(i=o)&&i.__esModule?i:{default:i},a=l(n(0)),u=l(n(1)),c=n(2),h=n(3);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=a.deepExtend({},u.Defaults,e),u.Store[this.options.id]?u.Store[this.options.id]:(this.id=this.options.id||a.generateID("bar"),this.closeTimer=-1,this.barDom=null,this.layoutDom=null,this.progressDom=null,this.showing=!1,this.shown=!1,this.closed=!1,this.closing=!1,this.killable=this.options.timeout||this.options.closeWith.length>0,this.hasSound=this.options.sounds.sources.length>0,this.soundPlayed=!1,this.listeners={beforeShow:[],onShow:[],afterShow:[],onClose:[],afterClose:[],onClick:[],onHover:[],onTemplate:[]},this.promises={show:null,close:null},this.on("beforeShow",this.options.callbacks.beforeShow),this.on("onShow",this.options.callbacks.onShow),this.on("afterShow",this.options.callbacks.afterShow),this.on("onClose",this.options.callbacks.onClose),this.on("afterClose",this.options.callbacks.afterClose),this.on("onClick",this.options.callbacks.onClick),this.on("onHover",this.options.callbacks.onHover),this.on("onTemplate",this.options.callbacks.onTemplate),this)}return r(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof e&&this.listeners.hasOwnProperty(t)&&this.listeners[t].push(e),this}},{key:"show",value:function(){var e=this;if(this.showing||this.shown)return this;!0===this.options.killer?t.closeAll():"string"==typeof this.options.killer&&t.closeAll(this.options.killer);var n=u.getQueueCounts(this.options.queue);if(n.current>=n.maxVisible||u.PageHidden&&this.options.visibilityControl)return u.addToQueue(this),u.PageHidden&&this.hasSound&&a.inArray("docHidden",this.options.sounds.conditions)&&a.createAudioElements(this),u.PageHidden&&a.inArray("docHidden",this.options.titleCount.conditions)&&u.docTitle.increment(),this;if(u.Store[this.id]=this,u.fire(this,"beforeShow"),this.showing=!0,this.closing)return this.showing=!1,this;if(u.build(this),u.handleModal(this),this.options.force?this.layoutDom.insertBefore(this.barDom,this.layoutDom.firstChild):this.layoutDom.appendChild(this.barDom),this.hasSound&&!this.soundPlayed&&a.inArray("docVisible",this.options.sounds.conditions)&&a.createAudioElements(this),a.inArray("docVisible",this.options.titleCount.conditions)&&u.docTitle.increment(),this.shown=!0,this.closed=!1,u.hasButtons(this)&&Object.keys(this.options.buttons).forEach(function(t){var n=e.barDom.querySelector("#"+e.options.buttons[t].id);a.addListener(n,"click",function(n){a.stopPropagation(n),e.options.buttons[t].cb(e)})}),this.progressDom=this.barDom.querySelector(".noty_progressbar"),a.inArray("click",this.options.closeWith)&&(a.addClass(this.barDom,"noty_close_with_click"),a.addListener(this.barDom,"click",function(t){a.stopPropagation(t),u.fire(e,"onClick"),e.close()},!1)),a.addListener(this.barDom,"mouseenter",function(){u.fire(e,"onHover")},!1),this.options.timeout&&a.addClass(this.barDom,"noty_has_timeout"),this.options.progressBar&&a.addClass(this.barDom,"noty_has_progressbar"),a.inArray("button",this.options.closeWith)){a.addClass(this.barDom,"noty_close_with_button");var r=document.createElement("div");a.addClass(r,"noty_close_button"),r.innerHTML="×",this.barDom.appendChild(r),a.addListener(r,"click",function(t){a.stopPropagation(t),e.close()},!1)}return u.fire(this,"onShow"),null===this.options.animation.open?this.promises.show=new s.default(function(t){t()}):"function"==typeof this.options.animation.open?this.promises.show=new s.default(this.options.animation.open.bind(this)):(a.addClass(this.barDom,this.options.animation.open),this.promises.show=new s.default(function(t){a.addListener(e.barDom,a.animationEndEvents,function(){a.removeClass(e.barDom,e.options.animation.open),t()})})),this.promises.show.then(function(){var t=e;setTimeout(function(){u.openFlow(t)},100)}),this}},{key:"stop",value:function(){return u.dequeueClose(this),this}},{key:"resume",value:function(){return u.queueClose(this),this}},{key:"setTimeout",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){if(this.stop(),this.options.timeout=t,this.barDom){this.options.timeout?a.addClass(this.barDom,"noty_has_timeout"):a.removeClass(this.barDom,"noty_has_timeout");var e=this;setTimeout(function(){e.resume()},100)}return this})},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.barDom&&(this.barDom.querySelector(".noty_body").innerHTML=t),e&&(this.options.text=t),this}},{key:"setType",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.barDom&&(a.classList(this.barDom).split(" ").forEach(function(t){"noty_type__"===t.substring(0,11)&&a.removeClass(e.barDom,t)}),a.addClass(this.barDom,"noty_type__"+t));return n&&(this.options.type=t),this}},{key:"setTheme",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.barDom&&(a.classList(this.barDom).split(" ").forEach(function(t){"noty_theme__"===t.substring(0,12)&&a.removeClass(e.barDom,t)}),a.addClass(this.barDom,"noty_theme__"+t));return n&&(this.options.theme=t),this}},{key:"close",value:function(){var t=this;return this.closed?this:this.shown?(u.fire(this,"onClose"),this.closing=!0,null===this.options.animation.close||!1===this.options.animation.close?this.promises.close=new s.default(function(t){t()}):"function"==typeof this.options.animation.close?this.promises.close=new s.default(this.options.animation.close.bind(this)):(a.addClass(this.barDom,this.options.animation.close),this.promises.close=new s.default(function(e){a.addListener(t.barDom,a.animationEndEvents,function(){t.options.force?a.remove(t.barDom):u.ghostFix(t),e()})})),this.promises.close.then(function(){u.closeFlow(t),u.handleModalClose(t)}),this.closed=!0,this):(u.removeFromQueue(this),this)}}],[{key:"closeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.keys(u.Store).forEach(function(e){t?u.Store[e].options.queue===t&&u.Store[e].killable&&u.Store[e].close():u.Store[e].killable&&u.Store[e].close()}),this}},{key:"clearQueue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";return u.Queues.hasOwnProperty(t)&&(u.Queues[t].queue=[]),this}},{key:"overrideDefaults",value:function(t){return u.Defaults=a.deepExtend({},u.Defaults,t),this}},{key:"setMaxVisible",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.DefaultMaxVisible,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";return u.Queues.hasOwnProperty(e)||(u.Queues[e]={maxVisible:t,queue:[]}),u.Queues[e].maxVisible=t,this}},{key:"button",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new c.NotyButton(t,e,n,r)}},{key:"version",value:function(){return"3.2.0-beta"}},{key:"Push",value:function(t){return new h.Push(t)}},{key:"Queues",get:function(){return u.Queues}},{key:"PageHidden",get:function(){return u.PageHidden}}]),t}();e.default=f,"undefined"!=typeof window&&a.visibilityChangeFlow(),t.exports=e.default},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){}])},t.exports=r()},function(t,e){t.exports=function(t,e,n,r,i,o){var s;void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=1);var a=0,u=t.length;if(1===o)for(s=i;s<u;s++)t[s][e]+=n+a*r,a++;else for(s=i;s>=0;s--)t[s][e]+=n+a*r,a++;return t}},function(t,e,n){var r=n(41);t.exports=function(t){return t*r.DEG_TO_RAD}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t,e,n,r){var i=n||e.fillColor,o=r||e.fillAlpha,s=(16711680&i)>>>16,a=(65280&i)>>>8,u=255&i;t.fillStyle="rgba("+s+","+a+","+u+","+o+")"}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm07",e.factory=function(t,e,n,i){var o=t.DenseMatrix;function s(t,e,n,r,i){for(var o=t._values,s=t._index,a=t._ptr,u=a[e],c=a[e+1];u<c;u++){var h=s[u];n[h]=i,r[h]=o[u]}}return function(t,e,n){var a=t._size,u=t._datatype,c=e._size,h=e._datatype;if(a.length!==c.length)throw new r(a.length,c.length);if(a[0]!==c[0]||a[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");var l,f,d,p=a[0],m=a[1],v=0,g=n;"string"==typeof u&&u===h&&(l=u,v=i.convert(0,l),g=i.find(n,[l,l]));var y=[];for(f=0;f<p;f++)y[f]=[];var b=new o({data:y,size:[p,m],datatype:l}),x=[],w=[],E=[],_=[];for(d=0;d<m;d++){var S=d+1;for(s(t,d,E,x,S),s(e,d,_,w,S),f=0;f<p;f++){var T=E[f]===S?x[f]:v,A=_[f]===S?w[f]:v;y[f][d]=g(T,A)}}return b}}},function(t,e,n){"use strict";var r=n(1800);e.name="compareNatural",e.factory=function(t,e,i,o){var s=i(n(75)),a=i(n(166)),u=a.signatures["boolean,boolean"],c=o("compareNatural",{"any, any":function(e,n){var i,o=s(e),l=s(n);if(!("number"!==o&&"BigNumber"!==o&&"Fraction"!==o||"number"!==l&&"BigNumber"!==l&&"Fraction"!==l))return"0"!==(i=a(e,n)).toString()?i>0?1:-1:r(o,l);if("Array"===o||"Matrix"===o||"Array"===l||"Matrix"===l)return 0!==(i=function e(n,r){return t.isSparseMatrix(n)&&t.isSparseMatrix(r)?h(n.toJSON().values,r.toJSON().values):t.isSparseMatrix(n)?e(n.toArray(),r):t.isSparseMatrix(r)?e(n,r.toArray()):t.isDenseMatrix(n)?e(n.toJSON().data,r):t.isDenseMatrix(r)?e(n,r.toJSON().data):Array.isArray(n)?Array.isArray(r)?h(n,r):e(n,[r]):e([n],r)}(e,n))?i:r(o,l);if(o!==l)return r(o,l);if("Complex"===o)return function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}(e,n);if("Unit"===o)return e.equalBase(n)?c(e.value,n.value):h(e.formatUnits(),n.formatUnits());if("boolean"===o)return u(e,n);if("string"===o)return r(e,n);if("Object"===o)return function(t,e){var n=Object.keys(t),i=Object.keys(e);n.sort(r),i.sort(r);var o=h(n,i);if(0!==o)return o;for(var s=0;s<n.length;s++){var a=c(t[n[s]],e[i[s]]);if(0!==a)return a}return 0}(e,n);if("null"===o)return 0;if("undefined"===o)return 0;throw new TypeError('Unsupported type of value "'+o+'"')}});function h(t,e){for(var n=0,r=Math.min(t.length,e.length);n<r;n++){var i=c(t[n],e[n]);if(0!==i)return i}return t.length>e.length?1:t.length<e.length?-1:0}return c.toTex=void 0,c}},function(t,e,n){"use strict";var r=n(69),i=n(10);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(var r=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=63&s|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=63&s|128)}else for(i=0;i<t.length;i++)n[i]=0|t[i];return n},e.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=a(t[n].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=s(i)),n+=u(i.toString(16))}return n},e.zero2=a,e.zero8=u,e.join32=function(t,e,n,i){var o=n-e;r(o%4==0);for(var s=new Array(o/4),a=0,u=e;a<s.length;a++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[a]=c>>>0}return s},e.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,n){return t+e+n>>>0},e.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},e.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},e.sum64=function(t,e,n,r){var i=t[e],o=r+t[e+1]>>>0,s=(o<r?1:0)+n+i;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},e.sum64_lo=function(t,e,n,r){return e+r>>>0},e.sum64_4_hi=function(t,e,n,r,i,o,s,a){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+n+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,n,r,i,o,s,a){return e+r+o+a>>>0},e.sum64_5_hi=function(t,e,n,r,i,o,s,a,u,c){var h=0,l=e;return h+=(l=l+r>>>0)<e?1:0,h+=(l=l+o>>>0)<o?1:0,h+=(l=l+a>>>0)<a?1:0,t+n+i+s+u+(h+=(l=l+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,n,r,i,o,s,a,u,c){return e+r+o+a+c>>>0},e.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},e.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},e.shr64_hi=function(t,e,n){return t>>>n},e.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e){t.exports=function(t,e,n){return t.radius>0&&e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-n)*(t.y-n)<=t.radius*t.radius}},function(t,e){t.exports=function(t,e,n){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=n&&t.y+t.height>=n}},function(t,e,n){t.exports={DESTROY:n(895),FADE_IN_COMPLETE:n(896),FADE_IN_START:n(897),FADE_OUT_COMPLETE:n(898),FADE_OUT_START:n(899),FLASH_COMPLETE:n(900),FLASH_START:n(901),PAN_COMPLETE:n(902),PAN_START:n(903),POST_RENDER:n(904),PRE_RENDER:n(905),SHAKE_COMPLETE:n(906),SHAKE_START:n(907),ZOOM_COMPLETE:n(908),ZOOM_START:n(909)}},function(t,e,n){t.exports={BOOT:n(1071),DESTROY:n(1072),DRAG_END:n(1073),DRAG_ENTER:n(1074),DRAG:n(1075),DRAG_LEAVE:n(1076),DRAG_OVER:n(1077),DRAG_START:n(1078),DROP:n(1079),GAME_OUT:n(1080),GAME_OVER:n(1081),GAMEOBJECT_DOWN:n(1082),GAMEOBJECT_DRAG_END:n(1083),GAMEOBJECT_DRAG_ENTER:n(1084),GAMEOBJECT_DRAG:n(1085),GAMEOBJECT_DRAG_LEAVE:n(1086),GAMEOBJECT_DRAG_OVER:n(1087),GAMEOBJECT_DRAG_START:n(1088),GAMEOBJECT_DROP:n(1089),GAMEOBJECT_MOVE:n(1090),GAMEOBJECT_OUT:n(1091),GAMEOBJECT_OVER:n(1092),GAMEOBJECT_POINTER_DOWN:n(1093),GAMEOBJECT_POINTER_MOVE:n(1094),GAMEOBJECT_POINTER_OUT:n(1095),GAMEOBJECT_POINTER_OVER:n(1096),GAMEOBJECT_POINTER_UP:n(1097),GAMEOBJECT_POINTER_WHEEL:n(1098),GAMEOBJECT_UP:n(1099),GAMEOBJECT_WHEEL:n(1100),MANAGER_BOOT:n(1101),MANAGER_PROCESS:n(1102),MANAGER_UPDATE:n(1103),POINTER_DOWN:n(1104),POINTER_DOWN_OUTSIDE:n(1105),POINTER_MOVE:n(1106),POINTER_OUT:n(1107),POINTER_OVER:n(1108),POINTER_UP:n(1109),POINTER_UP_OUTSIDE:n(1110),POINTER_WHEEL:n(1111),POINTERLOCK_CHANGE:n(1112),PRE_UPDATE:n(1113),SHUTDOWN:n(1114),START:n(1115),UPDATE:n(1116)}},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(1220),a=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Size,i.TextureCrop,i.Tint,i.Transform,i.Visible,s],initialize:function(t,e,n,r,s){o.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new i.Animation(this),this.setTexture(r,s),this.setPosition(e,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e,n){return this.anims.play(t,e,n),this},toJSON:function(){return i.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=a},function(t,e){t.exports=function(t,e,n,r){var i=n||e.strokeColor,o=r||e.strokeAlpha,s=(16711680&i)>>>16,a=(65280&i)>>>8,u=255&i;t.strokeStyle="rgba("+s+","+a+","+u+","+o+")",t.lineWidth=e.lineWidth}},function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,e,n){var r={};t.exports=r;var i=n(61),o=n(30),s=n(42),a=n(74),u=n(73),c=n(638);r.rectangle=function(t,e,n,r,a){a=a||{};var u={label:"Rectangle Body",position:{x:t,y:e},vertices:i.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(a.chamfer){var c=a.chamfer;u.vertices=i.chamfer(u.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return s.create(o.extend({},u,a))},r.trapezoid=function(t,e,n,r,a,u){u=u||{};var c,h=n*(a*=.5),l=h+(1-2*a)*n,f=l+h;c=a<.5?"L 0 0 L "+h+" "+-r+" L "+l+" "+-r+" L "+f+" 0":"L 0 0 L "+l+" "+-r+" L "+f+" 0";var d={label:"Trapezoid Body",position:{x:t,y:e},vertices:i.fromPath(c)};if(u.chamfer){var p=u.chamfer;d.vertices=i.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete u.chamfer}return s.create(o.extend({},d,u))},r.circle=function(t,e,n,i,s){i=i||{};var a={label:"Circle Body",circleRadius:n};s=s||25;var u=Math.ceil(Math.max(10,Math.min(s,n)));return u%2==1&&(u+=1),r.polygon(t,e,u,n,o.extend({},a,i))},r.polygon=function(t,e,n,a,u){if(u=u||{},n<3)return r.circle(t,e,a,u);for(var c=2*Math.PI/n,h="",l=.5*c,f=0;f<n;f+=1){var d=l+f*c,p=Math.cos(d)*a,m=Math.sin(d)*a;h+="L "+p.toFixed(3)+" "+m.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:t,y:e},vertices:i.fromPath(h)};if(u.chamfer){var g=u.chamfer;v.vertices=i.chamfer(v.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete u.chamfer}return s.create(o.extend({},v,u))},r.fromVertices=function(t,e,n,r,h,l,f){var d,p,m,v,g,y,b,x,w;for(r=r||{},p=[],h=void 0!==h&&h,l=void 0!==l?l:.01,f=void 0!==f?f:10,c||o.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),o.isArray(n[0])||(n=[n]),x=0;x<n.length;x+=1)if(v=n[x],(m=i.isConvex(v))||!c)v=m?i.clockwiseSort(v):i.hull(v),p.push({position:{x:t,y:e},vertices:v});else{var E=v.map(function(t){return[t.x,t.y]});c.makeCCW(E),!1!==l&&c.removeCollinearPoints(E,l);var _=c.quickDecomp(E);for(g=0;g<_.length;g++){var S=_[g].map(function(t){return{x:t[0],y:t[1]}});f>0&&i.area(S)<f||p.push({position:i.centre(S),vertices:S})}}for(g=0;g<p.length;g++)p[g]=s.create(o.extend(p[g],r));if(h)for(g=0;g<p.length;g++){var T=p[g];for(y=g+1;y<p.length;y++){var A=p[y];if(a.overlaps(T.bounds,A.bounds)){var M=T.vertices,C=A.vertices;for(b=0;b<T.vertices.length;b++)for(w=0;w<A.vertices.length;w++){var O=u.magnitudeSquared(u.sub(M[(b+1)%M.length],C[w])),N=u.magnitudeSquared(u.sub(M[b],C[(w+1)%C.length]));O<5&&N<5&&(M[b].isInternal=!0,C[w].isInternal=!0)}}}}return p.length>1?(d=s.create(o.extend({parts:p.slice(0)},r)),s.setPosition(d,{x:t,y:e}),d):p[0]}},function(t,e,n){var r=n(239),i=n(43);t.exports=function(t,e,n,o,s){for(var a=null,u=null,c=null,h=null,l=i(t,e,n,o,null,s),f=0;f<l.length;f++){var d=l[f];d&&(d.collides?(a=r(d.x,d.y-1,!0,s),u=r(d.x,d.y+1,!0,s),c=r(d.x-1,d.y,!0,s),h=r(d.x+1,d.y,!0,s),d.faceTop=!a||!a.collides,d.faceBottom=!u||!u.collides,d.faceLeft=!c||!c.collides,d.faceRight=!h||!h.collides):d.resetFaces())}}},function(t,e,n){"use strict";e.array=n(5),e.boolean=n(1697),e.function=n(117),e.number=n(7),e.object=n(15),e.string=n(26),e.emitter=n(682)},function(t,e,n){"use strict";t.exports=function(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.name="larger",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(54)),c=o(n(83)),h=o(n(55)),l=o(n(19)),f=o(n(18)),d=n(9),p=s("larger",{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,n){return t>n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.gt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,p)},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"SparseMatrix, any":function(t,e){return h(t,e,p,!1)},"DenseMatrix, any":function(t,e){return f(t,e,p,!1)},"any, SparseMatrix":function(t,e){return h(e,t,p,!0)},"any, DenseMatrix":function(t,e){return f(e,t,p,!0)},"Array, any":function(t,e){return f(a(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(a(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(d.operators.larger,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(4),i=n(7);e.name="isInteger",e.factory=function(t,e,n,o){var s=o("isInteger",{number:i.isInteger,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":function(t){return r(t,s)}});return s}},function(t,e,n){"use strict";var r=n(190);t.exports=function(t){return Array.isArray(t)||r(t)}},function(t,e,n){var r=n(0),i=n(425),o=n(276),s=n(277),a=n(8),u=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=e,this.x2=n,this.y2=r},getPoint:function(t,e){return i(this,t,e)},getPoints:function(t,e,n){return o(this,t,e,n)},getRandomPoint:function(t){return s(this,t)},setTo:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=e,this.x2=n,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new a),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new a),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=u},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e){t.exports=function(t,e,n){var r=n-e;return e+((t-e)%r+r)%r}},function(t,e){t.exports=function(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(14),c=n(16),h=new r({Extends:o,initialize:function(t,e,n,r,s){var h="json";if(c(e)){var l=e;e=a(l,"key"),n=a(l,"url"),r=a(l,"xhrSettings"),h=a(l,"extension",h),s=a(l,"dataKey",s)}var f={type:"json",cache:t.cacheManager.json,extension:h,responseType:"text",key:e,url:n,xhrSettings:r,config:s};o.call(this,t,f),c(n)&&(this.data=s?u(n,s):n,this.state=i.FILE_POPULATED)},onProcess:function(){if(this.state!==i.FILE_POPULATED){this.state=i.FILE_PROCESSING;var t=JSON.parse(this.xhrLoader.responseText),e=this.config;this.data="string"==typeof e?u(t,e,t):t}this.onProcessComplete()}});s.register("json",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new h(this,t[i]));else this.addFile(new h(this,t,e,r,n));return this}),t.exports=h},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){this.loader=t,this.type=e,this.key=n,this.files=r,this.complete=!1,this.pending=r.length,this.failed=0,this.config={};for(var i=0;i<r.length;i++)r[i].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=r},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=!0);var i=r.baseTileWidth,o=r.tilemapLayer;return o&&(void 0===n&&(n=o.scene.cameras.main),t-=o.x+n.scrollX*(1-o.scrollFactorX),i*=o.scaleX),e?Math.floor(t/i):t/i}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=!0);var i=r.baseTileHeight,o=r.tilemapLayer;return o&&(void 0===n&&(n=o.scene.cameras.main),t-=o.y+n.scrollY*(1-o.scrollFactorY),i*=o.scaleY),e?Math.floor(t/i):t/i}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.memoize=function(t,e){return function n(){"object"!==r(n.cache)&&(n.cache={});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e?e(i):JSON.stringify(i);return s in n.cache||(n.cache[s]=t.apply(t,i)),n.cache[s]}},e.maxArgumentCount=function(t){return Object.keys(t.signatures||{}).reduce(function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)},e.callWithRightArgumentCount=function(t,e,n){return Object.keys(t.signatures||{}).reduce(function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm01",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,s){var a=t._data,u=t._size,c=t._datatype,h=e._values,l=e._index,f=e._ptr,d=e._size,p=e._datatype;if(u.length!==d.length)throw new r(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,v,g=u[0],y=u[1],b="string"==typeof c&&c===p?c:void 0,x=b?i.find(n,[b,b]):n,w=[];for(m=0;m<g;m++)w[m]=[];var E=[],_=[];for(v=0;v<y;v++){for(var S=v+1,T=f[v],A=f[v+1],M=T;M<A;M++)E[m=l[M]]=s?x(h[M],a[m][v]):x(a[m][v],h[M]),_[m]=S;for(m=0;m<g;m++)_[m]===S?w[m][v]=E[m]:w[m][v]=a[m][v]}return new o({data:w,size:[g,y],datatype:b})}}},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.name="smaller",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(54)),c=o(n(83)),h=o(n(55)),l=o(n(19)),f=o(n(18)),d=n(9),p=s("smaller",{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,n){return t<n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.lt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,p)},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"SparseMatrix, any":function(t,e){return h(t,e,p,!1)},"DenseMatrix, any":function(t,e){return f(t,e,p,!1)},"any, SparseMatrix":function(t,e){return h(e,t,p,!0)},"any, DenseMatrix":function(t,e){return f(e,t,p,!0)},"Array, any":function(t,e){return f(a(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(a(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(d.operators.smaller,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(4);e.name="unaryMinus",e.factory=function(t,e,i,o){var s=n(9),a=o("unaryMinus",{number:function(t){return-t},Complex:function(t){return t.neg()},BigNumber:function(t){return t.neg()},Fraction:function(t){return t.neg()},Unit:function(t){var e=t.clone();return e.value=a(t.value),e},"Array | Matrix":function(t){return r(t,a,!0)}});return a.toTex={1:"".concat(s.operators.unaryMinus,"\\left(${args[0]}\\right)")},a}},function(t,e,n){"use strict";e.factory=function(t,e,r,i){var o=r(n(75));return function(t,e,n){var r;return-1!==String(t).indexOf("Unexpected type")?(r=arguments.length>2?" (type: "+o(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):-1!==String(t).indexOf("complex numbers")?(r=arguments.length>2?" (type: "+o(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}}},function(t,e,n){var r=n(11).Buffer,i=n(387).Transform,o=n(391).StringDecoder;function s(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(10)(s,i),s.prototype.update=function(t,e,n){"string"==typeof t&&(t=r.from(t,e));var i=this._update(t);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(t,e,n){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{n(r)}},s.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},s.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},s.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return n&&(r+=this._decoder.end()),r},t.exports=s},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,a,u,c,h,d,m,v=e&&e.length,g=v?e[0]*n:t.length,y=i(t,0,g,n,!0),b=[];if(!y||y.next===y.prev)return b;if(v&&(y=function(t,e,n,r){var s,a,u,c,h,d=[];for(s=0,a=e.length;s<a;s++)u=e[s]*r,c=s<a-1?e[s+1]*r:t.length,(h=i(t,u,c,r,!1))===h.next&&(h.steiner=!0),d.push(p(h));for(d.sort(l),s=0;s<d.length;s++)f(d[s],n),n=o(n,n.next);return n}(t,e,y,n)),t.length>80*n){r=u=t[0],a=c=t[1];for(var x=n;x<g;x+=n)(h=t[x])<r&&(r=h),(d=t[x+1])<a&&(a=d),h>u&&(u=h),d>c&&(c=d);m=0!==(m=Math.max(u-r,c-a))?1/m:0}return s(y,b,n,r,a,m),b}function i(t,e,n,r,i){var o,s;if(i===T(t,e,n,r)>0)for(o=e;o<n;o+=r)s=E(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=E(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(_(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(_(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function s(t,e,n,r,i,l,f){if(t){!f&&l&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,r,i,l);for(var p,m,v=t;t.prev!==t.next;)if(p=t.prev,m=t.next,l?u(t,r,i,l):a(t))e.push(p.i/n),e.push(t.i/n),e.push(m.i/n),_(t),t=m.next,v=m.next;else if((t=m)===v){f?1===f?s(t=c(t,e,n),e,n,r,i,l,2):2===f&&h(t,e,n,r,i,l):s(o(t),e,n,r,i,l,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,s=t.next;if(g(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=d(a,u,e,n,r),f=d(c,h,e,n,r),p=t.prevZ,v=t.nextZ;p&&p.z>=l&&v&&v.z<=f;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==t.prev&&v!==t.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=f;){if(v!==t.prev&&v!==t.next&&m(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!y(i,o)&&b(i,r,r.next,o)&&x(i,o)&&x(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),_(r),_(r.next),r=t=o),r=r.next}while(r!==t);return r}function h(t,e,n,r,i,a){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&v(u,c)){var h=w(u,c);return u=o(u,u.next),h=o(h,h.next),s(u,e,n,r,i,a),void s(h,e,n,r,i,a)}c=c.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,c=n,h=n.x,l=n.y,f=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=h&&i!==r.x&&m(o<l?i:s,o,h,l,o<l?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&x(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=w(e,t);o(n,n.next)}}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){return!!(y(t,e)&&y(n,r)||y(t,r)&&y(n,e))||g(t,e,n)>0!=g(t,e,r)>0&&g(n,r,t)>0!=g(n,r,e)>0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var n=new S(t.i,t.x,t.y),r=new S(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function E(t,e,n,r){var i=new S(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(T(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(T(t,c,h,n))}var l=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,d=r[a+1]*n,p=r[a+2]*n;l+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){var r=n(125);t.exports=function(t,e){var n=r(t);for(var i in e)n.hasOwnProperty(i)||(n[i]=e[i]);return n}},function(t,e){t.exports=function(t){var e={};for(var n in t)Array.isArray(t[n])?e[n]=t[n].slice(0):e[n]=t[n];return e}},function(t,e,n){t.exports={COMPLETE:n(1140),DECODED:n(1141),DECODED_ALL:n(1142),DESTROY:n(1143),DETUNE:n(1144),GLOBAL_DETUNE:n(1145),GLOBAL_MUTE:n(1146),GLOBAL_RATE:n(1147),GLOBAL_VOLUME:n(1148),LOOP:n(1149),LOOPED:n(1150),MUTE:n(1151),PAUSE_ALL:n(1152),PAUSE:n(1153),PLAY:n(1154),RATE:n(1155),RESUME_ALL:n(1156),RESUME:n(1157),SEEK:n(1158),STOP_ALL:n(1159),STOP:n(1160),UNLOCKED:n(1161),VOLUME:n(1162)}},function(t,e){t.exports=function(t,e,n,r){var i=t.length;if(e<0||e>i||e>=n||n>i||e+n>i){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=t.strokeTint,a=r.getTintAppendFloatAlphaAndSwap(e.strokeColor,e.strokeAlpha*n);s.TL=a,s.TR=a,s.BL=a,s.BR=a;var u=e.pathData,c=u.length-1,h=e.lineWidth,l=h/2,f=u[0]-i,d=u[1]-o;e.closePath||(c-=2);for(var p=2;p<c;p+=2){var m=u[p]-i,v=u[p+1]-o;t.setTexture2D(),t.batchLine(f,d,m,v,l,l,h,p-2,!!e.closePath&&p===c-1),f=m,d=v}}},function(t,e,n){var r=n(0),i=n(154),o=n(580),s=n(581),a=n(109),u=n(282),c=new r({initialize:function(t,e,n,r,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.x3=i,this.y3=o},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,n,r,i,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.x3=i,this.y3=o,this},getLineA:function(t){return void 0===t&&(t=new a),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new a),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new a),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e=0;e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e=0;e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e=0;e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e=0;e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function t(e,n,r,i,s){var c,h="png";if(u(n)){var l=n;n=a(l,"key"),r=a(l,"url"),c=a(l,"normalMap"),i=a(l,"xhrSettings"),h=a(l,"extension",h),s=a(l,"frameConfig")}Array.isArray(r)&&(c=r[1],r=r[0]);var f={type:"image",cache:e.textureManager,extension:h,responseType:"blob",key:n,url:r,xhrSettings:i,config:s};if(o.call(this,e,f),c){var d=new t(e,this.key,c,i,s);d.type="normalMap",this.setLink(d),e.addFile(d)}},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){o.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(t.data),t.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===i.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});s.register("image",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this}),t.exports=c},function(t,e,n){var r={};t.exports=r;var i=n(157),o=n(30),s=n(74),a=n(42);r.create=function(t){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},r.setModified=function(t,e,n,i){if(t.isModified=e,n&&t.parent&&r.setModified(t.parent,e,n,i),i)for(var o=0;o<t.composites.length;o++){var s=t.composites[o];r.setModified(s,e,n,i)}},r.add=function(t,e){var n=[].concat(e);i.trigger(t,"beforeAdd",{object:e});for(var s=0;s<n.length;s++){var a=n[s];switch(a.type){case"body":if(a.parent!==a){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(t,a);break;case"constraint":r.addConstraint(t,a);break;case"composite":r.addComposite(t,a);break;case"mouseConstraint":r.addConstraint(t,a.constraint)}}return i.trigger(t,"afterAdd",{object:e}),t},r.remove=function(t,e,n){var o=[].concat(e);i.trigger(t,"beforeRemove",{object:e});for(var s=0;s<o.length;s++){var a=o[s];switch(a.type){case"body":r.removeBody(t,a,n);break;case"constraint":r.removeConstraint(t,a,n);break;case"composite":r.removeComposite(t,a,n);break;case"mouseConstraint":r.removeConstraint(t,a.constraint)}}return i.trigger(t,"afterRemove",{object:e}),t},r.addComposite=function(t,e){return t.composites.push(e),e.parent=t,r.setModified(t,!0,!0,!1),t},r.removeComposite=function(t,e,n){var i=t.composites.indexOf(e);if(-1!==i&&(r.removeCompositeAt(t,i),r.setModified(t,!0,!0,!1)),n)for(var o=0;o<t.composites.length;o++)r.removeComposite(t.composites[o],e,!0);return t},r.removeCompositeAt=function(t,e){return t.composites.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addBody=function(t,e){return t.bodies.push(e),r.setModified(t,!0,!0,!1),t},r.removeBody=function(t,e,n){var i=t.bodies.indexOf(e);if(-1!==i&&(r.removeBodyAt(t,i),r.setModified(t,!0,!0,!1)),n)for(var o=0;o<t.composites.length;o++)r.removeBody(t.composites[o],e,!0);return t},r.removeBodyAt=function(t,e){return t.bodies.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addConstraint=function(t,e){return t.constraints.push(e),r.setModified(t,!0,!0,!1),t},r.removeConstraint=function(t,e,n){var i=t.constraints.indexOf(e);if(-1!==i&&r.removeConstraintAt(t,i),n)for(var o=0;o<t.composites.length;o++)r.removeConstraint(t.composites[o],e,!0);return t},r.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),r.setModified(t,!0,!0,!1),t},r.clear=function(t,e,n){if(n)for(var i=0;i<t.composites.length;i++)r.clear(t.composites[i],e,!0);return e?t.bodies=t.bodies.filter(function(t){return t.isStatic}):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,r.setModified(t,!0,!0,!1),t},r.allBodies=function(t){for(var e=[].concat(t.bodies),n=0;n<t.composites.length;n++)e=e.concat(r.allBodies(t.composites[n]));return e},r.allConstraints=function(t){for(var e=[].concat(t.constraints),n=0;n<t.composites.length;n++)e=e.concat(r.allConstraints(t.composites[n]));return e},r.allComposites=function(t){for(var e=[].concat(t.composites),n=0;n<t.composites.length;n++)e=e.concat(r.allComposites(t.composites[n]));return e},r.get=function(t,e,n){var i,o;switch(n){case"body":i=r.allBodies(t);break;case"constraint":i=r.allConstraints(t);break;case"composite":i=r.allComposites(t).concat(t)}return i?0===(o=i.filter(function(t){return t.id.toString()===e.toString()})).length?null:o[0]:null},r.move=function(t,e,n){return r.remove(t,e),r.add(n,e),t},r.rebase=function(t){for(var e=r.allBodies(t).concat(r.allConstraints(t)).concat(r.allComposites(t)),n=0;n<e.length;n++)e[n].id=o.nextId();return r.setModified(t,!0,!0,!1),t},r.translate=function(t,e,n){for(var i=n?r.allBodies(t):t.bodies,o=0;o<i.length;o++)a.translate(i[o],e);return r.setModified(t,!0,!0,!1),t},r.rotate=function(t,e,n,i){for(var o=Math.cos(e),s=Math.sin(e),u=i?r.allBodies(t):t.bodies,c=0;c<u.length;c++){var h=u[c],l=h.position.x-n.x,f=h.position.y-n.y;a.setPosition(h,{x:n.x+(l*o-f*s),y:n.y+(l*s+f*o)}),a.rotate(h,e)}return r.setModified(t,!0,!0,!1),t},r.scale=function(t,e,n,i,o){for(var s=o?r.allBodies(t):t.bodies,u=0;u<s.length;u++){var c=s[u],h=c.position.x-i.x,l=c.position.y-i.y;a.setPosition(c,{x:i.x+h*e,y:i.y+l*n}),a.scale(c,e,n)}return r.setModified(t,!0,!0,!1),t},r.bounds=function(t){for(var e=r.allBodies(t),n=[],i=0;i<e.length;i+=1){var o=e[i];n.push(o.bounds.min,o.bounds.max)}return s.create(n)}},function(t,e){t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,e,n){var r=n(0),i=n(23),o=n(601),s=new r({Mixins:[i.Alpha,i.Flip,i.Visible],initialize:function(t,e,n,r,i,o,s,a){this.layer=t,this.index=e,this.x=n,this.y=r,this.width=i,this.height=o,this.baseWidth=void 0!==s?s:i,this.baseHeight=void 0!==a?a:o,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=null,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*e.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new o),e.x=this.getLeft(),e.y=this.getTop(),e.width=this.getRight()-e.x,e.height=this.getBottom()-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},intersects:function(t,e,n,r){return!(n<=this.pixelX||r<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){(void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,n,r,i){(void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=t),void 0===i&&(i=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=n,this.collideDown=r,this.faceLeft=t,this.faceRight=e,this.faceTop=n,this.faceBottom=r,i)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,n,r){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==n&&(this.baseWidth=n),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){return this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight,this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=s},function(t,e,n){"use strict";e.name="algorithm10",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var s=t._values,a=t._index,u=t._ptr,c=t._size,h=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,f=c[0],d=c[1],p=n;"string"==typeof h&&(l=h,e=r.convert(e,l),p=r.find(n,[l,l]));for(var m=[],v=new i({data:m,size:[f,d],datatype:l}),g=[],y=[],b=0;b<d;b++){for(var x=b+1,w=u[b],E=u[b+1],_=w;_<E;_++){var S=a[_];g[S]=s[_],y[S]=x}for(var T=0;T<f;T++)0===b&&(m[T]=[]),y[T]===x?m[T][b]=o?p(e,g[T]):p(g[T],e):m[T][b]=e}return v}}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(5).size;e.name="pow",e.factory=function(t,e,o,s){var a=n(9),u=o(n(161)),c=o(n(28)),h=o(n(3)),l=o(n(366)),f=o(n(248)),d=s("pow",{"number, number":p,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(n,r){return r.isInteger()||n>=0||e.predictable?n.pow(r):new t.Complex(n.toNumber(),0).pow(r.toNumber(),0)},"Fraction, Fraction":function(t,n){if(1!==n.d){if(e.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return p(t.valueOf(),n.valueOf())}return t.pow(n)},"Array, number":m,"Array, BigNumber":function(t,e){return m(t,e.toNumber())},"Matrix, number":v,"Matrix, BigNumber":function(t,e){return v(t,e.toNumber())},"Unit, number | BigNumber":function(t,e){return t.pow(e)}});function p(n,i){if(e.predictable&&!r(i)&&n<0)try{var o=l(i),s=f(o);if((i===s||Math.abs((i-s)/i)<1e-14)&&o.d%2==1)return(o.n%2==0?1:-1)*Math.pow(-n,i)}catch(t){}return n*n<1&&i===1/0||n*n>1&&i===-1/0?0:e.predictable&&(n<-1&&i===1/0||n>-1&&n<0&&i===-1/0)?NaN:r(i)||n>=0||e.predictable?Math.pow(n,i):new t.Complex(n,0).pow(i,0)}function m(t,e){if(!r(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var n=i(t);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var o=u(n[0]).valueOf(),s=t;e>=1;)1==(1&e)&&(o=c(s,o)),e>>=1,s=c(s,s);return o}function v(t,e){return h(m(t.valueOf(),e))}return d.toTex={2:"\\left(${args[0]}\\right)".concat(a.operators.pow,"{${args[1]}}")},d}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(5).resize;e.name="zeros",e.factory=function(t,e,o,s){var a=o(n(3)),u=s("zeros",{"":function(){return"Array"===e.matrix?c([]):c([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var n=t.pop();return c(t,n)}return"Array"===e.matrix?c(t):c(t,"default")},Array:c,Matrix:function(t){var e=t.storage();return c(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return c(t.valueOf(),e)}});return u.toTex=void 0,u;function c(e,n){var o=function(e){var n=!1;return e.forEach(function(e,r,i){t.isBigNumber(e)&&(n=!0,i[r]=e.toNumber())}),n}(e)?new t.BigNumber(0):0;if(function(t){t.forEach(function(t){if("number"!=typeof t||!r(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")})}(e),n){var s=a(n);return e.length>0?s.resize(e,o):s}var u=[];return e.length>0?i(u,e,o):u}}},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var i=n(191),o=n(4);e.name="parse",e.path="expression",e.factory=function(t,e,s,a){var u=s(n(249)),c=s(n(691)),h=s(n(694)),l=s(n(695)),f=s(n(696)),d=s(n(697)),p=s(n(192)),m=s(n(698)),v=s(n(699)),g=s(n(700)),y=s(n(193)),b=s(n(252)),x=s(n(253)),w=s(n(701)),E=s(n(702)),_=s(n(165));function S(e,n){if(1!==arguments.length&&2!==arguments.length)throw new i("parse",arguments.length,1,2);var r=n&&n.nodes?n.nodes:{};if("string"==typeof e)return z(e,r);if(Array.isArray(e)||e instanceof t.Matrix)return o(e,function(t){if("string"!=typeof t)throw new TypeError("String expected");return z(t,r)});throw new TypeError("String or matrix expected")}var T={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},A={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},M={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},C={true:!0,false:!1,null:null,undefined:void 0},O=["NaN","Infinity"];function N(t,e){return t.expression.substr(t.index,e)}function k(t){return N(t,1)}function R(t){t.index++}function P(t){return t.expression.charAt(t.index-1)}function I(t){return t.expression.charAt(t.index+1)}function D(t){for(t.tokenType=T.NULL,t.token="",t.comment="";S.isWhitespace(k(t),t.nestingLevel);)R(t);if("#"===k(t))for(;"\n"!==k(t)&&""!==k(t);)t.comment+=k(t),R(t);if(""!==k(t)){if("\n"===k(t)&&!t.nestingLevel)return t.tokenType=T.DELIMITER,t.token=k(t),void R(t);var e=k(t),n=N(t,2),r=N(t,3);if(3===r.length&&A[r])return t.tokenType=T.DELIMITER,t.token=r,R(t),R(t),void R(t);if(2===n.length&&A[n])return t.tokenType=T.DELIMITER,t.token=n,R(t),void R(t);if(A[e])return t.tokenType=T.DELIMITER,t.token=e,void R(t);if(S.isDigitDot(e)){if(t.tokenType=T.NUMBER,"."===k(t))t.token+=k(t),R(t),S.isDigit(k(t))||(t.tokenType=T.DELIMITER);else{for(;S.isDigit(k(t));)t.token+=k(t),R(t);S.isDecimalMark(k(t),I(t))&&(t.token+=k(t),R(t))}for(;S.isDigit(k(t));)t.token+=k(t),R(t);if("E"===k(t)||"e"===k(t))if(S.isDigit(I(t))||"-"===I(t)||"+"===I(t)){if(t.token+=k(t),R(t),"+"!==k(t)&&"-"!==k(t)||(t.token+=k(t),R(t)),!S.isDigit(k(t)))throw st(t,'Digit expected, got "'+k(t)+'"');for(;S.isDigit(k(t));)t.token+=k(t),R(t);if(S.isDecimalMark(k(t),I(t)))throw st(t,'Digit expected, got "'+k(t)+'"')}else if("."===I(t))throw R(t),st(t,'Digit expected, got "'+k(t)+'"')}else{if(!S.isAlpha(k(t),P(t),I(t))){for(t.tokenType=T.UNKNOWN;""!==k(t);)t.token+=k(t),R(t);throw st(t,'Syntax error in part "'+t.token+'"')}for(;S.isAlpha(k(t),P(t),I(t))||S.isDigit(k(t));)t.token+=k(t),R(t);M.hasOwnProperty(t.token)?t.tokenType=T.DELIMITER:t.tokenType=T.SYMBOL}}else t.tokenType=T.DELIMITER}function L(t){do{D(t)}while("\n"===t.token)}function B(t){t.nestingLevel++}function F(t){t.nestingLevel--}function z(t,e){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:T.NULL,nestingLevel:0,conditionalLevel:null};r(n,{expression:t,extraNodes:e}),D(n);var i=function(t){var e,n,r=[];for(""!==t.token&&"\n"!==t.token&&";"!==t.token&&((e=j(t)).comment=t.comment);"\n"===t.token||";"===t.token;)0===r.length&&e&&(n=";"!==t.token,r.push({node:e,visible:n})),D(t),"\n"!==t.token&&";"!==t.token&&""!==t.token&&((e=j(t)).comment=t.comment,n=";"!==t.token,r.push({node:e,visible:n}));return r.length>0?new f(r):(e||((e=new p(void 0)).comment=t.comment),e)}(n);if(""!==n.token)throw n.tokenType===T.DELIMITER?at(n,"Unexpected operator "+n.token):st(n,'Unexpected part "'+n.token+'"');return i}function j(e){var n,r,i,o,s=function(t){for(var e=function(t){for(var e=U(t);"or"===t.token;)L(t),e=new y("or","or",[e,U(t)]);return e}(t);"?"===t.token;){var n=t.conditionalLevel;t.conditionalLevel=t.nestingLevel,L(t);var r=e,i=j(t);if(":"!==t.token)throw st(t,"False part of conditional expression expected");t.conditionalLevel=null,L(t);var o=j(t);e=new d(r,i,o),t.conditionalLevel=n}return e}(e);if("="===e.token){if(t.isSymbolNode(s))return n=s.name,L(e),i=j(e),new l(new _(n),i);if(t.isAccessorNode(s))return L(e),i=j(e),new l(s.object,s.index,i);if(t.isFunctionNode(s)&&t.isSymbolNode(s.fn)&&(o=!0,r=[],n=s.name,s.args.forEach(function(e,n){t.isSymbolNode(e)?r[n]=e.name:o=!1}),o))return L(e),i=j(e),new m(n,r,i);throw st(e,"Invalid left hand side of assignment operator =")}return s}function U(t){for(var e=Y(t);"xor"===t.token;)L(t),e=new y("xor","xor",[e,Y(t)]);return e}function Y(t){for(var e=W(t);"and"===t.token;)L(t),e=new y("and","and",[e,W(t)]);return e}function W(t){for(var e=X(t);"|"===t.token;)L(t),e=new y("|","bitOr",[e,X(t)]);return e}function X(t){for(var e=G(t);"^|"===t.token;)L(t),e=new y("^|","bitXor",[e,G(t)]);return e}function G(t){for(var e=V(t);"&"===t.token;)L(t),e=new y("&","bitAnd",[e,V(t)]);return e}function V(t){for(var e=[q(t)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};r.hasOwnProperty(t.token);){var i={name:t.token,fn:r[t.token]};n.push(i),L(t),e.push(q(t))}return 1===e.length?e[0]:2===e.length?new y(n[0].name,n[0].fn,e):new E(n.map(function(t){return t.fn}),e)}function q(t){var e,n,r,i,o;for(e=H(t),n={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};n.hasOwnProperty(t.token);)i=n[r=t.token],L(t),o=[e,H(t)],e=new y(r,i,o);return e}function H(t){var e,n,r,i,o;for(e=K(t),n={to:"to",in:"to"};n.hasOwnProperty(t.token);)i=n[r=t.token],L(t),"in"===r&&""===t.token?e=new y("*","multiply",[e,new _("in")],!0):(o=[e,K(t)],e=new y(r,i,o));return e}function K(t){var e,n=[];if(e=":"===t.token?new p(1):$(t),":"===t.token&&t.conditionalLevel!==t.nestingLevel){for(n.push(e);":"===t.token&&n.length<3;)L(t),")"===t.token||"]"===t.token||","===t.token||""===t.token?n.push(new _("end")):n.push($(t));e=3===n.length?new w(n[0],n[2],n[1]):new w(n[0],n[1])}return e}function $(t){var e,n,r,i,o;for(e=J(t),n={"+":"add","-":"subtract"};n.hasOwnProperty(t.token);)i=n[r=t.token],L(t),o=[e,J(t)],e=new y(r,i,o);return e}function J(t){var e,n,r,i,o;for(n=e=Z(t),r={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};r.hasOwnProperty(t.token);)o=r[i=t.token],L(t),n=Z(t),e=new y(i,o,[e,n]);return e}function Z(e){var n,r;for(r=n=Q(e);e.tokenType===T.SYMBOL||"in"===e.token&&t.isConstantNode(n)||!(e.tokenType!==T.NUMBER||t.isConstantNode(r)||t.isOperatorNode(r)&&"!"!==r.op)||"("===e.token;)r=Q(e),n=new y("*","multiply",[n,r],!0);return n}function Q(e){for(var n=tt(e),i=n,o=[];"/"===e.token&&t.isConstantNode(i);){if(o.push(r({},e)),L(e),e.tokenType!==T.NUMBER){r(e,o.pop());break}if(o.push(r({},e)),L(e),e.tokenType!==T.SYMBOL&&"("!==e.token){o.pop(),r(e,o.pop());break}r(e,o.pop()),o.pop(),i=tt(e),n=new y("/","divide",[n,i])}return n}function tt(t){var n,r,i,o={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return o.hasOwnProperty(t.token)?(i=o[t.token],n=t.token,L(t),r=[tt(t)],new y(n,i,r)):function(t){var n,r,i,o;return n=function(t){var n,r,i,o;for(n=function(t){var n=[];if(t.tokenType===T.SYMBOL&&t.extraNodes.hasOwnProperty(t.token)){var r=t.extraNodes[t.token];if(D(t),"("===t.token){if(n=[],B(t),D(t),")"!==t.token)for(n.push(j(t));","===t.token;)D(t),n.push(j(t));if(")"!==t.token)throw st(t,"Parenthesis ) expected");F(t),D(t)}return new r(n)}return function(t){var n,r;return t.tokenType===T.SYMBOL||t.tokenType===T.DELIMITER&&t.token in M?(r=t.token,D(t),n=C.hasOwnProperty(r)?new p(C[r]):-1!==O.indexOf(r)?new p(u(r,"number")):new _(r),n=et(t,n)):function(t){var n,r;return'"'===t.token?(r=nt(t),n=new p(r),n=et(t,n)):function(t){var n,r;return"'"===t.token?(r=rt(t),n=new p(r),n=et(t,n)):function(t){var n,r,i,o;if("["===t.token){if(B(t),D(t),"]"!==t.token){var s=it(t);if(";"===t.token){for(i=1,r=[s];";"===t.token;)D(t),r[i]=it(t),i++;if("]"!==t.token)throw st(t,"End of matrix ] expected");F(t),D(t),o=r[0].items.length;for(var a=1;a<i;a++)if(r[a].items.length!==o)throw at(t,"Column dimensions mismatch ("+r[a].items.length+" !== "+o+")");n=new h(r)}else{if("]"!==t.token)throw st(t,"End of matrix ] expected");F(t),D(t),n=s}}else F(t),D(t),n=new h([]);return et(t,n)}return function(t){if("{"===t.token){var n;B(t);var r={};do{if(D(t),"}"!==t.token){if('"'===t.token)n=nt(t);else if("'"===t.token)n=rt(t);else{if(t.tokenType!==T.SYMBOL)throw st(t,"Symbol or string expected as object key");n=t.token,D(t)}if(":"!==t.token)throw st(t,"Colon : expected after object key");D(t),r[n]=j(t)}}while(","===t.token);if("}"!==t.token)throw st(t,"Comma , or bracket } expected after object value");F(t),D(t);var i=new g(r);return i=et(t,i)}return function(t){var n;return t.tokenType===T.NUMBER?(n=t.token,D(t),new p(u(n,e.number))):function(t){var e;if("("===t.token){if(B(t),D(t),e=j(t),")"!==t.token)throw st(t,"Parenthesis ) expected");return F(t),D(t),e=new b(e),e=et(t,e)}return function(t){throw""===t.token?st(t,"Unexpected end of expression"):st(t,"Value expected")}(t)}(t)}(t)}(t)}(t)}(t)}(t)}(t)}(t),r={"!":"factorial","'":"ctranspose"};r.hasOwnProperty(t.token);)i=t.token,o=r[i],D(t),n=new y(i,o,[n]),n=et(t,n);return n}(t),("^"===t.token||".^"===t.token)&&(r=t.token,i="^"===r?"pow":"dotPow",L(t),o=[n,tt(t)],n=new y(r,i,o)),n}(t)}function et(e,n,r){for(var i;!("("!==e.token&&"["!==e.token&&"."!==e.token||r&&-1===r.indexOf(e.token));)if(i=[],"("===e.token){if(!t.isSymbolNode(n)&&!t.isAccessorNode(n))return n;if(B(e),D(e),")"!==e.token)for(i.push(j(e));","===e.token;)D(e),i.push(j(e));if(")"!==e.token)throw st(e,"Parenthesis ) expected");F(e),D(e),n=new x(n,i)}else if("["===e.token){if(B(e),D(e),"]"!==e.token)for(i.push(j(e));","===e.token;)D(e),i.push(j(e));if("]"!==e.token)throw st(e,"Parenthesis ] expected");F(e),D(e),n=new c(n,new v(i))}else{if(D(e),e.tokenType!==T.SYMBOL)throw st(e,"Property name expected after dot");i.push(new p(e.token)),D(e),n=new c(n,new v(i,!0))}return n}function nt(t){for(var e="";""!==k(t)&&'"'!==k(t);)"\\"===k(t)&&(e+=k(t),R(t)),e+=k(t),R(t);if(D(t),'"'!==t.token)throw st(t,'End of string " expected');return D(t),JSON.parse('"'+e+'"')}function rt(t){for(var e="";""!==k(t)&&"'"!==k(t);)"\\"===k(t)&&(e+=k(t),R(t)),e+=k(t),R(t);if(D(t),"'"!==t.token)throw st(t,"End of string ' expected");return D(t),JSON.parse('"'+e+'"')}function it(t){for(var e=[j(t)],n=1;","===t.token;)D(t),e[n]=j(t),n++;return new h(e)}function ot(t){return t.index-t.token.length+1}function st(t,e){var n=ot(t),r=new SyntaxError(e+" (char "+n+")");return r.char=n,r}function at(t,e){var n=ot(t),r=new SyntaxError(e+" (char "+n+")");return r.char=n,r}return S.isAlpha=function(t,e,n){return S.isValidLatinOrGreek(t)||S.isValidMathSymbol(t,n)||S.isValidMathSymbol(e,t)},S.isValidLatinOrGreek=function(t){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(t)},S.isValidMathSymbol=function(t,e){return/^[\uD835]$/.test(t)&&/^[\uDC00-\uDFFF]$/.test(e)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(e)},S.isWhitespace=function(t,e){return" "===t||"\t"===t||"\n"===t&&e>0},S.isDecimalMark=function(t,e){return"."===t&&"/"!==e&&"*"!==e&&"^"!==e},S.isDigitDot=function(t){return t>="0"&&t<="9"||"."===t},S.isDigit=function(t){return t>="0"&&t<="9"},S}},function(t,e,n){"use strict";var r=n(15).extend;e.name="divide",e.factory=function(t,e,i,o){var s=i(n(44)),a=i(n(28)),u=i(n(254)),c=i(n(3)),h=i(n(56)),l=i(n(18)),f=o("divide",r({"Array | Matrix, Array | Matrix":function(t,e){return a(t,u(e))},"DenseMatrix, any":function(t,e){return l(t,e,s,!1)},"SparseMatrix, any":function(t,e){return h(t,e,s,!1)},"Array, any":function(t,e){return l(c(t),e,s,!1).valueOf()},"any, Array | Matrix":function(t,e){return a(t,u(e))}},s.signatures));return f.toTex={2:"\\frac{${args[0]}}{${args[1]}}"},f}},function(t,e,n){"use strict";var r=n(4);e.name="sqrt",e.factory=function(t,e,n,i){var o=i("sqrt",{number:s,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():s(t.toNumber())},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.pow(.5)}});function s(n){return isNaN(n)?NaN:n>=0||e.predictable?Math.sqrt(n):new t.Complex(n,0).sqrt()}return o.toTex={1:"\\sqrt{${args[0]}}"},o}},function(t,e,n){"use strict";var r=n(190);t.exports=function t(e,n){r(e)&&(e=e.valueOf());for(var i=0,o=e.length;i<o;i++){var s=e[i];Array.isArray(s)?t(s,n):n(s)}}},function(t,e,n){"use strict";var r=n(265),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=l;var o=n(198);o.inherits=n(10);var s=n(740),a=n(390);o.inherits(l,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var h=u[c];l.prototype[h]||(l.prototype[h]=a.prototype[h])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),l.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var n=t.width*t.originX;return t.x=e+n-.5*t.width,t}},function(t,e){t.exports=function(t,e){var n=t.height*t.originY;return t.y=e+n-.5*t.height,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e,n){var r=n(0),i=n(95),o=n(415),s=n(416),a=n(273),u=new r({initialize:function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this._radius=n,this._diameter=2*n},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,n){return this.x=t,this.y=e,this._radius=n,this._diameter=2*n,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=u},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new r(this.x,this.y,this.z)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=n||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return Math.sqrt(e*e+n*n+r*r)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return e*e+n*n+r*r},length:function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},lengthSq:function(){var t=this.x,e=this.y,n=this.z;return t*t+e*e+n*n},normalize:function(){var t=this.x,e=this.y,n=this.z,r=t*t+e*e+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z;return this.x=n*s-r*o,this.y=r*i-e*s,this.z=e*o-n*i,this},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y,i=this.z;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this},transformMat3:function(t){var e=this.x,n=this.y,r=this.z,i=t.val;return this.x=e*i[0]+n*i[3]+r*i[6],this.y=e*i[1]+n*i[4]+r*i[7],this.z=e*i[2]+n*i[5]+r*i[8],this},transformMat4:function(t){var e=this.x,n=this.y,r=this.z,i=t.val;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},transformCoordinates:function(t){var e=this.x,n=this.y,r=this.z,i=t.val,o=e*i[0]+n*i[4]+r*i[8]+i[12],s=e*i[1]+n*i[5]+r*i[9]+i[13],a=e*i[2]+n*i[6]+r*i[10]+i[14],u=e*i[3]+n*i[7]+r*i[11]+i[15];return this.x=o/u,this.y=s/u,this.z=a/u,this},transformQuat:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,c=a*n+s*e-i*r,h=a*r+i*n-o*e,l=-i*e-o*n-s*r;return this.x=u*a+l*-i+c*-s-h*-o,this.y=c*a+l*-o+h*-i-u*-s,this.z=h*a+l*-s+u*-o-c*-i,this},project:function(t){var e=this.x,n=this.y,r=this.z,i=t.val,o=i[0],s=i[1],a=i[2],u=i[3],c=i[4],h=i[5],l=i[6],f=i[7],d=i[8],p=i[9],m=i[10],v=i[11],g=i[12],y=i[13],b=i[14],x=1/(e*u+n*f+r*v+i[15]);return this.x=(e*o+n*c+r*d+g)*x,this.y=(e*s+n*h+r*p+y)*x,this.z=(e*a+n*l+r*m+b)*x,this},unproject:function(t,e){var n=t.x,r=t.y,i=t.z,o=t.w,s=this.x-n,a=o-this.y-1-r,u=this.z;return this.x=2*s/i-1,this.y=2*a/o-1,this.z=2*u-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),t.exports=r},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var n=t.length-1,r=t[e],i=e;i<n;i++)t[i]=t[i+1];return t.length=n,r}}},function(t,e,n){var r=n(0),i=n(303),o=n(22),s=n(8),a=new r({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new s,this._tmpVec2B=new s},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t||(t=new o),void 0===e&&(e=16);var n=this.getLength();e>n&&(e=n/2);var r=Math.max(1,Math.round(n/e));return i(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var e=this.getLength(),n=Math.max(1,e/t);return this.getSpacedPoints(n)},getEndPoint:function(t){return void 0===t&&(t=new s),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0,this._tmpVec2A),i=0;n.push(0);for(var o=1;o<=t;o++)i+=(e=this.getPoint(o/t,this._tmpVec2B)).distance(r),n.push(i),r.copy(e);return this.cacheArcLengths=n,n},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=this.defaultDivisions);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getRandomPoint:function(t){return void 0===t&&(t=new s),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=this.defaultDivisions);for(var e=[],n=0;n<=t;n++){var r=this.getUtoTmapping(n/t,null,t);e.push(this.getPoint(r))}return e},getStartPoint:function(t){return void 0===t&&(t=new s),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new s);var n=t-1e-4,r=t+1e-4;return n<0&&(n=0),r>1&&(r=1),this.getPoint(n,this._tmpVec2A),this.getPoint(r,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,n){var r,i=this.getLengths(n),o=0,s=i.length;r=e?Math.min(e,i[s-1]):t*i[s-1];for(var a,u=0,c=s-1;u<=c;)if((a=i[o=Math.floor(u+(c-u)/2)]-r)<0)u=o+1;else{if(!(a>0)){c=o;break}c=o-1}if(i[o=c]===r)return o/(s-1);var h=i[o];return(o+(r-h)/(i[o+1]-h))/(s-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=a},function(t,e,n){t.exports={ADD:n(1118),COMPLETE:n(1119),FILE_COMPLETE:n(1120),FILE_KEY_COMPLETE:n(1121),FILE_LOAD_ERROR:n(1122),FILE_LOAD:n(1123),FILE_PROGRESS:n(1124),POST_PROCESS:n(1125),PROGRESS:n(1126),START:n(1127)}},function(t,e,n){var r=new(n(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var n=0;n<this.entries.length;n++){var r=this.entries[n];if(r[t]===e)return r}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var n,r=this.entries.slice(),i=r.length;if(e)for(n=0;n<i&&!1!==t.call(e,r[n],n);n++);else for(n=0;n<i&&!1!==t(r[n],n);n++);return this},iterate:function(t,e){var n,r=this.entries.length;if(e)for(n=0;n<r&&!1!==t.call(e,this.entries[n],n);n++);else for(n=0;n<r&&!1!==t(this.entries[n],n);n++);return this},iterateLocal:function(t){var e,n=[];for(e=1;e<arguments.length;e++)n.push(arguments[e]);var r=this.entries.length;for(e=0;e<r;e++){var i=this.entries[e];i[t].apply(i,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var e=new r;return t.entries.forEach(function(t){e.set(t)}),this.entries.forEach(function(t){e.set(t)}),e},intersect:function(t){var e=new r;return this.entries.forEach(function(n){t.contains(n)&&e.set(n)}),e},difference:function(t){var e=new r;return this.entries.forEach(function(n){t.contains(n)||e.set(n)}),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=r},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(1223),a=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Size,i.TextureCrop,i.Tint,i.Transform,i.Visible,s],initialize:function(t,e,n,r,i){o.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,i),this.setPosition(e,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=a},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e){t.exports=function(t,e,n){var r=t.x3-t.x1,i=t.y3-t.y1,o=t.x2-t.x1,s=t.y2-t.y1,a=e-t.x1,u=n-t.y1,c=r*r+i*i,h=r*o+i*s,l=r*a+i*u,f=o*o+s*s,d=o*a+s*u,p=c*f-h*h,m=0===p?0:1/p,v=(f*l-h*d)*m,g=(c*d-h*l)*m;return v>=0&&g>=0&&v+g<1}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.x1,o=t.y1,s=t.x2,a=t.y2,u=e.x1,c=e.y1,h=e.x2,l=e.y2,f=(l-c)*(s-i)-(h-u)*(a-o);if(0===f)return!1;var d=((h-u)*(o-c)-(l-c)*(i-u))/f,p=((s-i)*(o-c)-(a-o)*(i-u))/f;return d>=0&&d<=1&&p>=0&&p<=1&&(n.x=i+d*(s-i),n.y=o+d*(a-o),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,e,n){var r={};t.exports=r;var i=n(30);r.on=function(t,e,n){for(var r,i=e.split(" "),o=0;o<i.length;o++)r=i[o],t.events=t.events||{},t.events[r]=t.events[r]||[],t.events[r].push(n);return n},r.off=function(t,e,n){if(e){"function"==typeof e&&(n=e,e=i.keys(t.events).join(" "));for(var r=e.split(" "),o=0;o<r.length;o++){var s=t.events[r[o]],a=[];if(n&&s)for(var u=0;u<s.length;u++)s[u]!==n&&a.push(s[u]);t.events[r[o]]=a}}else t.events={}},r.trigger=function(t,e,n){var r,o,s,a,u=t.events;if(u&&i.keys(u).length>0){n||(n={}),r=e.split(" ");for(var c=0;c<r.length;c++)if(s=u[o=r[c]]){(a=i.clone(n,!1)).name=o,a.source=t;for(var h=0;h<s.length;h++)s[h].apply(t,[a])}}}},function(t,e,n){var r={};t.exports=r;var i=n(61),o=n(73),s=n(186),a=n(74),u=n(343),c=n(30);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var n=e.bodyA?o.add(e.bodyA.position,e.pointA):e.pointA,r=e.bodyB?o.add(e.bodyB.position,e.pointB):e.pointB,i=o.magnitude(o.sub(n,r));e.length=void 0!==e.length?e.length:i,e.id=e.id||c.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var s={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e.length&&e.stiffness>.1?(s.type="pin",s.anchors=!1):e.stiffness<.9&&(s.type="spring"),e.render=c.extend(s,e.render),e},r.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var n=t[e],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},r.solveAll=function(t,e){for(var n=0;n<t.length;n+=1){var i=t[n],o=!i.bodyA||i.bodyA&&i.bodyA.isStatic,s=!i.bodyB||i.bodyB&&i.bodyB.isStatic;(o||s)&&r.solve(t[n],e)}for(n=0;n<t.length;n+=1)o=!(i=t[n]).bodyA||i.bodyA&&i.bodyA.isStatic,s=!i.bodyB||i.bodyB&&i.bodyB.isStatic,o||s||r.solve(t[n],e)},r.solve=function(t,e){var n=t.bodyA,i=t.bodyB,s=t.pointA,a=t.pointB;if(n||i){n&&!n.isStatic&&(o.rotate(s,n.angle-t.angleA,s),t.angleA=n.angle),i&&!i.isStatic&&(o.rotate(a,i.angle-t.angleB,a),t.angleB=i.angle);var u=s,c=a;if(n&&(u=o.add(n.position,s)),i&&(c=o.add(i.position,a)),u&&c){var h=o.sub(u,c),l=o.magnitude(h);l<r._minLength&&(l=r._minLength);var f,d,p,m,v,g=(l-t.length)/l,y=t.stiffness<1?t.stiffness*e:t.stiffness,b=o.mult(h,g*y),x=(n?n.inverseMass:0)+(i?i.inverseMass:0),w=x+((n?n.inverseInertia:0)+(i?i.inverseInertia:0));if(t.damping){var E=o.create();p=o.div(h,l),v=o.sub(i&&o.sub(i.position,i.positionPrev)||E,n&&o.sub(n.position,n.positionPrev)||E),m=o.dot(p,v)}n&&!n.isStatic&&(d=n.inverseMass/x,n.constraintImpulse.x-=b.x*d,n.constraintImpulse.y-=b.y*d,n.position.x-=b.x*d,n.position.y-=b.y*d,t.damping&&(n.positionPrev.x-=t.damping*p.x*m*d,n.positionPrev.y-=t.damping*p.y*m*d),f=o.cross(s,b)/w*r._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle-=f,n.angle-=f),i&&!i.isStatic&&(d=i.inverseMass/x,i.constraintImpulse.x+=b.x*d,i.constraintImpulse.y+=b.y*d,i.position.x+=b.x*d,i.position.y+=b.y*d,t.damping&&(i.positionPrev.x+=t.damping*p.x*m*d,i.positionPrev.y+=t.damping*p.y*m*d),f=o.cross(a,b)/w*r._torqueDampen*i.inverseInertia*(1-t.angularStiffness),i.constraintImpulse.angle+=f,i.angle+=f)}}},r.postSolveAll=function(t){for(var e=0;e<t.length;e++){var n=t[e],c=n.constraintImpulse;if(!(n.isStatic||0===c.x&&0===c.y&&0===c.angle)){s.set(n,!1);for(var h=0;h<n.parts.length;h++){var l=n.parts[h];i.translate(l.vertices,c),h>0&&(l.position.x+=c.x,l.position.y+=c.y),0!==c.angle&&(i.rotate(l.vertices,c.angle,n.position),u.rotate(l.axes,c.angle),h>0&&o.rotateAbout(l.position,c.angle,n.position,l.position)),a.update(l.bounds,l.vertices,n.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}}},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="IndexError",r.prototype.isIndexError=!0,t.exports=r},function(t,e,n){"use strict";var r=n(104),i=n(39),o=r.string,s=r.array,a=r.object,u=r.number,c=Array.isArray,h=u.isNumber,l=u.isInteger,f=o.isString,d=s.validateIndex;e.name="DenseMatrix",e.path="type",e.factory=function(t,e,u,p){var m=u(n(247)),v=u(n(367));function g(e,n){if(!(this instanceof g))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!f(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))"DenseMatrix"===e.type?(this._data=a.clone(e._data),this._size=a.clone(e._size),this._datatype=n||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=n||e._datatype);else if(e&&c(e.data)&&c(e.size))this._data=e.data,this._size=e.size,this._datatype=n||e.datatype;else if(c(e))this._data=function t(e){for(var n=0,r=e.length;n<r;n++){var i=e[n];c(i)?e[n]=t(i):i&&!0===i.isMatrix&&(e[n]=t(i.valueOf()))}return e}(e),this._size=s.size(this._data),s.validate(this._data,this._size),this._datatype=n;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n}}function y(t,e,n){if(0===e.length){for(var r=t._data;c(r);)r=r[0];return r}return t._size=e.slice(0),t._data=s.resize(t._data,t._size,n),t}function b(t,e,n){for(var r=t._size.slice(0),i=!1;r.length<e.length;)r.push(0),i=!0;for(var o=0,s=e.length;o<s;o++)e[o]>r[o]&&(r[o]=e[o],i=!0);i&&y(t,r,n)}return g.prototype=new v,g.prototype.type="DenseMatrix",g.prototype.isDenseMatrix=!0,g.prototype.getDataType=function(){return m(this._data)},g.prototype.storage=function(){return"dense"},g.prototype.datatype=function(){return this._datatype},g.prototype.create=function(t,e){return new g(t,e)},g.prototype.subset=function(e,n,r){switch(arguments.length){case 1:return function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r=n.size();if(r.length!==e._size.length)throw new i(r.length,e._size.length);for(var o=n.min(),s=n.max(),a=0,u=e._size.length;a<u;a++)d(o[a],e._size[a]),d(s[a],e._size[a]);return new g(function t(e,n,r,i){var o=i===r-1,s=n.dimension(i);return o?s.map(function(t){return d(t,e.length),e[t]}).valueOf():s.map(function(o){d(o,e.length);var s=e[o];return t(s,n,r,i+1)}).valueOf()}(e._data,n,r.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,n,r,o){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var u,c=n.size(),h=n.isScalar();if(t.isMatrix(r)?(u=r.size(),r=r.valueOf()):u=s.size(r),h){if(0!==u.length)throw new TypeError("Scalar expected");e.set(n.min(),r,o)}else{if(c.length<e._size.length)throw new i(c.length,e._size.length,"<");if(u.length<c.length){for(var l=0,f=0;1===c[l]&&1===u[l];)l++;for(;1===c[l];)f++,l++;r=s.unsqueeze(r,c.length,f,u)}if(!a.deepEqual(c,u))throw new i(c,u,">");var p=n.max().map(function(t){return t+1});b(e,p,o);var m=c.length;!function t(e,n,r,i,o){var s=o===i-1,a=n.dimension(o);s?a.forEach(function(t,n){d(t),e[t]=r[n[0]]}):a.forEach(function(s,a){d(s),t(e[s],n,r[a[0]],i,o+1)})}(e._data,n,r,m,0)}return e}(this,e,n,r);default:throw new SyntaxError("Wrong number of arguments")}},g.prototype.get=function(t){if(!c(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new i(t.length,this._size.length);for(var e=0;e<t.length;e++)d(t[e],this._size[e]);for(var n=this._data,r=0,o=t.length;r<o;r++){var s=t[r];d(s,n.length),n=n[s]}return n},g.prototype.set=function(t,e,n){if(!c(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new i(t.length,this._size.length,"<");var r,o,s;b(this,t.map(function(t){return t+1}),n);var a=this._data;for(r=0,o=t.length-1;r<o;r++)s=t[r],d(s,a.length),a=a[s];return s=t[t.length-1],d(s,a.length),a[s]=e,this},g.prototype.resize=function(t,e,n){if(!c(t))throw new TypeError("Array expected");return y(n?this.clone():this,t,e)},g.prototype.reshape=function(t,e){var n=e?this.clone():this;return n._data=s.reshape(n._data,t),n._size=t.slice(0),n},g.prototype.clone=function(){return new g({data:a.clone(this._data),size:a.clone(this._size),datatype:this._datatype})},g.prototype.size=function(){return this._size.slice(0)},g.prototype.map=function(t){var e=this;return new g({data:function n(r,i){return c(r)?r.map(function(t,e){return n(t,i.concat(e))}):t(r,i,e)}(this._data,[]),size:a.clone(this._size),datatype:this._datatype})},g.prototype.forEach=function(t){var e=this;!function n(r,i){c(r)?r.forEach(function(t,e){n(t,i.concat(e))}):t(r,i,e)}(this._data,[])},g.prototype.toArray=function(){return a.clone(this._data)},g.prototype.valueOf=function(){return this._data},g.prototype.format=function(t){return o.format(this._data,t)},g.prototype.toString=function(){return o.format(this._data)},g.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},g.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!h(e)||!l(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var n=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],s=Math.min(i-r,o-n),a=[],u=0;u<s;u++)a[u]=this._data[u+r][u+n];return new g({data:a,size:[s],datatype:this._datatype})},g.diagonal=function(e,n,r,i,o){if(!c(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!h(e)||!l(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!h(r)||!l(r))throw new TypeError("The parameter k must be an integer number")}else r=0;i&&f(o)&&(i=p.convert(i,o));var a,u=r>0?r:0,d=r<0?-r:0,m=e[0],v=e[1],y=Math.min(m-d,v-u);if(c(n)){if(n.length!==y)throw new Error("Invalid value array length");a=function(t){return n[t]}}else if(t.isMatrix(n)){var b=n.size();if(1!==b.length||b[0]!==y)throw new Error("Invalid matrix length");a=function(t){return n.get([t])}}else a=function(){return n};i||(i=t.isBigNumber(a(0))?new t.BigNumber(0):0);var x=[];if(e.length>0){x=s.resize(x,e,i);for(var w=0;w<y;w++)x[w+d][w+u]=a(w)}return new g({data:x,size:[m,v]})},g.fromJSON=function(t){return new g(t)},g.prototype.swapRows=function(t,e){if(!(h(t)&&l(t)&&h(e)&&l(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return d(t,this._size[0]),d(e,this._size[0]),g._swapRows(t,e,this._data),this},g._swapRows=function(t,e,n){var r=n[t];n[t]=n[e],n[e]=r},t.Matrix._storage.dense=g,t.Matrix._storage.default=g,g},e.lazy=!1},function(t,e,n){"use strict";var r=n(5),i=n(7).isInteger;e.name="identity",e.factory=function(t,e,o,s){var a=o(n(3)),u=s("identity",{"":function(){return"Matrix"===e.matrix?a([]):[]},string:function(t){return a(t)},"number | BigNumber":function(t){return h(t,t,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, string":function(t,e){return h(t,t,e)},"number | BigNumber, number | BigNumber":function(t,n){return h(t,n,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,n){return h(t,e,n)},Array:function(t){return c(t)},"Array, string":function(t,e){return c(t,e)},Matrix:function(t){return c(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return c(t.valueOf(),e)}});return u.toTex=void 0,u;function c(t,e){switch(t.length){case 0:return e?a(e):[];case 1:return h(t[0],t[0],e);case 2:return h(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function h(e,n,o){var s=t.isBigNumber(e)||t.isBigNumber(n)?t.BigNumber:null;if(t.isBigNumber(e)&&(e=e.toNumber()),t.isBigNumber(n)&&(n=n.toNumber()),!i(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!i(n)||n<1)throw new Error("Parameters in function identity must be positive integers");var a=s?new t.BigNumber(1):1,u=s?new s(0):0,c=[e,n];if(o)return t.Matrix.storage(o).diagonal(c,a,0,u);for(var h=r.resize([],c,u),l=e<n?e:n,f=0;f<l;f++)h[f][f]=a;return h}}},function(t,e,n){"use strict";e.name="equal",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(31)),a=r(n(54)),u=r(n(83)),c=r(n(55)),h=r(n(19)),l=r(n(18)),f=n(9),d=i("equal",{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:s(t,e)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,s)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,s,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,s,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,s)},"Array, Array":function(t,e){return d(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return d(o(t),e)},"Matrix, Array":function(t,e){return d(t,o(e))},"SparseMatrix, any":function(t,e){return c(t,e,s,!1)},"DenseMatrix, any":function(t,e){return l(t,e,s,!1)},"any, SparseMatrix":function(t,e){return c(e,t,s,!0)},"any, DenseMatrix":function(t,e){return l(e,t,s,!0)},"Array, any":function(t,e){return l(o(t),e,s,!1).valueOf()},"any, Array":function(t,e){return l(o(e),t,s,!0).valueOf()}});return d.toTex={2:"\\left(${args[0]}".concat(f.operators.equal,"${args[1]}\\right)")},d}},function(t,e,n){"use strict";var r=n(4);e.name="isNumeric",e.factory=function(t,e,n,i){var o=i("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function i(t,e){var n=t;"keep"!==e&&(n=t.getContent());for(var i=n.getIdentifier(),o=0;o<r.length;o++)if(i in r[o])return o;return null}t.exports.properties=r,t.exports.getPrecedence=i,t.exports.getAssociativity=function(t,e){var n=t;"keep"!==e&&(n=t.getContent());var o=n.getIdentifier(),s=i(n,e);if(null===s)return null;var a=r[s][o];if(a.hasOwnProperty("associativity")){if("left"===a.associativity)return"left";if("right"===a.associativity)return"right";throw Error("'"+o+"' has the invalid associativity '"+a.associativity+"'.")}return null},t.exports.isAssociativeWith=function(t,e,n){var o="keep"!==n?t.getContent():t,s="keep"!==n?t.getContent():e,a=o.getIdentifier(),u=s.getIdentifier(),c=i(o,n);if(null===c)return null;var h=r[c][a];if(h.hasOwnProperty("associativeWith")&&h.associativeWith instanceof Array){for(var l=0;l<h.associativeWith.length;l++)if(h.associativeWith[l]===u)return!0;return!1}return null}},function(t,e,n){"use strict";var r=n(9),i=n(26).escape,o=n(15).hasOwnProperty,s=n(45).getSafeProperty;e.name="SymbolNode",e.path="expression.node",e.math=!0,e.factory=function(t,e,a,u,c){var h=a(n(49));function l(e){return!!t.Unit&&t.Unit.isValuelessUnit(e)}function f(t){if(!(this instanceof f))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof t)throw new TypeError('String expected for parameter "name"');this.name=t}return f.prototype=new h,f.prototype.type="SymbolNode",f.prototype.isSymbolNode=!0,f.prototype._compile=function(e,n){var r=this.name;if(o(n,r))return function(t,e,n){return e[r]};if(r in e)return function(t,n,i){return s(r in t?t:e,r)};var i=l(r);return function(e,n,o){return r in e?s(e,r):i?new t.Unit(null,r):function(t){throw new Error("Undefined symbol "+t)}(r)}},f.prototype.forEach=function(t){},f.prototype.map=function(t){return this.clone()},f.prototype.clone=function(){return new f(this.name)},f.prototype._toString=function(t){return this.name},f.prototype.toHTML=function(t){var e=i(this.name);return"true"===e||"false"===e?'<span class="math-symbol math-boolean">'+e+"</span>":"i"===e?'<span class="math-symbol math-imaginary-symbol">'+e+"</span>":"Infinity"===e?'<span class="math-symbol math-infinity-symbol">'+e+"</span>":"NaN"===e?'<span class="math-symbol math-nan-symbol">'+e+"</span>":"null"===e?'<span class="math-symbol math-null-symbol">'+e+"</span>":"undefined"===e?'<span class="math-symbol math-undefined-symbol">'+e+"</span>":'<span class="math-symbol">'+e+"</span>"},f.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},f.fromJSON=function(t){return new f(t.name)},f.prototype._toTex=function(t){var e=!1;void 0===c[this.name]&&l(this.name)&&(e=!0);var n=r.toSymbol(this.name,e);return"\\"===n[0]?n:" "+n},f}},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.name="compare",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(54)),c=o(n(250)),h=o(n(55)),l=o(n(19)),f=o(n(18)),d=s("compare",{"boolean, boolean":function(t,e){return t===e?0:t>e?1:-1},"number, number":function(t,n){return t===n||r(t,n,e.epsilon)?0:t>n?1:-1},"BigNumber, BigNumber":function(n,r){return n.eq(r)||i(n,r,e.epsilon)?new t.BigNumber(0):new t.BigNumber(n.cmp(r))},"Fraction, Fraction":function(e,n){return new t.Fraction(e.compare(n))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return d(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,d)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,d,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,d,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,d)},"Array, Array":function(t,e){return d(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return d(a(t),e)},"Matrix, Array":function(t,e){return d(t,a(e))},"SparseMatrix, any":function(t,e){return h(t,e,d,!1)},"DenseMatrix, any":function(t,e){return f(t,e,d,!1)},"any, SparseMatrix":function(t,e){return h(e,t,d,!0)},"any, DenseMatrix":function(t,e){return f(e,t,d,!0)},"Array, any":function(t,e){return f(a(t),e,d,!1).valueOf()},"any, Array":function(t,e){return f(a(e),t,d,!0).valueOf()}});return d.toTex=void 0,d}},function(t,e,n){"use strict";(function(e,r){var i=65536,o=4294967295;var s=n(11).Buffer,a=e.crypto||e.msCrypto;a&&a.getRandomValues?t.exports=function(t,e){if(t>o)throw new RangeError("requested too many random bytes");var n=s.allocUnsafe(t);if(t>0)if(t>i)for(var u=0;u<t;u+=i)a.getRandomValues(n.slice(u,u+i));else a.getRandomValues(n);if("function"==typeof e)return r.nextTick(function(){e(null,n)});return n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(50),n(81))},function(t,e,n){var r=n(11).Buffer;function i(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=r.from(t,e));for(var n=this._block,i=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var u=s%i,c=Math.min(o-a,i-u),h=0;h<c;h++)n[u+h]=t[a+h];a+=c,(s+=c)%i==0&&this._update(n)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,n){(function(e,n){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="swal-button";e.CLASS_NAMES={MODAL:"swal-modal",OVERLAY:"swal-overlay",SHOW_MODAL:"swal-overlay--show-modal",MODAL_TITLE:"swal-title",MODAL_TEXT:"swal-text",ICON:"swal-icon",ICON_CUSTOM:"swal-icon--custom",CONTENT:"swal-content",FOOTER:"swal-footer",BUTTON_CONTAINER:"swal-button-container",BUTTON:r,CONFIRM_BUTTON:r+"--confirm",CANCEL_BUTTON:r+"--cancel",DANGER_BUTTON:r+"--danger",BUTTON_LOADING:r+"--loading",BUTTON_LOADER:r+"__loader"},e.default=e.CLASS_NAMES},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=function(t){var e="."+t;return document.querySelector(e)},e.stringToNode=function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},e.insertAfter=function(t,e){var n=e.nextSibling;e.parentNode.insertBefore(t,n)},e.removeNode=function(t){t.parentElement.removeChild(t)},e.throwErr=function(t){throw"SweetAlert: "+(t=(t=t.replace(/ +(?= )/g,"")).trim())},e.isPlainObject=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype},e.ordinalSuffixOf=function(t){var e=t%10,n=t%100;return 1===e&&11!==n?t+"st":2===e&&12!==n?t+"nd":3===e&&13!==n?t+"rd":t+"th"}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(25));var i=n(26);e.overlayMarkup=i.default,r(n(27)),r(n(28)),r(n(29));var o=n(0),s=o.default.MODAL_TITLE,a=o.default.MODAL_TEXT,u=o.default.ICON,c=o.default.FOOTER;e.iconMarkup='\n  <div class="'+u+'"></div>',e.titleMarkup='\n  <div class="'+s+'"></div>\n',e.textMarkup='\n  <div class="'+a+'"></div>',e.footerMarkup='\n  <div class="'+c+'"></div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.CONFIRM_KEY="confirm",e.CANCEL_KEY="cancel";var i={visible:!0,text:null,value:null,className:"",closeModal:!0},o=Object.assign({},i,{visible:!1,text:"Cancel",value:null}),s=Object.assign({},i,{text:"OK",value:!0});e.defaultButtonList={cancel:o,confirm:s};var a=function(t){switch(t){case e.CONFIRM_KEY:return s;case e.CANCEL_KEY:return o;default:var n=t.charAt(0).toUpperCase()+t.slice(1);return Object.assign({},i,{text:n,value:t})}},u=function(t,e){var n=a(t);return!0===e?Object.assign({},n,{visible:!0}):"string"==typeof e?Object.assign({},n,{visible:!0,text:e}):r.isPlainObject(e)?Object.assign({visible:!0},n,e):Object.assign({},n,{visible:!1})},c=function(t){var n={};switch(t.length){case 1:n[e.CANCEL_KEY]=Object.assign({},o,{visible:!1});break;case 2:n[e.CANCEL_KEY]=u(e.CANCEL_KEY,t[0]),n[e.CONFIRM_KEY]=u(e.CONFIRM_KEY,t[1]);break;default:r.throwErr("Invalid number of 'buttons' in array ("+t.length+").\n      If you want more than 2 buttons, you need to use an object!")}return n};e.getButtonListOpts=function(t){var n=e.defaultButtonList;return"string"==typeof t?n[e.CONFIRM_KEY]=u(e.CONFIRM_KEY,t):Array.isArray(t)?n=c(t):r.isPlainObject(t)?n=function(t){for(var e={},n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],s=t[i],a=u(i,s);e[i]=a}return e.cancel||(e.cancel=o),e}(t):!0===t?n=c([!0,!0]):!1===t?n=c([!1,!1]):void 0===t&&(n=e.defaultButtonList),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(2),o=n(0),s=o.default.MODAL,a=o.default.OVERLAY,u=n(30),c=n(31),h=n(32),l=n(33);e.injectElIntoModal=function(t){var e=r.getNode(s),n=r.stringToNode(t);return e.appendChild(n),n};var f=function(t,e){!function(t){t.className=s,t.textContent=""}(t);var n=e.className;n&&t.classList.add(n)};e.initModalContent=function(t){var e=r.getNode(s);f(e,t),u.default(t.icon),c.initTitle(t.title),c.initText(t.text),l.default(t.content),h.default(t.buttons,t.dangerMode)},e.default=function(){var t=r.getNode(a),e=r.stringToNode(i.modalMarkup);t.appendChild(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i={isOpen:!1,promise:null,actions:{},timer:null},o=Object.assign({},i);e.resetState=function(){o=Object.assign({},i)},e.setActionValue=function(t){if("string"==typeof t)return s(r.CONFIRM_KEY,t);for(var e in t)s(e,t[e])};var s=function(t,e){o.actions[t]||(o.actions[t]={}),Object.assign(o.actions[t],{value:e})};e.setActionOptionsFor=function(t,e){var n=(void 0===e?{}:e).closeModal,r=void 0===n||n;Object.assign(o.actions[t],{closeModal:r})},e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),o=n(0),s=o.default.OVERLAY,a=o.default.SHOW_MODAL,u=o.default.BUTTON,c=o.default.BUTTON_LOADING,h=n(5);e.openModal=function(){r.getNode(s).classList.add(a),h.default.isOpen=!0},e.onAction=function(t){void 0===t&&(t=i.CANCEL_KEY);var e=h.default.actions[t],n=e.value;if(!1===e.closeModal){var o=u+"--"+t;r.getNode(o).classList.add(c)}else r.getNode(s).classList.remove(a),h.default.isOpen=!1;h.default.promise.resolve(n)},e.getState=function(){var t=Object.assign({},h.default);return delete t.promise,delete t.timer,t},e.stopLoading=function(){for(var t=document.querySelectorAll("."+u),e=0;e<t.length;e++)t[e].classList.remove(c)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){t.exports=e.sweetAlert=n(9)}).call(e,n(7))},function(t,e,n){(function(e){t.exports=e.swal=n(10)}).call(e,n(7))},function(t,e,n){"undefined"!=typeof window&&n(11),n(16);var r=n(23).default;t.exports=r},function(t,e,n){var r=n(12);"string"==typeof r&&(r=[[t.i,r,""]]);var i={insertAt:"top",transform:void 0};n(14)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(13)(void 0)).push([t.i,'.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button:not([disabled]):hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel:not([disabled]):hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger:not([disabled]):hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}',""])},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r);return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([i]).join("\n")}return[n].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=f[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(h(r.parts[o],e))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(h(r.parts[o],e));f[r.id]={id:r.id,refs:1,parts:s}}}}function i(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a=o[1],u=o[2],c=o[3],h={css:a,media:u,sourceMap:c};r[s]?r[s].parts.push(h):n.push(r[s]={id:s,parts:[h]})}return n}function o(t,e){var n=p(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=g[g.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),o(t,e),e}function u(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),o(t,e),e}function c(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function h(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var c=v++;n=m||(m=a(e)),r=l.bind(null,n,c,!1),i=l.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=y(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),r=function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){s(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function l(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var f={},d=function(t){var e;return function(){return void 0===e&&(e=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),e}}(),p=function(t){var e={};return function(t){return void 0===e[t]&&(e[t]=function(t){return document.querySelector(t)}.call(this,t)),e[t]}}(),m=null,v=0,g=[],y=n(15);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=d()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return r(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=f[a.id];u.refs--,o.push(u)}t&&r(i(t,e),e);for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete f[u.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){var r=n(17);"undefined"==typeof window||window.Promise||(window.Promise=r),n(21),String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i=0|e,o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;){if(function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(n[o],t))return!0;o++}return!1}}),"undefined"!=typeof window&&function(t){t.forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(t,e,n){(function(e){!function(n){function r(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void a(e.promise,t)}s(e.promise,r)}else(1===t._state?s:a)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void h(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,u(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}var l=setTimeout;i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(r);return o(this,new c(t,e,n)),n},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){r(o,t)},n)}e[o]=s,0==--i&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},i._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){l(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(e,n(18).setImmediate)},function(t,r,i){function o(t,e){this._id=t,this._clearFn=e}var s=Function.prototype.apply;r.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(19),r.setImmediate=e,r.clearImmediate=n},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){delete a[t]}function i(t){if(u)setTimeout(i,0,t);else{var e=a[t];if(e){u=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var o,s=1,a={},u=!1,c=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick(function(){i(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),o=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){i(t.data)},o=function(e){t.port2.postMessage(e)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;o=function(e){var n=c.createElement("script");n.onreadystatechange=function(){i(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():o=function(t){setTimeout(i,0,t)},h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return a[s]=r,o(s),s++},h.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(7),n(20))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(){p&&f&&(p=!1,f.length?d=f.concat(d):m=-1,d.length&&s())}function s(){if(!p){var t=i(o);p=!0;for(var e=d.length;e;){for(f=d,d=[];++m<e;)f&&f[m].run();m=-1,e=d.length}f=null,p=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function u(){}var c,h,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var f,d=[],p=!1,m=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||p||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";n(22).polyfill()},function(t,e,n){"use strict";function r(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var u=o[s],c=Object.getOwnPropertyDescriptor(i,u);void 0!==c&&c.enumerable&&(n[u]=i[u])}}return n}t.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),i=n(6),o=n(5),s=n(36),a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("undefined"!=typeof window){var n=s.getOpts.apply(void 0,t);return new Promise(function(t,e){o.default.promise={resolve:t,reject:e},r.default(n),setTimeout(function(){i.openModal()})})}};a.close=i.onAction,a.getState=i.getState,a.setActionValue=o.setActionValue,a.stopLoading=i.stopLoading,a.setDefaults=s.setDefaults,e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(0),o=i.default.MODAL,s=n(4),a=n(34),u=n(35),c=n(1);e.init=function(t){r.getNode(o)||(document.body||c.throwErr("You can only use SweetAlert AFTER the DOM has loaded!"),a.default(),s.default()),s.initModalContent(t),u.default(t)},e.default=e.init},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=r.default.MODAL;e.modalMarkup='\n  <div class="'+i+'" role="dialog" aria-modal="true"></div>',e.default=e.modalMarkup},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=r.default.OVERLAY,o='<div \n    class="'+i+'"\n    tabIndex="-1">\n  </div>';e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=r.default.ICON;e.errorIconMarkup=function(){var t=i+"--error",e=t+"__line";return'\n    <div class="'+t+'__x-mark">\n      <span class="'+e+" "+e+'--left"></span>\n      <span class="'+e+" "+e+'--right"></span>\n    </div>\n  '},e.warningIconMarkup=function(){var t=i+"--warning";return'\n    <span class="'+t+'__body">\n      <span class="'+t+'__dot"></span>\n    </span>\n  '},e.successIconMarkup=function(){var t=i+"--success";return'\n    <span class="'+t+"__line "+t+'__line--long"></span>\n    <span class="'+t+"__line "+t+'__line--tip"></span>\n\n    <div class="'+t+'__ring"></div>\n    <div class="'+t+'__hide-corners"></div>\n  '}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=r.default.CONTENT;e.contentMarkup='\n  <div class="'+i+'">\n\n  </div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=r.default.BUTTON_CONTAINER,o=r.default.BUTTON,s=r.default.BUTTON_LOADER;e.buttonMarkup='\n  <div class="'+i+'">\n\n    <button\n      class="'+o+'"\n    ></button>\n\n    <div class="'+s+'">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n\n  </div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(2),o=n(0),s=o.default.ICON,a=o.default.ICON_CUSTOM,u=["error","warning","success","info"],c={error:i.errorIconMarkup(),warning:i.warningIconMarkup(),success:i.successIconMarkup()};e.default=function(t){if(t){var e=r.injectElIntoModal(i.iconMarkup);u.includes(t)?function(t,e){var n=s+"--"+t;e.classList.add(n);var r=c[t];r&&(e.innerHTML=r)}(t,e):function(t,e){e.classList.add(a);var n=document.createElement("img");n.src=t,e.appendChild(n)}(t,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4),o=function(t){navigator.userAgent.includes("AppleWebKit")&&(t.style.display="none",t.offsetHeight,t.style.display="")};e.initTitle=function(t){if(t){var e=i.injectElIntoModal(r.titleMarkup);e.textContent=t,o(e)}},e.initText=function(t){if(t){var e=document.createDocumentFragment();t.split("\n").forEach(function(t,n,r){e.appendChild(document.createTextNode(t)),n<r.length-1&&e.appendChild(document.createElement("br"))});var n=i.injectElIntoModal(r.textMarkup);n.appendChild(e),o(n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(4),o=n(0),s=o.default.BUTTON,a=o.default.DANGER_BUTTON,u=n(3),c=n(2),h=n(6),l=n(5),f=function(t,e,n){var i=e.text,o=e.value,f=e.className,d=e.closeModal,p=r.stringToNode(c.buttonMarkup),m=p.querySelector("."+s),v=s+"--"+t;m.classList.add(v),f&&(Array.isArray(f)?f:f.split(" ")).filter(function(t){return t.length>0}).forEach(function(t){m.classList.add(t)}),n&&t===u.CONFIRM_KEY&&m.classList.add(a),m.textContent=i;var g={};return g[t]=o,l.setActionValue(g),l.setActionOptionsFor(t,{closeModal:d}),m.addEventListener("click",function(){return h.onAction(t)}),p};e.default=function(t,e){var n=i.injectElIntoModal(c.footerMarkup);for(var r in t){var o=t[r],s=f(r,o,e);o.visible&&n.appendChild(s)}0===n.children.length&&n.remove()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(4),o=n(2),s=n(5),a=n(6),u=n(0),c=u.default.CONTENT,h=function(t){t.addEventListener("input",function(t){var e=t.target,n=e.value;s.setActionValue(n)}),t.addEventListener("keyup",function(t){if("Enter"===t.key)return a.onAction(r.CONFIRM_KEY)}),setTimeout(function(){t.focus(),s.setActionValue("")},0)};e.default=function(t){if(t){var e=i.injectElIntoModal(o.contentMarkup),n=t.element,r=t.attributes;"string"==typeof n?function(t,e,n){var r=document.createElement(e),i=c+"__"+e;for(var o in r.classList.add(i),n){var s=n[o];r[o]=s}"input"===e&&h(r),t.appendChild(r)}(e,n,r):e.appendChild(n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(2);e.default=function(){var t=r.stringToNode(i.overlayMarkup);document.body.appendChild(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(6),o=n(1),s=n(3),a=n(0),u=a.default.MODAL,c=a.default.BUTTON,h=a.default.OVERLAY,l=function(t){if(r.default.isOpen)switch(t.key){case"Escape":return i.onAction(s.CANCEL_KEY)}},f=function(t){if(r.default.isOpen)switch(t.key){case"Tab":return function(t){t.preventDefault(),p()}(t)}},d=function(t){if(r.default.isOpen)return"Tab"===t.key&&t.shiftKey?function(t){t.preventDefault(),m()}(t):void 0},p=function(){var t=o.getNode(c);t&&(t.tabIndex=0,t.focus())},m=function(){var t=o.getNode(u),e=t.querySelectorAll("."+c),n=e.length-1,r=e[n];r&&r.focus()},v=function(){var t=o.getNode(u),e=t.querySelectorAll("."+c);e.length&&(function(t){t[t.length-1].addEventListener("keydown",f)}(e),function(t){t[0].addEventListener("keydown",d)}(e))},g=function(t){if(o.getNode(h)===t.target)return i.onAction(s.CANCEL_KEY)};e.default=function(t){t.closeOnEsc?document.addEventListener("keyup",l):document.removeEventListener("keyup",l),t.dangerMode?p():m(),v(),function(t){var e=o.getNode(h);e.removeEventListener("click",g),t&&e.addEventListener("click",g)}(t.closeOnClickOutside),function(t){r.default.timer&&clearTimeout(r.default.timer),t&&(r.default.timer=window.setTimeout(function(){return i.onAction(s.CANCEL_KEY)},t))}(t.timer)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(3),o=n(37),s=n(38),a={title:null,text:null,icon:null,buttons:i.defaultButtonList,content:null,className:null,closeOnClickOutside:!0,closeOnEsc:!0,dangerMode:!1,timer:null},u=Object.assign({},a);e.setDefaults=function(t){u=Object.assign({},a,t)};var c=function(t){var e=t&&t.button,n=t&&t.buttons;return void 0!==e&&void 0!==n&&r.throwErr("Cannot set both 'button' and 'buttons' options!"),void 0!==e?{confirm:e}:n},h=function(t){return r.ordinalSuffixOf(t+1)},l=function(t,e){r.throwErr(h(e)+" argument ('"+t+"') is invalid")},f=function(t,e){var n=t+1,i=e[n];r.isPlainObject(i)||void 0===i||r.throwErr("Expected "+h(n)+" argument ('"+i+"') to be a plain object")},d=function(t,e,n,i){var o=typeof e,s="string"===o,a=e instanceof Element;if(s){if(0===n)return{text:e};if(1===n)return{text:e,title:i[0]};if(2===n)return f(n,i),{icon:e};l(e,n)}else{if(a&&0===n)return f(n,i),{content:e};if(r.isPlainObject(e))return function(t,e){var n=t+1,i=e[n];void 0!==i&&r.throwErr("Unexpected "+h(n)+" argument ("+i+")")}(n,i),e;l(e,n)}};e.getOpts=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={};t.forEach(function(e,r){var i=d(0,e,r,t);Object.assign(n,i)});var r=c(n);n.buttons=i.getButtonListOpts(r),delete n.button,n.content=o.getContentOpts(n.content);var h=Object.assign({},a,u,n);return Object.keys(h).forEach(function(t){s.DEPRECATED_OPTS[t]&&s.logDeprecation(t)}),h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i={element:"input",attributes:{placeholder:""}};e.getContentOpts=function(t){return r.isPlainObject(t)?Object.assign({},t):t instanceof Element?{element:t}:"input"===t?i:null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logDeprecation=function(t){var n=e.DEPRECATED_OPTS[t],r=n.onlyRename,i=n.replacement,o=n.subOption,s=n.link,a=r?"renamed":"deprecated",u='SweetAlert warning: "'+t+'" option has been '+a+".";i&&(u+=" Please use"+(o?' "'+o+'" in ':" ")+'"'+i+'" instead.');var c="https://sweetalert.js.org";u+=s?" More details: "+c+s:" More details: "+c+"/guides/#upgrading-from-1x",console.warn(u)},e.DEPRECATED_OPTS={type:{replacement:"icon",link:"/docs/#icon"},imageUrl:{replacement:"icon",link:"/docs/#icon"},customClass:{replacement:"className",onlyRename:!0,link:"/docs/#classname"},imageSize:{},showCancelButton:{replacement:"buttons",link:"/docs/#buttons"},showConfirmButton:{replacement:"button",link:"/docs/#button"},confirmButtonText:{replacement:"button",link:"/docs/#button"},confirmButtonColor:{},cancelButtonText:{replacement:"buttons",link:"/docs/#buttons"},closeOnConfirm:{replacement:"button",subOption:"closeModal",link:"/docs/#button"},closeOnCancel:{replacement:"buttons",subOption:"closeModal",link:"/docs/#buttons"},showLoaderOnConfirm:{replacement:"buttons"},animation:{},inputType:{replacement:"content",link:"/docs/#content"},inputValue:{replacement:"content",link:"/docs/#content"},inputPlaceholder:{replacement:"content",link:"/docs/#content"},html:{replacement:"content",link:"/docs/#content"},allowEscapeKey:{replacement:"closeOnEsc",onlyRename:!0,link:"/docs/#closeonesc"},allowClickOutside:{replacement:"closeOnClickOutside",onlyRename:!0,link:"/docs/#closeonclickoutside"}}}])}).call(this,n(246).setImmediate,n(246).clearImmediate)},function(t,e,n){"use strict";(function(t,r,i,o){n.d(e,"a",function(){return ha}),n.d(e,"b",function(){return Pr}),n.d(e,"c",function(){return yn}),n.d(e,"d",function(){return Ce});var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var l,f=function(){function t(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},t.prototype.registerFlag=function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+r+"."),this.set(t,r)}},t.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},t.prototype.getNumber=function(t){return this.get(t)},t.prototype.getBool=function(t){return this.get(t)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},t.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},t.prototype.setFlags=function(t){this.flags=Object.assign({},t)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var e=d(this.global.location.search);"tfjsflags"in e&&e.tfjsflags.split(",").forEach(function(e){var n=e.split(":"),r=n[0],i=n[1];t.urlFlags[r]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}(r,i)})}},t}();function d(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")}),e}function p(t){l=t}Object.freeze({Environment:f,getQueryParams:d,get ENV(){return l},setEnvironmentGlobal:p});function m(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function v(t,e,n){return Math.max(t,Math.min(e,n))}function g(t){return t%2==0?t:t+1}function y(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function b(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function x(t,e,n){void 0===n&&(n=""),b(S(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function w(t){b(null!=t,function(){return"The input to the tensor constructor must be a non-null value."})}function E(t,e){if(void 0===e&&(e=[]),null==e&&(e=[]),Array.isArray(t)||z(t))for(var n=0;n<t.length;++n)E(t[n],e);else e.push(t);return e}function _(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function S(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function T(t){return t%1==0}function A(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function M(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function C(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function O(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,i){var o=0,s=function(){if(t())r();else{var a=e(++o);null!=n&&o>=n?i():setTimeout(s,a)}};s()})}function N(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(-1===t[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var o=t.slice();return o[r]=e/n,o}function k(t,e){var n=e.length;return b((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),b(t.every(function(t){return T(t)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(t){return t<0?n+t:t})}function R(t,e){for(var n=[],r=[],i=null==e?null:k(e,t).sort(),o=0,s=0;s<t.length;++s){if(null!=i){if(i[o]===s&&1!==t[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(null==i[o]||i[o]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function P(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function I(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function D(t,e,n){if("float32"===e)for(var r=0;r<t.length;r++){var i=t[r];if(isNaN(i)||!isFinite(i))throw Error("The result of the '"+n+"' is "+i+".")}}function L(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function B(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function F(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function z(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function j(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function U(t){if(null==t)return 0;var e=0;return t.forEach(function(t){return e+=2*t.length}),e}function Y(t){return"string"==typeof t||t instanceof String}function W(t){return"boolean"==typeof t}function X(t){return"number"==typeof t}function G(t){return Array.isArray(t)?G(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":X(t)?"float32":Y(t)?"string":W(t)?"bool":"float32"}function V(t){return!!(t&&t.constructor&&t.call&&t.apply)}function q(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function H(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function K(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=E(t)),n&&L(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)0!==Math.round(t[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function $(t,e){if(0===t.length)return e[0];var n=t.reduce(function(t,e){return t*e});if(0===n)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function t(e,n,r){var i=new Array;if(1===n.length)for(var o=n[0],s=0;s<o;s++)i[s]=r[e+s];else{o=n[0];var a=n.slice(1),u=a.reduce(function(t,e){return t*e});for(s=0;s<o;s++)i[s]=t(e+s*u,a,r)}return i}(0,t,e)}function J(t,e){for(var n=Z(t,e),r=0;r<n.length;r++)n[r]=1;return n}function Z(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Q(){if("undefined"!=typeof performance)return performance.now();if(void 0!==t){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function tt(t){t.forEach(function(e){b(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function et(t,e){return l.platform.fetch(t,e)}Object.freeze({shuffle:m,clamp:v,nearestLargerEven:g,sum:y,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(e[r]);n+=i*i}return n},assert:b,assertShapesMatch:x,assertNonNull:w,flatten:E,sizeFromShape:_,isScalarShape:function(t){return 0===t.length},arraysEqual:S,isInt:T,tanh:A,sizeToSquarishShape:M,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return m(e),e},rightPad:C,repeatedTry:O,inferFromImplicitShape:N,parseAxisParam:k,squeezeShape:R,getTypedArrayFromDType:P,getArrayFromDType:I,checkComputationForErrors:D,checkConversionForErrors:L,isValidDtype:B,hasEncodingLoss:F,isTypedArray:z,bytesPerElement:j,bytesFromStringArray:U,isString:Y,isBoolean:W,isNumber:X,inferDtype:G,isFunction:V,nearestDivisor:q,computeStrides:H,toTypedArray:K,toNestedArray:$,makeOnesTypedArray:J,makeZerosTypedArray:Z,now:Q,assertNonNegativeIntegerDimensions:tt,fetch:et});var nt=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new rt)}return t.prototype.profileKernel=function(t,e){var n,r=this,i=this.backendTimer.time(function(){n=e()});return(Array.isArray(n)?n:[n]).forEach(function(e){var n=e.dataSync();D(n,e.dtype,t),i.then(function(i){var o="";null!=i.getExtraProfileInfo&&(o=i.getExtraProfileInfo()),r.logger.logKernelProfile(t,e,n,i.kernelMs,o)})}),n},t}(),rt=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,i){var o=C(r+"ms",9),s=C(t,25),a=e.rank,u=e.size,c=C(e.shape.toString(),14);console.log("%c"+s+"\t%c"+o+"\t%c"+a+"D "+c+"\t%c"+u+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green")},t}(),it=20,ot=3,st=7;function at(t,e,n){return C(Array.isArray(t)?parseFloat(t[0].toFixed(st))+" + "+parseFloat(t[1].toFixed(st))+"j":Y(t)?"'"+t+"'":"bool"===n?ut(t):parseFloat(t.toFixed(st)).toString(),e)}function ut(t){return 0===t?"false":"true"}function ct(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var ht=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=_(t),null!=n){var i=n.length;b(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||I(e,this.size),this.strides=H(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),b(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+e.rank+")"});var i=this.locToIndex(n);this.values[i]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=0,r=0,i=t;r<i.length;r++){var o=i[r];if(o<0||o>=this.shape[n]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}n++}for(var a=t[t.length-1],u=0;u<t.length-1;++u)a+=this.strides[u]*t[u];return this.values[a]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return pt.make(this.shape,{values:this.values},this.dtype)},t}(),lt=null,ft=null,dt=null,pt=function(){function t(t,e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=_(t),this.strides=H(t),this.dataId=null!=r?r:{},this.id=lt().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",lt().registerTensor(this,i),null!=n&&lt().write(i,this.dataId,n)}return t.make=function(e,n,r,i){return new t(e,r,n.values,n.dataId,i)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),b(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),this.reshape([t,e,n,r,i])},t.prototype.asType=function(t){return this.throwIfDisposed(),ft.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return c(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,ft.buffer(this.shape,this.dtype,t)]}})})},t.prototype.bufferSync=function(){return ft.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return c(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,$(this.shape,t)]}})})},t.prototype.arraySync=function(){return $(this.shape,this.dataSync())},t.prototype.data=function(){return c(this,void 0,void 0,function(){return h(this,function(t){return this.throwIfDisposed(),[2,lt().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),lt().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(lt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),ft.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),ft.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),ft.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),ft.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),ft.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),ft.clone(this)},t.prototype.oneHot=function(t,e,n){return this.throwIfDisposed(),ft.oneHot(this,t,e,n)},t.prototype.toString=function(t){return void 0===t&&(t=!1),function(t,e,n,r){var i=H(e),o=function(t,e,n,r){var i=_(e),o=r[r.length-1],s=new Array(o).fill(0),a=e.length,u="complex64"===n?ct(t):t;if(a>1)for(var c=0;c<i/o;c++)for(var h=c*o,l=0;l<o;l++)s[l]=Math.max(s[l],at(u[h+l],0,n).length);return s}(t,e,n,i),s=e.length,a=function t(e,n,r,i,o,s){void 0===s&&(s=!0);var a="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[at(ct(e)[0],0,r)]:"bool"===r?[ut(e[0])]:[e[0].toString()];if(1===c){if(u>it){var h=ot*a,l=Array.from(e.slice(0,h)),f=Array.from(e.slice(u-ot*a,u));return"complex64"===r&&(l=ct(l),f=ct(f)),["["+l.map(function(t,e){return at(t,o[e],r)}).join(", ")+", ..., "+f.map(function(t,e){return at(t,o[u-ot+e],r)}).join(", ")+"]"]}return["["+("complex64"===r?ct(e):Array.from(e)).map(function(t,e){return at(t,o[e],r)}).join(", ")+"]"]}var d=n.slice(1),p=i.slice(1),m=i[0]*a,v=[];if(u>it){for(var g=0;g<ot;g++){var y=(b=g*m)+m;v.push.apply(v,t(e.slice(b,y),d,r,p,o,!1))}for(v.push("..."),g=u-ot;g<u;g++)y=(b=g*m)+m,v.push.apply(v,t(e.slice(b,y),d,r,p,o,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*m)+m,v.push.apply(v,t(e.slice(b,y),d,r,p,o,g===u-1))}var x=2===c?",":"";for(v[0]="["+v[0]+x,g=1;g<v.length-1;g++)v[g]=" "+v[g]+x;var w=",\n";for(g=2;g<c;g++)w+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(s?"":w),v}(t,e,n,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+s),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(a.map(function(t){return"    "+t}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),ft.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),ft.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),ft.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),ft.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),ft.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),ft.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),ft.reverse(this,t)},t.prototype.concat=function(e,n){return void 0===n&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),ft.concat([this].concat(e),n)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),ft.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),ft.stack([this,t],e)},t.prototype.unstack=function(t){return void 0===t&&(t=0),ft.unstack(this,t)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),ft.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,i){return void 0===n&&(n=.001),dt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,i,r,n)},t.prototype.batchNorm=function(t,e,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),ft.batchNorm(this,t,e,n,r,i)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.sum(this,t,e)},t.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.prod(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),ft.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),ft.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),ft.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),ft.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),ft.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),ft.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),ft.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),ft.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),ft.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),ft.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),ft.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),ft.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),ft.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),ft.div(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),ft.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),ft.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),ft.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),ft.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),ft.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),ft.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),ft.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),ft.modStrict(this,t)},t.prototype.squaredDifference=function(t){return this.throwIfDisposed(),ft.squaredDifference(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),ft.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),ft.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),ft.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),ft.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),ft.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),ft.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),ft.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),ft.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),ft.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),ft.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),ft.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),ft.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),ft.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),ft.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),ft.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),ft.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ft.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),ft.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),ft.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),ft.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ft.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ft.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ft.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ft.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ft.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ft.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ft.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ft.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ft.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ft.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ft.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ft.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ft.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ft.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ft.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ft.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),ft.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ft.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ft.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),ft.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),ft.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ft.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ft.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ft.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ft.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ft.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ft.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ft.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ft.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ft.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ft.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ft.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ft.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ft.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ft.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ft.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ft.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ft.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ft.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ft.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),ft.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),ft.softmax(this,t)},t.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),ft.logSoftmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),ft.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),ft.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,i,o){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),ft.conv1d(this,t,e,n,r,i,o)},t.prototype.conv2d=function(t,e,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),ft.conv2d(this,t,e,n,r,i,o)},t.prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),ft.conv2dTranspose(this,t,e,n,r,i)},t.prototype.depthwiseConv2D=function(t,e,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),ft.depthwiseConv2d(this,t,e,n,r,i,o)},t.prototype.separableConv2d=function(t,e,n,r,i,o){return void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),ft.separableConv2d(this,t,e,n,r,i,o)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),ft.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),ft.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),ft.localResponseNormalization(this,t,e,n,r)},t.prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),ft.pool(this,t,e,n,r,i)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),mt.variable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),ft.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),ft.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),ft.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),ft.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,i,o,s,a){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),this.throwIfDisposed(),ft.stridedSlice(this,t,e,n,r,i,o,s,a)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),ft.depthToSpace(this,t,e)},t.prototype.fft=function(){return this.throwIfDisposed(),ft.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ft.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ft.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ft.spectral.irfft(this)},t}();Object.defineProperty(pt,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var mt=function(t){function e(e,n,r){void 0===n&&(n=!0);var i=t.call(this,e.shape,e.dtype,null,e.dataId)||this;i.trainable=n,i.name=r,null==i.name&&(i.name=lt().nextVariableId().toString());try{lt().registerVariable(i)}catch(t){throw lt().disposeTensor(i),t}return i}return a(e,t),e.variable=function(t,n,r,i){return void 0===n&&(n=!0),null!=i&&i!==t.dtype&&(t=t.asType(i)),new e(t,n,r)},e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!S(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");lt().disposeTensor(this),this.dataId=t.dataId,lt().registerTensor(this)},e.prototype.dispose=function(){lt().disposeVariable(this),this.isDisposedInternal=!0},e}(pt);Object.defineProperty(mt,Symbol.hasInstance,{value:function(t){return t instanceof pt&&null!=t.assign&&t.assign instanceof Function}});var vt,gt,yt,bt,xt;mt.variable;!function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(vt||(vt={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(gt||(gt={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(yt||(yt={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(bt||(bt={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(xt||(xt={}));var wt={float32:bt,int32:gt,bool:yt,complex64:xt};function Et(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast "+t+" with "+e)}return wt[t][e]}function _t(t){return Et(t,"int32")}function St(t,e){if(t.dtype===e.dtype)return[t,e];var n=Et(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Tt(t,e){b(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function At(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof pt)n.push(e);else if(i=e,Array.isArray(i)||"object"==typeof i){var i,o=e;for(var s in o){var a=o[s];r.has(a)||(r.add(a),t(a,n,r))}}}(t,e,new Set),e}Object.freeze({makeTypesMatch:St,assertTypesMatch:Tt,isTensorInList:function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1},getTensorsInContainer:At});var Mt,Ct=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},t}(),Ot=function(){function t(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ct}return t.prototype.ready=function(){return c(this,void 0,void 0,function(){var t,e,n;return h(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,r.label=1;case 1:return e<t.length?(n=t[e],[4,this.initializeBackend(n).success]):[3,4];case 2:if(r.sent())return this.setBackend(n),[2];r.label=3;case 3:return e++,[3,1];case 4:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},t.prototype.registerBackend=function(t,e,n){return void 0===n&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)},t.prototype.setBackend=function(t){return c(this,void 0,void 0,function(){var e,n,r;return h(this,function(i){switch(i.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),n=e.success,e.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.profiler=new nt(this.backendInstance),[2,!0]}})})},t.prototype.initializeBackend=function(t){var e=this,n=Nt.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,o=r.then(function(n){return!(i<e.pendingBackendInitId||(e.registry[t]=n,e.pendingBackendInit=null,0))}).catch(function(n){return!(i<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(n.stack||n.message),1))});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(e){return console.warn("Initialization of backend "+t+" failed"),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),i=r.success,o=r.asyncInit;if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(t,e){this.write(t,e,this.readSync(e))},t.prototype.tidy=function(t,e){var n,r=this,i=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return r.startScope(i)},function(){return r.endScope(n)},function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=pt.make(t.shape,{dataId:t.dataId},t.dtype);return this.addTapeNode([t],e,function(t){return[t.toFloat()]}),e},t.prototype.runKernel=function(t,e,n){var r,i=this,o=[],s=this.isTapeOn(),a=null!=this.state.activeScope?this.state.activeScope.name:"",u=function(t){s&&(o=t.map(function(t){return i.keep(i.clone(t))}))},c=this.state.numBytes,h=this.state.numTensors;if(this.scopedRun(function(){return i.state.kernelDepth++},function(){return i.state.kernelDepth--},function(){r=i.ENV.getBool("DEBUG")?i.profiler.profileKernel(a,function(){return t(i.backend,u)}):t(i.backend,u)}),s){var l={id:this.state.nextTapeNodeId++,name:a,inputs:e,outputs:Array.isArray(r)?r:[r],saved:o};null!=n&&(l.gradient=function(t){return n(t,o)}),this.state.activeTape.push(l)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(t){return e[t].shape}),outputShape:Array.isArray(r)?r.map(function(t){return t.shape}):r.shape}),r},t.prototype.registerTensor=function(t,e){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(r=t.size*j(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:null!=e?e:this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.state.numBytes+=r,null!=e?e.register(t.dataId,t.shape,t.dtype):this.backend.register(t.dataId,t.shape,t.dtype)}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof mt||this.track(t)},t.prototype.registerVariable=function(t){if(null!=this.state.registeredVariables[t.name])throw new Error("Variable with name "+t.name+" was already registered");this.state.registeredVariables[t.name]=t},t.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}},t.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},t.prototype.profile=function(t){return c(this,void 0,void 0,function(){var e,n;return h(this,function(r){return this.state.profiling=!0,e=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(t){return t.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(t,e,n){var r={};t.forEach(function(t,e){r[e]=t});var i={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:r,outputs:[e],gradient:function(t){var e=n(t),r={};return e.forEach(function(t,e){r[e]=function(){return t}}),r}};this.state.activeTape.push(i)},t.prototype.keep=function(t){return t.kept=!0,t},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=At(t),r=new Set(n.map(function(t){return t.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||r.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(t){t.kept||t.scopeId!==s.id||e.track(t)})},t.prototype.gradients=function(t,e,n,r){var i=this;if(void 0===r&&(r=!1),b(e.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});b(o instanceof pt,function(){return"The result y returned by f() must be a tensor."});var s=function(t,e,n){for(var r={},i={},o=0;o<e.length;o++)r[e[o].id]=!0;for(o=0;o<t.length;o++){var s=(p=t[o]).inputs;for(var a in s){for(var u=s[a],c=!1,h=0;h<e.length;h++)if(r[u.id]){p.outputs.forEach(function(t){return r[t.id]=!0}),c=!0,i[p.id]=!0;break}if(c)break}}var l={};l[n.id]=!0;var f={};for(o=t.length-1;o>=0;o--)for(s=(p=t[o]).inputs,h=0;h<p.outputs.length;h++)if(l[p.outputs[h].id]){for(var a in s)l[s[a].id]=!0,f[p.id]=!0;break}var d=[];for(o=0;o<t.length;o++){var p;if(i[(p=t[o]).id]&&f[p.id]){var m={};for(var a in p.inputs){var v=p.inputs[a];r[v.id]&&(m[a]=v)}var g=Object.assign({},p);g.inputs=m,g.outputs=p.outputs,d.push(g)}}return d}(this.state.activeTape,e,o);if(!r&&0===s.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var t,r,a={};a[o.id]=null==n?(r=J(_(t=o.shape),"float32"),pt.make(t,{values:r})):n,function(t,e,n){for(var r=function(r){var i=e[r],o=[];if(i.outputs.forEach(function(e){var n=t[e.id];if(null!=n)o.push(n);else{var r=pt.make(e.shape,{values:Z(e.size,e.dtype)},e.dtype);o.push(r)}}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.name+".");var s=i.gradient(1===i.outputs.length?o[0]:o),a=function(e){if(!(e in s))throw new Error("Cannot backprop through input "+e+". Available gradients found: "+Object.keys(s)+".");var r=n(function(){return s[e]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.name+". The gradient of input "+e+" must have 'float32' dtype, but has '"+r.dtype+"'");var o=i.inputs[e];if(!S(r.shape,o.shape))throw new Error("Error in gradient for op "+i.name+". The gradient of input '"+e+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'");if(null==t[o.id])t[o.id]=r;else{var a=t[o.id];t[o.id]=a.add(r),a.dispose()}};for(var u in i.inputs)a(u)},i=e.length-1;i>=0;i--)r(i)}(a,s,function(t){return i.tidy(t)});var u=e.map(function(t){return a[t.id]});return 0===i.state.gradientDepth&&(i.state.activeTape.forEach(function(t){for(var e in t.saved)t.saved[e].dispose()}),i.state.activeTape=null),{value:o,grads:u}})},t.prototype.customGrad=function(t){var e=this;return b(V(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];b(r.every(function(t){return t instanceof pt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return r.forEach(function(t,e){o[e]=t}),e.runKernel(function(e,i){return b((n=t.apply(void 0,r.concat([i]))).value instanceof pt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),b(V(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},o,function(t,e){var i=n.gradFunc(t,e),o=Array.isArray(i)?i:[i];b(o.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),b(o.every(function(t){return t instanceof pt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var s={};return o.forEach(function(t,e){s[e]=function(){return t}}),s})}},t.prototype.write=function(t,e,n){var r=this.state.tensorInfo.get(e),i=r.backend;if(t=t||this.backend,"string"===r.dtype){var o=U(n);this.state.numBytes+=o-r.bytes,r.bytes=o}t!==i&&(i.disposeData(e),r.backend=t,t.register(e,r.shape,r.dtype)),t.write(e,n)},t.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.time=function(t){return c(this,void 0,void 0,function(){var e,n;return h(this,function(r){switch(r.label){case 0:return e=Q(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=Q()-e,[2,n]}})})},t.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ct,this.registry)this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),Nt=function(){var e=function(){if(null==Mt){var e=void 0;if("undefined"!=typeof window)e=window;else if(void 0!==r)e=r;else{if(void 0===t)throw new Error("Could not find a global object");e=t}Mt=e}return Mt}();if(null==e._tfengine){var n=new f(e);e._tfengine=new Ot(n)}return p(e._tfengine.ENV),lt=function(){return e._tfengine},e._tfengine}();function kt(){return"undefined"!=typeof window}l.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),l.registerFlag("IS_BROWSER",function(){return kt()}),l.registerFlag("IS_NODE",function(){return void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node}),l.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),l.registerFlag("PROD",function(){return!1}),l.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return!l.getBool("PROD")}),l.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),l.registerFlag("IS_TEST",function(){return!1});var Rt={},Pt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function It(t,e){Rt[t]=e}function Dt(t){t in Rt||(Rt[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=document.createElement("canvas");return e.addEventListener("webglcontextlost",function(e){e.preventDefault(),delete Rt[t]},!1),1===t?e.getContext("webgl",Pt)||e.getContext("experimental-webgl",Pt):e.getContext("webgl2",Pt)}(t));var e=Rt[t];return e.isContextLost()?(delete Rt[t],Dt(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Rt[t])}function Lt(t,e,n){var r=n();return e&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+jt(t,e))}(t),r}var Bt=5.96e-8,Ft=65504;function zt(t){return!!(l.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||Bt<Math.abs(t)&&Math.abs(t)<Ft)}function jt(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Ut(t,e,n){return he(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Yt(t,e,n){var r=he(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Lt(t,e,function(){return t.shaderSource(r,n)}),Lt(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Wt(t,e,n){var r=he(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Lt(t,e,function(){return t.shaderSource(r,n)}),Lt(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=Vt.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],i=t.split("\n"),o=i.length.toString().length+2,s=i.map(function(t,e){return C((e+1).toString(),o)+t}),a=0,u=0;u<s.length;u++)a=Math.max(s[u].length,a);var c=s.slice(0,r-1),h=s.slice(r-1,r),l=s.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+C(h[0],a),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Xt,Gt,Vt=/ERROR: [0-9]+:([0-9]+):/g;function qt(t,e){return he(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function Ht(t,e,n){if(Lt(t,e,function(){return t.linkProgram(n)}),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Kt(t,e,n){if(Lt(t,e,function(){return t.validateProgram(n)}),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function $t(t,e,n){var r=he(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Lt(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Lt(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Jt(t,e,n){var r=he(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Lt(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Lt(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Zt(t,e){return he(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function Qt(t,e){var n=l.getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function te(t,e){return he(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ee(t,e,n,r,i,o,s,a){var u=t.getAttribLocation(n,r);return-1!==u&&(Lt(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Lt(t,e,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,s,a)}),Lt(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function ne(t,e,n,r){le(t,r),Lt(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function re(t,e,n,r){return he(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function ie(t,e,n){return t.getUniformLocation(e,n)}function oe(t,e,n,r,i,o){Lt(t,e,function(){return ne(t,e,r,o)}),Lt(t,e,function(){return t.uniform1i(i,o)})}function se(t,e,n,r){Lt(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Lt(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function ae(t,e,n){Lt(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Lt(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function ue(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+ce(t,e))}function ce(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function he(t,e,n,r){var i=Lt(t,e,function(){return n()});if(null==i)throw new Error(r);return i}function le(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function fe(t,e){return void 0===e&&(e=2),_(t.slice(0,t.length-e))}function de(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function pe(t,e){var n;void 0===e&&(e=!1);var r=l.getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,1===(t=t.map(function(e,n){return n>=t.length-2?g(t[n]):t[n]})).length&&(t=[2,t[0]])),2!==t.length){var i=R(t);t=i.newShape}var o=_(t);if(t.length<=1&&o<=r)return[1,o];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var s=fe(t),a=2,u=2;return t.length&&(a=(n=de(t))[0],u=n[1]),M(o=s*(a/2)*(u/2)).map(function(t){return 2*t})}return M(o)}function me(t){return t%2==0}function ve(t,e){if(S(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(me(n)&&me(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&me(t[0])&&me(e[0])}function ge(t){if(null==Xt){var e=Dt(t);Xt=e.getParameter(e.MAX_TEXTURE_SIZE)}return Xt}function ye(t){if(null==Gt){var e=Dt(t);Gt=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Gt)}function be(t){if(0===t)return 0;var e=Dt(t);return xe(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:xe(e,"EXT_disjoint_timer_query")?1:0}function xe(t,e){return null!=t.getExtension(e)}function we(t){try{if(null!=Dt(t))return!0}catch(t){return!1}return!1}function Ee(t){if(0===t)return!1;var e=Dt(t);if(1===t){if(!xe(e,"OES_texture_float"))return!1}else if(!xe(e,"EXT_color_buffer_float"))return!1;return Se(e,t)}function _e(t){if(0===t)return!1;var e=Dt(t);if(1===t){if(!xe(e,"OES_texture_float"))return!1;if(!xe(e,"WEBGL_color_buffer_float"))return!1}else if(!xe(e,"EXT_color_buffer_float"))return!1;return Se(e,t)}function Se(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=2===e?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(n),o}function Te(t){return 2===t&&null!=Dt(t).fenceSync}var Ae=Object.freeze({callAndCheck:Lt,canBeRepresented:zt,getWebGLErrorMessage:jt,getExtensionOrThrow:Ut,createVertexShader:Yt,createFragmentShader:Wt,createProgram:qt,linkProgram:Ht,validateProgram:Kt,createStaticVertexBuffer:$t,createStaticIndexBuffer:Jt,getNumChannels:function(){return 2===l.getNumber("WEBGL_VERSION")?1:4},createTexture:Zt,validateTextureSize:Qt,createFramebuffer:te,bindVertexBufferToProgramAttribute:ee,bindTextureUnit:ne,unbindTextureUnit:function(t,e,n){le(t,n),Lt(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:re,getProgramUniformLocation:ie,bindTextureToProgramUniformSampler:oe,bindCanvasToFramebuffer:function(t,e){Lt(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Lt(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Lt(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:se,unbindColorTextureFromFramebuffer:ae,validateFramebuffer:ue,getFramebufferErrorMessage:ce,getBatchDim:fe,getRowsCols:de,getTextureShapeFromLogicalShape:pe,isReshapeFree:ve,get MAX_TEXTURE_SIZE(){return Xt},get MAX_TEXTURES_IN_SHADER(){return Gt},getWebGLMaxTextureSize:ge,getMaxTexturesInShader:ye,getWebGLDisjointQueryTimerVersion:be,isWebGLVersionEnabled:we,isRenderToFloatTextureEnabled:Ee,isDownloadFloatTextureEnabled:_e,isWebGLFenceEnabled:Te});function Me(t){l.getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ce(t,e){return Nt.tidy(t,e)}function Oe(t){At(t).forEach(function(t){return t.dispose()})}function Ne(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.getBool("IS_TEST")||console.warn.apply(console,t)}function ke(t,e,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=e.length,s=0;s<o;++s)i=i.concat([t[s+1]/e[s],e[s]]);i=i.concat(t.slice(o+1))}return i}function Re(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function Pe(t,e,n,r){void 0===r&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function Ie(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function De(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function Le(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Be(t,e,n){for(var r=t.length+e.length,i=[],o=0,s=0,a=0;a<r;a++)-1===n.indexOf(a)?i.push(t[o++]):i.push(e[s++]);return i}function Fe(t,e){for(var n=[],r=t.length,i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map(function(e){return t[e]})]}function ze(t,e){return Be(t,e.map(function(t){return 1}),e)}function je(t,e,n){b(Le(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function Ue(t,e){if(Le(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function Ye(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function We(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Xe(t,e){var n=t[0].length;t.forEach(function(t,e){b(t.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")"})}),b(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(t,i){for(var o=0;o<n;o++)b(o===e||t[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Ge(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function Ve(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o];var s=t.shape,a=n.slice();a.pop();var u=1;for(o=r;o<t.rank;++o)u*=s[o],a.push(s[o]);var c=H(t.shape).map(function(t){return t/u}).concat([1]).slice(0,r);return[a,i,u,c]}l.registerFlag("HAS_WEBGL",function(){return l.getNumber("WEBGL_VERSION")>0}),l.registerFlag("WEBGL_VERSION",function(){return we(2)?2:we(1)?1:0}),l.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===l.get("WEBGL_VERSION")}),l.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),l.registerFlag("WEBGL_PACK",function(){return l.getBool("HAS_WEBGL")}),l.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_PACK_CLIP",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_PACK_REDUCE",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_LAZILY_UNPACK",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_CONV_IM2COL",function(){return l.getBool("WEBGL_PACK")}),l.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return ge(l.getNumber("WEBGL_VERSION"))}),l.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return ye(l.getNumber("WEBGL_VERSION"))}),l.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=l.getNumber("WEBGL_VERSION");return 0===t?0:be(t)}),l.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),l.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return Ee(l.getNumber("WEBGL_VERSION"))}),l.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return _e(l.getNumber("WEBGL_VERSION"))}),l.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Te(l.getNumber("WEBGL_VERSION"))}),l.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return l.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),dt=Me;var qe=30;function He(t){return t<=qe?t:q(t,Math.floor(Math.sqrt(t)))}function Ke(t,e,n){for(var r=e.rank>1?e.shape[e.rank-1]:1,i=n.length,o=1,s=r;s<i;++s)o*=n[s];var a=r<1?1:r;return{sliceRank:r,numUpdates:e.size/a,sliceSize:o,strides:H(n.slice(0,r)).concat([1]),outputSize:_(n)}}function $e(t,e,n,r,i,o,s,a,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),0!==s)throw new Error("ellipsis mask is not yet supported");if(0!==a)throw new Error("new axis mask is not yet supported");for(var c=[],h=[],l=[],f=0;f<t.length;f++)c[f]=Je(i,e,r,t,f),h[f]=Ze(o,n,r,t,f),u&1<<f&&(h[f]=c[f]+1,l.push(f));var d=new Array(t.length).fill(0);return d=d.map(function(t,e){for(var n=0,i=r[e]||1,o=c[e];!(i>0?o>=h[e]:o<=h[e]);o+=i)n+=1;return n}),[c,d,l]}function Je(t,e,n,r,i){var o=e[i],s=n[i]||1;(t&1<<i||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),v(0,o,a-1)}function Ze(t,e,n,r,i){var o=e[i],s=n[i]||1;(t&1<<i||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),s>0?v(0,o,a):v(-1,o,a-1)}function Qe(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function tn(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function en(t){var e=t;if(z(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];Array.isArray(e)||z(e);)n.push(e.length),e=e[0];return Array.isArray(t)&&l.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],Array.isArray(e)||z(e)){b(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),b(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var i=n.slice(1),o=0;o<e.length;++o)t(e[o],i,r.concat(o))}else b(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(t,n,[]),n}function nn(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function rn(t,e,n,r){if(void 0===r&&(r="numeric"),t instanceof pt)return nn(r,t.dtype,e,n),t;var i=G(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),nn(r,i,e,n),null==t||!z(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t){var o=null==t?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var s=en(t);z(t)||Array.isArray(t)||(t=[t]);var a="string"!==i?K(t,i,l.getBool("DEBUG")):E(t);return pt.make(s,{values:a},i)}function on(t,e,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return rn(t,e+"["+r+"]",n)},r)}function sn(t){return Nt.customGrad(t)}function an(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Nt.startScope(n);try{var i=r.apply(void 0,t);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Nt.endScope(i),i}catch(t){throw Nt.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var un=an({softmax_:function(t,e){void 0===e&&(e=-1);var n=rn(t,"logits","softmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return sn(function(t,n){var r=t.logSumExp([e],!0),i=t.toFloat().sub(r).exp();return n([i]),{value:i,gradFunc:function(t,n){var r=n[0],i=t.mul(r);return i.sub(i.sum([e],!0).mul(r))}}})(n)}}),cn=an({logSoftmax_:function(t,e){void 0===e&&(e=-1);var n=rn(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return sn(function(t,n){var r=t.max(e,!0),i=t.sub(r),o=i.toFloat().sub(i.exp().sum(e,!0).log());return n([o]),{value:o,gradFunc:function(t,n){var r=n[0].exp();return t.sub(t.sum(e,!0).mul(r))}}})(n)}}),hn=an({complex_:function(t,e){var n=rn(t,"real","complex"),r=rn(e,"imag","complex");return x(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Nt.runKernel(function(t){return t.complex(n,r)},{$real:n,$imag:r})}}),ln=an({real_:function(t){var e=rn(t,"input","real");return Nt.runKernel(function(t){return t.real(e)},{$input:e})}}),fn=an({imag_:function(t){var e=rn(t,"input","imag");return Nt.runKernel(function(t){return t.imag(e)},{$input:e})}});function dn(t,e,n){if(null==n&&(n=G(t)),"complex64"===n)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!z(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");var r=en(t);if(null!=e){tt(e);var i=_(e),o=_(r);b(i===o,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+o});for(var s=0;s<r.length;++s){var a=r[s],u=s!==r.length-1||a!==_(e.slice(s));b(r[s]===e[s]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "})}}return z(t)||Array.isArray(t)||(t=[t]),e=e||r,t="string"!==n?K(t,n,l.getBool("DEBUG")):E(t),pt.make(e,{values:t},n)}function pn(t,e){if((z(t)||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");return dn(t,[],e)}function mn(t,e){w(t);var n=en(t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return dn(t,n,e)}function vn(t,e,n){if(w(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=en(t);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return dn(t,e=e||r,n)}function gn(t,e,n){if(w(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=en(t);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return dn(t,e=e||r,n)}function yn(t,e,n){if(w(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=en(t);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return dn(t,e=e||r,n)}function bn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=bn(t,"float32"),r=xn(t,"float32");return hn(n,r)}var i=J(_(t),e);return pt.make(t,{values:i},e)}function xn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=xn(t,"float32"),r=xn(t,"float32");return hn(n,r)}var i=Z(_(t),e);return pt.make(t,{values:i},e)}function wn(t,e,n){return Nt.runKernel(function(r){return r.fill(t,e,n)},{})}function En(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return xn([0],r);var i=Z(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return mn(i,r)}var _n=an({onesLike_:function(t){var e=rn(t,"x","onesLike");if("complex64"===e.dtype){var n=_n(ln(e)),r=Sn(fn(e));return hn(n,r)}return Nt.runKernel(function(t){return t.onesLike(e)},{$x:e},function(t,e){return{$x:function(){return Sn(t)}}})}}),Sn=an({zerosLike_:function(t){var e=rn(t,"x","zerosLike");return Nt.runKernel(function(t){return t.zerosLike(e)},{$x:e},function(t,e){return{$x:function(){return Sn(t)}}})}}),Tn=function(){function t(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},t.prototype.set=function(t,e){this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.data.delete(t)},t}();!function(){function t(){}t.prototype.time=function(t){throw new Error("Not yet implemented.")},t.prototype.read=function(t){throw new Error("Not yet implemented.")},t.prototype.readSync=function(t){throw new Error("Not yet implemented.")},t.prototype.disposeData=function(t){throw new Error("Not yet implemented.")},t.prototype.write=function(t,e){throw new Error("Not yet implemented.")},t.prototype.fromPixels=function(t,e){throw new Error("Not yet implemented.")},t.prototype.register=function(t,e,n){throw new Error("Not yet implemented.")},t.prototype.memory=function(){throw new Error("Not yet implemented.")},t.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.fusedBatchMatMul=function(t,e,n,r,i,o){throw new Error("Not yet implemented")},t.prototype.slice=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.stridedSlice=function(t,e,n,r,i,o,s,a,u){throw new Error("Not yet implemented")},t.prototype.unstack=function(t,e){throw new Error("Not yet implemented")},t.prototype.reverse=function(t,e){throw new Error("Not yet implemented")},t.prototype.concat=function(t,e){throw new Error("Not yet implemented")},t.prototype.neg=function(t){throw new Error("Not yet implemented")},t.prototype.add=function(t,e){throw new Error("Not yet implemented")},t.prototype.addN=function(t){throw new Error("Not yet implemented")},t.prototype.subtract=function(t,e){throw new Error("Not yet implemented")},t.prototype.multiply=function(t,e){throw new Error("Not yet implemented")},t.prototype.realDivide=function(t,e){throw new Error("Not yet implemented")},t.prototype.floorDiv=function(t,e){throw new Error("Not yet implemented")},t.prototype.sum=function(t,e){throw new Error("Not yet implemented")},t.prototype.prod=function(t,e){throw new Error("Not yet implemented")},t.prototype.unsortedSegmentSum=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.argMin=function(t,e){throw new Error("Not yet implemented")},t.prototype.argMax=function(t,e){throw new Error("Not yet implemented")},t.prototype.equal=function(t,e){throw new Error("Not yet implemented")},t.prototype.notEqual=function(t,e){throw new Error("Not yet implemented")},t.prototype.less=function(t,e){throw new Error("Not yet implemented")},t.prototype.lessEqual=function(t,e){throw new Error("Not yet implemented")},t.prototype.greater=function(t,e){throw new Error("Not yet implemented")},t.prototype.greaterEqual=function(t,e){throw new Error("Not yet implemented")},t.prototype.logicalNot=function(t){throw new Error("Not yet implemented")},t.prototype.logicalAnd=function(t,e){throw new Error("Not yet implemented")},t.prototype.logicalOr=function(t,e){throw new Error("Not yet implemented")},t.prototype.where=function(t){throw new Error("Not yet implemented")},t.prototype.select=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.topk=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.min=function(t,e){throw new Error("Not yet implemented")},t.prototype.minimum=function(t,e){throw new Error("Not yet implemented")},t.prototype.mod=function(t,e){throw new Error("Not yet implemented")},t.prototype.max=function(t,e){throw new Error("Not yet implemented")},t.prototype.maximum=function(t,e){throw new Error("Not yet implemented")},t.prototype.all=function(t,e){throw new Error("Not yet implemented")},t.prototype.any=function(t,e){throw new Error("Not yet implemented")},t.prototype.squaredDifference=function(t,e){throw new Error("Not yet implemented")},t.prototype.ceil=function(t){throw new Error("Not yet implemented")},t.prototype.floor=function(t){throw new Error("Not yet implemented")},t.prototype.round=function(t){throw new Error("Not yet implemented")},t.prototype.sign=function(t){throw new Error("Not yet implemented")},t.prototype.isNaN=function(t){throw new Error("Not yet implemented")},t.prototype.isInf=function(t){throw new Error("Not yet implemented")},t.prototype.isFinite=function(t){throw new Error("Not yet implemented")},t.prototype.pow=function(t,e){throw new Error("Not yet implemented")},t.prototype.exp=function(t){throw new Error("Not yet implemented")},t.prototype.expm1=function(t){throw new Error("Not yet implemented")},t.prototype.log=function(t){throw new Error("Not yet implemented")},t.prototype.log1p=function(t){throw new Error("Not yet implemented")},t.prototype.sqrt=function(t){throw new Error("Not yet implemented")},t.prototype.rsqrt=function(t){throw new Error("Not yet implemented")},t.prototype.square=function(t){throw new Error("Not yet implemented")},t.prototype.reciprocal=function(t){throw new Error("Not yet implemented")},t.prototype.relu=function(t){throw new Error("Not yet implemented")},t.prototype.prelu=function(t,e){throw new Error("Not yet implemented")},t.prototype.elu=function(t){throw new Error("Not yet implemented")},t.prototype.eluDer=function(t,e){throw new Error("Not yet implemented")},t.prototype.selu=function(t){throw new Error("Not yet implemented")},t.prototype.int=function(t){throw new Error("Not yet implemented")},t.prototype.clip=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.abs=function(t){throw new Error("Not yet implemented")},t.prototype.complexAbs=function(t){throw new Error("Not yet implemented")},t.prototype.sigmoid=function(t){throw new Error("Not yet implemented")},t.prototype.softplus=function(t){throw new Error("Not yet implemented")},t.prototype.sin=function(t){throw new Error("Not yet implemented")},t.prototype.cos=function(t){throw new Error("Not yet implemented")},t.prototype.tan=function(t){throw new Error("Not yet implemented")},t.prototype.asin=function(t){throw new Error("Not yet implemented")},t.prototype.acos=function(t){throw new Error("Not yet implemented")},t.prototype.atan=function(t){throw new Error("Not yet implemented")},t.prototype.atan2=function(t,e){throw new Error("Not yet implemented")},t.prototype.sinh=function(t){throw new Error("Not yet implemented")},t.prototype.cosh=function(t){throw new Error("Not yet implemented")},t.prototype.tanh=function(t){throw new Error("Not yet implemented")},t.prototype.asinh=function(t){throw new Error("Not yet implemented")},t.prototype.acosh=function(t){throw new Error("Not yet implemented")},t.prototype.atanh=function(t){throw new Error("Not yet implemented")},t.prototype.erf=function(t){throw new Error("Not yet implemented")},t.prototype.step=function(t,e){throw new Error("Not yet implemented")},t.prototype.conv2d=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.conv2dDerInput=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.conv2dDerFilter=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2D=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2DDerInput=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.conv3d=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.conv3dDerInput=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.conv3dDerFilter=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.maxPool=function(t,e){throw new Error("Not yet implemented")},t.prototype.maxPoolBackprop=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.avgPool=function(t,e){throw new Error("Not yet implemented")},t.prototype.avgPoolBackprop=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.reshape=function(t,e){throw new Error("Not yet implemented")},t.prototype.cast=function(t,e){throw new Error("Not yet implemented")},t.prototype.tile=function(t,e){throw new Error("Not yet implemented")},t.prototype.pad=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.transpose=function(t,e){throw new Error("Not yet implemented")},t.prototype.gather=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.gatherND=function(t,e){throw new Error("Not yet implemented")},t.prototype.scatterND=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.batchToSpaceND=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.spaceToBatchND=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.resizeBilinear=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.resizeBilinearBackprop=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.resizeNearestNeighbor=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.batchNormalization=function(t,e,n,r,i,o){throw new Error("Not yet implemented")},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){throw new Error("Not yet implemented")},t.prototype.LRNGrad=function(t,e,n,r,i,o,s){throw new Error("Not yet implemented")},t.prototype.multinomial=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.oneHot=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.cumsum=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.nonMaxSuppression=function(t,e,n,r,i){throw new Error("Not yet implemented")},t.prototype.fft=function(t){throw new Error("Not yet implemented")},t.prototype.ifft=function(t){throw new Error("Not yet implemented")},t.prototype.complex=function(t,e){throw new Error("Not yet implemented")},t.prototype.real=function(t){throw new Error("Not yet implemented")},t.prototype.imag=function(t){throw new Error("Not yet implemented")},t.prototype.cropAndResize=function(t,e,n,r,i,o){throw new Error("Not yet implemented")},t.prototype.depthToSpace=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.split=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.sparseToDense=function(t,e,n,r){throw new Error("Not yet implemented")},t.prototype.fill=function(t,e,n){throw new Error("Not yet implemented.")},t.prototype.onesLike=function(t){throw new Error("Not yet implemented")},t.prototype.zerosLike=function(t){throw new Error("Not yet implemented")},t.prototype.linspace=function(t,e,n){throw new Error("Not yet implemented")},t.prototype.dispose=function(){throw new Error("Not yet implemented")}}();function An(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var o=n-1-i,s=t[o]||1;(e[e.length-1-i]||1)>1&&1===s&&r.unshift(o)}return r}function Mn(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],o=e.length-r-1,s=e[o];(null==i||1===i&&s>1)&&n.unshift(o)}return n}function Cn(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var o=t[t.length-i-1];null==o&&(o=1);var s=e[e.length-i-1];if(null==s&&(s=1),1===o)n.unshift(s);else if(1===s)n.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(o)}}return n}function On(t,e,n,r,i,o,s){void 0===s&&(s="channelsLast");var a,u=Pn(e),c=u[0],h=u[1];if("channelsLast"===s)a=[c,h,t[3],t[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);a=[c,h,t[1],t[1]]}return Nn(t,a,n,r,i,o,!1,s)}function Nn(t,e,n,r,i,o,s,a){void 0===s&&(s=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1],c=u[0],h=u[1],l=u[2],f=u[3];if("channelsLast"===a)c=t[0],h=t[1],l=t[2],f=t[3];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=t[0],f=t[1],h=t[2],l=t[3]}var d,p=e[0],m=e[1],v=e[3],g=Pn(n),y=g[0],x=g[1],w=Pn(r),E=w[0],_=w[1],S=Dn(p,E),A=Dn(m,_),M=function(t,e,n,r,i,o,s,a){var u,c,h;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var l=function(t,e,n,r,i,o){null==i&&(i=Rn(t,e,r));var s=t[1],a=Ln((t[0]-e+2*i)/r+1,o);b(T(a),function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"});var u=Ln((s-e+2*i)/r+1,o);return b(T(u),function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"}),[a,u,1]}([e,n,1],o,0,r,t,a);c=l[0],h=l[1]}else if("same"===t){c=Math.ceil(e/r),h=Math.ceil(n/i);var f=Math.max(0,(c-1)*r+o-e),d=Math.max(0,(h-1)*i+s-n),p=Math.floor(f/2),m=f-p,v=Math.floor(d/2);u={top:p,bottom:m,left:v,right:d-v,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-o+1)/r),h=Math.ceil((n-s+1)/i)}return{padInfo:u,outHeight:c,outWidth:h}}(i,h,l,y,x,S,A,o),C=M.padInfo,O=M.outHeight,N=M.outWidth,k=s?v*f:v;return"channelsFirst"===a?d=[c,k,O,N]:"channelsLast"===a&&(d=[c,O,N,k]),{batchSize:c,dataFormat:a,inHeight:h,inWidth:l,inChannels:f,outHeight:O,outWidth:N,outChannels:k,padInfo:C,strideHeight:y,strideWidth:x,filterHeight:p,filterWidth:m,effectiveFilterHeight:S,effectiveFilterWidth:A,dilationHeight:E,dilationWidth:_,inShape:t,outShape:d,filterShape:e}}function kn(t,e,n,r,i,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var a=[-1,-1,-1,-1,-1],u=a[0],c=a[1],h=a[2],l=a[3],f=a[4];if("channelsLast"===s)u=t[0],c=t[1],h=t[2],l=t[3],f=t[4];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);u=t[0],f=t[1],c=t[2],h=t[3],l=t[4]}var d,p=e[0],m=e[1],v=e[2],g=e[4],y=In(n),b=y[0],x=y[1],w=y[2],E=In(r),_=E[0],S=E[1],T=E[2],A=function(t,e,n,r,i,o,s,a,u,c){var h,l,f,d;if("same"===t){var p=((l=Math.ceil(e/i))-1)*i+a-e,m=((f=Math.ceil(n/o))-1)*o+u-n,v=((d=Math.ceil(r/s))-1)*s+c-r,g=Math.floor(p/2),y=p-g,b=Math.floor(m/2),x=m-b,w=Math.floor(v/2);h={top:b,bottom:x,left:w,right:v-w,front:g,back:y,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},l=Math.ceil((e-a+1)/i),f=Math.ceil((n-u+1)/o),d=Math.ceil((r-c+1)/s)}return{padInfo:h,outDepth:l,outHeight:f,outWidth:d}}(i,c,h,l,b,x,w,Dn(p,_),Dn(m,S),Dn(v,T)),M=A.padInfo,C=A.outDepth,O=A.outHeight,N=A.outWidth,k=o?g*f:g;return"channelsFirst"===s?d=[u,k,C,O,N]:"channelsLast"===s&&(d=[u,C,O,N,k]),{batchSize:u,dataFormat:s,inDepth:c,inHeight:h,inWidth:l,inChannels:f,outDepth:C,outHeight:O,outWidth:N,outChannels:k,padInfo:M,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:p,filterHeight:m,filterWidth:v,dilationDepth:_,dilationHeight:S,dilationWidth:T,inShape:t,outShape:d,filterShape:e}}function Rn(t,e,n,r){void 0===r&&(r=1);var i=Dn(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Pn(t){return"number"==typeof t?[t,t]:t}function In(t){return"number"==typeof t?[t,t,t]:t}function Dn(t,e){return e<=1?t:t+(t-1)*(e-1)}function Ln(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Bn(t){var e=Pn(t),n=e[0],r=e[1];return 1===n&&1===r}function Fn(t,e){return Bn(t)||Bn(e)}function zn(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=xn(t.shape),i=t.toFloat(),o=n.complex(i,r);return r.dispose(),i.dispose(),o}if(!F(t.dtype,e))return pt.make(t.shape,{dataId:t.dataId},e);if("complex64"===t.dtype){var s=n.real(t);return o=s.cast(e),s.dispose(),o}if("int32"===e)return n.int(t);if("bool"===e){var a=pn(0,t.dtype);return o=n.notEqual(t,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function jn(t,e){return pt.make(e,{dataId:t.dataId},t.dtype)}function Un(t,e,n){var r=(e-t)/(n-1),i=Z(n,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return mn(i,"float32")}Object.freeze({castTensor:zn,reshapeTensor:jn,linspaceImpl:Un,upcastType:Et,axesAreInnerMostDims:Le,combineLocations:Be,computeOutAndReduceShapes:Fe,expandShapeToKeepDim:ze,assertAxesAreInnerMostDims:je,getAxesPermutation:Ue,getUndoAxesPermutation:Ye,getInnerMostAxes:We,getBroadcastDims:An,getReductionAxes:Mn,assertAndGetBroadcastShape:Cn,assertParamsConsistent:Xe,computeOutShape:Ge,computePool2DInfo:On,computeConv2DInfo:Nn,computeConv3DInfo:kn,computeDefaultPad:Rn,tupleValuesAreOne:Bn,eitherStridesOrDilationsAreOne:Fn});function Yn(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Wn(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Xn(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Gn(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Vn(t,e,n,r,i){for(var o=Array.from(e).map(function(t,e){return{score:t,boxIndex:e}}).filter(function(t){return t.score>i}).sort(function(t,e){return e.score-t.score}),s=[],a=0;a<o.length;a++){var u=o[a],c=u.score,h=u.boxIndex;if(c<i)break;for(var l=!1,f=s.length-1;f>=0;--f)if(qn(t,h,s[f])>=r){l=!0;break}if(!l&&(s.push(h),s.length>=n))break}return mn(s,"int32")}function qn(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),l=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(a-o)*(u-s),p=(l-c)*(f-h);if(d<=0||p<=0)return 0;var m=Math.max(o,c),v=Math.max(s,h),g=Math.min(a,l),y=Math.min(u,f),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(d+p-b)}function Hn(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(e){i[n]=e;var o=t.slice(r,i);return r[n]+=e,o})}function Kn(t,e,n,r,i){for(var o=e[e.length-1],s=[t.length/o,o],a=s[0],u=s[1],c=P(n,a*r),h=P("int32",a*r),l=0;l<a;l++){for(var f=l*u,d=t.subarray(f,f+u),p=[],m=0;m<d.length;m++)p.push({value:d[m],index:m});p.sort(function(t,e){return e.value-t.value});var v=l*r,g=c.subarray(v,v+r),y=h.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=e.slice();return b[b.length-1]=r,[dn(c,b,n),dn(h,b,"int32")]}var $n=an({concat_:function(t,e){void 0===e&&(e=0),b(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=on(t,"tensors","concat");e=k(e,n[0].shape)[0];var r=Ge(n.map(function(t){return t.shape}),e);if(0===_(r))return dn([],r);if(1===(n=n.filter(function(t){return t.size>0})).length)return n[0];var i=n.map(function(t){return t.shape});Xe(i,e);var o=n;return Nt.runKernel(function(t){return t.concat(n,e)},o,function(t){var n=i.map(function(t){return t[e]});return er(t,n,e).map(function(t){return function(){return t}})})}}),Jn=an({concat1d_:function(t){return $n(t,0)}}),Zn=an({concat2d_:function(t,e){return $n(t,e)}}),Qn=an({concat3d_:function(t,e){return $n(t,e)}}),tr=an({concat4d_:function(t,e){return $n(t,e)}}),er=an({split_:function(t,e,n){void 0===n&&(n=0);var r,i=rn(t,"x","split");return n=k(n,i.shape)[0],"number"==typeof e?(b(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(b(i.shape[n]===e.reduce(function(t,e){return t+e}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Nt.runKernel(function(t){return t.split(i,r,n)},{$x:i},function(t){return{$x:function(){return $n(t,n)}}})}});function nr(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r||"undefined"!=typeof self&&self;var rr=nr(function(t){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new r(t),o=e&&e.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+1.1102230246251565e-16*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.alea=o}(0,t)}),ir=nr(function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xor128=o}(0,t)}),or=nr(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xorwow=o}(0,t)}),sr=nr(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&(o.x&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xorshift7=o}(0,t)}),ar=nr(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,s,a=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=a[127&o]^=r+s)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;t.w=s,t.X=a,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&(o.X&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xor4096=o}(0,t)}),ur=nr(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.tychei=o}(0,t)}),cr=nr(function(t){!function(e,r){var i,o=this,s=256,a=6,u="random",c=r.pow(s,a),h=r.pow(2,52),l=2*h,f=s-1;function d(t,n,f){var d=[],y=v(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==o?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(s):(t=new Uint8Array(s),(o.crypto||o.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=o.navigator,r=n&&n.plugins;return[+new Date,o,r,o.screen,g(e)]}}():t,3),d),b=new p(d),x=function(){for(var t=b.g(a),e=c,n=0;t<h;)t=(t+n)*s,e*=s,n=b.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,v(g(b.S),e),(n.pass||f||function(t,e,n,i){return i&&(i.S&&m(i,b),t.state=function(){return m(b,{})}),n?(r[u]=t,e):t})(x,y,"global"in n?n.global:this==r,n.state)}function p(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<s;)a[i]=i++;for(i=0;i<s;i++)a[i]=a[o=f&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=f&i+1],n=n*s+a[f&(a[i]=a[o=f&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(s)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){for(var n,r=t+"",i=0;i<r.length;)e[f&i]=f&(n^=19*e[f&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(r["seed"+u]=d,v(r.random(),e),t.exports){t.exports=d;try{i=n(2101)}catch(t){}}}([],Math)});cr.alea=rr,cr.xor128=ir,cr.xorwow=or,cr.xorshift7=sr,cr.xor4096=ar,cr.tychei=ur;var hr=cr.alea,lr=function(){function t(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=hr(o.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var i=void 0,o=void 0,s=void 0;do{s=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o}while(s>=1||0===s);var a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*o*a,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),fr=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===r&&(r=Math.random());var i=this;if(this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=t,this.range=e-t,this.dtype=n,!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=hr(r.toString())}return t.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function dr(t,e,n){return void 0===e&&(e="float32"),e=e||"float32",tt(t),new ht(t,e,n)}var pr=an({batchToSpaceND_:function(t,e,n){var r=rn(t,"x","batchToSpaceND"),i=e.reduce(function(t,e){return t*e});return b(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),b(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),b(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),Nt.runKernel(function(t){return t.batchToSpaceND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}})}}),mr=an({cast_:function(t,e){var n=rn(t,"x","cast");if(!B(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Nt.runKernel(function(t){return t.cast(n,e)},{$x:n},function(t){return{$x:function(){return t.clone()}}})}}),vr=an({clone_:function(t){var e=rn(t,"x","clone",null);return Nt.runKernel(function(t){return pt.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),gr=an({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=rn(t,"x","cumsum"),o=Ue([e|=0],i.rank),s=i;null!=o&&(s=i.transpose(o));var a=We(1,i.rank)[0],u=Nt.runKernel(function(t){return t.cumsum(s,a,n,r)},{permutedX:s},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=o&&(u=u.transpose(o)),u}}),yr=an({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=rn(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],s="NHWC"===n?r.shape[3]:r.shape[1];return b(i*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+e+"  for depthToSpace with input shape\n      "+r.shape}),b(o*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+e+" for depthToSpace with input shape\n          "+r.shape}),b(s%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+s+" for depthToSpace with input shape "+r.shape}),Nt.runKernel(function(t){return t.depthToSpace(r,e,n)},{$x:r})}}),br=an({expandDims_:function(t,e){void 0===e&&(e=0);var n=rn(t,"x","expandDims");b(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(b(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),kr(n,r)}}),xr=an({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var i=dr([t,e],r),o=t<=e?t:e,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(t,e);if(null==n)return a;if(1===n.length)return Dr(br(a,0),[n[0],1,1]);if(2===n.length)return Dr(br(br(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return Dr(br(br(br(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),wr=an({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var i=rn(t,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);n=n||Math.random();var a=1===s?i.as2D(1,-1):i,u=Nt.runKernel(function(t){return t.multinomial(a,r,e,n)},{logits2D:a});return 1===s?u.as1D():u}}),Er=an({oneHot_:function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=rn(t,"indices","oneHot","int32"),o=i.shape.concat([e]);return i=i.flatten(),Nt.runKernel(function(t){return t.oneHot(i,e,n,r)},{$indices:i},function(t){return{$indices:function(){return xn(i.shape,"float32")}}}).reshape(o)}}),_r=an({pad_:function(t,e,n){void 0===n&&(n=0);var r=rn(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=e.map(function(t){return t[0]});return Nt.runKernel(function(t){return t.pad(r,e,n)},{$x:r},function(t){return{$x:function(){return t.slice(i,r.shape)}}})}}),Sr=an({pad1d_:function(t,e,n){return void 0===n&&(n=0),b(2===e.length,function(){return"Invalid number of paddings. Must be length of 2."}),_r(t,[e],n)}}),Tr=an({pad2d_:function(t,e,n){return void 0===n&&(n=0),b(2===e.length&&2===e[0].length&&2===e[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),_r(t,e,n)}}),Ar=an({pad3d_:function(t,e,n){return void 0===n&&(n=0),b(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),_r(t,e,n)}}),Mr=an({pad4d_:function(t,e,n){return void 0===n&&(n=0),b(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),_r(t,e,n)}}),Cr=an({rand_:function(t,e,n){var r=_(t),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=e();return pt.make(t,{values:i},n)}}),Or=an({randomNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new lr(e,n,r,!1,i),s=dr(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),Nr=an({randomUniform_:function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var o=dr(t,r),s=new fr(e,n,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),kr=an({reshape_:function(t,e){var n=rn(t,"x","reshape",null);return e=N(e,n.size),b(n.size===_(e),function(){return"new shape and old shape must have the same number of elements."}),Nt.runKernel(function(t){return t.reshape(n,e)},{$x:n},function(t){return{$x:function(){return t.reshape(n.shape)}}})}}),Rr=an({spaceToBatchND_:function(t,e,n){var r=rn(t,"x","spaceToBatchND");return b(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),b(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),b(r.shape.reduce(function(t,r,i){return i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),Nt.runKernel(function(t){return t.spaceToBatchND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}})}}),Pr=an({squeeze_:function(t,e){var n=rn(t,"x","squeeze");return kr(n,R(n.shape,e).newShape)}}),Ir=an({stack_:function(t,e){void 0===e&&(e=0);var n=on(t,"tensors","stack");if(b(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,o=n[0].dtype;b(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(t){x(i,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){b(o===t.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=n.map(function(t){return t.expandDims(e)});return $n(s,e)}}),Dr=an({tile_:function(t,e){var n=rn(t,"x","tile");return b(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}),Nt.runKernel(function(t,r){var i=t.tile(n,e);return r([n]),i},{$x:n},function(t,n){var r=n[0];return{$x:function(){var n=Sn(r);if(1===r.rank)for(var i=0;i<e[0];++i)n=n.add(t.slice([i*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(i=0;i<e[0];++i)for(var o=0;o<e[1];++o)n=n.add(t.slice([i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(i=0;i<e[0];++i)for(o=0;o<e[1];++o)for(var s=0;s<e[2];++s)n=n.add(t.slice([i*r.shape[0],o*r.shape[1],s*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<e[0];++i)for(o=0;o<e[1];++o)for(s=0;s<e[2];++s)for(var a=0;a<e[3];++a)n=n.add(t.slice([i*r.shape[0],o*r.shape[1],s*r.shape[2],a*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}})}}),Lr=an({truncatedNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new lr(e,n,r,!0,i),s=dr(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),Br=an({unstack_:function(t,e){void 0===e&&(e=0),e=e||0;var n=rn(t,"x","unstack");return b(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length),Nt.runKernel(function(t){return t.unstack(n,e)},{$x:n},function(t){return{$x:function(){return Ir(t,e)}}})}});function Fr(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=dr(t,"int32"),o=dr([n.length,t.length],"int32");for(r=0;r<n.length;r++){var s=i.indexToLoc(n[r]),a=r*t.length;o.values.set(s,a)}return o.toTensor()}var zr=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("float v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},jr=function(t,e){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("vec4 v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Ur=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,s=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];var a="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+a+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Yr(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(e){return t+"."+e})}function Wr(t,e){return 1===e?[t]:Yr(t,e)}function Xr(){var t,e,n,r,i,o,s,a,u,c;return 2===l.getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 0. || val == 0.) ? false : true;\n      }\n    ",u="\n      const float INFINITY = uintBitsToFloat(uint(0x7f800000));\n    ",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function Gr(t,e,n){void 0===n&&(n="index");var r=H(e);return r.map(function(e,i){return"int "+t[i]+" = "+n+" / "+e+"; "+(i===r.length-1?"int "+t[i+1]+" = "+n+" - "+t[i]+" * "+e:"index -= "+t[i]+" * "+e)+";"}).join("")}function Vr(t){return 1===t.length?""+t[0]:"vec"+t.length+"("+t.join(",")+")"}function qr(t){return"\n  int getFlatIndex(ivec3 coords) {\n    return round("+function(t,e){if(t.length!==e.length)throw new Error("Vectors to be dotted must be of the same length -got "+t.length+" and "+e.length);for(var n=[],r=Math.floor(t.length/4),i=t.length%4,o=0;o<r;o++){var s=t.slice(4*o,4*o+4),a=e.slice(4*o,4*o+4);n.push(Vr(s)+", "+Vr(a))}return 0!==i&&(s=t.slice(4*r),a=e.slice(4*r),1===s.length&&(s=s.map(function(t){return"float("+t+")"}),a=a.map(function(t){return"float("+t+")"})),n.push(Vr(s)+", "+Vr(a))),n.map(function(t,e){return"dot("+t+")"}).join("+")}(["coords.x","coords.y","coords.z"],H(t).map(function(t){return t.toString()}).concat(["1."]))+");\n  }\n"}function Hr(t,e,n,r){var i=[];t.forEach(function(t){var e=_(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?i.push("uniform float "+t.name+(e>1?"["+e+"]":"")+";"):(i.push("uniform sampler2D "+t.name+";"),i.push("uniform int offset"+t.name+";"))});var o,s,a=i.join("\n"),u=t.map(function(t){return function(t,e,n){void 0===n&&(n=!1);var r="";r+=n?function t(e){var n,r,i;switch(e.shapeInfo.logicalShape.length){case 0:return n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Xr(),"\n    vec4 "+r+"() {\n      return "+i.texture2D+"("+n+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=Xr();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+o.texture2D+"("+e+", uv);\n    }\n  "}(e);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],a=Xr();if(null!=i&&S(e,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+s+".0, "+o+".0);\n\n        return "+a.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(e[1]/2);return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+c+", "+u[0]+", "+u[1]+", row, col);\n      return "+a.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var a=n.slice(1),u=ni(e,a);return"\n        "+t(u)+"\n        vec4 "+i+"(int b, int row, int col) {\n          return "+i+"("+ri(["b","row","col"],[1,2])+");\n        }\n      "}var c=s[0],h=s[1],l=Math.ceil(n[2]/2),f=l*Math.ceil(n[1]/2),d=Xr();return"\n    vec4 "+i+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+c+", "+h+", "+f+", "+l+", b, row, col);\n      return "+d.texture2D+"("+r+", uv);\n    }\n  "}(e);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],a=s[0],u=s[1],c=Math.ceil(e[n-1]/2),h=c*Math.ceil(e[n-2]/2),l="int b, int row, int col",f="b * "+h+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)l="int b"+d+", "+l,h*=e[n-d-1],f="b"+d+" * "+h+" + "+f;var p=Xr();return"\n    vec4 "+i+"("+l+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+a+");\n      return "+p.texture2D+"("+r+", uv);\n    }\n  "}(e)}}(t):function t(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape,i=r[0],o=r[1];if(1===i&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var s=t.shapeInfo.texShape,a=s[0],u=s[1],c=Qr(e);return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a+", "+u+", "+c+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(e);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+ti(t)+"\n      }\n    ";var r=t.shapeInfo.texShape,i=r[0],o=r[1];if(1===o&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var s=Qr(e);return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+s+") + 0.5) / "+i+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+s+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+o+", index + "+s+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(e);case 2:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&S(n,o)){var s=o[0],a=o[1];return"\n    float "+i+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+s+".0);\n      return sampleTexture("+r+", uv);\n    }\n  "}var u=R(n),c=u.newShape,h=u.keptDims,l=c;if(l.length<n.length){var f=ni(e,l);return"\n      "+t(f)+"\n      float "+i+"(int row, int col) {\n        return "+i+"("+ri(["row","col"],h)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+n[1]+", 1)));\n        "+ti(e)+"\n      }\n    ";var d=o[0],p=o[1],m=Qr(r);return 1===p?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+m+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===d?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+m+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+p+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+i+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+n[1]+" + col + "+m+";\n    vec2 uv = uvFromFlat("+d+", "+p+", index);\n    return sampleTexture("+r+", uv);\n  }\n"}(e);case 3:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],s=n[2],a=R(n),u=a.newShape,c=a.keptDims,h=u;if(h.length<n.length){var l=ni(e,h);return"\n        "+t(l)+"\n        float "+i+"(int row, int col, int depth) {\n          return "+i+"("+ri(["row","col","depth"],c)+");\n        }\n      "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+s+", 1)));\n        "+ti(e)+"\n      }\n    ";var f=e.shapeInfo.texShape,d=f[0],p=f[1],m=e.shapeInfo.flatOffset;if(p===o&&null==m)return"\n        float "+i+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+s+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+p+".0, "+d+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ";if(p===s&&null==m)return"\n    float "+i+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+n[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+".0, "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ";var v=Qr(r);return"\n      float "+i+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+s+" + depth + "+v+";\n        vec2 uv = uvFromFlat("+d+", "+p+", index);\n        return sampleTexture("+r+", uv);\n      }\n  "}(e);case 4:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],s=n[2]*o,a=n[1]*s,u=R(n),c=u.newShape,h=u.keptDims;if(c.length<n.length){var l=ni(e,c);return"\n      "+t(l)+"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        return "+i+"("+ri(["row","col","depth","depth2"],h)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+a+", "+s+", "+o+", 1)));\n        "+ti(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],m=d[1];if(m===a&&null==f)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+s+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";if(m===o&&null==f)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+n[1]*n[2]+", "+n[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";var v=Qr(r);return"\n    float "+i+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+s+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+p+", "+m+", index + "+v+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 5:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[4],s=n[3]*o,a=n[2]*s,u=n[1]*a,c=R(n),h=c.newShape,l=c.keptDims;if(h.length<n.length){var f=ni(e,h);return"\n      "+t(f)+"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+i+"("+ri(["row","col","depth","depth2","depth3"],l)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+u+", "+a+", "+s+", "+o+")) +\n          depth3;\n        "+ti(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,m=p[0],v=p[1];if(v===u&&null==d)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+a+", "+s+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";if(v===o&&null==d)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]+",\n               "+n[2]*n[3]+", "+n[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";var g=Qr(r);return"\n    float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+a+" + depth * "+s+" +\n          depth2 * "+o+" + depth3 + "+g+";\n      vec2 uv = uvFromFlat("+m+", "+v+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);case 6:return function(e){var n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=R(n),s=o.newShape,a=o.keptDims;if(s.length<n.length){var u=ni(e,s);return"\n      "+t(u)+"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+i+"("+ri(["row","col","depth","depth2","depth3","depth4"],a)+");\n      }\n    "}var c=n[5],h=n[4]*c,l=n[3]*h,f=n[2]*l,d=n[1]*f;if(e.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+f+", "+l+", "+h+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+c+", 1)));\n        "+ti(e)+"\n      }\n    ";var p=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],g=m[1];if(g===d&&null==p)return"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+f+", "+l+", "+h+", "+c+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";if(g===c&&null==p)return"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]*n[4]+",\n               "+n[2]*n[3]*n[4]+",\n               "+n[3]*n[4]+",\n               "+n[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";var y=Qr(r);return"\n    float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+f+" + depth * "+l+" +\n          depth2 * "+h+" + depth3 * "+c+" + depth4 + "+y+";\n      vec2 uv = uvFromFlat("+v+", "+g+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(t);var i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(r+=n?function(t,e){var n,r=t.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,u=An(t.shapeInfo.logicalShape,e.logicalShape),c=ei(a),h=a-s,l=["x","y","z","w","u","v"];n=0===s?"":a<2&&u.length>=1?"coords = 0;":u.map(function(t){return"coords."+l[t+h]+" = 0;"}).join("\n");var f;f=a<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+l[e+h]}).join(", ");var d="return outputValue;",p=1===_(t.shapeInfo.logicalShape),m=1===_(e.logicalShape);if(1!==s||p||m){if(p&&!m)d=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=s-2,g=s-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?d="return vec4(outputValue.x);":u.indexOf(v)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+i+"("+f+");\n      "+d+"\n    }\n  "}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===u&&null==t.shapeInfo.flatOffset&&S(s,o))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c=ei(u),h=An(t.shapeInfo.logicalShape,e.logicalShape),l=u-a,f=["x","y","z","w","u","v"];return"\n    float "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===a?"":u<2&&h.length>=1?"coords = 0;":h.map(function(t){return"coords."+f[t+l]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(u<2&&a>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+f[e+l]}).join(", "))+");\n    }\n  "}(t,e)),r}(t,e,r)}).join("\n"),c=e.texShape,h=Xr(),l="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+h.texture2D+"(textureSampler, uv).r;\n    }\n  ",f=function(t){return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFs+" vec2 resultUV;\n    "+t.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    #define isnan(value) isnan_custom(value)\n    "+t.defineSpecialNaN+"\n    bvec4 isnan_custom(vec4 val) {\n      return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n    }\n\n    "+t.defineSpecialInf+"\n    "+t.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Kr+"\n    "+$r+"\n    "+Jr+"\n  "}(h);return e.isPacked?(o=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return resTexRC.x * "+n[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(S(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=t,r=e,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+s+";\n      index -= b * "+s+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2),o=i,s="",a="b, r, c",u=2;u<t.length-1;u++)s="\n      int b"+u+" = index / "+(o*=t[t.length-u-1])+";\n      index -= b"+u+" * "+o+";\n    "+s,a="b"+u+", "+a;return"\n    ivec"+t.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+s+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+t.length+"("+a+");\n    }\n  "}(t,e)}var n,r,i,o,s}(e.logicalShape,c),s="\n    void setOutput(vec4 val) {\n      "+h.output+" = val;\n    }\n  "):(o=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return S(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=e,r=Gr(["r","c","d"],t),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=Gr(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=Gr(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=Gr(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r}(e.logicalShape,c),s="\n    void setOutput(float val) {\n      "+h.output+" = vec4(val, 0, 0, 0);\n    }\n  "),r&&(f+=Zr),[f,l,s,a,o,u,n].join("\n")}var Kr="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$r="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Jr="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zr="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Qr(t){return"offset"+t}function ti(t){var e=t.name,n=_(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function ei(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function ni(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ri(t,e){return e.map(function(e){return t[e]}).join(", ")}var ii=function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,b(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,u=this.outputShape,c=u.length,h=ei(c),l=Wr("coords",c);if(1===o){var f=ei(a=c+1);s="\n        "+f+" sourceLocR = "+f+"("+l.join()+", 0);\n        ++"+l[c-1]+";\n        "+f+" sourceLocG = "+f+"("+l.join()+", 0);\n        ++"+l[c-2]+";\n        "+f+" sourceLocA = "+f+"("+l.join()+", 0);\n        --"+l[c-1]+";\n        "+f+" sourceLocB = "+f+"("+l.join()+", 0);\n        --"+l[c-2]+";"}else a=c,s="\n        "+h+" sourceLocR = coords;\n        ++"+l[c-1]+";\n        "+h+" sourceLocG = coords;\n        ++"+l[c-2]+";\n        "+h+" sourceLocA = coords;\n        --"+l[c-1]+";\n        "+h+" sourceLocB = coords;\n        --"+l[c-2]+";";var d=["x","y","z","w","u","v"].slice(0,a),p="."+d[a-1],m=d.map(function(t){return"int "+t}),v=Wr("sourceLocR",a-1).concat("inIdx.r"),g=Wr("sourceLocG",a-1).concat("inIdx.g"),y=Wr("sourceLocB",a-1).concat("inIdx.b"),x=Wr("sourceLocA",a-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",E=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+x.join()+")));",_="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+x.join()+") : 0.)",S=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+S+"\n      void main() {\n        "+h+" coords = getOutputCoords();\n        bool hasNextCol = "+l[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+l[c-2]+" < "+(u[c-2]-1)+";\n        "+s+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+_+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+E+"\n          vec4 candidate = "+_+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},oi=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,a=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=a-1-t.padInfo.top,h=u-1-t.padInfo.left,l=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+h+");\n      const float avgMultiplier = float("+l+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+s+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},si=function(t,e,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Cn(t,e),Cn(t,n);var s="0.0";null!=r&&(Cn(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";null!=i&&(Cn(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+a+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},ai=function(t,e,n,r,i,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],Cn(t,e),Cn(t,n);var s="vec4(0.0)";null!=r&&(Cn(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";null!=i&&(Cn(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+s+";\n        vec4 scale = "+a+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},ui=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Cn(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},ci="return a + b;",hi="return a - b;",li="return a * b;",fi=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Cn(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},di=function(t,e,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=Cn(e,n);var i=this.outputShape.length,o="";if(r)if(0===i||1===_(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+ei(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var s=Wr("coords",i);o+="\n            bool nextRowOutOfBounds =\n              ("+s[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+s[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},pi=function(){function t(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, min, max));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"min"),n.maxLoc=r.getUniformLocationNoThrow(i,"max")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),mi=function(){function t(t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(min), vec4(max)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"min"),n.maxLoc=r.getUniformLocationNoThrow(i,"max")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),vi=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},gi=function(t){this.outputShape=[],this.outputShape=Ge(t,1),this.variableNames=t.map(function(t,e){return"T"+e});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=e.length,s=e[e.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},yi=function(t,e){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Ge(t,e);var n=this.outputShape,r=n.length,i=ei(r),o=Wr("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(t,e){return"T"+e});var a=new Array(t.length-1);a[0]=t[0][e];for(var u=1;u<a.length;u++)a[u]=a[u-1]+t[u][e];var c=s[e],h="vec2("+s.slice(-2).join()+")",l=s.join(),f="if ("+c+" < "+a[0]+")\n          return getChannel(getT0("+l+"), "+h+");";for(u=1;u<a.length;u++){var d=a[u-1];f+="\n        else if ("+c+" < "+a[u]+") {\n          "+c+" -= "+d+";\n          return getChannel(getT"+u+"("+l+"), "+h+");\n        }"}var p=a.length;f+="\n        else {\n          "+c+" -= "+a[a.length-1]+";\n          return getChannel(getT"+p+"("+l+"), "+h+");\n        }",this.userCode="\n      float getValue("+s.map(function(t){return"int "+t})+") {\n        "+f+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n        if (++"+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n        if (++"+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            --"+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "},bi=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xi=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,s=n-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wi=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+e+" - "+i+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+s+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ei=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+a+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+s+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_i=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Si=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,s=n-1-t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+a+"; dm++) {\n              int d2 = d1 * "+a+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ti=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,a=t.filterHeight,u=t.filterWidth,c=4*Math.floor(t.inChannels/4),h=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+i+");\n      const ivec2 pads = ivec2("+e+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+"; wR++) {\n          int xR = xRCorner + wR * "+o+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+s+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+c+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===h)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+c+") *\n                getW(wR, wC, "+c+", d2);\n            } else if ("+(2===h)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===h)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1),\n                getX(batch, xR, xC, "+c+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2),\n                getW(wR, wC, "+c+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ai=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,h=t.filterDepth,l=t.filterHeight,f=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+h+"; wF++) {\n          int xF = xFCorner + wF * "+a+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+l+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Mi=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,a=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,l=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+l+";\n        int q = d2 - d1 * "+l+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+a+";\n\n          if (xR < 0 || xR >= "+e+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ci=function(t){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=t.outShape;for(var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,a=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,l=h,f="int xR; int xC; int xCOffset;",d=0;d<c;d++)for(var p=0;p<h;p++)f+="\n          vec4 xTexelR"+d+"C"+2*p+" = vec4(0.);\n          vec4 wR"+d+"C"+p+" = vec4(0.);\n          vec4 xR"+d+"C"+p+" = vec4(0.);";for(d=0;d<c;d++)for(var m=0;m<l;m++){if(f+="\n          xR = xRCorner + "+d*a+";\n          xC = xCCorner + "+(p=2*m)*u+";\n        ",1===s){if(p<h&&(f+=i%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+e+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+e+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+d+"C"+p+" = vec4(previous.zw, xTexelR"+d+"C"+p+".xy);\n                } else {\n                  xR"+d+"C"+p+" = vec4(0, 0, xTexelR"+d+"C"+p+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+e+" && xC >= 0 && xC < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = xTexelR"+d+"C"+p+";\n              ",p+1<h)){var v=i%2==0?g(u):u;u%2==0&&i%2==1||u%2!=0&&i%2!=1?(f+="\n                  xCOffset = xC + "+i%2+" + "+v+";\n\n                  if(xR >= 0 && xR < "+e+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",u>1&&(f+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+e+" &&\n                      xCOffset >= 0 && xCOffset < "+n+") {\n                      xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+d+"C"+p+" = vec4(0.);\n                    }\n                  "),f+="\n                  xR"+d+"C"+(p+1)+" = vec4(\n                    xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".xy);\n                "):f+="\n                  xCOffset = xC + "+v+";\n\n                  if(xR >= 0 && xR < "+e+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+d+"C"+(p+1)+" = xTexelR"+d+"C"+(p+2)+";\n                "}}else p<h&&(f+="\n              if(xR >= 0 && xR < "+e+") {\n            ",i%2==1?(f+="\n                xCOffset = xC + 1 - "+s+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+n+") {\n                  xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+d+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = vec4(\n                  xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".zw);\n              ",p+1<h&&(f+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+s+";\n                  if(xCOffset >= 0 && xCOffset < "+n+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+d+"C"+(p+1)+" = vec4(xTexelR"+d+"C"+(p+2)+".xy, final.xy);\n                ")):(f+="\n                if(xC >= 0 && xC < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+s+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = vec4(\n                  xTexelR"+d+"C"+p+".xy, xTexelR"+d+"C"+(p+2)+".xy);\n              ",p+1<h&&(f+="\n                  xR"+d+"C"+(p+1)+" = vec4(\n                    xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".zw);\n                ")),f+="}");p<h&&(f+="\n            vec4 wTexelR"+d+"C"+p+" = getW("+d+", "+p+", d1, q);\n            wR"+d+"C"+p+" = vec4(wTexelR"+d+"C"+p+".xz, wTexelR"+d+"C"+p+".xz);\n          ",p+1<h&&(f+="\n              vec4 wTexelR"+d+"C"+(p+1)+" = getW("+d+", "+(p+1)+", d1, q);\n              wR"+d+"C"+(p+1)+" =\n                vec4(wTexelR"+d+"C"+(p+1)+".xz, wTexelR"+d+"C"+(p+1)+".xz);"))}for(d=0;d<c;d++)for(p=0;p<h;p++)f+="result += xR"+d+"C"+p+" * wR"+d+"C"+p+";";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 result = vec4(0.);\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},Oi=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],s=t[1],a=t[2],u=t[3],c=e[0],h=n[0],l=n[1];this.outputShape=[c,h,l,u];var f="bilinear"===r?1:0,d=[s-1+".0",a-1+".0"],p=d[0],m=d[1],v=h>1?[""+(s-1)/(h-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],x=l>1?[""+(a-1)/(l-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],E=x[1],_=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+E+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Ni=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+ei(r)+" coords = getOutputCoords();\n        int end = "+ki(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+ki(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===r)return""+e;if(2===r)return e+".x, "+e+".y";if(3===r)return e+".x, "+e+".y, "+e+".z";if(4===r)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+r+" is not yet supported")}(0,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function ki(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var Ri,Pi,Ii=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Di=function(t){this.variableNames=["A"];var e=Xr();this.outputShape=t,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isnan(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "},Li=function(t,e){this.variableNames=["A"];var n=Xr(),r=e[0],i=e[1];this.outputShape=t,this.userCode="\n      "+qr(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex /= 4;\n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+r+".0);\n        vec4 values = "+n.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+n.output+" = vec4(result, 0., 0., 0.);\n      }\n    "},Bi=function(t,e){this.variableNames=["A"];var n=Xr(),r=e[0],i=e[1];this.outputShape=t;for(var o="",s=0;s<=1;s++)for(var a=0;a<=1;a++){var u=2*s+a;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+a+" < "+t[2]+") {\n            localCoords[2] += "+a+";\n            if(localCoords[1] + "+s+" < "+t[1]+") {\n              localCoords[1] += "+s+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex /= 4;\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+r+".0);\n              values = "+n.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+u+"] = values[0];\n              } else if(offset == 1) {\n                result["+u+"] = values[1];\n              } else if(offset == 2) {\n                result["+u+"] = values[2];\n              } else {\n                result["+u+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+qr(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+o+"\n\n        "+n.output+" = result;\n      }\n    "},Fi=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},zi=function(){function t(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}},t}(),ji=function(t){this.variableNames=["A"];var e=Xr(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Ui=function(t){this.variableNames=["A"];var e=Xr(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "},Yi=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=ei(this.rank),o=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=0;o<t.length;o++)o===e?i.push("int(getIndices("+r[o]+"))"):i.push(""+r[o]);return i.join()}(t,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},Wi=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=ei(e.length),i=ei(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Xi(t,e){return[e,t]}function Gi(t,e){return t*e}function Vi(t,e,n){var r=function(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var i=0,o=0;o<t.length;o+=n)e[i++]=t[o]}function qi(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Hi(t,e){var n=qi(t,e);return n[0]*n[1]*4}function Ki(t,e,n,r,i){var o=n*r;if(i.length<o)throw new Error("matrix length ("+i.length+") must be >= "+o);for(var s=r%2==1,a=n%2==1,u=Math.floor(r/2),c=Math.floor(n/2),h=Math.ceil(r/2),l=h*Math.ceil(n/2),f=g(n)*g(r),d=0;d<e;d++){for(var p=d*n*r,m=d*f,v=s?4:0,y=r+(s?1:0),b=m,x=p,w=p+r,E=0;E<c;++E){for(var _=0;_<u;++_)i[x++]=t[b++],i[x++]=t[b++],i[w++]=t[b++],i[w++]=t[b++];b+=v,x+=y,w+=y}if(s){b=m+4*(h-1);var S=p+r-1;for(v=4*h,y=2*r,E=0;E<c;++E)i[S]=t[b],i[S+r]=t[b+2],b+=v,S+=y}if(a){for(b=m+4*(l-h),S=p+(n-1)*r,_=0;_<u;++_)i[S++]=t[b++],i[S++]=t[b++],b+=2;s&&(i[p+n*r-1]=t[b])}}return i}function $i(t,e){var n=Xr();return Yt(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Ji(t,e){return $t(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Zi(t,e){return Jt(t,e,new Uint16Array([0,1,2,2,1,3]))}function Qi(t,e){var n,r,i,o,s,a,u,c,h=t;return 2===l.getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,i=h.RGBA16F,o=h.RGBA32F,s=h.RED,a=4,u=1,c=h.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,o=h.RGBA,s=t.RGBA,a=4,u=4,c=null!=e?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:c}}function to(t,e,n,r,i,o,s){Qt(n,r);var a=Zt(t,e),u=t.TEXTURE_2D;return Lt(t,e,function(){return t.bindTexture(u,a)}),Lt(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Lt(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Lt(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Lt(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Lt(t,e,function(){return t.texImage2D(u,0,i,n,r,0,o,s,null)}),Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function eo(t,e,n,r,i){var o=Xi(n,r);return to(t,e,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function no(t,e,n,r,i){var o=Xi(n,r);return to(t,e,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function ro(t,e,n,r,i){var o=Xi(n,r);return to(t,e,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function io(t,e,n,r,i){var o=qi(n,r);return to(t,e,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function oo(t,e,n,r,i){var o=qi(n,r);return to(t,e,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function so(t,e,n,r){return Lt(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ee(t,e,n,"clipSpacePos",r,3,20,0)&&ee(t,e,n,"uv",r,2,20,12)}function ao(t,e,n,r,i,o,s){Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)});var a=new Float32Array(r*i*4);a.set(o),Lt(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,s.internalFormatPackedFloat,r,i,0,t.RGBA,t.FLOAT,a)}),Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function uo(t,e,n,r){Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Lt(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Lt(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Lt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function co(t,e,n,r,i){var o=t.createBuffer();Lt(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var s=4*Gi(n*r,i.downloadUnpackNumChannels);return Lt(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)}),Lt(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),Lt(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function ho(t,e,n,r,i){var o=t,s=new Float32Array(Gi(n*r,i.downloadUnpackNumChannels));o.bindBuffer(o.PIXEL_PACK_BUFFER,e),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,s),o.bindBuffer(o.PIXEL_PACK_BUFFER,null);var a=new Float32Array(n*r);return Vi(s,a,i.downloadUnpackNumChannels),a}function lo(t,e,n,r,i){var o=Xi(n,r),s=o[0],a=o[1],u=new Float32Array(Gi(n*r,i.downloadUnpackNumChannels));Lt(t,e,function(){return t.readPixels(0,0,s,a,i.downloadTextureFormat,t.FLOAT,u)});var c=new Float32Array(n*r);return Vi(u,c,i.downloadUnpackNumChannels),c}function fo(t,e,n,r,i){var o=Xi(n,r),s=o[0],a=o[1],u=new Uint8Array(Gi(n*r,4));return Lt(t,e,function(){return t.readPixels(0,0,s,a,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function po(t,e,n,r,i,o,s,a){var u=t,c=new Float32Array(Hi(o,s));u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null);var h=new Float32Array(_([n,r,i]));return Ki(c,n,r,i,h),h}function mo(t,e,n,r,i,o,s,a){var u=qi(o,s),c=u[0],h=u[1],l=new Float32Array(Hi(o,s));Lt(t,e,function(){return t.readPixels(0,0,c,h,t.RGBA,t.FLOAT,l)});var f=new Float32Array(_([n,r,i]));return Ki(l,n,r,i,f)}!function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Ri||(Ri={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Pi||(Pi={}));var vo=Object.freeze({createVertexShader:$i,createVertexBuffer:Ji,createIndexBuffer:Zi,getTextureConfig:Qi,createFloat32MatrixTexture:eo,createFloat16MatrixTexture:no,createUnsignedBytesMatrixTexture:ro,createPackedMatrixTexture:io,createFloat16PackedMatrixTexture:oo,bindVertexProgramAttributeStreams:so,uploadDenseMatrixToTexture:ao,uploadPixelDataToTexture:uo,createBufferFromOutputTexture:co,downloadFloat32MatrixFromBuffer:ho,downloadFloat32MatrixFromOutputTexture:lo,downloadByteEncodedFloatMatrixFromOutputTexture:fo,downloadPackedMatrixFromBuffer:po,downloadMatrixFromPackedOutputTexture:mo}),go=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=l.getNumber("WEBGL_VERSION");null!=t?(this.gl=t,It(e,t)):this.gl=Dt(e),1===l.getNumber("WEBGL_VERSION")?(this.textureFloatExtension=Ut(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),l.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Ut(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Ut(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=Ji(this.gl,this.debug),this.indexBuffer=Zi(this.gl,this.debug),this.framebuffer=te(this.gl,this.debug),this.textureConfig=Qi(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return l.getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Lt(e,this.debug,function(){return e.finish()}),Lt(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Lt(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),Lt(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Lt(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Lt(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),eo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),no(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),ro(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),uo(this.gl,this.debug,t,e)},t.prototype.uploadDenseMatrixToTexture=function(t,e,n,r){this.throwIfDisposed(),ao(this.gl,this.debug,t,e,n,r,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),oo(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),io(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(ae(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Lt(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},t.prototype.downloadFloat32MatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return lo(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return fo(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,i,o){return po(this.gl,t,e,n,r,i,o,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e,n){return ho(this.gl,t,e,n,this.textureConfig)},t.prototype.createBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=co(this.gl,this.debug,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(l.getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=i.clientWaitSync(o,0,0);return t===i.ALREADY_SIGNALED||t===i.CONDITION_SATISFIED},e=o}else l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n,r,i,o){var s=this;return this.downloadMatrixDriver(t,function(){return mo(s.gl,s.debug,e,n,r,i,o,s.textureConfig)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=Wt(e,this.debug,t),r=$i(e,this.debug),i=qt(e,this.debug);return Lt(e,this.debug,function(){return e.attachShader(i,r)}),Lt(e,this.debug,function(){return e.attachShader(i,n)}),Ht(e,this.debug,i),this.debug&&Kt(e,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=so(e,this.debug,this.program,this.vertexBuffer)),i},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&Lt(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&Kt(this.gl,this.debug,this.program),Lt(this.gl,this.debug,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?re(this.gl,this.debug,t,e):ie(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),Lt(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),oe(this.gl,this.debug,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=qi(e,n),i=r[0],o=r[1];this.setOutputMatrixTextureDriver(t,i,o)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&Kt(this.gl,this.debug,this.program),ue(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Lt(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Lt(this.gl,this.debug,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Ut(this.gl,this.debug,2===l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},t.prototype.endQuery=function(){if(2!==l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return c(this,void 0,void 0,function(){var e=this;return h(this,function(n){switch(n.label){case 0:return[4,O(function(){return e.disposed||e.isQueryAvailable(t,l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise(function(n){e.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e<t.length;++e){if(!t[e]())break}return e-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||O(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),se(this.gl,this.debug,t,this.framebuffer),this.debug&&ue(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(se(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ue(this.gl)):ae(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;se(r,this.debug,t,this.framebuffer),this.debug&&ue(r),this.outputTexture=t,Lt(r,this.debug,function(){return r.viewport(0,0,e,n)}),Lt(r,this.debug,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var i=this;this.throwIfDisposed(),Lt(this.gl,this.debug,function(){return i.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function yo(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,i=e[n],o=i.shape;if(!S(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match");if(!t.isUniform||!i.isUniform){var s=t.texShape,a=i.isUniform?null:i.texData.texShape;if(!S(s,a))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+a+" must match")}})}var bo=function(t,e,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,s=n.strideHeight,a=n.padInfo,u=n.outWidth,c=n.dilationWidth,h=n.dilationHeight,l=a.left,f=a.top,d=i*r,p=Xr();this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            int blockIndex = rc.y + col;\n            int pos = rc.x + row;\n\n            if(blockIndex >= "+t[1]+" || pos >= "+t[0]+") continue;\n\n            int offsetY = int(blockIndex / ("+u+")) * "+s+" - "+f+";\n            int d0 = offsetY + "+h+" * (pos / "+d+");\n\n            if(d0 >= "+e[0]+" || d0 < 0) continue;\n\n            int offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+l+".);\n            int d1 = offsetX + "+c+" * (int(mod(float(pos), "+d+".) / "+i+".));\n\n            if(d1 >= "+e[1]+" || d1 < 0) continue;\n\n            vec2 innerDims = vec2(d1, int(mod(float(pos), "+i+".)));\n            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),\n                                              int(innerDims.y)), innerDims);\n          }\n        }\n\n        "+p.output+" = result;\n      }\n    "},xo=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var o,s=e,a=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+s+"; j <= "+s+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},wo=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Eo=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0;var o,s=e,a=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+s+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+s+"; j <= "+s+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+a+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},_o=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,a=o-1-t.padInfo.left,u=i*o-1;this.userCode="\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+e+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},So=function(t,e,n,r,i,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=e;var s=n?t[1]:t[2],a=Math.ceil(s/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",h=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],l=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",d="";o&&(f="vec4 activation(vec4 x) {\n        "+o+"\n      }",d="result = activation(result);");var p=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+a+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+a+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          result += ("+h[0]+" * "+l[0]+") + ("+h[1]+" * "+l[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+d+"\n\n        setOutput(result);\n      }\n    "},To=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),Ao=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Mo=function(t){this.variableNames=["A"],this.isPackShader=!0,this.outputShape=t;var e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Wr("rc",e),r=ei(e),i=function(t,e,n){if(1===t)return"rc > "+e[0];for(var r="",i=t-2;i<t;i++)r+=n[i]+" >= "+e[i],i<t-1&&(r+="||");return r}(e,t,n),o=function(t,e,n,r){if(1===t)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+e+";\n    bool rEdge = rp1 >= "+n+";\n  "}(e,t[t.length-1],t[t.length-2],n),s=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var o=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),s=2;s<t;s++)o=e[e.length-1-s]+","+o;n.push(o)}return n}(n,e);return 1===n?"getA(rc),\n            rc + 1 >= "+t[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+s+"));\n          }\n        }\n      "}},Co=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,i=ei(r),o=e.map(function(t){return t[0]}).join(","),s=e.map(function(e,n){return e[0]+t[n]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+a+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Oo=function(t,e,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});for(var r=t.length,i=ei(r),o=e.map(function(t){return t[0]}).join(","),s=e.map(function(e,n){return e[0]+t[n]}).join(","),a=Wr("rc",r),u=Wr("source",r),c=a[r-1]+" < "+this.outputShape[r-1],h=1===r?"source":"vec2("+u.slice(-2).join()+")",l=[i+" rc = outputLoc;",a[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+a[r-2]+" += 1;\n       if("+a[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+a[r-1]+" += 1;\n         if("+c+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,m=1===r?2:4;p<m;p++)d+="\n        "+l[p]+"\n        if ("+f+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+h+");\n        }\n      ";d+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},No=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,h=t.padInfo.top,l=t.padInfo.left;this.outputShape=t.outShape;var f="avg"===e,d="0.0";if(f||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+h+", "+l+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(p="avgValue / count");var m=4*Math.floor(r/4),v=r%4,g="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+h+", "+l+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+s+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+a+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              getValue(batch, xR, xC + 3 * "+a+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},ko=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];var s="0.0",a="";"prod"===e?s="1.0":"min"===e?(s="1.0 / 1e-20",a="min"):"max"===e&&(s="-1.0 / 1e-20",a="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var c=4*Math.floor(n/4),h=n%4,l="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===e)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+a+"(values, minMaxValue);\n      }\n    ",f="vec4";"all"===e?(s="1.0",l="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===e&&(s="0.0",l="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var d="";i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===h)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+l+"\n        } else if ("+(2===h)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+l+"\n        } else if ("+(3===h)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+l+"\n        }\n        setOutput("+u+");\n      }\n    "},Ro=function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Gr(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+qr(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Po=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],s=t.shape,a=s[1],u=s[2],c=[n&&a>1?i-1:i,n&&u>1?o-1:o],h=[n&&a>1?a-1:a,n&&u>1?u-1:u],l=c[0]/h[0],f=c[1]/h[1],d=1/l,p=1/f,m=2*Math.ceil(d)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+l+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Io=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],s=t[2],a=t[3];this.outputShape=[i,e,n,a];var u=[r&&e>1?o-1:o,r&&n>1?s-1:s],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Do=function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var i=t[0],o=t[1],s=t[2],a=t[3];this.outputShape=[i,e,n,a];var u=[r&&e>1?o-1:o,r&&n>1?s-1:s],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+s+".0,\n                                     "+s+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(a-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Lo=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],s=t.shape,a=s[1],u=s[2],c=[n&&a>1?i-1:i,n&&u>1?o-1:o],h=[n&&a>1?a-1:a,n&&u>1?u-1:u],l=c[0]/h[0],f=c[1]/h[1],d=1/l,p=1/f,m=2*Math.ceil(d)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+l+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+h[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+h[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Bo=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],s=t[2],a=t[3];this.outputShape=[i,e,n,a];var u=[r&&e>1?o-1:o,r&&n>1?s-1:s],c=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+h+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Fo=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=ei(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},zo=function(t,e){this.variableNames=["x"],this.usesPackedTextures=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Wr("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],s=ei(n);function a(n){var r=t.map(function(r,i){return function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+s+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+a(r.slice())+";\n          if("+i+"){\n            result.g = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",a(t)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(t){return t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},jo=function(t,e,n,r,i,o,s){void 0===s&&(s=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=ei(i.length),u=ei(o.length),c="";1===n?c="i":2===n&&(c="i, j");var h="getIndices("+c+")",l="";1===r?l="i":2===r&&(l="i, coords[1]");var f="getUpdates("+l+")",d=e>1?"strides[j]":"strides";this.userCode="\n        "+a+" strides = "+a+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round("+h+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Uo=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/n);this.outputShape=[r,s];var a=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",h="";i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var l="";i%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+l+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+a+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+a+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Yo=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],u=0;u<e.length;u++)a.push(""+o[u]),u<t&&s.push(""+o[u]);r=s.join(),i=a.join()}var c=ei(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Wo=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,n=ei(this.rank),r="uniform int start["+this.rank+"];",i=function(t){if(1===t)return"sourceLoc";if(t<=6)return Xo.slice(0,t).map(function(t){return"sourceLoc."+t}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);e="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+t.map(function(t,e){return"sourceLoc."+Xo[e]+" = start["+e+"] + coords."+Xo[e]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+i+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),Xo=["x","y","z","w","u","v"],Go=function(){function t(t){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=t,this.rank=t.length;var e=ei(this.rank),n=Wr("coords",this.rank),r=Wr("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+i+")",s="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",a=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map(function(t,e){return"start["+e+"]"}).join()+");":t.map(function(t,e){return r[e]+" = "+n[e]+" + start["+e+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+u+" \n        vec4 result = vec4(0.);\n        "+s+"\n        "+a+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),Vo=function(t,e,n,r){this.variableNames=["x"];var i=n.filter(function(t,e){return-1===r.indexOf(e)});this.outputShape=i;var o=n.length,s=ei(n.length),a=ei(i.length),u="";if(1===o)u="coords * strides + begin";else{var c=0;u=n.map(function(t,e){return-1===r.indexOf(e)?(c++,1===i.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(c-1)+"] * strides["+e+"] + begin["+e+"]"):"begin["+e+"]"}).join(",")}this.userCode="\n      "+s+" begin = "+s+"("+t+");\n      "+s+" strides = "+s+"("+e+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "},qo=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,i=Ho(e,n),o=Ko(t,i,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),i===Pi.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Pi.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Pi.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Pi.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Pi.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var i=Ko(e,Ho(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],s=o.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Ho(t,e){if(t===Ri.UPLOAD)return Pi.PACKED_2X2_FLOAT32;if(t===Ri.RENDER||null==t)return e?l.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?Pi.PACKED_2X2_FLOAT32:Pi.PACKED_2X2_FLOAT16:l.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?Pi.UNPACKED_FLOAT32:Pi.UNPACKED_FLOAT16;if(t===Ri.DOWNLOAD||t===Ri.PIXELS)return Pi.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Ko(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var $o=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=ei(this.rank),o=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<t.length;i++)r.push("imod("+n[i]+", "+t[i]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},Jo=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=ei(this.rank),o=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},Zo=function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=ei(this.rank),o=Yr("rc",this.rank),s=new Array(this.rank);for(r=0;r<e.length;r++)s[e[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+s.join()+"), "+a+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }  \n      setOutput(result);\n    }\n    "},Qo=1.7580993408473768,ts=1.0507009873554805,es=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ns="if (isnan(x)) return x;",rs=ns+"\n  return (x < 0.0) ? 0.0 : x;\n",is="return exp(x);",os="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ss=function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},as=function(t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var e=t.length,n=Wr("rc",e),r=ei(e),i=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),o=n.slice(-2),s=e<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+s+"));\n      }\n    "},us={},cs=600,hs=function(){function t(t){if(this.gpgpu=t,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!l.getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var e=Dt(l.getNumber("WEBGL_VERSION"));this.binaryCache=(n=l.getNumber("WEBGL_VERSION"))in us?us[n]:(us[n]={},us[n]),this.gpgpu=new go(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;var n;this.textureManager=new qo(this.gpgpu),this.numMBBeforeWarning=null==l.global.screen?1024:l.global.screen.height*l.global.screen.width*window.devicePixelRatio*cs/1024/1024,this.texData=new Tn(this,Nt)}return t.prototype.register=function(t,e,n){if(this.texData.has(t))throw new Error("Data buffer is already registered");this.texData.set(t,{shape:e,dtype:n})},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=[t.height,t.width],r=[t.height,t.width,e];if(l.getBool("IS_BROWSER")){if(!(t instanceof HTMLVideoElement||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData||t.data instanceof Uint8Array))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);if(t instanceof HTMLVideoElement){if(null==this.fromPixels2DContext){if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=t.width,this.fromPixels2DContext.canvas.height=t.height,this.fromPixels2DContext.drawImage(t,0,0,t.width,t.height),t=this.fromPixels2DContext.canvas}}var i,o,s=this.makeTensorHandle(n,"int32");if(this.texData.get(s.dataId).usage=Ri.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(s.dataId),t),l.getBool("WEBGL_PACK")){i=new Ui(r);var a=this.makePackedTensor(i.outputShape,s.dtype);o=this.compileAndRun(i,[s],a)}else i=new ji(r),o=this.compileAndRun(i,[s]);return this.disposeData(s.dataId),o},t.prototype.makeTensorHandle=function(t,e){var n={};return this.register(n,t,e),{dataId:n,shape:t,dtype:e}},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");if(l.getBool("DEBUG"))for(var n=0;n<e.length;n++){var r=e[n];if(!zt(r))throw Error("The value "+r+" cannot be represented on this device.")}var i=this.texData.get(t);if("complex64"===i.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.releaseGPUData(t),i.usage=Ri.UPLOAD,i.values=e},t.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,i=e.complexTensors,o=e.slice,s=e.shape;if(null!=o){var a=new es(s,"return x;"),u=this.compileAndRun(a,[{dataId:t,shape:s,dtype:r}]),c=this.readSync(u.dataId);return u.dispose(),c}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var h,l,f=null!=this.activeTimers;return f&&(h=performance.now()),l="complex64"===r?Yn(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(t),f&&(this.downloadWaitMs+=performance.now()-h),this.convertAndCacheOnCPU(t,l)},t.prototype.read=function(t){return c(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,f,d,p,m,v,g,y,b,x,w,E,S,T,A,M,C,O,N,k;return h(this,function(h){switch(h.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(t){return r.push(t)})];if(i=this.texData.get(t),o=i.texture,s=i.values,a=i.texShape,u=i.isPacked,c=i.shape,f=i.slice,d=i.dtype,p=i.complexTensors,null!=f)return m=new es(c,"return x;"),v=this.compileAndRun(m,[{dataId:t,shape:c,dtype:d}]),g=this.read(v.dataId),v.dispose(),[2,g];if(null!=s)return[2,this.convertAndCacheOnCPU(t)];if(this.pendingRead.set(t,[]),!l.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===l.getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,"complex64"===d?[3,2]:(b=a[1],x=a[0],u&&(e=qi(a[0],a[1]),b=e[0],x=e[1]),l.get("WEBGL_BUFFER_SUPPORTED")&&(y=this.gpgpu.createBufferFromTexture(o,x,b)),[4,this.gpgpu.createAndWaitForFence()]);case 1:h.sent(),h.label=2;case 2:return"complex64"!==d?[3,4]:[4,Promise.all([p.real.data(),p.imag.data()])];case 3:return E=h.sent(),S=E[0],T=E[1],w=Yn(S,T),[3,5];case 4:null==y?w=this.getValuesFromTexture(t):(A=_(c),u?(M=fe(c),C=1,O=1,c.length&&(n=de(c),C=n[0],O=n[1]),w=this.gpgpu.downloadPackedMatrixFromBuffer(y,M,C,O,a[0],a[1]).subarray(0,A)):w=this.gpgpu.downloadFloat32MatrixFromBuffer(y,a[0],a[1]).subarray(0,A)),h.label=5;case 5:return N=this.convertAndCacheOnCPU(t,w),k=this.pendingRead.get(t),this.pendingRead.delete(t),k.forEach(function(t){return t(N)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)),[2,N]}})})},t.prototype.getValuesFromTexture=function(t){var e,n=this,r=this.texData.get(t),i=r.shape,o=r.dtype,s=r.texture,a=r.texShape,u=_(i);if(l.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){if(this.texData.get(t).isPacked){var c=fe(i),h=1,f=1;return i.length&&(h=(e=de(i))[0],f=e[1]),this.gpgpu.downloadMatrixFromPackedTexture(s,c,h,f,a[0],a[1]).subarray(0,u)}return this.gpgpu.downloadFloat32MatrixFromOutputTexture(s,a[0],a[1]).subarray(0,u)}var d=this.makeTensorHandle(i,"float32");d.size=_(i),this.texData.get(d.dataId).usage=Ri.DOWNLOAD;var p=Ce(function(){var e=new Di(i);return n.compileAndRun(e,[{shape:i,dtype:o,dataId:t}],d,null)}),m=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,u);return this.disposeData(d.dataId),v},t.prototype.time=function(t){return c(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return h(this,function(u){switch(u.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),i=E(this.activeTimers.map(function(t){return t.query})).filter(function(t){return null!=t}),o=E(this.activeTimers.map(function(t){return t.name})).filter(function(t){return null!=t}),this.activeTimers=e,r&&(this.programTimersStack=null),[4,Promise.all(i)];case 1:return s=u.sent(),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:y(s),getExtraProfileInfo:function(){return s.map(function(t,e){return{name:o[e],ms:t}}).map(function(t){return t.name+": "+t.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),t):(t.endMs=performance.now(),t)},t.prototype.getQueryTime=function(t){return c(this,void 0,void 0,function(){var e;return h(this,function(n){return l.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t))if(this.pendingRead.has(t))this.pendingDisposal.add(t);else if(this.texData.has(t)){this.releaseGPUData(t);var e=this.texData.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}},t.prototype.releaseGPUData=function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,i=e.texShape,o=e.usage,s=e.isPacked,a=e.slice,u=a&&a.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,o,s)));var h=this.texData.get(t);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},t.prototype.getCPUBackend=function(){return l.getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Nt.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&&(e=128),null!=this.getCPUBackend()&&t.every(function(t){return null==n.texData.get(t.dataId).texture&&t.size<e})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.complex=function(t,e){var n=this.makeOutputArray(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Nt.keep(t.clone()),imag:Nt.keep(e.clone())},n},t.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},t.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},t.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===_(n))return dn([],n,t.dtype);var r=this.texData.get(t.dataId).isPacked,i=Qe(t.shape,e,n);if(r||!i){var o=l.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Go(n):new Wo(n),s=o.getCustomSetupFunc(e);return this.compileAndRun(o,[t],null,s)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)},t.prototype.shallowSlice=function(t,e,n){var r=this.texData.get(t.dataId),i=pt.make(n,{},t.dtype,this),o=this.texData.get(i.dataId);Object.assign(o,r),o.shape=n,o.dtype=t.dtype;var s=tn(e,t.strides);r.slice&&(s+=r.slice.flatOffset),o.slice={flatOffset:s,origDataId:r.slice&&r.slice.origDataId||t.dataId};var a=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,a+1),i},t.prototype.stridedSlice=function(t,e,n,r,i,o,s,a,u){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r,i,o,s,a,u);var c=$e(t.shape,e,n,r,i,o,s,a,u),h=c[0],l=c[1],f=c[2],d=l.filter(function(t,e){return-1===f.indexOf(e)});if(d.some(function(t){return 0===t}))return dn([],d);var p=new Vo(h,r,l,f);return this.compileAndRun(p,[t])},t.prototype.reverse=function(t,e){var n=l.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zo(t.shape,e):new Fo(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.concat=function(t,e){if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>l.getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(t.length/2),r=this.concat(t.slice(0,n),e),i=this.concat(t.slice(n),e);return this.concat([r,i],e)}if(l.getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var o=new yi(t.map(function(t){return t.shape}),e);return this.compileAndRun(o,t)}var s=Ge(t.map(function(t){return t.shape}),e),a=t.map(function(t){return t.as2D(-1,_(t.shape.slice(e)))}),u=new gi(a.map(function(t){return t.shape}));return this.compileAndRun(u,a).reshape(s)},t.prototype.neg=function(t){var e=new es(t.shape,"return -x;");return this.compileAndRun(e,[t])},t.prototype.batchMatMul=function(t,e,n,r){var i=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],s=n?t.shape[1]:t.shape[2],a=t.shape[0];if((1===i||1===o)&&s>1e3){n&&(t=t.transpose([0,2,1])),r&&(e=e.transpose([0,2,1]));var u=1===o?t:t.as3D(a,s,1),c=1===o?2:1,h=1===o?e.as3D(a,1,s):e;return this.multiply(u,h).sum(c,!0)}var l=Et(t.dtype,e.dtype),f=new So(t.shape,[a,i,o],n,r),d=this.makePackedTensor(f.outputShape,l);return this.compileAndRun(f,[t,e],d)},t.prototype.fusedBatchMatMul=function(t,e,n,r,i,o){var s=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],u=t.shape[0],c=Et(t.dtype,e.dtype),h=new So(t.shape,[u,s,a],n,r,!!i,o?function(t,e){if(void 0===e&&(e=!1),"linear"===o)return"return x;";if("relu"===o)return e?os:rs;throw new Error("Activation "+o+" has not been implemented for the WebGL backend.")}(0,!0):null),l=this.makePackedTensor(h.outputShape,c),f=[t,e];return i&&f.push(i),this.compileAndRun(h,f,l)},t.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new ui("return areal * breal - aimag * bimag;",t.shape,e.shape),o=new ui("return areal * bimag + aimag * breal;",t.shape,e.shape),s=[this.makeComplexComponentTensorHandle(t,n.complexTensors.real),this.makeComplexComponentTensorHandle(t,n.complexTensors.imag),this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag)],a=this.compileAndRun(i,s),u=this.compileAndRun(o,s),c=this.complex(a,u);return a.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,li,t.dtype);var h=new fi(li,t.shape,e.shape),f=this.makeOutputArray(h.outputShape,t.dtype);return this.compileAndRun(h,[t,e],f)},t.prototype.batchNormalization=function(t,e,n,r,i,o){var s=[t,e,n],a=null;null!=o&&(a=o.shape,s.push(o));var u=null;if(null!=i&&(u=i.shape,s.push(i)),l.getBool("WEBGL_PACK_NORMALIZATION")){var c=new ai(t.shape,e.shape,n.shape,a,u,r);return this.compileAndRun(c,s)}var h=new si(t.shape,e.shape,n.shape,a,u,r);return this.compileAndRun(h,s)},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){var o=l.getBool("WEBGL_PACK_NORMALIZATION")?new Eo(t.shape,e,n,r,i):new xo(t.shape,e,n,r,i);return this.compileAndRun(o,[t])},t.prototype.LRNGrad=function(t,e,n,r,i,o,s){var a=new wo(e.shape,r,i,o,s);return this.compileAndRun(a,[e,n,t])},t.prototype.tile=function(t,e){var n=new $o(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.pad=function(t,e,n){var r=l.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Oo(t.shape,e,n):new Co(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.transpose=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,e);var n=l.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Zo(t.shape,e):new Jo(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new Yi(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},t.prototype.batchToSpaceND=function(t,e,n){b(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),i=ke(t.shape,e,r),o=Re(i.length,e.length),s=Pe(t.shape,e,r),a=Ie(n,e.length),u=De(s,n,e.length);return t.reshape(i).transpose(o).reshape(s).slice(a,u)},t.prototype.spaceToBatchND=function(t,e,n){b(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),i=[[0,0]];i.push.apply(i,n);for(var o=1+e.length;o<t.shape.length;++o)i.push([0,0]);var s=t.pad(i),a=ke(s.shape,e,r,!1),u=Re(a.length,e.length,!1),c=Pe(s.shape,e,r,!1);return s.reshape(a).transpose(u).reshape(c)},t.prototype.reduce=function(t,e,n){var r=t.shape[0],i=t.shape[1],o=He(i),s=new ko({windowSize:o,inSize:i,batchSize:r},e),a=s.outputShape,u=a[0],c=a[1],h=this.makeOutputArray([u,c],n);return this.compileAndRun(s,[t],h),1===h.shape[1]?h:this.reduce(h,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var o=He(i),s=new Ur({windowSize:o,inSize:i,batchSize:r},e,null==n),a=s.outputShape,u=a[0],c=a[1],h=this.makeOutputArray([u,c],"int32"),l=[t];return null!=n&&l.push(n),this.compileAndRun(s,l,h),1===h.shape[1]?h:this.argReduce(t,e,h)},t.prototype.argReducePacked=function(t,e,n){void 0===n&&(n=null);var r=null!=n?n.shape:t.shape,i=He(r[r.length-1]),o=new ii(r,i,e,null==n),s=this.makePackedTensor(o.outputShape,"int32"),a=null==n?[t]:[t,n];return this.compileAndRun(o,a,s),s.rank===t.rank?this.argReducePacked(t,e,s):s},t.prototype.sum=function(t,e){je("sum",e,t.rank);var n=Fe(t.shape,e),r=n[0],i=_(n[1]),o=t.as2D(-1,i),s=_t(t.dtype);return this.reduce(o,"sum",s).reshape(r)},t.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=Fe(t.shape,e),r=n[0],i=_(n[1]),o=t.as2D(-1,i),s=_t(t.dtype);return this.reduce(o,"prod",s).reshape(r)},t.prototype.unsortedSegmentSum=function(t,e,n){var r=0,i=Ue([r],t.rank),o=t;null!=i&&(o=t.transpose(i),r=We(1,t.rank)[0]);var s=function(t,e,n){for(var r=[],i=t.length,o=0;o<i;o++)o!==e?r.push(t[o]):r.push(n);return r}(o.shape,r,n),a=_([o.shape[r]]),u=o.as2D(-1,a),c=_t(t.dtype),h=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(s);return null!=i&&(h=h.transpose(Ye(i))),h},t.prototype.segOpCompute=function(t,e,n,r,i){var o=t.shape[0],s=t.shape[1],a=function(t,e){var n,r=!1;for(t<=qe?(n=t,r=!0):n=q(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=q(t,n+1);return n}(s,i),u=new Uo({windowSize:a,inSize:s,batchSize:o,numSegments:i},e),c=u.outputShape,h=c[0],l=c[1],f=this.makeOutputArray([h,l],r);return this.compileAndRun(u,[t,n],f),f.shape[1]===i?f:(n=En(0,i).tile([s/a]),this.segOpCompute(f,e,n,r,i))},t.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(je("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!l.getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var i=Fe(t.shape,r),o=i[0],s=_(i[1]),a=t.as2D(-1,s);return this.argReduce(a,n).reshape(o)}return this.argReducePacked(t,n)},t.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,"min")},t.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,"max")},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var i=new Ni(t.shape,n,r);return this.compileAndRun(i,[t])},t.prototype.equal=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");var n=new fi("return float(a == b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.notEqual=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");var n=new fi("return float(a != b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");var n=new fi("return float(a < b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.lessEqual=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new fi("return float(a <= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new fi("return float(a > b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greaterEqual=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new fi("return float(a >= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalNot=function(t){var e=new es(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},t.prototype.logicalAnd=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new fi("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalOr=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new fi("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.select=function(t,e,n){var r=new Yo(t.rank,e.shape,e.rank),i=this.makeOutputArray(r.outputShape,Et(e.dtype,n.dtype));return this.compileAndRun(r,[t,e,n],i)},t.prototype.where=function(t){Ne("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return Fr(t.shape,e)},t.prototype.topk=function(t,e,n){return Kn(t.dataSync(),t.shape,t.dtype,e)},t.prototype.min=function(t,e){je("min",e,t.rank);var n=Fe(t.shape,e),r=n[0],i=_(n[1]),o=t.as2D(-1,i);return this.reduce(o,"min",o.dtype).reshape(r)},t.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new fi("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.mod=function(t,e){var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new fi("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);je("max",e,t.rank);var n=Fe(t.shape,e),r=n[0],i=_(n[1]),o=t.as2D(-1,i);return this.reduce(o,"max",o.dtype).reshape(r)},t.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new fi("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.all=function(t,e){je("all",e,t.rank);var n=Fe(t.shape,e),r=n[0],i=_(n[1]),o=t.as2D(-1,i);return this.reduce(o,"all",o.dtype).reshape(r)},t.prototype.any=function(t,e){je("any",e,t.rank);var n=Fe(t.shape,e),r=n[0],i=_(n[1]),o=t.as2D(-1,i);return this.reduce(o,"any",o.dtype).reshape(r)},t.prototype.squaredDifference=function(t,e){var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("return (a - b) * (a - b);",t.shape,e.shape):new fi("return (a - b) * (a - b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.realDivide=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(b.x == 0.0) {\n    result.x = NAN;\n  } else if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(b.y == 0.0) {\n    result.y = NAN;\n  } else if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(b.z == 0.0) {\n    result.z = NAN;\n  } else if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(b.w == 0.0) {\n    result.w = NAN;\n  } else if(a.w == b.w) {\n    result.w = 1.;\n  }\n  \n  return result;\n","float32",!0);var n=new fi("\nif (b == 0.0) {\n  return NAN;\n} \nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t,e],r)},t.prototype.floorDiv=function(t,e){if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new fi("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,ci);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=Et(t.dtype,e.dtype);if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,ci,n);var r=new fi(ci,t.shape,e.shape),i=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[t,e],i)},t.prototype.packedBinaryOp=function(t,e,n,r,i){void 0===i&&(i=!1);var o=new di(n,t.shape,e.shape,i),s=this.makePackedTensor(o.outputShape,r);return this.compileAndRun(o,[t,e],s)},t.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,i=this.texData.get(t.dataId),o=this.texData.get(e.dataId),s=[[i.complexTensors.real,o.complexTensors.real],[i.complexTensors.imag,o.complexTensors.imag]].map(function(i){var o=i[0],s=i[1],a=r.makeComplexComponentTensorHandle(t,o),u=r.makeComplexComponentTensorHandle(e,s),c=new fi(n,t.shape,e.shape),h=r.makeOutputArray(c.outputShape,Et(o.dtype,s.dtype));return r.compileAndRun(c,[a,u],h)}),a=s[0],u=s[1],c=this.complex(a,u);return a.dispose(),u.dispose(),c},t.prototype.makeComplexComponentTensorHandle=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},t.prototype.addN=function(t){if(1===t.length)return t[0];if(t.length>l.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}var i=t.map(function(t){return t.dtype}).reduce(function(t,e){return Et(t,e)}),o=t.map(function(t){return t.shape}),s=l.getBool("WEBGL_PACK"),a=s?new jr(t[0].shape,o):new zr(t[0].shape,o),u=s?this.makePackedTensor(a.outputShape,i):this.makeOutputArray(a.outputShape,i);return this.compileAndRun(a,t,u)},t.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,hi);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=Et(t.dtype,e.dtype);if(l.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,hi,t.dtype);var r=new fi(hi,t.shape,e.shape),i=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[t,e],i)},t.prototype.pow=function(t,e){var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new di("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new fi("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),i=Et(t.dtype,e.dtype),o=n?this.makePackedTensor(r.outputShape,i):this.makeOutputArray(r.outputShape,i);return this.compileAndRun(r,[t,e],o)},t.prototype.ceil=function(t){var e=new es(t.shape,"return ceil(x);");return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new es(t.shape,"return floor(x);");return this.compileAndRun(e,[t])},t.prototype.sign=function(t){var e=new es(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},t.prototype.isNaN=function(t){var e=new es(t.shape,"return float(isnan(x));"),n=this.makeOutputArray(e.outputShape,"bool");return this.compileAndRun(e,[t],n)},t.prototype.isInf=function(t){var e=new es(t.shape,"return float(isinf(x));"),n=this.makeOutputArray(e.outputShape,"bool");return this.compileAndRun(e,[t],n)},t.prototype.isFinite=function(t){var e=new es(t.shape,"return float(!isnan(x) && !isinf(x));"),n=this.makeOutputArray(e.outputShape,"bool");return this.compileAndRun(e,[t],n)},t.prototype.round=function(t){var e=new es(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e;return e=l.getBool("WEBGL_PACK")?new ss(t.shape,is):new es(t.shape,is),this.compileAndRun(e,[t])},t.prototype.expm1=function(t){var e=new es(t.shape,"return exp(x) - 1.0;");return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e;return e=l.getBool("WEBGL_PACK")?new ss(t.shape,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n"):new es(t.shape,"if (x < 0.0) return NAN;\n  return log(x);"),this.compileAndRun(e,[t])},t.prototype.log1p=function(t){var e=new es(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new es(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},t.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new es(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new es(t.shape,"return x * x;");return this.compileAndRun(e,[t])},t.prototype.reciprocal=function(t){var e=new es(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e;return e=l.getBool("WEBGL_PACK")?new ss(t.shape,os):new es(t.shape,rs),this.compileAndRun(e,[t])},t.prototype.prelu=function(t,e){var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",t.shape,e.shape):new fi("return (a < 0.) ? b * a : a;",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.elu=function(t){var e=new es(t.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t,e){var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new fi("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.selu=function(t){var e=new es(t.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(e,[t])},t.prototype.int=function(t){var e=new es(t.shape,"return float(int(x));"),n=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[t],n)},t.prototype.clip=function(t,e,n){var r,i=(r=l.getBool("WEBGL_PACK_CLIP")?new mi(t.shape):new pi(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)},t.prototype.abs=function(t){var e=new es(t.shape,"return abs(x);");return this.compileAndRun(e,[t])},t.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new vi(t.shape),r=[this.makeComplexComponentTensorHandle(t,e.complexTensors.real),this.makeComplexComponentTensorHandle(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(t){var e=new es(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},t.prototype.softplus=function(t){var e=new es(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new es(t.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new es(t.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new es(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new es(t.shape,"return asin(x);");return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new es(t.shape,"return acos(x);");return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new es(t.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])},t.prototype.atan2=function(t,e){var n=l.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new fi("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.sinh=function(t){var e=new es(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new es(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new es(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},t.prototype.asinh=function(t){var e=new es(t.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},t.prototype.acosh=function(t){var e=new es(t.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(e,[t])},t.prototype.atanh=function(t){var e=new es(t.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(e,[t])},t.prototype.erf=function(t){var e=new es(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n=new es(t.shape,function(t){return void 0===t&&(t=0),ns+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},t.prototype.conv2dByMatMul=function(t,e,n){var r=t.shape,i=this.texData.get(t.dataId),o=n.inChannels,s=r[0]*r[1]*r[2],a=n.outChannels,u=(1===s||1===a)&&o>1e3,c=r[2]%2!=0&&!!i.isPacked;if(u||!l.getBool("WEBGL_LAZILY_UNPACK")||!l.getBool("WEBGL_PACK_BINARY_OPERATIONS")||!c){var h=this.reshape(t,[1,r[0]*r[1]*r[2],n.inChannels]),f=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.batchMatMul(h,f,!1,!1),n.outShape)}var d=pt.make([1,r[0]*r[1]*(r[2]+1),n.inChannels],{dataId:t.dataId},t.dtype,this),p=i.shape;i.shape=i.shape.slice(),i.shape[i.shape.length-2]++,b(ve(i.shape,d.shape),function(){return"packed reshape "+i.shape+" to "+d.shape+" isn't free"});var m=this.reshape(e,[1,n.inChannels,n.outChannels]),v=this.batchMatMul(d,m,!1,!1),g=this.texData.get(v.dataId);return b(g.isPacked,function(){return"batchMatMul result is expected to be packed"}),i.shape=p,g.shape=n.outShape,pt.make(n.outShape,{dataId:v.dataId},v.dtype,this)},t.prototype.conv2dWithIm2Row=function(t,e,n){var r=n.filterWidth,i=n.filterHeight,o=n.inChannels,s=n.outWidth,a=n.outHeight,u=r*i*o,c=a*s,h=[u,c],l=t.squeeze([0]),f=e.reshape([1,u,-1]),d=new bo(h,l.shape,n),p=this.compileAndRun(d,[l]).reshape([1,h[0],h[1]]),m=new So(p.shape,[1,c,n.outChannels],!0,!1);return this.compileAndRun(m,[p,f]).reshape([1,a,s,n.outChannels])},t.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(l.getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new Ti(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerInput=function(t,e,n){var r=new xi(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new bi(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2D=function(t,e,n){var r;return l.getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Ci(n),this.compileAndRun(r,[t,e],this.makePackedTensor(n.outShape,t.dtype))):(r=new Mi(n),this.compileAndRun(r,[t,e]))},t.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new Si(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new _i(n);return this.compileAndRun(r,[t,e])},t.prototype.conv3d=function(t,e,n){var r=new Ai(n);return this.compileAndRun(r,[t,e])},t.prototype.conv3dDerInput=function(t,e,n){var r=new Ei(n);return this.compileAndRun(r,[t,e])},t.prototype.conv3dDerFilter=function(t,e,n){var r=new wi(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new No(e,"max",!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.avgPool=function(t,e){var n=new No(e,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t],r)},t.prototype.maxPoolBackprop=function(t,e,n,r){var i=new No(r,"max",!0),o=this.compileAndRun(i,[e]),s=new _o(r),a=this.makeOutputArray(s.outputShape,e.dtype),u=this.compileAndRun(s,[t,o],a);return o.dispose(),u},t.prototype.avgPoolBackprop=function(t,e,n){var r=new oi(n),i=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[t],i)},t.prototype.cast=function(t,e){return zn(t,e,this)},t.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),i=0,o=0;o<t.rank;o++)o!==e&&(r[i++]=t.shape[o]);var s=new Array(t.rank).fill(0),a=t.shape.slice();a[e]=1;var u=new Array(n);for(o=0;o<u.length;o++)s[e]=o,u[o]=this.slice(t,s,a).reshape(r);return u},t.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);return!n.isPacked||ve(t.shape,e)||null!==n.texture&&ve(n.shape,e)?jn(t,e):this.packedReshape(t,e)},t.prototype.resizeBilinear=function(t,e,n,r){var i=l.getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Do(t.shape,e,n,r):new Io(t.shape,e,n,r);return this.compileAndRun(i,[t])},t.prototype.resizeBilinearBackprop=function(t,e,n){var r=new Po(t,e,n);return this.compileAndRun(r,[t])},t.prototype.resizeNearestNeighbor=function(t,e,n,r){var i=new Bo(t.shape,e,n,r);return this.compileAndRun(i,[t])},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new Lo(t,e,n);return this.compileAndRun(r,[t])},t.prototype.multinomial=function(t,e,n,r){var i=e?t:un(t),o=i.shape[0],s=i.shape[1],a=new To(o,s,n),u=this.makeOutputArray(a.outputShape,"int32"),c=a.getCustomSetupFunc(r);return this.compileAndRun(a,[i],u,c)},t.prototype.oneHot=function(t,e,n,r){var i=new Ao(t.size,e,n,r);return this.compileAndRun(i,[t])},t.prototype.nonMaxSuppression=function(t,e,n,r,i){return Ne("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Vn(t.dataSync(),e.dataSync(),n,r,i)},t.prototype.cropAndResize=function(t,e,n,r,i,o){var s=new Oi(t.shape,e.shape,r,i,o);return this.compileAndRun(s,[t,e,n])},t.prototype.depthToSpace=function(t,e,n){b(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});var r=t.shape[0],i="NHWC"===n?t.shape[1]:t.shape[2],o="NHWC"===n?t.shape[2]:t.shape[3],s="NHWC"===n?t.shape[3]:t.shape[1],a=i*e,u=o*e,c=s/(e*e),h=new Ii("NHWC"===n?[r,a,u,c]:[r,c,a,u],e,n);return this.compileAndRun(h,[t])},t.prototype.split=function(t,e,n){return Hn(t,e,n)},t.prototype.scatterND=function(t,e,n){var r=Ke(0,t,n),i=r.sliceRank,o=r.numUpdates,s=r.sliceSize,a=r.strides,u=r.outputSize,c=[u/s,s],h=t.reshape([o,i]),l=e.reshape([o,s]);if(0===u)return jn(dn([]),n);var f=pn(0),d=new jo(o,i,h.rank,l.rank,a,c);return this.compileAndRun(d,[l,h,f]).reshape(n)},t.prototype.sparseToDense=function(t,e,n,r){var i=Ke(0,t,n),o=i.sliceRank,s=i.numUpdates,a=i.strides,u=i.outputSize,c=new jo(s,o,t.rank,e.rank,a,[u,1],!1);return this.compileAndRun(c,[e,t,r]).reshape(n)},t.prototype.fft=function(t){return this.fftImpl(t,!1)},t.prototype.ifft=function(t){return this.fftImpl(t,!0)},t.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new Fi("return real * expR - imag * expI;",t.shape,e),i=new Fi("return real * expI + imag * expR;",t.shape,e),o=[this.makeComplexComponentTensorHandle(t,n.complexTensors.real),this.makeComplexComponentTensorHandle(t,n.complexTensors.imag)],s=this.compileAndRun(r,o),a=this.compileAndRun(i,o),u=this.complex(s,a).as2D(t.shape[0],t.shape[1]);return s.dispose(),a.dispose(),u},t.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],i=Ve(t,e),o=i[0],s=i[1],a=i[2],u=i[3],c=e.reshape([s,r]),h=t.reshape([t.size/a,a]),l=new Wi(r,u,[s,a]);return this.compileAndRun(l,[h,c]).reshape(o)},t.prototype.fill=function(t,e,n){if("string"===(n=n||G(e))){var r=I(n,_(t));return r.fill(e),pt.make(t,{values:r},n)}var i=new zi(t,e),o=i.getCustomSetupFunc(e),s=this.makeOutputArray(t,n);return this.compileAndRun(i,[],s,o)},t.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},t.prototype.zerosLike=function(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)},t.prototype.linspace=function(t,e,n){return Un(t,e,n)},t.prototype.makeOutputArray=function(t,e){return pt.make(t,{},e,this)},t.prototype.makePackedTensor=function(t,e){var n=pt.make(t,{},e,this);return this.texData.get(n.dataId).isPacked=!0,n},t.prototype.unpackTensor=function(t){var e=new as(t.shape);return this.compileAndRun(e,[t],pt.make(e.outputShape,{},t.dtype,this))},t.prototype.packTensor=function(t){var e=new Mo(t.shape);return this.compileAndRun(e,[t],this.makePackedTensor(t.shape,t.dtype))},t.prototype.packedReshape=function(t,e){var n=t.reshape([fe(t.shape)].concat(de(t.shape))),r=[fe(e)].concat(de(e)),i=new Ro(r,n.shape);return this.compileAndRun(i,[n]).reshape(e)},t.prototype.compileAndRun=function(t,e,n,r){var i=this;if(null==n&&(n=t.usesPackedTextures?this.makePackedTensor(t.outputShape,e[0].dtype):this.makeOutputArray(t.outputShape,e[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=P(n.dtype,0),n;var o=e.map(function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(e.dataId);if(null==n.texture){if(!t.usesPackedTextures&&_(e.shape)<=l.getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.usesPackedTextures&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.usesPackedTextures)e=n.isPacked?i.unpackTensor(e):i.packTensor(e),n=i.texData.get(e.dataId);else if(n.isPacked&&!ve(n.shape,e.shape)){var r=e,o=e.shape;e.shape=n.shape,e=i.packedReshape(e,o),n=i.texData.get(e.dataId),r.shape=o}return i.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(n.dataId);var s,a={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},u=function(t,e,n){var r="";o.concat(n).forEach(function(t){var e=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0,n=t.isUniform?"uniform":t.texData.texShape;r+=t.shape+"_"+n+"_"+e});var i=t.userCode;return t.constructor.name+"_"+r+"_"+i}(t,0,a),c=this.getAndSaveBinary(u,function(){return function(t,e,n,r){var i=e.userCode,o=n.map(function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),s=o.map(function(t){return t.shapeInfo}),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Hr(o,a,i,e.usesPackedTextures),c=t.createProgram(u),h=null,f=t.getUniformLocation(c,"NAN",!1);1===l.getNumber("WEBGL_VERSION")&&(h=t.getUniformLocation(c,"INFINITY",!1));for(var d={},p=0;p<e.variableNames.length;p++){var m=e.variableNames[p];d[m]=t.getUniformLocation(c,m,!1),d["offset"+m]=t.getUniformLocation(c,"offset"+m,!1)}return{program:e,source:u,webGLProgram:c,uniformLocations:d,inShapeInfos:s,outShapeInfo:a,infLoc:h,nanLoc:f}}(i.gpgpu,t,o,a)}),h=null!=this.activeTimers;return h&&(s=this.startTimer()),function(t,e,n,r,i){yo(e.inShapeInfos,n),yo([e.outShapeInfo],[r]);var o=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o,s[0],s[1]):t.setOutputMatrixTexture(o,s[0],s[1]),t.setProgram(e.webGLProgram),1===l.getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach(function(n,r){var i=e.program.variableNames[r],o=e.uniformLocations[i],s=e.uniformLocations["offset"+i];if(null!=o)if(n.isUniform)if(_(n.shape)<2)t.gl.uniform1f(o,n.uniformValues[0]);else{var a=n.uniformValues;a instanceof Float32Array||(a=new Float32Array(a)),t.gl.uniform1fv(o,a)}else null!=n.texData.slice&&null!=s&&t.gl.uniform1i(s,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,o,r)}),null!=i&&i(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,c,o,a,r),h&&(s=this.endTimer(s),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(s)})),l.getBool("WEBGL_LAZILY_UNPACK")||!this.texData.get(n.dataId).isPacked||t.isPackShader?n:this.unpackTensor(n)},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixels2DContext&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Ce(function(){var e=l.getBool("DEBUG");l.set("DEBUG",!1);var n=t.abs(pn(1e-8)).dataSync()[0];return l.set("DEBUG",e),n>0?32:16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,i=n.dtype,o=n.values,s=n.texture,a=n.usage,u=n.isPacked;if(null==s){var c,h=null!=this.activeTimers;h&&(c=performance.now());var l=pe(r,u);if(n.texShape=l,null!=o){var f=[1,1,1];0===r.length||1===r.length&&1===r[0]||(f=[fe(r)].concat(de(r)));var d=void 0,p=l[1],m=l[0];u?(p=(e=qi(l[0],l[1]))[0],m=e[1],d=new Bi(f,[m,p])):d=new Li(f,[m,p]);var v=this.makeTensorHandle([m,p],i);this.texData.get(v.dataId).usage=Ri.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,o);var g=this.makeTensorHandle(d.outputShape,v.dtype);g.size=_(d.outputShape),this.texData.get(g.dataId).isPacked=u,this.compileAndRun(d,[v],g);var y=this.texData.get(g.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(v.dataId),this.texData.delete(g.dataId),n.values=null,h&&(this.uploadWaitMs+=performance.now()-c)}else{var b=this.acquireTexture(l,a,i,u);n.texture=b}}},t.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values},t.prototype.acquireTexture=function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)},t.prototype.computeBytes=function(t,e){return t[0]*t[1]*j(e)},t}();kt()&&Nt.registerBackend("webgl",function(){return new hs},2);var ls=an({abs_:function(t){var e=rn(t,"x","abs");return"complex64"===e.dtype?Nt.runKernel(function(t){return t.complexAbs(e)},{$x:e}):Nt.runKernel(function(t,n){var r=t.abs(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.toFloat().step(-1))}}})}}),fs=an({acos_:function(t){var e=rn(t,"x","acos");return Nt.runKernel(function(t,n){var r=t.acos(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(pn(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),ds=an({acosh_:function(t){var e=rn(t,"x","acosh");return Nt.runKernel(function(t,n){var r=t.acosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),ps=an({asin_:function(t){var e=rn(t,"x","asin");return Nt.runKernel(function(t,n){var r=t.asin(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(pn(1).sub(n.toFloat().square()).sqrt())}}})}}),ms=an({asinh_:function(t){var e=rn(t,"x","asinh");return Nt.runKernel(function(t,n){var r=t.asinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(pn(1).add(n.toFloat().square()).sqrt())}}})}}),vs=an({atan_:function(t){var e=rn(t,"x","atan");return Nt.runKernel(function(t,n){var r=t.atan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}})}}),gs=an({atanh_:function(t){var e=rn(t,"x","atanh");return Nt.runKernel(function(t,n){var r=t.atanh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(pn(1).sub(n.toFloat().square()))}}})}}),ys=an({ceil_:function(t){var e=rn(t,"x","ceil");return Nt.runKernel(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),bs=an({clipByValue_:function(t,e,n){var r=rn(t,"x","clipByValue");return b(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}),Nt.runKernel(function(t,i){var o=t.clip(r,e,n);return i([r]),o},{$x:r},function(t,r){var i=r[0];return{$x:function(){return t.where(i.greaterEqual(e).logicalAnd(i.lessEqual(n)),Sn(t))}}})}}),xs=an({cos_:function(t){var e=rn(t,"x","cos");return Nt.runKernel(function(t,n){var r=t.cos(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sin().neg().mul(t)}}})}}),ws=an({cosh_:function(t){var e=rn(t,"x","cosh");return Nt.runKernel(function(t,n){var r=t.cosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}})}}),Es=an({erf_:function(t){var e=rn(t,"x","erf");return b("int32"===e.dtype||"float32"===e.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===e.dtype&&(e=e.toFloat()),Nt.runKernel(function(t,n){var r=t.erf(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),_s=an({exp_:function(t){var e=rn(t,"x","exp");return Nt.runKernel(function(t,n){var r=t.exp(e);return n([r]),r},{$x:e},function(t,e){return{$x:function(){return t.mulStrict(e[0])}}})}}),Ss=an({expm1_:function(t){var e=rn(t,"x","expm1");return Nt.runKernel(function(t,n){var r=t.expm1(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}})}}),Ts=an({floor_:function(t){var e=rn(t,"x","floor");return Nt.runKernel(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),As=an({log_:function(t){var e=rn(t,"x","log");return Nt.runKernel(function(t,n){var r=t.log(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat())}}})}}),Ms=an({log1p_:function(t){var e=rn(t,"x","log1p");return Nt.runKernel(function(t,n){var r=t.log1p(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}})}}),Cs=an({logSigmoid_:function(t){var e=rn(t,"x","logSigmoid");return Nt.runKernel(function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}})}}),Os=an({neg_:function(t){var e=rn(t,"x","neg");return Nt.runKernel(function(t){return t.neg(e)},{$x:e},function(t){return{$x:function(){return t.neg()}}})}}),Ns=an({reciprocal_:function(t){var e=rn(t,"x","reciprocal");return Nt.runKernel(function(t,n){var r=t.reciprocal(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}})}}),ks=an({round_:function(t){var e=rn(t,"x","round");return Nt.runKernel(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),Rs=an({rsqrt_:function(t){var e=rn(t,"x","rsqrt");return Nt.runKernel(function(t,n){var r=t.rsqrt(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}})}}),Ps=an({sigmoid_:function(t){var e=rn(t,"x","sigmoid");return Nt.runKernel(function(t,n){var r=t.sigmoid(e);return n([r]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.mul(pn(1).sub(n)))}}})}}),Is=an({sign_:function(t){var e=rn(t,"x","sign");return Nt.runKernel(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),Ds=an({isNaN_:function(t){var e=rn(t,"x","isNaN");return Nt.runKernel(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),Ls=an({isInf_:function(t){var e=rn(t,"x","isInf");return Nt.runKernel(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),Bs=an({isFinite_:function(t){var e=rn(t,"x","isFinite");return Nt.runKernel(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return Sn(t)}}})}}),Fs=an({sin_:function(t){var e=rn(t,"x","sin");return Nt.runKernel(function(t,n){var r=t.sin(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cos().mul(t)}}})}}),zs=an({sinh_:function(t){var e=rn(t,"x","sinh");return Nt.runKernel(function(t,n){var r=t.sinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}})}}),js=an({softplus_:function(t){var e=rn(t,"x","softplus");return Nt.runKernel(function(t,n){var r=t.softplus(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}})}}),Us=an({sqrt_:function(t){var e=rn(t,"x","sqrt");return Nt.runKernel(function(t,n){var r=t.sqrt(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}})}}),Ys=an({square_:function(t){var e=rn(t,"x","square");return Nt.runKernel(function(t,n){return n([e]),t.square(e)},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.toFloat().mul(2))}}})}}),Ws=an({step_:function(t,e){void 0===e&&(e=0);var n=rn(t,"x","step");return Nt.runKernel(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return Sn(t)}}})}}),Xs=an({tan_:function(t){var e=rn(t,"x","tan");return Nt.runKernel(function(t,n){var r=t.tan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}})}}),Gs=an({tanh_:function(t){var e=rn(t,"x","tanh");return Nt.runKernel(function(t,n){var r=t.tanh(e);return n([r]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return pn(1).sub(n.square()).mulStrict(t)}}})}});function Vs(t,e,n,r,i,o){var s,a,u=rn(t,"x","batchNorm"),c=rn(e,"mean","batchNorm"),h=rn(n,"variance","batchNorm");return null!=i&&(s=rn(i,"scale","batchNorm")),null!=r&&(a=rn(r,"offset","batchNorm")),b(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),b(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),b(2===h.rank||1===h.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."}),null!=s&&b(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),null!=a&&b(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),Ks(u,c,h,a,s,o)}function qs(t,e,n,r,i,o){var s,a,u=rn(t,"x","batchNorm"),c=rn(e,"mean","batchNorm"),h=rn(n,"variance","batchNorm");return null!=i&&(s=rn(i,"scale","batchNorm")),null!=r&&(a=rn(r,"offset","batchNorm")),b(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),b(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),b(3===h.rank||1===h.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."}),null!=s&&b(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),null!=a&&b(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),Ks(u,c,h,a,s,o)}function Hs(t,e,n,r,i,o){var s,a,u=rn(t,"x","batchNorm"),c=rn(e,"mean","batchNorm"),h=rn(n,"variance","batchNorm");return null!=i&&(s=rn(i,"scale","batchNorm")),null!=r&&(a=rn(r,"offset","batchNorm")),b(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),b(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),b(4===h.rank||1===h.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."}),null!=s&&b(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),null!=a&&b(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),Ks(u,c,h,a,s,o)}function Ks(t,e,n,r,i,o){null==o&&(o=.001);var s,a,u,c=rn(t,"x","batchNorm"),h=rn(e,"mean","batchNorm"),l=rn(n,"variance","batchNorm");return null!=i&&(s=rn(i,"scale","batchNorm")),null!=r&&(a=rn(r,"offset","batchNorm")),b(h.rank===l.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),b(null==a||h.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),b(null==s||h.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,Nt.runKernel(function(t,e){var n=t.batchNormalization(u,$s(h),$s(l),o,$s(s),$s(a));return e([c,h,l,s]),n},{$x:c,$mean:h,$variance:l,$scale:s,$offset:a},function(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],a=null==s?pn(1):s,c=Mn(r.shape,u.shape),h=[];if(1===r.rank){for(var l=0;l<u.shape.length-1;++l)h.push(u.shape[l]);h.push(1)}var f=n.sub(r),d=t.mul(a),p=Rs(i.add(pn(o))),m=p.mul(p).mul(p).mul(pn(-.5));return{$x:function(){return 1===r.rank?t.mul(Dr(p.as4D(1,1,1,r.shape[0]),h)).mul(a).reshape(n.shape):t.mul(p).mul(a).reshape(n.shape)},$mean:function(){var t=p.mul(pn(-1)).mul(d);return 1===r.rank&&(t=t.sum(c)),t.reshape(r.shape)},$variance:function(){var t=m.mul(f).mul(d);return 1===r.rank&&(t=t.sum(c)),t.reshape(r.shape)},$scale:function(){var e=f.mul(p),n=t.mul(e);return 1===r.rank&&(n=n.sum(c)),n.reshape(r.shape)},$offset:function(){var e=t;return 1===r.rank&&(e=e.sum(c)),e.reshape(r.shape)}}}).reshape(c.shape)}function $s(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Js(){Me("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Zs=an({batchNormalization2d_:function(t,e,n,r,i,o){return void 0===r&&(r=.001),Js(),Vs(t,e,n,o,i,r)}}),Qs=an({batchNormalization3d_:function(t,e,n,r,i,o){return void 0===r&&(r=.001),Js(),qs(t,e,n,o,i,r)}}),ta=an({batchNormalization4d_:function(t,e,n,r,i,o){return void 0===r&&(r=.001),Js(),Hs(t,e,n,o,i,r)}}),ea=an({batchNormalization_:function(t,e,n,r,i,o){return void 0===r&&(r=.001),Js(),Ks(t,e,n,o,i,r)}}),na=an({batchNorm_:Ks}),ra=an({batchNorm2d_:Vs}),ia=an({batchNorm3d_:qs}),oa=an({batchNorm4d_:Hs});function sa(t,e,n,r,i,o){b(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,a=e,u=!1;3===e.rank&&(u=!0,a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]);var c=s[3],h=a.shape[3];b(4===s.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),b(4===a.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+a.rank}),b(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}),b(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),b(h===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."}),null!=o&&b(T(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Nn(s,n.shape,r,1,i,o),f=Nt.runKernel(function(t,e){var r=t.conv2dDerInput(a,n,l);return e([n,a]),r},{dy4D:a,filter:n},function(t,e){var n=e[0],s=e[1];return{dy4D:function(){return ha(t,n,r,i,"NHWC",1,o)},filter:function(){return fa(t,s,n.shape,r,i,o)}}});return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function aa(t,e,n,r,i,o){var s=t;3===t.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;3===a.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),b(4===s.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),b(4===a.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+a.shape+"."}),b(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}),b(s.shape[3]===n[2],function(){return"Error in conv2dDerFilter: depth of input "+s.shape[3]+") must match input depth in filter ("+n[2]+"."}),b(a.shape[3]===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+a.shape[3]+") must match output depth for filter ("+n[3]+")."}),null!=o&&b(T(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var u=Nn(s.shape,n,r,1,i,o);return Nt.runKernel(function(t){return t.conv2dDerFilter(s,a,u)},{x4D:s,dy4D:a})}function ua(t){var e=function(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}(t),n=e[0],r=e[1],i=e[2];return 1===n&&1===r&&1===i}var ca=an({conv1d_:function(t,e,n,r,i,o,s){void 0===i&&(i="NWC"),void 0===o&&(o=1);var a=rn(t,"x","conv1d"),u=rn(e,"filter","conv1d"),c=a,h=!1;2===a.rank&&(h=!0,c=a.as3D(1,a.shape[0],a.shape[1])),b(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),b(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=s&&b(T(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),b(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),b(Fn(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),b("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=ha(f,l,[1,n],r,"NHWC",[1,o],s);return h?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),ha=an({conv2d_:function(t,e,n,r,i,o,s){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var a=rn(t,"x","conv2d"),u=rn(e,"filter","conv2d"),c=a,h=!1;3===a.rank&&(h=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),b(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),b(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=s&&b(T(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),b(c.shape[3]===u.shape[2],function(){return"Error in conv2d: depth of input ("+c.shape[3]+") must match input depth for filter "+u.shape[2]+"."}),b(Fn(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),b("NHWC"===i,function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var l=Nn(c.shape,u.shape,n,o,r,s),f=Nt.runKernel(function(t,e){var n=t.conv2d(c,u,l);return e([u,c]),n},{x:c,$filter:u},function(t,e){var i=e,s=i[0],a=i[1];return b(Bn(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return sa(a.shape,t,s,n,r)},$filter:function(){return aa(a,t,s.shape,n,r)}}});return h?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),la=an({conv3d_:function(t,e,n,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1]);var s=rn(t,"x","conv3d"),a=rn(e,"filter","conv3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),b(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),b(5===a.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),b(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),b(function(t,e){return ua(n)||ua(e)}(0,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),b("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var h=kn(u.shape,a.shape,n,o,r),l=Nt.runKernel(function(t,e){var n=t.conv3d(u,a,h);return e([u,a]),n},{x:u,$filter:a},function(t,e){b(ua(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var i=e[0],s=e[1];return{x:function(){return function(t,e,n,r,i){b(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var o=t,s=e,a=!1;4===e.rank&&(a=!0,s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],c=s.shape[4];b(5===o.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),b(5===s.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),b(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),b(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),b(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var h=kn(o,n.shape,r,1,i),l=Nt.runKernel(function(t){return t.conv3dDerInput(s,n,h)},{dy5D:s});return a?l.as4D(l.shape[1],l.shape[2],l.shape[3],l.shape[4]):l}(i.shape,t,s,n,r)},$filter:function(){return function(t,e,n,r,i){var o=t;4===t.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var s=e;4===s.rank&&(s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),b(5===o.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."}),b(5===s.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+s.shape+"."}),b(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),b(o.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."}),b(s.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+s.shape[4]+") must match output depth for filter ("+n[4]+")."});var a=kn(o.shape,n,r,1,i);return Nt.runKernel(function(t){return t.conv3dDerFilter(o,s,a)},{x5D:o,dy5D:s})}(i,t,s.shape,n,r)}}});return c?l.as4D(l.shape[1],l.shape[2],l.shape[3],l.shape[4]):l}}),fa=an({conv2dDerFilter_:aa}),da=an({depthwiseConv2d_:function(t,e,n,r,i,o,s){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var a=rn(t,"x","depthwiseConv2d"),u=rn(e,"filter","depthwiseConv2d"),c=a,h=!1;3===a.rank&&(h=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),b(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),b(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),b(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==o&&(o=[1,1]),b(Fn(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=s&&b(T(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var l=Nn(c.shape,u.shape,n,o,r,s,!0),f=Nt.runKernel(function(t,e){var n=t.depthwiseConv2D(c,u,l);return e([c,u]),n},{x:c,$filter:u},function(t,e){b(Bn(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var n=e[0],r=e[1];return{x:function(){return function(t,e,n,r){var i=e,o=!1;3===e.rank&&(o=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=Nt.runKernel(function(t){return t.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}(n.shape,t,r,l)},$filter:function(){return function(t,e,n,r){var i=t;3===t.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=e;return 3===o.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Nt.runKernel(function(t){return t.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}(n,t,r.shape,l)}}});return h?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),pa=an({separableConv2d_:function(t,e,n,r,i,o,s){void 0===o&&(o=[1,1]),void 0===s&&(s="NHWC");var a=rn(t,"x","separableConv2d"),u=rn(e,"depthwiseFilter","separableConv2d"),c=rn(n,"pointwiseFilter","separableConv2d"),h=a,l=!1;if(3===a.rank&&(l=!0,h=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");b(4===h.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."}),b(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),b(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),b(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),b(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var f=u.shape[2],d=u.shape[3];b(c.shape[2]===f*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*d+", but got "+c.shape[2]+"."});var p=da(h,u,r,i,s,o),m=ha(p,c,1,"valid",s);return l?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),ma=an({conv2dTranspose_:function(t,e,n,r,i,o){return sa(n,rn(t,"x","conv2dTranspose"),rn(e,"filter","conv2dTranspose"),r,i,o)}}),va=an({matMul_:function(t,e,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var o=rn(t,"a","matMul"),s=rn(e,"b","matMul");i=St(o,s),o=i[0],s=i[1];var a=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?s.shape[s.rank-1]:s.shape[s.rank-2],c=n?o.shape[o.rank-1]:o.shape[o.rank-2],h=r?s.shape[s.rank-2]:s.shape[s.rank-1],l=o.shape.slice(0,-2),f=s.shape.slice(0,-2),d=_(l),p=_(f);b(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),b(S(l,f),function(){return"Error in matMul: outer dimensions ("+l+") and ("+f+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),b(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=o.shape.slice(0,-2).concat([c,h]),v=n?o.as3D(d,a,c):o.as3D(d,c,a),g=r?s.as3D(p,h,u):s.as3D(p,u,h);return Nt.runKernel(function(t,e){var i=t.batchMatMul(v,g,n,r);return e([v,g]),i},{$a:v,$b:g},function(t,e){var i=e,o=i[0],s=i[1];return n||r?!n&&r?{$a:function(){return t.matMul(s,!1,!1)},$b:function(){return t.matMul(o,!0,!1)}}:n&&!r?{$a:function(){return s.matMul(t,!1,!0)},$b:function(){return o.matMul(t,!1,!1)}}:{$a:function(){return s.matMul(t,!0,!0)},$b:function(){return t.matMul(o,!0,!0)}}:{$a:function(){return t.matMul(s,!1,!0)},$b:function(){return o.matMul(t,!0,!1)}}}).reshape(m)}}),ga=an({dot_:function(t,e){var n=rn(t,"t1","dot"),r=rn(e,"t2","dot");b(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];return b(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),ya=an({outerProduct_:function(t,e){var n=rn(t,"v1","outerProduct"),r=rn(e,"v2","outerProduct");return b(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),ba=an({reverse_:function(t,e){var n=rn(t,"x","reverse");if(0===n.rank)return n.clone();var r=k(e,n.shape);return Nt.runKernel(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)}}),xa=an({reverse1d_:function(t){var e=rn(t,"x","reverse");return b(1===e.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),ba(e,0)}}),wa=an({reverse2d_:function(t,e){var n=rn(t,"x","reverse");return b(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),ba(n,e)}}),Ea=an({reverse3d_:function(t,e){var n=rn(t,"x","reverse");return b(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),ba(n,e)}}),_a=an({reverse4d_:function(t,e){var n=rn(t,"x","reverse");return b(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),ba(n,e)}});function Sa(t,e,n,r,i,o){var s=rn(t,"x","maxPool"),a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),null==r&&(r=[1,1]),b(4===a.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),b(Fn(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=o&&b(T(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=On(a.shape,e,n,r,i,o),h=Nt.runKernel(function(t,e){var n=t.maxPool(a,c);return e([a,n]),n},{x:a},function(t,o){var s=o[0],a=o[1];return{x:function(){return function(t,e,n,r,i,o,s,a){var u=rn(t,"dy","maxPoolBackprop"),c=rn(e,"input","maxPoolBackprop"),h=rn(n,"output","maxPoolBackprop");b(c.rank===u.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"}),null==o&&(o=[1,1]),b(Fn(i,o),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}),b(4===u.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),b(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var l=On(c.shape,r,i,o,s,a);return Nt.runKernel(function(t){return t.maxPoolBackprop(u,c,h,l)},{$dy:u,$input:c})}(t,s,a,e,n,r,i)}}});return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function Ta(t,e,n,r,i,o){var s=rn(t,"x","avgPool","float32");null==r&&(r=[1,1]),b(Fn(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),b(4===a.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),null!=o&&b(T(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=On(a.shape,e,n,r,i,o),h=Nt.runKernel(function(t){return t.avgPool(a,c)},{x:a},function(t){return{x:function(){return function(t,e,n,r,i,o){var s=rn(t,"dy","avgPoolBackprop"),a=rn(e,"input","avgPoolBackprop");b(a.rank===s.rank,function(){return"Rank of input ("+a.rank+") does not match rank of dy ("+s.rank+")"}),null==i&&(i=[1,1]),b(Fn(r,i),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var u=a,c=s,h=!1;3===a.rank&&(h=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]),c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),b(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),b(4===u.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."});var l=On(u.shape,n,r,i,o),f=Nt.runKernel(function(t){return t.avgPoolBackprop(c,u,l)},{dy4D:c,input4D:u});return h?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(t,a,e,n,r,i)}}});return h=h.cast(s.dtype),u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var Aa=an({maxPool_:function(t,e,n,r,i){return Sa(t,e,n,1,r,i)}}),Ma=an({avgPool_:function(t,e,n,r,i){return Ta(t,e,n,1,r,i)}}),Ca=an({pool_:function(t,e,n,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");var s=rn(t,"x","maxPool"),a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),b(Fn(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var c,h=On(a.shape,e,o,i,r),l=[h.dilationHeight,h.dilationWidth];c="same"===r?function(t,e){var n=t.map(function(t,n){return t+(t-1)*(e[n]-1)}).map(function(t){return t-1}),r=n.map(function(t){return Math.floor(t/2)}),i=n.map(function(t,e){return t-r[e]});return n.map(function(t,e){return[r[e],i[e]]})}([h.filterHeight,h.filterWidth],l):[[0,0],[0,0]];var f=1===l[0]&&1===l[1],d=function(t,e,n){var r=n.map(function(t){return t[0]}),i=n.map(function(t){return t[1]}),o=t.concat(r,i),s=e.map(function(t,e){return(t-o[e]%t)%t}),a=i.map(function(t,e){return t+s[e]});return[e.map(function(t,e){return[r[e],a[e]]}),e.map(function(t,e){return[0,s[e]]})]}([h.inHeight,h.inWidth],l,c),p=d[0],m=d[1],v=f?r:"valid",g=f?a:Rr(a,l,p),y=("avg"===n?function(){return Ta(g,e,o,1,v)}:function(){return Sa(g,e,o,1,v)})(),x=f?y:pr(y,l,m);return u?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Oa=an({slice_:function(t,e,n){var r,i,o=rn(t,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof e?[e].concat(new Array(o.rank-1).fill(0)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(0)):e.slice(),i=(i=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(b(-1===t,function(){return"Bad value in size"}),o.shape[e]-r[e])}),function(t,e,n){b(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),b(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(r){b(e[r]+n[r]<=t.shape[r],function(){return"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")"})},i=0;i<t.rank;++i)r(i)}(o,r,i);var s=o.shape;return Nt.runKernel(function(t){return t.slice(o,r,i)},{$x:o},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],s[n]-r[n]-i[n]]);return{$x:function(){return t.pad(e)}}})}}),Na=an({slice1d_:function(t,e,n){var r=rn(t,"x","slice1d");return b(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Oa(r,[e],[n])}}),ka=an({slice2d_:function(t,e,n){var r=rn(t,"x","slice2d");return b(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Oa(r,e,n)}}),Ra=an({slice3d_:function(t,e,n){var r=rn(t,"x","slice3d");return b(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Oa(r,e,n)}}),Pa=an({slice4d_:function(t,e,n){var r=rn(t,"x","slice4d");return b(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Oa(r,e,n)}});function Ia(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(ze(e.shape,r))),t.rank<n.rank&&(t=t.reshape(ze(t.shape,r))),{$x:function(){var r=t.mul(n.equal(e).cast(t.dtype));return null==i?r:r.transpose(i)}}}var Da=an({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","all","bool"),i=k(e,r.shape),o=i,s=Ue(o,r.rank);null!=s&&(r=r.transpose(s),o=We(o.length,r.rank));var a=Nt.runKernel(function(t){return t.all(r,o)},{$x:r});if(n){var u=ze(a.shape,i);return a.reshape(u)}return a}}),La=an({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","any","bool"),i=k(e,r.shape),o=i,s=Ue(o,r.rank);null!=s&&(r=r.transpose(s),o=We(o.length,r.rank));var a=Nt.runKernel(function(t){return t.any(r,o)},{$x:r});if(n){var u=ze(a.shape,i);return a.reshape(u)}return a}}),Ba=an({argMax_:function(t,e){void 0===e&&(e=0);var n=rn(t,"x","argMax");null==e&&(e=0);var r=k(e,n.shape),i=Ue(r,n.rank);return null!=i&&(n=n.transpose(i),r=We(r.length,n.rank)),Nt.runKernel(function(t,e){var i=t.argMax(n,r[0]);return e([n]),i},{$x:n},function(t,e){var n=e[0];return{$x:function(){return Sn(n)}}})}}),Fa=an({argMin_:function(t,e){void 0===e&&(e=0);var n=rn(t,"x","argMin");null==e&&(e=0);var r=k(e,n.shape),i=Ue(r,n.rank);return null!=i&&(n=n.transpose(i),r=We(r.length,n.rank)),Nt.runKernel(function(t,e){var i=t.argMin(n,r[0]);return e([n]),i},{$x:n},function(t,e){var n=e[0];return{$x:function(){return Sn(n)}}})}}),za=an({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","logSumExp"),i=k(e,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(n){var u=ze(a.shape,i);return a.reshape(u)}return a}}),ja=an({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","max"),i=r,o=k(e,r.shape),s=o,a=Ue(s,r.rank);null!=a&&(r=r.transpose(a),s=We(s.length,r.rank));var u=Nt.runKernel(function(t,e){var n=t.max(r,s);return e([i,n]),n},{$x:r},function(t,e){return Ia(t,e[1],e[0],o,a)});if(n){var c=ze(u.shape,o);u=u.reshape(c)}return u}}),Ua=an({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","mean"),i=k(e,r.shape),o=_(Fe(r.shape,i)[1]);return sn(function(t){var r=pn(o);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return i.forEach(function(t){n[t]=1}),e.reshape(n).mul(bn(t.shape,"float32")).div(o)}}})(r)}}),Ya=an({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","min"),i=r,o=k(e,r.shape),s=o,a=Ue(s,r.rank);null!=a&&(r=r.transpose(a),s=We(s.length,r.rank));var u=Nt.runKernel(function(t,e){var n=t.min(r,s);return e([i,n]),n},{$x:r},function(t,e){return Ia(t,e[1],e[0],o,a)});if(n){var c=ze(u.shape,o);u=u.reshape(c)}return u}}),Wa=an({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=k(e,(t=rn(t,"x","moments")).shape),i=t.mean(r,n),o=i.shape;n||(o=ze(i.shape,r));var s=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,n)}}}),Xa=an({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=k(e,r.shape);return sn(function(t){var e=Ue(i,t.rank),r=i,o=t;null!=e&&(o=t.transpose(e),r=We(r.length,t.rank));var s=Nt.runKernel(function(t){return t.sum(o,r)},{permutedX:o});if(n){var a=ze(s.shape,i);s=s.reshape(a)}return{value:s,gradFunc:function(e){var n=t.shape.slice();return i.forEach(function(t){n[t]=1}),e.reshape(n).mul(bn(t.shape,"float32"))}}})(r)}}),Ga=an({prod_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=rn(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=k(e,r.shape),o=Ue(i,r.rank),s=i,a=r;null!=o&&(a=r.transpose(o),s=We(s.length,r.rank));var u=Nt.runKernel(function(t){return t.prod(a,s)},{permutedX:a});if(n){var c=ze(u.shape,i);u=u.reshape(c)}return u}}),Va=an({equal_:function(t,e){var n,r=rn(t,"a","equal"),i=rn(e,"b","equal");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t){return t.equal(r,i)},{$a:r,$b:i})}}),qa=an({equalStrict_:function(t,e){var n=rn(t,"a","equalStrict"),r=rn(e,"b","equalStrict");return x(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Ha=an({greater_:function(t,e){var n,r=rn(t,"a","greater"),i=rn(e,"b","greater");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t){return t.greater(r,i)},{$a:r,$b:i})}}),Ka=an({greaterEqual_:function(t,e){var n,r=rn(t,"a","greaterEqual"),i=rn(e,"b","greaterEqual");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t,e){var n=t.greaterEqual(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){return Sn(n)},$b:function(){return Sn(r)}}})}}),$a=an({greaterEqualStrict_:function(t,e){var n=rn(t,"a","greaterEqualStrict"),r=rn(e,"b","greaterEqualStrict");return x(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Ja=an({greaterStrict_:function(t,e){var n=rn(t,"a","greaterStrict"),r=rn(e,"b","greaterStrict");return x(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Za=an({less_:function(t,e){var n,r=rn(t,"a","less"),i=rn(e,"b","less");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t){return t.less(r,i)},{$a:r,$b:i})}}),Qa=an({lessEqual_:function(t,e){var n,r=rn(t,"a","lessEqual"),i=rn(e,"b","lessEqual");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t){return t.lessEqual(r,i)},{$a:r,$b:i})}}),tu=an({lessEqualStrict_:function(t,e){var n=rn(t,"a","lessEqualStrict"),r=rn(e,"b","lessEqualStrict");return x(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),eu=an({lessStrict_:function(t,e){var n=rn(t,"a","lessStrict"),r=rn(e,"b","lessStrict");return x(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),nu=an({notEqual_:function(t,e){var n,r=rn(t,"a","notEqual"),i=rn(e,"b","notEqual");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t){return t.notEqual(r,i)},{$a:r,$b:i})}}),ru=an({notEqualStrict_:function(t,e){var n=rn(t,"a","notEqualStrict"),r=rn(e,"b","notEqualStrict");return x(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),iu=an({add_:function(t,e){var n,r=rn(t,"a","add"),i=rn(e,"b","add");n=St(r,i),r=n[0],i=n[1];var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t){return t.add(r,i)},{$a:r,$b:i},function(t){return{$a:function(){var e=t,n=Mn(r.shape,o);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},$b:function(){var e=t,n=Mn(i.shape,o);return n.length>0&&(e=e.sum(n)),e.reshape(i.shape)}}})}}),ou=an({addN_:function(t){b(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),b(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(t,e){return rn(t,"tensors"+e,"addN")}),n=e[0];e.forEach(function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(t){if(!S(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Nt.runKernel(function(t){return t.addN(e)},r,function(t){var n={};return e.forEach(function(e,r){n[r]=function(){return t.clone()}}),n})}}),su=an({addStrict_:function(t,e){var n=rn(t,"a","addStrict"),r=rn(e,"b","addStrict");return x(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),au=an({atan2_:function(t,e){var n,r=rn(t,"a","atan2"),i=rn(e,"b","atan2");n=St(r,i),r=n[0],i=n[1];var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t,e){var n=t.atan2(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=iu(n.square(),r.square()),i=t.mul(r.div(e)),s=Mn(n.shape,o);return s.length>0&&(i=i.sum(s)),i.reshape(n.shape)},$b:function(){var e=iu(n.square(),r.square()),i=Os(t.mul(n.div(e))),s=Mn(r.shape,o);return s.length>0&&(i=i.sum(s)),i.reshape(r.shape)}}})}}),uu=an({div_:function(t,e){var n,r=rn(t,"a","div"),i=rn(e,"b","div");if(n=St(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return hu(r,i);var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t,e){var n=t.realDivide(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=t.div(r.toFloat()),i=Mn(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Mn(r.shape,o);i.length>0&&(e=e.sum(i).reshape(r.shape));var s=r.square();return e.div(s.toFloat()).neg()}}})}}),cu=an({divStrict_:function(t,e){var n=rn(t,"a","div"),r=rn(e,"b","div");return x(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),hu=an({floorDiv_:function(t,e){var n,r=rn(t,"a","floorDiv"),i=rn(e,"b","floorDiv");n=St(r,i),r=n[0],i=n[1];var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t,e){var n=t.floorDiv(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=t.div(r.toFloat()),i=Mn(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Mn(r.shape,o);i.length>0&&(e=e.sum(i).reshape(r.shape));var s=r.square();return e.div(s.toFloat()).neg()}}})}}),lu=an({maximum_:function(t,e){var n,r=rn(t,"a","maximum"),i=rn(e,"b","maximum");return n=St(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),Cn(r.shape,i.shape),Nt.runKernel(function(t,e){var n=t.maximum(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){return t.mul(n.greaterEqual(r).toFloat())},$b:function(){return t.mul(n.less(r).toFloat())}}})}}),fu=an({maximumStrict_:function(t,e){var n=rn(t,"a","maximumStrict"),r=rn(e,"b","maximumStrict");return x(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),du=an({minimum_:function(t,e){var n,r=rn(t,"a","minimum"),i=rn(e,"b","minimum");return n=St(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),Cn(r.shape,i.shape),Nt.runKernel(function(t,e){var n=t.minimum(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){return t.mul(n.lessEqual(r).toFloat())},$b:function(){return t.mul(n.greater(r).toFloat())}}})}}),pu=an({minimumStrict_:function(t,e){var n=rn(t,"a","minimumStrict"),r=rn(e,"b","minimumStrict");return x(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),mu=an({mod_:function(t,e){var n,r=rn(t,"a","mod"),i=rn(e,"b","mod");n=St(r,i),r=n[0],i=n[1];var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t,e){var n=t.mod(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=Mn(n.shape,o);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),i=Mn(r.shape,o);return i.length>0?e.sum(i).reshape(r.shape):e}}})}}),vu=an({modStrict_:function(t,e){var n=rn(t,"a","modStrict"),r=rn(e,"b","modStrict");return x(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),gu=an({mul_:function(t,e){var n,r=rn(t,"a","mul"),i=rn(e,"b","mul");n=St(r,i),r=n[0],i=n[1];var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t,e){var n=t.multiply(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=t.mul(r.toFloat()),i=Mn(n.shape,o);return i.length>0?e.sum(i).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),i=Mn(r.shape,o);return i.length>0?e.sum(i).reshape(r.shape):e}}})}}),yu=an({mulStrict_:function(t,e){var n=rn(t,"a","mul"),r=rn(e,"b","mul");return x(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),bu=an({pow_:function(t,e){var n=rn(t,"base","pow"),r=rn(e,"exp","pow"),i=Cn(n.shape,r.shape);return t=n.cast(Et(n.dtype,r.dtype)),e=r.cast(Et(n.dtype,r.dtype)),Nt.runKernel(function(t,e){var i=t.pow(n,r);return e([n,r,i]),i},{$base:n,$exp:r},function(t,e){var n=e[0],r=e[1],o=e[2];return{$base:function(){var e=r.toFloat(),o=t.mul(e.mul(n.pow(e.sub(pn(1))))),s=Mn(n.shape,i);return s.length>0&&(o=o.sum(s)),o.reshape(n.shape)},$exp:function(){var e=n.greater(0),s=n.log().where(e,Sn(n)),a=t.mul(o.mul(s)),u=Mn(r.shape,i);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)}}})}}),xu=an({powStrict_:function(t,e){return x(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),wu=an({squaredDifference_:function(t,e){var n,r=rn(t,"a","squaredDifference"),i=rn(e,"b","squaredDifference");return n=St(r,i),r=n[0],i=n[1],Cn(r.shape,i.shape),Nt.runKernel(function(t,e){var n=t.squaredDifference(r,i);return e([r,i]),n},{$a:r,$b:i},function(t,e){var n=e[0],r=e[1],i=pn(2);return{$a:function(){return t.mul(n.sub(r).mul(i))},$b:function(){return t.mul(r.sub(n).mul(i))}}})}}),Eu=an({squaredDifferenceStrict_:function(t,e){var n=rn(t,"a","squaredDifferenceStrict"),r=rn(e,"b","squaredDifferenceStrict");return x(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),_u=an({sub_:function(t,e){var n,r=rn(t,"a","sub"),i=rn(e,"b","sub");n=St(r,i),r=n[0],i=n[1];var o=Cn(r.shape,i.shape);return Nt.runKernel(function(t){return t.subtract(r,i)},{$a:r,$b:i},function(t){return{$a:function(){var e=t,n=Mn(r.shape,o);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},$b:function(){var e=t,n=Mn(i.shape,o);return n.length>0&&(e=e.sum(n)),e.neg().reshape(i.shape)}}})}}),Su=an({subStrict_:function(t,e){var n=rn(t,"a","subStrict"),r=rn(e,"b","subStrict");return x(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Tu=an({logicalAnd_:function(t,e){var n=rn(t,"a","logicalAnd","bool"),r=rn(e,"b","logicalAnd","bool");return Cn(n.shape,r.shape),Nt.runKernel(function(t){return t.logicalAnd(n,r)},{$a:n,$b:r})}}),Au=an({logicalNot_:function(t){var e=rn(t,"x","logicalNot","bool");return Nt.runKernel(function(t){return t.logicalNot(e)},{$x:e})}}),Mu=an({logicalOr_:function(t,e){var n=rn(t,"a","logicalOr","bool"),r=rn(e,"b","logicalOr","bool");return Cn(n.shape,r.shape),Nt.runKernel(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})}}),Cu=an({logicalXor_:function(t,e){var n=rn(t,"a","logicalXor","bool"),r=rn(e,"b","logicalXor","bool");return Cn(n.shape,r.shape),Mu(t,e).logicalAnd(Tu(t,e).logicalNot())}}),Ou=an({where_:function(t,e,n){var r=rn(e,"a","where"),i=rn(n,"b","where"),o=rn(t,"condition","where","bool");return x(r.shape,i.shape,"Error in where: "),1===o.rank?b(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):x(o.shape,i.shape,"Error in where: "),Nt.runKernel(function(t,e){var n=t.select(o,r,i);return e([o]),n},{$condition:o,$a:r,$b:i},function(t,e){var n=e[0];return{$condition:function(){return Sn(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}})}}),Nu=an({elu_:function(t){var e=rn(t,"x","elu");return Nt.runKernel(function(t,n){var r=t.elu(e);return n([r]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return Nt.runKernel(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})}}),ku=an({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=rn(t,"x","leakyRelu");return lu(pn(e).mul(n),n)}}),Ru=an({prelu_:function(t,e){var n=rn(t,"x","prelu"),r=rn(e,"alpha","prelu");return Nt.runKernel(function(t,e){var i=t.prelu(n,r);return e([n,r]),i},{$x:n,$alpha:r},function(t,e){var n=e[0],r=e[1],i=n.greater(0);return{$x:function(){return Ou(i,t,t.mul(r))},$alpha:function(){var e=Ou(i,Sn(t),t.mul(n)),o=Mn(r.shape,t.shape);return o.length>0&&(e=e.sum(o)),e.reshape(r.shape)}}})}}),Pu=an({relu_:function(t){var e=rn(t,"x","relu");return"bool"===e.dtype?e.toInt():Nt.runKernel(function(t,n){var r=t.relu(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n.step().toFloat())}}})}}),Iu=an({selu_:function(t){var e=rn(t,"x","selu");return Nt.runKernel(function(t,n){var r=t.selu(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){var e=n.greater(pn(0)),r=pn(Qo),i=pn(ts),o=t.mul(i),s=t.mul(r).mul(n.toFloat().exp());return Ou(e,o,s)}}})}}),Du=an({transpose_:function(t,e){var n=rn(t,"x","transpose");return null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),b(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(t){b(t>=0&&t<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1?n.clone():Nt.runKernel(function(t){return t.transpose(n,e)},{$x:n},function(t){var n=Ye(e);return{$x:function(){return t.transpose(n)}}})}}),Lu=an({localResponseNormalization_:function(t,e,n,r,i){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var o=rn(t,"x","localResponseNormalization");b(4===o.rank||3===o.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."}),b(T(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var s=o,a=!1;3===o.rank&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=Nt.runKernel(function(t,o){var a=t.localResponseNormalization4D(s,e,n,r,i);return o([s,a]),a},{x4D:s},function(t,o){var s=o[0],a=o[1];return{x4D:function(){return Nt.runKernel(function(o){return o.LRNGrad(t,s,a,e,n,r,i)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Bu=an({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(pn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=rn(t,"x","norm"),e,n),o=i.shape;if(r){var s=k(n,t.shape);o=ze(i.shape,s)}return i.reshape(o)}});function Fu(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function zu(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var ju=an({gather_:function(t,e,n){void 0===n&&(n=0);var r=rn(t,"x","gather"),i=rn(e,"indices","gather","int32");n=k(n,r.shape)[0];var o=function(t,e,n){for(var r=t.shape[n],i=[],o=1,s=1,a=0;a<n;a++)i.push(t.shape[a]),o*=t.shape[a];for(a=0;a<e.rank;a++)i.push(e.shape[a]);for(a=n+1;a<t.rank;a++)i.push(t.shape[a]),s*=t.shape[a];return{batchSize:o,sliceSize:s,dimSize:r,outputShape:i}}(r,i,n);return Nt.runKernel(function(t,e){var o=t.gather(r,i.flatten(),n);return e([i]),o},{$x:r},function(t,e){var i=e[0];return{$x:function(){var e=r.shape,o=i.size,s=e.slice(0,n),a=s.length,u=e.slice(n,e.length).slice(1),c=u.length,h=Fu(0,a),l=Fu(a+1,a+1+c),f=zu([s,[o],u]),d=t.reshape(f),p=i.reshape([o]),m=zu([[a],h,l]),v=d.transpose(m),g=Uu(v,p,r.shape[n]),y=Ye(m);return g.transpose(y)}}}).reshape(o.outputShape)}}),Uu=an({unsortedSegmentSum_:function(t,e,n){var r=rn(t,"x","unsortedSegmentSum"),i=rn(e,"segmentIds","unsortedSegmentSum","int32");return b(T(n),function(){return"numSegments must be of dtype int"}),Nt.runKernel(function(t,e){var o=t.unsortedSegmentSum(r,i,n);return e([i]),o},{$x:r},function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=lu(e,Sn(e)),r=ju(t,n),i=Ka(e,pn(0,"int32")),o=r.rank-i.rank,s=0;s<o;++s)i=br(i,s+1);i=Tu(i,bn(r.shape,"bool"));var a=Sn(r);return Ou(i,r,a)}(t,n)}}})}}),Yu=an({basicLSTMCell_:function(t,e,n,r,i,o){var s=rn(t,"forgetBias","basicLSTMCell"),a=rn(e,"lstmKernel","basicLSTMCell"),u=rn(n,"lstmBias","basicLSTMCell"),c=rn(r,"data","basicLSTMCell"),h=rn(i,"c","basicLSTMCell"),l=rn(o,"h","basicLSTMCell"),f=c.concat(l,1).matMul(a).add(u),d=f.shape[0],p=f.shape[1]/4,m=[d,p],v=f.slice([0,0],m),g=f.slice([0,p],m),y=f.slice([0,2*p],m),b=f.slice([0,3*p],m),x=v.sigmoid().mulStrict(g.tanh()).addStrict(h.mulStrict(s.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),Wu=an({multiRNNCell_:function(t,e,n,r){for(var i=rn(e,"data","multiRNNCell"),o=on(n,"c","multiRNNCell"),s=on(r,"h","multiRNNCell"),a=i,u=[],c=0;c<t.length;c++){var h=t[c](a,o[c],s[c]);u.push(h[0]),u.push(h[1]),a=h[1]}var l=[],f=[];for(c=0;c<u.length;c+=2)l.push(u[c]),f.push(u[c+1]);return[l,f]}}),Xu=an({movingAverage_:function(t,e,n,r,i){void 0===i&&(i=!0);var o=rn(t,"v","movingAverage"),s=rn(e,"x","movingAverage"),a=rn(n,"decay","movingAverage");Tt(o,s),b(S(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var u=pn(1),c=u.sub(a),h=s.sub(o).mul(c);if(i){b(null!=r,function(){return"When using zeroDebias: true, step is required."});var l=rn(r,"step","movingAverage");h=h.div(u.sub(bu(a,l)))}return o.add(h)}}),Gu=an({stridedSlice_:function(t,e,n,r,i,o,s,a,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),0!==s)throw new Error("ellipsis mask is not yet supported");if(0!==a)throw new Error("new axis mask is not yet supported");var c=rn(t,"x","stridedSlice");if(r.every(function(t){return 1===t})){var h=$e(c.shape,e,n,r,i,o,s,a,u),l=h[0],f=h[1],d=h[2],p=f.filter(function(t,e){return-1===d.indexOf(e)});return Oa(c,l,f).reshape(p)}return Nt.runKernel(function(t){return t.stridedSlice(c,e,n,r,i,o,s,a,u)},{$x:c})}}),Vu=an({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=rn(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var o=Nt.runKernel(function(t){return t.topk(r,e,n)},{$x:r});return{values:o[0],indices:o[1]}}}),qu=an({scatterND_:function(t,e,n){var r=rn(t,"indices","scatterND","int32"),i=rn(e,"updates","scatterND");return function(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}!function(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(o+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(var s=0;s<i;++s)if(n.shape[s]!==e.shape[s])throw new Error(o+" updates.shape["+s+"] ("+n.shape[s]+") != indices.shape["+s+"] ("+e.shape[s]+").");for(s=0;s<n.rank-i;++s)if(n.shape[s+i]!==t[s+r])throw new Error(o+" updates.shape["+(s+i)+"] ("+n.shape[s+i]+") != shape["+(s+i)+"] ("+t[s+i]+")")}(n,e,t)}(i,r,n),Nt.runKernel(function(t){return t.scatterND(r,i,n)},{$indices:r,$updates:i})}}),Hu=an({fft_:function(t){b("complex64"===t.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Nt.runKernel(function(t){return t.fft(r)},{input:t}).reshape(t.shape)}}),Ku=an({ifft_:function(t){b("complex64"===t.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Nt.runKernel(function(t){return t.ifft(r)},{input:t}).reshape(t.shape)}}),$u=an({rfft_:function(t,e){b("float32"===t.dtype,function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(null!=e&&e<r){var o=t.shape.map(function(t){return 0}),s=t.shape.map(function(t){return t});s[t.shape.length-1]=e,n=t.slice(o,s),r=e}else if(null!=e&&e>r){var a=t.shape.map(function(t){return t});a[t.shape.length-1]=e-r,n=t.concat(xn(a),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),c=hn(n,u).as2D(i,r),h=Hu(c),l=Math.floor(r/2)+1,f=ln(h),d=fn(h),p=f.split([l,r-l],f.shape.length-1),m=d.split([l,r-l],d.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=l,hn(p[0],m[0]).reshape(v)}}),Ju=an({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=Ku(r);return ln(i)}var o=[n,2*(e-1)],s=ln(t).as2D(n,e),a=fn(t).as2D(n,e),u=s.slice([0,1],[n,e-2]).reverse(1),c=a.slice([0,1],[n,e-2]).reverse(1).mul(pn(-1)),h=s.concat(u,1),l=a.concat(c,1);return r=hn(h,l).as2D(o[0],o[1]),i=Ku(r),ln(i)}}),Zu=Object.freeze({fft:Hu,ifft:Ku,rfft:$u,irfft:Ju}),Qu=an({sparseToDense_:function(t,e,n,r){void 0===r&&(r=0);var i=rn(t,"sparseIndices","sparseToDense","int32"),o=rn(e,"sparseValues","sparseToDense"),s=rn(r,"defaultValue","sparseToDense",o.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var i=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".");var s=e.size;if(0!==e.rank&&(1!==e.rank||s!==i))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+i+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,s),Nt.runKernel(function(t){return t.sparseToDense(i,o,n,s)},{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),tc=an({gatherND_:function(t,e){var n=rn(e,"indices","gatherND","int32"),r=rn(t,"x","gatherND");return Nt.runKernel(function(t){return t.gatherND(r,n)},{$x:r,$indices:n})}}),ec=an({dropout_:function(t,e,n,r){if(null!=n&&!S(t.shape,n))throw new Error("Non-default noise shape is not implemented yet: "+JSON.stringify(n));var i=Nr(t.shape,0,1,"float32",r).greater(e);return i=i.div(_u(1,e)),t.mul(i)}});function nc(t,e,n){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var s=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(s)}return mn(i,"float32")}var rc,ic=an({hannWindow_:function(t){return nc(t,.5,.5)}}),oc=an({hammingWindow_:function(t){return nc(t,.54,.46)}}),sc=an({frame_:function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var o=0,s=[];o+e<=t.size;)s.push(Oa(t,o,e)),o+=n;if(r){var a=o+e-t.size,u=$n([Oa(t,o,e-a),wn([a],i)]);s.push(u)}return 0===s.length?vn([],[0,e]):$n(s).as2D(s.length,e)}}),ac=Object.freeze({hannWindow:ic,hammingWindow:oc,frame:sc});!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(rc||(rc={}));var uc=an({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=rc.SUM_BY_NONZERO_WEIGHTS);var i=rn(t,"labels","absoluteDifference"),o=rn(e,"predictions","absoluteDifference"),s=null;null!=n&&(s=rn(n,"weights","absoluteDifference")),x(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return cc(a,s,r)}}),cc=an({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=rc.SUM_BY_NONZERO_WEIGHTS);var r=rn(t,"losses","computeWeightedLoss"),i=null;null!=e&&(i=rn(e,"weights","computeWeightedLoss"));var o=null==i?r:r.mul(i);if(n===rc.NONE)return o;if(n===rc.SUM)return o.sum();if(n===rc.MEAN){if(null==i)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(pn(s)):a}if(n===rc.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(pn(r.size));var u=i.mul(bn(r.shape)).notEqual(pn(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),hc=an({cosineDistance_:function(t,e,n,r,i){void 0===i&&(i=rc.SUM_BY_NONZERO_WEIGHTS);var o=rn(t,"labels","cosineDistance"),s=rn(e,"predictions","cosineDistance"),a=null;null!=r&&(a=rn(r,"weights","cosineDistance")),x(o.shape,s.shape,"Error in cosineDistance: ");var u=pn(1).sub(o.mul(s).sum(n,!0));return cc(u,a,i)}}),lc=an({hingeLoss_:function(t,e,n,r){void 0===r&&(r=rc.SUM_BY_NONZERO_WEIGHTS);var i=rn(t,"labels","hingeLoss"),o=rn(e,"predictions","hingeLoss"),s=null;null!=n&&(s=rn(n,"weights","hingeLoss")),x(i.shape,o.shape,"Error in hingeLoss: ");var a=pn(1);i=pn(2).mul(i).sub(a);var u=a.sub(i.mul(o)).relu();return cc(u,s,r)}}),fc=an({huberLoss_:function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i=rc.SUM_BY_NONZERO_WEIGHTS);var o=rn(t,"labels","huberLoss"),s=rn(e,"predictions","huberLoss"),a=null;null!=n&&(a=rn(n,"weights","huberLoss")),x(o.shape,s.shape,"Error in huberLoss: ");var u=pn(r),c=s.sub(o).abs(),h=du(c,u),l=c.sub(h),f=pn(.5).mul(h.square()).add(u.mul(l));return cc(f,a,i)}}),dc=an({logLoss_:function(t,e,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=rc.SUM_BY_NONZERO_WEIGHTS);var o=rn(t,"labels","logLoss"),s=rn(e,"predictions","logLoss"),a=null;null!=n&&(a=rn(n,"weights","logLoss")),x(o.shape,s.shape,"Error in logLoss: ");var u=pn(1),c=pn(r),h=o.mul(s.add(c).log()).neg().sub(u.sub(o).mul(u.sub(s).add(c).log()));return cc(h,a,i)}}),pc=an({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=rc.SUM_BY_NONZERO_WEIGHTS);var i=rn(t,"labels","meanSquaredError"),o=rn(e,"predictions","meanSquaredError"),s=null;null!=n&&(s=rn(n,"weights","meanSquaredError")),x(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return cc(a,s,r)}}),mc=an({sigmoidCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=rc.SUM_BY_NONZERO_WEIGHTS);var o=rn(t,"multiClassLabels","sigmoidCrossEntropy"),s=rn(e,"logits","sigmoidCrossEntropy"),a=null;if(null!=n&&(a=rn(n,"weights","sigmoidCrossEntropy")),x(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=pn(r),c=pn(1),h=pn(.5);o=o.mul(c.sub(u)).add(h.mul(u))}var l=function(t,e){var n=rn(t,"labels","sigmoidCrossEntropyWithLogits"),r=rn(e,"logits","sigmoidCrossEntropyWithLogits");x(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),o=r.mul(n),s=r.abs().neg().exp().log1p();return i.sub(o).add(s)}(o,s);return cc(l,a,i)}}),vc=an({softmaxCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=rc.SUM_BY_NONZERO_WEIGHTS);var o=rn(t,"onehotLabels","softmaxCrossEntropy"),s=rn(e,"logits","softmaxCrossEntropy"),a=null;if(null!=n&&(a=rn(n,"weights","softmaxCrossEntropy")),x(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var u=pn(r),c=pn(1),h=pn(o.shape[1]);o=o.mul(c.sub(u)).add(u.div(h))}var l=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return sn(function(t,e,r){var i=e.logSumExp([n],!0),o=e.toFloat().sub(i);return r([t,o]),{value:o.mul(t).neg().sum([n]),gradFunc:function(t,e){var r=e[0],i=e[1],o=ze(t.shape,[n]);return[t.reshape(o).mul(r.toFloat().sub(i.exp())),t.reshape(o).mul(i.exp().sub(r.toFloat()))]}}})(t,e)}(o,s);return cc(l,a,i)}}),gc=Object.freeze({get Reduction(){return rc},absoluteDifference:uc,computeWeightedLoss:cc,cosineDistance:hc,hingeLoss:lc,huberLoss:fc,logLoss:dc,meanSquaredError:pc,sigmoidCrossEntropy:mc,softmaxCrossEntropy:vc});function yc(t,e){return void 0===e&&(e=!1),Nt.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=xr(n),o=t.clone(),s=vn([[1]],[1,1]),a=s.clone(),u=n>=r?r:n,c=function(t){var e,u=o,c=a,h=i;e=Nt.tidy(function(){var e=o.slice([t,t],[n-t,1]),u=e.norm(),c=o.slice([t,t],[1,1]),h=c.sign().neg(),l=c.sub(h.mul(u)),f=e.div(l);a=1===f.shape[0]?s.clone():s.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0);var d=h.matMul(l).div(u).neg(),p=o.slice([t,0],[n-t,r]),m=d.mul(a);o=0===t?p.sub(m.matMul(a.transpose().matMul(p))):o.slice([0,0],[t,r]).concat(p.sub(m.matMul(a.transpose().matMul(p))),0);var v=i.slice([0,t],[n,i.shape[1]-t]);return i=0===t?v.sub(v.matMul(a).matMul(m.transpose())):i.slice([0,0],[n,t]).concat(v.sub(v.matMul(a).matMul(m.transpose())),1),[a,o,i]}),a=e[0],o=e[1],i=e[2],Oe([u,c,h])},h=0;h<u;++h)c(h);return!e&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]})}var bc=an({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,b(null!=t&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(e){b(t[e].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[e].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=er(t,t.shape[0],0).map(function(t){return Pr(t,[0])});b(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],s=t,a=function(t){o.push(Nt.tidy(function(){var e=s[t];if(t>0)for(var n=0;n<t;++n){var r=Xa(o[n].mulStrict(e)).mul(o[n]);e=e.sub(r)}return e.div(Bu(e,"euclidean"))}))};for(i=0;i<t.length;++i)a(i);return e?Ir(o,0):o}}),xc=an({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return yc(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=Br(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(t){var n=yc(t,e),r=n[0],s=n[1];i.push(r),o.push(s)}),[Ir(i,0).reshape(t.shape),Ir(o,0).reshape(t.shape)]}}),wc=Object.freeze({gramSchmidt:bc,qr:xc});function Ec(t,e,n,r,i){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY);var o=t.shape[0];return n=Math.min(n,o),b(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),b(2===t.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),b(4===t.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),b(1===e.rank,function(){return"scores must be a 1D tensor"}),b(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i}}var _c=an({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=rn(t,"images","resizeBilinear");b(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),b(2===e.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],a=e[1],u=Nt.runKernel(function(t,e){return e([i]),t.resizeBilinear(i,s,a,n)},{batchImages:i},function(t,e){return{batchImages:function(){return Nt.runKernel(function(r){return r.resizeBilinearBackprop(t,e[0],n)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Sc=an({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=rn(t,"images","resizeNearestNeighbor");b(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),b(2===e.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),b("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],a=e[1],u=Nt.runKernel(function(t,e){return e([i]),t.resizeNearestNeighbor(i,s,a,n)},{batchImages:i},function(t,e){return{batchImages:function(){return Nt.runKernel(function(r){return r.resizeNearestNeighborBackprop(t,e[0],n)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Tc=an({nonMaxSuppression_:function(t,e,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var o=rn(t,"boxes","nonMaxSuppression"),s=rn(e,"scores","nonMaxSuppression"),a=Ec(o,s,n,r,i);return n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,Nt.runKernel(function(t){return t.nonMaxSuppression(o,s,n,r,i)},{$boxes:o})}}),Ac=an({cropAndResize_:function(t,e,n,r,i,o){var s=rn(t,"image","cropAndResize","float32"),a=rn(e,"boxes","cropAndResize","float32"),u=rn(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var c=a.shape[0];return b(4===s.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),b(2===a.rank&&4===a.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+a.shape+"."}),b(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+a.shape+"."}),b(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),b(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),b("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),Nt.runKernel(function(t,e){return t.cropAndResize(s,a,u,r,i,o)},{$image:s,$boxes:a})}}),Mc=Object.freeze({resizeBilinear:_c,resizeNearestNeighbor:Sc,nonMaxSuppression:Tc,nonMaxSuppressionAsync:function(t,e,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),c(this,void 0,void 0,function(){var o,s,a,u,c,l;return h(this,function(h){switch(h.label){case 0:return o=rn(t,"boxes","nonMaxSuppressionAsync"),s=rn(e,"scores","nonMaxSuppressionAsync"),a=Ec(o,s,n,r,i),n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,o.data()];case 1:return u=h.sent(),[4,s.data()];case 2:return c=h.sent(),l=Vn(u,c,n,r,i),o!==t&&o.dispose(),s!==e&&s.dispose(),[2,l]}})})},cropAndResize:Ac}),Cc=an({matMul_:function(t,e,n,r,i,o){var s;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o="linear");var a=rn(t,"a","fused matMul"),u=rn(e,"b","fused matMul");s=St(a,u),a=s[0],u=s[1];var c=n?a.shape[a.rank-2]:a.shape[a.rank-1],h=r?u.shape[u.rank-1]:u.shape[u.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],d=a.shape.slice(0,-2),p=u.shape.slice(0,-2),m=_(d),v=_(p);b(a.rank>=2&&u.rank>=2&&a.rank===u.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+u.rank+"."}),b(S(d,p),function(){return"Error in fused matMul: outer dimensions ("+d+") and ("+p+") of Tensors with shapes "+a.shape+" and "+u.shape+" must match."}),b(c===h,function(){return"Error in fused matMul: inner shapes ("+c+") and ("+h+") of Tensors with shapes "+a.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var g,y=a.shape.slice(0,-2).concat([l,f]),x=n?a.as3D(m,c,l):a.as3D(m,l,c),w=r?u.as3D(v,f,h):u.as3D(v,h,f);null!=i&&Cn(y,(g=St(g=rn(i,"bias","fused matMul"),a)[0]).shape);var E={$a:x,$b:w};return null!=i&&(E.$bias=g),Nt.runKernel(function(t,e){var i=t.fusedBatchMatMul(x,w,n,r,g,o);return e([x,w,i]),i},E,function(t,e){var s,a=e[0],u=e[1],c=e[2];if(null==o||"linear"===o)s=t;else{if("relu"!==o)throw new Error("Gradient for activation "+o+" has not been implemented yet.");s=t.mul(c.step())}var h={};return null!=i&&(h={$bias:function(){var t=s,e=Mn(g.shape,s.shape);return e.length>0&&(t=t.sum(e)),t.reshape(g.shape)}}),n||r?!n&&r?Object.assign({$a:function(){return s.matMul(u,!1,!1)},$b:function(){return s.matMul(a,!0,!1)}},h):n&&!r?Object.assign({$a:function(){return u.matMul(s,!1,!0)},$b:function(){return a.matMul(s,!1,!1)}},h):Object.assign({$a:function(){return u.matMul(s,!0,!0)},$b:function(){return s.matMul(a,!0,!0)}},h):Object.assign({$a:function(){return s.matMul(u,!1,!0)},$b:function(){return a.matMul(s,!0,!1)}},h)}).reshape(y)}}),Oc=Object.freeze({matMul:Cc}),Nc=Object.freeze({image:Mc,linalg:wc,losses:gc,spectral:Zu,fused:Oc,signal:ac,op:an,batchNormalization2d:Zs,batchNormalization3d:Qs,batchNormalization4d:ta,batchNormalization:ea,batchNorm:na,batchNorm2d:ra,batchNorm3d:ia,batchNorm4d:oa,complex:hn,real:ln,imag:fn,concat:$n,concat1d:Jn,concat2d:Zn,concat3d:Qn,concat4d:tr,split:er,conv1d:ca,conv2d:ha,conv3d:la,conv2dDerFilter:fa,depthwiseConv2d:da,separableConv2d:pa,conv2dTranspose:ma,matMul:va,dot:ga,outerProduct:ya,reverse:ba,reverse1d:xa,reverse2d:wa,reverse3d:Ea,reverse4d:_a,maxPool:Aa,avgPool:Ma,pool:Ca,slice:Oa,slice1d:Na,slice2d:ka,slice3d:Ra,slice4d:Pa,abs:ls,acos:fs,acosh:ds,asin:ps,asinh:ms,atan:vs,atanh:gs,ceil:ys,clipByValue:bs,cos:xs,cosh:ws,erf:Es,exp:_s,expm1:Ss,floor:Ts,log:As,log1p:Ms,logSigmoid:Cs,neg:Os,reciprocal:Ns,round:ks,rsqrt:Rs,sigmoid:Ps,sign:Is,isNaN:Ds,isInf:Ls,isFinite:Bs,sin:Fs,sinh:zs,softplus:js,sqrt:Us,square:Ys,step:Ws,tan:Xs,tanh:Gs,all:Da,any:La,argMax:Ba,argMin:Fa,logSumExp:za,max:ja,mean:Ua,min:Ya,moments:Wa,sum:Xa,prod:Ga,equal:Va,equalStrict:qa,greater:Ha,greaterEqual:Ka,greaterEqualStrict:$a,greaterStrict:Ja,less:Za,lessEqual:Qa,lessEqualStrict:tu,lessStrict:eu,notEqual:nu,notEqualStrict:ru,add:iu,addN:ou,addStrict:su,atan2:au,div:uu,divStrict:cu,floorDiv:hu,maximum:lu,maximumStrict:fu,minimum:du,minimumStrict:pu,mod:mu,modStrict:vu,mul:gu,mulStrict:yu,pow:bu,powStrict:xu,squaredDifference:wu,squaredDifferenceStrict:Eu,sub:_u,subStrict:Su,elu:Nu,leakyRelu:ku,prelu:Ru,relu:Pu,selu:Iu,logicalAnd:Tu,logicalNot:Au,logicalOr:Mu,logicalXor:Cu,where:Ou,whereAsync:function(t){return c(this,void 0,void 0,function(){var e,n,r;return h(this,function(i){switch(i.label){case 0:return[4,(e=rn(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=Fr(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},buffer:dr,print:function(t,e){void 0===e&&(e=!1),console.log(t.toString(e))},batchToSpaceND:pr,cast:mr,clone:vr,cumsum:gr,depthToSpace:yr,expandDims:br,eye:xr,multinomial:wr,oneHot:Er,pad:_r,pad1d:Sr,pad2d:Tr,pad3d:Ar,pad4d:Mr,rand:Cr,randomNormal:Or,randomUniform:Nr,reshape:kr,spaceToBatchND:Rr,squeeze:Pr,stack:Ir,tile:Dr,truncatedNormal:Lr,unstack:Br,setdiff1dAsync:function(t,e){return c(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,f;return h(this,function(h){switch(h.label){case 0:return n=rn(t,"x","setdiff1d"),r=rn(e,"y","setdiff1d"),b(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),b(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),b(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(o=h.sent(),s=new Set(o),a=0,l=0;l<i.length;l++)s.has(i[l])||a++;for(u=new ht([a],n.dtype),c=new ht([a],"int32"),l=0,f=0;l<i.length;l++)s.has(i[l])||(u.values[f]=i[l],c.values[f]=l,f++);return[2,[u.toTensor(),c.toTensor()]]}})})},fill:wn,linspace:function(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Nt.runKernel(function(r){return r.linspace(t,e,n)},{})},ones:bn,range:En,scalar:pn,tensor:dn,tensor1d:mn,tensor2d:vn,tensor3d:gn,tensor4d:yn,tensor5d:function(t,e,n){if(w(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=en(t);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return dn(t,e=e||r,n)},tensor6d:function(t,e,n){if(w(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=en(t);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return dn(t,e=e||r,n)},zeros:xn,onesLike:_n,zerosLike:Sn,transpose:Du,softmax:un,logSoftmax:cn,localResponseNormalization:Lu,norm:Bu,gather:ju,unsortedSegmentSum:Uu,basicLSTMCell:Yu,multiRNNCell:Wu,movingAverage:Xu,stridedSlice:Gu,topk:Vu,scatterND:qu,fft:Hu,ifft:Ku,rfft:$u,irfft:Ju,sparseToDense:Qu,gatherND:tc,dropout:ec,hannWindow:ic,hammingWindow:oc,frame:sc}),kc=function(){function t(){this.blockSize=48,this.firstUse=!0,l.get("IS_BROWSER")&&(this.fromPixels2DContext=document.createElement("canvas").getContext("2d")),this.data=new Tn(this,Nt)}return t.prototype.register=function(t,e,n){if(this.firstUse&&(this.firstUse=!1,l.get("IS_NODE")&&Ne("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(t))throw new Error("Data buffer is already registered");this.data.set(t,{dtype:n})},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(t).values=e},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n,r;if(l.get("IS_NODE")&&null==t.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=t.getContext)n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;else if(t instanceof ImageData||t.data instanceof Uint8Array)n=t.data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=t.width,this.fromPixels2DContext.canvas.height=t.height,this.fromPixels2DContext.drawImage(t,0,0,t.width,t.height),n=this.fromPixels2DContext.getImageData(0,0,t.width,t.height).data}if(4===e)r=new Int32Array(n);else{var i=t.width*t.height;r=new Int32Array(i*e);for(var o=0;o<i;o++)for(var s=0;s<e;++s)r[o*e+s]=n[4*o+s]}return gn(r,[t.height,t.width,e],"int32")},t.prototype.read=function(t){return c(this,void 0,void 0,function(){return h(this,function(e){return[2,this.readSync(t)]})})},t.prototype.readSync=function(t){var e=this.data.get(t),n=e.dtype,r=e.complexTensors;return"complex64"===n?Yn(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(t).values},t.prototype.bufferSync=function(t){return dr(t.shape,t.dtype,this.readSync(t.dataId))},t.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},t.prototype.time=function(t){return c(this,void 0,void 0,function(){var e;return h(this,function(n){return e=Q(),t(),[2,{kernelMs:Q()-e}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(t,e){var n=pt.make(t.shape,{},"complex64");return this.data.get(n.dataId).complexTensors={real:Nt.keep(t.clone()),imag:Nt.keep(e.clone())},n},t.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},t.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){null!=t&&b("complex64"!==t.dtype,function(){return e+" does not support complex64 tensors."})})},t.prototype.slice=function(t,e,n){if(this.assertNotComplex(t,"slice"),Qe(t.shape,e,n)){var r=tn(e,t.strides),i=_(n);return dn(this.readSync(t.dataId).subarray(r,r+i),n,t.dtype)}for(var o=dr(n,t.dtype),s=this.bufferSync(t),a=0;a<o.size;++a){var u=o.indexToLoc(a).map(function(t,n){return t+e[n]});o.values[a]=s.get.apply(s,u)}return o.toTensor()},t.prototype.stridedSlice=function(t,e,n,r,i,o,s,a,u){this.assertNotComplex(t,"stridedSlice");var c=$e(t.shape,e,n,r,i,o,s,a,u),h=c[0],l=c[1],f=c[2],d=l.filter(function(t,e){return-1===f.indexOf(e)});if(d.some(function(t){return 0===t}))return dn([],d);for(var p=dr(l,t.dtype),m=this.bufferSync(t),v=0;v<p.size;v++){for(var g=p.indexToLoc(v),y=new Array(g.length),b=0;b<y.length;b++)y[b]=g[b]*r[b]+h[b];p.set.apply(p,[m.get.apply(m,y)].concat(g))}return p.toTensor().reshape(d)},t.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),i=0,o=0;o<t.rank;o++)o!==e&&(r[i++]=t.shape[o]);var s=new Array(t.rank).fill(0),a=t.shape.slice();a[e]=1;var u=new Array(n);for(o=0;o<u.length;o++)s[e]=o,u[o]=this.slice(t,s,a).reshape(r);return u},t.prototype.reverse=function(t,e){this.assertNotComplex(t,"reverse");for(var n=dr(t.shape,t.dtype),r=this.bufferSync(t),i=function(i){var o=n.indexToLoc(i),s=o.slice();e.forEach(function(e){return s[e]=t.shape[e]-1-s[e]}),n.set.apply(n,[r.get.apply(r,s)].concat(o))},o=0;o<n.size;o++)i(o);return n.toTensor()},t.prototype.concat=function(t,e){var n=this;this.assertNotComplex(t,"concat");var r=t.map(function(t){var n=_(t.shape.slice(e));return t.as2D(-1,n)}),i=Ge(r.map(function(t){return t.shape}),1),o=dr(i,t[0].dtype).values;if(1===r[0].shape[0]){var s=0;r.forEach(function(t){o.set(n.readSync(t.dataId),s),s+=t.size})}else{var a=0;r.forEach(function(t){for(var e=n.readSync(t.dataId),r=0,s=0;s<t.shape[0];++s)for(var u=s*i[1]+a,c=0;c<t.shape[1];++c)o[u+c]=e[r++];a+=t.shape[1]})}var u=Ge(t.map(function(t){return t.shape}),e);return dn(o,u,t[0].dtype)},t.prototype.neg=function(t){return this.assertNotComplex(t,"neg"),this.multiply(pn(-1),t)},t.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t+n,imag:e+r}}):this.broadcastedBinaryOp(t,e,Et(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.addN=function(t){var e=this;this.assertNotComplex(t,"addN");for(var n=t.map(function(t){return e.readSync(t.dataId)}),r=dr(t[0].shape,t[0].dtype),i=r.values,o=0;o<t.length;o++)for(var s=n[o],a=0;a<i.length;a++)i[a]+=s[a];return r.toTensor()},t.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t-n,imag:e-r}}):this.broadcastedBinaryOp(t,e,Et(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.assertNotComplex([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.batchMatMul=function(t,e,n,r){this.assertNotComplex([t,e],"matMul");for(var i=n?t.shape[1]:t.shape[2],o=n?t.shape[2]:t.shape[1],s=r?e.shape[1]:e.shape[2],a=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),h=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],l=h[0],f=h[1],d=h[2],p=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],m=p[0],v=p[1],g=p[2],y=o*s,b=dr([a,o,s],t.dtype),x=b.values,w=this.blockSize,E=0;E<a;E++)for(var _=0;_<o;_+=w)for(var S=0;S<s;S+=w)for(var T=0;T<i;T+=w)for(var A=Math.min(_+w,o),M=Math.min(S+w,s),C=Math.min(T+w,i),O=_;O<A;O++)for(var N=S;N<M;N++){for(var k=0,R=T;R<C;R++)k+=u[E*l+O*f+R*d]*c[R*m+N*v+E*g];x[E*y+(O*s+N)]+=k}return b.toTensor()},t.prototype.fusedBatchMatMul=function(t,e,n,r,i,o){var s=this.batchMatMul(t,e,n,r);return i&&(s=this.add(s,i)),o&&(s=function(t,e,n){if("linear"===e)return t.linear(n);if("relu"===e)return t.relu(n);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}(this,o,s)),s},t.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}}):this.broadcastedBinaryOp(t,e,Et(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.realDivide=function(t,e){return this.assertNotComplex([t,e],"realDivide"),this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.floorDiv=function(t,e){return this.assertNotComplex([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},t.prototype.sum=function(t,e){this.assertNotComplex(t,"sum"),je("sum",e,t.rank);for(var n=Fe(t.shape,e),r=n[0],i=n[1],o=xn(r,Et(t.dtype,"int32")),s=_(i),a=this.readSync(o.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var h=c*s,l=0,f=0;f<s;++f)l+=u[h+f];a[c]=l}return o},t.prototype.prod=function(t,e){this.assertNotComplex(t,"sum");for(var n=Fe(t.shape,e),r=n[0],i=n[1],o=xn(r,Et(t.dtype,"int32")),s=_(i),a=this.readSync(o.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var h=c*s,l=1,f=0;f<s;++f)l*=u[h+f];a[c]=l}return o},t.prototype.unsortedSegmentSum=function(t,e,n){this.assertNotComplex(t,"unsortedSegmentSum");for(var r=[],i=t.rank-e.rank,o=0;o<i;++o)e=e.expandDims(o+1);for(o=0;o<n;++o){var s=pn(o,"int32"),a=Va(s,e).asType("float32").mul(t).sum(0);r.push(a)}return Ir(r)},t.prototype.argMin=function(t,e){this.assertNotComplex(t,"argMin");var n=[e];je("argMin",n,t.rank);for(var r=Fe(t.shape,n),i=r[0],o=r[1],s=xn(i,"int32"),a=_(o),u=this.readSync(s.dataId),c=this.readSync(t.dataId),h=0;h<u.length;++h){for(var l=h*a,f=c[l],d=0,p=0;p<a;++p){var m=c[l+p];m<f&&(f=m,d=p)}u[h]=d}return s},t.prototype.argMax=function(t,e){this.assertNotComplex(t,"argMax");var n=[e];je("argMax",n,t.rank);for(var r=Fe(t.shape,n),i=r[0],o=r[1],s=xn(i,"int32"),a=_(o),u=this.readSync(s.dataId),c=this.readSync(t.dataId),h=0;h<u.length;++h){for(var l=h*a,f=c[l],d=0,p=0;p<a;++p){var m=c[l+p];m>f&&(f=m,d=p)}u[h]=d}return s},t.prototype.cumsum=function(t,e,n,r){if(this.assertNotComplex(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var i=Et(t.dtype,"int32"),o=xn(t.shape,i),s=this.readSync(o.dataId),a=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},h=0;h<a.length;h+=u)for(var l=0;l<u;l++){var f=c(h,l);if(0===l)s[f]=n?0:a[f];else{var d=c(h,l-1);s[f]=n?a[d]+s[d]:a[f]+s[d]}}return o},t.prototype.equal=function(t,e){return this.assertNotComplex([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},t.prototype.notEqual=function(t,e){return this.assertNotComplex([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},t.prototype.less=function(t,e){return this.assertNotComplex([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},t.prototype.lessEqual=function(t,e){return this.assertNotComplex([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},t.prototype.greater=function(t,e){return this.assertNotComplex([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},t.prototype.greaterEqual=function(t,e){return this.assertNotComplex([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},t.prototype.logicalNot=function(t){this.assertNotComplex(t,"logicalNot");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return pt.make(t.shape,{values:n},"bool")},t.prototype.logicalAnd=function(t,e){return this.assertNotComplex([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},t.prototype.logicalOr=function(t,e){return this.assertNotComplex([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},t.prototype.select=function(t,e,n){this.assertNotComplex([t,e,n],"select");for(var r=this.readSync(t.dataId),i=this.readSync(e.dataId),o=this.readSync(n.dataId),s=xn(e.shape,Et(e.dtype,n.dtype)),a=this.readSync(s.dataId),u=0,c=0===t.rank||t.rank>1||1===e.rank?1:e.shape[1],h=0;h<r.length;h++)for(var l=0;l<c;l++)1===r[h]?a[u++]=i[h]:a[u++]=o[h];return s},t.prototype.where=function(t){this.assertNotComplex([t],"where");var e=this.readSync(t.dataId);return Fr(t.shape,e)},t.prototype.topk=function(t,e,n){return this.assertNotComplex(t,"topk"),Kn(this.readSync(t.dataId),t.shape,t.dtype,e)},t.prototype.min=function(t,e){this.assertNotComplex(t,"min"),je("min",e,t.rank);for(var n=Fe(t.shape,e),r=n[0],i=n[1],o=xn(r,t.dtype),s=_(i),a=this.readSync(o.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var h=c*s,l=u[h],f=0;f<s;++f){var d=u[h+f];d<l&&(l=d)}a[c]=l}return o},t.prototype.minimum=function(t,e){return this.assertNotComplex([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.mod=function(t,e){return this.assertNotComplex([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},t.prototype.max=function(t,e){this.assertNotComplex(t,"max"),je("max",e,t.rank);for(var n=Fe(t.shape,e),r=n[0],i=n[1],o=xn(r,t.dtype),s=_(i),a=this.readSync(o.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var h=c*s,l=u[h],f=0;f<s;++f){var d=u[h+f];d>l&&(l=d)}a[c]=l}return o},t.prototype.maximum=function(t,e){return this.assertNotComplex([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.all=function(t,e){this.assertNotComplex(t,"all"),je("all",e,t.rank);for(var n=Fe(t.shape,e),r=n[0],i=n[1],o=xn(r,t.dtype),s=_(i),a=this.readSync(o.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var h=c*s,l=u[h],f=0;f<s;++f){var d=u[h+f];l=l&&d}a[c]=l}return o},t.prototype.any=function(t,e){this.assertNotComplex(t,"any"),je("any",e,t.rank);for(var n=Fe(t.shape,e),r=n[0],i=n[1],o=xn(r,t.dtype),s=_(i),a=this.readSync(o.dataId),u=this.readSync(t.dataId),c=0;c<a.length;++c){for(var h=c*s,l=u[h],f=0;f<s;++f){var d=u[h+f];l=l||d}a[c]=l}return o},t.prototype.squaredDifference=function(t,e){return this.assertNotComplex([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},t.prototype.ceil=function(t){this.assertNotComplex(t,"ceil");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return pt.make(t.shape,{values:n})},t.prototype.floor=function(t){this.assertNotComplex(t,"floor");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return pt.make(t.shape,{values:n})},t.prototype.sign=function(t){this.assertNotComplex(t,"x");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)e[r]<0?n[r]=-1:e[r]>0?n[r]=1:n[r]=0;return pt.make(t.shape,{values:n})},t.prototype.isNaN=function(t){this.assertNotComplex(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return pt.make(t.shape,{values:n},"bool")},t.prototype.isInf=function(t){this.assertNotComplex(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return pt.make(t.shape,{values:n},"bool")},t.prototype.isFinite=function(t){this.assertNotComplex(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return pt.make(t.shape,{values:n},"bool")},t.prototype.round=function(t){this.assertNotComplex(t,"round");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=Math.floor(e[r]);e[r]-i<.5?n[r]=Math.floor(e[r]):e[r]-i>.5?n[r]=Math.ceil(e[r]):n[r]=i%2==0?i:i+1}return pt.make(t.shape,{values:n})},t.prototype.exp=function(t){this.assertNotComplex(t,"exp");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return pt.make(t.shape,{values:n})},t.prototype.expm1=function(t){this.assertNotComplex(t,"expm1");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return pt.make(t.shape,{values:n})},t.prototype.log=function(t){this.assertNotComplex(t,"log");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=Math.log(i)}return pt.make(t.shape,{values:n})},t.prototype.log1p=function(t){this.assertNotComplex(t,"log1p");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=Math.log1p(i)}return pt.make(t.shape,{values:n})},t.prototype.sqrt=function(t){this.assertNotComplex(t,"sqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=Math.sqrt(i)}return pt.make(t.shape,{values:n})},t.prototype.rsqrt=function(t){this.assertNotComplex(t,"rsqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=1/Math.sqrt(i)}return pt.make(t.shape,{values:n})},t.prototype.square=function(t){this.assertNotComplex(t,"square");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=i*i}return pt.make(t.shape,{values:n})},t.prototype.reciprocal=function(t){this.assertNotComplex(t,"reciprocal");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return pt.make(t.shape,{values:n})},t.prototype.linear=function(t){return t},t.prototype.relu=function(t){this.assertNotComplex(t,"relu");for(var e=xn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e},t.prototype.prelu=function(t,e){return this.assertNotComplex([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return t<0?e*t:t})},t.prototype.elu=function(t){this.assertNotComplex(t,"elu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?i:Math.exp(i)-1}return pt.make(t.shape,{values:e})},t.prototype.eluDer=function(t,e){this.assertNotComplex([t,e],"eluDer");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId),o=0;o<r.length;++o){var s=r[o];n[o]=s>=1?i[o]:i[o]*(s+1)}return pt.make(e.shape,{values:n})},t.prototype.selu=function(t){this.assertNotComplex(t,"selu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return pt.make(t.shape,{values:e})},t.prototype.clip=function(t,e,n){this.assertNotComplex(t,"clip");for(var r=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var s=i[o];r[o]=s>n?n:s<e?e:s}return pt.make(t.shape,{values:r})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return pt.make(t.shape,{values:e})},t.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<t.size;++r){var i=n[2*r],o=n[2*r+1];e[r]=Math.hypot(i,o)}return pt.make(t.shape,{values:e})},t.prototype.int=function(t){this.assertNotComplex(t,"int");for(var e=new Int32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=n[r];return pt.make(t.shape,{values:e},"int32")},t.prototype.sigmoid=function(t){this.assertNotComplex(t,"sigmoid");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return pt.make(t.shape,{values:e})},t.prototype.softplus=function(t){this.assertNotComplex(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var o,s=r[i]>-e,a=r[i]<e,u=Math.exp(r[i]);o=a?u:s?r[i]:Math.log(1+u),n[i]=o}return pt.make(t.shape,{values:n})},t.prototype.sin=function(t){this.assertNotComplex(t,"sin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return pt.make(t.shape,{values:e})},t.prototype.cos=function(t){this.assertNotComplex(t,"cos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return pt.make(t.shape,{values:e})},t.prototype.tan=function(t){this.assertNotComplex(t,"tan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return pt.make(t.shape,{values:e})},t.prototype.asin=function(t){this.assertNotComplex(t,"asin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return pt.make(t.shape,{values:e})},t.prototype.acos=function(t){this.assertNotComplex(t,"acos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return pt.make(t.shape,{values:e})},t.prototype.atan=function(t){this.assertNotComplex(t,"atan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return pt.make(t.shape,{values:e})},t.prototype.atan2=function(t,e){return this.assertNotComplex([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},t.prototype.sinh=function(t){this.assertNotComplex(t,"sinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return pt.make(t.shape,{values:e})},t.prototype.cosh=function(t){this.assertNotComplex(t,"cosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return pt.make(t.shape,{values:e})},t.prototype.tanh=function(t){this.assertNotComplex(t,"tanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=A(n[r]);return pt.make(t.shape,{values:e})},t.prototype.asinh=function(t){this.assertNotComplex(t,"asinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return pt.make(t.shape,{values:e})},t.prototype.acosh=function(t){this.assertNotComplex(t,"acosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return pt.make(t.shape,{values:e})},t.prototype.atanh=function(t){this.assertNotComplex(t,"atanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return pt.make(t.shape,{values:e})},t.prototype.erf=function(t){this.assertNotComplex(t,"erf");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var i=n[r],o=1/(1+.3275911*i);e[r]=1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-i*i)}return pt.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0),this.assertNotComplex(t,"step");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=0;i<r.length;++i){var o=r[i];isNaN(o)?n[i]=NaN:n[i]=o>0?1:e}return pt.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n){this.assertNotComplex([t,e],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,s=n.dilationWidth,a=n.padInfo.left,u=n.padInfo.top,c=dr(n.outShape,t.dtype),h=this.readSync(t.dataId),l=this.readSync(e.dataId),f=c.values,d=0;d<n.batchSize;++d)for(var p=d*t.strides[0],m=d*c.strides[0],v=0;v<n.outHeight;++v)for(var g=m+v*c.strides[1],y=v*n.strideHeight-u,b=0;b<r;b++){var x=y+b*o;if(!(x<0||x>=n.inHeight))for(var w=b*e.strides[0],E=p+x*t.strides[1],_=0;_<n.outWidth;++_)for(var S=g+_*n.outChannels,T=_*n.strideWidth-a,A=0;A<i;A++){var M=T+A*s;if(!(M<0||M>=n.inWidth))for(var C=w+A*e.strides[1],O=E+M*n.inChannels,N=C,k=0;k<n.inChannels;++k){for(var R=h[O+k],P=0;P<n.outChannels;++P)f[S+P]+=R*l[N+P];N+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,i=n.filterHeight,o=n.filterWidth,s=n.dilationDepth,a=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,h=n.padInfo.left,l=n.padInfo.top,f=dr(n.outShape,t.dtype),d=this.readSync(t.dataId),p=this.readSync(e.dataId),m=f.values,v=0;v<n.batchSize;++v)for(var g=v*t.strides[0],y=v*f.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*f.strides[1],w=b*n.strideDepth-c,E=0;E<r;E++){var _=w+E*s;if(!(_<0||_>=n.inDepth))for(var S=E*e.strides[0],T=g+_*t.strides[1],A=0;A<n.outHeight;++A)for(var M=x+A*f.strides[2],C=A*n.strideHeight-l,O=0;O<i;O++){var N=C+O*a;if(!(N<0||N>=n.inHeight))for(var k=S+O*e.strides[1],R=T+N*t.strides[2],P=0;P<n.outWidth;++P)for(var I=M+P*n.outChannels,D=P*n.strideWidth-h,L=0;L<o;L++){var B=D+L*u;if(!(B<0||B>=n.inWidth))for(var F=k+L*e.strides[2],z=R+B*n.inChannels,j=F,U=0;U<n.inChannels;++U){for(var Y=d[z+U],W=0;W<n.outChannels;++W)m[I+W]+=Y*p[j+W];j+=n.outChannels}}}}return f.toTensor()},t.prototype.conv2dDerInput=function(t,e,n){this.assertNotComplex([t,e],"conv2dDerInput");for(var r=dr(n.inShape,"float32"),i=r.values,o=r.strides,s=o[0],a=o[1],u=o[2],c=this.readSync(t.dataId),h=t.strides,l=h[0],f=h[1],d=h[2],p=this.readSync(e.dataId),m=e.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,E=n.inChannels,_=n.inHeight,S=n.inWidth,T=n.outChannels,A=n.outHeight,M=n.outWidth,C=n.strideHeight,O=n.strideWidth,N=x-1-n.padInfo.top,k=w-1-n.padInfo.left,R=0;R<b;++R)for(var P=0;P<E;++P)for(var I=0;I<_;++I)for(var D=I-N,L=Math.max(0,Math.ceil(D/C)),B=Math.min(A,(x+D)/C),F=0;F<S;++F){for(var z=F-k,j=Math.max(0,Math.ceil(z/O)),U=Math.min(M,(w+z)/O),Y=0,W=L;W<B;++W)for(var X=W*C-D,G=j;G<U;++G)for(var V=l*R+f*W+d*G,q=v*(x-1-X)+g*(w-1-(G*O-z))+y*P,H=0;H<T;++H)Y+=c[V+H]*p[q+H];i[s*R+a*I+u*F+P]=Y}return r.toTensor()},t.prototype.conv3dDerInput=function(t,e,n){for(var r=dr(n.inShape,"float32"),i=r.values,o=r.strides,s=o[0],a=o[1],u=o[2],c=o[3],h=this.readSync(t.dataId),l=t.strides,f=l[0],d=l[1],p=l[2],m=l[3],v=this.readSync(e.dataId),g=e.strides,y=g[0],b=g[1],x=g[2],w=g[3],E=n.batchSize,_=n.filterDepth,S=n.filterHeight,T=n.filterWidth,A=n.inChannels,M=n.inDepth,C=n.inHeight,O=n.inWidth,N=n.outChannels,k=n.outDepth,R=n.outHeight,P=n.outWidth,I=n.strideDepth,D=n.strideHeight,L=n.strideWidth,B=_-1-n.padInfo.front,F=S-1-n.padInfo.top,z=T-1-n.padInfo.left,j=0;j<E;++j)for(var U=0;U<A;++U)for(var Y=0;Y<M;++Y)for(var W=Y-B,X=Math.max(0,Math.ceil(W/I)),G=Math.min(k,(_+W)/I),V=0;V<C;++V)for(var q=V-F,H=Math.max(0,Math.ceil(q/D)),K=Math.min(R,(S+q)/D),$=0;$<O;++$){for(var J=$-z,Z=Math.max(0,Math.ceil(J/L)),Q=Math.min(P,(T+J)/L),tt=0,et=X;et<G;++et)for(var nt=et*I-W,rt=H;rt<K;++rt)for(var it=rt*D-q,ot=Z;ot<Q;++ot)for(var st=f*j+d*et+p*rt+m*ot,at=y*(_-1-nt)+b*(S-1-it)+x*(T-1-(ot*L-J))+w*U,ut=0;ut<N;++ut)tt+=h[st+ut]*v[at+ut];i[s*j+a*Y+u*V+c*$+U]=tt}return r.toTensor()},t.prototype.conv2dDerFilter=function(t,e,n){this.assertNotComplex([t,e],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,s=n.filterWidth,a=dr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,h=this.bufferSync(t),l=this.bufferSync(e),f=0;f<o;++f)for(var d=Math.max(0,Math.ceil((c-f)/r)),p=Math.min(n.outHeight,(n.inHeight+c-f)/r),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((u-m)/i)),g=Math.min(n.outWidth,(n.inWidth+u-m)/i),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var x=0,w=0;w<n.batchSize;++w)for(var E=d;E<p;++E)for(var _=f+E*r-c,S=v;S<g;++S){var T=m+S*i-u;x+=h.get(w,_,T,y)*l.get(w,E,S,b)}a.set(x,f,m,y,b)}return a.toTensor()},t.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,s=n.filterDepth,a=n.filterHeight,u=n.filterWidth,c=dr(n.filterShape,"float32"),h=c.values,l=c.strides,f=l[0],d=l[1],p=l[2],m=l[3],v=this.readSync(e.dataId),g=e.strides,y=g[0],b=g[1],x=g[2],w=g[3],E=this.readSync(t.dataId),_=t.strides,S=_[0],T=_[1],A=_[2],M=_[3],C=n.padInfo.front,O=n.padInfo.left,N=n.padInfo.top,k=0;k<s;++k)for(var R=Math.max(0,Math.ceil((C-k)/r)),P=Math.min(n.outDepth,(n.inDepth+C-k)/r),I=k*f,D=0;D<a;++D)for(var L=Math.max(0,Math.ceil((N-D)/i)),B=Math.min(n.outHeight,(n.inHeight+N-D)/i),F=D*d+I,z=0;z<u;++z)for(var j=Math.max(0,Math.ceil((O-z)/o)),U=Math.min(n.outWidth,(n.inWidth+O-z)/o),Y=z*p+F,W=0;W<n.inChannels;++W)for(var X=W*m+Y,G=0;G<n.outChannels;++G){for(var V=0,q=0;q<n.batchSize;++q)for(var H=q*S,K=q*y,$=R;$<P;++$)for(var J=(k+$*r-C)*T+H,Z=$*b+K,Q=L;Q<B;++Q)for(var tt=(D+Q*i-N)*A+J,et=Q*x+Z,nt=j;nt<U;++nt){var rt=nt*w+et;V+=E[(z+nt*o-O)*M+tt+W]*v[rt+G]}h[X+G]=V}return c.toTensor()},t.prototype.depthwiseConv2D=function(t,e,n){this.assertNotComplex([t,e],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,s=n.dilationWidth,a=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,h=dr(n.outShape,t.dtype),l=this.readSync(t.dataId),f=this.readSync(e.dataId),d=h.values,p=0;p<n.batchSize;++p)for(var m=p*t.strides[0],v=p*h.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*h.strides[1],b=g*n.strideHeight-a,x=0;x<r;++x){var w=b+x*o;if(!(w<0||w>=n.inHeight))for(var E=x*e.strides[0],_=m+w*t.strides[1],S=0;S<n.outWidth;++S)for(var T=y+S*h.strides[2],A=S*n.strideWidth-u,M=0;M<i;++M){var C=A+M*s;if(!(C<0||C>=n.inWidth))for(var O=E+M*e.strides[1],N=_+C*n.inChannels,k=T,R=O,P=0;P<n.inChannels;++P){for(var I=l[N+P],D=0;D<c;++D)d[k+D]+=I*f[R+D];k+=c,R+=c}}}return h.toTensor()},t.prototype.depthwiseConv2DDerInput=function(t,e,n){this.assertNotComplex([t,e],"depthwiseConv2DDerInput");for(var r=dr(n.inShape,"float32"),i=r.values,o=r.strides,s=o[0],a=o[1],u=o[2],c=this.readSync(t.dataId),h=t.strides,l=h[0],f=h[1],d=h[2],p=this.readSync(e.dataId),m=e.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,E=n.inChannels,_=n.inHeight,S=n.inWidth,T=n.outChannels,A=n.outHeight,M=n.outWidth,C=n.strideHeight,O=n.strideWidth,N=x-1-n.padInfo.top,k=w-1-n.padInfo.left,R=T/E,P=0;P<b;++P)for(var I=0;I<E;++I)for(var D=0;D<_;++D)for(var L=D-N,B=Math.max(0,Math.ceil(L/C)),F=Math.min(A,(x+L)/C),z=0;z<S;++z){for(var j=z-k,U=Math.max(0,Math.ceil(j/O)),Y=Math.min(M,(w+j)/O),W=0,X=B;X<F;++X)for(var G=X*C-L,V=U;V<Y;++V)for(var q=l*P+f*X+d*V,H=v*(x-1-G)+g*(w-1-(V*O-j))+y*I,K=0;K<R;++K)W+=c[q+(I*R+K)]*p[H+K];i[s*P+a*D+u*z+I]=W}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){this.assertNotComplex([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,s=n.filterWidth,a=dr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,h=n.outChannels/n.inChannels,l=this.bufferSync(t),f=this.bufferSync(e),d=0;d<o;++d)for(var p=Math.max(0,Math.ceil((c-d)/r)),m=Math.min(n.outHeight,(n.inHeight+c-d)/r),v=0;v<s;++v)for(var g=Math.max(0,Math.ceil((u-v)/i)),y=Math.min(n.outWidth,(n.inWidth+u-v)/i),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/h),w=b%h,E=0,_=0;_<n.batchSize;++_)for(var S=p;S<m;++S)for(var T=d+S*r-c,A=g;A<y;++A){var M=v+A*i-u;E+=l.get(_,T,M,x)*f.get(_,S,A,b)}a.set(E,d,v,x,w)}return a.toTensor()},t.prototype.tile=function(t,e){this.assertNotComplex(t,"tile");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=dr(n,t.dtype),o=this.bufferSync(t);for(r=0;r<i.values.length;++r){for(var s=i.indexToLoc(r),a=new Array(t.rank),u=0;u<a.length;u++)a[u]=s[u]%t.shape[u];var c=o.locToIndex(a);i.values[r]=o.values[c]}return i.toTensor()},t.prototype.pad=function(t,e,n){this.assertNotComplex(t,"pad");var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),i=e.map(function(t){return t[0]}),o=this.bufferSync(t),s=dr(r,t.dtype);0!==n&&s.values.fill(n);for(var a=0;a<t.size;a++){var u=o.indexToLoc(a),c=u.map(function(t,e){return t+i[e]});s.set.apply(s,[o.get.apply(o,u)].concat(c))}return s.toTensor()},t.prototype.transpose=function(t,e){this.assertNotComplex(t,"transpose");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var i=this.readSync(t.dataId),o=dr(n,t.dtype),s=this.bufferSync(t);for(r=0;r<t.size;++r){for(var a=s.indexToLoc(r),u=new Array(a.length),c=0;c<u.length;c++)u[c]=a[e[c]];var h=o.locToIndex(u);o.values[h]=i[r]}return o.toTensor()},t.prototype.gather=function(t,e,n){this.assertNotComplex([t,e],"gather");var r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;for(var o=dr(r,t.dtype),s=this.bufferSync(t),a=0;a<o.size;++a){var u=o.indexToLoc(a),c=u.slice();c[n]=i[u[n]];var h=s.locToIndex(c);o.values[a]=s.values[h]}return o.toTensor()},t.prototype.batchToSpaceND=function(t,e,n){this.assertNotComplex([t],"batchToSpaceND");var r=e.reduce(function(t,e){return t*e}),i=ke(t.shape,e,r),o=Re(i.length,e.length),s=Pe(t.shape,e,r),a=Ie(n,e.length),u=De(s,n,e.length);return t.reshape(i).transpose(o).reshape(s).slice(a,u)},t.prototype.spaceToBatchND=function(t,e,n){this.assertNotComplex([t],"spaceToBatchND");var r=e.reduce(function(t,e){return t*e}),i=[[0,0]];i.push.apply(i,n);for(var o=1+e.length;o<t.shape.length;++o)i.push([0,0]);var s=t.pad(i),a=ke(s.shape,e,r,!1),u=Re(a.length,e.length,!1),c=Pe(s.shape,e,r,!1);return s.reshape(a).transpose(u).reshape(c)},t.prototype.pool=function(t,e,n){this.assertNotComplex(t,"pool");for(var r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,a=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,h=e.padInfo.left,l="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(t.dataId),d=dr(e.outShape,t.dtype),p=d.values,m=e.outShape[1]*e.outShape[2]*e.outShape[3],v=e.outShape[2]*e.outShape[3],g=e.outShape[3],y=0;y<e.batchSize;++y)for(var b=y*m,x=y*t.strides[0],w=0;w<e.inChannels;++w)for(var E=0;E<e.outHeight;++E)for(var _=E*r-c,S=Math.max(0,_),T=Math.min(e.inHeight,a+_),A=b+E*v,M=0;M<e.outWidth;++M){for(var C=M*i-h,O=Math.max(0,C),N=Math.min(e.inWidth,u+C),k=l,R=0,P=0,I=S;I<T;I+=o){for(var D=x+I*t.strides[1],L=O;L<N;L+=s){var B=f[D+L*t.strides[2]+w];"max"===n&&B>k?k=B:"avg"===n&&(R+=B,P++)}if(isNaN(k))break}p[A+M*g+w]="avg"===n?R/P:k}return d.toTensor()},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var n=dr(e.outShape,"int32"),r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,a=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,h=e.padInfo.left,l=this.bufferSync(t),f=0;f<e.batchSize;++f)for(var d=0;d<e.inChannels;++d)for(var p=0;p<e.outHeight;++p){for(var m=p*r-c,v=m;v<0;)v+=o;for(var g=Math.min(e.inHeight,a+m),y=0;y<e.outWidth;++y){for(var b=y*i-h,x=b;x<0;)x+=s;for(var w=Math.min(e.inWidth,u+b),E=Number.NEGATIVE_INFINITY,_=-1,S=v;S<g;S+=o)for(var T=S-m,A=x;A<w;A+=s){var M=A-b,C=l.get(f,S,A,d);C>E&&(E=C,_=T*u+M)}n.set(_,f,p,y,d)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(t,e,n,r){this.assertNotComplex([e,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(e,r),o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,l=h-1-r.padInfo.left,f=c-1-r.padInfo.top,d=dr(e.shape,"float32"),p=this.bufferSync(i),m=this.bufferSync(t),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-f,w=b-l,E=0,_=0;_<c;_+=a){var S=(x+_)/o;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var T=0;T<h;T+=u){var A=(w+T)/s;if(!(A<0||A>=r.outWidth||Math.floor(A)!==A)){var M=c*h-1-p.get(v,S,A,g)===_*h+T?1:0;0!==M&&(E+=m.get(v,S,A,g)*M)}}}d.set(E,v,y,b,g)}return d.toTensor()},t.prototype.avgPoolBackprop=function(t,e,n){this.assertNotComplex([t,e],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,s=n.filterWidth,a=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,h=n.effectiveFilterWidth,l=h-1-n.padInfo.left,f=c-1-n.padInfo.top,d=dr(e.shape,"float32"),p=1/(o*s),m=this.bufferSync(t),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-f,w=b-l,E=0,_=0;_<c;_+=a){var S=(x+_)/r;if(!(S<0||S>=n.outHeight||Math.floor(S)!==S))for(var T=0;T<h;T+=u){var A=(w+T)/i;A<0||A>=n.outWidth||Math.floor(A)!==A||(E+=m.get(v,S,A,g))}}d.set(E*p,v,y,b,g)}return d.toTensor()},t.prototype.cast=function(t,e){return zn(t,e,this)},t.prototype.reshape=function(t,e){return jn(t,e)},t.prototype.avgPool=function(t,e){return this.assertNotComplex(t,"avgPool"),this.pool(t,e,"avg").toFloat()},t.prototype.resizeBilinear=function(t,e,n,r){this.assertNotComplex(t,"resizeBilinear");for(var i=t.shape,o=i[0],s=i[1],a=i[2],u=i[3],c=this.readSync(t.dataId),h=new Float32Array(_([o,e,n,u])),l=[r&&e>1?s-1:s,r&&n>1?a-1:a],f=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=0,p=l[0]/f[0],m=l[1]/f[1],v=0;v<o;v++)for(var g=0;g<e;g++)for(var y=p*g,b=Math.floor(y),x=y-b,w=Math.min(s-1,Math.ceil(y)),E=v*t.strides[0]+b*t.strides[1],S=v*t.strides[0]+w*t.strides[1],T=0;T<n;T++)for(var A=m*T,M=Math.floor(A),C=A-M,O=Math.min(a-1,Math.ceil(A)),N=E+M*t.strides[2],k=S+M*t.strides[2],R=E+ +O*t.strides[2],P=S+O*t.strides[2],I=0;I<u;I++){var D=c[N+I],L=c[k+I],B=D+(c[R+I]-D)*C,F=B+(L+(c[P+I]-L)*C-B)*x;h[d++]=F}return dn(h,[o,e,n,u])},t.prototype.resizeBilinearBackprop=function(t,e,n){this.assertNotComplex([t,e],"resizeBilinearBackprop");for(var r=e.shape,i=r[0],o=r[1],s=r[2],a=r[3],u=t.shape,c=u[1],h=u[2],l=new Float32Array(i*o*s*a),f=[n&&c>1?o-1:o,n&&h>1?s-1:s],d=[n&&c>1?c-1:c,n&&h>1?h-1:h],p=f[0]/d[0],m=f[1]/d[1],v=this.readSync(t.dataId),g=0,y=0;y<i;y++)for(var b=y*e.strides[0],x=0;x<c;x++)for(var w=x*p,E=Math.floor(w),_=Math.min(Math.ceil(w),o-1),S=b+E*e.strides[1],T=b+_*e.strides[1],A=w-E,M=1-A,C=0;C<h;C++)for(var O=C*m,N=Math.floor(O),k=Math.min(Math.ceil(O),s-1),R=O-N,P=1-R,I=S+N*e.strides[2],D=S+k*e.strides[2],L=T+N*e.strides[2],B=T+k*e.strides[2],F=M*P,z=M*R,j=A*P,U=A*R,Y=0;Y<a;Y++){var W=v[g++];l[I+Y]+=W*F,l[D+Y]+=W*z,l[L+Y]+=W*j,l[B+Y]+=W*U}return yn(l,[i,s,o,a],e.dtype)},t.prototype.resizeNearestNeighbor=function(t,e,n,r){this.assertNotComplex(t,"resizeNearestNeighbor");for(var i=t.shape,o=i[0],s=i[1],a=i[2],u=i[3],c=this.readSync(t.dataId),h=new Float32Array(o*e*n*u),l=[r&&e>1?s-1:s,r&&n>1?a-1:a],f=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=l[0]/f[0],p=l[1]/f[1],m=0,v=0;v<o;v++)for(var g=v*t.strides[0],y=0;y<e;y++)for(var b=d*y,x=g+Math.min(s-1,r?Math.round(b):Math.floor(b))*t.strides[1],w=0;w<n;w++)for(var E=p*w,_=x+Math.min(a-1,r?Math.round(E):Math.floor(E))*t.strides[2],S=0;S<u;S++){var T=c[_+S];h[m++]=T}return dn(h,[o,e,n,u],t.dtype)},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){this.assertNotComplex([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,i=r[0],o=r[1],s=r[2],a=r[3],u=t.shape,c=u[1],h=u[2],l=new Float32Array(i*o*s*a),f=this.readSync(t.dataId),d=[n&&c>1?o-1:o,n&&h>1?s-1:s],p=[n&&c>1?c-1:c,n&&h>1?h-1:h],m=d[0]/p[0],v=d[1]/p[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<i;w++)for(var E=w*e.strides[0],_=0;_<o;_++)for(var S=E+_*e.strides[1],T=Math.floor(_*g),A=Math.floor(T-b/2),M=0;M<s;M++)for(var C=S+M*e.strides[2],O=Math.floor(M*y),N=Math.floor(O-x/2),k=0;k<a;k++){for(var R=0,P=0;P<b;P++){var I=P+A;if(!(I<0||I>=c)){var D=E+I*t.strides[1],L=I*m;if(_===Math.min(o-1,n?Math.round(L):Math.floor(L)))for(var B=0;B<x;B++){var F=B+N;if(!(F<0||F>=h)){var z=D+F*t.strides[2],j=F*v;M===Math.min(s-1,n?Math.round(j):Math.floor(j))&&(R+=f[z+k])}}}}l[C+k]=R}return yn(l,e.shape,e.dtype)},t.prototype.batchNormalization=function(t,e,n,r,i,o){this.assertNotComplex([t,e,n,i,o],"batchNorm");for(var s=this.readSync(t.dataId),a=this.readSync(e.dataId),u=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),h=o?this.readSync(o.dataId):new Float32Array([0]),l=new Float32Array(s.length),f=h.length,d=c.length,p=u.length,m=a.length,v=0,g=0,y=0,b=0,x=0;x<s.length;++x)l[x]=h[v++]+(s[x]-a[g++])*c[y++]/Math.sqrt(u[b++]+r),v>=f&&(v=0),g>=m&&(g=0),y>=d&&(y=0),b>=p&&(b=0);return yn(l,t.shape)},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){this.assertNotComplex(t,"localResponseNormalization4D");var o=t.shape[3],s=o-1,a=this.readSync(t.dataId),u=t.size,c=new Float32Array(u);function h(t){for(var n=t%o,r=t-n+Math.max(0,n-e),i=t-n+Math.min(n+e,s),u=0;r<=i;r++){var c=a[r];u+=c*c}return u}for(var l=0;l<u;l++){var f=h(l),d=a[l]*Math.pow(n+r*f,-i);c[l]=d}return yn(c,t.shape)},t.prototype.LRNGrad=function(t,e,n,r,i,o,s){this.assertNotComplex(t,"LRNGrad");for(var a=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),h=this.readSync(n.dataId),l=new Float32Array(t.size),f=t.size,d=0;d<f;d++){for(var p=d%a,m=d-p+Math.max(0,p-r),v=d-p+Math.min(a,p+r+1),g=0,y=m;y<v;y++)g+=Math.pow(c[y],2);for(g=o*g+i,y=m;y<v;y++){var b=-2*o*s*c[y]*h[d]/g;d===y&&(b+=Math.pow(g,-s)),b*=u[d],l[y]+=b}}return yn(l,t.shape)},t.prototype.multinomial=function(t,e,n,r){this.assertNotComplex(t,"multinomial");for(var i=e?t:un(t),o=i.shape[0],s=i.shape[1],a=xn([o,n],"int32"),u=this.readSync(a.dataId),c=this.readSync(i.dataId),h=0;h<o;++h){var l=h*s,f=new Float32Array(s-1);f[0]=c[l];for(var d=1;d<f.length;++d)f[d]=f[d-1]+c[l+d];for(var p=hr(r.toString()),m=h*n,v=0;v<n;++v){var g=p();u[m+v]=f.length;for(var y=0;y<f.length;y++)if(g<f[y]){u[m+v]=y;break}}}return a},t.prototype.oneHot=function(t,e,n,r){this.assertNotComplex(t,"oneHot");var i=new Float32Array(t.size*e);i.fill(r);for(var o=this.readSync(t.dataId),s=0;s<t.size;++s)o[s]>=0&&o[s]<e&&(i[s*e+o[s]]=n);return vn(i,[t.size,e],"int32")},t.prototype.nonMaxSuppression=function(t,e,n,r,i){return this.assertNotComplex(t,"nonMaxSuppression"),Vn(this.readSync(t.dataId),this.readSync(e.dataId),n,r,i)},t.prototype.fft=function(t){return this.fftBatch(t,!1)},t.prototype.ifft=function(t){return this.fftBatch(t,!0)},t.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],i=dr(t.shape,"float32"),o=dr(t.shape,"float32"),s=ln(t).as2D(n,r),a=fn(t).as2D(n,r),u=0;u<n;u++)for(var c=s.slice([u,0],[1,r]),h=a.slice([u,0],[1,r]),l=hn(c,h),f=this.readSync(this.fftImpl(l,e).dataId),d=0;d<r;d++){var p=Wn(f,d);i.values[u*r+d]=p.real,o.values[u*r+d]=p.imag}return hn(i.toTensor(),o.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(i=hn(ln(i).div(pn(r)),fn(i).div(pn(r)))),i}var o=this.readSync(t.dataId),s=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(o,r,e));return hn(s.real,s.imag).as2D(t.shape[0],t.shape[1])},t.prototype.isExponentOf2=function(t){return 0==(t&t-1)},t.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=this.readSync(t.dataId),i=e/2,o=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}(r),s=hn(o.real,o.imag).as1D(),a=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}(r),u=hn(a.real,a.imag).as1D();s=this.fftRadix2(s,i,n),u=this.fftRadix2(u,i,n);var c=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),i=0;i<Math.ceil(t/2);i++){var o=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}(e,n),h=hn(c.real,c.imag).mul(u),l=s.add(h),f=s.sub(h),d=ln(l).concat(ln(f)),p=fn(l).concat(fn(f));return hn(d,p).as1D()},t.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),i=0;i<e;i++){for(var o=0,s=0,a=0;a<e;a++){var u=Gn(i*a,e,n),c=Wn(t,a);o+=c.real*u.real-c.imag*u.imag,s+=c.real*u.imag+c.imag*u.real}n&&(o/=e,s/=e),Xn(r,o,s,i)}return r},t.prototype.depthToSpace=function(t,e,n){b("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),b(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});for(var r=t.shape[0],i=t.shape[1],o=t.shape[2],s=t.shape[3],a=i*e,u=o*e,c=s/(e*e),h=this.readSync(t.dataId),l=new Float32Array(r*a*u*c),f=0,d=0;d<r;++d)for(var p=0;p<a;++p)for(var m=Math.floor(p/e),v=p%e,g=0;g<u;++g)for(var y=Math.floor(g/e),x=(v*e+g%e)*c,w=0;w<c;++w){var E=w+x+s*(y+o*(m+i*d));l[f++]=h[E]}return yn(l,[r,a,u,c])},t.prototype.broadcastedBinaryOp=function(t,e,n,r){var i=Cn(t.shape,e.shape),o=dr(i,n),s=this.readSync(t.dataId),a=this.readSync(e.dataId),u=An(t.shape,i),c=An(e.shape,i),h=o.values;if(u.length+c.length===0)for(var l=0;l<h.length;++l)h[l]=r(s[l%s.length],a[l%a.length]);else{var f=this.bufferSync(t),d=this.bufferSync(e),p=function(n){var i=o.indexToLoc(n),l=i.slice(-t.rank);u.forEach(function(t){return l[t]=0});var p=f.locToIndex(l),m=i.slice(-e.rank);c.forEach(function(t){return m[t]=0});var v=d.locToIndex(m);h[n]=r(s[p],a[v])};for(l=0;l<h.length;++l)p(l)}return o.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=Cn(t.shape,e.shape),i=dr(r,"float32"),o=dr(r,"float32"),s=this.readSync(t.dataId),a=this.readSync(e.dataId),u=An(t.shape,r),c=An(e.shape,r),h=i.values,l=o.values;if(u.length+c.length===0)for(var f=0;f<h.length;f++){var d=f%s.length,p=f%a.length,m=n(s[2*d],s[2*d+1],a[2*p],a[2*p+1]);h[f]=m.real,l[f]=m.imag}else{var v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),y=function(r){var o=i.indexToLoc(r),f=o.slice(-t.rank);u.forEach(function(t){return f[t]=0});var d=v.locToIndex(f),p=o.slice(-e.rank);c.forEach(function(t){return p[t]=0});var m=g.locToIndex(p),y=n(s[2*d],s[2*d+1],a[2*m],a[2*m+1]);h[r]=y.real,l[r]=y.imag};for(f=0;f<h.length;f++)y(f)}return this.complex(i.toTensor(),o.toTensor())},t.prototype.split=function(t,e,n){return Hn(t,e,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(t,e,n,r,i,o){for(var s=t.shape,a=s[0],u=s[1],c=s[2],h=s[3],l=e.shape[0],f=r[0],d=r[1],p=dr([l,f,d,h],t.dtype),m=this.readSync(e.dataId),v=this.readSync(n.dataId),g=this.readSync(t.dataId),y=t.strides,b=p.strides,x=0;x<l;x++){var w=4*x,E=m[w],_=m[w+1],S=m[w+2],T=m[w+3],A=v[x];if(!(A>=a))for(var M=f>1?(S-E)*(u-1)/(f-1):0,C=d>1?(T-_)*(c-1)/(d-1):0,O=0;O<f;O++){var N=f>1?E*(u-1)+O*M:.5*(E+S)*(u-1);if(N<0||N>u-1)for(var k=0;k<d;k++)for(var R=0;R<h;R++){var P=R+k*b[2]+O*b[1]+x*b[0];p.values[P]=o}else if("bilinear"===i){var I=Math.floor(N),D=Math.ceil(N),L=N-I;for(k=0;k<d;k++)if((G=d>1?_*(c-1)+k*C:.5*(_+T)*(c-1))<0||G>c-1)for(R=0;R<h;R++)P=R+k*b[2]+O*b[1]+x*b[0],p.values[P]=o;else{var B=Math.floor(G),F=Math.ceil(G),z=G-B;for(R=0;R<h;R++){var j=g[P=R+B*y[2]+I*y[1]+A*y[0]],U=g[P=R+F*y[2]+I*y[1]+A*y[0]],Y=g[P=R+B*y[2]+D*y[1]+A*y[0]],W=j+(U-j)*z,X=Y+(g[P=R+F*y[2]+D*y[1]+A*y[0]]-Y)*z;P=R+k*b[2]+O*b[1]+x*b[0],p.values[P]=W+(X-W)*L}}}else for(k=0;k<d;++k){var G;if((G=d>1?_*(c-1)+k*C:.5*(_+T)*(c-1))<0||G>c-1)for(R=0;R<h;R++)P=R+k*b[2]+O*b[1]+x*b[0],p.values[P]=o;else{var V=Math.round(G),q=Math.round(N);for(R=0;R<h;R++){var H=R+V*y[2]+q*y[1]+A*y[0],K=R+k*b[2]+O*b[1]+x*b[0];p.values[K]=g[H]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(t,e,n,r){var i=Ke(0,t,n),o=i.sliceRank,s=i.numUpdates,a=i.sliceSize,u=i.strides,c=i.outputSize;return this.scatter(t,e,n,c,a,s,o,u,r,!1)},t.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],i=Ve(t,e),o=i[0],s=i[1],a=i[2],u=i[3];if(0===s)return dn([],o,t.dtype);for(var c=new ht([s,a],t.dtype),h=this.readSync(e.dataId),l=this.readSync(t.dataId),f=0;f<s;f++){for(var d=[],p=0,m=0;m<r;m++){var v=h[f*r+m];p+=v*u[m],d.push(v)}if(p<0||p>=t.size/a)throw new Error("Invalid indices: "+d+" does not index into "+t.shape);for(var g=0;g<a;g++)c.values[f*a+g]=l[p*a+g]}return c.toTensor().reshape(o)},t.prototype.scatterND=function(t,e,n){var r=Ke(0,t,n),i=r.sliceRank,o=r.numUpdates,s=r.sliceSize,a=r.strides,u=r.outputSize,c=pn(0);return this.scatter(t,e,n,u,s,o,i,a,c,!0)},t.prototype.fill=function(t,e,n){var r=I(n=n||G(e),_(t));return r.fill(e),pt.make(t,{values:r},n)},t.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},t.prototype.zerosLike=function(t){var e=I(t.dtype,_(t.shape));return pt.make(t.shape,{values:e},t.dtype)},t.prototype.linspace=function(t,e,n){return Un(t,e,n)},t.prototype.scatter=function(t,e,n,r,i,o,s,a,u,c){var h=[r/i,i],l=this.readSync(t.dataId),f=this.readSync(e.dataId);if(0===r)return dn([],n,e.dtype);var d=new ht(h,e.dtype);d.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<o;p++){for(var m=[],v=0,g=0;g<s;g++){var y=l[p*s+g];m.push(y),v+=y*a[g]}if(v<0||v>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)c?d.values[v*i+b]+=f[p*i+b]:d.values[v*i+b]=0===e.rank?f[0]:f[p*i+b]}return d.toTensor().reshape(n)},t}();Nt.registerBackend("cpu",function(){return new kc},1);var Rc=function(){function t(){}return t.prototype.fetch=function(t,e){return fetch(t,e)},t}();l.get("IS_BROWSER")&&l.setPlatform("browser",new Rc);var Pc,Ic=function(){function t(){}return t.prototype.fetch=function(t,e){return null!=l.global.fetch?l.global.fetch(t,e):(null==Pc&&(Pc=n(2180)),Pc(t,e))},t}();l.get("IS_NODE")&&l.setPlatform("node",new Ic);var Dc={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Lc(t,e){for(var n={},r=0,i=function(e){var i=e.name,o=e.dtype,s=e.shape,a=_(s),u=void 0;if("quantization"in e){var c=e.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var h=Dc[c.dtype],l=t.slice(r,r+a*h),f="uint8"===c.dtype?new Uint8Array(l):new Uint16Array(l);if("float32"===o)u=Float32Array.from(f,function(t){return t*c.scale+c.min});else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);u=Int32Array.from(f,function(t){return Math.round(t*c.scale+c.min)})}r+=a*h}else{var d=Dc[o];if(l=t.slice(r,r+a*d),"float32"===o)u=new Float32Array(l);else if("int32"===o)u=new Int32Array(l);else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);u=new Uint8Array(l)}r+=a*d}var p=void 0;if("float32"===o)p=dn(u,s,"float32");else if("int32"===o)p=dn(u,s,"int32");else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);p=dn(u,s,"bool")}n[i]=p},o=0,s=e;o<s.length;o++)i(s[o]);return n}function Bc(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(t){r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}var Fc=void 0!==i&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function zc(t){return Fc?i.byteLength(t):new Blob([t]).size}function jc(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function Uc(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Yc(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:zc(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:zc(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Wc=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(t){var n=t(e,r);null!==n&&i.push(n)}),i},t}(),Xc="://",Gc=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){b(null!=e,function(){return"scheme must not be undefined or null."}),e.endsWith(Xc)&&(e=e.slice(0,e.indexOf(Xc))),b(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();b(null==r.managers[e],function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Vc(t){if(-1===t.indexOf(Xc))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Gc.getSchemes().join(","));return{scheme:t.split(Xc)[0],path:t.split(Xc)[1]}}function qc(t,e,n){return void 0===n&&(n=!1),c(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,f;return h(this,function(h){switch(h.label){case 0:return b(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),b((r=Wc.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),b(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],b((o=Wc.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),b(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),s=o[0],a=Vc(t).scheme,u=Vc(t).path,c=a===Vc(t).scheme,[4,i.load()];case 1:return l=h.sent(),n&&c?[4,Gc.getManager(a).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,s.save(l)];case 4:return f=h.sent(),!n||c?[3,6]:[4,Gc.getManager(a).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var Hc="models_store",Kc="model_info_store";function $c(){if(!l.getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Jc(t){var e=t.result;e.createObjectStore(Hc,{keyPath:"modelPath"}),e.createObjectStore(Kc,{keyPath:"modelPath"})}var Zc=function(){function t(t){if(this.indexedDB=$c(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return c(this,void 0,void 0,function(){return h(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return c(this,void 0,void 0,function(){return h(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Jc(i)},i.onsuccess=function(){var o=i.result;if(null==e){var s=o.transaction(Hc,"readonly"),a=s.objectStore(Hc).get(n.modelPath);a.onsuccess=function(){if(null==a.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(a.result.modelArtifacts)},a.onerror=function(t){return o.close(),r(a.error)},s.oncomplete=function(){return o.close()}}else{var u,c=Yc(e),h=o.transaction(Kc,"readwrite"),l=h.objectStore(Kc),f=l.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var i=(u=o.transaction(Hc,"readwrite")).objectStore(Hc).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:c});i.onsuccess=function(){return t({modelArtifactsInfo:c})},i.onerror=function(t){var e=(l=h.objectStore(Kc)).delete(n.modelPath);e.onsuccess=function(){return o.close(),r(i.error)},e.onerror=function(t){return o.close(),r(i.error)}}},f.onerror=function(t){return o.close(),r(f.error)},h.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},i.onerror=function(t){return r(i.error)}})},t.URL_SCHEME="indexeddb://",t}(),Qc=function(t){return l.getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Zc.URL_SCHEME)?(e=t.slice(Zc.URL_SCHEME.length),new Zc(e)):null;var e};Wc.registerSaveRouter(Qc),Wc.registerLoadRouter(Qc);var th=function(){function t(){this.indexedDB=$c()}return t.prototype.listModels=function(){return c(this,void 0,void 0,function(){var t=this;return h(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Jc(r)},r.onsuccess=function(){var t=r.result,i=t.transaction(Kc,"readonly"),o=i.objectStore(Kc).getAll();o.onsuccess=function(){for(var t={},n=0,r=o.result;n<r.length;n++){var i=r[n];t[i.modelPath]=i.modelArtifactsInfo}e(t)},o.onerror=function(e){return t.close(),n(o.error)},i.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return c(this,void 0,void 0,function(){var e=this;return h(this,function(n){var r;return t=(r=t).startsWith(Zc.URL_SCHEME)?r.slice(Zc.URL_SCHEME.length):r,[2,new Promise(function(n,r){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Jc(i)},i.onsuccess=function(){var e,o=i.result,s=o.transaction(Kc,"readwrite"),a=s.objectStore(Kc),u=a.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var i=a.delete(t),s=function(){var i=(e=o.transaction(Hc,"readwrite")).objectStore(Hc).delete(t);i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(t){return r(u.error)}};i.onsuccess=s,i.onerror=function(t){return s(),o.close(),r(u.error)}},u.onerror=function(t){return o.close(),r(u.error)},s.oncomplete=function(){null==e?o.close():e.oncomplete=function(){return o.close()}}},i.onerror=function(t){return r(i.error)}})]})})},t}();if(l.getBool("IS_BROWSER"))try{Gc.registerManager(Zc.URL_SCHEME,new th)}catch(s){}var eh="/",nh="tensorflowjs_models",rh="info",ih="model_topology",oh="weight_specs",sh="weight_data",ah="model_metadata";function uh(t){return{info:[nh,t,rh].join(eh),topology:[nh,t,ih].join(eh),weightSpecs:[nh,t,oh].join(eh),weightData:[nh,t,sh].join(eh),modelMetadata:[nh,t,ah].join(eh)}}function ch(t){var e=t.split(eh);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(eh)}var hh=function(){function t(t){if(!l.getBool("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=uh(this.modelPath)}return t.prototype.save=function(t){return c(this,void 0,void 0,function(){var e,n,r;return h(this,function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Yc(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(s=t.weightData,Fc?i.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(s))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy})),[2,{modelArtifactsInfo:r}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}var s;return[2]})})},t.prototype.load=function(){return c(this,void 0,void 0,function(){var t,e,n,r,o,s,a;return h(this,function(u){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(o),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(Fc){var e=i.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(a),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),lh=function(t){return l.getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(hh.URL_SCHEME)?(e=t.slice(hh.URL_SCHEME.length),new hh(e)):null;var e};Wc.registerSaveRouter(lh),Wc.registerLoadRouter(lh);var fh=function(){function t(){b(l.getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),b(void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return c(this,void 0,void 0,function(){var t,e,n,r,i,o;return h(this,function(s){for(t={},e=nh+eh,n=eh+rh,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(e)&&i.endsWith(n)&&(o=ch(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},t.prototype.removeModel=function(t){return c(this,void 0,void 0,function(){var e,n;return h(this,function(r){var i;if(t=(i=t).startsWith(hh.URL_SCHEME)?i.slice(hh.URL_SCHEME.length):i,e=uh(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(l.getBool("IS_BROWSER"))try{Gc.registerManager(hh.URL_SCHEME,new fh)}catch(s){}var dh="model",ph=".json",mh=".weights.bin";function vh(t){return new Promise(function(t){return setTimeout(t)}).then(t)}var gh=function(){function t(e){if(!l.getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=dh),this.modelTopologyFileName=e+ph,this.weightDataFileName=e+mh}return t.prototype.save=function(t){return c(this,void 0,void 0,function(){var e,n,r,i,o,s;return h(this,function(a){switch(a.label){case 0:if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,vh(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return a.sent(),null==t.weightData?[3,4]:((s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,vh(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:a.sent(),a.label=4;case 4:return[2,{modelArtifactsInfo:Yc(t)}]}})})},t.URL_SCHEME="downloads://",t}(),yh=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return c(this,void 0,void 0,function(){var t,e,n=this;return h(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,i){var o=new FileReader;o.onload=function(o){var s=JSON.parse(o.target.result),a=s.modelTopology;if(null!=a){0===e.length&&r({modelTopology:a});var u=s.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,e)}catch(t){return void i(t)}var h=[],l=[],f=[];u.forEach(function(t){t.paths.forEach(function(t){l.push(t),f.push(null)}),h.push.apply(h,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,i=l.indexOf(t);f[i]=n,-1===f.indexOf(null)&&r({modelTopology:a,weightSpecs:h,weightData:jc(f)})},e.onerror=function(e){return i("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(c[t])})})}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},o.onerror=function(e){return i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return Uc(t.name)}),i={},o=0,s=t;o<s.length;o++)s[o].paths.forEach(function(t){var o=Uc(t);if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'");if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.");i[t]=e[r.indexOf(o)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return i},t}();function bh(t,e,n,r){!function(t){b(null!=t&&Array.isArray(t)&&t.length>0,function(){return"promises must be a none empty array"})}(t),function(t,e){b(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+t}),b(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+e}),b(e>=t,function(){return"startFraction must be no more than endFraction, but got startFraction "+t+" and endFraction "+e})}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(t.map(function(o){return o.then(function(o){var s=n+ ++i/t.length*(r-n);return e(s),o}),o}))}function xh(t,e){return c(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return h(this,function(h){switch(h.label){case 0:return null==e&&(e={}),n=null==e.fetchFunc?et:e.fetchFunc,r=t.map(function(t){return n(t,e.requestInit)}),i=0,o=.5,null!=e.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=h.sent(),[3,4];case 2:return[4,bh(r,e.onProgress,i,o)];case 3:s=h.sent(),h.label=4;case 4:return a=s.map(function(t){return t.arrayBuffer()}),u=.5,c=1,null!=e.onProgress?[3,6]:[4,Promise.all(a)];case 5:return l=h.sent(),[3,8];case 6:return[4,bh(a,e.onProgress,u,c)];case 7:l=h.sent(),h.label=8;case 8:return[2,l]}})})}function wh(t){var e=this;return function(n,r,i){return void 0===r&&(r=""),c(e,void 0,void 0,function(){var e,o,s,a,u,c,l,f,d,p;return h(this,function(h){switch(h.label){case 0:if(e=n.map(function(){return!1}),o={},s=null!=i?i.map(function(){return!1}):[],a=[],n.forEach(function(t,n){var r=0;t.weights.forEach(function(t){var u="quantization"in t?t.quantization.dtype:t.dtype,c=Dc[u]*_(t.shape),h=function(){e[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:t,groupOffset:r,sizeBytes:c})};null!=i?i.forEach(function(e,n){e===t.name&&(h(),s[n]=!0)}):h(),a.push(t.name),r+=c})}),!s.every(function(t){return t}))throw u=i.filter(function(t,e){return!s[e]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+a.join(", ")+".");return c=e.reduce(function(t,e,n){return e&&t.push(n),t},[]),l=[],c.forEach(function(t){n[t].paths.forEach(function(t){var e=r+(r.endsWith("/")?"":"/")+t;l.push(e)})}),[4,t(l)];case 1:return f=h.sent(),d={},p=0,c.forEach(function(t){for(var e=n[t].paths.length,r=0,i=0;i<e;i++)r+=f[p+i].byteLength;for(var s=new ArrayBuffer(r),a=new Uint8Array(s),u=0,c=0;c<e;c++){var h=new Uint8Array(f[p+c]);a.set(h,u),u+=h.byteLength}o[t].forEach(function(t){var e=Lc(s.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)d[n]=e[n]}),p+=e}),[2,d]}})})}}Wc.registerSaveRouter(function(t){return l.getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(gh.URL_SCHEME)?(void 0===(e=t.slice(gh.URL_SCHEME.length))&&(e="model"),new gh(e)):null;var e});var Eh=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(b("function"==typeof e.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=et,b(null!=t&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&b(2===t.length,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(t){return c(this,void 0,void 0,function(){var e,n,r,i;return h(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Yc(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},t.prototype.load=function(){return c(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a;return h(this,function(u){switch(u.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=u.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");u.label=2;case 2:return u.trys.push([2,4,,5]),[4,t.json()];case 3:return e=u.sent(),[3,5];case 4:throw u.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=e.modelTopology,i=e.weightsManifest,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:a=u.sent(),o=a[0],s=a[1],u.label=7;case 7:return[2,{modelTopology:r,weightSpecs:o,weightData:s}]}})})},t.prototype.loadWeights=function(t){return c(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,f;return h(this,function(h){switch(h.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),r=n[0],i=n[1],o=this.weightPathPrefix||r,s=[],a=0,u=t;a<u.length;a++)c=u[a],s.push.apply(s,c.weights);return l=[],t.forEach(function(t){t.paths.forEach(function(t){l.push(o+t+i)})}),[4,xh(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[s,jc(f)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function _h(t){return null!=t.match(Eh.URL_SCHEME_REGEX)}var Sh=function(t,e){return(Array.isArray(t)?t.every(function(t){return _h(t)}):_h(t))?Th(t,{onProgress:e}):null};function Th(t,e){return new Eh(t,e)}Wc.registerSaveRouter(Sh),Wc.registerLoadRouter(Sh);var Ah=function(){function t(t,e,n){this.modelTopology=t,this.weightSpecs=e,this.weightData=n}return t.prototype.load=function(){return c(this,void 0,void 0,function(){var t;return h(this,function(e){return t={},null!=this.modelTopology&&(t=u({modelTopology:this.modelTopology},t)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(t=u({weightSpecs:this.weightSpecs},t)),null!=this.weightData&&this.weightData.byteLength>0&&(t=u({weightData:this.weightData},t)),[2,t]})})},t}(),Mh=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return c(this,void 0,void 0,function(){return h(this,function(e){return[2,this.saveHandler(t)]})})},t}(),Ch=(Object.freeze({browserFiles:function(t){return new yh(t)},browserHTTPRequest:function(t,e){return Th(t,e)},concatenateArrayBuffers:jc,decodeWeights:Lc,encodeWeights:function(t,e){return c(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return h(this,function(c){switch(c.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t),o=0;o<i.length;++o){if(s=i[o],"float32"!==(a=Array.isArray(t)?t[o].tensor:t[s]).dtype&&"int32"!==a.dtype&&"bool"!==a.dtype)throw new Error("Unsupported dtype in weight '"+s+"': "+a.dtype);u={name:s,shape:a.shape,dtype:a.dtype},null!=e&&(u.group=e),n.push(u),r.push(a.data())}return[4,Promise.all(r)];case 1:return[2,{data:Bc(c.sent()),specs:n}]}})})},fromMemory:function(t,e,n){return new Ah(t,e,n)},getLoadHandlers:function(t,e){return Wc.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Yc,getSaveHandlers:function(t){return Wc.getSaveHandlers(t)},http:Th,isHTTPScheme:_h,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),c(this,void 0,void 0,function(){return h(this,function(i){return[2,wh(function(t){return xh(t,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Wc.registerLoadRouter(t)},registerSaveRouter:function(t){return Wc.registerSaveRouter(t)},weightsLoaderFactory:wh,withSaveHandler:function(t){return new Mh(t)},copyModel:function(t,e){return c(this,void 0,void 0,function(){return h(this,function(n){return[2,qc(t,e,!1)]})})},listModels:function(){return c(this,void 0,void 0,function(){var t,e,n,r,i,o,s;return h(this,function(a){switch(a.label){case 0:t=Gc.getSchemes(),e={},n=0,r=t,a.label=1;case 1:return n<r.length?(i=r[n],[4,Gc.getManager(i).listModels()]):[3,4];case 2:for(s in o=a.sent())e[i+Xc+s]=o[s];a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return c(this,void 0,void 0,function(){return h(this,function(n){return[2,qc(t,e,!0)]})})},removeModel:function(t){return c(this,void 0,void 0,function(){var e;return h(this,function(n){return e=Vc(t),[2,Gc.getManager(e.scheme).removeModel(e.path)]})})}}),an({confusionMatrix_:function(t,e,n){var r=rn(t,"labels","confusionMatrix"),i=rn(e,"predictions","confusionMatrix");b(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),b(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),b(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),b(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),b(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var o=Er(r.asType("int32"),n),s=Er(i.asType("int32"),n);return o.transpose().matMul(s).asType("int32")}})),Oh=(Object.freeze({confusionMatrix:Ch}),an({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return Nt.fromPixels(t,e)}})),Nh=(Object.freeze({toPixels:function(t,e){return c(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,f,d,p,m,v,g,y,b,x,w,E,_,S,T;return h(this,function(h){switch(h.label){case 0:if(n=rn(t,"img","toPixels"),t instanceof pt||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],o=r[1],(s=2===n.rank?1:n.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,n.data()];case 1:return a=h.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=h.sent(),f=l[0],d=l[1],p=f[0],m=d[0],u.dispose(),c.dispose(),"float32"===n.dtype){if(p<0||m>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+m+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||m>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+m+"].")}for(v="float32"===n.dtype?255:1,g=new Uint8ClampedArray(o*i*4),y=0;y<i*o;++y)b=void 0,x=void 0,w=void 0,E=void 0,1===s?(b=a[y]*v,x=a[y]*v,w=a[y]*v,E=255):3===s?(b=a[3*y]*v,x=a[3*y+1]*v,w=a[3*y+2]*v,E=255):4===s&&(b=a[4*y]*v,x=a[4*y+1]*v,w=a[4*y+2]*v,E=a[4*y+3]*v),g[0+(_=4*y)]=Math.round(b),g[_+1]=Math.round(x),g[_+2]=Math.round(w),g[_+3]=Math.round(E);return null!=e&&(e.width=o,e.height=i,S=e.getContext("2d"),T=new ImageData(g,o,i),S.putImageData(T,0,0)),n!==t&&n.dispose(),[2,g]}})})},fromPixels:Oh}),function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}()),kh=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Rh(t){b(null!=t.className,function(){return"Class being registered does not have the static className property defined."}),b("string"==typeof t.className,function(){return"className is required to be a string, but got type "+typeof t.className}),b(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),kh.register(t)}Object.freeze({Serializable:Nh,SerializationMap:kh,registerClass:Rh});var Ph=.001,Ih=.1;function Dh(){return 32===Nt.backend.floatPrecision()?Ph:Ih}function Lh(t,e,n){var r=!0;if((z(t)||z(e))&&(r=!1),z(t)&&z(e)&&(r=!0),r){var i=t.constructor.name,o=e.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(t)&&Array.isArray(e)){var s=en(t),a=en(e);if(!S(s,a))throw new Error("Arrays have different shapes. Actual: ["+s+"]. Expected: ["+a+"]")}var u=z(t)?t:E(t),c=z(e)?e:E(e);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var h=0;h<c.length;++h){var l=u[h],f=c[h];if(!n(l,f))throw new Error("Arrays differ: actual["+h+"] = "+l+", expected["+h+"] = "+f+".\nActual:   "+u+".\nExpected: "+c+".")}}function Bh(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}Object.freeze({TEST_EPSILON_FLOAT16:Ih,expectArraysClose:function(t,e,n){return null==n&&(n=Dh()),Lh(t,e,function(t,e){return Bh(t,e,n)})},testEpsilon:Dh,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return Y(t)||Y(t[0])||Y(e)||Y(e[0])?Lh(t,n,function(t,e){return t==e}):Lh(t,e,function(t,e){return Bh(t,e,0)})},expectNumbersClose:function(t,e,n){if(null==n&&(n=Dh()),!Bh(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),Object.freeze({gpgpu_util:vo,webgl_util:Ae,MathBackendWebGL:hs,setWebGLContext:It,GPGPUContext:go});var Fh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),i=r.value,o=r.grads;if(null!=n){var s=n.map(function(t){return{name:t.name,tensor:o[t.name]}});this.applyGradients(s)}else this.applyGradients(o);return Oe(o),e?i:(i.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,e){return function(t,e){b(V(t),function(){return"The f passed in variableGrads(f) must be a function"}),b(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof mt}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=e;if(!n)for(var r in e=[],Nt.registeredVariables)e.push(Nt.registeredVariables[r]);var i=n?e.filter(function(t){return!t.trainable}):null,o=e.length;b((e=e.filter(function(t){return t.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=Nt.gradients(t,e,null,!0),a=s.value,u=s.grads;b(u.some(function(t){return null!=t}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),b(0===a.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var c={};return e.forEach(function(t,e){null!=u[e]&&(c[t.name]=u[e])}),null!=i&&i.forEach(function(t){return c[t.name]=null}),{value:a,grads:c}}(t,e)},e.prototype.dispose=function(){null!=this.iterations_&&Oe(this.iterations_)},e.prototype.saveIterations=function(){return c(this,void 0,void 0,function(){return h(this,function(t){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:pn(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){return h(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){return h(this,function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return c(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=this,[4,t[0].tensor.data()];case 1:return e.iterations_=n.sent()[0],[2,t.slice(1)]}})})},e}(Nh);Object.defineProperty(Fh,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var zh=function(t){function e(e,n,r){void 0===r&&(r=null);var i=t.call(this)||this;return i.learningRate=e,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=Nt.backend.epsilon()),i}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=Nt.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Ce(function(){return Sn(i).variable(!1)})}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Ce(function(){return Sn(i).variable(!1)})});var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var s=e.accumulatedGrads[r].variable,a=e.accumulatedUpdates[r].variable;Ce(function(){var t=s.mul(e.rho).add(o.square().mul(1-e.rho)),n=a.add(e.epsilon).sqrt().div(s.add(e.epsilon).sqrt()).mul(o),r=a.mul(e.rho).add(n.square().mul(1-e.rho));s.assign(t),a.assign(r);var u=n.mul(-e.learningRate).add(i);i.assign(u)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Oe(this.accumulatedGrads.map(function(t){return t.variable})),Oe(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),e=t.length/2,this.accumulatedGrads=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="AdadeltaOptimizer",e}(Fh);Rh(zh);var jh=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=Nt.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Ce(function(){return wn(i.shape,e.initialAccumulatorValue).variable(!1)})});var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var s=e.accumulatedGrads[r].variable;Ce(function(){var t=s.add(o.square());s.assign(t);var n=o.div(t.add(Nt.backend.epsilon()).sqrt()).mul(-e.learningRate).add(i);i.assign(n)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedGrads&&Oe(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulatedGrads=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="Adagrad",e}(Fh);Rh(jh);var Uh=function(t){function e(e,n,r,i){void 0===i&&(i=null);var o=t.call(this)||this;return o.learningRate=e,o.beta1=n,o.beta2=r,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Ce(function(){o.accBeta1=pn(n).variable(),o.accBeta2=pn(r).variable()}),null==i&&(o.epsilon=Nt.backend.epsilon()),o}return a(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);Ce(function(){var r=_u(1,e.accBeta1),i=_u(1,e.accBeta2);n.forEach(function(n,o){var s=Nt.registeredVariables[n];null==e.accumulatedFirstMoment[o]&&(e.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Ce(function(){return Sn(s).variable(!1)})}),null==e.accumulatedSecondMoment[o]&&(e.accumulatedSecondMoment[o]={originalName:n+"/v",variable:Ce(function(){return Sn(s).variable(!1)})});var a=Array.isArray(t)?t[o].tensor:t[n];if(null!=a){var u=e.accumulatedFirstMoment[o].variable,c=e.accumulatedSecondMoment[o].variable,h=u.mul(e.beta1).add(a.mul(1-e.beta1)),l=c.mul(e.beta2).add(a.square().mul(1-e.beta2)),f=h.div(r),d=l.div(i);u.assign(h),c.assign(l);var p=f.div(d.sqrt().add(e.epsilon)).mul(-e.learningRate).add(s);s.assign(p)}}),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Oe(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedSecondMoment&&Oe(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){var e,n=this;return h(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),Ce(function(){n.accBeta1.assign(bu(n.beta1,n.iterations_+1)),n.accBeta2.assign(bu(n.beta2,n.iterations_+1))}),e=t.length/2,this.accumulatedFirstMoment=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="Adam",e}(Fh);Rh(Uh);var Yh=function(t){function e(e,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=0);var s=t.call(this)||this;return s.learningRate=e,s.beta1=n,s.beta2=r,s.epsilon=i,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Ce(function(){s.iteration=pn(0).variable(),s.accBeta1=pn(n).variable()}),null==i&&(s.epsilon=Nt.backend.epsilon()),s}return a(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);Ce(function(){var r=_u(1,e.accBeta1),i=uu(-e.learningRate,e.iteration.mul(e.decay).add(1));n.forEach(function(n,o){var s=Nt.registeredVariables[n];null==e.accumulatedFirstMoment[o]&&(e.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Sn(s).variable(!1)}),null==e.accumulatedWeightedInfNorm[o]&&(e.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:Sn(s).variable(!1)});var a=Array.isArray(t)?t[o].tensor:t[n];if(null!=a){var u=e.accumulatedFirstMoment[o].variable,c=e.accumulatedWeightedInfNorm[o].variable,h=u.mul(e.beta1).add(a.mul(1-e.beta1)),l=c.mul(e.beta2),f=a.abs(),d=l.maximum(f);u.assign(h),c.assign(d);var p=i.div(r).mul(h.div(d.add(e.epsilon))).add(s);s.assign(p)}}),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Oe(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedWeightedInfNorm&&Oe(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){return h(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){return h(this,function(t){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="Adamax",e}(Fh);Rh(Yh);var Wh=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var o=Nt.registeredVariables[n];Ce(function(){var t=e.c.mul(i).add(o);o.assign(t)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=function(t){return Nt.keep(t)}(pn(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:if(0!==(t=e.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGD",e}(Fh);Rh(Wh);var Xh=function(t){function e(e,n,r){void 0===r&&(r=!1);var i=t.call(this,e)||this;return i.learningRate=e,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=pn(i.momentum),i}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=Nt.registeredVariables[n];null==e.accumulations[r]&&(e.accumulations[r]={originalName:n+"/momentum",variable:Ce(function(){return Sn(i).variable(!1)})});var o=e.accumulations[r].variable,s=Array.isArray(t)?t[r].tensor:t[n];null!=s&&Ce(function(){var t,n=e.m.mul(o).add(s);t=e.useNesterov?e.c.mul(s.add(n.mul(e.m))).add(i):e.c.mul(n).add(i),o.assign(n),i.assign(t)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Oe(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulations=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="MomentumOptimizer",e}(Wh);Rh(Xh);var Gh=function(t){function e(e,n,r,i,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1);var s=t.call(this)||this;return s.learningRate=e,s.decay=n,s.momentum=r,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,null==i&&(s.epsilon=Nt.backend.epsilon()),s}return a(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var i=Nt.registeredVariables[n];null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Ce(function(){return Sn(i).variable(!1)})}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:n+"/momentum",variable:Ce(function(){return Sn(i).variable(!1)})}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Ce(function(){return Sn(i).variable(!1)})});var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var s=e.accumulatedMeanSquares[r].variable,a=e.accumulatedMoments[r].variable;Ce(function(){var t=s.mul(e.decay).add(o.square().mul(1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,u=n.mul(e.decay).add(o.mul(1-e.decay)),c=a.mul(e.momentum).add(o.mul(e.learningRate).div(t.sub(u.square().add(e.epsilon)).sqrt()));s.assign(t),n.assign(u),a.assign(c);var h=i.sub(c);i.assign(h)}else{var l=s.mul(e.decay).add(o.square().mul(1-e.decay));c=a.mul(e.momentum).add(o.mul(e.learningRate).div(l.add(e.epsilon).sqrt())),s.assign(l),a.assign(c),h=i.sub(c),i.assign(h)}})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Oe(this.accumulatedMeanSquares.map(function(t){return t.variable})),null!=this.accumulatedMeanGrads&&this.centered&&Oe(this.accumulatedMeanGrads.map(function(t){return t.variable})),null!=this.accumulatedMoments&&Oe(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return c(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return c(this,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),e=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSProp",e}(Fh);Rh(Gh);var Vh=function(){function t(){}return t.sgd=function(t){return new Wh(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new Xh(t,e,n)},t.rmsprop=function(t,e,n,r,i){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new Gh(t,e,n,r,i)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Uh(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new zh(t,e,n)},t.adamax=function(t,e,n,r,i){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new Yh(t,e,n,r,i)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new jh(t,e)},t}();Vh.sgd,Vh.momentum,Vh.adadelta,Vh.adagrad,Vh.rmsprop,Vh.adamax,Vh.adam,"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame;ft=Nc}).call(this,n(81),n(50),n(46).Buffer,n(246).setImmediate)},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,n){var r=n(40);t.exports=function(t,e,n){return(n-e)*(t=r(t,0,1))}},function(t,e){t.exports=function(t,e,n){return t&&t.hasOwnProperty(e)?t[e]:n}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,n){var r=n(0),i=n(434),o=new r({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once("destroy",this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(t)&&(e[n]=this.list[n]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var n in t)this.setValue(n,t[n]);return this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var n=this,r=this.list,o=this.events,s=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(e){if(!n._frozen){var a=r[t];r[t]=e,o.emit(i.CHANGE_DATA,s,t,e,a),o.emit(i.CHANGE_DATA_KEY+t,s,e,a)}}}),r[t]=e,o.emit(i.SET_DATA,s,t,e)}return this},each:function(t,e){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var i in this.list)n[1]=i,n[2]=this.list[i],t.apply(e,n);return this},merge:function(t,e){for(var n in void 0===e&&(e=!0),t)t.hasOwnProperty(n)&&(e||!e&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(i.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(i.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(i.CHANGE_DATA),this.events.off(i.SET_DATA),this.events.off(i.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=o},function(t,e,n){t.exports={ENTER_FULLSCREEN:n(948),FULLSCREEN_FAILED:n(949),FULLSCREEN_UNSUPPORTED:n(950),LEAVE_FULLSCREEN:n(951),ORIENTATION_CHANGE:n(952),RESIZE:n(953)}},function(t,e){t.exports=function(t,e,n,r){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.floor(t/e),r?(n+t)/e:n+t)}},function(t,e,n){var r=n(0),i=n(40),o=n(37),s=new r({initialize:function(t,e,n,r,i,o,s){this.texture=t,this.name=e,this.source=t.source[n],this.sourceIndex=n,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(o,s,r,i)},setSize:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.cutX=n,this.cutY=r,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var i=this.data,o=i.cut;o.x=n,o.y=r,o.w=t,o.h=e,o.r=n+t,o.b=r+e,i.sourceSize.w=t,i.sourceSize.h=e,i.spriteSourceSize.w=t,i.spriteSourceSize.h=e,i.radius=.5*Math.sqrt(t*t+e*e);var s=i.drawImage;return s.x=n,s.y=r,s.width=t,s.height=e,this.updateUVs()},setTrim:function(t,e,n,r,i,o){var s=this.data,a=s.spriteSourceSize;return s.trim=!0,s.sourceSize.w=t,s.sourceSize.h=e,a.x=n,a.y=r,a.w=i,a.h=o,a.r=n+i,a.b=r+o,this.x=n,this.y=r,this.width=i,this.height=o,this.halfWidth=.5*i,this.halfHeight=.5*o,this.centerX=Math.floor(i/2),this.centerY=Math.floor(o/2),this.updateUVs()},setCropUVs:function(t,e,n,r,o,s,a){var u=this.cutX,c=this.cutY,h=this.cutWidth,l=this.cutHeight,f=this.realWidth,d=this.realHeight,p=u+(e=i(e,0,f)),m=c+(n=i(n,0,d)),v=r=i(r,0,f-e),g=o=i(o,0,d-n),y=this.data;if(y.trim){var b=y.spriteSourceSize,x=e+(r=i(r,0,h-e)),w=n+(o=i(o,0,l-n));if(!(b.r<e||b.b<n||b.x>x||b.y>w)){var E=Math.max(b.x,e),_=Math.max(b.y,n),S=Math.min(b.r,x)-E,T=Math.min(b.b,w)-_;v=S,g=T,p=s?u+(h-(E-b.x)-S):u+(E-b.x),m=a?c+(l-(_-b.y)-T):c+(_-b.y),e=E,n=_,r=S,o=T}else p=0,m=0,v=0,g=0}else s&&(p=u+(h-e-r)),a&&(m=c+(l-n-o));var A=this.source.width,M=this.source.height;return t.u0=Math.max(0,p/A),t.v0=Math.max(0,m/M),t.u1=Math.min(1,(p+v)/A),t.v1=Math.min(1,(m+g)/M),t.x=e,t.y=n,t.cx=p,t.cy=m,t.cw=v,t.ch=g,t.width=r,t.height=o,t.flipX=s,t.flipY=a,t},updateCropUVs:function(t,e,n){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,n)},updateUVs:function(){var t=this.cutX,e=this.cutY,n=this.cutWidth,r=this.cutHeight,i=this.data.drawImage;i.width=n,i.height=r;var o=this.source.width,s=this.source.height;return this.u0=t/o,this.v0=e/s,this.u1=(t+n)/o,this.v1=(e+r)/s,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new s(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=o(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.texture=null,this.source=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=s},function(t,e,n){var r=n(0),i=n(180),o=n(552),s=n(553),a=n(281),u=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=u},function(t,e){t.exports=function(t,e,n){if(t.width<=0||t.height<=0)return!1;var r=(e-t.x)/t.width,i=(n-t.y)/t.height;return(r*=r)+(i*=i)<.25}},function(t,e,n){var r=n(403),i=n(0),o=n(210),s=n(1),a=n(14),u=n(16),c=n(547),h=n(151),l=n(99),f=new i({initialize:function(t,e,n){n?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?u(e[0])&&(n=e,e=null):u(e)&&(n=e,e=null),this.scene=t,this.children=new h(e),this.isParent=!0,this.classType=s(n,"classType",l),this.name=s(n,"name",""),this.active=s(n,"active",!0),this.maxSize=s(n,"maxSize",-1),this.defaultKey=s(n,"defaultKey",null),this.defaultFrame=s(n,"defaultFrame",null),this.runChildUpdate=s(n,"runChildUpdate",!1),this.createCallback=s(n,"createCallback",null),this.removeCallback=s(n,"removeCallback",null),this.createMultipleCallback=s(n,"createMultipleCallback",null),n&&this.createMultiple(n)},create:function(t,e,n,r,i,o){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===i&&(i=!0),void 0===o&&(o=!0),this.isFull())return null;var s=new this.classType(this.scene,t,e,n,r);return this.scene.sys.displayList.add(s),s.preUpdate&&this.scene.sys.updateList.add(s),s.visible=i,s.setActive(o),this.add(s),s},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var n=0;n<t.length;n++){var r=this.createFromConfig(t[n]);e=e.concat(r)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=s(t,"classType",this.classType);var e=s(t,"key",void 0),n=s(t,"frame",null),i=s(t,"visible",!0),o=s(t,"active",!0),u=[];if(void 0===e)return u;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);var h=s(t,"repeat",0),l=s(t,"randomKey",!1),f=s(t,"randomFrame",!1),d=s(t,"yoyo",!1),p=s(t,"frameQuantity",1),m=s(t,"max",0),v=c(e,n,{max:m,qty:p,random:l,randomB:f,repeat:h,yoyo:d});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var g=0;g<v.length;g++){var y=this.create(0,0,v[g].a,v[g].b,i,o);if(!y)break;u.push(y)}var b=a(t,"setXY.x",0),x=a(t,"setXY.y",0),w=a(t,"setXY.stepX",0),E=a(t,"setXY.stepY",0);r.SetXY(u,b,x,w,E);var _=a(t,"setRotation.value",0),S=a(t,"setRotation.step",0);r.SetRotation(u,_,S);var T=a(t,"setScale.x",1),A=a(t,"setScale.y",T),M=a(t,"setScale.stepX",0),C=a(t,"setScale.stepY",0);r.SetScale(u,T,A,M,C);var O=a(t,"setAlpha.value",1),N=a(t,"setAlpha.step",0);r.SetAlpha(u,O,N);var k=s(t,"hitArea",null),R=s(t,"hitAreaCallback",null);k&&r.SetHitArea(u,k,R);var P=s(t,"gridAlign",!1);return P&&r.GridAlign(u,P),this.createMultipleCallback&&this.createMultipleCallback.call(this,u),u},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var n=this.children.entries.slice(),r=0;r<n.length;r++){var i=n[r];i.active&&i.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()?this:(this.children.set(t),this.createCallback&&this.createCallback.call(this,t),e&&(this.scene.sys.displayList.add(t),t.preUpdate&&this.scene.sys.updateList.add(t)),t.on(o.DESTROY,this.remove,this),this)},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var n=0;n<t.length;n++)this.add(t[n],e);return this},remove:function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.children.contains(t)?(this.children.delete(t),this.removeCallback&&this.removeCallback.call(this,t),t.off(o.DESTROY,this.remove,this),n?t.destroy():e&&(t.scene.sys.displayList.remove(t),t.preUpdate&&t.scene.sys.updateList.remove(t)),this):this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var n=this.children,r=0;r<n.size;r++){var i=n.entries[r];i.off(o.DESTROY,this.remove,this),e?i.destroy():t&&(i.scene.sys.displayList.remove(i),i.preUpdate&&i.scene.sys.updateList.remove(i))}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(t,e,n,r,i,o,s){return this.getHandler(!0,1,t,e,n,r,i,o,s)},getFirstNth:function(t,e,n,r,i,o,s,a){return this.getHandler(!0,t,e,n,r,i,o,s,a)},getLast:function(t,e,n,r,i,o,s){return this.getHandler(!1,1,t,e,n,r,i,o,s)},getLastNth:function(t,e,n,r,i,o,s,a){return this.getHandler(!1,t,e,n,r,i,o,s,a)},getHandler:function(t,e,n,r,i,o,s,a,u){var c,h;void 0===n&&(n=!1),void 0===r&&(r=!1);var l=0,f=this.children.entries;if(t)for(h=0;h<f.length;h++)if((c=f[h]).active===n){if(++l===e)break}else c=null;else for(h=f.length-1;h>=0;h--)if((c=f[h]).active===n){if(++l===e)break}else c=null;return c?("number"==typeof i&&(c.x=i),"number"==typeof o&&(c.y=o),c):r?this.create(i,o,s,a,u):null},get:function(t,e,n,r,i){return this.getFirst(!1,!0,t,e,n,r,i)},getFirstAlive:function(t,e,n,r,i,o){return this.getFirst(!0,t,e,n,r,i,o)},getFirstDead:function(t,e,n,r,i,o){return this.getFirst(!1,t,e,n,r,i,o)},playAnimation:function(t,e){return r.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,n=0;n<this.children.size;n++)this.children.entries[n].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setDepth:function(t,e){return r.SetDepth(this.children.entries,t,e),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(t){if(void 0===t&&(t=!1),this.scene&&!this.ignoreDestroy){if(t)for(var e=this.children,n=0;n<e.size;n++){var r=e.entries[n];r.off(o.DESTROY,this.remove,this),r.destroy()}this.children.clear(),this.scene=void 0,this.children=void 0}}});t.exports=f},function(t,e,n){var r=n(292);t.exports=function(t,e){if("string"==typeof t&&r.hasOwnProperty(t)){if(e){var n=e.slice(0);return n.unshift(0),function(e){return n[0]=e,r[t].apply(this,n)}}return r[t]}return"function"==typeof t?t:(Array.isArray(t)&&t.length,r.Power0)}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o,s){for(var a=r.getTintAppendFloatAlphaAndSwap(n.fillColor,n.fillAlpha*i),u=n.pathData,c=n.pathIndexes,h=0;h<c.length;h+=3){var l=2*c[h],f=2*c[h+1],d=2*c[h+2],p=u[l+0]-o,m=u[l+1]-s,v=u[f+0]-o,g=u[f+1]-s,y=u[d+0]-o,b=u[d+1]-s,x=e.getX(p,m),w=e.getY(p,m),E=e.getX(v,g),_=e.getY(v,g),S=e.getX(y,b),T=e.getY(y,b);t.setTexture2D(),t.batchTri(x,w,E,_,S,T,0,0,1,1,a,a,a,t.tintEffect)}}},function(t,e){t.exports={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8}},function(t,e){t.exports={NONE:0,A:1,B:2,BOTH:3}},function(t,e,n){var r={};t.exports=r;var i=n(157);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(t,e){for(var n=e*e*e,i=0;i<t.length;i++){var o=t[i],s=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var a=Math.min(o.motion,s),u=Math.max(o.motion,s);o.motion=r._minBias*a+(1-r._minBias)*u,o.sleepThreshold>0&&o.motion<r._motionSleepThreshold*n?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&r.set(o,!0)):o.sleepCounter>0&&(o.sleepCounter-=1)}else r.set(o,!1)}},r.afterCollisions=function(t,e){for(var n=e*e*e,i=0;i<t.length;i++){var o=t[i];if(o.isActive){var s=o.collision,a=s.bodyA.parent,u=s.bodyB.parent;if(!(a.isSleeping&&u.isSleeping||a.isStatic||u.isStatic)&&(a.isSleeping||u.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:u,h=c===a?u:a;!c.isStatic&&h.motion>r._motionWakeThreshold*n&&r.set(c,!1)}}}},r.set=function(t,e){var n=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,n||i.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,n&&i.trigger(t,"sleepEnd"))}},function(t,e){t.exports=function(t,e,n){return t>=0&&t<n.width&&e>=0&&e<n.height}},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=i(t,"name","layer"),this.x=i(t,"x",0),this.y=i(t,"y",0),this.width=i(t,"width",0),this.height=i(t,"height",0),this.tileWidth=i(t,"tileWidth",0),this.tileHeight=i(t,"tileHeight",0),this.baseTileWidth=i(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=i(t,"baseTileHeight",this.tileHeight),this.widthInPixels=i(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=i(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=i(t,"alpha",1),this.visible=i(t,"visible",!0),this.properties=i(t,"properties",{}),this.indexes=i(t,"indexes",[]),this.collideIndexes=i(t,"collideIndexes",[]),this.callbacks=i(t,"callbacks",[]),this.bodies=i(t,"bodies",[]),this.data=i(t,"data",[]),this.tilemapLayer=i(t,"tilemapLayer",null)}});t.exports=o},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=i(t,"name","map"),this.width=i(t,"width",0),this.height=i(t,"height",0),this.infinite=i(t,"infinite",!1),this.tileWidth=i(t,"tileWidth",0),this.tileHeight=i(t,"tileHeight",0),this.widthInPixels=i(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=i(t,"heightInPixels",this.height*this.tileHeight),this.format=i(t,"format",null),this.orientation=i(t,"orientation","orthogonal"),this.renderOrder=i(t,"renderOrder","right-down"),this.version=i(t,"version","1"),this.properties=i(t,"properties",{}),this.layers=i(t,"layers",[]),this.images=i(t,"images",[]),this.objects=i(t,"objects",{}),this.collision=i(t,"collision",{}),this.tilesets=i(t,"tilesets",[]),this.imageCollections=i(t,"imageCollections",[]),this.tiles=i(t,"tiles",[])}});t.exports=o},function(t,e,n){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isMatrix||!1}},function(t,e,n){"use strict";function r(t,e,n,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=i,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}r.prototype=new Error,r.prototype.constructor=Error,r.prototype.name="ArgumentsError",r.prototype.isArgumentsError=!0,t.exports=r},function(t,e,n){"use strict";var r=n(26).format,i=n(9).escape;e.name="ConstantNode",e.path="expression.node",e.factory=function(t,e,o,s){var a=o(n(49)),u=o(n(75));function c(t){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(2===arguments.length)throw new SyntaxError("new ConstantNode(valueStr, valueType) is not supported anymore since math v4.0.0. Use new ConstantNode(value) instead, where value is a non-stringified value.");this.value=t}return c.prototype=new a,c.prototype.type="ConstantNode",c.prototype.isConstantNode=!0,c.prototype._compile=function(t,e){var n=this.value;return function(){return n}},c.prototype.forEach=function(t){},c.prototype.map=function(t){return this.clone()},c.prototype.clone=function(){return new c(this.value)},c.prototype._toString=function(t){return r(this.value,t)},c.prototype.toHTML=function(t){var e=this._toString(t);switch(u(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+e+"</span>";case"string":return'<span class="math-string">'+e+"</span>";case"boolean":return'<span class="math-boolean">'+e+"</span>";case"null":return'<span class="math-null-symbol">'+e+"</span>";case"undefined":return'<span class="math-undefined">'+e+"</span>";default:return'<span class="math-symbol">'+e+"</span>"}},c.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},c.fromJSON=function(t){return new c(t.value)},c.prototype._toTex=function(t){var e=this._toString(t);switch(u(this.value)){case"string":return"\\mathtt{"+i(e)+"}";case"number":case"BigNumber":var n=e.toLowerCase().indexOf("e");return-1!==n?e.substring(0,n)+"\\cdot10^{"+e.substring(n+1)+"}":e;case"Fraction":return this.value.toLatex();default:return e}},c}},function(t,e,n){"use strict";var r=n(9),i=n(5).map,o=n(26).escape,s=n(45).isSafeMethod,a=n(45).getSafeProperty,u=n(164);e.name="OperatorNode",e.path="expression.node",e.factory=function(t,e,c,h){var l=c(n(49));function f(e,n,r,i){if(!(this instanceof f))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof n)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(t.isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.op=e,this.fn=n,this.args=r||[]}function d(t,e,n,r,i){var o,s=u.getPrecedence(t,e),a=u.getAssociativity(t,e);if("all"===e||r.length>2&&"OperatorNode:add"!==t.getIdentifier()&&"OperatorNode:multiply"!==t.getIdentifier())return r.map(function(t){switch(t.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});switch(r.length){case 0:o=[];break;case 1:var c=u.getPrecedence(r[0],e);if(i&&null!==c){var h,l;if("keep"===e?(h=r[0].getIdentifier(),l=t.getIdentifier()):(h=r[0].getContent().getIdentifier(),l=t.getContent().getIdentifier()),!1===u.properties[s][l].latexLeftParens){o=[!1];break}if(!1===u.properties[c][h].latexParens){o=[!1];break}}if(null===c){o=[!1];break}if(c<=s){o=[!0];break}o=[!1];break;case 2:var f,d,p=u.getPrecedence(r[0],e),m=u.isAssociativeWith(t,r[0],e);f=null!==p&&(p===s&&"right"===a&&!m||p<s);var v,g,y,b=u.getPrecedence(r[1],e),x=u.isAssociativeWith(t,r[1],e);d=null!==b&&(b===s&&"left"===a&&!x||b<s),i&&("keep"===e?(v=t.getIdentifier(),g=t.args[0].getIdentifier(),y=t.args[1].getIdentifier()):(v=t.getContent().getIdentifier(),g=t.args[0].getContent().getIdentifier(),y=t.args[1].getContent().getIdentifier()),null!==p&&(!1===u.properties[s][v].latexLeftParens&&(f=!1),!1===u.properties[p][g].latexParens&&(f=!1)),null!==b&&(!1===u.properties[s][v].latexRightParens&&(d=!1),!1===u.properties[b][y].latexParens&&(d=!1))),o=[f,d];break;default:"OperatorNode:add"!==t.getIdentifier()&&"OperatorNode:multiply"!==t.getIdentifier()||(o=r.map(function(n){var r=u.getPrecedence(n,e),i=u.isAssociativeWith(t,n,e),o=u.getAssociativity(n,e);return null!==r&&(s===r&&a===o&&!i||r<s)}))}return r.length>=2&&"OperatorNode:multiply"===t.getIdentifier()&&t.implicit&&"auto"===e&&"hide"===n&&(o=r.map(function(t,e){var n="ParenthesisNode"===t.getIdentifier();return!(!o[e]&&!n)})),o}return f.prototype=new l,f.prototype.type="OperatorNode",f.prototype.isOperatorNode=!0,f.prototype._compile=function(t,e){if("string"!=typeof this.fn||!s(t,this.fn))throw t[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=a(t,this.fn),r=i(this.args,function(n){return n._compile(t,e)});if(1===r.length){var o=r[0];return function(t,e,r){return n(o(t,e,r))}}if(2===r.length){var u=r[0],c=r[1];return function(t,e,r){return n(u(t,e,r),c(t,e,r))}}return function(t,e,o){return n.apply(null,i(r,function(n){return n(t,e,o)}))}},f.prototype.forEach=function(t){for(var e=0;e<this.args.length;e++)t(this.args[e],"args["+e+"]",this)},f.prototype.map=function(t){for(var e=[],n=0;n<this.args.length;n++)e[n]=this._ifNode(t(this.args[n],"args["+n+"]",this));return new f(this.op,this.fn,e,this.implicit)},f.prototype.clone=function(){return new f(this.op,this.fn,this.args.slice(0),this.implicit)},f.prototype.isUnary=function(){return 1===this.args.length},f.prototype.isBinary=function(){return 2===this.args.length},f.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=t&&t.implicit?t.implicit:"hide",r=this.args,i=d(this,e,n,r,!1);if(1===r.length){var o=u.getAssociativity(this,e),s=r[0].toString(t);i[0]&&(s="("+s+")");var a=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(a?" ":"")+s:"left"===o?s+(a?" ":"")+this.op:s+this.op}if(2===r.length){var c=r[0].toString(t),h=r[1].toString(t);return i[0]&&(c="("+c+")"),i[1]&&(h="("+h+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c+" "+h:c+" "+this.op+" "+h}if(r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var l=r.map(function(e,n){return e=e.toString(t),i[n]&&(e="("+e+")"),e});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?l.join(" "):l.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},f.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},f.fromJSON=function(t){return new f(t.op,t.fn,t.args,t.implicit)},f.prototype.toHTML=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=t&&t.implicit?t.implicit:"hide",r=this.args,i=d(this,e,n,r,!1);if(1===r.length){var s=u.getAssociativity(this,e),a=r[0].toHTML(t);return i[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===s?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+o(this.op)+"</span>"+a:a+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+o(this.op)+"</span>"}if(2===r.length){var c=r[0].toHTML(t),h=r[1].toHTML(t);return i[0]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i[1]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+h:c+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+o(this.op)+"</span>"+h}var l=r.map(function(e,n){return e=e.toHTML(t),i[n]&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e});return r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?l.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):l.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+o(this.op)+"</span>"):'<span class="math-function">'+o(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},f.prototype._toTex=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=t&&t.implicit?t.implicit:"hide",i=this.args,o=d(this,e,n,i,!0),s=r.operators[this.fn];if(s=void 0===s?this.op:s,1===i.length){var a=u.getAssociativity(this,e),c=i[0].toTex(t);return o[0]&&(c="\\left(".concat(c,"\\right)")),"right"===a?s+c:c+s}if(2===i.length){var h=i[0],l=h.toTex(t);o[0]&&(l="\\left(".concat(l,"\\right)"));var f,p=i[1].toTex(t);switch(o[1]&&(p="\\left(".concat(p,"\\right)")),f="keep"===e?h.getIdentifier():h.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return s+"{"+l+"}{"+p+"}";case"OperatorNode:pow":switch(l="{"+l+"}",p="{"+p+"}",f){case"ConditionalNode":case"OperatorNode:divide":l="\\left(".concat(l,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return l+"~"+p}return l+s+p}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var m=i.map(function(e,n){return e=e.toTex(t),o[n]&&(e="\\left(".concat(e,"\\right)")),e});return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?m.join("~"):m.join(s)}return"\\mathrm{"+this.fn+"}\\left("+i.map(function(e){return e.toTex(t)}).join(",")+"\\right)"},f.prototype.getIdentifier=function(){return this.type+":"+this.fn},f}},function(t,e,n){"use strict";var r=n(4);e.name="isZero",e.factory=function(t,e,n,i){var o=i("isZero",{number:function(t){return 0===t},BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:function(t){return o(t.value)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(4);e.name="isNegative",e.factory=function(t,e,n,i){var o=i("isNegative",{number:function(t){return t<0},BigNumber:function(t){return t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s<0},Unit:function(t){return o(t.value)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(108);t.exports=function(t){for(var e=0;e<t.length;e++)if(r(t[e]))return!0;return!1}},function(t,e,n){"use strict";var r=n(10),i=n(386),o=n(392),s=n(393),a=n(122);function u(t){a.call(this,"digest"),this._hash=t}r(u,a),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new u(s(t))}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(46).Buffer)},function(t,e,n){(function(e){t.exports=function(t,n){for(var r=Math.min(t.length,n.length),i=new e(r),o=0;o<r;++o)i[o]=t[o]^n[o];return i}}).call(this,n(46).Buffer)},function(t,e,n){"use strict";var r=n(85),i=n(69);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},function(t,e,n){var r=e;r.bignum=n(32),r.define=n(2162).define,r.base=n(202),r.constants=n(766),r.decoders=n(2167),r.encoders=n(2169)},function(t,e,n){var r=e;r.Reporter=n(2164).Reporter,r.DecoderBuffer=n(765).DecoderBuffer,r.EncoderBuffer=n(765).EncoderBuffer,r.Node=n(2165)},function(t,e,n){var r,i,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),u=null,c=0,h=[],l=n(2183);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(y(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(y(r.parts[s],e));o[r.id]={id:r.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertAt.before,n);n.insertBefore(e,i)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return g(e,t.attrs),p(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var s=c++;n=u||(u=v(e)),r=w.bind(null,n,s,!1),i=w.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=l(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var s=n[i];(a=o[s.id]).refs--,r.push(a)}t&&f(d(t,e),e);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete o[a.id]}}}};var b,x=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},function(t,e,n){"use strict";(function(t){var r=n(33),i=n(773),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.a.Buffer:void 0,u=(a?a.isBuffer:void 0)||i.a;e.a=u}).call(this,n(680)(t))},,function(t,e,n){var r=n(86),i=n(146),o=n(95),s=n(0),a=n(23),u=n(24),c=n(22),h=n(96),l=new s({Extends:u,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(t,e,n,i,o){void 0===i&&(i=1),void 0===o&&(o=i),u.call(this,t,"Zone"),this.setPosition(e,n),this.width=i,this.height=o,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,n){void 0===n&&(n=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var r=this.input;return n&&r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new i(0,0,t),o)},setRectangleDropZone:function(t,e){return this.setDropZone(new c(0,0,t,e),h)},setDropZone:function(t,e){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});t.exports=l},function(t,e,n){t.exports={ADD_ANIMATION:n(797),ANIMATION_COMPLETE:n(798),ANIMATION_REPEAT:n(799),ANIMATION_RESTART:n(800),ANIMATION_START:n(801),PAUSE_ALL:n(802),REMOVE_ANIMATION:n(803),RESUME_ALL:n(804),SPRITE_ANIMATION_COMPLETE:n(805),SPRITE_ANIMATION_KEY_COMPLETE:n(806),SPRITE_ANIMATION_KEY_REPEAT:n(807),SPRITE_ANIMATION_KEY_RESTART:n(808),SPRITE_ANIMATION_KEY_START:n(809),SPRITE_ANIMATION_KEY_UPDATE:n(810),SPRITE_ANIMATION_REPEAT:n(811),SPRITE_ANIMATION_RESTART:n(812),SPRITE_ANIMATION_START:n(813),SPRITE_ANIMATION_UPDATE:n(814)}},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e){var n={defaultPipeline:null,pipeline:null,initPipeline:function(t){void 0===t&&(t="TextureTintPipeline");var e=this.scene.sys.game.renderer;return!!(e&&e.gl&&e.hasPipeline(t))&&(this.defaultPipeline=e.getPipeline(t),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(t){var e=this.scene.sys.game.renderer;return e&&e.gl&&e.hasPipeline(t)&&(this.pipeline=e.getPipeline(t)),this},resetPipeline:function(){return this.pipeline=this.defaultPipeline,null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};t.exports=n},function(t,e,n){t.exports={DESTROY:n(829)}},function(t,e){t.exports=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}},function(t,e,n){var r=n(0),i=n(23),o=n(80),s=n(20),a=n(97),u=n(22),c=n(71),h=n(288),l=n(8),f=new r({Extends:s,Mixins:[i.Alpha,i.Visible],initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),s.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.resolution=1,this.roundPixels=!1,this.useBounds=!1,this.worldView=new u,this.dirty=!0,this._x=t,this._y=e,this._cx=0,this._cy=0,this._cw=0,this._ch=0,this._width=n,this._height=r,this._bounds=new u,this._scrollX=0,this._scrollY=0,this._zoom=1,this._rotation=0,this.matrix=new c,this.transparent=!0,this.backgroundColor=h("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(n/2,r/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,n){void 0===n&&(n=new l);var r=.5*this.width,i=.5*this.height;return n.x=t-r,n.y=e-i,this.useBounds&&(n.x=this.clampX(n.x),n.y=this.clampY(n.y)),n},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,e=.5*this.width,n=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-n}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-r*i;if(!s)return t;var a=e[4],u=e[5],c=this.scrollX,h=this.scrollY,l=this.width,f=this.height,d=this.culledObjects,p=t.length;s=1/s,d.length=0;for(var m=0;m<p;++m){var v=t[m];if(v.hasOwnProperty("width")&&!v.parentContainer){var g=v.width,y=v.height,b=v.x-c*v.scrollFactorX-g*v.originX,x=v.y-h*v.scrollFactorY-y*v.originY,w=b*n+x*i+a,E=b*r+x*o+u,_=(b+g)*n+(x+y)*i+a,S=(b+g)*r+(x+y)*o+u,T=this.y,A=T+f,M=this.x;_>M&&w<M+l&&S>T&&E<A&&d.push(v)}else d.push(v)}return d},getWorldPoint:function(t,e,n){void 0===n&&(n=new l);var r=this.matrix.matrix,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5],h=i*a-o*s;if(!h)return n.x=t,n.y=e,n;var f=a*(h=1/h),d=-o*h,p=-s*h,m=i*h,v=(s*c-a*u)*h,g=(o*u-i*c)*h,y=Math.cos(this.rotation),b=Math.sin(this.rotation),x=this.zoom,w=this.resolution,E=this.scrollX,_=this.scrollY,S=t+(E*y-_*b)*x,T=e+(E*b+_*y)*x;return n.x=(S*f+T*p)*w+v,n.y=(S*d+T*m)*w+g,n},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=e}return this},preRender:function(t){var e=this.width,n=this.height,r=.5*e,i=.5*n,o=this.zoom*t,s=this.matrix,a=e*this.originX,u=n*this.originY,c=this.scrollX,h=this.scrollY;this.useBounds&&(c=this.clampX(c),h=this.clampY(h)),this.roundPixels&&(a=Math.round(a),u=Math.round(u)),this.scrollX=c,this.scrollY=h;var l=c+r,f=h+i;this.midPoint.set(l,f);var d=e/o,p=n/o;this.worldView.setTo(l-d/2,f-p/2,d,p),s.applyITRS(this.x+a,this.y+u,this.rotation,o,o),s.translate(-a,-u)},clampX:function(t){var e=this._bounds,n=this.displayWidth,r=e.x+(n-this.width)/2,i=Math.max(r,r+e.width-n);return t<r?t=r:t>i&&(t=i),t},clampY:function(t){var e=this._bounds,n=this.displayHeight,r=e.y+(n-this.height)/2,i=Math.max(r,r+e.height-n);return t<r?t=r:t>i&&(t=i),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=o(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=h(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,n,r,i){return void 0===i&&(i=!1),this._bounds.setTo(t,e,n,r),this.dirty=!0,this.useBounds=!0,i?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new u);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var e=t.sys;this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras;var n=this.scaleManager.resolution;return this.resolution=n,this._cx=this._x*n,this._cy=this._y*n,this._cw=this._width*n,this._ch=this._height*n,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},setZoom:function(t){return void 0===t&&(t=1),0===t&&(t=.001),this.zoom=t,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager;t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this._cx=t*this.resolution,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._cy=t*this.resolution,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this._cw=t*this.resolution,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this._ch=t*this.resolution,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(t){this._zoom=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});t.exports=f},function(t,e){var n,r="";t.exports={disable:function(t){return""===r&&(r=n(t)),r&&(t[r]=!1),t},enable:function(t){return""===r&&(r=n(t)),r&&(t[r]=!0),t},getPrefix:n=function(t){for(var e=["i","webkitI","msI","mozI","oI"],n=0;n<e.length;n++){var r=e[n]+"mageSmoothingEnabled";if(r in t)return r}return null},isEnabled:function(t){return null!==r?t[r]:null}}},function(t,e){t.exports=function(t,e,n){return(e-t)*n+t}},function(t,e,n){(function(e){var n={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){var t=navigator.userAgent;/Windows/.test(t)?n.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?n.macOS=!0:/Android/.test(t)?n.android=!0:/Linux/.test(t)?n.linux=!0:/iP[ao]d|iPhone/i.test(t)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10),n.iPhone=-1!==t.toLowerCase().indexOf("iphone"),n.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?n.kindle=!0:/CrOS/.test(t)&&(n.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var r=/Silk/.test(t);return(n.windows||n.macOS||n.linux&&!r||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(n.desktop=!1),navigator.standalone&&(n.webApp=!0),void 0!==window.cordova&&(n.cordova=!0),void 0!==e&&e.versions&&e.versions.node&&(n.node=!0),n.node&&"object"==typeof e.versions&&(n.nodeWebkit=!!e.versions["node-webkit"],n.electron=!!e.versions.electron),void 0!==window.ejecta&&(n.ejecta=!0),/Crosswalk/.test(t)&&(n.crosswalk=!0),n.pixelRatio=window.devicePixelRatio||1,n}()}).call(this,n(81))},function(t,e,n){var r,i=n(215),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=(r=navigator.userAgent,/Edge\/\d+/.test(r)?o.edge=!0:/Chrome\/(\d+)/.test(r)&&!i.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(r)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(r)&&i.iOS?o.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(r)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(r)?o.opera=!0:/Safari/.test(r)&&!i.windowsPhone?o.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(o.silk=!0),o)},function(t,e){t.exports=function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,n,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},lengthSq:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},normalize:function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i,this.w=r*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y,i=this.z,o=this.w;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this.w=o+e*(t.w-o),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,i=t.w-this.w||0;return Math.sqrt(e*e+n*n+r*r+i*i)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,i=t.w-this.w||0;return e*e+n*n+r*r+i*i},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.val;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},transformQuat:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,c=a*n+s*e-i*r,h=a*r+i*n-o*e,l=-i*e-o*n-s*r;return this.x=u*a+l*-i+c*-s-h*-o,this.y=c*a+l*-o+h*-i-u*-s,this.z=h*a+l*-s+u*-o-c*-i,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,t.exports=r},function(t,e,n){t.exports={ADD:n(1016),ERROR:n(1017),LOAD:n(1018),READY:n(1019),REMOVE:n(1020)}},function(t,e){t.exports=function(t,e){var n;if(e)"string"==typeof e?n=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(n=e);else if(t.parentElement)return t;return n||(n=document.body),n.appendChild(t),t}},function(t,e,n){var r=n(148);t.exports=function(t,e,n,i){var o;if(void 0===i&&(i=t),!Array.isArray(e))return-1!==(o=t.indexOf(e))?(r(t,o),n&&n.call(i,e),e):null;for(var s=e.length-1;s>=0;){var a=e[s];-1!==(o=t.indexOf(a))?(r(t,o),n&&n.call(i,a)):e.pop(),s--}return e}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,n){var r=n(0),i=n(125),o=n(20),s=n(126),a=n(60),u=n(2),c=new r({Extends:o,initialize:function(t){o.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(a.BLUR,function(){this.pauseOnBlur&&this.onBlur()},this),t.events.on(a.FOCUS,function(){this.pauseOnBlur&&this.onFocus()},this),t.events.on(a.PRE_STEP,this.update,this),t.events.once(a.DESTROY,this.destroy,this)},add:u,addAudioSprite:function(t,e){void 0===e&&(e={});var n=this.add(t,e);for(var r in n.spritemap=this.jsonCache.get(t).spritemap,n.spritemap)if(n.spritemap.hasOwnProperty(r)){var o=i(e),s=n.spritemap[r];o.loop=!!s.hasOwnProperty("loop")&&s.loop,n.addMarker({name:r,start:s.start,duration:s.end-s.start,config:o})}return n},play:function(t,e){var n=this.add(t);return n.once(s.COMPLETE,n.destroy,n),e?e.name?(n.addMarker(e),n.play(e.name)):n.play(e):n.play()},playAudioSprite:function(t,e,n){var r=this.addAudioSprite(t);return r.once(s.COMPLETE,r.destroy,r),r.play(e,n)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeByKey:function(t){for(var e=0,n=this.sounds.length-1;n>=0;n--){var r=this.sounds[n];r.key===t&&(r.destroy(),this.sounds.splice(n,1),e++)}return e},pauseAll:function(){this.forEachActiveSound(function(t){t.pause()}),this.emit(s.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(t){t.resume()}),this.emit(s.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(t){t.stop()}),this.emit(s.STOP_ALL,this)},unlock:u,onBlur:u,onFocus:u,update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(s.UNLOCKED,this));for(var n=this.sounds.length-1;n>=0;n--)this.sounds[n].pendingRemove&&this.sounds.splice(n,1);this.sounds.forEach(function(n){n.update(t,e)})},destroy:function(){this.removeAllListeners(),this.forEachActiveSound(function(t){t.destroy()}),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var n=this;this.sounds.forEach(function(r,i){r.pendingRemove||t.call(e||n,r,i,n.sounds)})},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(s.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(s.GLOBAL_DETUNE,this,t)}}});t.exports=c},function(t,e,n){var r=n(0),i=n(20),o=n(126),s=n(37),a=n(2),u=new r({Extends:i,initialize:function(t,e,n){i.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},this.currentConfig=this.config,this.config=s(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name)&&(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),!1):(t=s(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},t),this.markers[t.name]=t,!0))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name)&&(this.markers[t.name]?(this.markers[t.name]=s(!0,this.markers[t.name],t),!0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),!1))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=s(this.currentConfig,e),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.emit(o.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=u},function(t,e,n){var r=n(309),i=n(0),o=n(2),s=n(228),a=new i({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=o,this.removeCallback=o,this._sortKey=""},add:function(t,e){return e?r.Add(this.list,t):r.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,n){return n?r.AddAt(this.list,t,e):r.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,n){return e[t]-n[t]}),s.inplace(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,n,i){return r.GetFirst(this.list,t,e,n,i)},getAll:function(t,e,n,i){return r.GetAll(this.list,t,e,n,i)},count:function(t,e){return r.CountAllMatching(this.list,t,e)},swap:function(t,e){r.Swap(this.list,t,e)},moveTo:function(t,e){return r.MoveTo(this.list,t,e)},remove:function(t,e){return e?r.Remove(this.list,t):r.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?r.RemoveAt(this.list,t):r.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,n){return n?r.RemoveBetween(this.list,t,e):r.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return r.BringToTop(this.list,t)},sendToBack:function(t){return r.SendToBack(this.list,t)},moveUp:function(t){return r.MoveUp(this.list,t),t},moveDown:function(t){return r.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e){return r.Replace(this.list,t,e)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,n,i){return r.SetAll(this.list,t,e,n,i),this},each:function(t,e){for(var n=[null],r=2;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<this.list.length;r++)n[0]=this.list[r],t.apply(e,n)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=a},function(t,e,n){var r=n(310),i=n(545);t.exports=function(t,e){if(void 0===e&&(e=90),!r(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=i(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=i(t);else if(180===Math.abs(e)||"rotate180"===e){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,e,n){!function(){var e=function(t,e){return n(t.slice(),e)};function n(t,e){"function"!=typeof e&&(e=function(t,e){return String(t).localeCompare(e)});var n=t.length;if(n<=1)return t;for(var i=new Array(n),o=1;o<n;o*=2){r(t,e,o,i);var s=t;t=i,i=s}return t}e.inplace=function(t,e){var i=n(t,e);return i!==t&&r(i,null,t.length,t),t};var r=function(t,e,n,r){var i,o,s,a,u,c=t.length,h=0,l=2*n;for(i=0;i<c;i+=l)for(s=(o=i+n)+n,o>c&&(o=c),s>c&&(s=c),a=i,u=o;;)if(a<o&&u<s)e(t[a],t[u])<=0?r[h++]=t[a++]:r[h++]=t[u++];else if(a<o)r[h++]=t[a++];else{if(!(u<s))break;r[h++]=t[u++]}};t.exports=e}()},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(1198),a=n(1199),u=n(313),c=n(1200),h=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Texture,i.Tint,i.Transform,i.Visible,c],initialize:function(t,e,n,r,i,a,u){void 0===i&&(i=""),void 0===u&&(u=0),o.call(this,t,"BitmapText"),this.font=r;var c=this.scene.sys.cache.bitmapFont.get(r);this.fontData=c.data,this._text="",this._fontSize=a||this.fontData.size,this._letterSpacing=0,this._align=u,this._bounds=s(this,!1,this._bounds),this._dirty=!1,this.setTexture(c.texture,c.frame),this.setPosition(e,n),this.setOrigin(0,0),this.initPipeline(),this.setText(i)},setLeftAlign:function(){return this._align=h.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=h.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=h.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},getTextBounds:function(t){return this._dirty&&s(this,t,this._bounds),this._bounds},setFont:function(t,e,n){if(void 0===e&&(e=this._fontSize),void 0===n&&(n=this._align),t!==this.font){var r=this.scene.sys.cache.bitmapFont.get(t);r&&(this.font=t,this.fontData=r.data,this._fontSize=e,this._align=n,this.setTexture(r.texture,r.frame),s(this,!1,this._bounds))}return this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=i.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t}});h.ALIGN_LEFT=0,h.ALIGN_CENTER=1,h.ALIGN_RIGHT=2,h.ParseFromAtlas=a,h.ParseXMLBitmapFont=u,t.exports=h},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(1320),a=n(2),u=new r({Extends:o,Mixins:[i.BlendMode,i.Depth,i.GetBounds,i.Mask,i.Pipeline,i.Size,i.Texture,i.Transform,i.Visible,i.ScrollFactor,s],initialize:function(t,e,n,r,i,s,a,u,c){if(o.call(this,t,"Mesh"),r.length!==i.length)throw new Error("Mesh Vertex count must match UV count");var h,l=r.length/2|0;if(s.length>0&&s.length<l)throw new Error("Mesh Color count must match Vertex count");if(a.length>0&&a.length<l)throw new Error("Mesh Alpha count must match Vertex count");if(0===s.length)for(h=0;h<l;++h)s[h]=16777215;if(0===a.length)for(h=0;h<l;++h)a[h]=1;this.vertices=new Float32Array(r),this.uv=new Float32Array(i),this.colors=new Uint32Array(s),this.alphas=new Float32Array(a),this.tintFill=!1,this.setTexture(u,c),this.setPosition(e,n),this.setSizeToFrame(),this.initPipeline()},setAlpha:a});t.exports=u},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,n){var r=n(14),i={},o={register:function(t,e,n,r,o){i[t]={plugin:e,mapping:n,settingsKey:r,configKey:o}},getPlugin:function(t){return i[t]},install:function(t){var e=t.scene.sys,n=e.settings.input,o=e.game.config;for(var s in i){var a=i[s].plugin,u=i[s].mapping,c=i[s].settingsKey,h=i[s].configKey;r(n,c,o[h])&&(t[u]=new a(t))}},remove:function(t){i.hasOwnProperty(t)&&delete i[t]}};t.exports=o},function(t,e,n){t.exports={ANY_KEY_DOWN:n(1458),ANY_KEY_UP:n(1459),COMBO_MATCH:n(1460),DOWN:n(1461),KEY_DOWN:n(1462),KEY_UP:n(1463),UP:n(1464)}},function(t,e){t.exports=function(t,e,n,r,i){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i=0),{responseType:t,async:e,user:n,password:r,timeout:i,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0}}},function(t,e,n){var r=n(0),i=n(339),o=n(99),s=new r({Extends:o,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Size,i.Velocity],initialize:function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.body=null}});t.exports=s},function(t,e,n){t.exports={Bounce:n(1558),Collision:n(1559),Force:n(1560),Friction:n(1561),Gravity:n(1562),Mass:n(1563),Static:n(1564),Sensor:n(1565),SetBody:n(1566),Sleep:n(1568),Transform:n(1581),Velocity:n(1582)}},function(t,e){var n={};t.exports=n,n.create=function(t,e){var r=t.bodyA,i=t.bodyB,o={id:n.id(r,i),bodyA:r,bodyB:i,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||i.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(o,t,e),o},n.update=function(t,e,r){if(t.collision=e,e.collided){var i=e.supports,o=t.activeContacts,s=e.parentA,a=e.parentB;t.inverseMass=s.inverseMass+a.inverseMass,t.friction=Math.min(s.friction,a.friction),t.frictionStatic=Math.max(s.frictionStatic,a.frictionStatic),t.restitution=Math.max(s.restitution,a.restitution),t.slop=Math.max(s.slop,a.slop);for(var u=0;u<i.length;u++)o[u]=i[u].contact;var c=i.length;c<o.length&&(o.length=c),t.separation=e.depth,n.setActive(t,!0,r)}else!0===t.isActive&&n.setActive(t,!1,r)},n.setActive=function(t,e,n){e?(t.isActive=!0,t.timeUpdated=n):(t.isActive=!1,t.activeContacts.length=0)},n.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},function(t,e,n){t.exports={CalculateFacesAt:n(351),CalculateFacesWithin:n(103),Copy:n(1604),CreateFromTiles:n(1605),CullTiles:n(1606),Fill:n(1607),FilterTiles:n(1608),FindByIndex:n(1609),FindTile:n(1610),ForEachTile:n(1611),GetTileAt:n(239),GetTileAtWorldXY:n(1612),GetTilesWithin:n(43),GetTilesWithinShape:n(1613),GetTilesWithinWorldXY:n(1614),HasTileAt:n(650),HasTileAtWorldXY:n(1615),IsInLayerBounds:n(187),PutTileAt:n(352),PutTileAtWorldXY:n(1616),PutTilesAt:n(1617),Randomize:n(1618),RemoveTileAt:n(651),RemoveTileAtWorldXY:n(1619),RenderDebug:n(1620),ReplaceByIndex:n(649),SetCollision:n(1621),SetCollisionBetween:n(1622),SetCollisionByExclusion:n(1623),SetCollisionByProperty:n(1624),SetCollisionFromCollisionGroup:n(1625),SetTileIndexCallback:n(1626),SetTileLocationCallback:n(1627),Shuffle:n(1628),SwapByIndex:n(1629),TileToWorldX:n(240),TileToWorldXY:n(1630),TileToWorldY:n(241),WeightedRandomize:n(1631),WorldToTileX:n(115),WorldToTileXY:n(1632),WorldToTileY:n(116)}},function(t,e,n){var r=n(187);t.exports=function(t,e,n,i){if(void 0===n&&(n=!1),r(t,e,i)){var o=i.data[e][t]||null;return null===o?null:-1===o.index?n?o:null:o}return null}},function(t,e){t.exports=function(t,e,n){var r=n.baseTileWidth,i=n.tilemapLayer,o=0;return i&&(void 0===e&&(e=i.scene.cameras.main),o=i.x+e.scrollX*(1-i.scrollFactorX),r*=i.scaleX),o+t*r}},function(t,e){t.exports=function(t,e,n){var r=n.baseTileHeight,i=n.tilemapLayer,o=0;return i&&(void 0===e&&(e=i.scene.cameras.main),o=i.y+e.scrollY*(1-i.scrollFactorY),r*=i.scaleY),o+t*r}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i,o,s,a){(void 0===n||n<=0)&&(n=32),(void 0===r||r<=0)&&(r=32),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s={}),void 0===a&&(a={}),this.name=t,this.firstgid=e,this.tileWidth=n,this.tileHeight=r,this.tileMargin=i,this.tileSpacing=o,this.tileProperties=s,this.tileData=a,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e){var n=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);n%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),r=Math.floor(r),this.rows=n,this.columns=r,this.total=n*r,this.texCoordinates.length=0;for(var i=this.tileMargin,o=this.tileMargin,s=0;s<this.rows;s++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:i,y:o}),i+=this.tileWidth+this.tileSpacing;i=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});t.exports=r},function(t,e){t.exports=function(t,e,n){var r;r=t.hasOwnProperty(e)?"function"==typeof t[e]?function(n,r,i){return t[e](n,r,i)}:function(){return t[e]}:"function"==typeof n?n:function(){return n};return r}},function(t,e,n){var r=n(360),i=n(25),o=n(173),s=n(182),a=n(243),u=n(672),c=n(358),h=n(14),l=n(359),f=n(361),d=n(362);t.exports=function(t,e,n){void 0===n&&(n=r);for(var p=n.targets?n.targets:c(e),m=u(e),v=a(e,"delay",n.delay),g=a(e,"duration",n.duration),y=h(e,"easeParams",n.easeParams),b=s(h(e,"ease",n.ease),y),x=a(e,"hold",n.hold),w=a(e,"repeat",n.repeat),E=a(e,"repeatDelay",n.repeatDelay),_=o(e,"yoyo",n.yoyo),S=o(e,"flipX",n.flipX),T=o(e,"flipY",n.flipY),A=[],M=0;M<m.length;M++)for(var C=m[M].key,O=m[M].value,N=0;N<p.length;N++){var k=l(C,O),R=d(p[N],C,k.getEnd,k.getStart,s(h(O,"ease",b),y),a(O,"delay",v),a(O,"duration",g),o(O,"yoyo",_),a(O,"hold",x),a(O,"repeat",w),a(O,"repeatDelay",E),o(O,"flipX",S),o(O,"flipY",T));A.push(R)}var P=new f(t,A,p);P.offset=i(e,"offset",null),P.completeDelay=i(e,"completeDelay",0),P.loop=Math.round(i(e,"loop",0)),P.loopDelay=Math.round(i(e,"loopDelay",0)),P.paused=o(e,"paused",!1),P.useFrames=o(e,"useFrames",!1);for(var I=h(e,"callbackScope",P),D=[P,null],L=f.TYPES,B=0;B<L.length;B++){var F=L[B],z=h(e,F,!1);if(z){var j=h(e,F+"Scope",I),U=h(e,F+"Params",[]);P.setCallback(F,z,D.concat(U),j)}}return P}},function(t,e,n){var r=n(0),i=n(24),o=n(99),s=n(8),a=n(218),u=new r({Extends:i,initialize:function(t,e,n,r,u,c){i.call(this,t,"Sprite3D"),this.gameObject=new o(t,0,0,u,c),this.position=new a(e,n,r),this.size=new s(this.gameObject.width,this.gameObject.height),this.scale=new s(1,1),this.adjustScaleX=!0,this.adjustScaleY=!0,this._visible=!0},project:function(t){var e=this.position,n=this.gameObject;t.project(e,n),t.getPointSize(e,this.size,this.scale),this.scale.x<=0||this.scale.y<=0?n.setVisible(!1):(n.visible||n.setVisible(!0),this.adjustScaleX&&(n.scaleX=this.scale.x),this.adjustScaleY&&(n.scaleY=this.scale.y),n.setDepth(-1*n.z))},setVisible:function(t){return this.visible=t,this},visible:{get:function(){return this._visible},set:function(t){this._visible=t,this.gameObject.visible=t}},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},z:{get:function(){return this.position.z},set:function(t){this.position.z=t}}});t.exports=u},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(1671),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(50))},function(t,e,n){"use strict";e.factory=function(t,e,r,i){var o=r(n(75));return function t(e){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],a=Array.isArray(s);if(0===i&&a&&(r=s.length),a&&s.length!==r)return;var u=a?t(s):o(s);if(void 0===n)n=u;else if(n!==u)return"mixed"}return n}}},function(t,e,n){"use strict";var r=n(4);e.name="number",e.factory=function(t,e,n,i){var o=i("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e=Number(t);if(isNaN(e))throw new SyntaxError('String "'+t+'" is no valid number');return e},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},o}},function(t,e,n){"use strict";e.path="type",e.name="_numeric",e.factory=function(t,e,r,i){var o=r(n(75)),s={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:r(n(248)),BigNumber:r(n(683)),Fraction:r(n(366))},u=function(t,e){var n=o(t);if(!(n in s))throw new TypeError("Cannot convert "+t+' of type "'+n+'"; valid input types are '+Object.keys(s).join(", "));if(!(e in a))throw new TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(a).join(", "));return e===n?t:a[e](t)};return u.toTex=function(t,e){return t.args[0].toTex()},u}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm05",e.factory=function(t,e,i,o){var s=i(n(31)),a=t.SparseMatrix;return function(t,e,n){var i=t._values,u=t._index,c=t._ptr,h=t._size,l=t._datatype,f=e._values,d=e._index,p=e._ptr,m=e._size,v=e._datatype;if(h.length!==m.length)throw new r(h.length,m.length);if(h[0]!==m[0]||h[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+m+")");var g,y=h[0],b=h[1],x=s,w=0,E=n;"string"==typeof l&&l===v&&(g=l,x=o.find(s,[g,g]),w=o.convert(0,g),E=o.find(n,[g,g]));var _,S,T,A,M=i&&f?[]:void 0,C=[],O=[],N=new a({values:M,index:C,ptr:O,size:[y,b],datatype:g}),k=M?[]:void 0,R=M?[]:void 0,P=[],I=[];for(S=0;S<b;S++){O[S]=C.length;var D=S+1;for(T=c[S],A=c[S+1];T<A;T++)_=u[T],C.push(_),P[_]=D,k&&(k[_]=i[T]);for(T=p[S],A=p[S+1];T<A;T++)P[_=d[T]]!==D&&C.push(_),I[_]=D,R&&(R[_]=f[T]);if(M)for(T=O[S];T<C.length;){var L=P[_=C[T]],B=I[_];if(L===D||B===D){var F=E(L===D?k[_]:w,B===D?R[_]:w);x(F,w)?C.splice(T,1):(M.push(F),T++)}}}return O[b]=C.length,N}}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(7).toFixed,o=n(4),s="Number of decimals in function round must be an integer";function a(t,e){return parseFloat(i(t,e))}e.name="round",e.factory=function(t,e,i,u){var c=i(n(3)),h=i(n(31)),l=i(n(136)),f=i(n(56)),d=i(n(55)),p=i(n(18)),m=u("round",{number:function(t){return a(t,0)},"number, number":function(t,e){if(!r(e))throw new TypeError(s);if(e<0||e>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return a(t,e)},Complex:function(t){return t.round()},"Complex, number":function(t,e){if(e%1)throw new TypeError(s);return t.round(e)},"Complex, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(s);var n=e.toNumber();return t.round(n)},"number, BigNumber":function(e,n){if(!n.isInteger())throw new TypeError(s);return new t.BigNumber(e).toDecimalPlaces(n.toNumber())},BigNumber:function(t){return t.toDecimalPlaces(0)},"BigNumber, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(s);return t.toDecimalPlaces(e.toNumber())},Fraction:function(t){return t.round()},"Fraction, number":function(t,e){if(e%1)throw new TypeError(s);return t.round(e)},"Array | Matrix":function(t){return o(t,m,!0)},"SparseMatrix, number | BigNumber":function(t,e){return f(t,e,m,!1)},"DenseMatrix, number | BigNumber":function(t,e){return p(t,e,m,!1)},"number | Complex | BigNumber, SparseMatrix":function(t,e){return h(t,0)?l(e.size(),e.storage()):d(e,t,m,!0)},"number | Complex | BigNumber, DenseMatrix":function(t,e){return h(t,0)?l(e.size(),e.storage()):p(e,t,m,!0)},"Array, number | BigNumber":function(t,e){return p(c(t),e,m,!1).valueOf()},"number | Complex | BigNumber, Array":function(t,e){return p(c(e),t,m,!0).valueOf()}});return m.toTex={1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},m}},function(t,e,n){"use strict";e.name="ParenthesisNode",e.path="expression.node",e.factory=function(t,e,r,i){var o=r(n(49));function s(e){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError('Node expected for parameter "content"');this.content=e}return s.prototype=new o,s.prototype.type="ParenthesisNode",s.prototype.isParenthesisNode=!0,s.prototype._compile=function(t,e){return this.content._compile(t,e)},s.prototype.getContent=function(){return this.content.getContent()},s.prototype.forEach=function(t){t(this.content,"content",this)},s.prototype.map=function(t){return new s(t(this.content,"content",this))},s.prototype.clone=function(){return new s(this.content)},s.prototype._toString=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?"("+this.content.toString(t)+")":this.content.toString(t)},s.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},s.fromJSON=function(t){return new s(t.content)},s.prototype.toHTML=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(t)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(t)},s.prototype._toTex=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?"\\left(".concat(this.content.toTex(t),"\\right)"):this.content.toTex(t)},s}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var o=n(9),s=n(26).escape,a=n(15).hasOwnProperty,u=n(5).map,c=n(45).validateSafeMethod,h=n(45).getSafeProperty;e.name="FunctionNode",e.path="expression.node",e.math=!0,e.factory=function(t,e,l,f,d){var p=l(n(49)),m=l(n(165));function v(e,n){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new m(e)),!t.isNode(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(n)||!n.every(t.isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=n||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});var r=function(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")};Object.defineProperty(this,"object",{get:r,set:r})}v.prototype=new p,v.prototype.type="FunctionNode",v.prototype.isFunctionNode=!0,v.prototype._compile=function(e,n){if(!(this instanceof v))throw new TypeError("No valid FunctionNode");var r=u(this.args,function(t){return t._compile(e,n)});if(t.isSymbolNode(this.fn)){var o=this.fn.name,s=o in e?h(e,o):void 0;if("function"==typeof s&&!0===s.rawArgs){var a=this.args;return function(t,n,r){return(o in t?h(t,o):s)(a,e,i({},t,n))}}if(1===r.length){var l=r[0];return function(t,e,n){return(o in t?h(t,o):s)(l(t,e,n))}}if(2===r.length){var f=r[0],d=r[1];return function(t,e,n){return(o in t?h(t,o):s)(f(t,e,n),d(t,e,n))}}return function(t,e,n){return(o in t?h(t,o):s).apply(null,u(r,function(r){return r(t,e,n)}))}}if(t.isAccessorNode(this.fn)&&t.isIndexNode(this.fn.index)&&this.fn.index.isObjectProperty()){var p=this.fn.object._compile(e,n),m=this.fn.index.getObjectProperty(),g=this.args;return function(t,n,o){var s=p(t,n,o);return c(s,m),s[m]&&s[m].rawArgs?s[m](g,e,i({},t,n)):s[m].apply(s,u(r,function(e){return e(t,n,o)}))}}var y=this.fn._compile(e,n),b=this.args;return function(t,n,o){var s=y(t,n,o);return s&&s.rawArgs?s(b,e,i({},t,n)):s.apply(s,u(r,function(e){return e(t,n,o)}))}},v.prototype.forEach=function(t){t(this.fn,"fn",this);for(var e=0;e<this.args.length;e++)t(this.args[e],"args["+e+"]",this)},v.prototype.map=function(t){for(var e=this._ifNode(t(this.fn,"fn",this)),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(t(this.args[r],"args["+r+"]",this));return new v(e,n)},v.prototype.clone=function(){return new v(this.fn,this.args.slice(0))};var g=v.prototype.toString;function y(e,n,i){for(var o,s="",a=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),u=0;null!==(o=a.exec(e));)if(s+=e.substring(u,o.index),u=o.index,"$$"===o[0])s+="$",u++;else{u+=o[0].length;var c=n[o[1]];if(!c)throw new ReferenceError("Template: Property "+o[1]+" does not exist.");if(void 0===o[2])switch(r(c)){case"string":s+=c;break;case"object":if(t.isNode(c))s+=c.toTex(i);else{if(!Array.isArray(c))throw new TypeError("Template: "+o[1]+" has to be a Node, String or array of Nodes");s+=c.map(function(e,n){if(t.isNode(e))return e.toTex(i);throw new TypeError("Template: "+o[1]+"["+n+"] is not a Node.")}).join(",")}break;default:throw new TypeError("Template: "+o[1]+" has to be a Node, String or array of Nodes")}else{if(!t.isNode(c[o[2]]&&c[o[2]]))throw new TypeError("Template: "+o[1]+"["+o[2]+"] is not a Node.");s+=c[o[2]].toTex(i)}}return s+=e.slice(u)}v.prototype.toString=function(t){var e,n=this.fn.toString(t);return t&&"object"===r(t.handler)&&a(t.handler,n)&&(e=t.handler[n](this,t)),void 0!==e?e:g.call(this,t)},v.prototype._toString=function(e){var n=this.args.map(function(t){return t.toString(e)});return(t.isFunctionAssignmentNode(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+n.join(", ")+")"},v.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},v.fromJSON=function(t){return new v(t.fn,t.args)},v.prototype.toHTML=function(t){var e=this.args.map(function(e){return e.toHTML(t)});return'<span class="math-function">'+s(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var b=v.prototype.toTex;return v.prototype.toTex=function(t){var e;return t&&"object"===r(t.handler)&&a(t.handler,this.name)&&(e=t.handler[this.name](this,t)),void 0!==e?e:b.call(this,t)},v.prototype._toTex=function(t){var e,n,i=this.args.map(function(e){return e.toTex(t)});switch(!d[this.name]||"function"!=typeof d[this.name].toTex&&"object"!==r(d[this.name].toTex)&&"string"!=typeof d[this.name].toTex||(e=d[this.name].toTex),r(e)){case"function":n=e(this,t);break;case"string":n=y(e,this,t);break;case"object":switch(r(e[i.length])){case"function":n=e[i.length](this,t);break;case"string":n=y(e[i.length],this,t)}}return void 0!==n?n:y(o.defaultTemplate,this,t)},v.prototype.getIdentifier=function(){return this.type+":"+this.name},v}},function(t,e,n){"use strict";var r=n(104);e.name="inv",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(44)),u=i(n(53)),c=i(n(28)),h=i(n(120)),l=i(n(706)),f=i(n(161)),d=i(n(68)),p=o("inv",{"Array | Matrix":function(e){var n=t.isMatrix(e)?e.size():r.array.size(e);switch(n.length){case 1:if(1===n[0])return t.isMatrix(e)?s([a(1,e.valueOf()[0])]):[a(1,e[0])];throw new RangeError("Matrix must be square (size: "+r.string.format(n)+")");case 2:var i=n[0],o=n[1];if(i===o)return t.isMatrix(e)?s(m(e.valueOf(),i,o),e.storage()):m(e,i,o);throw new RangeError("Matrix must be square (size: "+r.string.format(n)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+r.string.format(n)+")")}},any:function(t){return a(1,t)}});function m(t,e,n){var r,i,o,s,p;if(1===e){if(0===(s=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[a(1,s)]]}if(2===e){var m=l(t);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[a(t[1][1],m),a(h(t[0][1]),m)],[a(h(t[1][0]),m),a(t[0][0],m)]]}var v=t.concat();for(r=0;r<e;r++)v[r]=v[r].concat();for(var g=f(e).valueOf(),y=0;y<n;y++){var b=d(v[y][y]),x=y;for(r=y+1;r<e;)d(v[r][y])>b&&(b=d(v[r][y]),x=r),r++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(r=x)!==y&&(p=v[y],v[y]=v[r],v[r]=p,p=g[y],g[y]=g[r],g[r]=p);var w=v[y],E=g[y];for(r=0;r<e;r++){var _=v[r],S=g[r];if(r!==y){if(0!==_[y]){for(o=a(h(_[y]),w[y]),i=y;i<n;i++)_[i]=u(_[i],c(o,w[i]));for(i=0;i<n;i++)S[i]=u(S[i],c(o,E[i]))}}else{for(o=w[y],i=y;i<n;i++)_[i]=a(_[i],o);for(i=0;i<n;i++)S[i]=a(S[i],o)}}}return g}return p.toTex={1:"\\left(${args[0]}\\right)^{-1}"},p}},function(t,e,n){"use strict";var r=n(4);e.name="conj",e.factory=function(t,e,n,i){var o=i("conj",{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.conjugate()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\left(${args[0]}\\right)^*"},o}},function(t,e,n){"use strict";var r=n(15).clone,i=n(26).format;e.name="transpose",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=t.DenseMatrix,h=t.SparseMatrix,l=s("transpose",{Array:function(t){return l(u(t)).valueOf()},Matrix:function(t){var e,n=t.size();switch(n.length){case 1:e=t.clone();break;case 2:var o=n[0],s=n[1];if(0===s)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+i(n)+")");switch(t.storage()){case"dense":e=function(t,e,n){for(var i,o=t._data,s=[],a=0;a<n;a++){i=s[a]=[];for(var u=0;u<e;u++)i[u]=r(o[u][a])}return new c({data:s,size:[n,e],datatype:t._datatype})}(t,o,s);break;case"sparse":e=function(t,e,n){for(var i,o,s,a=t._values,u=t._index,c=t._ptr,l=a?[]:void 0,f=[],d=[],p=[],m=0;m<e;m++)p[m]=0;for(i=0,o=u.length;i<o;i++)p[u[i]]++;for(var v=0,g=0;g<e;g++)d.push(v),v+=p[g],p[g]=d[g];for(d.push(v),s=0;s<n;s++)for(var y=c[s],b=c[s+1],x=y;x<b;x++){var w=p[u[x]]++;f[w]=s,a&&(l[w]=r(a[x]))}return new h({values:l,index:f,ptr:d,size:[n,e],datatype:t._datatype})}(t,o,s)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+i(this._size)+")")}return e},any:function(t){return r(t)}});return l.toTex={1:"\\left(${args[0]}\\right)".concat(a.operators.transpose)},l}},function(t,e,n){"use strict";var r=n(4);e.name="isPositive",e.factory=function(t,e,n,i){var o=i("isPositive",{number:function(t){return t>0},BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:function(t){return o(t.value)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(1746),i=n(39);e.name="algorithm06",e.factory=function(t,e,o,s){var a=o(n(31)),u=t.SparseMatrix;return function(t,e,n){var o=t._values,c=t._size,h=t._datatype,l=e._values,f=e._size,d=e._datatype;if(c.length!==f.length)throw new i(c.length,f.length);if(c[0]!==f[0]||c[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+f+")");var p,m=c[0],v=c[1],g=a,y=0,b=n;"string"==typeof h&&h===d&&(p=h,g=s.find(a,[p,p]),y=s.convert(0,p),b=s.find(n,[p,p]));for(var x=o&&l?[]:void 0,w=[],E=[],_=new u({values:x,index:w,ptr:E,size:[m,v],datatype:p}),S=x?[]:void 0,T=[],A=[],M=0;M<v;M++){E[M]=w.length;var C=M+1;if(r(t,M,T,S,A,C,_,b),r(e,M,T,S,A,C,_,b),S)for(var O=E[M];O<w.length;){var N=w[O];if(A[N]===C){var k=S[N];g(k,y)?w.splice(O,1):(x.push(k),O++)}else w.splice(O,1)}else for(var R=E[M];R<w.length;)A[w[R]]!==C?w.splice(R,1):R++}return E[v]=w.length,_}}},function(t,e,n){"use strict";var r=n(4);e.name="factorial",e.factory=function(t,e,i,o){var s=i(n(719)),a=n(9),u=o("factorial",{number:function(t){if(t<0)throw new Error("Value must be non-negative");return s(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return s(t.plus(1))},"Array | Matrix":function(t){return r(t,u)}});return u.toTex={1:"\\left(${args[0]}\\right)".concat(a.operators.factorial)},u}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(378);function o(t){return t.isInteger()&&t.gte(0)}e.name="combinations",e.factory=function(t,e,n,s){var a=s("combinations",{"number, number":function(t,e){var n;if(!r(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!r(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");return e<(n=t-e)?i(n+1,t)/i(1,e):i(e+1,t)/i(1,n)},"BigNumber, BigNumber":function(e,n){var r,i,s,a,u=new t.BigNumber(1);if(!o(e)||!o(n))throw new TypeError("Positive integer value expected in function combinations");if(n.gt(e))throw new TypeError("k must be less than n in function combinations");for(r=e.minus(n),n.lt(r)&&(r=n),i=u,s=u,a=e.minus(r);s.lte(a);s=s.plus(1))i=i.times(r.plus(s)).dividedBy(s);return i}});return a.toTex={2:"\\binom{${args[0]}}{${args[1]}}"},a}},function(t,e,n){"use strict";e.name="range",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(119)),a=r(n(106)),u=r(n(722)),c=r(n(372)),h=new t.BigNumber(0),l=new t.BigNumber(1),f=i("range",{string:p,"string, boolean":p,"number, number":function(t,e){return d(m(t,e,1))},"number, number, number":function(t,e,n){return d(m(t,e,n))},"number, number, boolean":function(t,e,n){return d(n?v(t,e,1):m(t,e,1))},"number, number, number, boolean":function(t,e,n,r){return d(r?v(t,e,n):m(t,e,n))},"BigNumber, BigNumber":function(t,e){return d(g(t,e,l))},"BigNumber, BigNumber, BigNumber":function(t,e,n){return d(g(t,e,n))},"BigNumber, BigNumber, boolean":function(t,e,n){return d(n?y(t,e,l):g(t,e,l))},"BigNumber, BigNumber, BigNumber, boolean":function(t,e,n,r){return d(r?y(t,e,n):g(t,e,n))}});return f.toTex=void 0,f;function d(t){return"Array"===e.matrix?t:o(t)}function p(n,r){var i=function(t){var e=t.split(":").map(function(t){return Number(t)});if(e.some(function(t){return isNaN(t)}))return null;switch(e.length){case 2:return{start:e[0],end:e[1],step:1};case 3:return{start:e[0],end:e[2],step:e[1]};default:return null}}(n);if(!i)throw new SyntaxError('String "'+n+'" is no valid range');return"BigNumber"===e.number?d((r?y:g)(new t.BigNumber(i.start),new t.BigNumber(i.end),new t.BigNumber(i.step))):d((r?v:m)(i.start,i.end,i.step))}function m(t,e,n){var r=[],i=t;if(n>0)for(;s(i,e);)r.push(i),i+=n;else if(n<0)for(;a(i,e);)r.push(i),i+=n;return r}function v(t,e,n){var r=[],i=t;if(n>0)for(;u(i,e);)r.push(i),i+=n;else if(n<0)for(;c(i,e);)r.push(i),i+=n;return r}function g(t,e,n){var r=[],i=t;if(n.gt(h))for(;s(i,e);)r.push(i),i=i.plus(n);else if(n.lt(h))for(;a(i,e);)r.push(i),i=i.plus(n);return r}function y(t,e,n){var r=[],i=t;if(n.gt(h))for(;u(i,e);)r.push(i),i=i.plus(n);else if(n.lt(h))for(;c(i,e);)r.push(i),i=i.plus(n);return r}}},function(t,e,n){"use strict";var r=n(15).clone,i=n(5),o=n(159),s=n(39);function a(t,e,n,r){if(r<n){if(t.length!==e.length)throw new s(t.length,e.length);for(var i=[],o=0;o<t.length;o++)i[o]=a(t[o],e[o],n,r+1);return i}return t.concat(e)}e.name="concat",e.factory=function(t,e,u,c){var h=u(n(3)),l=u(n(107)),f=c("concat",{"...Array | Matrix | number | BigNumber":function(e){var n,u,c=e.length,f=-1,d=!1,p=[];for(n=0;n<c;n++){var m=e[n];if(t.isMatrix(m)&&(d=!0),t.isNumber(m)||t.isBigNumber(m)){if(n!==c-1)throw new Error("Dimension must be specified as last argument");if(u=f,f=m.valueOf(),!l(f))throw new TypeError("Integer number expected for dimension");if(f<0||n>0&&f>u)throw new o(f,u+1)}else{var v=r(m).valueOf(),g=i.size(v);if(p[n]=v,u=f,f=g.length-1,n>0&&f!==u)throw new s(u+1,f+1)}}if(0===p.length)throw new SyntaxError("At least one matrix expected");for(var y=p.shift();p.length;)y=a(y,p.shift(),f,0);return d?h(y):y},"...string":function(t){return t.join("")}});return f.toTex=void 0,f}},function(t,e,n){"use strict";var r=n(4);e.name="isNaN",e.factory=function(t,e,n,i){return i("isNaN",{number:function(t){return Number.isNaN(t)},BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":function(t){return r(t,Number.isNaN)}})}},function(t,e,n){"use strict";var r=n(5).size,i=n(190),o=n(159);function s(t,e,n){var r,i,o,a;if(e<=0){if(Array.isArray(t[0])){for(a=function(t){var e,n,r=t.length,i=t[0].length,o=[];for(n=0;n<i;n++){var s=[];for(e=0;e<r;e++)s.push(t[e][n]);o.push(s)}return o}(t),i=[],r=0;r<a.length;r++)i[r]=s(a[r],e-1,n);return i}for(o=t[0],r=1;r<t.length;r++)o=n(o,t[r]);return o}for(i=[],r=0;r<t.length;r++)i[r]=s(t[r],e-1,n);return i}t.exports=function(t,e,n){var a=Array.isArray(t)?r(t):t.size();if(e<0||e>=a.length)throw new o(e,a.length);return i(t)?t.create(s(t.valueOf(),e,n)):s(t,e,n)}},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,n(81))},function(t,e,n){var r=n(11).Buffer;function i(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,n=new Array(e),i=0;i<e;i++)n[i]=t.readUInt32BE(4*i);return n}function o(t){for(;0<t.length;t++)t[0]=0}function s(t,e,n,r,i){for(var o,s,a,u,c=n[0],h=n[1],l=n[2],f=n[3],d=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],v=t[3]^e[3],g=4,y=1;y<i;y++)o=c[d>>>24]^h[p>>>16&255]^l[m>>>8&255]^f[255&v]^e[g++],s=c[p>>>24]^h[m>>>16&255]^l[v>>>8&255]^f[255&d]^e[g++],a=c[m>>>24]^h[v>>>16&255]^l[d>>>8&255]^f[255&p]^e[g++],u=c[v>>>24]^h[d>>>16&255]^l[p>>>8&255]^f[255&m]^e[g++],d=o,p=s,m=a,v=u;return o=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&v])^e[g++],s=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[v>>>8&255]<<8|r[255&d])^e[g++],a=(r[m>>>24]<<24|r[v>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^e[g++],u=(r[v>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^e[g++],[o>>>=0,s>>>=0,a>>>=0,u>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=[],r=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,u=0;u<256;++u){var c=a^a<<1^a<<2^a<<3^a<<4;c=c>>>8^255&c^99,n[s]=c,r[c]=s;var h=t[s],l=t[h],f=t[l],d=257*t[c]^16843008*c;i[0][s]=d<<24|d>>>8,i[1][s]=d<<16|d>>>16,i[2][s]=d<<8|d>>>24,i[3][s]=d,d=16843009*f^65537*l^257*h^16843008*s,o[0][c]=d<<24|d>>>8,o[1][c]=d<<16|d>>>16,o[2][c]=d<<8|d>>>24,o[3][c]=d,0===s?s=a=1:(s=h^t[t[t[f^h]]],a^=t[t[a]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:o}}();function c(t){this._key=i(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,r=4*(n+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<r;o++){var s=i[o-1];o%e==0?(s=s<<8|s>>>24,s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s],s^=a[o/e|0]<<24):e>6&&o%e==4&&(s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s]),i[o]=i[o-e]^s}for(var c=[],h=0;h<r;h++){var l=r-h,f=i[l-(h%4?0:4)];c[h]=h<4||l<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(t){return s(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=r.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n},c.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var n=s(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=r.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=c},function(t,e,n){var r=n(11).Buffer,i=n(386);t.exports=function(t,e,n,o){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,a=r.alloc(s),u=r.alloc(o||0),c=r.alloc(0);s>0||o>0;){var h=new i;h.update(c),h.update(t),e&&h.update(e),c=h.digest();var l=0;if(s>0){var f=a.length-s;l=Math.min(s,c.length),c.copy(a,f,0,l),s-=l}if(l<c.length&&o>0){var d=u.length-o,p=Math.min(o,c.length-l);c.copy(u,d,l,l+p),o-=p}}return c.fill(0),{key:a,iv:u}}},function(t,e,n){"use strict";var r=n(32),i=n(70),o=i.getNAF,s=i.getJSF,a=i.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){a(t.precomputed);var n=t._getDoubles(),r=o(e,1),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;for(var s=[],u=0;u<r.length;u+=n.step){var c=0;for(e=u+n.step-1;e>=u;e--)c=(c<<1)+r[e];s.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=i;f>0;f--){for(u=0;u<s.length;u++){(c=s[u])===f?l=l.mixedAdd(n.points[u]):c===-f&&(l=l.mixedAdd(n.points[u].neg()))}h=h.add(l)}return h.toP()},u.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,s=o(e,n),u=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(e=0;c>=0&&0===s[c];c--)e++;if(c>=0&&e++,u=u.dblp(e),c<0)break;var h=s[c];a(0!==h),u="affine"===t.type?h>0?u.mixedAdd(i[h-1>>1]):u.mixedAdd(i[-h-1>>1].neg()):h>0?u.add(i[h-1>>1]):u.add(i[-h-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,n,r,i){for(var a=this._wnafT1,u=this._wnafT2,c=this._wnafT3,h=0,l=0;l<r;l++){var f=(T=e[l])._getNAFPoints(t);a[l]=f.wnd,u[l]=f.points}for(l=r-1;l>=1;l-=2){var d=l-1,p=l;if(1===a[d]&&1===a[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],g=s(n[d],n[p]);h=Math.max(g[0].length,h),c[d]=new Array(h),c[p]=new Array(h);for(var y=0;y<h;y++){var b=0|g[0][y],x=0|g[1][y];c[d][y]=v[3*(b+1)+(x+1)],c[p][y]=0,u[d]=m}}else c[d]=o(n[d],a[d]),c[p]=o(n[p],a[p]),h=Math.max(c[d].length,h),h=Math.max(c[p].length,h)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(l=h;l>=0;l--){for(var _=0;l>=0;){var S=!0;for(y=0;y<r;y++)E[y]=0|c[y][l],0!==E[y]&&(S=!1);if(!S)break;_++,l--}if(l>=0&&_++,w=w.dblp(_),l<0)break;for(y=0;y<r;y++){var T,A=E[y];0!==A&&(A>0?T=u[y][A-1>>1]:A<0&&(T=u[y][-A-1>>1].neg()),w="affine"===T.type?w.mixedAdd(T):w.add(T))}}for(l=0;l<r;l++)u[l]=null;return i?w:w.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},function(t,e,n){var r=n(2161),i=n(2172),o=n(2173),s=n(395),a=n(749),u=n(11).Buffer;function c(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var n,c,h=o(t,e),l=h.tag,f=h.data;switch(l){case"CERTIFICATE":c=r.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(f,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+l);case"ENCRYPTED PRIVATE KEY":f=function(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,h=t.subjectPrivateKey,l=parseInt(o.split("-")[1],10)/8,f=a.pbkdf2Sync(e,n,r,l,"sha1"),d=s.createDecipheriv(o,f,c),p=[];return p.push(d.update(h)),p.push(d.final()),u.concat(p)}(f=r.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(n=(c=r.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+l);case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=r.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+l)}}t.exports=c,c.signature=r.signature},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(50))},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){return void 0===n&&(n=new r),n.x=t.x+t.radius*Math.cos(e),n.y=t.y+t.radius*Math.sin(e),n}},function(t,e,n){var r=n(12);t.exports=function(t,e){void 0===e&&(e=new r);var n=2*Math.PI*Math.random(),i=Math.random()+Math.random(),o=i>1?2-i:i,s=o*Math.cos(n),a=o*Math.sin(n);return e.x=t.x+s*t.radius,e.y=t.y+a*t.radius,e}},function(t,e,n){var r=n(40),i=n(0),o=n(20),s=n(207),a=n(420),u=n(421),c=n(14),h=new i({Extends:o,initialize:function(t,e,n){o.call(this),this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,c(n,"frames",[]),c(n,"defaultTextureKey",null)),this.frameRate=c(n,"frameRate",null),this.duration=c(n,"duration",null),null===this.duration&&null===this.frameRate?(this.frameRate=24,this.duration=this.frameRate/this.frames.length*1e3):this.duration&&null===this.frameRate?this.frameRate=this.frames.length/(this.duration/1e3):this.duration=this.frames.length/this.frameRate*1e3,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=c(n,"skipMissedFrames",!0),this.delay=c(n,"delay",0),this.repeat=c(n,"repeat",0),this.repeatDelay=c(n,"repeatDelay",0),this.yoyo=c(n,"yoyo",!1),this.showOnStart=c(n,"showOnStart",!1),this.hideOnComplete=c(n,"hideOnComplete",!1),this.paused=!1,this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this)},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var n=this.getFrames(this.manager.textureManager,e);if(n.length>0){if(0===t)this.frames=n.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(n);else{var r=this.frames.slice(0,t),i=this.frames.slice(t);this.frames=r.concat(n,i)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},completeAnimation:function(t){this.hideOnComplete&&(t.parent.visible=!1),t.stop()},getFirstTick:function(t,e){void 0===e&&(e=!0),t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration,e&&(t.nextTick+=t._delay)},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,n){var r,i,o,s,a=[],h=1;if("string"==typeof e){s=e;var l=t.get(s).getFrameNames();e=[],l.forEach(function(t,n){e.push({key:s,frame:n})})}if(!Array.isArray(e)||0===e.length)return a;for(o=0;o<e.length;o++){var f=e[o],d=c(f,"key",n);if(d){var p=c(f,"frame",0),m=t.getFrame(d,p);(i=new u(d,p,h,m)).duration=c(f,"duration",0),i.isFirst=!r,r&&(r.nextFrame=i,i.prevFrame=r),a.push(i),r=i,h++}}if(a.length>0){i.isLast=!0,i.nextFrame=a[0],a[0].prevFrame=i;var v=1/(a.length-1);for(o=0;o<a.length;o++)a[o].progress=o*v}return a},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},load:function(t,e){e>=this.frames.length&&(e=0),t.currentAnim!==this&&(t.currentAnim=this,t.frameRate=this.frameRate,t.duration=this.duration,t.msPerFrame=this.msPerFrame,t.skipMissedFrames=this.skipMissedFrames,t._delay=this.delay,t._repeat=this.repeat,t._repeatDelay=this.repeatDelay,t._yoyo=this.yoyo);var n=this.frames[e];0!==e||t.forward||(n=this.getLastFrame()),t.updateFrame(n)},getFrameByProgress:function(t){return t=r(t,0,1),a(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t._yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t._reverse&&t.forward?t.forward=!1:this.repeatAnimation(t):this.completeAnimation(t):this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e||(e=!1),t._reverse===!e&&t.repeatCounter>0)return t.forward=e,void this.repeatAnimation(t);if(t._reverse===e||0!==t.repeatCounter){t.forward=e;var n=e?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,n)}else this.completeAnimation(t)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t._yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?t._reverse&&!t.forward?(t.currentFrame=this.getLastFrame(),this.repeatAnimation(t)):(t.forward=!0,this.repeatAnimation(t)):this.completeAnimation(t):this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.updateFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop)return this.completeAnimation(t);if(t._repeatDelay>0&&!1===t.pendingRepeat)t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t._repeatDelay;else if(t.repeatCounter--,t.updateFrame(t.currentFrame[t.forward?"nextFrame":"prevFrame"]),t.isPlaying){this.getNextTick(t),t.pendingRepeat=!1;var e=t.currentFrame,n=t.parent;this.emit(s.ANIMATION_REPEAT,this,e),n.emit(s.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,e,t.repeatCounter,n),n.emit(s.SPRITE_ANIMATION_REPEAT,this,e,t.repeatCounter,n)}},setFrame:function(t){t.forward?this.nextFrame(t):this.previousFrame(t)},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(e){t.frames.push(e.toJSON())}),t},updateFrameSequence:function(){for(var t=this.frames.length,e=1/(t-1),n=0;n<t;n++){var r=this.frames[n];r.index=n+1,r.isFirst=!1,r.isLast=!1,r.progress=n*e,0===n?(r.isFirst=!0,r.isLast=1===t,r.prevFrame=this.frames[t-1],r.nextFrame=this.frames[n+1]):n===t-1?(r.isLast=!0,r.prevFrame=this.frames[t-2],r.nextFrame=this.frames[0]):t>1&&(r.prevFrame=this.frames[n-1],r.nextFrame=this.frames[n+1])}return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.removeAllListeners(),this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=h},function(t,e,n){var r=n(208),i=n(12);t.exports=function(t,e,n){if(void 0===n&&(n=new i),e<=0||e>=1)return n.x=t.x,n.y=t.y,n;var o=r(t)*e;return e>.5?(o-=t.width+t.height)<=t.width?(n.x=t.right-o,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(o-t.width)):o<=t.width?(n.x=t.x+o,n.y=t.y):(n.x=t.right,n.y=t.y+(o-t.width)),n}},function(t,e,n){var r=n(110),i=n(12);t.exports=function(t,e,n,o){void 0===o&&(o=[]),e||(e=r(t)/n);for(var s=t.x1,a=t.y1,u=t.x2,c=t.y2,h=0;h<e;h++){var l=h/e,f=s+(u-s)*l,d=a+(c-a)*l;o.push(new i(f,d))}return o}},function(t,e,n){var r=n(12);t.exports=function(t,e){void 0===e&&(e=new r);var n=Math.random();return e.x=t.x1+n*(t.x2-t.x1),e.y=t.y1+n*(t.y2-t.y1),e}},function(t,e,n){var r=n(12);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e,n){var r=n(111);t.exports=function(t){return r(t,-Math.PI,Math.PI)}},function(t,e,n){var r=n(111);t.exports=function(t){return r(t,-180,180)}},function(t,e,n){var r=n(12);t.exports=function(t,e){void 0===e&&(e=new r);var n=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return e.x=t.x+i*Math.cos(n)*t.width/2,e.y=t.y+i*Math.sin(n)*t.height/2,e}},function(t,e,n){var r=n(12);t.exports=function(t,e){void 0===e&&(e=new r);var n=t.x2-t.x1,i=t.y2-t.y1,o=t.x3-t.x1,s=t.y3-t.y1,a=Math.random(),u=Math.random();return a+u>=1&&(a=1-a,u=1-u),e.x=t.x1+(n*a+o*u),e.y=t.y1+(i*a+s*u),e}},function(t,e){t.exports=function(t,e,n,r,i){var o=r+Math.atan2(t.y-n,t.x-e);return t.x=e+i*Math.cos(o),t.y=n+i*Math.sin(o),t}},function(t,e){t.exports=function(t,e,n){return(t=Math.max(0,Math.min(1,(t-e)/(n-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)}},function(t,e,n){var r=new(n(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var n in e)t.push(e[n]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(t){delete this.entries[t]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var n in e)t.push(e[n]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var n in e)if(!1===t(n,e[n]))break;return this},contains:function(t){var e=this.entries;for(var n in e)if(e[n]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var n=this.entries,r=t.entries;for(var i in r)n.hasOwnProperty(i)&&e?n[i]=r[i]:this.set(i,r[i]);return this}});t.exports=r},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=" "),void 0===r&&(r=3);var i=0;if(e+1>=(t=t.toString()).length)switch(r){case 1:t=new Array(e+1-t.length).join(n)+t;break;case 3:var o=Math.ceil((i=e-t.length)/2);t=new Array(i-o+1).join(n)+t+new Array(o+1).join(n);break;default:t+=new Array(e+1-t.length).join(n)}return t}},function(t,e,n){var r=n(444),i=n(447),o=n(449),s=n(450);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?s(t):r(t);case"number":return i(t);case"object":return o(t)}}},function(t,e){t.exports=function(t,e,n){return t<<16|e<<8|n}},function(t,e,n){var r=n(289);t.exports=function(t,e,n,i){void 0===e&&(e=1),void 0===n&&(n=1);var o=Math.floor(6*t),s=6*t-o,a=Math.floor(n*(1-e)*255),u=Math.floor(n*(1-s*e)*255),c=Math.floor(n*(1-(1-s)*e)*255),h=n=Math.floor(n*=255),l=n,f=n,d=o%6;return 0===d?(l=c,f=a):1===d?(h=u,f=a):2===d?(h=a,f=c):3===d?(h=a,l=u):4===d?(h=c,l=a):5===d&&(l=a,f=u),i?i.setTo?i.setTo(h,l,f,i.alpha,!1):(i.r=h,i.g=l,i.b=f,i.color=r(h,l,f),i):{r:h,g:l,b:f,color:r(h,l,f)}}},function(t,e){t.exports=function(t,e,n){return t.x=e-t.width/2,t.y=n-t.height/2,t}},function(t,e,n){var r=n(452),i=n(453),o=n(454),s=n(455),a=n(456),u=n(457),c=n(458),h=n(459),l=n(460),f=n(461),d=n(462),p=n(463);t.exports={Power0:c,Power1:h.Out,Power2:s.Out,Power3:l.Out,Power4:f.Out,Linear:c,Quad:h.Out,Cubic:s.Out,Quart:l.Out,Quint:f.Out,Sine:d.Out,Expo:u.Out,Circ:o.Out,Elastic:a.Out,Back:r.Out,Bounce:i.Out,Stepped:p,"Quad.easeIn":h.In,"Cubic.easeIn":s.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":d.In,"Expo.easeIn":u.In,"Circ.easeIn":o.In,"Elastic.easeIn":a.In,"Back.easeIn":r.In,"Bounce.easeIn":i.In,"Quad.easeOut":h.Out,"Cubic.easeOut":s.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":d.Out,"Expo.easeOut":u.Out,"Circ.easeOut":o.Out,"Elastic.easeOut":a.Out,"Back.easeOut":r.Out,"Bounce.easeOut":i.Out,"Quad.easeInOut":h.InOut,"Cubic.easeInOut":s.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":d.InOut,"Expo.easeInOut":u.InOut,"Circ.easeInOut":o.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":i.InOut}},function(t,e,n){var r=n(215),i=n(216),o=n(51),s={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){s.canvas=!!window.CanvasRenderingContext2D;try{s.localStorage=!!localStorage.getItem}catch(t){s.localStorage=!1}s.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),s.fileSystem=!!window.requestFileSystem;var t,e,n,a=!1;return s.webGL=function(){if(window.WebGLRenderingContext)try{var t=o.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),n=o.create2D(this),r=n.getContext("2d").createImageData(1,1);return a=r.data instanceof Uint8ClampedArray,o.remove(t),o.remove(n),!!e}catch(t){return!1}return!1}(),s.worker=!!window.Worker,s.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,s.getUserMedia=s.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,i.firefox&&i.firefoxVersion<21&&(s.getUserMedia=!1),!r.iOS&&(i.ie||i.firefox||i.chrome)&&(s.canvasBitBltShift=!0),(i.safari||i.mobileSafari)&&(s.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(s.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(s.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===n[0]||2712847316!==n[0]&&null)),s.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==s.littleEndian&&a,s}()},function(t,e,n){var r=n(41),i=n(37),o={Angle:n(978),Distance:n(986),Easing:n(988),Fuzzy:n(989),Interpolation:n(992),Pow2:n(997),Snap:n(999),RandomDataGenerator:n(1001),Average:n(1002),Bernstein:n(472),Between:n(297),CatmullRom:n(296),CeilTo:n(1003),Clamp:n(40),DegToRad:n(80),Difference:n(1004),Factorial:n(473),FloatBetween:n(479),FloorTo:n(1005),FromPercent:n(172),GetSpeed:n(1006),IsEven:n(1007),IsEvenStrict:n(1008),Linear:n(214),MaxAdd:n(1009),MinSub:n(1010),Percent:n(1011),RadToDeg:n(298),RandomXY:n(1012),RandomXYZ:n(480),RandomXYZW:n(481),Rotate:n(482),RotateAround:n(426),RotateAroundDistance:n(283),RoundAwayFromZero:n(483),RoundTo:n(1013),SinCosTableGenerator:n(1014),SmootherStep:n(284),SmoothStep:n(285),TransformXY:n(484),Within:n(1015),Wrap:n(111),Vector2:n(8),Vector3:n(147),Vector4:n(218),Matrix3:n(485),Matrix4:n(299),Quaternion:n(486),RotateVec3:n(487)};o=i(!1,o,r),t.exports=o},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),Math.abs(t-e)<n}},function(t,e){t.exports=function(t,e,n,r,i){var o=.5*(r-e),s=.5*(i-n),a=t*t;return(2*n-2*r+o+s)*(t*a)+(-3*n+3*r-2*o-s)*a+o*t+n}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,n){var r=n(41);t.exports=function(t){return t*r.RAD_TO_DEG}},function(t,e,n){var r=n(0),i=new r({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new i(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,n=t.val;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},zero:function(){var t=this.val;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,this},xyz:function(t,e,n){this.identity();var r=this.val;return r[12]=t,r[13]=e,r[14]=n,this},scaling:function(t,e,n){this.zero();var r=this.val;return r[0]=t,r[5]=e,r[10]=n,r[15]=1,this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},transpose:function(){var t=this.val,e=t[1],n=t[2],r=t[3],i=t[6],o=t[7],s=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=i,t[11]=t[14],t[12]=r,t[13]=o,t[14]=s,this},invert:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15],g=e*s-n*o,y=e*a-r*o,b=e*u-i*o,x=n*a-r*s,w=n*u-i*s,E=r*u-i*a,_=c*p-h*d,S=c*m-l*d,T=c*v-f*d,A=h*m-l*p,M=h*v-f*p,C=l*v-f*m,O=g*C-y*M+b*A+x*T-w*S+E*_;return O?(O=1/O,t[0]=(s*C-a*M+u*A)*O,t[1]=(r*M-n*C-i*A)*O,t[2]=(p*E-m*w+v*x)*O,t[3]=(l*w-h*E-f*x)*O,t[4]=(a*T-o*C-u*S)*O,t[5]=(e*C-r*T+i*S)*O,t[6]=(m*b-d*E-v*y)*O,t[7]=(c*E-l*b+f*y)*O,t[8]=(o*M-s*T+u*_)*O,t[9]=(n*T-e*M-i*_)*O,t[10]=(d*w-p*b+v*g)*O,t[11]=(h*b-c*w-f*g)*O,t[12]=(s*S-o*A-a*_)*O,t[13]=(e*A-n*S+r*_)*O,t[14]=(p*y-d*x-m*g)*O,t[15]=(c*x-h*y+l*g)*O,this):null},adjoint:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15];return t[0]=s*(l*v-f*m)-h*(a*v-u*m)+p*(a*f-u*l),t[1]=-(n*(l*v-f*m)-h*(r*v-i*m)+p*(r*f-i*l)),t[2]=n*(a*v-u*m)-s*(r*v-i*m)+p*(r*u-i*a),t[3]=-(n*(a*f-u*l)-s*(r*f-i*l)+h*(r*u-i*a)),t[4]=-(o*(l*v-f*m)-c*(a*v-u*m)+d*(a*f-u*l)),t[5]=e*(l*v-f*m)-c*(r*v-i*m)+d*(r*f-i*l),t[6]=-(e*(a*v-u*m)-o*(r*v-i*m)+d*(r*u-i*a)),t[7]=e*(a*f-u*l)-o*(r*f-i*l)+c*(r*u-i*a),t[8]=o*(h*v-f*p)-c*(s*v-u*p)+d*(s*f-u*h),t[9]=-(e*(h*v-f*p)-c*(n*v-i*p)+d*(n*f-i*h)),t[10]=e*(s*v-u*p)-o*(n*v-i*p)+d*(n*u-i*s),t[11]=-(e*(s*f-u*h)-o*(n*f-i*h)+c*(n*u-i*s)),t[12]=-(o*(h*m-l*p)-c*(s*m-a*p)+d*(s*l-a*h)),t[13]=e*(h*m-l*p)-c*(n*m-r*p)+d*(n*l-r*h),t[14]=-(e*(s*m-a*p)-o*(n*m-r*p)+d*(n*a-r*s)),t[15]=e*(s*l-a*h)-o*(n*l-r*h)+c*(n*a-r*s),this},determinant:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15];return(e*s-n*o)*(l*v-f*m)-(e*a-r*o)*(h*v-f*p)+(e*u-i*o)*(h*m-l*p)+(n*a-r*s)*(c*v-f*d)-(n*u-i*s)*(c*m-l*d)+(r*u-i*a)*(c*p-h*d)},multiply:function(t){var e=this.val,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],h=e[8],l=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=t.val,b=y[0],x=y[1],w=y[2],E=y[3];return e[0]=b*n+x*s+w*h+E*p,e[1]=b*r+x*a+w*l+E*m,e[2]=b*i+x*u+w*f+E*v,e[3]=b*o+x*c+w*d+E*g,b=y[4],x=y[5],w=y[6],E=y[7],e[4]=b*n+x*s+w*h+E*p,e[5]=b*r+x*a+w*l+E*m,e[6]=b*i+x*u+w*f+E*v,e[7]=b*o+x*c+w*d+E*g,b=y[8],x=y[9],w=y[10],E=y[11],e[8]=b*n+x*s+w*h+E*p,e[9]=b*r+x*a+w*l+E*m,e[10]=b*i+x*u+w*f+E*v,e[11]=b*o+x*c+w*d+E*g,b=y[12],x=y[13],w=y[14],E=y[15],e[12]=b*n+x*s+w*h+E*p,e[13]=b*r+x*a+w*l+E*m,e[14]=b*i+x*u+w*f+E*v,e[15]=b*o+x*c+w*d+E*g,this},multiplyLocal:function(t){var e=[],n=this.val,r=t.val;return e[0]=n[0]*r[0]+n[1]*r[4]+n[2]*r[8]+n[3]*r[12],e[1]=n[0]*r[1]+n[1]*r[5]+n[2]*r[9]+n[3]*r[13],e[2]=n[0]*r[2]+n[1]*r[6]+n[2]*r[10]+n[3]*r[14],e[3]=n[0]*r[3]+n[1]*r[7]+n[2]*r[11]+n[3]*r[15],e[4]=n[4]*r[0]+n[5]*r[4]+n[6]*r[8]+n[7]*r[12],e[5]=n[4]*r[1]+n[5]*r[5]+n[6]*r[9]+n[7]*r[13],e[6]=n[4]*r[2]+n[5]*r[6]+n[6]*r[10]+n[7]*r[14],e[7]=n[4]*r[3]+n[5]*r[7]+n[6]*r[11]+n[7]*r[15],e[8]=n[8]*r[0]+n[9]*r[4]+n[10]*r[8]+n[11]*r[12],e[9]=n[8]*r[1]+n[9]*r[5]+n[10]*r[9]+n[11]*r[13],e[10]=n[8]*r[2]+n[9]*r[6]+n[10]*r[10]+n[11]*r[14],e[11]=n[8]*r[3]+n[9]*r[7]+n[10]*r[11]+n[11]*r[15],e[12]=n[12]*r[0]+n[13]*r[4]+n[14]*r[8]+n[15]*r[12],e[13]=n[12]*r[1]+n[13]*r[5]+n[14]*r[9]+n[15]*r[13],e[14]=n[12]*r[2]+n[13]*r[6]+n[14]*r[10]+n[15]*r[14],e[15]=n[12]*r[3]+n[13]*r[7]+n[14]*r[11]+n[15]*r[15],this.fromArray(e)},translate:function(t){var e=t.x,n=t.y,r=t.z,i=this.val;return i[12]=i[0]*e+i[4]*n+i[8]*r+i[12],i[13]=i[1]*e+i[5]*n+i[9]*r+i[13],i[14]=i[2]*e+i[6]*n+i[10]*r+i[14],i[15]=i[3]*e+i[7]*n+i[11]*r+i[15],this},translateXYZ:function(t,e,n){var r=this.val;return r[12]=r[0]*t+r[4]*e+r[8]*n+r[12],r[13]=r[1]*t+r[5]*e+r[9]*n+r[13],r[14]=r[2]*t+r[6]*e+r[10]*n+r[14],r[15]=r[3]*t+r[7]*e+r[11]*n+r[15],this},scale:function(t){var e=t.x,n=t.y,r=t.z,i=this.val;return i[0]=i[0]*e,i[1]=i[1]*e,i[2]=i[2]*e,i[3]=i[3]*e,i[4]=i[4]*n,i[5]=i[5]*n,i[6]=i[6]*n,i[7]=i[7]*n,i[8]=i[8]*r,i[9]=i[9]*r,i[10]=i[10]*r,i[11]=i[11]*r,this},scaleXYZ:function(t,e,n){var r=this.val;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,u=i*o,c=i*s;return this.fromArray([u*o+n,u*s-r*a,u*a+r*s,0,u*s+r*a,c*s+n,c*a-r*o,0,u*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1]),this},rotate:function(t,e){var n=this.val,r=e.x,i=e.y,o=e.z,s=Math.sqrt(r*r+i*i+o*o);if(Math.abs(s)<1e-6)return null;r*=s=1/s,i*=s,o*=s;var a=Math.sin(t),u=Math.cos(t),c=1-u,h=n[0],l=n[1],f=n[2],d=n[3],p=n[4],m=n[5],v=n[6],g=n[7],y=n[8],b=n[9],x=n[10],w=n[11],E=r*r*c+u,_=i*r*c+o*a,S=o*r*c-i*a,T=r*i*c-o*a,A=i*i*c+u,M=o*i*c+r*a,C=r*o*c+i*a,O=i*o*c-r*a,N=o*o*c+u;return n[0]=h*E+p*_+y*S,n[1]=l*E+m*_+b*S,n[2]=f*E+v*_+x*S,n[3]=d*E+g*_+w*S,n[4]=h*T+p*A+y*M,n[5]=l*T+m*A+b*M,n[6]=f*T+v*A+x*M,n[7]=d*T+g*A+w*M,n[8]=h*C+p*O+y*N,n[9]=l*C+m*O+b*N,n[10]=f*C+v*O+x*N,n[11]=d*C+g*O+w*N,this},rotateX:function(t){var e=this.val,n=Math.sin(t),r=Math.cos(t),i=e[4],o=e[5],s=e[6],a=e[7],u=e[8],c=e[9],h=e[10],l=e[11];return e[4]=i*r+u*n,e[5]=o*r+c*n,e[6]=s*r+h*n,e[7]=a*r+l*n,e[8]=u*r-i*n,e[9]=c*r-o*n,e[10]=h*r-s*n,e[11]=l*r-a*n,this},rotateY:function(t){var e=this.val,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[8],c=e[9],h=e[10],l=e[11];return e[0]=i*r-u*n,e[1]=o*r-c*n,e[2]=s*r-h*n,e[3]=a*r-l*n,e[8]=i*n+u*r,e[9]=o*n+c*r,e[10]=s*n+h*r,e[11]=a*n+l*r,this},rotateZ:function(t){var e=this.val,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[4],c=e[5],h=e[6],l=e[7];return e[0]=i*r+u*n,e[1]=o*r+c*n,e[2]=s*r+h*n,e[3]=a*r+l*n,e[4]=u*r-i*n,e[5]=c*r-o*n,e[6]=h*r-s*n,e[7]=l*r-a*n,this},fromRotationTranslation:function(t,e){var n=this.val,r=t.x,i=t.y,o=t.z,s=t.w,a=r+r,u=i+i,c=o+o,h=r*a,l=r*u,f=r*c,d=i*u,p=i*c,m=o*c,v=s*a,g=s*u,y=s*c;return n[0]=1-(d+m),n[1]=l+y,n[2]=f-g,n[3]=0,n[4]=l-y,n[5]=1-(h+m),n[6]=p+v,n[7]=0,n[8]=f+g,n[9]=p-v,n[10]=1-(h+d),n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},fromQuat:function(t){var e=this.val,n=t.x,r=t.y,i=t.z,o=t.w,s=n+n,a=r+r,u=i+i,c=n*s,h=n*a,l=n*u,f=r*a,d=r*u,p=i*u,m=o*s,v=o*a,g=o*u;return e[0]=1-(f+p),e[1]=h+g,e[2]=l-v,e[3]=0,e[4]=h-g,e[5]=1-(c+p),e[6]=d+m,e[7]=0,e[8]=l+v,e[9]=d-m,e[10]=1-(c+f),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},frustum:function(t,e,n,r,i,o){var s=this.val,a=1/(e-t),u=1/(r-n),c=1/(i-o);return s[0]=2*i*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*i*u,s[6]=0,s[7]=0,s[8]=(e+t)*a,s[9]=(r+n)*u,s[10]=(o+i)*c,s[11]=-1,s[12]=0,s[13]=0,s[14]=o*i*2*c,s[15]=0,this},perspective:function(t,e,n,r){var i=this.val,o=1/Math.tan(t/2),s=1/(n-r);return i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(r+n)*s,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*r*n*s,i[15]=0,this},perspectiveLH:function(t,e,n,r){var i=this.val;return i[0]=2*n/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*n/e,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-r/(n-r),i[11]=1,i[12]=0,i[13]=0,i[14]=n*r/(n-r),i[15]=0,this},ortho:function(t,e,n,r,i,o){var s=this.val,a=t-e,u=n-r,c=i-o;return a=0===a?a:1/a,u=0===u?u:1/u,c=0===c?c:1/c,s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+e)*a,s[13]=(r+n)*u,s[14]=(o+i)*c,s[15]=1,this},lookAt:function(t,e,n){var r=this.val,i=t.x,o=t.y,s=t.z,a=n.x,u=n.y,c=n.z,h=e.x,l=e.y,f=e.z;if(Math.abs(i-h)<1e-6&&Math.abs(o-l)<1e-6&&Math.abs(s-f)<1e-6)return this.identity();var d=i-h,p=o-l,m=s-f,v=1/Math.sqrt(d*d+p*p+m*m),g=u*(m*=v)-c*(p*=v),y=c*(d*=v)-a*m,b=a*p-u*d;(v=Math.sqrt(g*g+y*y+b*b))?(g*=v=1/v,y*=v,b*=v):(g=0,y=0,b=0);var x=p*b-m*y,w=m*g-d*b,E=d*y-p*g;return(v=Math.sqrt(x*x+w*w+E*E))?(x*=v=1/v,w*=v,E*=v):(x=0,w=0,E=0),r[0]=g,r[1]=x,r[2]=d,r[3]=0,r[4]=y,r[5]=w,r[6]=p,r[7]=0,r[8]=b,r[9]=E,r[10]=m,r[11]=0,r[12]=-(g*i+y*o+b*s),r[13]=-(x*i+w*o+E*s),r[14]=-(d*i+p*o+m*s),r[15]=1,this},yawPitchRoll:function(t,e,n){this.zero(),o.zero(),s.zero();var r=this.val,i=o.val,a=s.val,u=Math.sin(n),c=Math.cos(n);return r[10]=1,r[15]=1,r[0]=c,r[1]=u,r[4]=-u,r[5]=c,u=Math.sin(e),c=Math.cos(e),i[0]=1,i[15]=1,i[5]=c,i[10]=c,i[9]=-u,i[6]=u,u=Math.sin(t),c=Math.cos(t),a[5]=1,a[15]=1,a[0]=c,a[2]=-u,a[8]=u,a[10]=c,this.multiplyLocal(o),this.multiplyLocal(s),this},setWorldMatrix:function(t,e,n,r,i){return this.yawPitchRoll(t.y,t.x,t.z),o.scaling(n.x,n.y,n.z),s.xyz(e.x,e.y,e.z),this.multiplyLocal(o),this.multiplyLocal(s),void 0!==r&&this.multiplyLocal(r),void 0!==i&&this.multiplyLocal(i),this}}),o=new i,s=new i;t.exports=i},function(t,e){var n={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};n.DefaultScene.push("CameraManager3D"),n.Global.push("facebook"),t.exports=n},function(t,e,n){var r=n(0),i=n(21),o=new r({initialize:function(t){this.name="WebGLPipeline",this.game=t.game,this.view=t.game.canvas,this.resolution=1,this.width=0,this.height=0,this.gl=t.gl,this.vertexCount=0,this.vertexCapacity=t.vertexCapacity,this.renderer=t.renderer,this.vertexData=t.vertices?t.vertices:new ArrayBuffer(t.vertexCapacity*t.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(t.vertices?t.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(t.vertShader,t.fragShader),this.attributes=t.attributes,this.vertexSize=t.vertexSize,this.topology=t.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=i.getComponentCount(t.attributes,this.gl),this.flushLocked=!1,this.active=!1},boot:function(){},addAttribute:function(t,e,n,r,i){return this.attributes.push({name:t,size:e,type:this.renderer.glFormats[n],normalized:r,offset:i}),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(t,e,n){return this.width=t*n,this.height=e*n,this.resolution=n,this},bind:function(){var t=this.gl,e=this.vertexBuffer,n=this.attributes,r=this.program,i=this.renderer,o=this.vertexSize;i.setProgram(r),i.setVertexBuffer(e);for(var s=0;s<n.length;++s){var a=n[s],u=t.getAttribLocation(r,a.name);u>=0?(t.enableVertexAttribArray(u),t.vertexAttribPointer(u,a.size,a.type,a.normalized,o,a.offset)):-1!==u&&t.disableVertexAttribArray(u)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t=this.gl,e=this.vertexCount,n=this.topology,r=this.vertexSize;if(0!==e)return t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,e*r)),t.drawArrays(n,0,e),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var t=this.gl;return t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(t,e){return this.renderer.setFloat1(this.program,t,e),this},setFloat2:function(t,e,n){return this.renderer.setFloat2(this.program,t,e,n),this},setFloat3:function(t,e,n,r){return this.renderer.setFloat3(this.program,t,e,n,r),this},setFloat4:function(t,e,n,r,i){return this.renderer.setFloat4(this.program,t,e,n,r,i),this},setFloat1v:function(t,e){return this.renderer.setFloat1v(this.program,t,e),this},setFloat2v:function(t,e){return this.renderer.setFloat2v(this.program,t,e),this},setFloat3v:function(t,e){return this.renderer.setFloat3v(this.program,t,e),this},setFloat4v:function(t,e){return this.renderer.setFloat4v(this.program,t,e),this},setInt1:function(t,e){return this.renderer.setInt1(this.program,t,e),this},setInt2:function(t,e,n){return this.renderer.setInt2(this.program,t,e,n),this},setInt3:function(t,e,n,r){return this.renderer.setInt3(this.program,t,e,n,r),this},setInt4:function(t,e,n,r,i){return this.renderer.setInt4(this.program,t,e,n,r,i),this},setMatrix2:function(t,e,n){return this.renderer.setMatrix2(this.program,t,e,n),this},setMatrix3:function(t,e,n){return this.renderer.setMatrix3(this.program,t,e,n),this},setMatrix4:function(t,e,n){return this.renderer.setMatrix4(this.program,t,e,n),this}});t.exports=o},function(t,e,n){var r=n(0),i=n(123),o=n(1),s=n(497),a=n(1024),u=n(1025),c=n(71),h=n(21),l=n(301),f=new r({Extends:l,Mixins:[s],initialize:function(t){var e=t.renderer.config;l.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:o(t,"topology",t.renderer.gl.TRIANGLES),vertShader:o(t,"vertShader",u),fragShader:o(t,"fragShader",a),vertexCapacity:o(t,"vertexCapacity",6*e.batchSize),vertexSize:o(t,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:t.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=e.batchSize,this.batches=[],this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this._tempMatrix4=new c,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return l.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(t,e,n){return l.prototype.resize.call(this,t,e,n),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(t,e){return void 0===t&&(t=this.renderer.blankTexture.glTexture),void 0===e&&(e=0),this.requireTextureBatch(t,e)&&this.pushBatch(t,e),this},requireTextureBatch:function(t,e){var n=this.batches,r=n.length;return!(r>0)||!((e>0?n[r-1].textures[e-1]:n[r-1].texture)===t)},pushBatch:function(t,e){if(0===e)this.batches.push({first:this.vertexCount,texture:t,textures:[]});else{var n=[];n[e-1]=t,this.batches.push({first:this.vertexCount,texture:null,textures:n})}},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t,e,n,r=this.gl,i=this.vertexCount,o=this.topology,s=this.vertexSize,a=this.renderer,u=this.batches,c=u.length,h=0,l=null;if(0===c||0===i)return this.flushLocked=!1,this;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,i*s));for(var f=0;f<c-1;f++){if(l=u[f],t=u[f+1],l.textures.length>0){for(e=0;e<l.textures.length;++e)(n=l.textures[e])&&a.setTexture2D(n,1+e,!1);r.activeTexture(r.TEXTURE0)}h=t.first-l.first,null===l.texture||h<=0||(a.setTexture2D(l.texture,0,!1),r.drawArrays(o,l.first,h))}if((l=u[c-1]).textures.length>0){for(e=0;e<l.textures.length;++e)(n=l.textures[e])&&a.setTexture2D(n,1+e,!1);r.activeTexture(r.TEXTURE0)}return h=i-l.first,l.texture&&h>0&&(a.setTexture2D(l.texture,0,!1),r.drawArrays(o,l.first,h)),this.vertexCount=0,u.length=0,this.flushLocked=!1,this},batchSprite:function(t,e,n){this.renderer.setPipeline(this);var r=this._tempMatrix1,i=this._tempMatrix2,o=this._tempMatrix3,s=t.frame,a=s.glTexture,u=s.u0,c=s.v0,l=s.u1,f=s.v1,d=s.x,p=s.y,m=s.cutWidth,v=s.cutHeight,g=-t.displayOriginX+d,y=-t.displayOriginY+p;if(t.isCropped){var b=t._crop;b.flipX===t.flipX&&b.flipY===t.flipY||s.updateCropUVs(b,t.flipX,t.flipY),u=b.u0,c=b.v0,l=b.u1,f=b.v1,m=b.width,v=b.height,d=b.x,p=b.y,g=-t.displayOriginX+d,y=-t.displayOriginY+p}t.flipX&&(g+=m,m*=-1),t.flipY&&(y+=v,v*=-1);var x=g+m,w=y+v;i.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(e.matrix),n?(r.multiplyWithOffset(n,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),i.e=t.x,i.f=t.y,r.multiply(i,o)):(i.e-=e.scrollX*t.scrollFactorX,i.f-=e.scrollY*t.scrollFactorY,r.multiply(i,o));var E=o.getX(g,y),_=o.getY(g,y),S=o.getX(g,w),T=o.getY(g,w),A=o.getX(x,w),M=o.getY(x,w),C=o.getX(x,y),O=o.getY(x,y),N=h.getTintAppendFloatAlpha(t._tintTL,e.alpha*t._alphaTL),k=h.getTintAppendFloatAlpha(t._tintTR,e.alpha*t._alphaTR),R=h.getTintAppendFloatAlpha(t._tintBL,e.alpha*t._alphaBL),P=h.getTintAppendFloatAlpha(t._tintBR,e.alpha*t._alphaBR);e.roundPixels&&(E=Math.round(E),_=Math.round(_),S=Math.round(S),T=Math.round(T),A=Math.round(A),M=Math.round(M),C=Math.round(C),O=Math.round(O)),this.setTexture2D(a,0);var I=t._isTinted&&t.tintFill;this.batchQuad(E,_,S,T,A,M,C,O,u,c,l,f,N,k,R,P,I,a,0)},batchQuad:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,m,v,g,y){var b=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),b=!0,this.setTexture2D(g,y));var x=this.vertexViewF32,w=this.vertexViewU32,E=this.vertexCount*this.vertexComponentCount-1;return x[++E]=t,x[++E]=e,x[++E]=u,x[++E]=c,x[++E]=v,w[++E]=f,x[++E]=n,x[++E]=r,x[++E]=u,x[++E]=l,x[++E]=v,w[++E]=p,x[++E]=i,x[++E]=o,x[++E]=h,x[++E]=l,x[++E]=v,w[++E]=m,x[++E]=t,x[++E]=e,x[++E]=u,x[++E]=c,x[++E]=v,w[++E]=f,x[++E]=i,x[++E]=o,x[++E]=h,x[++E]=l,x[++E]=v,w[++E]=m,x[++E]=s,x[++E]=a,x[++E]=h,x[++E]=c,x[++E]=v,w[++E]=d,this.vertexCount+=6,b},batchTri:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,m){var v=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(p,m),v=!0);var g=this.vertexViewF32,y=this.vertexViewU32,b=this.vertexCount*this.vertexComponentCount-1;return g[++b]=t,g[++b]=e,g[++b]=s,g[++b]=a,g[++b]=d,y[++b]=h,g[++b]=n,g[++b]=r,g[++b]=s,g[++b]=c,g[++b]=d,y[++b]=l,g[++b]=i,g[++b]=o,g[++b]=u,g[++b]=c,g[++b]=d,y[++b]=f,this.vertexCount+=3,v},batchTexture:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,m,v,g,y,b,x,w,E,_,S,T,A,M,C,O,N){this.renderer.setPipeline(this,t);var k=this._tempMatrix1,R=this._tempMatrix2,P=this._tempMatrix3,I=g/n+A,D=y/r+M,L=(g+b)/n+A,B=(y+x)/r+M,F=s,z=a,j=-m,U=-v;if(t.isCropped){var Y=t._crop;F=Y.width,z=Y.height,s=Y.width,a=Y.height;var W=g=Y.x,X=y=Y.y;l&&(W=b-Y.x-Y.width),f&&!e.isRenderTexture&&(X=x-Y.y-Y.height),I=W/n+A,D=X/r+M,L=(W+Y.width)/n+A,B=(X+Y.height)/r+M,j=-m+g,U=-v+y}l&&(F*=-1,j+=s),(f^=!N&&e.isRenderTexture?1:0)&&(z*=-1,U+=a);var G=j+F,V=U+z;R.applyITRS(i,o,h,u,c),k.copyFrom(C.matrix),O?(k.multiplyWithOffset(O,-C.scrollX*d,-C.scrollY*p),R.e=i,R.f=o,k.multiply(R,P)):(R.e-=C.scrollX*d,R.f-=C.scrollY*p,k.multiply(R,P));var q=P.getX(j,U),H=P.getY(j,U),K=P.getX(j,V),$=P.getY(j,V),J=P.getX(G,V),Z=P.getY(G,V),Q=P.getX(G,U),tt=P.getY(G,U);C.roundPixels&&(q=Math.round(q),H=Math.round(H),K=Math.round(K),$=Math.round($),J=Math.round(J),Z=Math.round(Z),Q=Math.round(Q),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(q,H,K,$,J,Z,Q,tt,I,D,L,B,w,E,_,S,T,e,0)},batchTextureFrame:function(t,e,n,r,i,o,s){this.renderer.setPipeline(this);var a=this._tempMatrix1.copyFrom(o),u=this._tempMatrix2,c=e+t.width,l=n+t.height;s?a.multiply(s,u):u=a;var f=u.getX(e,n),d=u.getY(e,n),p=u.getX(e,l),m=u.getY(e,l),v=u.getX(c,l),g=u.getY(c,l),y=u.getX(c,n),b=u.getY(c,n);this.setTexture2D(t.glTexture,0),r=h.getTintAppendFloatAlpha(r,i),this.batchQuad(f,d,p,m,v,g,y,b,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,0)},drawFillRect:function(t,e,n,r,i,o){var s=t+n,a=e+r;this.setTexture2D();var u=h.getTintAppendFloatAlphaAndSwap(i,o);this.batchQuad(t,e,t,a,s,a,s,e,0,0,1,1,u,u,u,u,2)},batchFillRect:function(t,e,n,r,i,o){this.renderer.setPipeline(this);var s=this._tempMatrix3;o&&o.multiply(i,s);var a=t+n,u=e+r,c=s.getX(t,e),h=s.getY(t,e),l=s.getX(t,u),f=s.getY(t,u),d=s.getX(a,u),p=s.getY(a,u),m=s.getX(a,e),v=s.getY(a,e),g=this.currentFrame,y=g.u0,b=g.v0,x=g.u1,w=g.v1;this.batchQuad(c,h,l,f,d,p,m,v,y,b,x,w,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(t,e,n,r,i,o,s,a){this.renderer.setPipeline(this);var u=this._tempMatrix3;a&&a.multiply(s,u);var c=u.getX(t,e),h=u.getY(t,e),l=u.getX(n,r),f=u.getY(n,r),d=u.getX(i,o),p=u.getY(i,o),m=this.currentFrame,v=m.u0,g=m.v0,y=m.u1,b=m.v1;this.batchTri(c,h,l,f,d,p,v,g,y,b,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(t,e,n,r,i,o,s,a,u){var c=this.tempTriangle;c[0].x=t,c[0].y=e,c[0].width=s,c[1].x=n,c[1].y=r,c[1].width=s,c[2].x=i,c[2].y=o,c[2].width=s,c[3].x=t,c[3].y=e,c[3].width=s,this.batchStrokePath(c,s,!1,a,u)},batchFillPath:function(t,e,n){this.renderer.setPipeline(this);var r=this._tempMatrix3;n&&n.multiply(e,r);for(var o,s,a=t.length,u=this.polygonCache,c=this.fillTint.TL,h=this.fillTint.TR,l=this.fillTint.BL,f=this.tintEffect,d=0;d<a;++d)s=t[d],u.push(s.x,s.y);a=(o=i(u)).length;for(var p=this.currentFrame,m=0;m<a;m+=3){var v=2*o[m+0],g=2*o[m+1],y=2*o[m+2],b=u[v+0],x=u[v+1],w=u[g+0],E=u[g+1],_=u[y+0],S=u[y+1],T=r.getX(b,x),A=r.getY(b,x),M=r.getX(w,E),C=r.getY(w,E),O=r.getX(_,S),N=r.getY(_,S),k=p.u0,R=p.v0,P=p.u1,I=p.v1;this.batchTri(T,A,M,C,O,N,k,R,P,I,c,h,l,f)}u.length=0},batchStrokePath:function(t,e,n,r,i){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var o=t.length-1,s=0;s<o;s++){var a=t[s],u=t[s+1];this.batchLine(a.x,a.y,u.x,u.y,a.width/2,u.width/2,e,s,!n&&s===o-1,r,i)}},batchLine:function(t,e,n,r,i,o,s,a,u,c,h){this.renderer.setPipeline(this);var l=this._tempMatrix3;h&&h.multiply(c,l);var f=n-t,d=r-e,p=Math.sqrt(f*f+d*d),m=i*(r-e)/p,v=i*(t-n)/p,g=o*(r-e)/p,y=o*(t-n)/p,b=n-g,x=r-y,w=t-m,E=e-v,_=n+g,S=r+y,T=t+m,A=e+v,M=l.getX(b,x),C=l.getY(b,x),O=l.getX(w,E),N=l.getY(w,E),k=l.getX(_,S),R=l.getY(_,S),P=l.getX(T,A),I=l.getY(T,A),D=this.strokeTint,L=this.tintEffect,B=D.TL,F=D.TR,z=D.BL,j=D.BR,U=this.currentFrame,Y=U.u0,W=U.v0,X=U.u1,G=U.v1;if(this.batchQuad(P,I,O,N,M,C,k,R,Y,W,X,G,B,F,z,j,L),!(s<=2)){var V=this.prevQuad,q=this.firstQuad;a>0&&V[4]?this.batchQuad(P,I,O,N,V[0],V[1],V[2],V[3],Y,W,X,G,B,F,z,j,L):(q[0]=P,q[1]=I,q[2]=O,q[3]=N,q[4]=1),u&&q[4]?this.batchQuad(M,C,k,R,q[0],q[1],q[2],q[3],Y,W,X,G,B,F,z,j,L):(V[0]=M,V[1]=C,V[2]=k,V[3]=R,V[4]=1)}}});t.exports=f},function(t,e,n){var r=n(22);t.exports=function(t,e){if(void 0===e&&(e=new r),0===t.length)return e;for(var n,i,o,s=Number.MAX_VALUE,a=Number.MAX_VALUE,u=Number.MIN_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,h=0;h<t.length;h++)n=t[h],Array.isArray(n)?(i=n[0],o=n[1]):(i=n.x,o=n.y),s=Math.min(s,i),a=Math.min(a,o),u=Math.max(u,i),c=Math.max(c,o);return e.x=s,e.y=a,e.width=u-s,e.height=c-a,e}},function(t,e,n){var r={CENTER:n(515),ORIENTATION:n(516),SCALE_MODE:n(517),ZOOM:n(518)};t.exports=r},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,n){var r=n(0),i=n(223),o=n(300),s=n(34),a=n(1128),u=n(1129),c=n(2),h=n(532),l=new r({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.facebook,this.config=e,this.settings=h.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(t){this.settings.status=i.INIT,this.sceneUpdate=c,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;this.plugins=e,e.addToScene(this,o.Global,[o.CoreScene,u(this),a(this)]),this.events.emit(s.BOOT,this),this.settings.isBooted=!0},install:function(t){Array.isArray(t)||(t=[t]),this.plugins.installLocal(this,t)},step:function(t,e){this.events.emit(s.PRE_UPDATE,t,e),this.events.emit(s.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),this.events.emit(s.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.cameras.render(t,e),this.events.emit(s.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){return this.settings.active&&(this.settings.status=i.PAUSED,this.settings.active=!1,this.events.emit(s.PAUSE,this,t)),this},resume:function(t){return this.settings.active||(this.settings.status=i.RUNNING,this.settings.active=!0,this.events.emit(s.RESUME,this,t)),this},sleep:function(t){return this.settings.status=i.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit(s.SLEEP,this,t),this},wake:function(t){var e=this.settings;return e.status=i.RUNNING,e.active=!0,e.visible=!0,this.events.emit(s.WAKE,this,t),e.isTransition&&this.events.emit(s.TRANSITION_WAKE,e.transitionFrom,e.transitionDuration),this},isSleeping:function(){return this.settings.status===i.SLEEPING},isActive:function(){return this.settings.status===i.RUNNING},isPaused:function(){return this.settings.status===i.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){t&&(this.settings.data=t),this.settings.status=i.START,this.settings.active=!0,this.settings.visible=!0,this.events.emit(s.START,this),this.events.emit(s.READY,this,t)},shutdown:function(t){this.events.off(s.TRANSITION_INIT),this.events.off(s.TRANSITION_START),this.events.off(s.TRANSITION_COMPLETE),this.events.off(s.TRANSITION_OUT),this.settings.status=i.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit(s.SHUTDOWN,this,t)},destroy:function(){this.settings.status=i.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit(s.DESTROY,this),this.events.removeAllListeners();for(var t=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],e=0;e<t.length;e++)this[t[e]]=null}});t.exports=l},function(t,e,n){var r=n(0),i=n(178),o=n(534),s=new r({initialize:function(t,e,n,r,i){Array.isArray(n)||(n=[n]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var s=0;s<n.length;s++)this.source.push(new o(this,n[s],r,i))},add:function(t,e,n,r,o,s){if(this.has(t))return null;var a=new i(this,t,e,n,r,o,s);return this.frames[t]=a,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,a},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var e=this.frames[t];return e||(console.warn("Texture.frame missing: "+t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var n=[];for(var r in this.frames)if("__BASE"!==r||e){var i=this.frames[r];i.sourceIndex===t&&n.push(i)}return n},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);if(!t){var n=e.indexOf("__BASE");-1!==n&&e.splice(n,1)}return e},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn("Texture.frame missing: "+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e,n=this.frames[t];return n?e=n.sourceIndex:(console.warn("Texture.frame missing: "+t),e=this.frames.__BASE.sourceIndex),this.dataSource[e].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=this.source[e];this.dataSource.push(new o(this,t[e],n.width,n.height))}},setFilter:function(t){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames){this.frames[e].destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});t.exports=s},function(t,e,n){t.exports={Matrix:n(1170),Add:n(1177),AddAt:n(1178),BringToTop:n(1179),CountAllMatching:n(1180),Each:n(1181),EachInRange:n(1182),FindClosestInSorted:n(420),GetAll:n(1183),GetFirst:n(1184),GetRandom:n(311),MoveDown:n(1185),MoveTo:n(1186),MoveUp:n(1187),NumberArray:n(1188),NumberArrayStep:n(1189),QuickSelect:n(546),Range:n(547),Remove:n(221),RemoveAt:n(1190),RemoveBetween:n(1191),RemoveRandomElement:n(1192),Replace:n(1193),RotateLeft:n(436),RotateRight:n(437),SafeRange:n(127),SendToBack:n(1194),SetAll:n(1195),Shuffle:n(211),SpliceOne:n(148),StableSort:n(228),Swap:n(1196)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,n=1;n<t.length;n++)if(t[n].length!==e)return!1;return!0}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);var r=e+Math.floor(Math.random()*n);return void 0===t[r]?null:t[r]}},function(t,e,n){var r=n(25);t.exports=function(t,e){var n=r(e,"anims",null);if(null===n)return t;if("string"==typeof n)t.anims.play(n);else if("object"==typeof n){var i=t.anims,o=r(n,"key",void 0),s=r(n,"startFrame",void 0),a=r(n,"delay",0),u=r(n,"repeat",0),c=r(n,"repeatDelay",0),h=r(n,"yoyo",!1),l=r(n,"play",!1),f=r(n,"delayedPlay",0);i.setDelay(a),i.setRepeat(u),i.setRepeatDelay(c),i.setYoyo(h),l?i.play(o,s):f>0?i.delayedPlay(f,o,s):i.load(o)}return t}},function(t,e){function n(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=0);var o={},s=t.getElementsByTagName("info")[0],a=t.getElementsByTagName("common")[0];o.font=s.getAttribute("face"),o.size=n(s,"size"),o.lineHeight=n(a,"lineHeight")+r,o.chars={};var u=t.getElementsByTagName("char"),c=void 0!==i&&i.trimmed;if(c)var h=i.height,l=i.width;for(var f=0;f<u.length;f++){var d=u[f],p=n(d,"id"),m=n(d,"x"),v=n(d,"y"),g=n(d,"width"),y=n(d,"height");c&&(m<l&&(l=m),v<h&&(h=v)),o.chars[p]={x:m,y:v,width:g,height:y,centerX:Math.floor(g/2),centerY:Math.floor(y/2),xOffset:n(d,"xoffset"),yOffset:n(d,"yoffset"),xAdvance:n(d,"xadvance")+e,data:{},kerning:{}}}if(c&&0!==h&&0!==l)for(var b in o.chars){var x=o.chars[b];x.x-=i.x,x.y-=i.y}var w=t.getElementsByTagName("kerning");for(f=0;f<w.length;f++){var E=w[f],_=n(E,"first"),S=n(E,"second"),T=n(E,"amount");o.chars[S].kerning[_]=T}return o}},function(t,e,n){var r=n(1203),i=n(1206),o=n(0),s=n(23),a=n(178),u=n(24),c=n(226),h=new o({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.ScrollFactor,s.Size,s.Texture,s.Transform,s.Visible,r],initialize:function(t,e,n,r,i){u.call(this,t,"Blitter"),this.setTexture(r,i),this.setPosition(e,n),this.initPipeline(),this.children=new c,this.renderList=[],this.dirty=!1},create:function(t,e,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=this.children.length),void 0===n?n=this.frame:n instanceof a||(n=this.texture.get(n));var s=new i(this,t,e,n,r);return this.children.addAt(s,o,!1),this.dirty=!0,s},createFromCallback:function(t,e,n,r){for(var i=this.createMultiple(e,n,r),o=0;o<i.length;o++){var s=i[o];t.call(this,s,o)}return i},createMultiple:function(t,e,n){void 0===e&&(e=this.frame.name),void 0===n&&(n=!0),Array.isArray(e)||(e=[e]);var r=[],i=this;return e.forEach(function(e){for(var o=0;o<t;o++)r.push(i.create(0,0,e,n))}),r},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=h},function(t,e,n){var r=n(309),i=n(86),o=n(0),s=n(23),a=n(210),u=n(24),c=n(22),h=n(1207),l=n(548),f=n(8),d=new o({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.Transform,s.Visible,h],initialize:function(t,e,n,r){u.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._displayList=t.sys.displayList,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.setPosition(e,n),this.clearAlpha(),this.setBlendMode(i.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new c),t.setTo(this.x,this.y,0,0),this.list.length>0)for(var e=this.list,n=new c,r=0;r<e.length;r++){var i=e[r];i.getBounds&&(i.getBounds(n),l(n,t,t))}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(this._displayList.remove(t),t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this)},removeHandler:function(t){t.off(a.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null)},pointToContainer:function(t,e){if(void 0===e&&(e=new f),this.parentContainer)return this.parentContainer.pointToContainer(t,e);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return r.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return r.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,n){return e[t]-n[t]}),r.StableSort.inplace(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,n,i){return r.GetFirst(this.list,t,e,n,i)},getAll:function(t,e,n,i){return r.GetAll(this.list,t,e,n,i)},count:function(t,e,n,i){return r.CountAllMatching(this.list,t,e,n,i)},swap:function(t,e){return r.Swap(this.list,t,e),this},moveTo:function(t,e){return r.MoveTo(this.list,t,e),this},remove:function(t,e){var n=r.Remove(this.list,t,this.removeHandler,this);if(e&&n){Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++)n[i].destroy()}return this},removeAt:function(t,e){var n=r.RemoveAt(this.list,t,this.removeHandler,this);return e&&n&&n.destroy(),this},removeBetween:function(t,e,n){var i=r.RemoveBetween(this.list,t,e,this.removeHandler,this);if(n)for(var o=0;o<i.length;o++)i[o].destroy();return this},removeAll:function(t){var e=r.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<e.length;n++)e[n].destroy();return this},bringToTop:function(t){return r.BringToTop(this.list,t),this},sendToBack:function(t){return r.SendToBack(this.list,t),this},moveUp:function(t){return r.MoveUp(this.list,t),this},moveDown:function(t){return r.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e,n){return r.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,n,i){return r.SetAll(this.list,t,e,n,i),this},each:function(t,e){var n,r=[null],i=this.list.slice(),o=i.length;for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<o;n++)r[0]=i[n],t.apply(e,r);return this},iterate:function(t,e){var n,r=[null];for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.list.length;n++)r[0]=this.list[n],t.apply(e,r);return this},setScrollFactor:function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=e,n&&(r.SetAll(this.list,"scrollFactorX",t),r.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null}});t.exports=d},function(t,e,n){var r=n(229),i=n(0),o=n(1212),s=new i({Extends:r,Mixins:[o],initialize:function(t,e,n,i,o,s,a){r.call(this,t,e,n,i,o,s,a),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=s},function(t,e,n){var r=n(212),i=n(0),o=n(318),s=n(418),a=n(422),u=n(423),c=n(427),h=n(209),l=n(432),f=n(433),d=n(430),p=n(71),m=n(179),v=n(24),g=n(1),y=n(14),b=n(41),x=n(1218),w=new i({Extends:v,Mixins:[s,a,u,c,h,l,f,d,x],initialize:function(t,e){var n=y(e,"x",0),r=y(e,"y",0);v.call(this,t,"Graphics"),this.setPosition(n,r),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.setDefaultStyles(e)},setDefaultStyles:function(t){return y(t,"lineStyle",null)&&(this.defaultStrokeWidth=y(t,"lineStyle.width",1),this.defaultStrokeColor=y(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(t,"fillStyle",null)&&(this.defaultFillColor=y(t,"fillStyle.color",16777215),this.defaultFillAlpha=y(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,n){return void 0===n&&(n=1),this.commandBuffer.push(o.LINE_STYLE,t,e,n),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(o.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,n,r,i){return void 0===i&&(i=1),this.commandBuffer.push(o.GRADIENT_FILL_STYLE,i,t,e,n,r),this},lineGradientStyle:function(t,e,n,r,i,s){return void 0===s&&(s=1),this.commandBuffer.push(o.GRADIENT_LINE_STYLE,t,s,e,n,r,i),this},setTexture:function(t,e,n){if(void 0===n&&(n=0),void 0===t)this.commandBuffer.push(o.CLEAR_TEXTURE);else{var r=this.scene.sys.textures.getFrame(t,e);r&&(2===n&&(n=3),this.commandBuffer.push(o.SET_TEXTURE,r,n))}return this},beginPath:function(){return this.commandBuffer.push(o.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(o.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(o.FILL_PATH),this},fill:function(){return this.commandBuffer.push(o.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(o.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(o.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,n){return this.beginPath(),this.arc(t,e,n,0,b.PI2),this.fillPath(),this},strokeCircle:function(t,e,n){return this.beginPath(),this.arc(t,e,n,0,b.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,n,r){return this.commandBuffer.push(o.FILL_RECT,t,e,n,r),this},strokeRect:function(t,e,n,r){var i=this._lineWidth/2,o=t-i,s=t+i;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+r),this.strokePath(),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+n,e+r),this.strokePath(),this.beginPath(),this.moveTo(o,e),this.lineTo(s+n,e),this.strokePath(),this.beginPath(),this.moveTo(o,e+r),this.lineTo(s+n,e+r),this.strokePath(),this},fillRoundedRect:function(t,e,n,r,i){void 0===i&&(i=20);var o=i,s=i,a=i,u=i;return"number"!=typeof i&&(o=g(i,"tl",20),s=g(i,"tr",20),a=g(i,"bl",20),u=g(i,"br",20)),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+n-s,e),this.arc(t+n-s,e+s,s,-b.TAU,0),this.lineTo(t+n,e+r-u),this.arc(t+n-u,e+r-u,u,0,b.TAU),this.lineTo(t+a,e+r),this.arc(t+a,e+r-a,a,b.TAU,Math.PI),this.lineTo(t,e+o),this.arc(t+o,e+o,o,-Math.PI,-b.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,n,r,i){void 0===i&&(i=20);var o=i,s=i,a=i,u=i;return"number"!=typeof i&&(o=g(i,"tl",20),s=g(i,"tr",20),a=g(i,"bl",20),u=g(i,"br",20)),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+n-s,e),this.arc(t+n-s,e+s,s,-b.TAU,0),this.lineTo(t+n,e+r-u),this.arc(t+n-u,e+r-u,u,0,b.TAU),this.lineTo(t+a,e+r),this.arc(t+a,e+r-a,a,b.TAU,Math.PI),this.lineTo(t,e+o),this.arc(t+o,e+o,o,-Math.PI,-b.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,n){return!n||n<1?n=1:(t-=n/2,e-=n/2),this.commandBuffer.push(o.FILL_RECT,t,e,n,n),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,n,r,i,s){return this.commandBuffer.push(o.FILL_TRIANGLE,t,e,n,r,i,s),this},strokeTriangle:function(t,e,n,r,i,s){return this.commandBuffer.push(o.STROKE_TRIANGLE,t,e,n,r,i,s),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,n,r){return this.beginPath(),this.moveTo(t,e),this.lineTo(n,r),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(o.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(o.MOVE_TO,t,e),this},strokePoints:function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var i=1;i<r;i++)this.lineTo(t[i].x,t[i].y);return e&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var i=1;i<r;i++)this.lineTo(t[i].x,t[i].y);return e&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var n=t.getPoints(e);return this.strokePoints(n,!0)},strokeEllipse:function(t,e,n,r,i){void 0===i&&(i=32);var o=new m(t,e,n,r).getPoints(i);return this.strokePoints(o,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var n=t.getPoints(e);return this.fillPoints(n,!0)},fillEllipse:function(t,e,n,r,i){void 0===i&&(i=32);var o=new m(t,e,n,r).getPoints(i);return this.fillPoints(o,!0)},arc:function(t,e,n,r,i,s,a){return void 0===s&&(s=!1),void 0===a&&(a=0),this.commandBuffer.push(o.ARC,t,e,n,r,i,s,a),this},slice:function(t,e,n,r,i,s,a){return void 0===s&&(s=!1),void 0===a&&(a=0),this.commandBuffer.push(o.BEGIN_PATH),this.commandBuffer.push(o.MOVE_TO,t,e),this.commandBuffer.push(o.ARC,t,e,n,r,i,s,a),this.commandBuffer.push(o.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(o.SAVE),this},restore:function(){return this.commandBuffer.push(o.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(o.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(o.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(o.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,n){var r,i,o=this.scene.sys,s=o.game.renderer;if(void 0===e&&(e=o.scale.width),void 0===n&&(n=o.scale.height),w.TargetCamera.setScene(this.scene),w.TargetCamera.setViewport(0,0,e,n),w.TargetCamera.scrollX=this.x,w.TargetCamera.scrollY=this.y,"string"==typeof t)if(o.textures.exists(t)){var a=(r=o.textures.get(t)).getSourceImage();a instanceof HTMLCanvasElement&&(i=a.getContext("2d"))}else i=(r=o.textures.createCanvas(t,e,n)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(i=t.getContext("2d"));return i&&(this.renderCanvas(s,this,0,w.TargetCamera,null,i,!1),r&&r.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});w.TargetCamera=new r,t.exports=w},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.width/2,o=t.height/2;return n.x=t.x+i*Math.cos(e),n.y=t.y+o*Math.sin(e),n}},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(556),a=n(226),u=n(558),c=n(1228),h=new r({Extends:o,Mixins:[i.Depth,i.Mask,i.Pipeline,i.Transform,i.Visible,c],initialize:function(t,e,n,r){if(o.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===n||"object"!=typeof n&&!Array.isArray(n)||(r=n,n=null),this.setTexture(e,n),this.initPipeline(),this.emitters=new a(this),this.wells=new a(this),r){Array.isArray(r)||(r=[r]);for(var i=0;i<r.length;i++)this.createEmitter(r[i])}},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),n=[];return e.forEach(function(t){n.push(t.name)}),this.frameNames=n,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var n=e.frames;n.length=0;for(var r=0;r<t.length;r++){var i=t[r];-1!==this.frameNames.indexOf(i)&&n.push(this.texture.get(i))}return n.length>0?e.defaultFrame=n[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new u(this,t))},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new s(t))},emitParticle:function(t,e,n){for(var r=this.emitters.list,i=0;i<r.length;i++){var o=r[i];o.active&&o.emitParticle(t,e,n)}return this},emitParticleAt:function(t,e,n){return this.emitParticle(n,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var n=this.emitters.list,r=0;r<n.length;r++){var i=n[r];i.active&&i.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=h},function(t,e,n){var r=n(86),i=n(212),o=n(51),s=n(0),a=n(23),u=n(58),c=n(178),h=n(24),l=n(1232),f=n(21),d=n(564),p=new s({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,l],initialize:function(t,e,n,r,s,a,c){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=32),void 0===s&&(s=32),h.call(this,t,"RenderTexture"),this.renderer=t.sys.game.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.framebuffer=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===a?(this.canvas=o.create2D(this,r,s),this.texture=t.sys.textures.addCanvas(d(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(c),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new i(0,0,r,s),this.gl=null;var l=this.renderer;if(l.type===u.WEBGL){var f=l.gl;this.gl=f,this.drawGameObject=this.batchGameObjectWebGL,this.framebuffer=l.createFramebuffer(r,s,this.frame.source.glTexture,!1)}else l.type===u.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas);this.camera.setScene(t),this.setPosition(e,n),void 0===a&&this.setSize(r,s),this.setOrigin(0,0),this.initPipeline()},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){if(void 0===e&&(e=t),t!==this.width||e!==this.height){if("__BASE"===this.frame.name){if(this.canvas.width=t,this.canvas.height=e,this.gl){var n=this.gl;this.renderer.deleteTexture(this.frame.source.glTexture),this.renderer.deleteFramebuffer(this.framebuffer),this.frame.source.glTexture=this.renderer.createTexture2D(0,n.NEAREST,n.NEAREST,n.CLAMP_TO_EDGE,n.CLAMP_TO_EDGE,n.RGBA,null,t,e,!1),this.framebuffer=this.renderer.createFramebuffer(t,e,this.frame.source.glTexture,!1),this.frame.glTexture=this.frame.source.glTexture}this.frame.source.width=t,this.frame.source.height=e,this.camera.setSize(t,e),this.frame.setSize(t,e),this.width=t,this.height=e}}else{var r=this.texture.getSourceImage();this.frame.cutX+t>r.width&&(t=r.width-this.frame.cutX),this.frame.cutY+e>r.height&&(e=r.height-this.frame.cutY),this.frame.setSize(t,e,this.frame.cutX,this.frame.cutY)}return this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,n,r,i,o){void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=this.frame.cutWidth),void 0===o&&(o=this.frame.cutHeight);var s=255&(t>>16|0),a=255&(t>>8|0),u=255&(0|t),c=this.gl,h=this.frame;if(c){var l=this.renderer,d=this.getBounds();l.setFramebuffer(this.framebuffer,!0),i===h.source.width&&o===h.source.height||c.scissor(n+h.cutX,r+h.cutY,i,o),this.pipeline.drawFillRect(d.x,d.y,d.right,d.bottom,f.getTintFromFloats(s/255,a/255,u/255,1),e),i===h.source.width&&o===h.source.height||c.scissor(0,0,h.source.width,h.source.height),this.renderer.setFramebuffer(null,!0)}else this.context.fillStyle="rgba("+s+","+a+","+u+","+e+")",this.context.fillRect(n+h.cutX,r+h.cutY,i,o);return this},clear:function(){if(this.dirty){var t=this.gl;if(t){var e=this.renderer;e.setFramebuffer(this.framebuffer,!0),this.frame.cutWidth===this.canvas.width&&this.frame.cutHeight===this.canvas.height||t.scissor(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.setFramebuffer(null,!0)}else{var n=this.context;n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),n.restore()}this.dirty=!1}return this},erase:function(t,e,n){this._eraseMode=!0;var i=this.renderer.currentBlendMode;return this.renderer.setBlendMode(r.ERASE),this.draw(t,e,n,1,16777215),this.renderer.setBlendMode(i),this._eraseMode=!1,this},draw:function(t,e,n,r,i){void 0===r&&(r=this.globalAlpha),i=void 0===i?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(i>>16)+(65280&i)+((255&i)<<16),Array.isArray(t)||(t=[t]);var o=this.gl;if(this.camera.preRender(1,1),o){var s=this.camera._cx,a=this.camera._cy,u=this.camera._cw,c=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(s,a,u,c,c);var h=this.pipeline;h.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),this.batchList(t,e,n,r,i),h.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),h.projOrtho(0,h.width,h.height,0,-1e3,1e3)}else this.renderer.setContext(this.context),this.batchList(t,e,n,r,i),this.renderer.setContext();return this.dirty=!0,this},drawFrame:function(t,e,n,r,i,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=this.globalAlpha),o=void 0===o?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(o>>16)+(65280&o)+((255&o)<<16);var s=this.gl,a=this.textureManager.getFrame(t,e);if(a){if(this.camera.preRender(1,1),s){var u=this.camera._cx,c=this.camera._cy,h=this.camera._cw,l=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(u,c,h,l,l);var f=this.pipeline;f.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3),f.batchTextureFrame(a,n+this.frame.cutX,r+this.frame.cutY,o,i,this.camera.matrix,null),f.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),f.projOrtho(0,f.width,f.height,0,-1e3,1e3)}else this.batchTextureFrame(a,n+this.frame.cutX,r+this.frame.cutY,i,o);this.dirty=!0}return this},batchList:function(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o];s&&s!==this&&(s.renderWebGL||s.renderCanvas?this.drawGameObject(s,e,n):s.isParent||s.list?this.batchGroup(s.getChildren(),e,n):"string"==typeof s?this.batchTextureFrameKey(s,null,e,n,r,i):s instanceof c?this.batchTextureFrame(s,e,n,r,i):Array.isArray(s)&&this.batchList(s,e,n,r,i))}},batchGroup:function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),e+=this.frame.cutX,n+=this.frame.cutY;for(var r=0;r<t.length;r++){var i=t[r];if(i.willRender()){var o=i.x+e,s=i.y+n;this.drawGameObject(i,o,s)}}},batchGameObjectWebGL:function(t,e,n){void 0===e&&(e=t.x),void 0===n&&(n=t.y);var r=t.x,i=t.y;this._eraseMode||this.renderer.setBlendMode(t.blendMode),t.setPosition(e+this.frame.cutX,n+this.frame.cutY),t.renderWebGL(this.renderer,t,0,this.camera,null),t.setPosition(r,i)},batchGameObjectCanvas:function(t,e,n){void 0===e&&(e=t.x),void 0===n&&(n=t.y);var i=t.x,o=t.y;if(this._eraseMode){var s=t.blendMode;t.blendMode=r.ERASE}t.setPosition(e+this.frame.cutX,n+this.frame.cutY),t.renderCanvas(this.renderer,t,0,this.camera,null),t.setPosition(i,o),this._eraseMode&&(t.blendMode=s)},batchTextureFrameKey:function(t,e,n,r,i,o){var s=this.textureManager.getFrame(t,e);s&&this.batchTextureFrame(s,n,r,i,o)},batchTextureFrame:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=0),e+=this.frame.cutX,n+=this.frame.cutY,this.gl)this.pipeline.batchTextureFrame(t,e,n,i,r,this.camera.matrix,null);else{var o=this.context,s=t.canvasData,a=t.source.image,u=this.camera.matrix;o.globalAlpha=this.globalAlpha,o.setTransform(u[0],u[1],u[2],u[3],u[4],u[5]),o.drawImage(a,s.x,s.y,s.width,s.height,e,n,s.width,s.height)}},preDestroy:function(){this._saved||(o.remove(this.canvas),this.gl&&this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.framebuffer=null,this.texture=null)}});t.exports=p},function(t,e,n){var r=n(220),i=n(51),o=n(0),s=n(23),a=n(58),u=n(24),c=n(1238),h=n(14),l=n(305),f=n(1239),d=n(1242),p=new o({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,f],initialize:function(t,e,n,r,o){void 0===e&&(e=0),void 0===n&&(n=0),u.call(this,t,"Text"),this.renderer=t.sys.game.renderer,this.setPosition(e,n),this.setOrigin(0,0),this.initPipeline(),this.canvas=i.create(this),this.context=this.canvas.getContext("2d"),this.style=new d(this,o),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=t.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(r),o&&o.padding&&this.setPadding(o.padding),o&&o.lineSpacing&&(this.lineSpacing=o.lineSpacing),t.sys.game.config.renderType===a.WEBGL&&t.sys.game.renderer.onContextRestored(function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var n=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(n)&&(n=n.join("\n")),n}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,n){for(var r="",i=t.replace(/ +/gi," ").split(this.splitRegExp),o=i.length,s=0;s<o;s++){var a=i[s],u="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<n)r+=a+"\n";else{for(var c=n,h=a.split(" "),l=0;l<h.length;l++){var f=h[l],d=f+" ",p=e.measureText(d).width;if(p>c){if(0===l){for(var m=d;m.length&&(m=m.slice(0,-1),!((p=e.measureText(m).width)<=c)););if(!m.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var v=f.substr(m.length);h[l]=v,u+=m}var g=h[l].length?l:l+1,y=h.slice(g).join(" ").replace(/[ \n]*$/gi,"");i[s+1]=y+" "+(i[s+1]||""),o=i.length;break}u+=d,c-=p}r+=u.replace(/[ \n]*$/gi,"")+"\n"}}return r=r.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,n){for(var r="",i=t.split(this.splitRegExp),o=0;o<i.length;o++){for(var s=n,a=i[o].split(" "),u=0;u<a.length;u++){var c=e.measureText(a[u]).width+e.measureText(" ").width;c>s?(u>0&&(r+="\n"),r+=a[u]+" ",s=n-c):(s-=c,r+=a[u],u<a.length-1&&(r+=" "))}o<i.length-1&&(r+="\n")}return r},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,n,r,i,o){return this.style.setShadow(t,e,n,r,i,o)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,n,r){if("object"==typeof t){var i=t,o=h(i,"x",null);null!==o?(t=o,n=o):(t=h(i,"left",0),n=h(i,"right",t));var s=h(i,"y",null);null!==s?(e=s,r=s):(e=h(i,"top",0),r=h(i,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=e);return this.padding.left=t,this.padding.top=e,this.padding.right=n,this.padding.bottom=r,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,n=this.style,r=n.resolution,i=n.metrics;n.syncFont(t,e);var o=this._text;(n.wordWrapWidth||n.wordWrapCallback)&&(o=this.runWordWrap(this._text));var s,a=o.split(this.splitRegExp),u=c(this,i,a),h=this.padding;0===n.fixedWidth?(this.width=u.width+h.left+h.right,s=u.width):(this.width=n.fixedWidth,(s=this.width-h.left-h.right)<u.width&&(s=u.width)),0===n.fixedHeight?this.height=u.height+h.top+h.bottom:this.height=n.fixedHeight;var l,f,d=this.width,p=this.height;this.updateDisplayOrigin(),d*=r,p*=r,d=Math.max(d,1),p=Math.max(p,1),t.width!==d||t.height!==p?(t.width=d,t.height=p,this.frame.setSize(d,p),n.syncFont(t,e)):e.clearRect(0,0,d,p),e.save(),e.scale(r,r),n.backgroundColor&&(e.fillStyle=n.backgroundColor,e.fillRect(0,0,d,p)),n.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(h.left,h.top);for(var m=0;m<u.lines;m++){if(l=n.strokeThickness/2,f=n.strokeThickness/2+m*u.lineHeight+i.ascent,m>0&&(f+=u.lineSpacing*m),n.rtl)l=d-l;else if("right"===n.align)l+=s-u.lineWidths[m];else if("center"===n.align)l+=(s-u.lineWidths[m])/2;else if("justify"===n.align){if(u.lineWidths[m]/u.width>=.85){var v=u.width-u.lineWidths[m],g=e.measureText(" ").width,y=a[m].trim(),b=y.split(" ");v+=(a[m].length-y.length)*g;for(var x=Math.floor(v/g),w=0;x>0;)b[w]+=" ",w=(w+1)%(b.length-1||1),--x;a[m]=b.join(" ")}}this.autoRound&&(l=Math.round(l),f=Math.round(f)),n.strokeThickness&&(this.style.syncShadow(e,n.shadowStroke),e.strokeText(a[m],l,f)),n.color&&(this.style.syncShadow(e,n.shadowFill),e.fillText(a[m],l,f))}e.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var E=this.input;return E&&!E.customHitArea&&(E.hitArea.width=this.width,E.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=s.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&l(this.canvas),i.remove(this.canvas),this.texture.destroy()}});t.exports=p},function(t,e,n){var r=n(51),i=n(0),o=n(23),s=n(58),a=n(24),u=n(477),c=n(213),h=n(1244),l=n(8),f=new i({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,h],initialize:function(t,e,n,i,o,c,h){var f=t.sys.game.renderer;a.call(this,t,"TileSprite");var d=t.sys.textures.get(c),p=d.get(h);i&&o?(i=Math.floor(i),o=Math.floor(o)):(i=p.width,o=p.height),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=f,this.canvas=r.create(this,i,o),this.context=this.canvas.getContext("2d"),this.displayTexture=d,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=u(p.width),this.potHeight=u(p.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,n),this.setSize(i,o),this.setFrame(h),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.config.renderType===s.WEBGL&&t.sys.game.renderer.onContextRestored(function(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)},this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){return this.displayFrame=this.displayTexture.get(t),this.displayFrame.cutWidth&&this.displayFrame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame,e=this.fillContext,n=this.fillCanvas,r=this.potWidth,i=this.potHeight;this.renderer.gl||(r=t.cutWidth,i=t.cutHeight),e.clearRect(0,0,r,i),n.width=r,n.height=i,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,r,i),this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(n,this.fillPattern):this.fillPattern=e.createPattern(n,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||c.disable(e);var n=this._tileScale.x,r=this._tileScale.y,i=this._tilePosition.x,o=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(n,r),e.translate(-i,-o),e.fillStyle=this.fillPattern,e.fillRect(i,o,this.width/n,this.height/r),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=f},function(t,e,n){var r=n(0),i=n(325),o=n(574),s=new r({initialize:function(t){this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return i(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,n=Number.MAX_VALUE,r=0;r<t.length;r++)e={x:0,y:0},"number"==typeof t[r]||"string"==typeof t[r]?(e.x=parseFloat(t[r]),e.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(e.x=t[r][0],e.y=t[r][1]):(e.x=t[r].x,e.y=t[r].y),this.points.push(e),e.y<n&&(n=e.y);return this.calculateArea(n),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,n=0,r=0;r<this.points.length-1;r++)t=this.points[r],n+=((e=this.points[r+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],n+=(t.x-e.x)*(e.y+t.y),this.area=.5*-n,this.area},getPoints:function(t,e,n){return o(this,t,e,n)}});t.exports=s},function(t,e){t.exports=function(t,e,n){for(var r=!1,i=-1,o=t.points.length-1;++i<t.points.length;o=i){var s=t.points[i].x,a=t.points[i].y,u=t.points[o].x,c=t.points[o].y;(a<=n&&n<c||c<=n&&n<a)&&e<(u-s)*(n-a)/(c-a)+s&&(r=!r)}return r}},function(t,e,n){var r=n(0),i=n(230),o=new r({Extends:i,initialize:function(t,e,n,r,o){i.call(this,t,e,n,[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0],[16777215,16777215,16777215,16777215,16777215,16777215],[1,1,1,1,1,1],r,o),this.resetPosition()},setFrame:function(t){return this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,t=this.frame,this.uv[0]=t.u0,this.uv[1]=t.v0,this.uv[2]=t.u0,this.uv[3]=t.v1,this.uv[4]=t.u1,this.uv[5]=t.v1,this.uv[6]=t.u0,this.uv[7]=t.v0,this.uv[8]=t.u1,this.uv[9]=t.v1,this.uv[10]=t.u1,this.uv[11]=t.v0,this},topLeftX:{get:function(){return this.x+this.vertices[0]},set:function(t){this.vertices[0]=t-this.x,this.vertices[6]=t-this.x}},topLeftY:{get:function(){return this.y+this.vertices[1]},set:function(t){this.vertices[1]=t-this.y,this.vertices[7]=t-this.y}},topRightX:{get:function(){return this.x+this.vertices[10]},set:function(t){this.vertices[10]=t-this.x}},topRightY:{get:function(){return this.y+this.vertices[11]},set:function(t){this.vertices[11]=t-this.y}},bottomLeftX:{get:function(){return this.x+this.vertices[2]},set:function(t){this.vertices[2]=t-this.x}},bottomLeftY:{get:function(){return this.y+this.vertices[3]},set:function(t){this.vertices[3]=t-this.y}},bottomRightX:{get:function(){return this.x+this.vertices[4]},set:function(t){this.vertices[4]=t-this.x,this.vertices[8]=t-this.x}},bottomRightY:{get:function(){return this.y+this.vertices[5]},set:function(t){this.vertices[5]=t-this.y,this.vertices[9]=t-this.y}},topLeftAlpha:{get:function(){return this.alphas[0]},set:function(t){this.alphas[0]=t,this.alphas[3]=t}},topRightAlpha:{get:function(){return this.alphas[5]},set:function(t){this.alphas[5]=t}},bottomLeftAlpha:{get:function(){return this.alphas[1]},set:function(t){this.alphas[1]=t}},bottomRightAlpha:{get:function(){return this.alphas[2]},set:function(t){this.alphas[2]=t,this.alphas[4]=t}},topLeftColor:{get:function(){return this.colors[0]},set:function(t){this.colors[0]=t,this.colors[3]=t}},topRightColor:{get:function(){return this.colors[5]},set:function(t){this.colors[5]=t}},bottomLeftColor:{get:function(){return this.colors[1]},set:function(t){this.colors[1]=t}},bottomRightColor:{get:function(){return this.colors[2]},set:function(t){this.colors[2]=t,this.colors[4]=t}},setTopLeft:function(t,e){return this.topLeftX=t,this.topLeftY=e,this},setTopRight:function(t,e){return this.topRightX=t,this.topRightY=e,this},setBottomLeft:function(t,e){return this.bottomLeftX=t,this.bottomLeftY=e,this},setBottomRight:function(t,e){return this.bottomRightX=t,this.bottomRightY=e,this},resetPosition:function(){var t=this.x,e=this.y,n=Math.floor(this.width/2),r=Math.floor(this.height/2);return this.setTopLeft(t-n,e-r),this.setTopRight(t+n,e-r),this.setBottomLeft(t-n,e+r),this.setBottomRight(t+n,e+r),this},resetAlpha:function(){var t=this.alphas;return t[0]=1,t[1]=1,t[2]=1,t[3]=1,t[4]=1,t[5]=1,this},resetColors:function(){var t=this.colors;return t[0]=16777215,t[1]=16777215,t[2]=16777215,t[3]=16777215,t[4]=16777215,t[5]=16777215,this},reset:function(){return this.resetPosition(),this.resetAlpha(),this.resetColors()}});t.exports=o},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(1),a=n(124),u=n(582),c=n(1323),h=n(71),l=new r({Extends:o,Mixins:[i.ComputedSize,i.Depth,i.GetBounds,i.Mask,i.Origin,i.ScrollFactor,i.Transform,i.Visible,c],initialize:function(t,e,n,r,i,s,a){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=128),void 0===s&&(s=128),o.call(this,t,"Shader"),this.blendMode=-1,this.shader;var u=t.sys.renderer;this.renderer=u,this.gl=u.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=u.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=u.width,this._rendererHeight=u.height,this._textureCount=0,this.setPosition(n,r),this.setSize(i,s),this.setOrigin(.5,.5),this.setShader(e,a)},setShader:function(t,e){if(void 0===e&&(e=[]),"string"==typeof t){var n=this.scene.sys.cache.shader;if(!n.has(t))return console.warn("Shader missing: "+t),this;this.shader=n.get(t)}else this.shader=t;var r=this.gl,i=this.renderer;this.program&&r.deleteProgram(this.program);var o=i.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);i.setMatrix4(o,"uViewMatrix",!1,this.viewMatrix),i.setMatrix4(o,"uProjectionMatrix",!1,this.projectionMatrix),i.setFloat2(o,"uResolution",this.width,this.height),this.program=o;var s=new Date,u={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[s.getFullYear(),s.getMonth(),s.getDate(),60*s.getHours()*60+60*s.getMinutes()+s.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(this.shader.uniforms,u):this.uniforms=u;for(var c=0;c<4;c++)e[c]&&this.setSampler2D("iChannel"+c,e[c],c);return this.initUniforms(),this.projOrtho(0,i.width,i.height,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,n,r){var i=1/(t-e),o=1/(n-r),s=this.projectionMatrix;s[0]=-2*i,s[5]=-2*o,s[10]=-.001,s[12]=(t+e)*i,s[13]=(r+n)*o,s[14]=-0;var a=this.program;this.renderer.setMatrix4(a,"uProjectionMatrix",!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=n},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,n=this.program;for(var r in this._textureCount=0,this.uniforms){var i=this.uniforms[r],o=i.type,s=e[o];i.uniformLocation=t.getUniformLocation(n,r),"sampler2D"!==o&&(i.glMatrix=s.matrix,i.glValueLength=s.length,i.glFunc=s.func)}},setSampler2D:function(t,e,n,r){void 0===n&&(n=0);var i=this.scene.sys.textures;if(i.exists(e)){var o=i.getFrame(e),s=this.uniforms[t];s.textureKey=e,s.source=o.source.image,s.value=o.glTexture,r&&(s.textureData=r),this._textureCount=n,this.initSampler2D(s)}return this},setUniform:function(t,e){return u(this.uniforms,t,e),this},getUniform:function(t){return s(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=this.gl;e.activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value);var n=t.textureData;if(n){var r=e[s(n,"magFilter","linear").toUpperCase()],i=e[s(n,"minFilter","linear").toUpperCase()],o=e[s(n,"wrapS","repeat").toUpperCase()],a=e[s(n,"wrapT","repeat").toUpperCase()],u=e[s(n,"format","rgba").toUpperCase()];if(n.repeat&&(o=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var c=s(n,"width",512),h=s(n,"height",2),l=s(n,"border",0);e.texImage2D(e.TEXTURE_2D,0,u,c,h,l,u,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,u,e.RGBA,e.UNSIGNED_BYTE,t.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,e,n,r,i,o=this.gl,s=this.uniforms,a=0;for(var u in s)n=(t=s[u]).glFunc,e=t.glValueLength,r=t.uniformLocation,i=t.value,1===e?t.glMatrix?n.call(o,r,t.transpose,i):n.call(o,r,i):2===e?n.call(o,r,i.x,i.y):3===e?n.call(o,r,i.x,i.y,i.z):4===e?n.call(o,r,i.x,i.y,i.z,i.w):"sampler2D"===t.type&&(o.activeTexture(o["TEXTURE"+a]),o.bindTexture(o.TEXTURE_2D,i),o.uniform1i(r,a),a++)},load:function(t){var e=this.width,n=this.height,r=this.renderer,i=this.program,o=-this._displayOriginX,s=-this._displayOriginY,a=this.viewMatrix;a[0]=t[0],a[1]=t[1],a[4]=t[2],a[5]=t[3],a[8]=t[4],a[9]=t[5],a[12]=a[0]*o+a[4]*s,a[13]=a[1]*o+a[5]*s,this.renderer.setMatrix4(i,"uViewMatrix",!1,this.viewMatrix),this.renderer.setFloat2(i,"uResolution",this.width,this.height);var u=this.uniforms,c=u.resolution;c.value.x=e,c.value.y=n,u.time.value=r.game.loop.getDuration();var h=this.pointer;if(h){var l=u.mouse,f=h.x/e,d=1-h.y/n;l.value.x=f.toFixed(2),l.value.y=d.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,n=this.program,r=this.gl,i=this.vertexBuffer,o=this.renderer,s=2*Float32Array.BYTES_PER_ELEMENT;o.setProgram(n),o.setVertexBuffer(i);var a=r.getAttribLocation(n,"inPosition");-1!==a&&(r.enableVertexAttribArray(a),r.vertexAttribPointer(a,2,r.FLOAT,!1,s,0));var u=this.vertexViewF32;u[3]=e,u[4]=t,u[5]=e,u[8]=t,u[9]=e,u[10]=t;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,6*s)),r.drawArrays(r.TRIANGLES,0,6)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)}});t.exports=l},function(t,e,n){var r=n(12),i=n(329);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o,s,a=t.x1,u=t.y1,c=t.x2,h=t.y2,l=e.x,f=e.y,d=e.radius,p=c-a,m=h-u,v=a-l,g=u-f,y=p*p+m*m,b=2*(p*v+m*g),x=b*b-4*y*(v*v+g*g-d*d);if(0===x){var w=-b/(2*y);o=a+w*p,s=u+w*m,w>=0&&w<=1&&n.push(new r(o,s))}else if(x>0){var E=(-b-Math.sqrt(x))/(2*y);o=a+E*p,s=u+E*m,E>=0&&E<=1&&n.push(new r(o,s));var _=(-b+Math.sqrt(x))/(2*y);o=a+_*p,s=u+_*m,_>=0&&_<=1&&n.push(new r(o,s))}}return n}},function(t,e,n){var r=n(95),i=new(n(12));t.exports=function(t,e,n){if(void 0===n&&(n=i),r(e,t.x1,t.y1))return n.x=t.x1,n.y=t.y1,!0;if(r(e,t.x2,t.y2))return n.x=t.x2,n.y=t.y2,!0;var o=t.x2-t.x1,s=t.y2-t.y1,a=e.x-t.x1,u=e.y-t.y1,c=o*o+s*s,h=o,l=s;if(c>0){var f=(a*o+u*s)/c;h*=f,l*=f}return n.x=t.x1+h,n.y=t.y1+l,h*h+l*l<=c&&h*o+l*s>=0&&r(e,n.x,n.y)}},function(t,e,n){var r=n(12),i=n(155),o=n(589);t.exports=function(t,e,n){if(void 0===n&&(n=[]),o(t,e))for(var s=e.getLineA(),a=e.getLineB(),u=e.getLineC(),c=e.getLineD(),h=[new r,new r,new r,new r],l=[i(s,t,h[0]),i(a,t,h[1]),i(u,t,h[2]),i(c,t,h[3])],f=0;f<4;f++)l[f]&&n.push(h[f]);return n}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=[]);for(var i,o,s,a,u,c,h=t.x3-t.x1,l=t.y3-t.y1,f=t.x2-t.x1,d=t.y2-t.y1,p=h*h+l*l,m=h*f+l*d,v=f*f+d*d,g=p*v-m*m,y=0===g?0:1/g,b=t.x1,x=t.y1,w=0;w<e.length&&(o=(p*(c=f*(s=e[w].x-b)+d*(a=e[w].y-x))-m*(u=h*s+l*a))*y,!((i=(v*u-m*c)*y)>=0&&o>=0&&i+o<1&&(r.push({x:e[w].x,y:e[w].y}),n)));w++);return r}},function(t,e){t.exports=function(t,e,n,r){var i=Math.cos(r),o=Math.sin(r),s=t.x1-e,a=t.y1-n;return t.x1=s*i-a*o+e,t.y1=s*o+a*i+n,s=t.x2-e,a=t.y2-n,t.x2=s*i-a*o+e,t.y2=s*o+a*i+n,t}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,n,r){var i=Math.cos(r),o=Math.sin(r),s=t.x1-e,a=t.y1-n;return t.x1=s*i-a*o+e,t.y1=s*o+a*i+n,s=t.x2-e,a=t.y2-n,t.x2=s*i-a*o+e,t.y2=s*o+a*i+n,s=t.x3-e,a=t.y3-n,t.x3=s*i-a*o+e,t.y3=s*o+a*i+n,t}},function(t,e,n){t.exports={BUTTON_DOWN:n(1444),BUTTON_UP:n(1445),CONNECTED:n(1446),DISCONNECTED:n(1447),GAMEPAD_BUTTON_DOWN:n(1448),GAMEPAD_BUTTON_UP:n(1449)}},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e,n){var r=n(37),i=n(234);t.exports=function(t,e){var n=void 0===t?i():r({},t);if(e)for(var o in e)void 0!==e[o]&&(n[o]=e[o]);return n}},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=n(520),h=new r({Extends:o,initialize:function(t,e,n,r){var i="xml";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"xml",cache:t.cacheManager.xml,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=c(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});s.register("xml",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new h(this,t[r]));else this.addFile(new h(this,t,e,n));return this}),t.exports=h},function(t,e,n){t.exports={Acceleration:n(1504),Angular:n(1505),Bounce:n(1506),Debug:n(1507),Drag:n(1508),Enable:n(1509),Friction:n(1510),Gravity:n(1511),Immovable:n(1512),Mass:n(1513),Size:n(1514),Velocity:n(1515)}},function(t,e,n){t.exports={COLLIDE:n(1517),OVERLAP:n(1518),PAUSE:n(1519),RESUME:n(1520),TILE_COLLIDE:n(1521),TILE_OVERLAP:n(1522),WORLD_BOUNDS:n(1523),WORLD_STEP:n(1524)}},function(t,e,n){t.exports={COLLIDE:n(1536),PAUSE:n(1537),RESUME:n(1538)}},function(t,e,n){t.exports={Acceleration:n(1540),BodyScale:n(1541),BodyType:n(1542),Bounce:n(1543),CheckAgainst:n(1544),Collides:n(1545),Debug:n(1546),Friction:n(1547),Gravity:n(1548),Offset:n(1549),SetGameObject:n(1550),Velocity:n(1551)}},function(t,e,n){var r={};t.exports=r;var i=n(73),o=n(30);r.fromVertices=function(t){for(var e={},n=0;n<t.length;n++){var r=(n+1)%t.length,s=i.normalise({x:t[r].y-t[n].y,y:t[n].x-t[r].x}),a=0===s.y?1/0:s.x/s.y;e[a=a.toFixed(3).toString()]=s}return o.values(e)},r.rotate=function(t,e){if(0!==e)for(var n=Math.cos(e),r=Math.sin(e),i=0;i<t.length;i++){var o,s=t[i];o=s.x*n-s.y*r,s.y=s.x*r+s.y*n,s.x=o}}},function(t,e,n){t.exports={AFTER_UPDATE:n(1569),BEFORE_UPDATE:n(1570),COLLISION_ACTIVE:n(1571),COLLISION_END:n(1572),COLLISION_START:n(1573),DRAG_END:n(1574),DRAG:n(1575),DRAG_START:n(1576),PAUSE:n(1577),RESUME:n(1578),SLEEP_END:n(1579),SLEEP_START:n(1580)}},function(t,e,n){var r=n(102),i=n(42),o=n(0),s=n(236),a=n(1),u=n(153),c=n(61),h=new o({Mixins:[s.Bounce,s.Collision,s.Friction,s.Gravity,s.Mass,s.Sensor,s.Sleep,s.Static],initialize:function(t,e,n){this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var r=a(n,"body",null),i=a(n,"addToWorld",!0);if(r)this.setBody(r,i);else{var o=e.getCollisionGroup();a(o,"objects",[]).length>0?this.setFromTileCollision(n):this.setFromTileRectangle(n)}},setFromTileRectangle:function(t){void 0===t&&(t={}),u(t,"isStatic")||(t.isStatic=!0),u(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),n=e.x+e.width/2,i=e.y+e.height/2,o=r.rectangle(n,i,e.width,e.height,t);return this.setBody(o,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),u(t,"isStatic")||(t.isStatic=!0),u(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,n=this.tile.tilemapLayer.scaleY,o=this.tile.getLeft(),s=this.tile.getTop(),h=this.tile.getCollisionGroup(),l=a(h,"objects",[]),f=[],d=0;d<l.length;d++){var p=l[d],m=o+p.x*e,v=s+p.y*n,g=p.width*e,y=p.height*n,b=null;if(p.rectangle)b=r.rectangle(m+g/2,v+y/2,g,y,t);else if(p.ellipse)b=r.circle(m+g/2,v+y/2,g/2,t);else if(p.polygon||p.polyline){var x=(p.polygon?p.polygon:p.polyline).map(function(t){return{x:t.x*e,y:t.y*n}}),w=c.create(x),E=c.centre(w);m+=E.x,v+=E.y,b=r.fromVertices(m,v,w,t)}b&&f.push(b)}return 1===f.length?this.setBody(f[0],t.addToWorld):f.length>1&&(t.parts=f,this.setBody(i.create(t),t.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0}});t.exports=h},function(t,e,n){var r={};t.exports=r;var i=n(347),o=n(237),s=n(74);r.collisions=function(t,e){for(var n=[],a=e.pairs.table,u=e.metrics,c=0;c<t.length;c++){var h=t[c][0],l=t[c][1];if((!h.isStatic&&!h.isSleeping||!l.isStatic&&!l.isSleeping)&&r.canCollide(h.collisionFilter,l.collisionFilter)&&(u.midphaseTests+=1,s.overlaps(h.bounds,l.bounds)))for(var f=h.parts.length>1?1:0;f<h.parts.length;f++)for(var d=h.parts[f],p=l.parts.length>1?1:0;p<l.parts.length;p++){var m=l.parts[p];if(d===h&&m===l||s.overlaps(d.bounds,m.bounds)){var v,g=a[o.id(d,m)];v=g&&g.isActive?g.collision:null;var y=i.collides(d,m,v);u.narrowphaseTests+=1,y.reused&&(u.narrowReuseCount+=1),y.collided&&(n.push(y),u.narrowDetections+=1)}}}return n},r.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}},function(t,e,n){var r={};t.exports=r;var i=n(61),o=n(73);r.collides=function(t,e,n){var s,a,u,c,h=!1;if(n){var l=t.parent,f=e.parent,d=l.speed*l.speed+l.angularSpeed*l.angularSpeed+f.speed*f.speed+f.angularSpeed*f.angularSpeed;h=n&&n.collided&&d<.2,c=n}else c={collided:!1,bodyA:t,bodyB:e};if(n&&h){var p=c.axisBody,m=p===t?e:t,v=[p.axes[n.axisNumber]];if(u=r._overlapAxes(p.vertices,m.vertices,v),c.reused=!0,u.overlap<=0)return c.collided=!1,c}else{if((s=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;if((a=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;s.overlap<a.overlap?(u=s,c.axisBody=t):(u=a,c.axisBody=e),c.axisNumber=u.axisNumber}c.bodyA=t.id<e.id?t:e,c.bodyB=t.id<e.id?e:t,c.collided=!0,c.depth=u.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,t=c.bodyA,e=c.bodyB,o.dot(u.axis,o.sub(e.position,t.position))<0?c.normal={x:u.axis.x,y:u.axis.y}:c.normal={x:-u.axis.x,y:-u.axis.y},c.tangent=o.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var g=r._findSupports(t,e,c.normal),y=[];if(i.contains(t.vertices,g[0])&&y.push(g[0]),i.contains(t.vertices,g[1])&&y.push(g[1]),y.length<2){var b=r._findSupports(e,t,o.neg(c.normal));i.contains(e.vertices,b[0])&&y.push(b[0]),y.length<2&&i.contains(e.vertices,b[1])&&y.push(b[1])}return y.length<1&&(y=[g[0]]),c.supports=y,c},r._overlapAxes=function(t,e,n){for(var i,s,a=o._temp[0],u=o._temp[1],c={overlap:Number.MAX_VALUE},h=0;h<n.length;h++){if(s=n[h],r._projectToAxis(a,t,s),r._projectToAxis(u,e,s),(i=Math.min(a.max-u.min,u.max-a.min))<=0)return c.overlap=i,c;i<c.overlap&&(c.overlap=i,c.axis=s,c.axisNumber=h)}return c},r._projectToAxis=function(t,e,n){for(var r=o.dot(e[0],n),i=r,s=1;s<e.length;s+=1){var a=o.dot(e[s],n);a>i?i=a:a<r&&(r=a)}t.min=r,t.max=i},r._findSupports=function(t,e,n){for(var r,i,s,a,u=Number.MAX_VALUE,c=o._temp[0],h=e.vertices,l=t.position,f=0;f<h.length;f++)i=h[f],c.x=i.x-l.x,c.y=i.y-l.y,(r=-o.dot(n,c))<u&&(u=r,s=i);return i=h[s.index-1>=0?s.index-1:h.length-1],c.x=i.x-l.x,c.y=i.y-l.y,u=-o.dot(n,c),a=i,i=h[(s.index+1)%h.length],c.x=i.x-l.x,c.y=i.y-l.y,(r=-o.dot(n,c))<u&&(a=i),[s,a]}},function(t,e,n){var r=n(642);r.Body=n(42),r.Composite=n(131),r.World=n(350),r.Detector=n(346),r.Grid=n(643),r.Pairs=n(644),r.Pair=n(237),r.Query=n(1584),r.Resolver=n(645),r.SAT=n(347),r.Constraint=n(158),r.Common=n(30),r.Engine=n(646),r.Events=n(157),r.Sleeping=n(186),r.Plugin=n(349),r.Bodies=n(102),r.Composites=n(639),r.Axes=n(343),r.Bounds=n(74),r.Svg=n(1586),r.Vector=n(73),r.Vertices=n(61),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,t.exports=r},function(t,e,n){var r={};t.exports=r;var i=n(30);r._registry={},r.register=function(t){if(r.isPlugin(t)||i.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry){var e=r._registry[t.name],n=r.versionParse(t.version).number,o=r.versionParse(e.version).number;n>o?(i.warn("Plugin.register:",r.toString(e),"was upgraded to",r.toString(t)),r._registry[t.name]=t):n<o?i.warn("Plugin.register:",r.toString(e),"can not be downgraded to",r.toString(t)):t!==e&&i.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")}else r._registry[t.name]=t;return t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,e){return t.used.indexOf(e)>-1},r.isFor=function(t,e){var n=t.for&&r.dependencyParse(t.for);return!t.for||e.name===n.name&&r.versionSatisfies(e.version,n.range)},r.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var n=r.dependencies(t),o=i.topologicalSort(n),s=[],a=0;a<o.length;a+=1)if(o[a]!==t.name){var u=r.resolve(o[a]);u?r.isUsed(t,u.name)||(r.isFor(u,t)||(i.warn("Plugin.use:",r.toString(u),"is for",u.for,"but installed on",r.toString(t)+"."),u._warned=!0),u.install?u.install(t):(i.warn("Plugin.use:",r.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(s.push("🔶 "+r.toString(u)),delete u._warned):s.push("✅ "+r.toString(u)),t.used.push(u.name)):s.push("❌ "+o[a])}s.length>0&&!u.silent&&i.info(s.join("  "))}else i.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(t,e){var n=r.dependencyParse(t),o=n.name;if(!(o in(e=e||{}))){t=r.resolve(t)||t,e[o]=i.map(t.uses||[],function(e){r.isPlugin(e)&&r.register(e);var o=r.dependencyParse(e),s=r.resolve(e);return s&&!r.versionSatisfies(s.version,o.range)?(i.warn("Plugin.dependencies:",r.toString(s),"does not satisfy",r.toString(o),"used by",r.toString(n)+"."),s._warned=!0,t._warned=!0):s||(i.warn("Plugin.dependencies:",r.toString(e),"used by",r.toString(n),"could not be resolved."),t._warned=!0),o.name});for(var s=0;s<e[o].length;s+=1)r.dependencies(e[o][s],e);return e}},r.dependencyParse=function(t){return i.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||i.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||i.warn("Plugin.versionParse:",t,"is not a valid version or range.");var e=t.split("-");t=e[0];var n=isNaN(Number(t[0])),r=n?t.substr(1):t,o=i.map(r.split("."),function(t){return Number(t)});return{isRange:n,version:r,range:t,operator:n?t[0]:"",parts:o,prerelease:e[1],number:1e8*o[0]+1e4*o[1]+o[2]}},r.versionSatisfies=function(t,e){e=e||"*";var n=r.versionParse(e),i=n.parts,o=r.versionParse(t),s=o.parts;if(n.isRange){if("*"===n.operator||"*"===t)return!0;if("~"===n.operator)return s[0]===i[0]&&s[1]===i[1]&&s[2]>=i[2];if("^"===n.operator)return i[0]>0?s[0]===i[0]&&o.number>=n.number:i[1]>0?s[1]===i[1]&&s[2]>=i[2]:s[2]===i[2]}return t===e||"*"===t}},function(t,e,n){var r={};t.exports=r;var i=n(131),o=(n(158),n(30));r.create=function(t){var e=i.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return o.extend(e,n,t)}},function(t,e,n){var r=n(239);t.exports=function(t,e,n){var i=r(t,e,!0,n),o=r(t,e-1,!0,n),s=r(t,e+1,!0,n),a=r(t-1,e,!0,n),u=r(t+1,e,!0,n),c=i&&i.collides;return c&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),o&&o.collides&&(c&&(i.faceTop=!1),o.faceBottom=!c),s&&s.collides&&(c&&(i.faceBottom=!1),s.faceTop=!c),a&&a.collides&&(c&&(i.faceLeft=!1),a.faceRight=!c),u&&u.collides&&(c&&(i.faceRight=!1),u.faceLeft=!c),i&&!i.collides&&i.resetFaces(),i}},function(t,e,n){var r=n(133),i=n(187),o=n(351),s=n(132);t.exports=function(t,e,n,a,u){if(!i(e,n,u))return null;void 0===a&&(a=!0);var c=u.data[n][e],h=c&&c.collides;if(t instanceof r)null===u.data[n][e]&&(u.data[n][e]=new r(u,t.index,e,n,t.width,t.height)),u.data[n][e].copy(t);else{var l=t;null===u.data[n][e]?u.data[n][e]=new r(u,l,e,n,u.tileWidth,u.tileHeight):u.data[n][e].index=l}var f=u.data[n][e],d=-1!==u.collideIndexes.indexOf(f.index);return s(f,d),a&&h!==f.collides&&o(e,n,u),f}},function(t,e){t.exports=function(t,e,n){var r=n.collideIndexes.indexOf(t);e&&-1===r?n.collideIndexes.push(t):e||-1===r||n.collideIndexes.splice(r,1)}},function(t,e,n){var r=n(66),i=n(188),o=n(189),s=n(133);t.exports=function(t,e,n,a,u){for(var c=new i({tileWidth:n,tileHeight:a}),h=new o({name:t,tileWidth:n,tileHeight:a,format:r.ARRAY_2D,layers:[c]}),l=[],f=e.length,d=0,p=0;p<e.length;p++){l[p]=[];for(var m=e[p],v=0;v<m.length;v++){var g=parseInt(m[v],10);isNaN(g)||-1===g?l[p][v]=u?null:new s(c,-1,v,p,n,a):l[p][v]=new s(c,g,v,p,n,a)}0===d&&(d=m.length)}return h.width=c.width=d,h.height=c.height=f,h.widthInPixels=c.widthInPixels=d*n,h.heightInPixels=c.heightInPixels=f*a,c.data=l,h}},function(t,e){t.exports=function(t){var e=Boolean(2147483648&t),n=Boolean(1073741824&t),r=Boolean(536870912&t);t&=536870911;var i=0,o=!1;return e&&n&&r?(i=Math.PI/2,o=!0):e&&n&&!r?(i=Math.PI,o=!1):e&&!n&&r?(i=Math.PI/2,o=!1):!e||n||r?!e&&n&&r?(i=3*Math.PI/2,o=!1):e||!n||r?e||n||!r?e||n||r||(i=0,o=!1):(i=3*Math.PI/2,o=!0):(i=Math.PI,o=!0):(i=0,o=!0),{gid:t,flippedHorizontal:e,flippedVertical:n,flippedAntiDiagonal:r,rotation:i,flipped:o}}},function(t,e,n){var r=n(660),i=n(355),o=function(t){return{x:t.x,y:t.y}},s=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var a=r(t,s);if(a.x+=e,a.y+=n,t.gid){var u=i(t.gid);a.gid=u.gid,a.flippedHorizontal=u.flippedHorizontal,a.flippedVertical=u.flippedVertical,a.flippedAntiDiagonal=u.flippedAntiDiagonal}else t.polyline?a.polyline=t.polyline.map(o):t.polygon?a.polygon=t.polygon.map(o):t.ellipse?(a.ellipse=t.ellipse,a.width=t.width,a.height=t.height):t.text?(a.width=t.width,a.height=t.height,a.text=t.text):(a.rectangle=!0,a.width=t.width,a.height=t.height);return a}},function(t,e,n){var r=n(66),i=n(189),o=n(652),s=n(668);t.exports=function(t,e,n,a,u,c,h,l){void 0===n&&(n=32),void 0===a&&(a=32),void 0===u&&(u=10),void 0===c&&(c=10),void 0===l&&(l=!1);var f=null;if(Array.isArray(h))f=o(void 0!==e?e:"map",r.ARRAY_2D,h,n,a,l);else if(void 0!==e){var d=t.cache.tilemap.get(e);d?f=o(e,d.format,d.data,n,a,l):console.warn("No map data found for key "+e)}return null===f&&(f=new i({tileWidth:n,tileHeight:a,width:u,height:c})),new s(t,f)}},function(t,e,n){var r=n(14);t.exports=function(t){var e=r(t,"targets",null);return null===e?e:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e){function n(t){return!!t.getStart&&"function"==typeof t.getStart}function r(t){return!!t.getEnd&&"function"==typeof t.getEnd}var i=function(t,e){var o,s,a=function(t,e,n){return n},u=function(t,e,n){return n},c=typeof e;if("number"===c)a=function(){return e};else if("string"===c){var h=e[0],l=parseFloat(e.substr(2));switch(h){case"+":a=function(t,e,n){return n+l};break;case"-":a=function(t,e,n){return n-l};break;case"*":a=function(t,e,n){return n*l};break;case"/":a=function(t,e,n){return n/l};break;default:a=function(){return parseFloat(e)}}}else"function"===c?a=e:"object"===c&&(n(s=e)||r(s))?(r(e)&&(a=e.getEnd),n(e)&&(u=e.getStart)):e.hasOwnProperty("value")&&(o=i(t,e.value));return o||(o={getEnd:a,getStart:u}),o};t.exports=i},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,n){var r=n(0),i=n(27),o=n(13),s=n(174),a=new r({initialize:function(t,e,n){this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=n,this.totalTargets=n.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=s.PENDING_ADD,this._pausedState=s.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onRepeat:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(){return this.data[0].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},isPaused:function(){return this.state===s.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,n){void 0===n&&(n=!1);for(var r=0;r<this.totalData;r++){var i=this.data[r];if(i.key===t){i.end=e,n&&(i.start=i.current);break}}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===s.ACTIVE?this.seek(0):this.state===s.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===s.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=this.data,n=0;n<this.totalData;n++){var r=e[n];r.t1=r.duration+r.hold,r.yoyo&&(r.t1+=r.duration),r.t2=r.t1+r.repeatDelay,r.totalDuration=r.delay+r.t1,-1===r.repeat?r.totalDuration+=999999999999*r.t2:r.repeat>0&&(r.totalDuration+=r.t2*r.repeat),r.totalDuration>t&&(t=r.totalDuration)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){for(var t=this.data,e=this.totalTargets,n=0;n<this.totalData;n++){var r=t[n],i=r.target,o=r.gen;r.delay=o.delay(n,e,i),r.duration=Math.max(o.duration(n,e,i),.001),r.hold=o.hold(n,e,i),r.repeat=o.repeat(n,e,i),r.repeatDelay=o.repeatDelay(n,e,i)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.paused&&!this.parentIsTimeline?(this.state=s.PENDING_ADD,this._pausedState=s.INIT,!1):(this.state=s.INIT,!0)},nextState:function(){if(this.loopCounter>0){this.elapsed=0,this.progress=0,this.loopCounter--;var t=this.callbacks.onLoop;t&&(t.params[1]=this.targets,t.func.apply(t.scope,t.params)),this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):this.state=s.ACTIVE}else if(this.completeDelay>0)this.countdown=this.completeDelay,this.state=s.COMPLETE_DELAY;else{var e=this.callbacks.onComplete;e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.state=s.PENDING_REMOVE}},pause:function(){return this.state===s.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED,this)},play:function(t){if(void 0===t&&(t=!1),this.state===s.ACTIVE||this.state===s.PENDING_ADD&&this._pausedState===s.PENDING_ADD)return this;if(!this.parentIsTimeline&&(this.state===s.PENDING_REMOVE||this.state===s.REMOVED))return this.seek(0),this.parent.makeActive(this),this;var e=this.callbacks.onStart;return this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?(e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.state=s.ACTIVE):(this.countdown=this.calculatedOffset,this.state=s.OFFSET_DELAY)):this.paused?(this.paused=!1,this.parent.makeActive(this)):(this.resetTweenData(t),this.state=s.ACTIVE,e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.parent.makeActive(this)),this},resetTweenData:function(t){for(var e=this.data,n=0;n<this.totalData;n++){var r=e[n];r.progress=0,r.elapsed=0,r.repeatCounter=-1===r.repeat?999999999999:r.repeat,t?(r.start=r.getStartValue(r.target,r.key,r.start),r.end=r.getEndValue(r.target,r.key,r.end),r.current=r.start,r.state=s.PLAYING_FORWARD):r.state=s.PENDING_RENDER,r.delay>0&&(r.elapsed=r.delay,r.state=s.DELAY)}},resume:function(){return this.state===s.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t){for(var e=this.data,n=0;n<this.totalData;n++){var r=this.totalDuration*t,i=e[n],o=0,s=0;r<=i.delay?(o=0,s=0):r>=i.totalDuration?(o=1,s=i.duration):r>i.delay&&r<=i.t1?(o=(r=Math.max(0,r-i.delay))/i.t1,s=i.duration*o):r>i.t1&&r<i.totalDuration&&(r-=i.delay,(r=(r-=i.t1)/i.t2%1*i.t2)>i.repeatDelay&&(o=r/i.t1,s=i.duration*o)),i.progress=o,i.elapsed=s;var a=i.ease(i.progress);i.current=i.start+(i.end-i.start)*a,i.target[i.key]=i.current}return this},setCallback:function(t,e,n,r){return this.callbacks[t]={func:e,scope:r,params:n},this},complete:function(t){if(void 0===t&&(t=0),t)this.countdown=t,this.state=s.COMPLETE_DELAY;else{var e=this.callbacks.onComplete;e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.state=s.PENDING_REMOVE}return this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===s.ACTIVE&&void 0!==t&&this.seek(t),this.state!==s.REMOVED&&(this.state!==s.PAUSED&&this.state!==s.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.state=s.PENDING_REMOVE),this},update:function(t,e){if(this.state===s.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:for(var n=!1,r=0;r<this.totalData;r++)this.updateTweenData(this,this.data[r],e)&&(n=!0);n||this.nextState();break;case s.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=s.ACTIVE);break;case s.OFFSET_DELAY:if(this.countdown-=e,this.countdown<=0){var i=this.callbacks.onStart;i&&(i.params[1]=this.targets,i.func.apply(i.scope,i.params)),this.state=s.ACTIVE}break;case s.COMPLETE_DELAY:if(this.countdown-=e,this.countdown<=0){var o=this.callbacks.onComplete;o&&o.func.apply(o.scope,o.params),this.state=s.PENDING_REMOVE}}return this.state===s.PENDING_REMOVE},setStateFromEnd:function(t,e,n){if(e.yoyo){e.elapsed=n,e.progress=n/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY();var r=t.callbacks.onYoyo;return r&&(r.params[1]=e.target,r.func.apply(r.scope,r.params)),e.start=e.getStartValue(e.target,e.key,e.start),s.PLAYING_BACKWARD}if(e.repeatCounter>0){e.repeatCounter--,e.elapsed=n,e.progress=n/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY();var i=t.callbacks.onRepeat;return i&&(i.params[1]=e.target,i.func.apply(i.scope,i.params)),e.start=e.getStartValue(e.target,e.key,e.start),e.end=e.getEndValue(e.target,e.key,e.start),e.repeatDelay>0?(e.elapsed=e.repeatDelay-n,e.current=e.start,e.target[e.key]=e.current,s.REPEAT_DELAY):s.PLAYING_FORWARD}return s.COMPLETE},setStateFromStart:function(t,e,n){if(e.repeatCounter>0){e.repeatCounter--,e.elapsed=n,e.progress=n/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY();var r=t.callbacks.onRepeat;return r&&(r.params[1]=e.target,r.func.apply(r.scope,r.params)),e.end=e.getEndValue(e.target,e.key,e.start),e.repeatDelay>0?(e.elapsed=e.repeatDelay-n,e.current=e.start,e.target[e.key]=e.current,s.REPEAT_DELAY):s.PLAYING_FORWARD}return s.COMPLETE},updateTweenData:function(t,e,n){switch(e.state){case s.PLAYING_FORWARD:case s.PLAYING_BACKWARD:if(!e.target){e.state=s.COMPLETE;break}var r=e.elapsed,i=e.duration,o=0;(r+=n)>i&&(o=r-i,r=i);var a,u=e.state===s.PLAYING_FORWARD,c=r/i;a=u?e.ease(c):e.ease(1-c),e.current=e.start+(e.end-e.start)*a,e.target[e.key]=e.current,e.elapsed=r,e.progress=c;var h=t.callbacks.onUpdate;h&&(h.params[1]=e.target,h.func.apply(h.scope,h.params)),1===c&&(u?e.hold>0?(e.elapsed=e.hold-o,e.state=s.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,o):e.state=this.setStateFromStart(t,e,o));break;case s.DELAY:e.elapsed-=n,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=s.PENDING_RENDER);break;case s.REPEAT_DELAY:e.elapsed-=n,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=s.PLAYING_FORWARD);break;case s.HOLD_DELAY:e.elapsed-=n,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case s.PENDING_RENDER:e.target?(e.start=e.getStartValue(e.target,e.key,e.target[e.key]),e.end=e.getEndValue(e.target,e.key,e.start),e.current=e.start,e.target[e.key]=e.start,e.state=s.PLAYING_FORWARD):e.state=s.COMPLETE}return e.state!==s.COMPLETE}});a.TYPES=["onComplete","onLoop","onRepeat","onStart","onUpdate","onYoyo"],o.register("tween",function(t){return this.scene.sys.tweens.add(t)}),i.register("tween",function(t){return this.scene.sys.tweens.create(t)}),t.exports=a},function(t,e){t.exports=function(t,e,n,r,i,o,s,a,u,c,h,l,f){return{target:t,key:e,getEndValue:n,getStartValue:r,ease:i,duration:0,totalDuration:0,delay:0,yoyo:a,hold:0,repeat:0,repeatDelay:0,flipX:l,flipY:f,progress:0,elapsed:0,repeatCounter:0,start:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:s,hold:u,repeat:c,repeatDelay:h},state:0}}},function(t,e,n){var r=n(0),i=n(299),o=n(480),s=n(481),a=n(487),u=n(151),c=n(245),h=n(8),l=n(147),f=n(218),d=new l,p=new f,m=new l,v=new l,g=new i,y=new r({initialize:function(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,this.name="",this.direction=new l(0,0,-1),this.up=new l(0,1,0),this.position=new l,this.pixelScale=128,this.projection=new i,this.view=new i,this.combined=new i,this.invProjectionView=new i,this.near=1,this.far=100,this.ray={origin:new l,direction:new l},this.viewportWidth=0,this.viewportHeight=0,this.billboardMatrixDirty=!0,this.children=new u},setPosition:function(t,e,n){return this.position.set(t,e,n),this.update()},setScene:function(t){return this.scene=t,this},setPixelScale:function(t){return this.pixelScale=t,this.update()},add:function(t){return this.children.set(t),this.displayList.add(t.gameObject),this.updateList.add(t.gameObject),this.updateChildren(),t},remove:function(t){return this.displayList.remove(t.gameObject),this.updateList.remove(t.gameObject),this.children.delete(t),this},clear:function(){for(var t=this.getChildren(),e=0;e<t.length;e++)this.remove(t[e]);return this},getChildren:function(){return this.children.entries},create:function(t,e,n,r,i,o){void 0===o&&(o=!0);var s=new c(this.scene,t,e,n,r,i);return this.displayList.add(s.gameObject),this.updateList.add(s.gameObject),s.visible=o,this.children.set(s),this.updateChildren(),s},createMultiple:function(t,e,n,r){void 0===r&&(r=!0);for(var i=[],o=0;o<t;o++){var s=new c(this.scene,0,0,0,e,n);this.displayList.add(s.gameObject),this.updateList.add(s.gameObject),s.visible=r,this.children.set(s),i.push(s)}return i},createRect:function(t,e,n,r){"number"==typeof t&&(t={x:t,y:t,z:t}),"number"==typeof e&&(e={x:e,y:e,z:e});for(var i=t.x*t.y*t.z,o=this.createMultiple(i,n,r),s=0,a=.5-t.z/2;a<t.z/2;a++)for(var u=.5-t.y/2;u<t.y/2;u++)for(var c=.5-t.x/2;c<t.x/2;c++){var h=c*e.x,l=u*e.y,f=a*e.z;o[s].position.set(h,l,f),s++}return this.update(),o},randomSphere:function(t,e){void 0===e&&(e=this.getChildren());for(var n=0;n<e.length;n++)o(e[n].position,t);return this.update()},randomCube:function(t,e){void 0===e&&(e=this.getChildren());for(var n=0;n<e.length;n++)s(e[n].position,t);return this.update()},translateChildren:function(t,e){void 0===e&&(e=this.getChildren());for(var n=0;n<e.length;n++)e[n].position.add(t);return this.update()},transformChildren:function(t,e){void 0===e&&(e=this.getChildren());for(var n=0;n<e.length;n++)e[n].position.transformMat4(t);return this.update()},setViewport:function(t,e){return this.viewportWidth=t,this.viewportHeight=e,this.update()},translate:function(t,e,n){return"object"==typeof t?(this.position.x+=t.x||0,this.position.y+=t.y||0,this.position.z+=t.z||0):(this.position.x+=t||0,this.position.y+=e||0,this.position.z+=n||0),this.update()},lookAt:function(t,e,n){var r=this.direction,i=this.up;return"object"==typeof t?r.copy(t):r.set(t,e,n),r.subtract(this.position).normalize(),d.copy(r).cross(i).normalize(),i.copy(d).cross(r).normalize(),this.update()},rotate:function(t,e){return a(this.direction,e,t),a(this.up,e,t),this.update()},rotateAround:function(t,e,n){return d.copy(t).subtract(this.position),this.translate(d),this.rotate(e,n),this.translate(d.negate()),this.update()},project:function(t,e){void 0===e&&(e=new f);var n=this.viewportWidth,r=this.viewportHeight,i=y.NEAR_RANGE,o=y.FAR_RANGE;return p.set(t.x,t.y,t.z,1),p.transformMat4(this.combined),0===p.w&&(p.w=1),p.x=p.x/p.w,p.y=p.y/p.w,p.z=p.z/p.w,e.x=n/2*p.x+(0+n/2),e.y=r/2*p.y+(0+r/2),e.z=(o-i)/2*p.z+(o+i)/2,(0===e.w||e.w)&&(e.w=1/p.w),e},unproject:function(t,e){void 0===e&&(e=new l);var n=p.set(0,0,this.viewportWidth,this.viewportHeight);return e.copy(t).unproject(n,this.invProjectionView)},getPickRay:function(t,e){var n=this.ray.origin.set(t,e,0),r=this.ray.direction.set(t,e,1),i=p.set(0,0,this.viewportWidth,this.viewportHeight),o=this.invProjectionView;return n.unproject(i,o),r.unproject(i,o),r.subtract(n).normalize(),this.ray},updateChildren:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].project(this);return this},update:function(){return this.updateChildren()},updateBillboardMatrix:function(){var t=m.set(this.direction).negate(),e=v.set(this.up).cross(t).normalize(),n=d.set(t).cross(e).normalize(),r=g.val;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=0,r[4]=n.x,r[5]=n.y,r[6]=n.z,r[7]=0,r[8]=t.x,r[9]=t.y,r[10]=t.z,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.billboardMatrixDirty=!1},getPointSize:function(t,e,n){void 0===n&&(n=new h),this.billboardMatrixDirty&&this.updateBillboardMatrix();var r=d,i=e.x/this.pixelScale/2,o=e.y/this.pixelScale/2;r.set(-i,-o,0).transformMat4(g).add(t),this.project(r,r);var s=r.x,a=r.y;r.set(i,o,0).transformMat4(g).add(t),this.project(r,r);var u=r.x-s,c=r.y-a;return n.set(u,c)},destroy:function(){this.children.clear(),this.scene=void 0,this.children=void 0},setX:function(t){return this.position.x=t,this.update()},setY:function(t){return this.position.y=t,this.update()},setZ:function(t){return this.position.z=t,this.update()},x:{get:function(){return this.position.x},set:function(t){this.position.x=t,this.update()}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t,this.update()}},z:{get:function(){return this.position.z},set:function(t){this.position.z=t,this.update()}}});y.FAR_RANGE=1,y.NEAR_RANGE=0,t.exports=y},function(t,e,n){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isBigNumber||!1}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(1690),o=n(7).format,s=n(7).isNumber;e.name="Complex",e.path="type",e.factory=function(t,e,n,a,u){return i.prototype.type="Complex",i.prototype.isComplex=!0,i.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},i.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},i.prototype.format=function(t){var e=this.im,n=this.re,r=o(this.re,t),i=o(this.im,t),a=s(t)?t:t?t.precision:null;if(null!==a){var u=Math.pow(10,-a);Math.abs(n/e)<u&&(n=0),Math.abs(e/n)<u&&(e=0)}return 0===e?r:0===n?1===e?"i":-1===e?"-i":i+"i":e<0?-1===e?r+" - i":r+" - "+i.substring(1)+"i":1===e?r+" + i":r+" + "+i+"i"},i.fromPolar=function(e){switch(arguments.length){case 1:var n=arguments[0];if("object"===r(n))return i(n);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var o=arguments[0],a=arguments[1];if(s(o)){if(t.isUnit(a)&&a.hasBase("ANGLE")&&(a=a.toNumber("rad")),s(a))return new i({r:o,phi:a});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},i.prototype.valueOf=i.prototype.toString,i.fromJSON=function(t){return new i(t)},i.EPSILON=e.epsilon,u.on("config",function(t,e){t.epsilon!==e.epsilon&&(i.EPSILON=t.epsilon)}),i.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},i},e.math=!0},function(t,e,n){"use strict";var r=n(4);e.name="fraction",e.factory=function(t,e,n,i){var o=i("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t.Fraction(e)},string:function(e){return new t.Fraction(e)},"number, number":function(e,n){return new t.Fraction(e,n)},null:function(e){return new t.Fraction(0)},BigNumber:function(e){return new t.Fraction(e.toString())},Fraction:function(t){return t},Object:function(e){return new t.Fraction(e)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(104).string.isString;e.name="Matrix",e.path="type",e.factory=function(t,e,n,i){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(t){if(!r(t))throw new TypeError("format must be a string value");var e=o._storage[t];if(!e)throw new SyntaxError("Unsupported matrix storage format: "+t);return e},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm04",e.factory=function(t,e,i,o){var s=i(n(31)),a=t.SparseMatrix;return function(t,e,n){var i=t._values,u=t._index,c=t._ptr,h=t._size,l=t._datatype,f=e._values,d=e._index,p=e._ptr,m=e._size,v=e._datatype;if(h.length!==m.length)throw new r(h.length,m.length);if(h[0]!==m[0]||h[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+m+")");var g,y=h[0],b=h[1],x=s,w=0,E=n;"string"==typeof l&&l===v&&(g=l,x=o.find(s,[g,g]),w=o.convert(0,g),E=o.find(n,[g,g]));var _,S,T,A,M,C=i&&f?[]:void 0,O=[],N=[],k=new a({values:C,index:O,ptr:N,size:[y,b],datatype:g}),R=i&&f?[]:void 0,P=i&&f?[]:void 0,I=[],D=[];for(S=0;S<b;S++){N[S]=O.length;var L=S+1;for(A=c[S],M=c[S+1],T=A;T<M;T++)_=u[T],O.push(_),I[_]=L,R&&(R[_]=i[T]);for(A=p[S],M=p[S+1],T=A;T<M;T++)if(I[_=d[T]]===L){if(R){var B=E(R[_],f[T]);x(B,w)?I[_]=null:R[_]=B}}else O.push(_),D[_]=L,P&&(P[_]=f[T]);if(R&&P)for(T=N[S];T<O.length;)I[_=O[T]]===L?(C[T]=R[_],T++):D[_]===L?(C[T]=P[_],T++):O.splice(T,1)}return N[b]=O.length,k}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.math=!0,e.name="simplify",e.factory=function(t,e,i,o,s){var a=i(n(137)),u=i(n(162)),c=i(n(192)),h=i(n(253)),l=i(n(193)),f=i(n(252)),d=i(n(165)),p=i(n(703)),m=i(n(705)),v=i(n(1718)),g=i(n(704)),y=g.isCommutative,b=g.isAssociative,x=g.flatten,w=g.unflattenr,E=g.unflattenl,_=g.createMakeNodeFunction,S=o("simplify",{string:function(t){return S(a(t),S.rules,{},{})},"string, Object":function(t,e){return S(a(t),S.rules,e,{})},"string, Object, Object":function(t,e,n){return S(a(t),S.rules,e,n)},"string, Array":function(t,e){return S(a(t),e,{},{})},"string, Array, Object":function(t,e,n){return S(a(t),e,n,{})},"string, Array, Object, Object":function(t,e,n,r){return S(a(t),e,n,r)},"Node, Object":function(t,e){return S(t,S.rules,e,{})},"Node, Object, Object":function(t,e,n){return S(t,S.rules,e,n)},Node:function(t){return S(t,S.rules,{},{})},"Node, Array":function(t,e){return S(t,e,{},{})},"Node, Array, Object":function(t,e,n){return S(t,e,n,{})},"Node, Array, Object, Object":function(t,e,n,i){e=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],o=void 0,s=r(i);switch(s){case"string":var u=i.split("->");if(2!==u.length)throw SyntaxError("Could not parse rule: "+i);i={l:u[0],r:u[1]};case"object":if(o={l:T(a(i.l)),r:T(a(i.r))},i.context&&(o.evaluate=i.context),i.evaluate&&(o.evaluate=a(i.evaluate)),b(o.l)){var c=_(o.l),h=new d("_p"+M++);o.expanded={},o.expanded.l=c([o.l.clone(),h]),x(o.expanded.l),w(o.expanded.l),o.expanded.r=c([o.r,h])}break;case"function":o=i;break;default:throw TypeError("Unsupported type of rule: "+s)}e.push(o)}return e}(e);for(var o=v(t,n),s={},u=(o=T(o)).toString({parenthesis:"all"});!s[u];){s[u]=!0,M=0;for(var c=0;c<e.length;c++)"function"==typeof e[c]?o=e[c](o,i):(x(o),o=C(o,e[c])),E(o);u=o.toString({parenthesis:"all"})}return o}});function T(e){return e.transform(function(e,n,r){return t.isParenthesisNode(e)?e.content:e})}S.simplifyCore=m,S.resolve=v;var A={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};S.rules=[m,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},p,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"}];var M=0,C=o("applyRule",{"Node, Object":function(t,e){var n=t;if(n instanceof l||n instanceof h){if(n.args)for(var r=0;r<n.args.length;r++)n.args[r]=C(n.args[r],e)}else n instanceof f&&n.content&&(n.content=C(n.content,e));var i=e.r,o=k(e.l,n)[0];if(!o&&e.expanded&&(i=e.expanded.r,o=k(e.expanded.l,n)[0]),o){var s=n.implicit;n=i.clone(),s&&"implicit"in i&&(n.implicit=!0),n=function t(e){return e.isSymbolNode&&o.placeholders.hasOwnProperty(e.name)?o.placeholders[e.name].clone():e.map(t)}(n)}return n}});function O(t,e){var n={placeholders:{}};if(!t.placeholders&&!e.placeholders)return n;if(!t.placeholders)return e;if(!e.placeholders)return t;for(var r in t.placeholders)if(n.placeholders[r]=t.placeholders[r],e.placeholders.hasOwnProperty(r)&&!R(t.placeholders[r],e.placeholders[r]))return null;for(var i in e.placeholders)n.placeholders[i]=e.placeholders[i];return n}function N(t,e){var n,r=[];if(0===t.length||0===e.length)return r;for(var i=0;i<t.length;i++)for(var o=0;o<e.length;o++)(n=O(t[i],e[o]))&&r.push(n);return r}function k(e,n,r){var i=[{placeholders:{}}];if(e instanceof l&&n instanceof l||e instanceof h&&n instanceof h){if(e instanceof l){if(e.op!==n.op||e.fn!==n.fn)return[]}else if(e instanceof h&&e.name!==n.name)return[];if((1!==n.args.length||1!==e.args.length)&&b(n)&&!r){if(n.args.length>=2&&2===e.args.length){for(var o=function(t,e){var n,r,i=[],o=_(t);if(y(t,e))for(var s=0;s<t.args.length;s++)(r=t.args.slice(0)).splice(s,1),n=1===r.length?r[0]:o(r),i.push(o([t.args[s],n]));else n=1===(r=t.args.slice(1)).length?r[0]:o(r),i.push(o([t.args[0],n]));return i}(n,e.context),a=[],f=0;f<o.length;f++){var p=k(e,o[f],!0);a=a.concat(p)}return a}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var m=[],v=0;v<e.args.length;v++){var g=k(e.args[v],n.args[v]);if(0===g.length)return[];m.push(g)}i=function(t){if(0===t.length)return t;for(var e=t.reduce(N),n=[],r={},i=0;i<e.length;i++){var o=JSON.stringify(e[i]);r[o]||(r[o]=!0,n.push(e[i]))}return n}(m)}else if(e instanceof d){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(s.hasOwnProperty(e.name)){if(!A[e.name])throw new Error("Built in constant: "+e.name+" is not supported by simplify.");if(e.name!==n.name)return[]}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))i[0].placeholders[e.name]=n;else if("v"===e.name[0]){if(t.isConstantNode(n))return[];i[0].placeholders[e.name]=n}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(n instanceof c))return[];i[0].placeholders[e.name]=n}}else{if(!(e instanceof c))return[];if(!u(e.value,n.value))return[]}return i}function R(t,e){if(t instanceof c&&e instanceof c){if(!u(t.value,e.value))return!1}else if(t instanceof d&&e instanceof d){if(t.name!==e.name)return!1}else{if(!(t instanceof l&&e instanceof l||t instanceof h&&e instanceof h))return!1;if(t instanceof l){if(t.op!==e.op||t.fn!==e.fn)return!1}else if(t instanceof h&&t.name!==e.name)return!1;if(t.args.length!==e.args.length)return!1;for(var n=0;n<t.args.length;n++)if(!R(t.args[n],e.args[n]))return!1}return!0}return S}},function(t,e,n){"use strict";var r=n(104).object;e.name="lup",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(68)),u=i(n(53)),c=i(n(44)),h=i(n(62)),l=i(n(48)),f=i(n(106)),d=i(n(31)),p=i(n(120)),m=t.SparseMatrix,v=t.DenseMatrix,g=t.Spa;function y(t){var e,n,i,o=t._size[0],s=t._size[1],p=Math.min(o,s),m=r.clone(t._data),g=[],y=[o,p],b=[],x=[p,s],w=[];for(e=0;e<o;e++)w[e]=e;for(n=0;n<s;n++){if(n>0)for(e=0;e<o;e++){var E=Math.min(e,n),_=0;for(i=0;i<E;i++)_=u(_,h(m[e][i],m[i][n]));m[e][n]=l(m[e][n],_)}var S=n,T=0,A=0;for(e=n;e<o;e++){var M=m[e][n],C=a(M);f(C,T)&&(S=e,T=C,A=M)}if(n!==S&&(w[n]=[w[S],w[S]=w[n]][0],v._swapRows(n,S,m)),n<o)for(e=n+1;e<o;e++){var O=m[e][n];d(O,0)||(m[e][n]=c(m[e][n],A))}}for(n=0;n<s;n++)for(e=0;e<o;e++)0===n&&(e<s&&(b[e]=[]),g[e]=[]),e<n?(e<s&&(b[e][n]=m[e][n]),n<o&&(g[e][n]=0)):e!==n?(e<s&&(b[e][n]=0),n<o&&(g[e][n]=m[e][n])):(e<s&&(b[e][n]=m[e][n]),n<o&&(g[e][n]=1));var N=new v({data:g,size:y}),k=new v({data:b,size:x}),R=[];for(e=0,p=w.length;e<p;e++)R[w[e]]=e;return{L:N,U:k,p:R,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function b(t){var e,n,r,i=t._size[0],o=t._size[1],s=Math.min(i,o),u=t._values,l=t._index,v=t._ptr,y=[],b=[],x=[],w=[i,s],E=[],_=[],S=[],T=[s,o],A=[],M=[];for(e=0;e<i;e++)A[e]=e,M[e]=e;var C=function(){var t=new g;n<i&&(x.push(y.length),y.push(1),b.push(n)),S.push(E.length);var o=v[n],s=v[n+1];for(r=o;r<s;r++)e=l[r],t.set(A[e],u[r]);n>0&&t.forEach(0,n-1,function(e,n){m._forEachRow(e,y,b,x,function(r,i){r>e&&t.accumulate(r,p(h(i,n)))})});var C,O,N,k,R=n,P=t.get(n),I=a(P);t.forEach(n+1,i-1,function(t,e){var n=a(e);f(n,I)&&(R=t,I=n,P=e)}),n!==R&&(m._swapRows(n,R,w[1],y,b,x),m._swapRows(n,R,T[1],E,_,S),t.swap(n,R),O=R,N=M[C=n],k=M[O],A[N]=O,A[k]=C,M[C]=k,M[O]=N),t.forEach(0,i-1,function(t,e){t<=n?(E.push(e),_.push(t)):(e=c(e,P),d(e,0)||(y.push(e),b.push(t)))})};for(n=0;n<o;n++)C();return S.push(E.length),x.push(y.length),{L:new m({values:y,index:b,ptr:x,size:w}),U:new m({values:E,index:_,ptr:S,size:T}),p:A,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}return o("lup",{DenseMatrix:function(t){return y(t)},SparseMatrix:function(t){return b(t)},Array:function(t){var e=y(s(t));return{L:e.L.valueOf(),U:e.U.valueOf(),p:e.p}}})}},function(t,e,n){"use strict";e.name="csFlip",e.path="algebra.sparse",e.factory=function(){return function(t){return-t-2}}},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.name="largerEq",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(54)),c=o(n(83)),h=o(n(55)),l=o(n(19)),f=o(n(18)),d=n(9),p=s("largerEq",{"boolean, boolean":function(t,e){return t>=e},"number, number":function(t,n){return t>=n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.gte(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return-1!==t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,p)},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"SparseMatrix, any":function(t,e){return h(t,e,p,!1)},"DenseMatrix, any":function(t,e){return f(t,e,p,!1)},"any, SparseMatrix":function(t,e){return h(e,t,p,!0)},"any, DenseMatrix":function(t,e){return f(e,t,p,!0)},"Array, any":function(t,e){return f(a(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(a(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(d.operators.largerEq,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(104),i=r.string,o=r.array,s=Array.isArray;e.factory=function(t){var e=t.DenseMatrix;return function(n,r,a){var u=n.size();if(2!==u.length)throw new RangeError("Matrix must be two dimensional (size: "+i.format(u)+")");var c,h,l,f=u[0];if(f!==u[1])throw new RangeError("Matrix must be square (size: "+i.format(u)+")");if(t.isMatrix(r)){var d=r.size();if(1===d.length){if(d[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(c=[],l=r._data,h=0;h<f;h++)c[h]=[l[h]];return new e({data:c,size:[f,1],datatype:r._datatype})}if(2===d.length){if(d[0]!==f||1!==d[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(t.isDenseMatrix(r)){if(a){for(c=[],l=r._data,h=0;h<f;h++)c[h]=[l[h][0]];return new e({data:c,size:[f,1],datatype:r._datatype})}return r}for(c=[],h=0;h<f;h++)c[h]=[0];for(var p=r._values,m=r._index,v=r._ptr,g=v[1],y=v[0];y<g;y++)c[h=m[y]][0]=p[y];return new e({data:c,size:[f,1],datatype:r._datatype})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}if(s(r)){var b=o.size(r);if(1===b.length){if(b[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(c=[],h=0;h<f;h++)c[h]=[r[h]];return new e({data:c,size:[f,1]})}if(2===b.length){if(b[0]!==f||1!==b[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(c=[],h=0;h<f;h++)c[h]=[r[h][0]];return new e({data:c,size:[f,1]})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}}}},function(t,e,n){"use strict";var r=n(4);e.name="log",e.factory=function(t,e,i,o){var s=i(n(44)),a=o("log",{number:function(n){return n>=0||e.predictable?Math.log(n):new t.Complex(n,0).log()},Complex:function(t){return t.log()},BigNumber:function(n){return!n.isNegative()||e.predictable?n.ln():new t.Complex(n.toNumber(),0).log()},"Array | Matrix":function(t){return r(t,a)},"any, any":function(t,e){return s(a(t),a(e))}});return a.toTex={1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(376);function i(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",o=7-i.length;o--;)i="0"+i;n+=i}for(var s=n.length;"0"===n.charAt(s);)s--;var a=t.e,u=n.slice(0,s+1||1),c=u.length;if(a>0)if(++a>c)for(a-=c;a--;)u+="0";else a<c&&(u=u.slice(0,a)+"."+u.slice(a));for(var h=[0],l=0;l<u.length;){for(var f=h.length;f--;)h[f]*=10;h[0]+=parseInt(u.charAt(l++));for(var d=0;d<h.length;++d)h[d]>1&&(null!==h[d+1]&&void 0!==h[d+1]||(h[d+1]=0),h[d+1]+=h[d]>>1,h[d]&=1)}return h.reverse()}t.exports=function(t,e,n){var o,s,a,u,c,h=t.constructor,l=+(t.s<0),f=+(e.s<0);if(l){o=i(r(t));for(var d=0;d<o.length;++d)o[d]^=1}else o=i(t);if(f){s=i(r(e));for(var p=0;p<s.length;++p)s[p]^=1}else s=i(e);o.length<=s.length?(a=o,u=s,c=l):(a=s,u=o,c=f);var m=a.length,v=u.length,g=1^n(l,f),y=new h(1^g),b=new h(1),x=new h(2),w=h.precision;for(h.config({precision:1e9});m>0;)n(a[--m],u[--v])===g&&(y=y.plus(b)),b=b.times(x);for(;v>0;)n(c,u[--v])===g&&(y=y.plus(b)),b=b.times(x);return h.config({precision:w}),0===g&&(y.s=-y.s),y}},function(t,e,n){"use strict";t.exports=function(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm08",e.factory=function(t,e,i,o){var s=i(n(31)),a=t.SparseMatrix;return function(t,e,n){var i=t._values,u=t._index,c=t._ptr,h=t._size,l=t._datatype,f=e._values,d=e._index,p=e._ptr,m=e._size,v=e._datatype;if(h.length!==m.length)throw new r(h.length,m.length);if(h[0]!==m[0]||h[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+m+")");if(!i||!f)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var g,y=h[0],b=h[1],x=s,w=0,E=n;"string"==typeof l&&l===v&&(g=l,x=o.find(s,[g,g]),w=o.convert(0,g),E=o.find(n,[g,g]));for(var _,S,T,A,M=[],C=[],O=[],N=new a({values:M,index:C,ptr:O,size:[y,b],datatype:g}),k=[],R=[],P=0;P<b;P++){O[P]=C.length;var I=P+1;for(S=c[P],T=c[P+1],_=S;_<T;_++)R[A=u[_]]=I,k[A]=i[_],C.push(A);for(S=p[P],T=p[P+1],_=S;_<T;_++)R[A=d[_]]===I&&(k[A]=E(k[A],f[_]));for(_=O[P];_<C.length;){var D=k[A=C[_]];x(D,w)?C.splice(_,1):(M.push(D),_++)}}return O[b]=C.length,N}}},function(t,e,n){"use strict";t.exports=function t(e,n){var r;return n<e?1:n===e?n:t(e,r=n+e>>1)*t(r+1,n)}},function(t,e,n){"use strict";var r=n(5).size,i=n(190),o=n(159);function s(t,e,n){var r,i,o;if(e<=0){if(Array.isArray(t[0])){for(o=function(t){var e,n,r=t.length,i=t[0].length,o=[];for(n=0;n<i;n++){var s=[];for(e=0;e<r;e++)s.push(t[e][n]);o.push(s)}return o}(t),i=[],r=0;r<o.length;r++)i[r]=s(o[r],e-1,n);return i}return n(t)}for(i=[],r=0;r<t.length;r++)i[r]=s(t[r],e-1,n);return i}e.name="apply",e.factory=function(t,e,a,u){var c=a(n(107)),h=u("apply",{"Array | Matrix, number | BigNumber, function":function(t,e,n){if(!c(e))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(t)?r(t):t.size();if(e<0||e>=a.length)throw new o(e,a.length);return i(t)?t.create(s(t.valueOf(),e,n)):s(t,e,n)}});return h.toTex=void 0,h}},function(t,e,n){"use strict";var r=n(7).isInteger;e.name="partitionSelect",e.factory=function(t,e,i,o){var s=i(n(163)),a=i(n(263)),u=i(n(166));function c(t,e){return-u(t,e)}return o("partitionSelect",{"Array | Matrix, number":function(t,e){return h(t,e,u)},"Array | Matrix, number, string":function(t,e,n){if("asc"===n)return h(t,e,u);if("desc"===n)return h(t,e,c);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":h});function h(e,n,i){if(!r(n)||n<0)throw new Error("k must be a non-negative integer");if(t.isMatrix(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return l(e.valueOf(),n,i)}if(Array.isArray(e))return l(e,n,i)}function l(t,e,n){if(e>=t.length)throw new Error("k out of bounds");for(var r=0;r<t.length;r++)if(s(t[r])&&a(t[r]))return t[r];for(var i=0,o=t.length-1;i<o;){for(var u=i,c=o,h=t[Math.floor(Math.random()*(o-i+1))+i];u<c;)if(n(t[u],h)>=0){var l=t[c];t[c]=t[u],t[u]=l,--c}else++u;n(t[u],h)>0&&--u,e<=u?o=u:i=u+1}return t[e]}}},function(t,e,n){"use strict";var r=n(140),i=n(264),o=n(196);e.name="max",e.factory=function(t,e,s,a){var u=s(n(106)),c=s(n(121)),h=a("max",{"Array | Matrix":f,"Array | Matrix, number | BigNumber":function(t,e){return i(t,e.valueOf(),l)},"...":function(t){if(o(t))throw new TypeError("Scalar values expected in function max");return f(t)}});return h.toTex="\\max\\left(${args}\\right)",h;function l(t,e){try{return u(t,e)?t:e}catch(t){throw c(t,"max",e)}}function f(t){var e;if(r(t,function(t){try{isNaN(t)&&"number"==typeof t?e=NaN:(void 0===e||u(t,e))&&(e=t)}catch(e){throw c(e,"max",t)}}),void 0===e)throw new Error("Cannot calculate max of an empty array");return e}}},function(t,e,n){"use strict";var r=n(140),i=n(264),o=n(196);e.name="sum",e.factory=function(t,e,s,a){var u=s(n(53)),c=s(n(121)),h=a("sum",{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(t,e){try{var n=i(t,e,u);return n}catch(t){throw c(t,"sum")}},"...":function(t){if(o(t))throw new TypeError("Scalar values expected in function sum");return l(t)}});return h.toTex=void 0,h;function l(n){var i;if(r(n,function(t){try{i=void 0===i?t:u(i,t)}catch(e){throw c(e,"sum",t)}}),void 0===i)switch(e.number){case"number":return 0;case"BigNumber":return new t.BigNumber(0);case"Fraction":return new t.Fraction(0);default:return 0}return i}}},function(t,e,n){"use strict";var r=n(191),i=n(108),o=n(7).isNumber;e.name="distribution",e.factory=function(t,e,s,a,u){var c=s(n(3)),h=n(5),l=s(n(1810));function f(e){if(!d.hasOwnProperty(e))throw new Error("Unknown distribution "+e);var n=Array.prototype.slice.call(arguments,1);return function(e){function n(e,n,r){var i=void 0===n;if(i&&(n=1),t.isMatrix(e))e=e.valueOf();else if(!Array.isArray(e))throw new TypeError("Unsupported type of value in function pickRandom");if(h.size(e).length>1)throw new Error("Only one dimensional vectors supported");var s=0;if(void 0!==r){if(r.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var a=0,u=r.length;a<u;a++){if(!o(r[a])||r[a]<0)throw new Error("Weights must be an array of positive numbers");s+=r[a]}}var c=e.length;if(0===c)return[];if(n>=c)return n>1?e:e[0];for(var f,d=[];d.length<n;){if(void 0===r)f=e[Math.floor(l()*c)];else for(var p=l()*s,m=0,v=e.length;m<v;m++)if((p-=r[m])<0){f=e[m];break}-1===d.indexOf(f)&&d.push(f)}return i?d[0]:d}function s(t,n){return t+e()*(n-t)}function u(t,n){return Math.floor(t+e()*(n-t))}function f(t,e,n,r){var i=[];if((t=t.slice(0)).length>1)for(var o=0,s=t.shift();o<s;o++)i.push(f(t,e,n,r));else for(var a=0,u=t.shift();a<u;a++)i.push(r(e,n));return i}return{random:function(e,n,a){var u,h,l;if(arguments.length>3)throw new r("random",arguments.length,0,3);if(1===arguments.length?i(e)?u=e:l=e:2===arguments.length?i(e)?(u=e,l=n):(h=e,l=n):(u=e,h=n,l=a),void 0!==h&&!o(h)||void 0!==l&&!o(l))throw new TypeError("Invalid argument in function random");if(void 0===l&&(l=1),void 0===h&&(h=0),void 0!==u){var d=f(u.valueOf(),h,l,s);return t.isMatrix(u)?c(d):d}return s(h,l)},randomInt:a({"number | Array":function(e){if(i(e)){var n=e,r=f(n.valueOf(),0,1,u);return t.isMatrix(n)?c(r):r}return u(0,e)},"number | Array, number":function(e,n){if(i(e)){var r=e,o=n,s=f(r.valueOf(),0,o,u);return t.isMatrix(r)?c(s):s}return u(e,n)},"Array, number, number":function(t,e,n){var r=f(t.valueOf(),e,n,u);return t&&!0===t.isMatrix?c(r):r}}),pickRandom:a({Array:function(t){return n(t)},"Array, number | Array":function(t,e){var r,i;if(Array.isArray(e))i=e;else{if(!o(e))throw new TypeError("Invalid argument in function pickRandom");r=e}return n(t,r,i)},"Array, number | Array, Array | number":function(t,e,r){var i,s;if(Array.isArray(e)?(s=e,i=r):(s=r,i=e),!Array.isArray(s)||!o(i))throw new TypeError("Invalid argument in function pickRandom");return n(t,i,s)}})}}(d[e].apply(this,n))}var d={uniform:function(){return l},normal:function(){return function(){for(var t,e,n=-1;n<0||n>1;)t=l(),e=l(),n=1/6*Math.pow(-2*Math.log(t),.5)*Math.cos(2*Math.PI*e)+.5;return n}}};return f.toTex=void 0,f}},function(t,e,n){"use strict";var r="unbiased",i=n(140);e.name="var",e.factory=function(t,e,o,s){var a=o(n(379)),u=o(n(53)),c=o(n(48)),h=o(n(62)),l=o(n(44)),f=o(n(263)),d=o(n(121)),p=s("variance",{"Array | Matrix":function(t){return m(t,r)},"Array | Matrix, string":m,"Array | Matrix, number | BigNumber":function(t,e){return v(t,e,r)},"Array | Matrix, number | BigNumber, string":v,"...":function(t){return m(t,r)}});return p.toTex="\\mathrm{Var}\\left(${args}\\right)",p;function m(e,n){var r=0,o=0;if(0===e.length)throw new SyntaxError("Function var requires one or more parameters (0 provided)");if(i(e,function(t){try{r=u(r,t),o++}catch(e){throw d(e,"var",t)}}),0===o)throw new Error("Cannot calculate var of an empty array");var s=l(r,o);if(r=0,i(e,function(t){var e=c(t,s);r=u(r,h(e,e))}),f(r))return r;switch(n){case"uncorrected":return l(r,o);case"biased":return l(r,o+1);case"unbiased":var a=t.isBigNumber(r)?new t.BigNumber(0):0;return 1===o?a:l(r,o-1);default:throw new Error('Unknown normalization "'+n+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function v(t,e,n){try{if(0===t.length)throw new SyntaxError("Function var requires one or more parameters (0 provided)");return a(t,e,function(t){return m(t,n)})}catch(t){throw d(t,"var")}}}},function(t,e,n){"use strict";e.factory=function(t,e,n,r){return function(e,n,r){var i=e.filter(function(e){return t.isSymbolNode(e)&&!(e.name in n)&&!(e.name in r)})[0];if(!i)throw new Error('No undefined variable found in inline expression "'+e+'"');var o=i.name,s=Object.create(r),a=e.compile();return function(t){return s[o]=t,a.eval(s)}}}},function(t,e,n){"use strict";var r=n(10),i=n(739),o=n(11).Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function c(t,e,n,r,i,o,s){return u(t+(e&n|~e&r)+i+o|0,s)+e|0}function h(t,e,n,r,i,o,s){return u(t+(e&r|n&~r)+i+o|0,s)+e|0}function l(t,e,n,r,i,o,s){return u(t+(e^n^r)+i+o|0,s)+e|0}function f(t,e,n,r,i,o,s){return u(t+(n^(e|~r))+i+o|0,s)+e|0}r(a,i),a.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var n=this._a,r=this._b,i=this._c,o=this._d;n=c(n,r,i,o,t[0],3614090360,7),o=c(o,n,r,i,t[1],3905402710,12),i=c(i,o,n,r,t[2],606105819,17),r=c(r,i,o,n,t[3],3250441966,22),n=c(n,r,i,o,t[4],4118548399,7),o=c(o,n,r,i,t[5],1200080426,12),i=c(i,o,n,r,t[6],2821735955,17),r=c(r,i,o,n,t[7],4249261313,22),n=c(n,r,i,o,t[8],1770035416,7),o=c(o,n,r,i,t[9],2336552879,12),i=c(i,o,n,r,t[10],4294925233,17),r=c(r,i,o,n,t[11],2304563134,22),n=c(n,r,i,o,t[12],1804603682,7),o=c(o,n,r,i,t[13],4254626195,12),i=c(i,o,n,r,t[14],2792965006,17),n=h(n,r=c(r,i,o,n,t[15],1236535329,22),i,o,t[1],4129170786,5),o=h(o,n,r,i,t[6],3225465664,9),i=h(i,o,n,r,t[11],643717713,14),r=h(r,i,o,n,t[0],3921069994,20),n=h(n,r,i,o,t[5],3593408605,5),o=h(o,n,r,i,t[10],38016083,9),i=h(i,o,n,r,t[15],3634488961,14),r=h(r,i,o,n,t[4],3889429448,20),n=h(n,r,i,o,t[9],568446438,5),o=h(o,n,r,i,t[14],3275163606,9),i=h(i,o,n,r,t[3],4107603335,14),r=h(r,i,o,n,t[8],1163531501,20),n=h(n,r,i,o,t[13],2850285829,5),o=h(o,n,r,i,t[2],4243563512,9),i=h(i,o,n,r,t[7],1735328473,14),n=l(n,r=h(r,i,o,n,t[12],2368359562,20),i,o,t[5],4294588738,4),o=l(o,n,r,i,t[8],2272392833,11),i=l(i,o,n,r,t[11],1839030562,16),r=l(r,i,o,n,t[14],4259657740,23),n=l(n,r,i,o,t[1],2763975236,4),o=l(o,n,r,i,t[4],1272893353,11),i=l(i,o,n,r,t[7],4139469664,16),r=l(r,i,o,n,t[10],3200236656,23),n=l(n,r,i,o,t[13],681279174,4),o=l(o,n,r,i,t[0],3936430074,11),i=l(i,o,n,r,t[3],3572445317,16),r=l(r,i,o,n,t[6],76029189,23),n=l(n,r,i,o,t[9],3654602809,4),o=l(o,n,r,i,t[12],3873151461,11),i=l(i,o,n,r,t[15],530742520,16),n=f(n,r=l(r,i,o,n,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,n,r,i,t[7],1126891415,10),i=f(i,o,n,r,t[14],2878612391,15),r=f(r,i,o,n,t[5],4237533241,21),n=f(n,r,i,o,t[12],1700485571,6),o=f(o,n,r,i,t[3],2399980690,10),i=f(i,o,n,r,t[10],4293915773,15),r=f(r,i,o,n,t[1],2240044497,21),n=f(n,r,i,o,t[8],1873313359,6),o=f(o,n,r,i,t[15],4264355552,10),i=f(i,o,n,r,t[6],2734768916,15),r=f(r,i,o,n,t[13],1309151649,21),n=f(n,r,i,o,t[4],4149444226,6),o=f(o,n,r,i,t[11],3174756917,10),i=f(i,o,n,r,t[2],718787259,15),r=f(r,i,o,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},function(t,e,n){t.exports=i;var r=n(388).EventEmitter;function i(){r.call(this)}n(10)(i,r),i.Readable=n(389),i.Writable=n(2107),i.Duplex=n(2108),i.Transform=n(2109),i.PassThrough=n(2110),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(h(),0===r.listenerCount(this,"error"))throw t}function h(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",h),n.removeListener("close",h),t.removeListener("close",h)}return n.on("error",c),t.on("error",c),n.on("end",h),n.on("close",h),t.on("close",h),t.emit("pipe",n),t}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,h=p(u,c);for(n=0;n<c;++n)o(h[n],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,l(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,l(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){(e=t.exports=n(740)).Stream=e,e.Readable=e,e.Writable=n(390),e.Duplex=n(141),e.Transform=n(743),e.PassThrough=n(2106)},function(t,e,n){"use strict";(function(e,r,i){var o=n(265);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=g;var c=n(198);c.inherits=n(10);var h={deprecate:n(2105)},l=n(741),f=n(11).Buffer,d=i.Uint8Array||function(){};var p,m=n(742);function v(){}function g(t,e){a=a||n(141),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),S(t,e))}(t,n,r,e,i);else{var s=E(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(x,t,n,s,i):x(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(t){if(a=a||n(141),!(p.call(y,this)||this instanceof a))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function b(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function x(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,b(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,h=n.encoding,l=n.callback;if(b(t,e,!1,e.objectMode?1:c.length,c,h,l),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var n=E(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(y,l),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof g)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof d);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(81),n(246).setImmediate,n(50))},function(t,e,n){"use strict";var r=n(11).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=h,this.end=l,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function h(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";var r=n(46).Buffer,i=n(10),o=n(739),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function m(t,e,n,r,i,o,s,a){return p(t+(e^n^r)+o+s|0,a)+i|0}function v(t,e,n,r,i,o,s,a){return p(t+(e&n|~e&r)+o+s|0,a)+i|0}function g(t,e,n,r,i,o,s,a){return p(t+((e|~n)^r)+o+s|0,a)+i|0}function y(t,e,n,r,i,o,s,a){return p(t+(e&r|n&~r)+o+s|0,a)+i|0}function b(t,e,n,r,i,o,s,a){return p(t+(e^(n|~r))+o+s|0,a)+i|0}i(d,o),d.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var n=0|this._a,r=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,x=0|this._a,w=0|this._b,E=0|this._c,_=0|this._d,S=0|this._e,T=0;T<80;T+=1){var A,M;T<16?(A=m(n,r,i,o,d,t[a[T]],l[0],c[T]),M=b(x,w,E,_,S,t[u[T]],f[0],h[T])):T<32?(A=v(n,r,i,o,d,t[a[T]],l[1],c[T]),M=y(x,w,E,_,S,t[u[T]],f[1],h[T])):T<48?(A=g(n,r,i,o,d,t[a[T]],l[2],c[T]),M=g(x,w,E,_,S,t[u[T]],f[2],h[T])):T<64?(A=y(n,r,i,o,d,t[a[T]],l[3],c[T]),M=v(x,w,E,_,S,t[u[T]],f[3],h[T])):(A=b(n,r,i,o,d,t[a[T]],l[4],c[T]),M=m(x,w,E,_,S,t[u[T]],f[4],h[T])),n=d,d=o,o=p(i,10),i=r,r=A,x=S,S=_,_=p(E,10),E=w,w=M}var C=this._b+i+_|0;this._b=this._c+o+S|0,this._c=this._d+d+x|0,this._d=this._e+n+w|0,this._e=this._a+r+E|0,this._a=C},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n(2111),e.sha1=n(2112),e.sha224=n(2113),e.sha256=n(744),e.sha384=n(2114),e.sha512=n(745)},function(t,e,n){"use strict";e.utils=n(2120),e.Cipher=n(2121),e.DES=n(2122),e.CBC=n(2123),e.EDE=n(2124)},function(t,e,n){var r=n(2125),i=n(2133),o=n(755);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,n){var r={ECB:n(2126),CBC:n(2127),CFB:n(2128),CFB8:n(2129),CFB1:n(2130),OFB:n(2131),CTR:n(753),GCM:n(753)},i=n(755);for(var o in i)i[o].module=r[i[o].mode];t.exports=i},function(t,e,n){var r;function i(t){this.rand=t}if(t.exports=function(t){return r||(r=new i(null)),r.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),n=0;n<e.length;n++)e[n]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(2138);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},function(t,e,n){(function(e){var r=n(32),i=n(167);function o(t,n){var i=function(t){var e=s(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(n),o=n.modulus.byteLength(),a=(r.mont(n.modulus),new r(t).mul(i.blinder).umod(n.modulus)),u=a.toRed(r.mont(n.prime1)),c=a.toRed(r.mont(n.prime2)),h=n.coefficient,l=n.prime1,f=n.prime2,d=u.redPow(n.exponent1),p=c.redPow(n.exponent2);d=d.fromRed(),p=p.fromRed();var m=d.isub(p).imul(h).umod(l);return m.imul(f),p.iadd(m),new e(p.imul(i.unblinder).umod(n.modulus).toArray(!1,o))}function s(t){for(var e=t.modulus.byteLength(),n=new r(i(e));n.cmp(t.modulus)>=0||!n.umod(t.prime1)||!n.umod(t.prime2);)n=new r(i(e));return n}t.exports=o,o.getr=s}).call(this,n(46).Buffer)},function(t,e,n){"use strict";var r=e;r.version=n(2143).version,r.utils=n(70),r.rand=n(397),r.curve=n(761),r.curves=n(400),r.ec=n(2154),r.eddsa=n(2158)},function(t,e,n){"use strict";var r,i=e,o=n(401),s=n(761),a=n(70).assert;function u(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(2153)}catch(t){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(t,e,n){var r=e;r.utils=n(85),r.common=n(200),r.sha=n(2147),r.ripemd=n(2151),r.hmac=n(2152),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(t,e,n){"use strict";(function(t){var r=n(270),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.a.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();e.a=a}).call(this,n(680)(t))},function(t,e,n){t.exports={Angle:n(792),Call:n(793),GetFirst:n(794),GetLast:n(795),GridAlign:n(796),IncAlpha:n(830),IncX:n(831),IncXY:n(832),IncY:n(833),PlaceOnCircle:n(834),PlaceOnEllipse:n(835),PlaceOnLine:n(836),PlaceOnRectangle:n(837),PlaceOnTriangle:n(838),PlayAnimation:n(839),PropertyValueInc:n(79),PropertyValueSet:n(59),RandomCircle:n(840),RandomEllipse:n(841),RandomLine:n(842),RandomRectangle:n(843),RandomTriangle:n(844),Rotate:n(845),RotateAround:n(846),RotateAroundDistance:n(847),ScaleX:n(848),ScaleXY:n(849),ScaleY:n(850),SetAlpha:n(851),SetBlendMode:n(852),SetDepth:n(853),SetHitArea:n(854),SetOrigin:n(855),SetRotation:n(856),SetScale:n(857),SetScaleX:n(858),SetScaleY:n(859),SetTint:n(860),SetVisible:n(861),SetX:n(862),SetXY:n(863),SetY:n(864),ShiftPosition:n(865),Shuffle:n(866),SmootherStep:n(867),SmoothStep:n(868),Spread:n(869),ToggleVisible:n(870),WrapInRectangle:n(871)}},function(t,e,n){var r=n(271),i=[];i[r.BOTTOM_CENTER]=n(405),i[r.BOTTOM_LEFT]=n(406),i[r.BOTTOM_RIGHT]=n(407),i[r.CENTER]=n(408),i[r.LEFT_CENTER]=n(410),i[r.RIGHT_CENTER]=n(411),i[r.TOP_CENTER]=n(412),i[r.TOP_LEFT]=n(413),i[r.TOP_RIGHT]=n(414);t.exports=function(t,e,n,r,o){return i[n](t,e,r,o)}},function(t,e,n){var r=n(87),i=n(142),o=n(88),s=n(143);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(87),i=n(89),o=n(88),s=n(90);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(87),i=n(91),o=n(88),s=n(92);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(409),i=n(142),o=n(145);t.exports=function(t,e,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),r(t,i(e)+n,o(e)+s),t}},function(t,e,n){var r=n(143),i=n(144);t.exports=function(t,e,n){return r(t,e),i(t,n)}},function(t,e,n){var r=n(145),i=n(89),o=n(144),s=n(90);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(145),i=n(91),o=n(144),s=n(92);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(142),i=n(93),o=n(143),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)+n),s(t,i(e)-a),t}},function(t,e,n){var r=n(89),i=n(93),o=n(90),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)-n),s(t,i(e)-a),t}},function(t,e,n){var r=n(91),i=n(93),o=n(92),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)+n),s(t,i(e)-a),t}},function(t,e,n){var r=n(272),i=n(172),o=n(41),s=n(12);t.exports=function(t,e,n){void 0===n&&(n=new s);var a=i(e,0,o.PI2);return r(t,a,n)}},function(t,e,n){var r=n(417),i=n(272),o=n(172),s=n(41);t.exports=function(t,e,n,a){void 0===a&&(a=[]),e||(e=r(t)/n);for(var u=0;u<e;u++){var c=o(u/e,0,s.PI2);a.push(i(t,c))}return a}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,n){var r=n(40),i={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,n,i){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=r(t,0,1),this._alphaTR=r(e,0,1),this._alphaBL=r(n,0,1),this._alphaBR=r(i,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=r(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=r(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=r(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=r(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=i},function(t,e,n){var r=n(274),i=n(0),o=n(207),s=new i({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.once(o.REMOVE_ANIMATION,this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this._reverse=!1,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){return t instanceof r&&(t=t.key),this.nextAnim=t,this.parent},setDelay:function(t){return void 0===t&&(t=0),this._delay=t,this.parent},getDelay:function(){return this._delay},delayedPlay:function(t,e,n){return this.play(e,!0,n),this.nextTick+=t,this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(t,e){return void 0===e&&(e=0),this.isPlaying&&this.stop(),this.animationManager.load(this,t,e),this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.updateFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.updateFrame(t),this.parent},isPaused:{get:function(){return this._paused}},play:function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=0),t instanceof r&&(t=t.key),e&&this.isPlaying&&this.currentAnim.key===t?this.parent:(this.forward=!0,this._reverse=!1,this._startAnimation(t,n))},playReverse:function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=0),t instanceof r&&(t=t.key),e&&this.isPlaying&&this.currentAnim.key===t?this.parent:(this.forward=!1,this._reverse=!0,this._startAnimation(t,n))},_startAnimation:function(t,e){this.load(t,e);var n=this.currentAnim,r=this.parent;this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat,n.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,n.showOnStart&&(r.visible=!0);var i=this.currentFrame;return n.emit(o.ANIMATION_START,n,i,r),r.emit(o.SPRITE_ANIMATION_KEY_START+t,n,i,r),r.emit(o.SPRITE_ANIMATION_START,n,i,r),r},reverse:function(){return this.isPlaying&&(this._reverse=!this._reverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame.progress;return this.forward||(t=1-t),t},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},remove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},getRepeat:function(){return this._repeat},setRepeat:function(t){return this._repeat=t,this.repeatCounter=0,this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(t){return this._repeatDelay=t,this.parent},restart:function(t){void 0===t&&(t=!1);var e=this.currentAnim;e.getFirstTick(this,t),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(e.frames[0]);var n=this.parent,r=this.currentFrame;return e.emit(o.ANIMATION_RESTART,e,r,n),n.emit(o.SPRITE_ANIMATION_KEY_RESTART+e.key,e,r,n),n.emit(o.SPRITE_ANIMATION_RESTART,e,r,n),this.parent},stop:function(){this._pendingStop=0,this.isPlaying=!1;var t=this.parent,e=this.currentAnim,n=this.currentFrame;if(e&&(e.emit(o.ANIMATION_COMPLETE,e,n,t),t.emit(o.SPRITE_ANIMATION_KEY_COMPLETE+e.key,e,n,t),t.emit(o.SPRITE_ANIMATION_COMPLETE,e,n,t)),this.nextAnim){var r=this.nextAnim;this.nextAnim=null,this.play(r)}return t},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopOnRepeat:function(){return this._pendingStop=2,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},setTimeScale:function(t){return void 0===t&&(t=1),this._timeScale=t,this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(t,e){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){if(this.accumulator+=e*this._timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.currentAnim.completeAnimation(this);this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),e.setSizeToFrame(),t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin(),e},updateFrame:function(t){var e=this.setCurrentFrame(t);if(this.isPlaying){t.setAlpha&&(e.alpha=t.alpha);var n=this.currentAnim;e.emit(o.SPRITE_ANIMATION_KEY_UPDATE+n.key,n,t,e),e.emit(o.SPRITE_ANIMATION_UPDATE,n,t,e),3===this._pendingStop&&this._pendingStopValue===t&&this.currentAnim.completeAnimation(this)}},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},setYoyo:function(t){return void 0===t&&(t=!1),this._yoyo=t,this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.remove,this),this.animationManager=null,this.parent=null,this.currentAnim=null,this.currentFrame=null}});t.exports=s},function(t,e){t.exports=function(t,e,n){if(!e.length)return NaN;if(1===e.length)return e[0];var r,i,o=1;if(n){if(t<e[0][n])return e[0];for(;e[o][n]<t;)o++}else for(;e[o]<t;)o++;return o>e.length&&(o=e.length),n?(r=e[o-1][n],(i=e[o][n])-t<=t-r?e[o]:e[o-1]):(r=e[o-1],(i=e[o])-t<=t-r?i:r)}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){this.textureKey=t,this.textureFrame=e,this.index=n,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0}});t.exports=r},function(t,e,n){var r=n(86),i={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=r[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=i},function(t,e){var n={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.scene.sys.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=n},function(t,e,n){var r=n(275),i=n(208);t.exports=function(t,e,n,o){void 0===o&&(o=[]),e||(e=i(t)/n);for(var s=0;s<e;s++){var a=s/e;o.push(r(t,a))}return o}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){return void 0===n&&(n=new r),n.x=t.x1+(t.x2-t.x1)*e,n.y=t.y1+(t.y2-t.y1)*e,n}},function(t,e){t.exports=function(t,e,n,r){var i=Math.cos(r),o=Math.sin(r),s=t.x-e,a=t.y-n;return t.x=s*i-a*o+e,t.y=s*o+a*i+n,t}},function(t,e,n){var r=n(428),i=n(429),o={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new r(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new i(this.scene,t)}};t.exports=o},function(t,e,n){var r=new(n(0))({initialize:function(t,e){var n=t.sys.game.renderer;if(this.renderer=n,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,n&&n.gl){var r=n.width,i=n.height,o=0==(r&r-1)&&0==(i&i-1),s=n.gl,a=o?s.REPEAT:s.CLAMP_TO_EDGE,u=s.LINEAR;this.mainTexture=n.createTexture2D(0,u,u,a,a,s.RGBA,null,r,i),this.maskTexture=n.createTexture2D(0,u,u,a,a,s.RGBA,null,r,i),this.mainFramebuffer=n.createFramebuffer(r,i,this.mainTexture,!0),this.maskFramebuffer=n.createFramebuffer(r,i,this.maskTexture,!0),n.onContextRestored(function(t){var e=t.width,n=t.height,r=0==(e&e-1)&&0==(n&n-1),i=t.gl,o=r?i.REPEAT:i.CLAMP_TO_EDGE,s=i.LINEAR;this.mainTexture=t.createTexture2D(0,s,s,o,o,i.RGBA,null,e,n),this.maskTexture=t.createTexture2D(0,s,s,o,o,i.RGBA,null,e,n),this.mainFramebuffer=t.createFramebuffer(e,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(e,n,this.maskTexture,!0)},this)}},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,n){t.pipelines.BitmapMaskPipeline.beginMask(this,e,n)},postRenderWebGL:function(t,e){t.pipelines.BitmapMaskPipeline.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var t=this.renderer;t&&t.gl&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer)),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=r},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,n){var r=t.gl;t.flush(),0===t.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,e,n){var r=t.gl,i=this.geometryMask,o=t.maskCount;r.colorMask(!1,!1,!1,!1),n?(r.stencilFunc(r.EQUAL,o,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,o+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),i.renderWebGL(t,i,0,e),t.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,o+1,255):r.stencilFunc(r.EQUAL,o+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,o,255):r.stencilFunc(r.EQUAL,o,255)},postRenderWebGL:function(t){var e=t.gl;if(t.maskStack.pop(),t.maskCount--,0===t.maskStack.length)t.flush(),t.currentMask.mask=null,e.disable(e.STENCIL_TEST);else{t.flush();var n=t.maskStack[t.maskStack.length-1];n.mask.applyStencil(t,n.camera,!1),t.currentCameraMask.mask!==n.mask?(t.currentMask.mask=n.mask,t.currentMask.camera=n.camera):t.currentMask.mask=null}},preRenderCanvas:function(t,e,n){var r=this.geometryMask;t.currentContext.save(),r.renderCanvas(t,r,0,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=r},function(t,e){var n={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}};t.exports=n},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,scaleMode:t.scaleMode,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,n){var r=n(41),i=n(71),o=n(279),s=n(280),a={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return s(this._rotation*r.RAD_TO_DEG)},set:function(t){this.rotation=s(t)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=o(t)}},setPosition:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=n,this.w=r,this},setRandomPosition:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=e+Math.random()*r,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new i),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new i),void 0===e&&(e=new i);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)e.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),e.multiply(t,t),n=n.parentContainer;return t},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=a},function(t,e){var n={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=n},function(t,e,n){t.exports={CHANGE_DATA:n(825),CHANGE_DATA_KEY:n(826),REMOVE_DATA:n(827),SET_DATA:n(828)}},function(t,e,n){var r=n(208),i=n(12);t.exports=function(t,e,n,o){if(void 0===o&&(o=[]),!e&&!n)return o;e?n=Math.round(r(t)/e):e=r(t)/n;for(var s=t.x,a=t.y,u=0,c=0;c<n;c++)switch(o.push(new i(s,a)),u){case 0:(s+=e)>=t.right&&(u=1,a+=s-t.right,s=t.right);break;case 1:(a+=e)>=t.bottom&&(u=2,s-=a-t.bottom,a=t.bottom);break;case 2:(s-=e)<=t.left&&(u=3,a-=t.left-s,s=t.left);break;case 3:(a-=e)<=t.top&&(u=0,a=t.top)}return o}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var n=null,r=0;r<e;r++)n=t.shift(),t.push(n);return n}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var n=null,r=0;r<e;r++)n=t.pop(),t.unshift(n);return n}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=[]);var r=Math.round(t.x1),i=Math.round(t.y1),o=Math.round(t.x2),s=Math.round(t.y2),a=Math.abs(o-r),u=Math.abs(s-i),c=r<o?1:-1,h=i<s?1:-1,l=a-u;n.push({x:r,y:i});for(var f=1;r!==o||i!==s;){var d=l<<1;d>-u&&(l-=u,r+=c),d<a&&(l+=a,i+=h),f%e==0&&n.push({x:r,y:i}),f++}return n}},function(t,e,n){var r=n(274),i=n(0),o=n(286),s=n(20),a=n(207),u=n(60),c=n(14),h=n(287),l=new i({Extends:s,initialize:function(t){s.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new o,this.paused=!1,this.name="AnimationManager",t.events.once(u.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(u.DESTROY,this.destroy,this)},add:function(t,e){if(!this.anims.has(t))return e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e),this;console.warn("Animation key exists: "+t)},exists:function(t){return this.anims.has(t)},create:function(t){var e=t.key,n=!1;return e&&((n=this.get(e))||(n=new r(this,e,t),this.anims.set(e,n),this.emit(a.ADD_ANIMATION,e,n))),n},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var n=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var r=0;r<t.anims.length;r++)n.push(this.create(t.anims[r]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&n.push(this.create(t));return n},generateFrameNames:function(t,e){var n=c(e,"prefix",""),r=c(e,"start",0),i=c(e,"end",0),o=c(e,"suffix",""),s=c(e,"zeroPad",0),a=c(e,"outputArray",[]),u=c(e,"frames",!1),l=this.textureManager.get(t);if(!l)return a;var f,d,p=r<i?1:-1;if(i+=p,e)if(Array.isArray(u))for(f=0;f<u.length;f++)d=n+h(u[f],s,"0",1)+o,l.has(d)&&a.push({key:t,frame:d});else for(f=r;f!==i;f+=p)d=n+h(f,s,"0",1)+o,l.has(d)&&a.push({key:t,frame:d});else for(u=l.getFrameNames(),f=0;f<u.length;f++)a.push({key:t,frame:u[f]});return a},generateFrameNumbers:function(t,e){var n,r=c(e,"start",0),i=c(e,"end",-1),o=c(e,"first",!1),s=c(e,"outputArray",[]),a=c(e,"frames",!1),u=this.textureManager.get(t);if(!u)return s;if(o&&u.has(o)&&s.push({key:t,frame:o}),Array.isArray(a))for(n=0;n<a.length;n++)u.has(a[n])&&s.push({key:t,frame:a[n]});else{-1===i&&(i=u.frameTotal);var h=r<i?1:-1;for(i+=h,n=r;n!==i;n+=h)u.has(n)&&s.push({key:t,frame:n})}return s},get:function(t){return this.anims.get(t)},load:function(t,e,n){var r=this.get(e);return r&&r.load(t,n),t},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){if(Array.isArray(e)||(e=[e]),this.get(t)){for(var n=0;n<e.length;n++)e[n].anims.play(t);return this}},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},staggerPlay:function(t,e,n){if(void 0===n&&(n=0),Array.isArray(e)||(e=[e]),this.get(t)){for(var r=0;r<e.length;r++)e[r].anims.delayedPlay(n*r,t);return this}},toJSON:function(t){if(void 0!==t&&""!==t)return this.anims.get(t).toJSON();var e={anims:[],globalTimeScale:this.globalTimeScale};return this.anims.each(function(t,n){e.anims.push(n.toJSON())}),e},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});t.exports=l},function(t,e,n){var r=n(0),i=n(286),o=n(20),s=n(441),a=new r({initialize:function(){this.entries=new i,this.events=new o},add:function(t,e){return this.entries.set(t,e),this.events.emit(s.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(s.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=a},function(t,e,n){t.exports={ADD:n(888),REMOVE:n(889)}},function(t,e,n){var r=n(440),i=n(0),o=n(60),s=new i({initialize:function(t){this.game=t,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(o.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new r),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});t.exports=s},function(t,e,n){var r=n(212),i=n(51),o=n(291),s=n(40),a=n(0),u=n(23),c=n(451),h=n(214),l=n(22),f=n(8),d=new a({Extends:r,Mixins:[u.Flip,u.Tint],initialize:function(t,e,n,i){r.call(this,t,e,n,i),this.inputEnabled=!0,this.fadeEffect=new c.Fade(this),this.flashEffect=new c.Flash(this),this.shakeEffect=new c.Shake(this),this.panEffect=new c.Pan(this),this.zoomEffect=new c.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null,this.renderToTexture=!1,this.canvas=null,this.context=null,this.glTexture=null,this.framebuffer=null,this.pipeline=null},setRenderToTexture:function(t){var e=this.scene.sys.game.renderer;return e.gl?(this.glTexture=e.createTextureFromSource(null,this.width,this.height,0),this.framebuffer=e.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=i.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d")),this.renderToTexture=!0,t&&this.setPipeline(t),this},setPipeline:function(t){if("string"==typeof t){var e=this.scene.sys.game.renderer;e.gl&&e.hasPipeline(t)&&(this.pipeline=e.getPipeline(t))}else this.pipeline=t;return this},clearRenderToTexture:function(){if(this.scene){var t=this.scene.sys.game.renderer;return t.gl?(this.framebuffer&&t.deleteFramebuffer(this.framebuffer),this.glTexture&&t.deleteTexture(this.glTexture),this.framebuffer=null,this.glTexture=null,this.pipeline=null):(i.remove(this),this.canvas=null,this.context=null),this.renderToTexture=!1,this}},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new l(0,0,t,e),this._follow){var n=this.width/2,r=this.height/2,i=this._follow.x-this.followOffset.x,s=this._follow.y-this.followOffset.y;this.midPoint.set(i,s),this.scrollX=i-n,this.scrollY=s-r}o(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,n,r,i,o){return this.fadeEffect.start(!1,t,e,n,r,!0,i,o)},fadeOut:function(t,e,n,r,i,o){return this.fadeEffect.start(!0,t,e,n,r,!0,i,o)},fadeFrom:function(t,e,n,r,i,o,s){return this.fadeEffect.start(!1,t,e,n,r,i,o,s)},fade:function(t,e,n,r,i,o,s){return this.fadeEffect.start(!0,t,e,n,r,i,o,s)},flash:function(t,e,n,r,i,o,s){return this.flashEffect.start(t,e,n,r,i,o,s)},shake:function(t,e,n,r,i){return this.shakeEffect.start(t,e,n,r,i)},pan:function(t,e,n,r,i,o,s){return this.panEffect.start(t,e,n,r,i,o,s)},zoomTo:function(t,e,n,r,i,o){return this.zoomEffect.start(t,e,n,r,i,o)},preRender:function(t){var e=this.width,n=this.height,r=.5*e,i=.5*n,s=this.zoom*t,a=this.matrix,u=e*this.originX,c=n*this.originY,l=this._follow,f=this.deadzone,d=this.scrollX,p=this.scrollY;if(f&&o(f,this.midPoint.x,this.midPoint.y),l&&!this.panEffect.isRunning){var m=l.x-this.followOffset.x,v=l.y-this.followOffset.y;f?(m<f.x?d=h(d,d-(f.x-m),this.lerp.x):m>f.right&&(d=h(d,d+(m-f.right),this.lerp.x)),v<f.y?p=h(p,p-(f.y-v),this.lerp.y):v>f.bottom&&(p=h(p,p+(v-f.bottom),this.lerp.y))):(d=h(d,m-u,this.lerp.x),p=h(p,v-c,this.lerp.y))}this.useBounds&&(d=this.clampX(d),p=this.clampY(p)),this.roundPixels&&(u=Math.round(u),c=Math.round(c)),this.scrollX=d,this.scrollY=p;var g=d+r,y=p+i;this.midPoint.set(g,y);var b=e/s,x=n/s;this.worldView.setTo(g-b/2,y-x/2,b,x),a.applyITRS(this.x+u,this.y+c,this.rotation,s,s),a.translate(-u,-c),this.shakeEffect.preRender()},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,n,r,i,o){void 0===e&&(e=!1),void 0===n&&(n=1),void 0===r&&(r=n),void 0===i&&(i=0),void 0===o&&(o=i),this._follow=t,this.roundPixels=e,n=s(n,0,1),r=s(r,0,1),this.lerp.set(n,r),this.followOffset.set(i,o);var a=this.width/2,u=this.height/2,c=t.x-i,h=t.y-o;return this.midPoint.set(c,h),this.scrollX=c-a,this.scrollY=h-u,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.clearRenderToTexture(),this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=d},function(t,e,n){var r=n(72);t.exports=function(t){var e=new r;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,r){return e+e+n+n+r+r});var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){var i=parseInt(n[1],16),o=parseInt(n[2],16),s=parseInt(n[3],16);e.setTo(i,o,s)}return e}},function(t,e){t.exports=function(t,e,n,r){return r<<24|t<<16|e<<8|n}},function(t,e){t.exports=function(t,e,n,r){void 0===r&&(r={h:0,s:0,v:0}),t/=255,e/=255,n/=255;var i=Math.min(t,e,n),o=Math.max(t,e,n),s=o-i,a=0,u=0===o?0:s/o,c=o;return o!==i&&(o===t?a=(e-n)/s+(e<n?6:0):o===e?a=(n-t)/s+2:o===n&&(a=(t-e)/s+4),a/=6),r.hasOwnProperty("_h")?(r._h=a,r._s=u,r._v=c):(r.h=a,r.s=u,r.v=c),r}},function(t,e,n){var r=n(72),i=n(448);t.exports=function(t){var e=i(t);return new r(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,n){var r=n(72);t.exports=function(t){return new r(t.r,t.g,t.b,t.a)}},function(t,e,n){var r=n(72);t.exports=function(t){var e=new r,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(n){var i=parseInt(n[1],10),o=parseInt(n[2],10),s=parseInt(n[3],10),a=void 0!==n[4]?parseFloat(n[4]):1;e.setTo(i,o,s,255*a)}return e}},function(t,e,n){t.exports={Fade:n(910),Flash:n(911),Pan:n(912),Shake:n(945),Zoom:n(946)}},function(t,e,n){t.exports={In:n(913),Out:n(914),InOut:n(915)}},function(t,e,n){t.exports={In:n(916),Out:n(917),InOut:n(918)}},function(t,e,n){t.exports={In:n(919),Out:n(920),InOut:n(921)}},function(t,e,n){t.exports={In:n(922),Out:n(923),InOut:n(924)}},function(t,e,n){t.exports={In:n(925),Out:n(926),InOut:n(927)}},function(t,e,n){t.exports={In:n(928),Out:n(929),InOut:n(930)}},function(t,e,n){t.exports=n(931)},function(t,e,n){t.exports={In:n(932),Out:n(933),InOut:n(934)}},function(t,e,n){t.exports={In:n(935),Out:n(936),InOut:n(937)}},function(t,e,n){t.exports={In:n(938),Out:n(939),InOut:n(940)}},function(t,e,n){t.exports={In:n(941),Out:n(942),InOut:n(943)}},function(t,e,n){t.exports=n(944)},function(t,e,n){var r=n(0),i=n(58),o=n(465),s=n(1),a=n(14),u=n(16),c=n(294),h=n(2),l=n(300),f=n(288),d=new r({initialize:function(t){void 0===t&&(t={});this.width=a(t,"width",1024),this.height=a(t,"height",768),this.zoom=a(t,"zoom",1),this.resolution=a(t,"resolution",1),this.parent=a(t,"parent",void 0),this.scaleMode=a(t,"scaleMode",0),this.expandParent=a(t,"expandParent",!0),this.autoRound=a(t,"autoRound",!1),this.autoCenter=a(t,"autoCenter",0),this.resizeInterval=a(t,"resizeInterval",500),this.fullscreenTarget=a(t,"fullscreenTarget",null),this.minWidth=a(t,"minWidth",0),this.maxWidth=a(t,"maxWidth",0),this.minHeight=a(t,"minHeight",0),this.maxHeight=a(t,"maxHeight",0);var e=a(t,"scale",null);e&&(this.width=a(e,"width",this.width),this.height=a(e,"height",this.height),this.zoom=a(e,"zoom",this.zoom),this.resolution=a(e,"resolution",this.resolution),this.parent=a(e,"parent",this.parent),this.scaleMode=a(e,"mode",this.scaleMode),this.expandParent=a(e,"expandParent",this.expandParent),this.autoRound=a(e,"autoRound",this.autoRound),this.autoCenter=a(e,"autoCenter",this.autoCenter),this.resizeInterval=a(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(e,"min.width",this.minWidth),this.maxWidth=a(e,"max.width",this.maxWidth),this.minHeight=a(e,"min.height",this.minHeight),this.maxHeight=a(e,"max.height",this.maxHeight)),this.renderType=a(t,"type",i.AUTO),this.canvas=a(t,"canvas",null),this.context=a(t,"context",null),this.canvasStyle=a(t,"canvasStyle",null),this.customEnvironment=a(t,"customEnvironment",!1),this.sceneConfig=a(t,"scene",null),this.seed=a(t,"seed",[(Date.now()*Math.random()).toString()]),c.RND=new c.RandomDataGenerator(this.seed),this.gameTitle=a(t,"title",""),this.gameURL=a(t,"url","https://phaser.io"),this.gameVersion=a(t,"version",""),this.autoFocus=a(t,"autoFocus",!0),this.domCreateContainer=a(t,"dom.createContainer",!1),this.domBehindCanvas=a(t,"dom.behindCanvas",!1),this.inputKeyboard=a(t,"input.keyboard",!0),this.inputKeyboardEventTarget=a(t,"input.keyboard.target",window),this.inputKeyboardCapture=a(t,"input.keyboard.capture",[]),this.inputMouse=a(t,"input.mouse",!0),this.inputMouseEventTarget=a(t,"input.mouse.target",null),this.inputMouseCapture=a(t,"input.mouse.capture",!0),this.inputTouch=a(t,"input.touch",o.input.touch),this.inputTouchEventTarget=a(t,"input.touch.target",null),this.inputTouchCapture=a(t,"input.touch.capture",!0),this.inputActivePointers=a(t,"input.activePointers",1),this.inputSmoothFactor=a(t,"input.smoothFactor",0),this.inputWindowEvents=a(t,"input.windowEvents",!0),this.inputGamepad=a(t,"input.gamepad",!1),this.inputGamepadEventTarget=a(t,"input.gamepad.target",window),this.disableContextMenu=a(t,"disableContextMenu",!1),this.audio=a(t,"audio"),this.hideBanner=!1===a(t,"banner",null),this.hidePhaser=a(t,"banner.hidePhaser",!1),this.bannerTextColor=a(t,"banner.text","#ffffff"),this.bannerBackgroundColor=a(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(t,"fps",null);var n=a(t,"render",t);this.antialias=a(n,"antialias",!0),this.desynchronized=a(n,"desynchronized",!1),this.roundPixels=a(n,"roundPixels",!1),this.pixelArt=a(n,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.roundPixels=!0),this.transparent=a(n,"transparent",!1),this.clearBeforeRender=a(n,"clearBeforeRender",!0),this.premultipliedAlpha=a(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(n,"powerPreference","default"),this.batchSize=a(n,"batchSize",2e3),this.maxLights=a(n,"maxLights",10);var r=a(t,"backgroundColor",0);this.backgroundColor=f(r),0===r&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=a(t,"callbacks.preBoot",h),this.postBoot=a(t,"callbacks.postBoot",h),this.physics=a(t,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(t,"loader.baseURL",""),this.loaderPath=a(t,"loader.path",""),this.loaderMaxParallelDownloads=a(t,"loader.maxParallelDownloads",32),this.loaderCrossOrigin=a(t,"loader.crossOrigin",void 0),this.loaderResponseType=a(t,"loader.responseType",""),this.loaderAsync=a(t,"loader.async",!0),this.loaderUser=a(t,"loader.user",""),this.loaderPassword=a(t,"loader.password",""),this.loaderTimeout=a(t,"loader.timeout",0),this.installGlobalPlugins=[],this.installScenePlugins=[];var d=a(t,"plugins",null),p=l.DefaultScene;d&&(Array.isArray(d)?this.defaultPlugins=d:u(d)&&(this.installGlobalPlugins=s(d,"global",[]),this.installScenePlugins=s(d,"scene",[]),Array.isArray(d.default)?p=d.default:Array.isArray(d.defaultMerge)&&(p=p.concat(d.defaultMerge)))),this.defaultPlugins=p;var m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(t,"images.default",m+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(t,"images.missing",m+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),window&&(window.FORCE_WEBGL?this.renderType=i.WEBGL:window.FORCE_CANVAS&&(this.renderType=i.CANVAS))}});t.exports=d},function(t,e,n){t.exports={os:n(215),browser:n(216),features:n(293),input:n(974),audio:n(975),video:n(976),fullscreen:n(977),canvasFeatures:n(466)}},function(t,e,n){var r,i,o,s=n(51),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=(void 0!==document&&(a.supportNewBlendModes=(r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(o=new Image).onload=function(){var t=new Image;t.onload=function(){var e=s.create(t,6,1).getContext("2d");if(e.globalCompositeOperation="multiply",e.drawImage(o,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var n=e.getImageData(2,0,1,1).data;s.remove(t),a.supportNewBlendModes=255===n[0]&&0===n[1]&&0===n[2]},t.src=r+"/wCKxvRF"+i},o.src=r+"AP804Oa6"+i,!1),a.supportInverseAlpha=function(){var t=s.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var n=t.getImageData(1,0,1,1);return n.data[0]===e.data[0]&&n.data[1]===e.data[1]&&n.data[2]===e.data[2]&&n.data[3]===e.data[3]}()),a)},function(t,e){t.exports=function(t,e,n,r){return Math.atan2(r-e,n-t)}},function(t,e){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),t>e-n}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),t<e+n}},function(t,e,n){var r=n(473);t.exports=function(t,e){return r(t)/r(e)/r(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}},function(t,e){t.exports=function(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}},function(t,e,n){var r=n(285);t.exports=function(t,e,n){return e+(n-e)*r(t,0,1)}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e,n,r){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.ceil(t/e),r?(n+t)/e:n+t)}},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t.x=Math.cos(n)*i,t.y=Math.sin(n)*i,t.z=r*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e){var n=t.x,r=t.y;return t.x=n*Math.cos(e)-r*Math.sin(e),t.y=n*Math.sin(e)+r*Math.cos(e),t}},function(t,e){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,e,n){var r=n(8);t.exports=function(t,e,n,i,o,s,a,u){void 0===u&&(u=new r);var c=Math.sin(o),h=Math.cos(o),l=h*s,f=c*s,d=-c*a,p=h*a,m=1/(l*p+d*-f);return u.x=p*m*t+-d*m*e+(i*d-n*p)*m,u.y=l*m*e+-f*m*t+(-i*l+n*f)*m,u}},function(t,e,n){var r=new(n(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,n=t.val;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},fromMat4:function(t){var e=t.val,n=this.val;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],n=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=n,t[7]=r,this},invert:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=c*o-s*u,l=-c*i+s*a,f=u*i-o*a,d=e*h+n*l+r*f;return d?(d=1/d,t[0]=h*d,t[1]=(-c*n+r*u)*d,t[2]=(s*n-r*o)*d,t[3]=l*d,t[4]=(c*e-r*a)*d,t[5]=(-s*e+r*i)*d,t[6]=f*d,t[7]=(-u*e+n*a)*d,t[8]=(o*e-n*i)*d,this):null},adjoint:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return t[0]=o*c-s*u,t[1]=r*u-n*c,t[2]=n*s-r*o,t[3]=s*a-i*c,t[4]=e*c-r*a,t[5]=r*i-e*s,t[6]=i*u-o*a,t[7]=n*a-e*u,t[8]=e*o-n*i,this},determinant:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*o-s*u)+n*(-c*i+s*a)+r*(u*i-o*a)},multiply:function(t){var e=this.val,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],h=e[8],l=t.val,f=l[0],d=l[1],p=l[2],m=l[3],v=l[4],g=l[5],y=l[6],b=l[7],x=l[8];return e[0]=f*n+d*o+p*u,e[1]=f*r+d*s+p*c,e[2]=f*i+d*a+p*h,e[3]=m*n+v*o+g*u,e[4]=m*r+v*s+g*c,e[5]=m*i+v*a+g*h,e[6]=y*n+b*o+x*u,e[7]=y*r+b*s+x*c,e[8]=y*i+b*a+x*h,this},translate:function(t){var e=this.val,n=t.x,r=t.y;return e[6]=n*e[0]+r*e[3]+e[6],e[7]=n*e[1]+r*e[4]+e[7],e[8]=n*e[2]+r*e[5]+e[8],this},rotate:function(t){var e=this.val,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=Math.sin(t),c=Math.cos(t);return e[0]=c*n+u*o,e[1]=c*r+u*s,e[2]=c*i+u*a,e[3]=c*o-u*n,e[4]=c*s-u*r,e[5]=c*a-u*i,this},scale:function(t){var e=this.val,n=t.x,r=t.y;return e[0]=n*e[0],e[1]=n*e[1],e[2]=n*e[2],e[3]=r*e[3],e[4]=r*e[4],e[5]=r*e[5],this},fromQuat:function(t){var e=t.x,n=t.y,r=t.z,i=t.w,o=e+e,s=n+n,a=r+r,u=e*o,c=e*s,h=e*a,l=n*s,f=n*a,d=r*a,p=i*o,m=i*s,v=i*a,g=this.val;return g[0]=1-(l+d),g[3]=c+v,g[6]=h-m,g[1]=c-v,g[4]=1-(u+d),g[7]=f+p,g[2]=h+m,g[5]=f-p,g[8]=1-(u+l),this},normalFromMat4:function(t){var e=t.val,n=this.val,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],g=e[14],y=e[15],b=r*u-i*a,x=r*c-o*a,w=r*h-s*a,E=i*c-o*u,_=i*h-s*u,S=o*h-s*c,T=l*v-f*m,A=l*g-d*m,M=l*y-p*m,C=f*g-d*v,O=f*y-p*v,N=d*y-p*g,k=b*N-x*O+w*C+E*M-_*A+S*T;return k?(k=1/k,n[0]=(u*N-c*O+h*C)*k,n[1]=(c*M-a*N-h*A)*k,n[2]=(a*O-u*M+h*T)*k,n[3]=(o*O-i*N-s*C)*k,n[4]=(r*N-o*M+s*A)*k,n[5]=(i*M-r*O-s*T)*k,n[6]=(v*S-g*_+y*E)*k,n[7]=(g*w-m*S-y*x)*k,n[8]=(m*_-v*w+y*b)*k,this):null}});t.exports=r},function(t,e,n){var r=n(0),i=n(147),o=n(485),s=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),u=new i(1,0,0),c=new i(0,1,0),h=new i,l=new o,f=new r({initialize:function(t,e,n,r){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},set:function(t,e,n,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},lengthSq:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},normalize:function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i,this.w=r*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y,i=this.z,o=this.w;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this.w=o+e*(t.w-o),this},rotationTo:function(t,e){var n=t.x*e.x+t.y*e.y+t.z*e.z;return n<-.999999?(h.copy(u).cross(t).length()<1e-6&&h.copy(c).cross(t),h.normalize(),this.setAxisAngle(h,Math.PI)):n>.999999?(this.x=0,this.y=0,this.z=0,this.w=1,this):(h.copy(t).cross(e),this.x=h.x,this.y=h.y,this.z=h.z,this.w=1+n,this.normalize())},setAxes:function(t,e,n){var r=l.val;return r[0]=e.x,r[3]=e.y,r[6]=e.z,r[1]=n.x,r[4]=n.y,r[7]=n.z,r[2]=-t.x,r[5]=-t.y,r[8]=-t.z,this.fromMat3(l).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(t,e){e*=.5;var n=Math.sin(e);return this.x=n*t.x,this.y=n*t.y,this.z=n*t.z,this.w=Math.cos(e),this},multiply:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.x,s=t.y,a=t.z,u=t.w;return this.x=e*u+i*o+n*a-r*s,this.y=n*u+i*s+r*o-e*a,this.z=r*u+i*a+e*s-n*o,this.w=i*u-e*o-n*s-r*a,this},slerp:function(t,e){var n=this.x,r=this.y,i=this.z,o=this.w,s=t.x,a=t.y,u=t.z,c=t.w,h=n*s+r*a+i*u+o*c;h<0&&(h=-h,s=-s,a=-a,u=-u,c=-c);var l=1-e,f=e;if(1-h>1e-6){var d=Math.acos(h),p=Math.sin(d);l=Math.sin((1-e)*d)/p,f=Math.sin(e*d)/p}return this.x=l*n+f*s,this.y=l*r+f*a,this.z=l*i+f*u,this.w=l*o+f*c,this},invert:function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r,o=i?1/i:0;return this.x=-t*o,this.y=-e*o,this.z=-n*o,this.w=r*o,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(t){t*=.5;var e=this.x,n=this.y,r=this.z,i=this.w,o=Math.sin(t),s=Math.cos(t);return this.x=e*s+i*o,this.y=n*s+r*o,this.z=r*s-n*o,this.w=i*s-e*o,this},rotateY:function(t){t*=.5;var e=this.x,n=this.y,r=this.z,i=this.w,o=Math.sin(t),s=Math.cos(t);return this.x=e*s-r*o,this.y=n*s+i*o,this.z=r*s+e*o,this.w=i*s-n*o,this},rotateZ:function(t){t*=.5;var e=this.x,n=this.y,r=this.z,i=this.w,o=Math.sin(t),s=Math.cos(t);return this.x=e*s+n*o,this.y=n*s-e*o,this.z=r*s+i*o,this.w=i*s-r*o,this},calculateW:function(){var t=this.x,e=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-e*e-n*n),this},fromMat3:function(t){var e,n=t.val,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),this.w=.5*e,e=.5/e,this.x=(n[7]-n[5])*e,this.y=(n[2]-n[6])*e,this.z=(n[3]-n[1])*e;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=s[i],u=s[o];e=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*u+u]+1),a[i]=.5*e,e=.5/e,a[o]=(n[3*o+i]+n[3*i+o])*e,a[u]=(n[3*u+i]+n[3*i+u])*e,this.x=a[0],this.y=a[1],this.z=a[2],this.w=(n[3*u+o]-n[3*o+u])*e}return this}});t.exports=f},function(t,e,n){var r=n(147),i=n(299),o=n(486),s=new i,a=new o,u=new r;t.exports=function(t,e,n){return a.setAxisAngle(e,n),s.fromRotationTranslation(a,u.set(0,0,0)),t.transformMat4(s)}},function(t,e,n){var r=n(489),i=n(51),o=n(58),s=n(293);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===o.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==o.HEADLESS)if(e.renderType===o.CANVAS||e.renderType!==o.CANVAS&&!s.webGL){if(!s.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=o.CANVAS}else e.renderType=o.WEBGL;e.antialias||i.disableSmoothing();var a,u,c=t.scale.baseSize,h=c.width,l=c.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=h,t.canvas.height=l):t.canvas=i.create(t,h,l,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||r.setCrisp(t.canvas),e.renderType!==o.HEADLESS&&(a=n(490),u=n(493),e.renderType===o.WEBGL?t.renderer=new u(t):(t.renderer=new a(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(e){t.style["image-rendering"]=e}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e,n){var r=n(491),i=n(97),o=n(0),s=n(58),a=n(492),u=n(176),c=n(171),h=n(213),l=n(71),f=new o({initialize:function(t){this.game=t,this.type=s.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:t.config.clearBeforeRender,backgroundColor:t.config.backgroundColor,resolution:t.config.resolution,antialias:t.config.antialias,roundPixels:t.config.roundPixels},this.scaleMode=t.config.antialias?c.LINEAR:c.NEAREST,this.gameCanvas=t.canvas;var e={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",e),this.currentContext=this.gameContext,this.blendModes=a(),this.currentScaleMode=0,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this._tempMatrix4=new l,this.init()},init:function(){this.game.scale.on(u.RESIZE,this.onResize,this);var t=this.game.scale.baseSize;this.resize(t.width,t.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.scaleMode===c.NEAREST&&h.disable(this.gameContext)},onContextLost:function(){},onContextRestored:function(){},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,n=this.width,r=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&t.clearRect(0,0,n,r),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,n,r)),t.save(),this.drawCount=0},render:function(t,e,n,r){var o=e.list,s=o.length,a=r._cx,u=r._cy,c=r._cw,h=r._ch,l=r.renderToTexture?r.context:t.sys.context;l.save(),this.game.scene.customViewports&&(l.beginPath(),l.rect(a,u,c,h),l.clip()),this.currentContext=l;var f=r.mask;f&&f.preRenderCanvas(this,null,r._maskCamera),r.transparent||(l.fillStyle=r.backgroundColor.rgba,l.fillRect(a,u,c,h)),l.globalAlpha=r.alpha,l.globalCompositeOperation="source-over",this.drawCount+=o.length,r.renderToTexture&&r.emit(i.PRE_RENDER,r),r.matrix.copyToContext(l);for(var d=0;d<s;d++){var p=o[d];p.willRender(r)&&(p.mask&&p.mask.preRenderCanvas(this,p,r),p.renderCanvas(this,p,n,r),p.mask&&p.mask.postRenderCanvas(this,p,r))}l.setTransform(1,0,0,1,0,0),l.globalCompositeOperation="source-over",l.globalAlpha=1,r.flashEffect.postRenderCanvas(l),r.fadeEffect.postRenderCanvas(l),r.dirty=!1,f&&f.postRenderCanvas(this),l.restore(),r.renderToTexture&&(r.emit(i.POST_RENDER,r),t.sys.context.drawImage(r.canvas,a,u))},postRender:function(){this.gameContext.restore();var t=this.snapshotState;t.callback&&(r(this.gameCanvas,t),t.callback=null)},snapshot:function(t,e,n){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,n)},snapshotArea:function(t,e,n,r,i,o,s){var a=this.snapshotState;return a.callback=i,a.type=o,a.encoder=s,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(n,this.gameCanvas.width),a.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(t,e,n){return this.snapshotArea(t,e,1,1,n),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,n,r){var i=n.alpha*t.alpha;if(0!==i){var o=this.currentContext,s=this._tempMatrix1,a=this._tempMatrix2,u=this._tempMatrix3,c=e.canvasData,h=c.x,l=c.y,f=e.cutWidth,d=e.cutHeight,p=e.source.resolution,m=-t.displayOriginX+e.x,v=-t.displayOriginY+e.y,g=t.flipX?-1:1,y=t.flipY?-1:1;if(t.isCropped){var b=t._crop;b.flipX===t.flipX&&b.flipY===t.flipY||e.updateCropUVs(b,t.flipX,t.flipY),f=b.cw,d=b.ch,h=b.cx,l=b.cy,m=-t.displayOriginX+b.x,v=-t.displayOriginY+b.y,-1===g&&(m>=0?m=-(m+f):m<0&&(m=Math.abs(m)-f)),-1===y&&(v>=0?v=-(v+d):v<0&&(v=Math.abs(v)-d))}a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),s.copyFrom(n.matrix),r?(s.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y,s.multiply(a,u)):(a.e-=n.scrollX*t.scrollFactorX,a.f-=n.scrollY*t.scrollFactorY,s.multiply(a,u)),o.save(),u.setToContext(o),o.scale(g,y),o.globalCompositeOperation=this.blendModes[t.blendMode],o.globalAlpha=i,o.drawImage(e.source.image,h,l,f,d,m,v,f/p,d/p),o.restore()}},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});t.exports=f},function(t,e,n){var r=n(51),i=n(72),o=n(1);t.exports=function(t,e){var n=o(e,"callback"),s=o(e,"type","image/png"),a=o(e,"encoder",.92),u=Math.abs(Math.round(o(e,"x",0))),c=Math.abs(Math.round(o(e,"y",0))),h=o(e,"width",t.width),l=o(e,"height",t.height);if(o(e,"getPixel",!1)){var f=t.getContext("2d").getImageData(u,c,1,1).data;n.call(null,new i(f[0],f[1],f[2],f[3]/255))}else if(0!==u||0!==c||h!==t.width||l!==t.height){var d=r.createWebGL(this,h,l);d.getContext("2d").drawImage(t,u,c,h,l,0,0,h,l);var p=new Image;p.onerror=function(){n.call(null),r.remove(d)},p.onload=function(){n.call(null,p),r.remove(d)},p.src=d.toDataURL(s,a)}else{var m=new Image;m.onerror=function(){n.call(null)},m.onload=function(){n.call(null,m)},m.src=t.toDataURL(s,a)}}},function(t,e,n){var r=n(86),i=n(466);t.exports=function(){var t=[],e=i.supportNewBlendModes,n="source-over";return t[r.NORMAL]=n,t[r.ADD]="lighter",t[r.MULTIPLY]=e?"multiply":n,t[r.SCREEN]=e?"screen":n,t[r.OVERLAY]=e?"overlay":n,t[r.DARKEN]=e?"darken":n,t[r.LIGHTEN]=e?"lighten":n,t[r.COLOR_DODGE]=e?"color-dodge":n,t[r.COLOR_BURN]=e?"color-burn":n,t[r.HARD_LIGHT]=e?"hard-light":n,t[r.SOFT_LIGHT]=e?"soft-light":n,t[r.DIFFERENCE]=e?"difference":n,t[r.EXCLUSION]=e?"exclusion":n,t[r.HUE]=e?"hue":n,t[r.SATURATION]=e?"saturation":n,t[r.COLOR]=e?"color":n,t[r.LUMINOSITY]=e?"luminosity":n,t[r.ERASE]="destination-out",t[r.SOURCE_IN]="source-in",t[r.SOURCE_OUT]="source-out",t[r.SOURCE_ATOP]="source-atop",t[r.DESTINATION_OVER]="destination-over",t[r.DESTINATION_IN]="destination-in",t[r.DESTINATION_OUT]="destination-out",t[r.DESTINATION_ATOP]="destination-atop",t[r.LIGHTER]="lighter",t[r.COPY]="copy",t[r.XOR]="xor",t}},function(t,e,n){var r=n(212),i=n(97),o=n(0),s=n(58),a=n(217),u=n(176),c=n(148),h=n(219),l=n(71),f=n(21),d=n(494),p=n(495),m=n(496),v=n(302),g=new o({initialize:function(t){var e=this,n=t.config,i={alpha:n.transparent,desynchronized:n.desynchronized,depth:!1,antialias:n.antialias,premultipliedAlpha:n.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:n.failIfMajorPerformanceCaveat,powerPreference:n.powerPreference};this.config={clearBeforeRender:n.clearBeforeRender,antialias:n.antialias,backgroundColor:n.backgroundColor,contextCreation:i,resolution:n.resolution,roundPixels:n.roundPixels,maxTextures:n.maxTextures,maxTextureSize:n.maxTextureSize,batchSize:n.batchSize,maxLights:n.maxLights},this.game=t,this.type=s.WEBGL,this.width=0,this.height=0,this.canvas=t.canvas,this.lostContextCallbacks=[],this.restoredContextCallbacks=[],this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.canvas.addEventListener("webglcontextlost",function(t){e.contextLost=!0,t.preventDefault();for(var n=0;n<e.lostContextCallbacks.length;++n){var r=e.lostContextCallbacks[n];r[0].call(r[1],e)}},!1),this.canvas.addEventListener("webglcontextrestored",function(){e.contextLost=!1,e.init(e.config);for(var t=0;t<e.restoredContextCallbacks.length;++t){var n=e.restoredContextCallbacks[t];n[0].call(n[1],e)}},!1),this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new r(0,0,0,0),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this._tempMatrix4=new l,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.init(this.config)},init:function(t){var e,n=this.game,r=this.canvas,i=t.backgroundColor;if(!(e=n.config.context?n.config.context:r.getContext("webgl",t.contextCreation)||r.getContext("experimental-webgl",t.contextCreation))||e.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=e,n.context=e;for(var o=0;o<=27;o++)this.blendModes.push({func:[e.ONE,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_ADD});this.blendModes[1].func=[e.ONE,e.DST_ALPHA],this.blendModes[2].func=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[e.ZERO,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=e.BYTE,this.glFormats[1]=e.SHORT,this.glFormats[2]=e.UNSIGNED_BYTE,this.glFormats[3]=e.UNSIGNED_SHORT,this.glFormats[4]=e.FLOAT,this.glFuncMap={mat2:{func:e.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:e.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:e.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:e.uniform1f,length:1},"1fv":{func:e.uniform1fv,length:1},"1i":{func:e.uniform1i,length:1},"1iv":{func:e.uniform1iv,length:1},"2f":{func:e.uniform2f,length:2},"2fv":{func:e.uniform2fv,length:1},"2i":{func:e.uniform2i,length:2},"2iv":{func:e.uniform2iv,length:1},"3f":{func:e.uniform3f,length:3},"3fv":{func:e.uniform3fv,length:1},"3i":{func:e.uniform3i,length:3},"3iv":{func:e.uniform3iv,length:1},"4f":{func:e.uniform4f,length:4},"4fv":{func:e.uniform4fv,length:1},"4i":{func:e.uniform4i,length:4},"4iv":{func:e.uniform4iv,length:1}};var a=e.getSupportedExtensions();t.maxTextures||(t.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE));var u="WEBGL_compressed_texture_",c="WEBKIT_"+u;this.compression.ETC1=e.getExtension(u+"etc1")||e.getExtension(c+"etc1"),this.compression.PVRTC=e.getExtension(u+"pvrtc")||e.getExtension(c+"pvrtc"),this.compression.S3TC=e.getExtension(u+"s3tc")||e.getExtension(c+"s3tc"),this.supportedExtensions=a,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL);for(var l=0;l<this.currentTextures.length;++l)this.currentTextures[l]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new v({game:n,renderer:this})),this.addPipeline("BitmapMaskPipeline",new p({game:n,renderer:this})),this.addPipeline("Light2D",new m({game:n,renderer:this,maxLights:t.maxLights})),this.setBlendMode(s.BlendModes.NORMAL),n.textures.once(h.READY,this.boot,this),this},boot:function(){for(var t in this.pipelines)this.pipelines[t].boot();var e=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=e,this.blankTexture=e;var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,null),n.enable(n.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(u.RESIZE,this.onResize,this);var r=this.game.scale.baseSize;this.resize(r.width,r.height,this.game.scale.resolution)},onResize:function(t,e,n,r){e.width===this.width&&e.height===this.height&&r===this.resolution||this.resize(e.width,e.height,r)},resize:function(t,e,n){var r=this.gl,i=this.pipelines;for(var o in this.width=t,this.height=e,this.resolution=n,r.viewport(0,0,t,e),i)i[o].resize(t,e,n);return this.drawingBufferHeight=r.drawingBufferHeight,r.scissor(0,r.drawingBufferHeight-e,t,e),this.defaultCamera.setSize(t,e),this},onContextRestored:function(t,e){return this.restoredContextCallbacks.push([t,e]),this},onContextLost:function(t,e){return this.lostContextCallbacks.push([t,e]),this},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(t){return t in this.pipelines},getPipeline:function(t){return this.hasPipeline(t)?this.pipelines[t]:null},removePipeline:function(t){return delete this.pipelines[t],this},addPipeline:function(t,e){return this.hasPipeline(t)?console.warn("Pipeline exists: "+t):this.pipelines[t]=e,e.name=t,this.pipelines[t].resize(this.width,this.height,this.config.resolution),e},pushScissor:function(t,e,n,r,i){void 0===i&&(i=this.drawingBufferHeight);var o=[t,e,n,r];return this.scissorStack.push(o),this.setScissor(t,e,n,r,i),this.currentScissor=o,o},setScissor:function(t,e,n,r,i){var o=this.gl,s=this.currentScissor,a=n>0&&r>0;if(s&&a){var u=s[0],c=s[1],h=s[2],l=s[3];a=u!==t||c!==e||h!==n||l!==r}a&&(this.flush(),o.scissor(t,i-e-r,n,r))},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},setPipeline:function(t,e){return this.currentPipeline===t&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=t,this.currentPipeline.bind()),this.currentPipeline.onBind(e),this.currentPipeline},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},rebindPipeline:function(t){var e=this.gl;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),this.hasActiveStencilMask()?e.clear(e.DEPTH_BUFFER_BIT):(e.disable(e.STENCIL_TEST),e.clear(e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)),e.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=t,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(t,e){void 0===e&&(e=!1);var n=this.gl,r=this.blendModes[t];return!!(e||t!==s.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),n.enable(n.BLEND),n.blendEquation(r.equation),r.func.length>2?n.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):n.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,n){return this.blendModes[t]&&(this.blendModes[t].func=e,n&&(this.blendModes[t].equation=n)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(t){void 0===t&&(t=!1),!t&&0===this.currentActiveTextureUnit&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(t,e,n){void 0===n&&(n=!0);var r=this.gl;return t!==this.currentTextures[e]&&(n&&this.flush(),this.currentActiveTextureUnit!==e&&(r.activeTexture(r.TEXTURE0+e),this.currentActiveTextureUnit=e),r.bindTexture(r.TEXTURE_2D,t),this.currentTextures[e]=t),this},setFramebuffer:function(t,e){void 0===e&&(e=!1);var n=this.gl,r=this.width,i=this.height;return t!==this.currentFramebuffer&&(t&&t.renderTexture?(r=t.renderTexture.width,i=t.renderTexture.height):this.flush(),n.bindFramebuffer(n.FRAMEBUFFER,t),n.viewport(0,0,r,i),e&&(t?(this.drawingBufferHeight=i,this.pushScissor(0,0,r,i)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t),this},setProgram:function(t){var e=this.gl;return t!==this.currentProgram&&(this.flush(),e.useProgram(t),this.currentProgram=t),this},setVertexBuffer:function(t){var e=this.gl;return t!==this.currentVertexBuffer&&(this.flush(),e.bindBuffer(e.ARRAY_BUFFER,t),this.currentVertexBuffer=t),this},setIndexBuffer:function(t){var e=this.gl;return t!==this.currentIndexBuffer&&(this.flush(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.currentIndexBuffer=t),this},createTextureFromSource:function(t,e,n,r){var i=this.gl,o=i.NEAREST,u=i.CLAMP_TO_EDGE;return e=t?t.width:e,n=t?t.height:n,a(e,n)&&(u=i.REPEAT),r===s.ScaleModes.LINEAR&&this.config.antialias&&(o=i.LINEAR),t||"number"!=typeof e||"number"!=typeof n?this.createTexture2D(0,o,o,u,u,i.RGBA,t):this.createTexture2D(0,o,o,u,u,i.RGBA,null,e,n)},createTexture2D:function(t,e,n,r,i,o,s,a,u,c){c=null==c||c;var h=this.gl,l=h.createTexture();return this.setTexture2D(l,0),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,e),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,r),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),null==s?h.texImage2D(h.TEXTURE_2D,t,o,a,u,0,o,h.UNSIGNED_BYTE,null):(h.texImage2D(h.TEXTURE_2D,t,o,o,h.UNSIGNED_BYTE,s),a=s.width,u=s.height),this.setTexture2D(null,0),l.isAlphaPremultiplied=c,l.isRenderTexture=!1,l.width=a,l.height=u,this.nativeTextures.push(l),l},createFramebuffer:function(t,e,n,r){var i,o=this.gl,s=o.createFramebuffer();if(this.setFramebuffer(s),r){var a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,t,e),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}if(n.isRenderTexture=!0,n.isAlphaPremultiplied=!1,o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0),(i=o.checkFramebufferStatus(o.FRAMEBUFFER))!==o.FRAMEBUFFER_COMPLETE){throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[i])}return s.renderTexture=n,this.setFramebuffer(null),s},createProgram:function(t,e){var n=this.gl,r=n.createProgram(),i=n.createShader(n.VERTEX_SHADER),o=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(i,t),n.shaderSource(o,e),n.compileShader(i),n.compileShader(o),!n.getShaderParameter(i,n.COMPILE_STATUS))throw new Error("Failed to compile Vertex Shader:\n"+n.getShaderInfoLog(i));if(!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Failed to compile Fragment Shader:\n"+n.getShaderInfoLog(o));if(n.attachShader(r,i),n.attachShader(r,o),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error("Failed to link program:\n"+n.getProgramInfoLog(r));return r},createVertexBuffer:function(t,e){var n=this.gl,r=n.createBuffer();return this.setVertexBuffer(r),n.bufferData(n.ARRAY_BUFFER,t,e),this.setVertexBuffer(null),r},createIndexBuffer:function(t,e){var n=this.gl,r=n.createBuffer();return this.setIndexBuffer(r),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,e),this.setIndexBuffer(null),r},deleteTexture:function(t){var e=this.nativeTextures.indexOf(t);return-1!==e&&c(this.nativeTextures,e),this.gl.deleteTexture(t),this.currentTextures[0]!==t||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(t){return this.gl.deleteFramebuffer(t),this},deleteProgram:function(t){return this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e=t._cx,n=t._cy,r=t._cw,o=t._ch,s=this.pipelines.TextureTintPipeline,a=t.backgroundColor;if(t.renderToTexture){this.flush(),this.pushScissor(e,n,r,-o),this.setFramebuffer(t.framebuffer);var u=this.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),s.projOrtho(e,r+e,n,o+n,-1e3,1e3),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),a.alphaGL>0&&s.drawFillRect(e,n,r+e,o+n,f.getTintFromFloats(a.redGL,a.greenGL,a.blueGL,1),a.alphaGL),t.emit(i.PRE_RENDER,t)}else this.pushScissor(e,n,r,o),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),a.alphaGL>0&&s.drawFillRect(e,n,r,o,f.getTintFromFloats(a.redGL,a.greenGL,a.blueGL,1),a.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,n=this.currentCameraMask;return e.length>0?t=e[e.length-1]:n.mask&&n.mask.isStencil&&(t=n),t},postRenderCamera:function(t){var e=this.pipelines.TextureTintPipeline;if(t.flashEffect.postRenderWebGL(e,f.getTintFromFloats),t.fadeEffect.postRenderWebGL(e,f.getTintFromFloats),t.dirty=!1,this.popScissor(),t.renderToTexture){e.flush(),this.setFramebuffer(null),t.emit(i.POST_RENDER,t),e.projOrtho(0,e.width,e.height,0,-1e3,1e3);var n=f.getTintAppendFloatAlpha;(t.pipeline?t.pipeline:e).batchTexture(t,t.glTexture,t.width,t.height,t.x,t.y,t.width,t.height,t.zoom,t.zoom,t.rotation,t.flipX,!t.flipY,1,1,0,0,0,0,t.width,t.height,n(t._tintTL,t._alphaTL),n(t._tintTR,t._alphaTR),n(t._tintBL,t._alphaBL),n(t._tintBR,t._alphaBR),t._isTinted&&t.tintFill,0,0,this.defaultCamera,null),this.setBlankTexture(!0)}t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera))},preRender:function(){if(!this.contextLost){var t=this.gl,e=this.pipelines;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var n=this.config.backgroundColor;t.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}for(var r in t.enable(t.SCISSOR_TEST),e)e[r].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(t,e,n,r){if(!this.contextLost){var i=e.list,o=i.length,a=this.pipelines;for(var u in a)a[u].onRender(t,r);this.preRenderCamera(r);for(var c=this.currentMask,h=0;h<o;h++){var l=i[h];if(l.willRender(r)){l.blendMode!==this.currentBlendMode&&this.setBlendMode(l.blendMode);var f=l.mask;(c=this.currentMask).mask&&c.mask!==f&&c.mask.postRenderWebGL(this,c.camera),f&&c.mask!==f&&f.preRenderWebGL(this,l,r),l.renderWebGL(this,l,n,r)}}(c=this.currentMask).mask&&c.mask.postRenderWebGL(this,c.camera),this.setBlendMode(s.BlendModes.NORMAL),this.postRenderCamera(r)}},postRender:function(){if(!this.contextLost){this.flush();var t=this.snapshotState;t.callback&&(d(this.canvas,t),t.callback=null);var e=this.pipelines;for(var n in e)e[n].onPostRender()}},snapshot:function(t,e,n){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,n)},snapshotArea:function(t,e,n,r,i,o,s){var a=this.snapshotState;return a.callback=i,a.type=o,a.encoder=s,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(n,this.gl.drawingBufferWidth),a.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,n){return this.snapshotArea(t,e,1,1,n),this.snapshotState.getPixel=!0,this},canvasToTexture:function(t,e,n){void 0===n&&(n=!1);var r=this.gl;if(e)this.setTexture2D(e,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=t.width,e.height=t.height,this.setTexture2D(null,0);else{var i=r.CLAMP_TO_EDGE;!n&&a(t.width,t.height)&&(i=r.REPEAT);var o=this.config.antialias?r.LINEAR:r.NEAREST;e=this.createTexture2D(0,o,o,i,i,r.RGBA,t,t.width,t.height,!0)}return e},setTextureFilter:function(t,e){var n=this.gl,r=[n.LINEAR,n.NEAREST][e];return this.setTexture2D(t,0),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r),this.setTexture2D(null,0),this},setFloat1:function(t,e,n){return this.setProgram(t),this.gl.uniform1f(this.gl.getUniformLocation(t,e),n),this},setFloat2:function(t,e,n,r){return this.setProgram(t),this.gl.uniform2f(this.gl.getUniformLocation(t,e),n,r),this},setFloat3:function(t,e,n,r,i){return this.setProgram(t),this.gl.uniform3f(this.gl.getUniformLocation(t,e),n,r,i),this},setFloat4:function(t,e,n,r,i,o){return this.setProgram(t),this.gl.uniform4f(this.gl.getUniformLocation(t,e),n,r,i,o),this},setFloat1v:function(t,e,n){return this.setProgram(t),this.gl.uniform1fv(this.gl.getUniformLocation(t,e),n),this},setFloat2v:function(t,e,n){return this.setProgram(t),this.gl.uniform2fv(this.gl.getUniformLocation(t,e),n),this},setFloat3v:function(t,e,n){return this.setProgram(t),this.gl.uniform3fv(this.gl.getUniformLocation(t,e),n),this},setFloat4v:function(t,e,n){return this.setProgram(t),this.gl.uniform4fv(this.gl.getUniformLocation(t,e),n),this},setInt1:function(t,e,n){return this.setProgram(t),this.gl.uniform1i(this.gl.getUniformLocation(t,e),n),this},setInt2:function(t,e,n,r){return this.setProgram(t),this.gl.uniform2i(this.gl.getUniformLocation(t,e),n,r),this},setInt3:function(t,e,n,r,i){return this.setProgram(t),this.gl.uniform3i(this.gl.getUniformLocation(t,e),n,r,i),this},setInt4:function(t,e,n,r,i,o){return this.setProgram(t),this.gl.uniform4i(this.gl.getUniformLocation(t,e),n,r,i,o),this},setMatrix2:function(t,e,n,r){return this.setProgram(t),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(t,e),n,r),this},setMatrix3:function(t,e,n,r){return this.setProgram(t),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(t,e),n,r),this},setMatrix4:function(t,e,n,r){return this.setProgram(t),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(t,e),n,r),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var t in this.pipelines)this.pipelines[t].destroy(),delete this.pipelines[t];for(var e=0;e<this.nativeTextures.length;e++)this.deleteTexture(this.nativeTextures[e]),delete this.nativeTextures[e];delete this.gl,delete this.game,this.maskStack.length=0,this.contextLost=!0,this.extensions={},this.nativeTextures.length=0}});t.exports=g},function(t,e,n){var r=n(51),i=n(72),o=n(1);t.exports=function(t,e){var n=t.getContext("experimental-webgl"),s=o(e,"callback"),a=o(e,"type","image/png"),u=o(e,"encoder",.92),c=o(e,"x",0),h=o(e,"y",0),l=o(e,"width",n.drawingBufferWidth),f=o(e,"height",n.drawingBufferHeight);if(o(e,"getPixel",!1)){var d=new Uint8Array(4);n.readPixels(c,n.drawingBufferHeight-h,1,1,n.RGBA,n.UNSIGNED_BYTE,d),s.call(null,new i(d[0],d[1],d[2],d[3]/255))}else{var p=new Uint8Array(l*f*4);n.readPixels(c,n.drawingBufferHeight-h-f,l,f,n.RGBA,n.UNSIGNED_BYTE,p);for(var m=r.createWebGL(this,l,f),v=m.getContext("2d"),g=v.getImageData(0,0,l,f),y=g.data,b=0;b<f;b++)for(var x=0;x<l;x++){var w=4*((f-b)*l+x),E=4*(b*l+x);y[E+0]=p[w+0],y[E+1]=p[w+1],y[E+2]=p[w+2],y[E+3]=p[w+3]}v.putImageData(g,0,0);var _=new Image;_.onerror=function(){s.call(null),r.remove(m)},_.onload=function(){s.call(null,_),r.remove(m)},_.src=m.toDataURL(a,u)}}},function(t,e,n){var r=n(0),i=n(1021),o=n(1022),s=n(301),a=new r({Extends:s,initialize:function(t){s.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:t.topology?t.topology:t.renderer.gl.TRIANGLES,vertShader:t.vertShader?t.vertShader:o,fragShader:t.fragShader?t.fragShader:i,vertexCapacity:t.vertexCapacity?t.vertexCapacity:3,vertexSize:t.vertexSize?t.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){s.prototype.onBind.call(this);var t=this.renderer,e=this.program;return this.resolutionDirty&&(t.setFloat2(e,"uResolution",this.width,this.height),t.setInt1(e,"uMainSampler",0),t.setInt1(e,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(t,e,n){return s.prototype.resize.call(this,t,e,n),this.resolutionDirty=!0,this},beginMask:function(t,e,n){var r=this.renderer,i=this.gl;t.bitmapMask&&i&&(r.flush(),t.prevFramebuffer=r.currentFramebuffer,r.setFramebuffer(t.mainFramebuffer),i.disable(i.STENCIL_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),r.currentCameraMask.mask!==t&&(r.currentMask.mask=t,r.currentMask.camera=n))},endMask:function(t,e){var n=this.gl,r=this.renderer,i=t.bitmapMask;if(i&&n){r.flush(),r.setFramebuffer(t.maskFramebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),i.renderWebGL(r,i,0,e),r.flush(),r.setFramebuffer(t.prevFramebuffer);var o=r.getCurrentStencilMask();o?(n.enable(n.STENCIL_TEST),o.mask.applyStencil(r,o.camera,!0)):r.currentMask.mask=null,r.setPipeline(this),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.maskTexture),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.mainTexture),n.uniform1i(n.getUniformLocation(this.program,"uInvertMaskAlpha"),t.invertAlpha),n.drawArrays(this.topology,0,3)}}});t.exports=a},function(t,e,n){var r=n(0),i=n(1023),o=n(302),s=10,a=new r({Extends:o,initialize:function(t){s=t.maxLights,t.fragShader=i.replace("%LIGHT_COUNT%",s.toString()),o.call(this,t),this.defaultNormalMap,this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(t){o.prototype.onBind.call(this);var e=this.renderer,n=this.program;return this.mvpUpdate(),e.setInt1(n,"uNormSampler",1),e.setFloat2(n,"uResolution",this.width,this.height),t&&this.setNormalMap(t),this},onRender:function(t,e){this.active=!1;var n=t.sys.lights;if(!n||n.lights.length<=0||!n.active)return this;var r=n.cull(e),i=Math.min(r.length,s);if(0===i)return this;this.active=!0;var o,a=this.renderer,u=this.program,c=e.matrix,h={x:0,y:0},l=a.height;for(o=0;o<s;++o)a.setFloat1(u,"uLights["+o+"].radius",0);for(a.setFloat4(u,"uCamera",e.x,e.y,e.rotation,e.zoom),a.setFloat3(u,"uAmbientLightColor",n.ambientColor.r,n.ambientColor.g,n.ambientColor.b),o=0;o<i;++o){var f=r[o],d="uLights["+o+"].";c.transformPoint(f.x,f.y,h),a.setFloat2(u,d+"position",h.x-e.scrollX*f.scrollFactorX*e.zoom,l-(h.y-e.scrollY*f.scrollFactorY*e.zoom)),a.setFloat3(u,d+"color",f.r,f.g,f.b),a.setFloat1(u,d+"intensity",f.intensity),a.setFloat1(u,d+"radius",f.radius)}return this},batchTexture:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,m,v,g,y,b,x,w,E,_,S,T,A,M,C,O){var N;if(this.active)if(this.renderer.setPipeline(this),t.displayTexture?N=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?N=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(N=t.tileset.image.dataSource[0]),N){this.setTexture2D(N.glTexture,1),this.setNormalMapRotation(h);var k=this._tempMatrix1,R=this._tempMatrix2,P=this._tempMatrix3,I=g/n+A,D=y/r+M,L=(g+b)/n+A,B=(y+x)/r+M,F=s,z=a,j=-m,U=-v;if(t.isCropped){var Y=t._crop;F=Y.width,z=Y.height,s=Y.width,a=Y.height;var W=g=Y.x,X=y=Y.y;l&&(W=b-Y.x-Y.width),f&&!e.isRenderTexture&&(X=x-Y.y-Y.height),I=W/n+A,D=X/r+M,L=(W+Y.width)/n+A,B=(X+Y.height)/r+M,j=-m+g,U=-v+y}l&&(F*=-1,j+=s),(f^=e.isRenderTexture?1:0)&&(z*=-1,U+=a);var G=j+F,V=U+z;R.applyITRS(i,o,h,u,c),k.copyFrom(C.matrix),O?(k.multiplyWithOffset(O,-C.scrollX*d,-C.scrollY*p),R.e=i,R.f=o,k.multiply(R,P)):(R.e-=C.scrollX*d,R.f-=C.scrollY*p,k.multiply(R,P));var q=P.getX(j,U),H=P.getY(j,U),K=P.getX(j,V),$=P.getY(j,V),J=P.getX(G,V),Z=P.getY(G,V),Q=P.getX(G,U),tt=P.getY(G,U);C.roundPixels&&(q=Math.round(q),H=Math.round(H),K=Math.round(K),$=Math.round($),J=Math.round(J),Z=Math.round(Z),Q=Math.round(Q),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(q,H,K,$,J,Z,Q,tt,I,D,L,B,w,E,_,S,T,e,0)}else console.warn("Normal map missing or invalid")},setNormalMap:function(t){var e;this.active&&t&&(t.texture&&(e=t.texture.dataSource[t.frame.sourceIndex]),e||(e=this.defaultNormalMap),this.setTexture2D(e.glTexture,1),this.renderer.setPipeline(t.defaultPipeline))},setNormalMapRotation:function(t){var e=this.inverseRotationMatrix;if(t){var n=-t,r=Math.cos(n),i=Math.sin(n);e[1]=i,e[3]=-i,e[0]=e[4]=r}else e[0]=e[4]=1,e[1]=e[3]=0;this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,e)},batchSprite:function(t,e,n){if(this.active){var r=t.texture.dataSource[t.frame.sourceIndex];r&&(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),this.setNormalMapRotation(t.rotation),o.prototype.batchSprite.call(this,t,e,n))}}});a.LIGHT_COUNT=s,t.exports=a},function(t,e){var n={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var t=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(t,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(t,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(t,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var t=this.modelMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(t,e,n){var r=this.modelMatrix;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this.modelMatrixDirty=!0,this},modelTranslate:function(t,e,n){var r=this.modelMatrix;return r[12]=r[0]*t+r[4]*e+r[8]*n+r[12],r[13]=r[1]*t+r[5]*e+r[9]*n+r[13],r[14]=r[2]*t+r[6]*e+r[10]*n+r[14],r[15]=r[3]*t+r[7]*e+r[11]*n+r[15],this.modelMatrixDirty=!0,this},modelRotateX:function(t){var e=this.modelMatrix,n=Math.sin(t),r=Math.cos(t),i=e[4],o=e[5],s=e[6],a=e[7],u=e[8],c=e[9],h=e[10],l=e[11];return e[4]=i*r+u*n,e[5]=o*r+c*n,e[6]=s*r+h*n,e[7]=a*r+l*n,e[8]=u*r-i*n,e[9]=c*r-o*n,e[10]=h*r-s*n,e[11]=l*r-a*n,this.modelMatrixDirty=!0,this},modelRotateY:function(t){var e=this.modelMatrix,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[8],c=e[9],h=e[10],l=e[11];return e[0]=i*r-u*n,e[1]=o*r-c*n,e[2]=s*r-h*n,e[3]=a*r-l*n,e[8]=i*n+u*r,e[9]=o*n+c*r,e[10]=s*n+h*r,e[11]=a*n+l*r,this.modelMatrixDirty=!0,this},modelRotateZ:function(t){var e=this.modelMatrix,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[4],c=e[5],h=e[6],l=e[7];return e[0]=i*r+u*n,e[1]=o*r+c*n,e[2]=s*r+h*n,e[3]=a*r+l*n,e[4]=u*r-i*n,e[5]=c*r-o*n,e[6]=h*r-s*n,e[7]=l*r-a*n,this.modelMatrixDirty=!0,this},viewIdentity:function(){var t=this.viewMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(t,e,n){var r=this.viewMatrix;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this.viewMatrixDirty=!0,this},viewTranslate:function(t,e,n){var r=this.viewMatrix;return r[12]=r[0]*t+r[4]*e+r[8]*n+r[12],r[13]=r[1]*t+r[5]*e+r[9]*n+r[13],r[14]=r[2]*t+r[6]*e+r[10]*n+r[14],r[15]=r[3]*t+r[7]*e+r[11]*n+r[15],this.viewMatrixDirty=!0,this},viewRotateX:function(t){var e=this.viewMatrix,n=Math.sin(t),r=Math.cos(t),i=e[4],o=e[5],s=e[6],a=e[7],u=e[8],c=e[9],h=e[10],l=e[11];return e[4]=i*r+u*n,e[5]=o*r+c*n,e[6]=s*r+h*n,e[7]=a*r+l*n,e[8]=u*r-i*n,e[9]=c*r-o*n,e[10]=h*r-s*n,e[11]=l*r-a*n,this.viewMatrixDirty=!0,this},viewRotateY:function(t){var e=this.viewMatrix,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[8],c=e[9],h=e[10],l=e[11];return e[0]=i*r-u*n,e[1]=o*r-c*n,e[2]=s*r-h*n,e[3]=a*r-l*n,e[8]=i*n+u*r,e[9]=o*n+c*r,e[10]=s*n+h*r,e[11]=a*n+l*r,this.viewMatrixDirty=!0,this},viewRotateZ:function(t){var e=this.viewMatrix,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[4],c=e[5],h=e[6],l=e[7];return e[0]=i*r+u*n,e[1]=o*r+c*n,e[2]=s*r+h*n,e[3]=a*r+l*n,e[4]=u*r-i*n,e[5]=c*r-o*n,e[6]=h*r-s*n,e[7]=l*r-a*n,this.viewMatrixDirty=!0,this},viewLoad2D:function(t){var e=this.viewMatrix;return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=0,e[4]=t[2],e[5]=t[3],e[6]=0,e[7]=0,e[8]=t[4],e[9]=t[5],e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(t){var e=this.viewMatrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var t=this.projectionMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(t,e,n,r,i,o){var s=this.projectionMatrix,a=1/(t-e),u=1/(n-r),c=1/(i-o);return s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*u,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+e)*a,s[13]=(r+n)*u,s[14]=(o+i)*c,s[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(t,e,n,r){var i=this.projectionMatrix,o=1/Math.tan(t/2),s=1/(n-r);return i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(r+n)*s,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*r*n*s,i[15]=0,this.projectionMatrixDirty=!0,this}};t.exports=n},function(t,e,n){var r=n(58);t.exports=function(t){var e=t.config;if(!e.hideBanner){var n="WebGL";e.renderType===r.CANVAS?n="Canvas":e.renderType===r.HEADLESS&&(n="Headless");var i,o=e.audio,s=t.device.audio;if(i=!s.webAudio||o&&o.disableWebAudio?o&&o.noAudio||!s.webAudio&&!s.audioData?"No Audio":"HTML5 Audio":"Web Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var a,u="",c=[u];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach(function(t){u=u.concat("%c "),c.push("background: "+t),a=t}),c[c.length-1]="color: "+e.bannerTextColor+"; background: "+a):(u=u.concat("%c "),c.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),c.push("background: #fff"),e.gameTitle&&(u=u.concat(e.gameTitle),e.gameVersion&&(u=u.concat(" v"+e.gameVersion)),e.hidePhaser||(u=u.concat(" / "))),e.hidePhaser||(u=u.concat("Phaser v"+r.VERSION+"-FB ("+n+" | "+i+")")),u=u.concat(" %c "+e.gameURL),c[0]=u,console.log.apply(console,c)}}}},function(t,e,n){var r=n(0),i=n(14),o=n(2),s=n(500),a=new r({initialize:function(t,e){this.game=t,this.raf=new s,this.started=!1,this.running=!1,this.minFps=i(e,"min",5),this.targetFps=i(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=o,this.forceSetTimeOut=i(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=i(e,"deltaHistory",10),this.panicMax=i(e,"panicMax",120),this.rawDelta=0,this.now=0},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut)},step:function(){var t=window.performance.now();this.now=t;var e=t-this.lastTime;e<0&&(e=0),this.rawDelta=e;var n=this.deltaIndex,r=this.deltaHistory,i=this.deltaSmoothingMax,o=e;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,o=Math.min(o,this._target)),o>this._min&&(o=r[n],o=Math.min(o,this._min)),r[n]=o,this.deltaIndex++,this.deltaIndex>i&&(this.deltaIndex=0);for(var s=0,a=0;a<i;a++)s+=r[a];s/=i,this.delta=s,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var u=s/this._target;this.callback(t,s,u),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running?this.sleep():t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step()},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=o,this.raf=null,this.game=null}});t.exports=a},function(t,e,n){var r=n(0),i=n(2),o=new r({initialize:function(){this.isRunning=!1,this.callback=i,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0;var t=this;this.step=function e(){var n=window.performance.now();t.lastTime=t.tick,t.tick=n,t.callback(n),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var n=Date.now(),r=Math.max(16+t.lastTime-n,0);t.lastTime=t.tick,t.tick=n,t.callback(n),t.timeOutID=window.setTimeout(e,r)}},start:function(t,e){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=i}});t.exports=o},function(t,e,n){var r=n(60);t.exports=function(t){var e,n=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach(function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")});e&&document.addEventListener(e,function(t){document.hidden||"pause"===t.type?n.emit(r.HIDDEN):n.emit(r.VISIBLE)},!1),window.onblur=function(){n.emit(r.BLUR)},window.onfocus=function(){n.emit(r.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,n){var r=n(503),i=n(51),o=n(14);t.exports=function(t){var e=o(t,"data",[]),n=o(t,"canvas",null),s=o(t,"palette",r),a=o(t,"pixelWidth",1),u=o(t,"pixelHeight",a),c=o(t,"resizeCanvas",!0),h=o(t,"clearCanvas",!0),l=o(t,"preRender",null),f=o(t,"postRender",null),d=Math.floor(Math.abs(e[0].length*a)),p=Math.floor(Math.abs(e.length*u));n||(n=i.create2D(this,d,p),c=!1,h=!1),c&&(n.width=d,n.height=p);var m=n.getContext("2d");h&&m.clearRect(0,0,d,p),l&&l(n,m);for(var v=0;v<e.length;v++)for(var g=e[v],y=0;y<g.length;y++){var b=g[y];"."!==b&&" "!==b&&(m.fillStyle=s[b],m.fillRect(y*a,v*u,a,u))}return f&&f(n,m),n}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,n){var r=n(0),i=n(474),o=n(149),s=n(8),a=new r({Extends:o,initialize:function(t,e,n,r){o.call(this,"CubicBezierCurve"),Array.isArray(t)&&(r=new s(t[6],t[7]),n=new s(t[4],t[5]),e=new s(t[2],t[3]),t=new s(t[0],t[1])),this.p0=t,this.p1=e,this.p2=n,this.p3=r},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new s);var n=this.p0,r=this.p1,o=this.p2,a=this.p3;return e.set(i(t,n.x,r.x,o.x,a.x),i(t,n.y,r.y,o.y,a.y))},draw:function(t,e){void 0===e&&(e=32);var n=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var e=t.points,n=new s(e[0],e[1]),r=new s(e[2],e[3]),i=new s(e[4],e[5]),o=new s(e[6],e[7]);return new a(n,r,i,o)},t.exports=a},function(t,e,n){var r=n(0),i=n(149),o=n(80),s=n(14),a=n(298),u=n(8),c=new r({Extends:i,initialize:function(t,e,n,r,a,c,h,l){if("object"==typeof t){var f=t;t=s(f,"x",0),e=s(f,"y",0),n=s(f,"xRadius",0),r=s(f,"yRadius",n),a=s(f,"startAngle",0),c=s(f,"endAngle",360),h=s(f,"clockwise",!1),l=s(f,"rotation",0)}else void 0===r&&(r=n),void 0===a&&(a=0),void 0===c&&(c=360),void 0===h&&(h=!1),void 0===l&&(l=0);i.call(this,"EllipseCurve"),this.p0=new u(t,e),this._xRadius=n,this._yRadius=r,this._startAngle=o(a),this._endAngle=o(c),this._clockwise=h,this._rotation=o(l)},getStartPoint:function(t){return void 0===t&&(t=new u),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new u);for(var n=2*Math.PI,r=this._endAngle-this._startAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),this._clockwise&&!i&&(r===n?r=-n:r-=n);var o=this._startAngle+t*r,s=this.p0.x+this._xRadius*Math.cos(o),a=this.p0.y+this._yRadius*Math.sin(o);if(0!==this._rotation){var c=Math.cos(this._rotation),h=Math.sin(this._rotation),l=s-this.p0.x,f=a-this.p0.y;s=l*c-f*h+this.p0.x,a=l*h+f*c+this.p0.y}return e.set(s,a)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=2*t,this},setHeight:function(t){return this.yRadius=2*t,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return a(this._startAngle)},set:function(t){this._startAngle=o(t)}},endAngle:{get:function(){return a(this._endAngle)},set:function(t){this._endAngle=o(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return a(this._rotation)},set:function(t){this._rotation=o(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});c.fromJSON=function(t){return new c(t)},t.exports=c},function(t,e,n){var r=n(0),i=n(149),o=n(303),s=n(22),a=n(8),u=new a,c=new r({Extends:i,initialize:function(t,e){i.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e},getBounds:function(t){return void 0===t&&(t=new s),o([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(){return u.copy(this.p1).subtract(this.p0).normalize()},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});c.fromJSON=function(t){var e=t.points,n=new a(e[0],e[1]),r=new a(e[2],e[3]);return new c(n,r)},t.exports=c},function(t,e,n){var r=n(0),i=n(149),o=n(475),s=n(8),a=new r({Extends:i,initialize:function(t,e,n){i.call(this,"QuadraticBezier"),Array.isArray(t)&&(n=new s(t[4],t[5]),e=new s(t[2],t[3]),t=new s(t[0],t[1])),this.p0=t,this.p1=e,this.p2=n},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new s);var n=this.p0,r=this.p1,i=this.p2;return e.set(o(t,n.x,r.x,i.x),o(t,n.y,r.y,i.y))},draw:function(t,e){void 0===e&&(e=32);var n=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var e=t.points,n=new s(e[0],e[1]),r=new s(e[2],e[3]),i=new s(e[4],e[5]);return new a(n,r,i)},t.exports=a},function(t,e,n){var r=n(296),i=n(0),o=n(149),s=n(8),a=new i({Extends:o,initialize:function(t){void 0===t&&(t=[]),o.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var n=new s;"number"==typeof t[e]?(n.x=t[e],n.y=t[e+1],e++):Array.isArray(t[e])?(n.x=t[e][0],n.y=t[e][1]):(n.x=t[e].x,n.y=t[e].y),this.points.push(n)}return this},addPoint:function(t,e){var n=new s(t,e);return this.points.push(n),n},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new s);var n=this.points,i=(n.length-1)*t,o=Math.floor(i),a=i-o,u=n[0===o?o:o-1],c=n[o],h=n[o>n.length-2?n.length-1:o+1],l=n[o>n.length-3?n.length-1:o+2];return e.set(r(a,u.x,c.x,h.x,l.x),r(a,u.y,c.y,h.y,l.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},t.exports=a},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),n&&""!==n||(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","void main () {","gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","}"].join("\n")),void 0===r&&(r=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=n,this.uniforms=r}});t.exports=r},function(t,e,n){var r=n(72);r.ColorToRGBA=n(1059),r.ComponentToHex=n(511),r.GetColor=n(289),r.GetColor32=n(445),r.HexStringToColor=n(444),r.HSLToColor=n(1060),r.HSVColorWheel=n(1061),r.HSVToRGB=n(290),r.HueToComponent=n(512),r.IntegerToColor=n(447),r.IntegerToRGB=n(448),r.Interpolate=n(1062),r.ObjectToColor=n(449),r.RandomRGB=n(1063),r.RGBStringToColor=n(450),r.RGBToHSV=n(446),r.RGBToString=n(1064),r.ValueToColor=n(288),t.exports=r},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}},function(t,e,n){var r=n(215);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()};document.body?r.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}else t()}},function(t,e,n){var r=n(304);t.exports=function(t,e){var n=window.screen,i=!!n&&(n.orientation||n.mozOrientation||n.msOrientation);if(i&&"string"==typeof i.type)return i.type;if("string"==typeof i)return i;if(n)return n.height>n.width?r.PORTRAIT:r.LANDSCAPE;if("number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?r.PORTRAIT:r.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return r.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return r.LANDSCAPE}return e>t?r.PORTRAIT:r.LANDSCAPE}},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||(e=document.body),e}},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,n){var r=n(0),i=n(306),o=n(20),s=n(98),a=n(60),u=n(522),c=n(523),h=n(524),l=n(525),f=n(71),d=n(484),p=new r({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new o,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new u(this):null,this.mouse=e.inputMouse?new c(this):null,this.touch=e.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var n=0;n<=this.pointersTotal;n++){var r=new h(this,n);r.smoothFactor=e.inputSmoothFactor,this.pointers.push(r)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(a.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(s.MANAGER_BOOT),this.game.events.on(a.PRE_RENDER,this.preRender,this),this.game.events.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(s.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(s.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,n=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(s.MANAGER_UPDATE);for(var r=0;r<n.length;r++){var i=n[r];if(i.sys.input&&i.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var n=0;n<t;n++){var r=this.pointers.length,i=new h(this,r);i.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(i),this.pointersTotal++,e.push(i)}return e},updateInputPlugins:function(t,e){var n=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<n.length;r++){var i=n[r];if(i.sys.input)if(i.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip)return}},onTouchStart:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(!a.active){a.touchstart(o,t),this.activePointer=a,n.push(a);break}}this.updateInputPlugins(i.TOUCH_START,n)},onTouchMove:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchmove(o,t),this.activePointer=a,n.push(a);break}}this.updateInputPlugins(i.TOUCH_MOVE,n)},onTouchEnd:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchend(o,t),n.push(a);break}}this.updateInputPlugins(i.TOUCH_END,n)},onTouchCancel:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchcancel(o,t),n.push(a);break}}this.updateInputPlugins(i.TOUCH_CANCEL,n)},onMouseDown:function(t){this.mousePointer.down(t),this.mousePointer.updateMotion(),this.updateInputPlugins(i.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){this.mousePointer.move(t),this.mousePointer.updateMotion(),this.updateInputPlugins(i.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){this.mousePointer.up(t),this.mousePointer.updateMotion(),this.updateInputPlugins(i.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){this.mousePointer.wheel(t),this.updateInputPlugins(i.MOUSE_WHEEL,this.mousePointerContainer)},inputCandidate:function(t,e){var n=t.input;if(!n||!n.enabled||!t.willRender(e))return!1;var r=!0,i=t.parentContainer;if(i)do{if(!i.willRender(e)){r=!1;break}i=i.parentContainer}while(i);return r},hitTest:function(t,e,n,r){void 0===r&&(r=this._tempHitTest);var i=this._tempPoint,o=n.scrollX,s=n.scrollY;r.length=0;var a=t.x,u=t.y;1!==n.resolution&&(a+=n._x,u+=n._y),n.getWorldPoint(a,u,i),t.worldX=i.x,t.worldY=i.y;for(var c={x:0,y:0},h=this._tempMatrix,l=this._tempMatrix2,f=0;f<e.length;f++){var p=e[f];if(this.inputCandidate(p,n)){var m=i.x+o*p.scrollFactorX-o,v=i.y+s*p.scrollFactorY-s;p.parentContainer?(p.getWorldTransformMatrix(h,l),h.applyInverse(m,v,c)):d(m,v,p.x,p.y,p.rotation,p.scaleX,p.scaleY,c),this.pointWithinHitArea(p,c.x,c.y)&&r.push(p)}}return r},pointWithinHitArea:function(t,e,n){e+=t.displayOriginX,n+=t.displayOriginY;var r=t.input;return!(!r||!r.hitAreaCallback(r.hitArea,e,n,t))&&(r.localX=e,r.localY=n,!0)},pointWithinInteractiveObject:function(t,e,n){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,n+=t.gameObject.displayOriginY,t.localX=e,t.localY=n,t.hitAreaCallback(t.hitArea,e,n,t))},transformPointer:function(t,e,n,r){var i=t.position,o=t.prevPosition;o.x=i.x,o.y=i.y;var s=this.scaleManager.transformX(e),a=this.scaleManager.transformY(n),u=t.smoothFactor;r&&0!==u?(i.x=s*u+o.x*(1-u),i.y=a*u+o.y*(1-u)):(i.x=s,i.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=p},function(t,e,n){var r=n(221),i=n(0),o=n(60),s=n(98),a=n(222),u=n(0),c=new i({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=u,this.onKeyUp=u,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(o.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.useQueue||t.manager.events.emit(s.MANAGER_PROCESS);var n=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!n&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}},this.onKeyUp=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.useQueue||t.manager.events.emit(s.MANAGER_PROCESS);var n=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!n&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,n=0;n<t.length;n++){var r=t[n];"string"==typeof r&&(r=a[r.trim().toUpperCase()]),-1===e.indexOf(r)&&e.push(r)}this.preventDefault=e.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,n=0;n<t.length;n++){var i=t[n];"string"==typeof i&&(i=a[i.toUpperCase()]),r(e,i)}this.preventDefault=e.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(o.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=c},function(t,e,n){var r=n(0),i=n(293),o=n(98),s=n(0),a=new r({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=s,this.onMouseDown=s,this.onMouseUp=s,this.onMouseDownWindow=s,this.onMouseUpWindow=s,this.onMouseOver=s,this.onMouseOut=s,this.onMouseWheel=s,this.pointerLockChange=s,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.capture=t.inputMouseCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),this},requestPointerLock:function(){if(i.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){i.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this,e=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onMouseMove(e),t.capture&&e.preventDefault())},this.onMouseDown=function(r){n&&window.focus(),!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onMouseDown(r),t.capture&&r.target===e&&r.preventDefault())},this.onMouseDownWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==e&&t.manager.onMouseDown(n)},this.onMouseUp=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onMouseUp(n),t.capture&&n.target===e&&n.preventDefault())},this.onMouseUpWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==e&&t.manager.onMouseUp(n)},this.onMouseOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onMouseOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)},this.onMouseWheel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onMouseWheel(e)};var r=this.target;if(r){var o={passive:!0},s={passive:!1};r.addEventListener("mousemove",this.onMouseMove,this.capture?s:o),r.addEventListener("mousedown",this.onMouseDown,this.capture?s:o),r.addEventListener("mouseup",this.onMouseUp,this.capture?s:o),r.addEventListener("mouseover",this.onMouseOver,this.capture?s:o),r.addEventListener("mouseout",this.onMouseOut,this.capture?s:o),r.addEventListener("wheel",this.onMouseWheel,this.capture?s:o),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("mousedown",this.onMouseDownWindow,s),window.addEventListener("mouseup",this.onMouseUpWindow,s)),i.pointerLock&&(this.pointerLockChange=function(e){var n=t.target;t.locked=document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement===n,t.manager.queue.push(e)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&(window.removeEventListener("mousedown",this.onMouseDownWindow),window.removeEventListener("mouseup",this.onMouseUpWindow)),i.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,n){var r=n(467),i=n(0),o=n(112),s=n(295),a=n(476),u=n(8),c=new i({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new u,this.prevPosition=new u,this.midPoint=new u(-1,-1),this.velocity=new u,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.time=0,this.deltaX=0,this.deltaY=0,this.deltaZ=0},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t=this.position.x,e=this.position.y,n=this.midPoint.x,i=this.midPoint.y;if(t!==n||e!==i){var o=a(this.motionFactor,n,t),u=a(this.motionFactor,i,e);s(o,t,.1)&&(o=t),s(u,e,.1)&&(u=e),this.midPoint.set(o,u);var c=t-o,h=e-u;this.velocity.set(c,h),this.angle=r(o,u,t,e),this.distance=Math.sqrt(c*c+h*h)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp),this.isDown=!1,this.wasTouch=!1},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp),this.isDown=!0,this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.manager.mouse.locked&&(this.movementX+=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY+=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=t.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var n=this.prevPosition.x,r=this.prevPosition.y,i=this.position.x,o=this.position.y,s=0;s<t;s++){var u=1/t*s;e[s]={x:a(u,n,i),y:a(u,r,o)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}}});t.exports=c},function(t,e,n){var r=n(0),i=n(98),o=n(2),s=new r({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=o,this.onTouchStartWindow=o,this.onTouchMove=o,this.onTouchEnd=o,this.onTouchEndWindow=o,this.onTouchCancel=o,this.onTouchCancelWindow=o,this.onTouchOver=o,this.onTouchOut=o,t.events.once(i.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),this.enabled&&this.target&&this.startListeners()},startListeners:function(){var t=this,e=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(r){n&&window.focus(),!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(r),t.capture&&r.target===e&&r.preventDefault())},this.onTouchStartWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==e&&t.manager.onTouchStart(n)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.preventDefault())},this.onTouchEnd=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(n),t.capture&&n.target===e&&n.preventDefault())},this.onTouchEndWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==e&&t.manager.onTouchEnd(n)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var r=this.target;if(r){var i={passive:!0},o={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?o:i),r.addEventListener("touchmove",this.onTouchMove,this.capture?o:i),r.addEventListener("touchend",this.onTouchEnd,this.capture?o:i),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?o:i),r.addEventListener("touchover",this.onTouchOver,this.capture?o:i),r.addEventListener("touchout",this.onTouchOut,this.capture?o:i),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,o),window.addEventListener("touchend",this.onTouchEndWindow,o),window.addEventListener("touchcancel",this.onTouchCancelWindow,o)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=s},function(t,e,n){var r=n(0),i=n(60),o=n(20),s=n(17),a=n(27),u=n(13),c=n(1),h=n(29),l=n(221),f=new r({Extends:o,initialize:function(t){o.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(i.BOOT,this.boot,this)},boot:function(){var t,e,n,r,o,s,a,u=this.game.config,h=u.installGlobalPlugins;for(h=h.concat(this._pendingGlobal),t=0;t<h.length;t++)e=h[t],n=c(e,"key",null),r=c(e,"plugin",null),o=c(e,"start",!1),s=c(e,"mapping",null),a=c(e,"data",null),n&&(r?this.install(n,r,o,s,a):console.warn("Missing `plugin` for key: "+n));for(h=(h=u.installScenePlugins).concat(this._pendingScene),t=0;t<h.length;t++)e=h[t],n=c(e,"key",null),r=c(e,"plugin",null),s=c(e,"mapping",null),n&&(r?this.installScenePlugin(n,r,s):console.warn("Missing `plugin` for key: "+n));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(i.DESTROY,this.destroy,this)},addToScene:function(t,e,n){var r,i,o,s=this.game,a=t.scene,u=t.settings.map,c=t.settings.isBooted;for(r=0;r<e.length;r++)s[i=e[r]]?(t[i]=s[i],u.hasOwnProperty(i)&&(a[u[i]]=t[i])):"game"===i&&u.hasOwnProperty(i)&&(a[u[i]]=s);for(var l=0;l<n.length;l++)for(o=n[l],r=0;r<o.length;r++)if(i=o[r],h.hasCore(i)){var f=h.getCore(i),d=new f.plugin(a,this);t[f.mapping]=d,f.custom?a[f.mapping]=d:u.hasOwnProperty(f.mapping)&&(a[u[f.mapping]]=d),c&&d.boot()}for(o=this.plugins,r=0;r<o.length;r++){var p=o[r];p.mapping&&(a[p.mapping]=p.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function(t,e,n,r,i){if(void 0===i&&(i=!1),"function"==typeof e){if(h.hasCore(t)){if(!i&&h.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else h.register(t,e,n,!0),this.scenePlugins.push(t);if(r){var o=new e(r,this);r.sys[t]=o,n&&""!==n&&(r[n]=o),o.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,n,r,i){if(void 0===n&&(n=!1),void 0===r&&(r=null),void 0===i&&(i=null),"function"!=typeof e)return console.warn("Invalid Plugin: "+t),null;if(h.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==r&&(n=!0),this.game.isBooted){if(h.registerCustom(t,e,r,i),n)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:n,mapping:r,data:i});return null},getIndex:function(t){for(var e=this.plugins,n=0;n<e.length;n++){if(e[n].key===t)return n}return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var n=this.getEntry(e);return n&&!n.active?(n.active=!0,n.plugin.start()):n||(n=this.createEntry(t,e)),n?n.plugin:null},createEntry:function(t,e){var n=h.getCustom(t);if(n){var r=new n.plugin(this);n={key:e,plugin:r,active:!0,mapping:n.mapping,data:n.data},this.plugins.push(n),r.init(n.data),r.start()}return n},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var n=this.getEntry(t);if(n)return n.plugin;var r=this.getClass(t);return r&&e?(n=this.createEntry(t,t))?n.plugin:null:r||null},getClass:function(t){return h.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&l(this.plugins,e),h.removeCustom(t)},removeScenePlugin:function(t){l(this.scenePlugins,t),h.remove(t)},registerGameObject:function(t,e,n){return e&&u.register(t,e),n&&a.register(t,n),this},registerFileType:function(t,e,n){s.register(t,e),n&&n.sys.load&&(n.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();h.destroyCustomPlugins(),this.game.noReturn&&h.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=f},function(t,e,n){var r=n(304),i=n(0),o=n(20),s=n(176),a=n(60),u=n(1117),c=n(519),h=n(514),l=n(2),f=n(22),d=n(528),p=n(177),m=n(8),v=new i({Extends:o,initialize:function(t){o.call(this),this.game=t,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new d,this.gameSize=new d,this.baseSize=new d,this.displaySize=new d,this.scaleMode=r.SCALE_MODE.NONE,this.resolution=1,this.zoom=1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this._requestedFullscreenChange=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once("boot",this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==r.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(a.PRE_STEP,this.step,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e=t.width,n=t.height,i=t.scaleMode,o=t.resolution,s=t.zoom,a=t.autoRound;if("string"==typeof e){var u=this.parentSize.width;0===u&&(u=window.innerWidth);var c=parseInt(e,10)/100;e=Math.floor(u*c)}if("string"==typeof n){var l=this.parentSize.height;0===l&&(l=window.innerHeight);var f=parseInt(n,10)/100;n=Math.floor(l*f)}this.resolution=1,this.scaleMode=i,this.autoRound=a,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,a&&(e=Math.floor(e),n=Math.floor(n)),this.gameSize.setSize(e,n),s===r.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,this.baseSize.setSize(e*o,n*o),a&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*s,t.minHeight*s),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*s,t.maxHeight*s),this.displaySize.setSize(e,n),this.orientation=h(e,n)},getParent:function(t){var e=t.parent;if(null!==e){if(this.parent=c(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==r.SCALE_MODE.NONE){var n=this.parent.getBoundingClientRect();(this.parentIsWindow||0===n.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",n=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==n.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=u(!0));var n=this.resolution,r=e.width*n,i=e.height*n;return(t.width!==r||t.height!==i)&&(t.setSize(r,i),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e(t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var n=this.autoRound,r=this.resolution;n&&(t=Math.floor(t),e=Math.floor(e));var i=this.width,o=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t*r,e*r),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t,e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(i,o)},resize:function(t,e){var n=this.zoom,r=this.resolution,i=this.autoRound;i&&(t=Math.floor(t),e=Math.floor(e));var o=this.width,s=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t*r,e*r),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*n*r,e*n*r),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,u=t*n,c=e*n;return i&&(u=Math.floor(u),c=Math.floor(c)),u===t&&c===e||(a.width=u+"px",a.height=c+"px"),this.refresh(o,s)},setZoom:function(t){return this.zoom=t,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var n=this.game.domContainer;if(n){this.baseSize.setCSS(n);var r=this.canvas.style,i=n.style;i.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",i.marginLeft=r.marginLeft,i.marginTop=r.marginTop}return this.emit(s.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,t,e),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=h(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(s.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,e,n=this.canvas.style,i=this.gameSize.width,o=this.gameSize.height,s=this.zoom,a=this.autoRound;this.scaleMode===r.SCALE_MODE.NONE?(this.displaySize.setSize(i*s*1,o*s*1),t=this.displaySize.width/1,e=this.displaySize.height/1,a&&(t=Math.floor(t),e=Math.floor(e)),s>1&&(n.width=t+"px",n.height=e+"px")):this.scaleMode===r.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(1*this.displaySize.width,1*this.displaySize.height),t=this.displaySize.width/1,e=this.displaySize.height/1,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width/1,e=this.displaySize.height/1,a&&(t=Math.floor(t),e=Math.floor(e)),n.width=t+"px",n.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=p(this.parentSize.width,this.gameSize.width,0,!0),e=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t=this.autoCenter;if(t!==r.CENTER.NO_CENTER){var e=this.canvas,n=e.style,i=e.getBoundingClientRect(),o=i.width,s=i.height,a=Math.floor((this.parentSize.width-o)/2),u=Math.floor((this.parentSize.height-s)/2);t===r.CENTER.CENTER_HORIZONTALLY?u=0:t===r.CENTER.CENTER_VERTICALLY&&(a=0),n.marginLeft=a+"px",n.marginTop=u+"px"}},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e=this.fullscreen;if(e.available){if(!e.active){var n=this.getFullscreenTarget();this._requestedFullscreenChange=!0,"undefined"!=typeof Promise?e.keyboard?n[e.request](Element.ALLOW_KEYBOARD_INPUT).then(this.fullscreenSuccessHandler).catch(this.fullscreenErrorHandler):n[e.request](t).then(this.fullscreenSuccessHandler).catch(this.fullscreenErrorHandler):(e.keyboard?n[e.request](Element.ALLOW_KEYBOARD_INPUT):n[e.request](t),e.active?this.fullscreenSuccessHandler():this.fullscreenErrorHandler())}}else this.emit(s.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(s.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(s.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas));return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.canvas,t),e.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(s.FULLSCREEN_UNSUPPORTED),!1;t.active&&(this._requestedFullscreenChange=!0,document[t.cancel]()),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(s.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;if(e.orientationChange=function(){t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available){e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)};["webkit","moz",""].forEach(function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1)}},onFullScreenChange:function(){this._requestedFullscreenChange||this.stopFullscreen(),this._requestedFullscreenChange=!1},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1);["webkit","moz",""].forEach(function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy(),this.fullscreenTarget=null},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=v},function(t,e,n){var r=n(40),i=n(0),o=n(177),s=n(8),a=new i({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=0),void 0===r&&(r=null),this._width=t,this._height=e,this._parent=r,this.aspectMode=n,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new s},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=r(t,0,this.maxWidth),this.minHeight=r(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=r(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(o(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(o(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(o(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var r=this.snapTo,i=0===e?1:t/e;return n&&this.aspectRatio>i||!n&&this.aspectRatio<i?(e=(t=o(t,r.x))/this.aspectRatio,r.y>0&&(t=(e=o(e,r.y))*this.aspectRatio)):(n&&this.aspectRatio<i||!n&&this.aspectRatio>i)&&(t=(e=o(e,r.y))*this.aspectRatio,r.x>0&&(e=(t=o(t,r.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},function(t,e,n){var r=n(0),i=n(223),o=n(34),s=n(60),a=n(14),u=n(150),c=n(2),h=n(530),l=n(307),f=new r({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)this._pending.push({key:"default",scene:e[n],autoStart:0===n,data:{}})}t.events.once(s.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,n,r;for(t=0;t<this._pending.length;t++){var i;n=(e=this._pending[t]).key,(r=e.scene)instanceof h?i=this.createSceneFromInstance(n,r):"object"==typeof r?i=this.createSceneFromObject(n,r):"function"==typeof r&&(i=this.createSceneFromFunction(n,r)),n=i.sys.settings.key,this.keys[n]=i,this.scenes.push(i),this._data[n]&&(i.sys.settings.data=this._data[n].data,this._data[n].autoStart&&(e.autoStart=!0)),(e.autoStart||i.sys.settings.active)&&this._start.push(n)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t=this._pending.length,e=this._queue.length;if(0!==t||0!==e){var n,r;if(t){for(n=0;n<t;n++)r=this._pending[n],this.add(r.key,r.scene,r.autoStart,r.data);for(n=0;n<this._start.length;n++)r=this._start[n],this.start(r);return this._start.length=0,void(this._pending.length=0)}for(n=0;n<this._queue.length;n++)this[(r=this._queue[n]).op](r.keyA,r.keyB);this._queue.length=0}},add:function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:n,data:r}),this.isBooted||(this._data[t]={data:r}),null):(t=this.getKey(t,e),e instanceof h?i=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,i=this.createSceneFromObject(t,e)):"function"==typeof e&&(i=this.createSceneFromFunction(t,e)),i.sys.settings.data=r,t=i.sys.settings.key,this.keys[t]=i,this.scenes.push(i),(n||i.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),i);var i},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var n=this.scenes.indexOf(e),r=e.sys.settings.key;n>-1&&(delete this.keys[r],this.scenes.splice(n,1),this._start.indexOf(r)>-1&&(n=this._start.indexOf(r),this._start.splice(n,1)),e.sys.destroy())}return this},bootScene:function(t){var e,n=t.sys,r=n.settings;t.init&&(t.init.call(t,r.data),r.status=i.INIT,r.isTransition&&n.events.emit(o.TRANSITION_INIT,r.transitionFrom,r.transitionDuration)),n.load&&(e=n.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(r.status=i.LOADING,e.once(u.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){var e=t.scene;this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(e)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var n=this.scenes.length-1;n>=0;n--){var r=this.scenes[n].sys;r.settings.status>i.START&&r.settings.status<=i.RUNNING&&r.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var n=this.scenes[e].sys;n.settings.visible&&n.settings.status>=i.LOADING&&n.settings.status<i.SLEEPING&&n.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,n=e.settings;t.create&&(n.status=i.CREATING,t.create.call(t,n.data),n.status===i.DESTROYED)||(n.isTransition&&e.events.emit(o.TRANSITION_START,n.transitionFrom,n.transitionDuration),t.update&&(e.sceneUpdate=t.update),n.status=i.RUNNING,e.events.emit(o.CREATE,t))},createSceneFromFunction:function(t,e){var n=new e;if(n instanceof h){var r=n.sys.settings.key;if(""!==r&&(t=r),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,n)}return n.sys=new l(n),n.sys.settings.key=t,n.sys.init(this.game),n},createSceneFromInstance:function(t,e){var n=e.sys.settings.key;return""!==n?t=n:e.sys.settings.key=t,e.sys.init(this.game),e},createSceneFromObject:function(t,e){var n=new h(e),r=n.sys.settings.key;""!==r?t=r:n.sys.settings.key=t,n.sys.init(this.game);for(var i=["init","preload","create","update","render"],o=0;o<i.length;o++){var s=a(e,i[o],null);s&&(n[i[o]]=s)}if(e.hasOwnProperty("extend"))for(var u in e.extend){var c=e.extend[u];"data"===u&&n.hasOwnProperty("data")&&"object"==typeof c?n.data.merge(c):"sys"!==u&&(n[u]=c)}return n},getKey:function(t,e){if(t||(t="default"),"function"==typeof e)return t;if(e instanceof h?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var n=[],r=this.scenes,i=0;i<r.length;i++){var o=r[i];o&&(!t||t&&o.sys.isActive())&&n.push(o)}return e?n.reverse():n},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var n=this.getScene(t);return n&&n.sys.pause(e),this},resume:function(t,e){var n=this.getScene(t);return n&&n.sys.resume(e),this},sleep:function(t,e){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.sleep(e),this},wake:function(t,e){var n=this.getScene(t);return n&&n.sys.wake(e),this},run:function(t,e){var n=this.getScene(t);if(!n){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===t){this.queueOp("start",t,e);break}return this}n.sys.isSleeping()?n.sys.wake(e):n.sys.isBooted&&!n.sys.isActive()?n.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var n=this.getScene(t);if(n){var r;if(n.sys.isActive()||n.sys.isPaused())n.sys.shutdown(),n.sys.start(e);else if(n.sys.start(e),n.sys.load&&(r=n.sys.load),r&&n.sys.settings.hasOwnProperty("pack")&&(r.reset(),r.addPack({payload:n.sys.settings.pack})))return n.sys.settings.status=i.LOADING,r.once(u.COMPLETE,this.payloadComplete,this),r.start(),this;this.bootScene(n)}return this},stop:function(t){var e=this.getScene(t);return e&&!e.sys.isTransitioning()&&e.sys.shutdown(),this},switch:function(t,e){var n=this.getScene(t),r=this.getScene(e);return n&&r&&n!==r&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e<this.scenes.length){var n=this.getScene(t);this.scenes.splice(e,1),this.scenes.push(n)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e>0){var n=this.getScene(t);this.scenes.splice(e,1),this.scenes.unshift(n)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e>0){var n=e-1,r=this.getScene(t),i=this.getAt(n);this.scenes[e]=i,this.scenes[n]=r}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e<this.scenes.length-1){var n=e+1,r=this.getScene(t),i=this.getAt(n);this.scenes[e]=i,this.scenes[n]=r}}return this},moveAbove:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:e});else{var n=this.getIndex(t),r=this.getIndex(e);if(-1!==n&&-1!==r){var i=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(n+1,0,i)}}return this},moveBelow:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:e});else{var n=this.getIndex(t),r=this.getIndex(e);if(-1!==n&&-1!==r){var i=this.getAt(r);this.scenes.splice(r,1),0===n?this.scenes.unshift(i):this.scenes.splice(n,0,i)}}return this},queueOp:function(t,e,n){return this._queue.push({op:t,keyA:e,keyB:n}),this},swapPosition:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:e});else{var n=this.getIndex(t),r=this.getIndex(e);if(n!==r&&-1!==n&&-1!==r){var i=this.getAt(n);this.scenes[n]=this.scenes[r],this.scenes[r]=i}}return this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],n=0;n<this.scenes.length;n++){var r=this.scenes[n].sys,o=!r.settings.visible||r.settings.status!==i.RUNNING&&r.settings.status!==i.PAUSED?"[-] ":"[*] ";o+=r.settings.key+" ("+e[r.settings.status]+")",t.push(o)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++){this.scenes[t].sys.destroy()}this.update=c,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=f},function(t,e,n){var r=n(0),i=n(307),o=new r({initialize:function(t){this.sys=new i(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.impact,this.matter,this.facebook,this.scale,this.plugins},update:function(){}});t.exports=o},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,n){var r=n(223),i=n(14),o=n(124),s=n(1130),a={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:r.PENDING,key:i(t,"key",""),active:i(t,"active",!1),visible:i(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:i(t,"pack",!1),cameras:i(t,"cameras",null),map:i(t,"map",o(s,i(t,"mapAdd",{}))),physics:i(t,"physics",{}),loader:i(t,"loader",{}),plugins:i(t,"plugins",!1),input:i(t,"input",{})}}};t.exports=a},function(t,e,n){var r=n(51),i=n(1131),o=n(0),s=n(72),a=n(58),u=n(20),c=n(219),h=n(60),l=n(502),f=n(14),d=n(535),p=n(308),m=new o({Extends:u,initialize:function(t){u.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(h.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once(h.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(c.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var n=this,r=new Image;r.onerror=function(){n.emit(c.ERROR,t)},r.onload=function(){var e=n.create(t,r);d.Image(e,0),n.emit(c.ADD,t,e),n.emit(c.LOAD,t,e)},r.src=e}return this},getBase64:function(t,e,n,i){void 0===n&&(n="image/png"),void 0===i&&(i=.92);var o="",s=this.getFrame(t,e);if(s){var a=s.canvasData,u=r.create2D(this,a.width,a.height);u.getContext("2d").drawImage(s.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),o=u.toDataURL(n,i),r.remove(u)}return o},addImage:function(t,e,n){var r=null;return this.checkKey(t)&&(r=this.create(t,e),d.Image(r,0),n&&r.setDataSource(n),this.emit(c.ADD,t,r)),r},addRenderTexture:function(t,e){var n=null;return this.checkKey(t)&&((n=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(c.ADD,t,n)),n},generate:function(t,e){if(this.checkKey(t)){var n=r.create(this,1,1);return e.canvas=n,l(e),this.addCanvas(t,n)}return null},createCanvas:function(t,e,n){if(void 0===e&&(e=256),void 0===n&&(n=256),this.checkKey(t)){var i=r.create(this,e,n,a.CANVAS,!0);return this.addCanvas(t,i)}return null},addCanvas:function(t,e,n){void 0===n&&(n=!1);var r=null;return n?r=new i(this,t,e,e.width,e.height):this.checkKey(t)&&(r=new i(this,t,e,e.width,e.height),this.list[t]=r,this.emit(c.ADD,t,r)),r},addAtlas:function(t,e,n,r){return Array.isArray(n.textures)||Array.isArray(n.frames)?this.addAtlasJSONArray(t,e,n,r):this.addAtlasJSONHash(t,e,n,r)},addAtlasJSONArray:function(t,e,n,r){var i=null;if(this.checkKey(t)){if(i=this.create(t,e),Array.isArray(n))for(var o=1===n.length,s=0;s<i.source.length;s++){var a=o?n[0]:n[s];d.JSONArray(i,s,a)}else d.JSONArray(i,0,n);r&&i.setDataSource(r),this.emit(c.ADD,t,i)}return i},addAtlasJSONHash:function(t,e,n,r){var i=null;if(this.checkKey(t)){if(i=this.create(t,e),Array.isArray(n))for(var o=0;o<n.length;o++)d.JSONHash(i,o,n[o]);else d.JSONHash(i,0,n);r&&i.setDataSource(r),this.emit(c.ADD,t,i)}return i},addAtlasXML:function(t,e,n,r){var i=null;return this.checkKey(t)&&(i=this.create(t,e),d.AtlasXML(i,0,n),r&&i.setDataSource(r),this.emit(c.ADD,t,i)),i},addUnityAtlas:function(t,e,n,r){var i=null;return this.checkKey(t)&&(i=this.create(t,e),d.UnityYAML(i,0,n),r&&i.setDataSource(r),this.emit(c.ADD,t,i)),i},addSpriteSheet:function(t,e,n){var r=null;if(this.checkKey(t)){var i=(r=this.create(t,e)).source[0].width,o=r.source[0].height;d.SpriteSheet(r,0,0,0,i,o,n),this.emit(c.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var n=f(e,"atlas",null),r=f(e,"frame",null);if(n&&r){var i=this.get(n).get(r);if(i){var o=this.create(t,i.source.image);return i.trimmed?d.SpriteSheetFromAtlas(o,i,e):d.SpriteSheet(o,0,i.cutX,i.cutY,i.cutWidth,i.cutHeight,e),this.emit(c.ADD,t,o),o}}},create:function(t,e,n,r){var i=null;return this.checkKey(t)&&(i=new p(this,t,e,n,r),this.list[t]=i),i},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,n,r){var i=this.getFrame(n,r);if(i){t-=i.x,e-=i.y;var o=i.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(i.source.image,t,e,1,1,0,0,1,1);var u=a.getImageData(0,0,1,1);return new s(u.data[0],u.data[1],u.data[2],u.data[3])}}return null},getPixelAlpha:function(t,e,n,r){var i=this.getFrame(n,r);if(i){t-=i.x,e-=i.y;var o=i.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b){var s=this._tempContext;return s.clearRect(0,0,1,1),s.drawImage(i.source.image,t,e,1,1,0,0,1,1),s.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,n){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(n)),t},renameTexture:function(t,e){var n=this.get(t);return!(!n||t===e)&&(n.key=e,this.list[e]=n,delete this.list[t],!0)},each:function(t,e){for(var n=[null],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var i in this.list)n[0]=this.list[i],t.apply(e,n)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,r.remove(this._tempCanvas)}});t.exports=m},function(t,e,n){var r=n(51),i=n(0),o=n(217),s=n(171),a=new i({initialize:function(t,e,n,r){var i=t.manager.game;this.renderer=i.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=n||e.naturalWidth||e.width||0,this.height=r||e.naturalHeight||e.height||0,this.scaleMode=s.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isRenderTexture="RenderTexture"===e.type,this.isPowerOf2=o(this.width,this.height),this.glTexture=null,this.init(i)},init:function(t){this.renderer&&(this.renderer.gl?this.isCanvas?this.glTexture=this.renderer.canvasToTexture(this.image):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t)},update:function(){this.renderer.gl&&this.isCanvas&&(this.glTexture=this.renderer.canvasToTexture(this.image,this.glTexture))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=a},function(t,e,n){t.exports={AtlasXML:n(1132),Canvas:n(1133),Image:n(1134),JSONArray:n(1135),JSONHash:n(1136),SpriteSheet:n(1137),SpriteSheetFromAtlas:n(1138),UnityYAML:n(1139)}},function(t,e,n){var r=n(537),i=n(539),o=n(541),s={create:function(t){var e=t.config.audio,n=t.device.audio;return e&&e.noAudio||!n.webAudio&&!n.audioData?new i(t):!n.webAudio||e&&e.disableWebAudio?new r(t):new o(t)}};t.exports=s},function(t,e,n){var r=n(224),i=n(0),o=n(126),s=n(538),a=new i({Extends:r,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,t)},add:function(t,e){var n=new s(this,t,e);return this.sounds.push(n),n},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each(function(e,n){for(var r=0;r<n.length;r++)if("true"===n[r].dataset.locked)return t.locked=!0,!1;return!0}),this.locked){var e=!1,n=function(){e=!0},r=function(){if(e)e=!1;else{document.body.removeEventListener("touchmove",n),document.body.removeEventListener("touchend",r);var i=[];if(t.game.cache.audio.entries.each(function(t,e){for(var n=0;n<e.length;n++){var r=e[n];"true"===r.dataset.locked&&i.push(r)}return!0}),0!==i.length){var o=i[i.length-1];o.oncanplaythrough=function(){o.oncanplaythrough=null,i.forEach(function(t){t.dataset.locked="false"}),t.unlocked=!0},i.forEach(function(t){t.load()})}}};this.once(o.UNLOCKED,function(){for(this.forEachActiveSound(function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration});this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}},this),document.body.addEventListener("touchmove",n,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound(function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(t){t.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,n){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:n}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound(function(t){t.updateMute()}),this.emit(o.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound(function(t){t.updateVolume()}),this.emit(o.GLOBAL_VOLUME,this,t)}}});t.exports=a},function(t,e,n){var r=n(225),i=n(0),o=n(126),s=new i({Extends:r,initialize:function(t,e,n){void 0===n&&(n={}),this.tags=t.game.cache.audio.get(e),this.tags?(this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,t,e,n)):console.warn("Audio cache entry missing: "+e)},play:function(t,e){return!this.manager.isLocked(this,"play",[t,e])&&(!!r.prototype.play.call(this,t,e)&&(!!this.pickAndPlayAudioTag()&&(this.emit(o.PLAY,this),!0)))},pause:function(){return!this.manager.isLocked(this,"pause")&&(!(this.startTime>0)&&(!!r.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(o.PAUSE,this),!0)))},resume:function(){return!this.manager.isLocked(this,"resume")&&(!(this.startTime>0)&&(!!r.prototype.resume.call(this)&&(!!this.pickAndPlayAudioTag()&&(this.emit(o.RESUME,this),!0))))},stop:function(){return!this.manager.isLocked(this,"stop")&&(!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(o.STOP,this),!0))},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,n=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=n,this.audio.currentTime=n,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var n=[];this.manager.forEachActiveSound(function(t){t.key===this.key&&t.audio&&n.push(t)},this),n.sort(function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1});var r=n[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch(function(t){console.warn(t)})},stopAndReleaseAudioTag:function(){this.audio.pause(),this.audio.dataset.used="false",this.audio=null,this.startTime=0,this.previousTime=0},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t,e){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var n=this.currentMarker?this.currentMarker.start:0,r=n+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=r-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,i-r),i=this.audio.currentTime):i<n&&(this.audio.currentTime+=n,i=this.audio.currentTime),i<this.previousTime&&this.emit(o.LOOPED,this);else if(i>=r)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(o.COMPLETE,this);this.previousTime=i}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=this.currentConfig.volume*this.manager.volume)},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(o.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(o.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,o.RATE,t)||(this.calculateRate(),this.emit(o.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,o.DETUNE,t)||(this.calculateRate(),this.emit(o.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(o.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(o.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this}});t.exports=s},function(t,e,n){var r=n(224),i=n(0),o=n(20),s=n(540),a=n(2),u=new i({Extends:o,initialize:function(t){o.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var n=new s(this,t,e);return this.sounds.push(n),n},addAudioSprite:function(t,e){var n=this.add(t,e);return n.spritemap={},n},play:function(t,e){return!1},playAudioSprite:function(t,e,n){return!1},remove:function(t){return r.prototype.remove.call(this,t)},removeByKey:function(t){return r.prototype.removeByKey.call(this,t)},pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,forEachActiveSound:function(t,e){r.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){r.prototype.destroy.call(this)}});t.exports=u},function(t,e,n){var r=n(225),i=n(0),o=n(20),s=n(37),a=new i({Extends:o,initialize:function(t,e,n){void 0===n&&(n={}),o.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=s({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},n),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!1},updateMarker:function(t){return!1},removeMarker:function(t){return null},play:function(t,e){return!1},pause:function(){return!1},resume:function(){return!1},stop:function(){return!1},destroy:function(){this.manager.remove(this),r.prototype.destroy.call(this)}});t.exports=a},function(t,e,n){var r=n(542),i=n(224),o=n(0),s=n(126),a=n(543),u=new o({Extends:i,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),i.call(this,t),this.locked&&this.unlock()},createAudioContext:function(t){var e=t.config.audio;return e&&e.context?(e.context.resume(),e.context):new AudioContext},add:function(t,e){var n=new a(this,t,e);return this.sounds.push(n),n},decodeAudio:function(t,e){var n;n=Array.isArray(t)?t:[{key:t,data:e}];for(var i=this.game.cache.audio,o=n.length,a=0;a<n.length;a++){var u=n[a],c=u.key,h=u.data;"string"==typeof h&&(h=r(h));var l=function(t,e){i.add(t,e),this.emit(s.DECODED,t),0===--o&&this.emit(s.DECODED_ALL)}.bind(this,c),f=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0===--o&&this.emit(s.DECODED_ALL)}.bind(this,c);this.context.decodeAudioData(h,l,f)}},unlock:function(){var t=this,e=function e(){t.context&&t.context.resume().then(function(){document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),document.body.removeEventListener("click",e),t.unlocked=!0})};document.body&&(document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1),document.body.addEventListener("click",e,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){this.locked||this.context.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then(function(){t.context=null})}i.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(s.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(s.GLOBAL_VOLUME,this,t)}}});t.exports=u},function(t,e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),i=0;i<n.length;i++)r[n.charCodeAt(i)]=i;t.exports=function(t){var e,n,i,o,s=(t=t.substr(t.indexOf(",")+1)).length,a=.75*s,u=0;"="===t[s-1]&&(a--,"="===t[s-2]&&a--);for(var c=new ArrayBuffer(a),h=new Uint8Array(c),l=0;l<s;l+=4)e=r[t.charCodeAt(l)],n=r[t.charCodeAt(l+1)],i=r[t.charCodeAt(l+2)],o=r[t.charCodeAt(l+3)],h[u++]=e<<2|n>>4,h[u++]=(15&n)<<4|i>>2,h[u++]=(3&i)<<6|63&o;return c}},function(t,e,n){var r=n(225),i=n(0),o=n(126),s=new i({Extends:r,initialize:function(t,e,n){void 0===n&&(n={}),this.audioBuffer=t.game.cache.audio.get(e),this.audioBuffer?(this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,t,e,n)):console.warn("Audio cache entry missing: "+e)},play:function(t,e){return!!r.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(o.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!r.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(o.PAUSE,this),!0))},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!r.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(o.RESUME,this),!0))},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(o.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,n=this.manager.context.currentTime+e,r=(this.currentMarker?this.currentMarker.start:0)+t,i=this.duration-t;this.playTime=n-t,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,r),Math.max(0,i)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,n))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),r.prototype.applyConfig.call(this)},update:function(t,e){this.hasEnded?(this.hasEnded=!1,r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(o.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(o.LOOPED,this))},destroy:function(){r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){r.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++){t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate}return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-t)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(o.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(o.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(o.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(o.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(o.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(o.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this}});t.exports=s},function(t,e,n){var r=n(1163),i=n(0),o=n(175),s=n(20),a=n(1164),u=n(1166),c=n(1167),h=new i({Extends:s,initialize:function(t){s.call(this),this.game=t,this.data=new o(this),this.on("setdata",this.setDataHandler,this),this.on("changedata",this.changeDataHandler,this),this.hasLoaded=!1,this.dataLocked=!1,this.supportedAPIs=[],this.entryPoint="",this.entryPointData=null,this.contextID=null,this.contextType=null,this.locale=null,this.platform=null,this.version=null,this.playerID=null,this.playerName=null,this.playerPhotoURL=null,this.playerCanSubscribeBot=!1,this.paymentsReady=!1,this.catalog=[],this.purchases=[],this.leaderboards={},this.ads=[]},setDataHandler:function(t,e,n){if(!this.dataLocked){var r={};r[e]=n;var i=this;FBInstant.player.setDataAsync(r).then(function(){i.emit("savedata",r)})}},changeDataHandler:function(t,e,n){if(!this.dataLocked){var r={};r[e]=n;var i=this;FBInstant.player.setDataAsync(r).then(function(){i.emit("savedata",r)})}},showLoadProgress:function(t){return t.load.on("progress",function(t){this.hasLoaded||FBInstant.setLoadingProgress(100*t)},this),t.load.on("complete",function(){this.hasLoaded||(this.hasLoaded=!0,FBInstant.startGameAsync().then(this.gameStarted.bind(this)))},this),this},gameStarted:function(){var t=FBInstant.getSupportedAPIs(),e={},n=function(t){return t[1].toUpperCase()};t.forEach(function(t){t=t.replace(/\../g,n),e[t]=!0}),this.supportedAPIs=e,this.getID(),this.getType(),this.getLocale(),this.getPlatform(),this.getSDKVersion(),this.getPlayerID(),this.getPlayerName(),this.getPlayerPhotoURL();var r=this;FBInstant.onPause(function(){r.emit("pause")}),FBInstant.getEntryPointAsync().then(function(t){r.entryPoint=t,r.entryPointData=FBInstant.getEntryPointData(),r.emit("startgame")}).catch(function(t){console.warn(t)}),this.supportedAPIs.paymentsPurchaseAsync&&FBInstant.payments.onReady(function(){r.paymentsReady=!0}).catch(function(t){console.warn(t)})},checkAPI:function(t){return!!this.supportedAPIs[t]},getID:function(){return!this.contextID&&this.supportedAPIs.contextGetID&&(this.contextID=FBInstant.context.getID()),this.contextID},getType:function(){return!this.contextType&&this.supportedAPIs.contextGetType&&(this.contextType=FBInstant.context.getType()),this.contextType},getLocale:function(){return!this.locale&&this.supportedAPIs.getLocale&&(this.locale=FBInstant.getLocale()),this.locale},getPlatform:function(){return!this.platform&&this.supportedAPIs.getPlatform&&(this.platform=FBInstant.getPlatform()),this.platform},getSDKVersion:function(){return!this.version&&this.supportedAPIs.getSDKVersion&&(this.version=FBInstant.getSDKVersion()),this.version},getPlayerID:function(){return!this.playerID&&this.supportedAPIs.playerGetID&&(this.playerID=FBInstant.player.getID()),this.playerID},getPlayerName:function(){return!this.playerName&&this.supportedAPIs.playerGetName&&(this.playerName=FBInstant.player.getName()),this.playerName},getPlayerPhotoURL:function(){return!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto&&(this.playerPhotoURL=FBInstant.player.getPhoto()),this.playerPhotoURL},loadPlayerPhoto:function(t,e){return this.playerPhotoURL&&(t.load.setCORS("anonymous"),t.load.image(e,this.playerPhotoURL),t.load.once("filecomplete-image-"+e,function(){this.emit("photocomplete",e)},this),t.load.start()),this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var t=this;FBInstant.player.canSubscribeBotAsync().then(function(){t.playerCanSubscribeBot=!0,t.emit("cansubscribebot")}).catch(function(e){t.emit("cansubscribebotfail",e)})}else this.emit("cansubscribebotfail");return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var t=this;FBInstant.player.subscribeBotAsync().then(function(){t.emit("subscribebot")}).catch(function(e){t.emit("subscribebotfail",e)})}else this.emit("subscribebotfail");return this},getData:function(t){if(!this.checkAPI("playerGetDataAsync"))return this;Array.isArray(t)||(t=[t]);var e=this;return FBInstant.player.getDataAsync(t).then(function(t){for(var n in e.dataLocked=!0,t)e.data.set(n,t[n]);e.dataLocked=!1,e.emit("getdata",t)}),this},saveData:function(t){if(!this.checkAPI("playerSetDataAsync"))return this;var e=this;return FBInstant.player.setDataAsync(t).then(function(){e.emit("savedata",t)}).catch(function(t){e.emit("savedatafail",t)}),this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync"))return this;var t=this;return FBInstant.player.flushDataAsync().then(function(){t.emit("flushdata")}).catch(function(e){t.emit("flushdatafail",e)}),this},getStats:function(t){if(!this.checkAPI("playerGetStatsAsync"))return this;var e=this;return FBInstant.player.getStatsAsync(t).then(function(t){e.emit("getstats",t)}).catch(function(t){e.emit("getstatsfail",t)}),this},saveStats:function(t){if(!this.checkAPI("playerSetStatsAsync"))return this;var e={};for(var n in t)"number"==typeof t[n]&&(e[n]=t[n]);var r=this;return FBInstant.player.setStatsAsync(e).then(function(){r.emit("savestats",e)}).catch(function(t){r.emit("savestatsfail",t)}),this},incStats:function(t){if(!this.checkAPI("playerIncrementStatsAsync"))return this;var e={};for(var n in t)"number"==typeof t[n]&&(e[n]=t[n]);var r=this;return FBInstant.player.incrementStatsAsync(e).then(function(t){r.emit("incstats",t)}).catch(function(t){r.emit("incstatsfail",t)}),this},saveSession:function(t){return this.checkAPI("setSessionData")?(JSON.stringify(t).length<=1e3?FBInstant.setSessionData(t):console.warn("Session data too long. Max 1000 chars."),this):this},openShare:function(t,e,n,r){return this._share("SHARE",t,e,n,r)},openInvite:function(t,e,n,r){return this._share("INVITE",t,e,n,r)},openRequest:function(t,e,n,r){return this._share("REQUEST",t,e,n,r)},openChallenge:function(t,e,n,r){return this._share("CHALLENGE",t,e,n,r)},_share:function(t,e,n,r,i){if(!this.checkAPI("shareAsync"))return this;if(void 0===i&&(i={}),n)var o=this.game.textures.getBase64(n,r);var s={intent:t,image:o,text:e,data:i},a=this;return FBInstant.shareAsync(s).then(function(){a.emit("resume")}),this},isSizeBetween:function(t,e){return this.checkAPI("contextIsSizeBetween")?FBInstant.context.isSizeBetween(t,e):this},switchContext:function(t){if(!this.checkAPI("contextSwitchAsync"))return this;if(t!==this.contextID){var e=this;FBInstant.context.switchAsync(t).then(function(){e.contextID=FBInstant.context.getID(),e.emit("switch",e.contextID)}).catch(function(t){e.emit("switchfail",t)})}return this},chooseContext:function(t){if(!this.checkAPI("contextChooseAsync"))return this;var e=this;return FBInstant.context.chooseAsync(t).then(function(){e.contextID=FBInstant.context.getID(),e.emit("choose",e.contextID)}).catch(function(t){e.emit("choosefail",t)}),this},createContext:function(t){if(!this.checkAPI("contextCreateAsync"))return this;var e=this;return FBInstant.context.createAsync(t).then(function(){e.contextID=FBInstant.context.getID(),e.emit("create",e.contextID)}).catch(function(t){e.emit("createfail",t)}),this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync"))return this;var t=this;return FBInstant.player.getConnectedPlayersAsync().then(function(e){t.emit("players",e)}).catch(function(e){t.emit("playersfail",e)}),this},getCatalog:function(){if(!this.paymentsReady)return this;var t=this,e=this.catalog;return FBInstant.payments.getCatalogAsync().then(function(n){e=[],n.forEach(function(t){e.push(u(t))}),t.emit("getcatalog",e)}).catch(function(e){t.emit("getcatalogfail",e)}),this},getProduct:function(t){for(var e=0;e<this.catalog.length;e++)if(this.catalog[e].productID===t)return this.catalog[e];return null},purchase:function(t,e){if(!this.paymentsReady)return this;var n={productID:t};e&&(n.developerPayload=e);var r=this;return FBInstant.payments.purchaseAsync(n).then(function(t){var e=c(t);r.emit("purchase",e)}).catch(function(t){r.emit("purchasefail",t)}),this},getPurchases:function(){if(!this.paymentsReady)return this;var t=this,e=this.purchases;return FBInstant.payments.getPurchasesAsync().then(function(n){e=[],n.forEach(function(t){e.push(c(t))}),t.emit("getpurchases",e)}).catch(function(e){t.emit("getpurchasesfail",e)}),this},consumePurchase:function(t){if(!this.paymentsReady)return this;var e=this;return FBInstant.payments.consumePurchaseAsync(t).then(function(){e.emit("consumepurchase",t)}).catch(function(t){e.emit("consumepurchasefail",t)}),this},update:function(t,e,n,r,i,o){return this._update("CUSTOM",t,e,n,r,i,o)},updateLeaderboard:function(t,e,n,r,i,o){return this._update("LEADERBOARD",t,e,n,r,i,o)},_update:function(t,e,n,r,i,o,s){if(!this.checkAPI("shareAsync"))return this;if(void 0===e&&(e=""),"string"==typeof n&&(n={default:n}),void 0===s&&(s={}),r)var a=this.game.textures.getBase64(r,i);var u={action:t,cta:e,image:a,text:n,template:o,data:s,strategy:"IMMEDIATE",notification:"NO_PUSH"},c=this;return FBInstant.updateAsync(u).then(function(){c.emit("update")}).catch(function(t){c.emit("updatefail",t)}),this},switchGame:function(t,e){if(!this.checkAPI("switchGameAsync"))return this;if(e&&JSON.stringify(e).length>1e3)return console.warn("Switch Game data too long. Max 1000 chars."),this;var n=this;return FBInstant.switchGameAsync(t,e).then(function(){n.emit("switchgame",t)}).catch(function(t){n.emit("switchgamefail",t)}),this},createShortcut:function(){var t=this;return FBInstant.canCreateShortcutAsync().then(function(e){e&&FBInstant.createShortcutAsync().then(function(){t.emit("shortcutcreated")}).catch(function(e){t.emit("shortcutfailed",e)})}),this},quit:function(){FBInstant.quit()},log:function(t,e,n){return this.checkAPI("logEvent")?(void 0===n&&(n={}),t.length>=2&&t.length<=40&&FBInstant.logEvent(t,parseFloat(e),n),this):this},preloadAds:function(t){if(!this.checkAPI("getInterstitialAdAsync"))return this;var e;Array.isArray(t)||(t=[t]);var n=this,i=0;for(e=0;e<this.ads.length;e++)this.ads[e].shown||i++;if(i+t.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(e=0;e<t.length;e++){var o,s=t[e];FBInstant.getInterstitialAdAsync(s).then(function(t){return o=t,t.loadAsync()}).then(function(){var t=r(s,o,!1);n.ads.push(t),n.emit("adloaded",t)}).catch(function(t){"ADS_NO_FILL"===t.code?n.emit("adsnofill",s):"ADS_FREQUENT_LOAD"===t.code?n.emit("adsfrequentload",s):console.warn(t)})}return this},preloadVideoAds:function(t){if(!this.checkAPI("getRewardedVideoAsync"))return this;var e;Array.isArray(t)||(t=[t]);var n=this,i=0;for(e=0;e<this.ads.length;e++)this.ads[e].shown||i++;if(i+t.length>=3)return console.warn("Too many AdInstances. Show an ad before loading more"),this;for(e=0;e<t.length;e++){var o,s=t[e];FBInstant.getRewardedVideoAsync(s).then(function(t){return o=t,t.loadAsync()}).then(function(){var t=r(s,o,!0);n.ads.push(t),n.emit("adloaded",t)}).catch(function(t){"ADS_NO_FILL"===t.code?n.emit("adsnofill",s):"ADS_FREQUENT_LOAD"===t.code?n.emit("adsfrequentload",s):console.warn(t)})}return this},showAd:function(t){for(var e=this,n=0;n<this.ads.length;n++){var r=this.ads[n];r.placementID===t&&r.instance.showAsync().then(function(){r.shown=!0,e.emit("adfinished",r)}).catch(function(t){"ADS_NOT_LOADED"===t.code?e.emit("adsnotloaded",r):"RATE_LIMITED"===t.code&&e.emit("adratelimited",r),e.emit("adshowerror",t,r)})}return this},showVideo:function(t){for(var e=this,n=0;n<this.ads.length;n++){var r=this.ads[n];r.placementID===t&&r.video&&r.instance.showAsync().then(function(){r.shown=!0,e.emit("adfinished",r)}).catch(function(t){"ADS_NOT_LOADED"===t.code?e.emit("adsnotloaded",r):"RATE_LIMITED"===t.code&&e.emit("adratelimited",r),e.emit("adshowerror",t,r)})}return this},matchPlayer:function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),!this.checkAPI("matchPlayerAsync"))return this;var n=this;return FBInstant.matchPlayerAsync(t,e).then(function(){n.getID(),n.getType(),n.emit("matchplayer",n.contextID,n.contextType)}),this},getLeaderboard:function(t){if(!this.checkAPI("getLeaderboardAsync"))return this;var e=this;return FBInstant.getLeaderboardAsync(t).then(function(n){var r=new a(e,n);e.leaderboards[t]=r,e.emit("getleaderboard",r)}).catch(function(t){console.warn(t)}),this},destroy:function(){FBInstant.quit(),this.data.destroy(),this.removeAllListeners(),this.catalog=[],this.purchases=[],this.leaderboards=[],this.ads=[],this.game=null}});t.exports=h},function(t,e){t.exports=function(t){for(var e=t.length,n=t[0].length,r=new Array(n),i=0;i<n;i++){r[i]=new Array(e);for(var o=e-1;o>-1;o--)r[i][o]=t[o][i]}return r}},function(t,e){function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t,e,o,s,a){for(void 0===o&&(o=0),void 0===s&&(s=t.length-1),void 0===a&&(a=r);s>o;){if(s-o>600){var u=s-o+1,c=e-o+1,h=Math.log(u),l=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*l*(u-l)/u)*(c-u/2<0?-1:1),d=Math.max(o,Math.floor(e-c*l/u+f)),p=Math.min(s,Math.floor(e+(u-c)*l/u+f));i(t,e,d,p,a)}var m=t[e],v=o,g=s;for(n(t,o,e),a(t[s],m)>0&&n(t,o,s);v<g;){for(n(t,v,g),v++,g--;a(t[v],m)<0;)v++;for(;a(t[g],m)>0;)g--}0===a(t[o],m)?n(t,o,g):n(t,++g,s),g<=e&&(o=g+1),e<=g&&(s=g-1)}};t.exports=i},function(t,e,n){var r=n(14),i=n(211),o=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=0;o<e.length;o++)for(var s=0;s<n;s++)r.push({a:t[i],b:e[o]});return r};t.exports=function(t,e,n){var s=r(n,"max",0),a=r(n,"qty",1),u=r(n,"random",!1),c=r(n,"randomB",!1),h=r(n,"repeat",0),l=r(n,"yoyo",!1),f=[];if(c&&i(e),-1===h)if(0===s)h=0;else{var d=t.length*e.length*a;l&&(d*=2),h=Math.ceil(s/d)}for(var p=0;p<=h;p++){var m=o(t,e,a);u&&i(m),f=f.concat(m),l&&(m.reverse(),f=f.concat(m))}return s&&f.splice(s),f}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=Math.min(t.x,e.x),o=Math.min(t.y,e.y),s=Math.max(t.right,e.right)-i,a=Math.max(t.bottom,e.bottom)-o;return n.setTo(i,o,s,a)}},function(t,e,n){var r=n(0),i=n(23),o=n(1210),s=n(24),a=n(16),u=n(305),c=n(218),h=new r({Extends:s,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Origin,i.ScrollFactor,i.Transform,i.Visible,o],initialize:function(t,e,n,r,i,o){s.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,n),"string"==typeof r?"#"===r[0]?this.setElement(r.substr(1),i,o):this.createElement(r,i,o):r&&this.setElement(r,i,o)},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,n){return this.setElement(document.createElement(t),e,n)},setElement:function(t,e,n){var r;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),r=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(r=t),!r)return this;if(this.node=r,e&&a(e))for(var i in e)r.style[i]=e[i];else"string"==typeof e&&(r.style=e);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),n&&(r.innerText=n),this.updateSize()},createFromCache:function(t,e){var n=this.cache.get(t);return n&&this.createFromHTML(n,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var n=document.createElement(e);return this.node=n,n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",n.phaser=this,this.parent&&this.parent.appendChild(n),n.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(u(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var n=this.node.querySelectorAll("*"),r=0;r<n.length;r++)if(n[r][t]===e)return n[r];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement()}});t.exports=h},function(t,e,n){var r=n(1211),i=n(24);t.exports=function(t,e,n,o,s){var a=e.node,u=a.style;if(!a||!u||i.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&o.id||e.parentContainer&&!e.parentContainer.willRender())a&&(u.display="none");else{var c=e.parentContainer,h=o.alpha*e.alpha;c&&(h*=c.alpha);var l=t._tempMatrix1,f=t._tempMatrix2,d=t._tempMatrix3,p=0,m=0,v="0%",g="0%";s?(p=e.width*e.scaleX*e.originX,m=e.height*e.scaleY*e.originY,f.applyITRS(e.x-p,e.y-m,e.rotation,e.scaleX,e.scaleY),l.copyFrom(o.matrix),l.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),f.e=e.x-p,f.f=e.y-m,l.multiply(f,d)):(p=e.width*e.originX,m=e.height*e.originY,f.applyITRS(e.x-p,e.y-m,e.rotation,e.scaleX,e.scaleY),l.copyFrom(o.matrix),v=100*e.originX+"%",g=100*e.originY+"%",f.e-=o.scrollX*e.scrollFactorX,f.f-=o.scrollY*e.scrollFactorY,l.multiply(f,d)),e.transformOnly||(u.display="block",u.opacity=h,u.zIndex=e._depth,u.pointerEvents="auto",u.mixBlendMode=r[e._blendMode]),u.transform=d.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",u.transformOrigin=v+" "+g}}},function(t,e,n){var r=n(0),i=n(23),o=n(24),s=n(1215),a=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.Origin,i.ScrollFactor,i.Size,i.Texture,i.Tint,i.Transform,i.Visible,s],initialize:function(t){o.call(this,t,"Extern")},preUpdate:function(){},render:function(){}});t.exports=a},function(t,e,n){var r=n(319),i=n(172),o=n(41),s=n(12);t.exports=function(t,e,n){void 0===n&&(n=new s);var a=i(e,0,o.PI2);return r(t,a,n)}},function(t,e,n){var r=n(554),i=n(319),o=n(172),s=n(41);t.exports=function(t,e,n,a){void 0===a&&(a=[]),e||(e=r(t)/n);for(var u=0;u<e;u++){var c=o(u/e,0,s.PI2);a.push(i(t,c))}return a}},function(t,e){t.exports=function(t){var e=t.width/2,n=t.height/2,r=Math.pow(e-n,2)/Math.pow(e+n,2);return Math.PI*(e+n)*(1+3*r/(10+Math.sqrt(4-3*r)))}},function(t,e,n){var r=n(318),i=n(52);t.exports=function(t,e,n,o,s,a,u){var c=e.commandBuffer,h=c.length,l=a||t.currentContext;if(0!==h&&i(t,l,e,o,s)){var f=1,d=1,p=0,m=0,v=1,g=0,y=0,b=0;l.beginPath();for(var x=0;x<h;++x)switch(c[x]){case r.ARC:l.arc(c[x+1],c[x+2],c[x+3],c[x+4],c[x+5],c[x+6]),x+=7;break;case r.LINE_STYLE:v=c[x+1],p=c[x+2],f=c[x+3],g=(16711680&p)>>>16,y=(65280&p)>>>8,b=255&p,l.strokeStyle="rgba("+g+","+y+","+b+","+f+")",l.lineWidth=v,x+=3;break;case r.FILL_STYLE:m=c[x+1],d=c[x+2],g=(16711680&m)>>>16,y=(65280&m)>>>8,b=255&m,l.fillStyle="rgba("+g+","+y+","+b+","+d+")",x+=2;break;case r.BEGIN_PATH:l.beginPath();break;case r.CLOSE_PATH:l.closePath();break;case r.FILL_PATH:u||l.fill();break;case r.STROKE_PATH:u||l.stroke();break;case r.FILL_RECT:u?l.rect(c[x+1],c[x+2],c[x+3],c[x+4]):l.fillRect(c[x+1],c[x+2],c[x+3],c[x+4]),x+=4;break;case r.FILL_TRIANGLE:l.beginPath(),l.moveTo(c[x+1],c[x+2]),l.lineTo(c[x+3],c[x+4]),l.lineTo(c[x+5],c[x+6]),l.closePath(),u||l.fill(),x+=6;break;case r.STROKE_TRIANGLE:l.beginPath(),l.moveTo(c[x+1],c[x+2]),l.lineTo(c[x+3],c[x+4]),l.lineTo(c[x+5],c[x+6]),l.closePath(),u||l.stroke(),x+=6;break;case r.LINE_TO:l.lineTo(c[x+1],c[x+2]),x+=2;break;case r.MOVE_TO:l.moveTo(c[x+1],c[x+2]),x+=2;break;case r.LINE_FX_TO:l.lineTo(c[x+1],c[x+2]),x+=5;break;case r.MOVE_FX_TO:l.moveTo(c[x+1],c[x+2]),x+=5;break;case r.SAVE:l.save();break;case r.RESTORE:l.restore();break;case r.TRANSLATE:l.translate(c[x+1],c[x+2]),x+=2;break;case r.SCALE:l.scale(c[x+1],c[x+2]),x+=2;break;case r.ROTATE:l.rotate(c[x+1]),x+=1;break;case r.GRADIENT_FILL_STYLE:x+=5;break;case r.GRADIENT_LINE_STYLE:x+=6;break;case r.SET_TEXTURE:x+=2}l.restore()}}},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(t,e,n,r,o){if("object"==typeof t){var s=t;t=i(s,"x",0),e=i(s,"y",0),n=i(s,"power",0),r=i(s,"epsilon",100),o=i(s,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=100),void 0===o&&(o=50);this.x=t,this.y=e,this.active=!0,this._gravity=o,this._power=0,this._epsilon=0,this.power=n,this.epsilon=r},update:function(t,e){var n=this.x-t.x,r=this.y-t.y,i=n*n+r*r;if(0!==i){var o=Math.sqrt(i);i<this._epsilon&&(i=this._epsilon);var s=this._power*e/(i*o)*100;t.velocityX+=n*s,t.velocityY+=r*s}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=o},function(t,e,n){var r=n(0),i=n(80),o=n(112),s=new r({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),void 0===t?(n.follow&&(this.x+=n.follow.x+n.followOffset.x),this.x+=n.x.onEmit(this,"x")):this.x+=t,void 0===e?(n.follow&&(this.y+=n.follow.y+n.followOffset.y),this.y+=n.y.onEmit(this,"y")):this.y+=e,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=n.speedX.onEmit(this,"speedX"),s=n.speedY?n.speedY.onEmit(this,"speedY"):r;if(n.radial){var a=i(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(a)*Math.abs(r),this.velocityY=Math.sin(a)*Math.abs(s)}else if(n.moveTo){var u=n.moveToX.onEmit(this,"moveToX"),c=n.moveToY?n.moveToY.onEmit(this,"moveToY"):u,h=Math.atan2(c-this.y,u-this.x),l=o(this.x,this.y,u,c)/(this.life/1e3);this.velocityX=Math.cos(h)*l,this.velocityY=Math.sin(h)*l}else this.velocityX=r,this.velocityY=s;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=i(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(t,e,n,r){var i=this.velocityX,o=this.velocityY,s=this.accelerationX,a=this.accelerationY,u=this.maxVelocityX,c=this.maxVelocityY;i+=t.gravityX*n,o+=t.gravityY*n,s&&(i+=s*n),a&&(o+=a*n),i>u?i=u:i<-u&&(i=-u),o>c?o=c:o<-c&&(o=-c),this.velocityX=i,this.velocityY=o;for(var h=0;h<r.length;h++)r[h].update(this,e,n)},checkBounds:function(t){var e=t.bounds,n=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=n):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=n),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=n):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=n)},update:function(t,e,n){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var r=this.emitter,o=1-this.lifeCurrent/this.life;return this.lifeT=o,this.computeVelocity(r,t,e,n),this.x+=this.velocityX*e,this.y+=this.velocityY*e,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",o,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",o,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",o,this.angle),this.rotation=i(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",o,this.alpha),this.tint=r.tint.onUpdate(this,"tint",o,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=s},function(t,e,n){var r=n(86),i=n(0),o=n(23),s=n(559),a=n(560),u=n(1227),c=n(1),h=n(311),l=n(561),f=n(153),d=n(557),p=n(562),m=n(22),v=n(228),g=n(8),y=n(111),b=new i({Mixins:[o.BlendMode,o.Mask,o.ScrollFactor,o.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=d,this.x=new u(e,"x",0,!0),this.y=new u(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new u(e,"accelerationX",0,!0),this.accelerationY=new u(e,"accelerationY",0,!0),this.maxVelocityX=new u(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new u(e,"maxVelocityY",1e4,!0),this.speedX=new u(e,"speedX",0,!0),this.speedY=new u(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new u(e,"moveToX",0,!0),this.moveToY=new u(e,"moveToY",0,!0),this.bounce=new u(e,"bounce",0,!0),this.scaleX=new u(e,"scaleX",1),this.scaleY=new u(e,"scaleY",1),this.tint=new u(e,"tint",4294967295),this.alpha=new u(e,"alpha",1),this.lifespan=new u(e,"lifespan",1e3,!0),this.angle=new u(e,"angle",{min:0,max:360},!0),this.rotate=new u(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new u(e,"quantity",1,!0),this.delay=new u(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=r.NORMAL,this.follow=null,this.followOffset=new g,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,n="";for(e=0;e<this.configFastMap.length;e++)n=this.configFastMap[e],f(t,n)&&(this[n]=c(t,n));for(e=0;e<this.configOpMap.length;e++)n=this.configOpMap[e],f(t,n)&&this[n].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,f(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(l(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),f(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),f(t,"callbackScope")){var r=c(t,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return f(t,"emitZone")&&this.setEmitZone(t.emitZone),f(t,"deathZone")&&this.setDeathZone(t.deathZone),f(t,"bounds")&&this.setBounds(t.bounds),f(t,"followOffset")&&this.followOffset.setFromObject(c(t,"followOffset",0)),f(t,"frame")&&this.setFrame(t.frame),this},toJSON:function(t){void 0===t&&(t={});var e=0,n="";for(e=0;e<this.configFastMap.length;e++)t[n=this.configFastMap[e]]=this[n];for(e=0;e<this.configOpMap.length;e++)this[n=this.configOpMap[e]]&&(t[n]=this[n].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,n,r){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=!1),this.follow=t,this.followOffset.set(e,n),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return h(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=1),this.randomFrame=e,this.frameQuantity=n,this.currentFrame=0,this._frameCounter=0;var r=typeof t;if(Array.isArray(t)||"string"===r||"number"===r)this.manager.setEmitterFrames(t,this);else if("object"===r){var i=t;(t=c(i,"frames",null))&&this.manager.setEmitterFrames(t,this);var o=c(i,"cycle",!1);this.randomFrame=!o,this.frameQuantity=c(i,"quantity",n)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,n,r){if("object"==typeof t){var i=t;t=i.x,e=i.y,n=f(i,"w")?i.w:i.width,r=f(i,"h")?i.h:i.height}return this.bounds?this.bounds.setTo(t,e,n,r):this.bounds=new m(t,e,n,r),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=c(t,"type","random"),n=c(t,"source",null);switch(e){case"random":this.emitZone=new p(n);break;case"edge":var r=c(t,"quantity",1),i=c(t,"stepRate",0),o=c(t,"yoyo",!1),s=c(t,"seamless",!0);this.emitZone=new a(n,r,i,o,s)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=c(t,"type","onEnter"),n=c(t,"source",null);if(n&&"function"==typeof n.contains){var r="onEnter"===e;this.deathZone=new s(n,r)}}return this},reserve:function(t){for(var e=this.dead,n=0;n<t;n++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var n=this.alive,r=n.length,i=0;i<r;++i)t.call(e,n[i],this);return this},forEachDead:function(t,e){for(var n=this.dead,r=n.length,i=0;i<r;++i)t.call(e,n[i],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},depthSort:function(){return v.inplace(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,n){return this.frequency=-1,this.emitParticle(t,e,n)},emitParticleAt:function(t,e,n){return this.emitParticle(n,t,e)},emitParticle:function(t,e,n){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var r=this.dead,i=0;i<t;i++){var o=r.pop();if(o||(o=new this.particleClass(this)),o.fire(e,n),this.particleBringToTop?this.alive.push(o):this.alive.unshift(o),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,o,this),this.atLimit())break}return o}},preUpdate:function(t,e){var n=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),i=this.alive,o=this.dead,s=0,a=[],u=i.length;for(s=0;s<u;s++){var c=i[s];c.update(e,n,r)&&a.push({index:s,particle:c})}if((u=a.length)>0){var h=this.deathCallback,l=this.deathCallbackScope;for(s=u-1;s>=0;s--){var f=a[s];i.splice(f.index,1),o.push(f.particle),h&&h.call(l,f.particle),f.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=b},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=r},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=n,this.yoyo=r,this.counter=-1,this.seamless=i,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var n=this._length;return this._length=this.points.length,this._length<n&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=r},function(t,e){t.exports=function(t,e){for(var n=0;n<e.length;n++)if(t.hasOwnProperty(e[n]))return!0;return!1}},function(t,e,n){var r=n(0),i=n(8),o=new r({initialize:function(t){this.source=t,this._tempVec=new i},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=o},function(t,e,n){var r=n(0),i=n(23),o=n(99),s=new r({Extends:o,Mixins:[i.PathFollower],initialize:function(t,e,n,r,i,s){o.call(this,t,n,r,i,s),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=s},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},function(t,e,n){var r=n(1247),i=n(0),o=n(80),s=n(123),a=n(146),u=n(41),c=n(65),h=new i({Extends:c,Mixins:[r],initialize:function(t,e,n,r,i,o,s,u,h){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===i&&(i=0),void 0===o&&(o=360),void 0===s&&(s=!1),c.call(this,t,"Arc",new a(0,0,r)),this._startAngle=i,this._endAngle=o,this._anticlockwise=s,this._iterations=.01,this.setPosition(e,n);var l=2*this.geom.radius;this.setSize(l,l),void 0!==u&&this.setFillStyle(u,h),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t,this.setSize(t,t),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,n=this.geom.radius,r=o(this._startAngle),i=o(this._endAngle),a=n/2,c=n/2;i-=r,this._anticlockwise?i<-u.PI2?i=-u.PI2:i>0&&(i=-u.PI2+i%u.PI2):i>u.PI2?i=u.PI2:i<0&&(i=u.PI2+i%u.PI2);for(var h,l=[a+Math.cos(r)*n,c+Math.sin(r)*n];e<1;)h=i*e+r,l.push(a+Math.cos(h)*n,c+Math.sin(h)*n),e+=t;return h=i+r,l.push(a+Math.cos(h)*n,c+Math.sin(h)*n),l.push(a+Math.cos(r)*n,c+Math.sin(r)*n),this.pathIndexes=s(l),this.pathData=l,this}});t.exports=h},function(t,e,n){var r=n(0),i=n(1250),o=n(123),s=n(22),a=n(65),u=new r({Extends:a,Mixins:[i],initialize:function(t,e,n,r,i,o){void 0===e&&(e=0),void 0===n&&(n=0),a.call(this,t,"Curve",r),this._smoothness=32,this._curveBounds=new s,this.closePath=!1,this.setPosition(e,n),void 0!==i&&this.setFillStyle(i,o),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var n=[],r=this.geom.getPoints(e),i=0;i<r.length;i++)n.push(r[i].x,r[i].y);return n.push(r[0].x,r[0].y),this.pathIndexes=o(n),this.pathData=n,this}});t.exports=u},function(t,e,n){var r=n(0),i=n(123),o=n(1253),s=n(179),a=n(65),u=new r({Extends:a,Mixins:[o],initialize:function(t,e,n,r,i,o,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===i&&(i=128),a.call(this,t,"Ellipse",new s(r/2,i/2,r,i)),this._smoothness=64,this.setPosition(e,n),this.width=r,this.height=i,void 0!==o&&this.setFillStyle(o,u),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t.push(e[0].x,e[0].y),this.pathIndexes=i(t),this.pathData=t,this}});t.exports=u},function(t,e,n){var r=n(0),i=n(65),o=n(1256),s=new r({Extends:i,Mixins:[o],initialize:function(t,e,n,r,o,s,a,u,c,h,l){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===o&&(o=128),void 0===s&&(s=32),void 0===a&&(a=32),i.call(this,t,"Grid",null),this.cellWidth=s,this.cellHeight=a,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,n),this.setSize(r,o),void 0!==u&&this.setFillStyle(u,c),void 0!==h&&this.setOutlineStyle(h,l),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=s},function(t,e,n){var r=n(1259),i=n(0),o=n(65),s=new i({Extends:o,Mixins:[r],initialize:function(t,e,n,r,i,s,a,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=48),void 0===i&&(i=32),void 0===s&&(s=15658734),void 0===a&&(a=10066329),void 0===u&&(u=13421772),o.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=s,this.fillLeft=a,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,n),this.setSize(r,i),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=e,this.showRight=n,this},setFillStyle:function(t,e,n){return this.fillTop=t,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});t.exports=s},function(t,e,n){var r=n(0),i=n(1262),o=n(65),s=new r({Extends:o,Mixins:[i],initialize:function(t,e,n,r,i,s,a,u,c){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=48),void 0===i&&(i=32),void 0===s&&(s=!1),void 0===a&&(a=15658734),void 0===u&&(u=10066329),void 0===c&&(c=13421772),o.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=a,this.fillLeft=u,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=s,this.isFilled=!0,this.setPosition(e,n),this.setSize(r,i),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=e,this.showRight=n,this},setFillStyle:function(t,e,n){return this.fillTop=t,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});t.exports=s},function(t,e,n){var r=n(0),i=n(65),o=n(109),s=n(1265),a=new r({Extends:i,Mixins:[s],initialize:function(t,e,n,r,s,a,u,c,h){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=128),void 0===u&&(u=0),i.call(this,t,"Line",new o(r,s,a,u));var l=this.geom.right-this.geom.left,f=this.geom.bottom-this.geom.top;this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,n),this.setSize(l,f),void 0!==c&&this.setStrokeStyle(1,c,h),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,n,r){return this.geom.setTo(t,e,n,r),this}});t.exports=a},function(t,e,n){var r=n(1268),i=n(0),o=n(123),s=n(573),a=n(324),u=n(65),c=n(576),h=new i({Extends:u,Mixins:[r],initialize:function(t,e,n,r,i,o){void 0===e&&(e=0),void 0===n&&(n=0),u.call(this,t,"Polygon",new a(r));var c=s(this.geom);this.setPosition(e,n),this.setSize(c.width,c.height),void 0!==i&&this.setFillStyle(i,o),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)c(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t.push(e[0].x,e[0].y),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=h},function(t,e,n){var r=n(22);t.exports=function(t,e){void 0===e&&(e=new r);for(var n,i=1/0,o=1/0,s=-i,a=-o,u=0;u<t.points.length;u++)n=t.points[u],i=Math.min(i,n.x),o=Math.min(o,n.y),s=Math.max(s,n.x),a=Math.max(a,n.y);return e.x=i,e.y=o,e.width=s-i,e.height=a-o,e}},function(t,e,n){var r=n(110),i=n(109),o=n(575);t.exports=function(t,e,n,s){void 0===s&&(s=[]);var a=t.points,u=o(t);e||(e=u/n);for(var c=0;c<e;c++)for(var h=u*(c/e),l=0,f=0;f<a.length;f++){var d=a[f],p=a[(f+1)%a.length],m=new i(d.x,d.y,p.x,p.y),v=r(m);if(!(h<l||h>l+v)){var g=m.getPoint((h-l)/v);s.push(g);break}l+=v}return s}},function(t,e,n){var r=n(110),i=n(109);t.exports=function(t){for(var e=t.points,n=0,o=0;o<e.length;o++){var s=e[o],a=e[(o+1)%e.length],u=new i(s.x,s.y,a.x,a.y);n+=r(u)}return n}},function(t,e){var n=function(t,e){return t[0]=e[0],t[1]=e[1],t};t.exports=function(t){var e,r=[],i=t.points;for(e=0;e<i.length;e++)r.push([i[e].x,i[e].y]);var o=[];for(r.length>0&&o.push(n([0,0],r[0])),e=0;e<r.length-1;e++){var s=r[e],a=r[e+1],u=s[0],c=s[1],h=a[0],l=a[1];o.push([.85*u+.15*h,.85*c+.15*l]),o.push([.15*u+.85*h,.15*c+.85*l])}return r.length>1&&o.push(n([0,0],r[r.length-1])),t.setTo(o)}},function(t,e,n){var r=n(0),i=n(22),o=n(65),s=n(1271),a=new r({Extends:o,Mixins:[s],initialize:function(t,e,n,r,s,a,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===s&&(s=128),o.call(this,t,"Rectangle",new i(0,0,r,s)),this.setPosition(e,n),this.setSize(r,s),void 0!==a&&this.setFillStyle(a,u),this.updateDisplayOrigin(),this.updateData()},updateData:function(){var t=[],e=this.geom,n=this._tempLine;return e.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),e.getLineB(n),t.push(n.x2,n.y2),e.getLineC(n),t.push(n.x2,n.y2),e.getLineD(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=a},function(t,e,n){var r=n(1274),i=n(0),o=n(123),s=n(65),a=new i({Extends:s,Mixins:[r],initialize:function(t,e,n,r,i,o,a,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=5),void 0===i&&(i=32),void 0===o&&(o=64),s.call(this,t,"Star",null),this._points=r,this._innerRadius=i,this._outerRadius=o,this.setPosition(e,n),this.setSize(2*o,2*o),void 0!==a&&this.setFillStyle(a,u),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,n=this._innerRadius,r=this._outerRadius,i=Math.PI/2*3,s=Math.PI/e,a=r,u=r;t.push(a,u+-r);for(var c=0;c<e;c++)t.push(a+Math.cos(i)*r,u+Math.sin(i)*r),i+=s,t.push(a+Math.cos(i)*n,u+Math.sin(i)*n),i+=s;return t.push(a,u+-r),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=a},function(t,e,n){var r=n(0),i=n(65),o=n(129),s=n(1277),a=new r({Extends:i,Mixins:[s],initialize:function(t,e,n,r,s,a,u,c,h,l,f){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=128),void 0===a&&(a=64),void 0===u&&(u=0),void 0===c&&(c=128),void 0===h&&(h=128),i.call(this,t,"Triangle",new o(r,s,a,u,c,h));var d=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,n),this.setSize(d,p),void 0!==l&&this.setFillStyle(l,f),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,n,r,i,o){return this.geom.setTo(t,e,n,r,i,o),this.updateData()},updateData:function(){var t=[],e=this.geom,n=this._tempLine;return e.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),e.getLineB(n),t.push(n.x2,n.y2),e.getLineC(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=a},function(t,e,n){var r=n(12),i=n(110);t.exports=function(t,e,n){void 0===n&&(n=new r);var o=t.getLineA(),s=t.getLineB(),a=t.getLineC();if(e<=0||e>=1)return n.x=o.x1,n.y=o.y1,n;var u=i(o),c=i(s),h=i(a),l=(u+c+h)*e,f=0;return l<u?(f=l/u,n.x=o.x1+(o.x2-o.x1)*f,n.y=o.y1+(o.y2-o.y1)*f):l>u+c?(f=(l-=u+c)/h,n.x=a.x1+(a.x2-a.x1)*f,n.y=a.y1+(a.y2-a.y1)*f):(f=(l-=u)/c,n.x=s.x1+(s.x2-s.x1)*f,n.y=s.y1+(s.y2-s.y1)*f),n}},function(t,e,n){var r=n(110),i=n(12);t.exports=function(t,e,n,o){void 0===o&&(o=[]);var s=t.getLineA(),a=t.getLineB(),u=t.getLineC(),c=r(s),h=r(a),l=r(u),f=c+h+l;e||(e=f/n);for(var d=0;d<e;d++){var p=f*(d/e),m=0,v=new i;p<c?(m=p/c,v.x=s.x1+(s.x2-s.x1)*m,v.y=s.y1+(s.y2-s.y1)*m):p>c+h?(m=(p-=c+h)/l,v.x=u.x1+(u.x2-u.x1)*m,v.y=u.y1+(u.y2-u.y1)*m):(m=(p-=c)/h,v.x=a.x1+(a.x2-a.x1)*m,v.y=a.y1+(a.y2-a.y1)*m),o.push(v)}return o}},function(t,e){t.exports=function(t,e,n){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=n,!0;if(-1!==e.indexOf(".")){for(var r=e.split("."),i=t,o=t,s=0;s<r.length;s++){if(!i.hasOwnProperty(r[s]))return!1;o=i,i=i[r[s]]}return o[r[r.length-1]]=n,!0}return!1}},function(t,e,n){var r=n(0),i=n(21),o=new r({initialize:function(t,e,n,r,i,o,s){this.x=t,this.y=e,this.radius=n,this.r=r,this.g=i,this.b=o,this.intensity=s,this.scrollFactorX=1,this.scrollFactorY=1},set:function(t,e,n,r,i,o,s){return this.x=t,this.y=e,this.radius=n,this.r=r,this.g=i,this.b=o,this.intensity=s,this.scrollFactorX=1,this.scrollFactorY=1,this},setScrollFactor:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this},setColor:function(t){var e=i.getFloatsFromUintRGB(t);return this.r=e[0],this.g=e[1],this.b=e[2],this},setIntensity:function(t){return this.intensity=t,this},setPosition:function(t,e){return this.x=t,this.y=e,this},setRadius:function(t){return this.radius=t,this}});t.exports=o},function(t,e,n){var r=n(0),i=n(583),o=n(21),s=new r({initialize:function(){this.lightPool=[],this.lights=[],this.culledLights=[],this.ambientColor={r:.1,g:.1,b:.1},this.active=!1,this.maxLights=-1},enable:function(){return-1===this.maxLights&&(this.maxLights=this.scene.sys.game.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},cull:function(t){var e=this.lights,n=this.culledLights,r=e.length,i=t.x+t.width/2,o=t.y+t.height/2,s=(t.width+t.height)/2,a={x:0,y:0},u=t.matrix,c=this.systems.game.config.height;n.length=0;for(var h=0;h<r&&n.length<this.maxLights;h++){var l=e[h];u.transformPoint(l.x,l.y,a);var f=i-(a.x-t.scrollX*l.scrollFactorX*t.zoom),d=o-(c-(a.y-t.scrollY*l.scrollFactorY*t.zoom));Math.sqrt(f*f+d*d)<l.radius+s&&n.push(e[h])}return n},forEachLight:function(t){if(t){for(var e=this.lights,n=e.length,r=0;r<n;++r)t(e[r]);return this}},setAmbientColor:function(t){var e=o.getFloatsFromUintRGB(t);return this.ambientColor.r=e[0],this.ambientColor.g=e[1],this.ambientColor.b=e[2],this},getMaxVisibleLights:function(){return 10},getLightCount:function(){return this.lights.length},addLight:function(t,e,n,r,s){var a,u=null;return t=void 0===t?0:t,e=void 0===e?0:e,r=void 0===r?16777215:r,n=void 0===n?100:n,s=void 0===s?1:s,a=o.getFloatsFromUintRGB(r),u=null,this.lightPool.length>0?(u=this.lightPool.pop()).set(t,e,n,a[0],a[1],a[2],s):u=new i(t,e,n,a[0],a[1],a[2],s),this.lights.push(u),u},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&(this.lightPool.push(t),this.lights.splice(e,1)),this},shutdown:function(){for(;this.lights.length>0;)this.lightPool.push(this.lights.pop());this.ambientColor={r:.1,g:.1,b:.1},this.culledLights.length=0,this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=s},function(t,e,n){t.exports={Circle:n(1333),Ellipse:n(1343),Intersects:n(586),Line:n(1362),Point:n(1383),Polygon:n(1397),Rectangle:n(601),Triangle:n(1427)}},function(t,e,n){t.exports={CircleToCircle:n(587),CircleToRectangle:n(588),GetCircleToCircle:n(1353),GetCircleToRectangle:n(1354),GetLineToCircle:n(328),GetLineToRectangle:n(330),GetRectangleIntersection:n(1355),GetRectangleToRectangle:n(1356),GetRectangleToTriangle:n(1357),GetTriangleToCircle:n(1358),GetTriangleToLine:n(593),GetTriangleToTriangle:n(1359),LineToCircle:n(329),LineToLine:n(155),LineToRectangle:n(589),PointToLine:n(597),PointToLineSegment:n(1360),RectangleToRectangle:n(231),RectangleToTriangle:n(590),RectangleToValues:n(1361),TriangleToCircle:n(592),TriangleToLine:n(594),TriangleToTriangle:n(595)}},function(t,e,n){var r=n(112);t.exports=function(t,e){return r(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e){t.exports=function(t,e){var n=e.width/2,r=e.height/2,i=Math.abs(t.x-e.x-n),o=Math.abs(t.y-e.y-r),s=n+t.radius,a=r+t.radius;if(i>s||o>a)return!1;if(i<=n||o<=r)return!0;var u=i-n,c=o-r;return u*u+c*c<=t.radius*t.radius}},function(t,e){t.exports=function(t,e){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,s=e.x,a=e.y,u=e.right,c=e.bottom,h=0;if(n>=s&&n<=u&&r>=a&&r<=c||i>=s&&i<=u&&o>=a&&o<=c)return!0;if(n<s&&i>=s){if((h=r+(o-r)*(s-n)/(i-n))>a&&h<=c)return!0}else if(n>u&&i<=u&&(h=r+(o-r)*(u-n)/(i-n))>=a&&h<=c)return!0;if(r<a&&o>=a){if((h=n+(i-n)*(a-r)/(o-r))>=s&&h<=u)return!0}else if(r>c&&o<=c&&(h=n+(i-n)*(c-r)/(o-r))>=s&&h<=u)return!0;return!1}},function(t,e,n){var r=n(155),i=n(96),o=n(331),s=n(591);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var n=e.getLineA(),a=e.getLineB(),u=e.getLineC();if(i(t,n.x1,n.y1)||i(t,n.x2,n.y2))return!0;if(i(t,a.x1,a.y1)||i(t,a.x2,a.y2))return!0;if(i(t,u.x1,u.y1)||i(t,u.x2,u.y2))return!0;var c=t.getLineA(),h=t.getLineB(),l=t.getLineC(),f=t.getLineD();if(r(n,c)||r(n,h)||r(n,l)||r(n,f))return!0;if(r(a,c)||r(a,h)||r(a,l)||r(a,f))return!0;if(r(u,c)||r(u,h)||r(u,l)||r(u,f))return!0;var d=s(t);return o(e,d,!0).length>0}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,n){var r=n(329),i=n(154);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!i(t,e.x,e.y)&&!r(t.getLineA(),e)&&!r(t.getLineB(),e)&&!r(t.getLineC(),e))}},function(t,e,n){var r=n(12),i=n(594),o=n(155);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e))for(var s=t.getLineA(),a=t.getLineB(),u=t.getLineC(),c=[new r,new r,new r],h=[o(s,e,c[0]),o(a,e,c[1]),o(u,e,c[2])],l=0;l<3;l++)h[l]&&n.push(c[l]);return n}},function(t,e,n){var r=n(154),i=n(155);t.exports=function(t,e){return!!(r(t,e.getPointA())||r(t,e.getPointB())||i(t.getLineA(),e)||i(t.getLineB(),e)||i(t.getLineC(),e))}},function(t,e,n){var r=n(331),i=n(596),o=n(155);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var n=t.getLineA(),s=t.getLineB(),a=t.getLineC(),u=e.getLineA(),c=e.getLineB(),h=e.getLineC();if(o(n,u)||o(n,c)||o(n,h))return!0;if(o(s,u)||o(s,c)||o(s,h))return!0;if(o(a,u)||o(a,c)||o(a,h))return!0;var l=i(t),f=r(e,l,!0);return f.length>0||(l=i(e),(f=r(t,l,!0)).length>0)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,n){void 0===n&&(n=1);var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=t.x,u=t.y,c=(o-r)*(o-r)+(s-i)*(s-i);if(0===c)return!1;var h=((a-r)*(o-r)+(u-i)*(s-i))/c;if(h<0)return Math.sqrt((r-a)*(r-a)+(i-u)*(i-u))<=n;if(h>=0&&h<=1){var l=((i-u)*(o-r)-(r-a)*(s-i))/c;return Math.abs(l)*Math.sqrt(c)<=n}return Math.sqrt((o-a)*(o-a)+(s-u)*(s-u))<=n}},function(t,e,n){var r=n(41),i=n(111),o=n(156);t.exports=function(t){var e=o(t)-r.TAU;return i(e,-Math.PI,Math.PI)}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,n){var r=n(22);r.Area=n(1402),r.Ceil=n(1403),r.CeilAll=n(1404),r.CenterOn=n(291),r.Clone=n(1405),r.Contains=n(96),r.ContainsPoint=n(1406),r.ContainsRect=n(602),r.CopyFrom=n(1407),r.Decompose=n(591),r.Equals=n(1408),r.FitInside=n(1409),r.FitOutside=n(1410),r.Floor=n(1411),r.FloorAll=n(1412),r.FromPoints=n(303),r.GetAspectRatio=n(333),r.GetCenter=n(1413),r.GetPoint=n(275),r.GetPoints=n(424),r.GetSize=n(1414),r.Inflate=n(1415),r.Intersection=n(1416),r.MarchingAnts=n(435),r.MergePoints=n(1417),r.MergeRect=n(1418),r.MergeXY=n(1419),r.Offset=n(1420),r.OffsetPoint=n(1421),r.Overlaps=n(1422),r.Perimeter=n(208),r.PerimeterPoint=n(1423),r.Random=n(278),r.RandomOutside=n(1424),r.SameDimensions=n(1425),r.Scale=n(1426),r.Union=n(548),t.exports=r},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,n){var r=n(12);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,n){return t.x1+=e,t.y1+=n,t.x2+=e,t.y2+=n,t.x3+=e,t.y3+=n,t}},function(t,e,n){var r=n(12);function i(t,e,n,r){var i=t-n,o=e-r,s=i*i+o*o;return Math.sqrt(s)}t.exports=function(t,e){void 0===e&&(e=new r);var n=t.x1,o=t.y1,s=t.x2,a=t.y2,u=t.x3,c=t.y3,h=i(u,c,s,a),l=i(n,o,u,c),f=i(s,a,n,o),d=h+l+f;return e.x=(n*h+s*l+u*f)/d,e.y=(o*h+a*l+c*f)/d,e}},function(t,e){t.exports=function(t,e,n){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:n,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=r},function(t,e,n){var r=n(0),i=n(335),o=new r({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,n=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(i.BUTTON_DOWN,e,this,t),this.pad.emit(i.GAMEPAD_BUTTON_DOWN,n,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(i.BUTTON_UP,e,this,t),this.pad.emit(i.GAMEPAD_BUTTON_UP,n,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=o},function(t,e,n){var r=n(607),i=n(608),o=n(0),s=n(20),a=n(8),u=new o({Extends:s,initialize:function(t,e){s.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var n=[],o=0;o<e.buttons.length;o++)n.push(new i(this,o));this.buttons=n;var u=[];for(o=0;o<e.axes.length;o++)u.push(new r(this,o));this.axes=u,this.vibration=e.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=n[14]?n[14]:c,this._LCRight=n[15]?n[15]:c,this._LCTop=n[12]?n[12]:c,this._LCBottom=n[13]?n[13]:c,this._RCLeft=n[2]?n[2]:c,this._RCRight=n[1]?n[1]:c,this._RCTop=n[3]?n[3]:c,this._RCBottom=n[0]?n[0]:c,this._FBLeftTop=n[4]?n[4]:c,this._FBLeftBottom=n[6]?n[6]:c,this._FBRightTop=n[5]?n[5]:c,this._FBRightBottom=n[7]?n[7]:c;var h={value:0};this._HAxisLeft=u[0]?u[0]:h,this._VAxisLeft=u[1]?u[1]:h,this._HAxisRight=u[2]?u[2]:h,this._VAxisRight=u[3]?u[3]:h,this.leftStick=new a,this.rightStick=new a},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){var e,n=this.buttons,r=t.buttons,i=n.length;for(e=0;e<i;e++)n[e].update(r[e].value);var o=this.axes,s=t.axes;for(i=o.length,e=0;e<i;e++)o[e].update(s[e]);i>=2&&(this.leftStick.set(o[0].getValue(),o[1].getValue()),i>=4&&this.rightStick.set(o[2].getValue(),o[3].getValue()))},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=u},function(t,e,n){var r=n(0),i=n(20),o=n(233),s=new r({Extends:i,initialize:function(t,e){i.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(o.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(o.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(o.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=s},function(t,e,n){var r=n(0),i=n(233),o=n(1),s=n(1466),a=n(1468),u=new r({initialize:function(t,e,n){if(void 0===n&&(n={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var r=0;r<e.length;r++){var u=e[r];"string"==typeof u?this.keyCodes.push(u.toUpperCase().charCodeAt(0)):"number"==typeof u?this.keyCodes.push(u):u.hasOwnProperty("keyCode")&&this.keyCodes.push(u.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=o(n,"resetOnWrongKey",!0),this.maxKeyDelay=o(n,"maxKeyDelay",0),this.resetOnMatch=o(n,"resetOnMatch",!1),this.deleteOnMatch=o(n,"deleteOnMatch",!1);var c=this;this.onKeyDown=function(t){!c.matched&&c.enabled&&s(t,c)&&(c.manager.emit(i.COMBO_MATCH,c,t),c.resetOnMatch?a(c):c.deleteOnMatch&&c.destroy())},this.manager.on(i.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(i.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=u},function(t,e,n){var r=n(337);t.exports=function(t,e){var n=r(e,t.xhrSettings),i=new XMLHttpRequest;return i.open("GET",t.src,n.async,n.user,n.password),i.responseType=t.xhrSettings.responseType,i.timeout=n.timeout,n.header&&n.headerValue&&i.setRequestHeader(n.header,n.headerValue),n.requestedWith&&i.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),i.onload=t.onLoad.bind(t,i),i.onerror=t.onError.bind(t,i),i.onprogress=t.onProgress.bind(t),i.send(),i}},function(t,e,n){var r=n(0),i=n(58),o=n(38),s=n(17),a=n(1),u=n(614),c=n(16),h=new r({Extends:o,initialize:function(t,e,n,r,i){if(c(e)){var s=e;e=a(s,"key"),r=a(s,"xhrSettings"),i=a(s,"context",i)}var u={type:"audio",cache:t.cacheManager.audio,extension:n.type,responseType:"arraybuffer",key:e,url:n.url,xhrSettings:r,config:{context:i}};o.call(this,t,u)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(e){t.data=e,t.onProcessComplete()},function(e){console.error("Error decoding audio: "+this.key+" - ",e?e.message:null),t.onProcessError()}),this.config.context=null}});h.create=function(t,e,n,r,i){var o=t.systems.game,s=o.config.audio,l=o.device.audio;c(e)&&(n=a(e,"url",[]),r=a(e,"config",{}));var f=h.getAudioURL(o,n);return f?!l.webAudio||s&&s.disableWebAudio?new u(t,e,f,r):new h(t,e,f,i,o.sound.context):null},h.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=a(e[n],"url",e[n]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return r;var i=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(i=a(e[n],"type",i?i[1]:"").toLowerCase(),t.device.audio[i])return{url:r,type:i}}return null},s.register("audio",function(t,e,n,r){var i,o=this.systems.game,s=o.config.audio,a=o.device.audio;if(s&&s.noAudio||!a.webAudio&&!a.audioData)return this;if(Array.isArray(t))for(var u=0;u<t.length;u++)(i=h.create(this,t[u]))&&this.addFile(i);else(i=h.create(this,t,e,n,r))&&this.addFile(i);return this}),t.exports=h},function(t,e,n){var r=n(0),i=n(150),o=n(38),s=n(1),a=n(336),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r){if(u(e)){var i=e;e=s(i,"key"),r=s(i,"config",r)}var a={type:"audio",cache:t.cacheManager.audio,extension:n.type,key:e,url:n.url,config:r};o.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(i.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var n=new Audio;n.dataset={},n.dataset.name=this.key+("0"+e).slice(-2),n.dataset.used="false",this.locked?n.dataset.locked="true":(n.dataset.locked="false",n.preload="auto",n.oncanplaythrough=this.onProgress.bind(this),n.onerror=this.onError.bind(this)),this.data.push(n)}for(e=0;e<this.data.length;e++)(n=this.data[e]).src=a(this,this.loader.baseURL),this.locked||n.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r){var i="js";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"script",cache:!1,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("script",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r){var i="txt";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"text",cache:t.cacheManager.text,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("text",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this}),t.exports=c},function(t,e,n){var r=n(618),i=n(235),o=n(0),s=n(101),a=n(619),u=n(620),c=new o({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,n,r,i){return this.world.addCollider(t,e,n,r,i)},overlap:function(t,e,n,r,i){return this.world.addOverlap(t,e,n,r,i)},existing:function(t,e){var n=e?s.STATIC_BODY:s.DYNAMIC_BODY;return this.world.enableBody(t,n),t},staticImage:function(t,e,n,i){var o=new r(this.scene,t,e,n,i);return this.sys.displayList.add(o),this.world.enableBody(o,s.STATIC_BODY),o},image:function(t,e,n,i){var o=new r(this.scene,t,e,n,i);return this.sys.displayList.add(o),this.world.enableBody(o,s.DYNAMIC_BODY),o},staticSprite:function(t,e,n,r){var o=new i(this.scene,t,e,n,r);return this.sys.displayList.add(o),this.sys.updateList.add(o),this.world.enableBody(o,s.STATIC_BODY),o},sprite:function(t,e,n,r){var o=new i(this.scene,t,e,n,r);return this.sys.displayList.add(o),this.sys.updateList.add(o),this.world.enableBody(o,s.DYNAMIC_BODY),o},staticGroup:function(t,e){return this.sys.updateList.add(new u(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new a(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=c},function(t,e,n){var r=n(0),i=n(339),o=n(152),s=new r({Extends:o,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Size,i.Velocity],initialize:function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.body=null}});t.exports=s},function(t,e,n){var r=n(235),i=n(0),o=n(101),s=n(1),a=n(181),u=n(16),c=new i({Extends:a,initialize:function(t,e,n,i){if(n||i)if(u(n))i=n,n=null,i.createCallback=this.createCallbackHandler,i.removeCallback=this.removeCallbackHandler;else if(Array.isArray(n)&&u(n[0])){i=n[0];var c=this;n.forEach(function(t){t.createCallback=c.createCallbackHandler,t.removeCallback=c.removeCallbackHandler})}else i={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler};else i={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler};this.world=t,i.classType=s(i,"classType",r),this.physicsType=o.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:s(i,"collideWorldBounds",!1),setAccelerationX:s(i,"accelerationX",0),setAccelerationY:s(i,"accelerationY",0),setAllowDrag:s(i,"allowDrag",!0),setAllowGravity:s(i,"allowGravity",!0),setAllowRotation:s(i,"allowRotation",!0),setBounceX:s(i,"bounceX",0),setBounceY:s(i,"bounceY",0),setDragX:s(i,"dragX",0),setDragY:s(i,"dragY",0),setEnable:s(i,"enable",!0),setGravityX:s(i,"gravityX",0),setGravityY:s(i,"gravityY",0),setFrictionX:s(i,"frictionX",0),setFrictionY:s(i,"frictionY",0),setVelocityX:s(i,"velocityX",0),setVelocityY:s(i,"velocityY",0),setAngularVelocity:s(i,"angularVelocity",0),setAngularAcceleration:s(i,"angularAcceleration",0),setAngularDrag:s(i,"angularDrag",0),setMass:s(i,"mass",1),setImmovable:s(i,"immovable",!1)},Array.isArray(n)&&(i=null),a.call(this,e,n,i)},createCallbackHandler:function(t){t.body||this.world.enableBody(t,o.DYNAMIC_BODY);var e=t.body;for(var n in this.defaults)e[n](this.defaults[n])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,n){void 0===n&&(n=0);for(var r=this.getChildren(),i=0;i<r.length;i++)r[i].body.velocity.set(t+i*n,e+i*n);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.x=t+r*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.y=t+r*e;return this}});t.exports=c},function(t,e,n){var r=n(235),i=n(0),o=n(101),s=n(1),a=n(181),u=n(16),c=new i({Extends:a,initialize:function(t,e,n,i){n||i?u(n)?(i=n,n=null,i.createCallback=this.createCallbackHandler,i.removeCallback=this.removeCallbackHandler,i.createMultipleCallback=this.createMultipleCallbackHandler,i.classType=s(i,"classType",r)):Array.isArray(n)&&u(n[0])&&(i=n,n=null,i.forEach(function(t){t.createCallback=this.createCallbackHandler,t.removeCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=s(t,"classType",r)})):i={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=t,this.physicsType=o.STATIC_BODY,a.call(this,e,n,i)},createCallbackHandler:function(t){t.body||this.world.enableBody(t,o.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=c},function(t,e,n){var r=n(622),i=n(40),o=n(0),s=n(623),a=n(101),u=n(112),c=n(20),h=n(340),l=n(295),f=n(470),d=n(471),p=n(624),m=n(625),v=n(14),g=n(626),y=n(1525),b=n(22),x=n(627),w=n(1526),E=n(1531),_=n(1532),S=n(151),T=n(629),A=n(628),M=n(71),C=n(8),O=n(111),N=new o({Extends:c,initialize:function(t,e){c.call(this),this.scene=t,this.bodies=new S,this.staticBodies=new S,this.pendingDestroy=new S,this.colliders=new g,this.gravity=new C(v(e,"gravity.x",0),v(e,"gravity.y",0)),this.bounds=new b(v(e,"x",0),v(e,"y",0),v(e,"width",t.sys.scale.width),v(e,"height",t.sys.scale.height)),this.checkCollision={up:v(e,"checkCollision.up",!0),down:v(e,"checkCollision.down",!0),left:v(e,"checkCollision.left",!0),right:v(e,"checkCollision.right",!0)},this.fps=v(e,"fps",60),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=v(e,"timeScale",1),this.OVERLAP_BIAS=v(e,"overlapBias",4),this.TILE_BIAS=v(e,"tileBias",16),this.forceX=v(e,"forceX",!1),this.isPaused=v(e,"isPaused",!1),this._total=0,this.drawDebug=v(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:v(e,"debugShowBody",!0),debugShowStaticBody:v(e,"debugShowStaticBody",!0),debugShowVelocity:v(e,"debugShowVelocity",!0),bodyDebugColor:v(e,"debugBodyColor",16711935),staticBodyDebugColor:v(e,"debugStaticBodyColor",255),velocityDebugColor:v(e,"debugVelocityColor",65280)},this.maxEntries=v(e,"maxEntries",16),this.useTree=v(e,"useTree",!0),this.tree=new x(this.maxEntries),this.staticTree=new x(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new M,this._tempMatrix2=new M,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=a.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.isParent)for(var i=r.getChildren(),o=0;o<i.length;o++){var s=i[o];s.isParent?this.enable(s,e):this.enableBody(s,e)}else this.enableBody(r,e)}},enableBody:function(t,e){return void 0===e&&(e=a.DYNAMIC_BODY),t.body||(e===a.DYNAMIC_BODY?t.body=new r(this,t):e===a.STATIC_BODY&&(t.body=new T(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===a.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===a.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];if(n.isParent)for(var r=n.getChildren(),i=0;i<r.length;i++){var o=r[i];o.isParent?this.disable(o):this.disableBody(o.body)}else this.disableBody(n.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===a.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===a.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,n,r,i,o,s,a){return this.bounds.setTo(t,e,n,r),void 0!==i&&this.setBoundsCollision(i,o,s,a),this},setBoundsCollision:function(t,e,n,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=n,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(h.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(h.RESUME),this},addCollider:function(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n);var o=new s(this,!1,t,e,n,r,i);return this.colliders.add(o),o},addOverlap:function(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n);var o=new s(this,!0,t,e,n,r,i);return this.colliders.add(o),o},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var n,r,i=this._frameTime,o=this._frameTimeMS*this.timeScale;this._elapsed+=e;var s=this.bodies.entries,a=this._elapsed>=o;for(n=0;n<s.length;n++)(r=s[n]).enable&&r.preUpdate(a,i);if(a){this._elapsed-=o,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(s));var u=this.colliders.update();for(n=0;n<u.length;n++){var c=u[n];c.active&&c.update()}this.emit(h.WORLD_STEP)}for(;this._elapsed>=o;)this._elapsed-=o,this.step(i)}},step:function(t){var e,n,r=this.bodies.entries,i=r.length;for(e=0;e<i;e++)(n=r[e]).enable&&n.update(t);this.useTree&&(this.tree.clear(),this.tree.load(r));var o=this.colliders.update();for(e=0;e<o.length;e++){var s=o[e];s.active&&s.update()}this.emit(h.WORLD_STEP),this.stepsLastFrame++},postUpdate:function(){var t,e,n=this.bodies.entries,r=n.length,i=this.bodies,o=this.staticBodies;if(this.stepsLastFrame)for(t=0;t<r;t++)(e=n[t]).enable&&e.postUpdate();if(this.drawDebug){var s=this.debugGraphic;for(s.clear(),t=0;t<r;t++)(e=n[t]).willDrawDebug()&&e.drawDebug(s);for(r=(n=o.entries).length,t=0;t<r;t++)(e=n[t]).willDrawDebug()&&e.drawDebug(s)}var u=this.pendingDestroy;if(u.size>0){var c=this.tree,h=this.staticTree;for(r=(n=u.entries).length,t=0;t<r;t++)(e=n[t]).physicsType===a.DYNAMIC_BODY?(c.remove(e),i.delete(e)):e.physicsType===a.STATIC_BODY&&(h.remove(e),o.delete(e)),e.world=void 0,e.gameObject=void 0;u.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var n=t.angularVelocity,r=t.angularAcceleration,o=t.angularDrag,s=t.maxAngular;r?n+=r*e:t.allowDrag&&o&&(f(n-(o*=e),0,.1)?n-=o:d(n+o,0,.1)?n+=o:n=0);var a=(n=i(n,-s,s))-t.angularVelocity;t.angularVelocity+=a,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var n=t.velocity.x,r=t.acceleration.x,o=t.drag.x,s=t.maxVelocity.x,a=t.velocity.y,u=t.acceleration.y,c=t.drag.y,h=t.maxVelocity.y,p=t.speed,m=t.maxSpeed,v=t.allowDrag,g=t.useDamping;t.allowGravity&&(n+=(this.gravity.x+t.gravity.x)*e,a+=(this.gravity.y+t.gravity.y)*e),r?n+=r*e:v&&o&&(g?(n*=o,p=Math.sqrt(n*n+a*a),l(p,0,.001)&&(n=0)):f(n-(o*=e),0,.01)?n-=o:d(n+o,0,.01)?n+=o:n=0),u?a+=u*e:v&&c&&(g?(a*=c,p=Math.sqrt(n*n+a*a),l(p,0,.001)&&(a=0)):f(a-(c*=e),0,.01)?a-=c:d(a+c,0,.01)?a+=c:a=0),n=i(n,-s,s),a=i(a,-h,h),t.velocity.set(n,a),m>-1&&p>m&&(t.velocity.normalize().scale(m),p=m),t.speed=p},separate:function(t,e,n,r,i){if(!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(n&&!1===n.call(r,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,i);if(t.isCircle!==e.isCircle){var o=t.isCircle?e:t,s=t.isCircle?t:e,a={x:o.x,y:o.y,right:o.right,bottom:o.bottom},u=s.center;if((u.y<a.y||u.y>a.bottom)&&(u.x<a.x||u.x>a.right))return this.separateCircle(t,e,i)}var c=!1,l=!1;this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(c=E(t,e,i,this.OVERLAP_BIAS),this.intersects(t,e)&&(l=_(t,e,i,this.OVERLAP_BIAS))):(l=_(t,e,i,this.OVERLAP_BIAS),this.intersects(t,e)&&(c=E(t,e,i,this.OVERLAP_BIAS)));var f=c||l;return f&&(i?(t.onOverlap||e.onOverlap)&&this.emit(h.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(h.COLLIDE,t.gameObject,e.gameObject,t,e)),f},separateCircle:function(t,e,n,r){p(t,e,!1,r),m(t,e,!1,r);var i=0;if(t.isCircle!==e.isCircle){var o={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},s={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth};s.y<o.y?s.x<o.x?i=u(s.x,s.y,o.x,o.y)-s.radius:s.x>o.right&&(i=u(s.x,s.y,o.right,o.y)-s.radius):s.y>o.bottom&&(s.x<o.x?i=u(s.x,s.y,o.x,o.bottom)-s.radius:s.x>o.right&&(i=u(s.x,s.y,o.right,o.bottom)-s.radius)),i*=-1}else i=t.halfWidth+e.halfWidth-u(t.center.x,t.center.y,e.center.x,e.center.y);if(n||0===i||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==i&&(t.onOverlap||e.onOverlap)&&this.emit(h.OVERLAP,t.gameObject,e.gameObject,t,e),0!==i;var a=t.position.x-e.position.x,c=t.position.y-e.position.y,l=Math.sqrt(Math.pow(a,2)+Math.pow(c,2)),f=(e.position.x-t.position.x)/l||0,d=(e.position.y-t.position.y)/l||0,v=2*(t.velocity.x*f+t.velocity.y*d-e.velocity.x*f-e.velocity.y*d)/(t.mass+e.mass);t.immovable||(t.velocity.x=(t.velocity.x-v*t.mass*f)*t.bounce.x,t.velocity.y=(t.velocity.y-v*t.mass*d)*t.bounce.y),e.immovable||(e.velocity.x=(e.velocity.x+v*e.mass*f)*e.bounce.x,e.velocity.y=(e.velocity.y+v*e.mass*d)*e.bounce.y);var g=e.velocity.x-t.velocity.x,y=e.velocity.y-t.velocity.y,b=Math.atan2(y,g),x=this._frameTime;return t.immovable||(t.x+=t.velocity.x*x-i*Math.cos(b),t.y+=t.velocity.y*x-i*Math.sin(b)),e.immovable||(e.x+=e.velocity.x*x+i*Math.cos(b),e.y+=e.velocity.y*x+i*Math.sin(b)),(t.onCollide||e.onCollide)&&this.emit(h.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?u(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var n=i(t.center.x,e.left,e.right),r=i(t.center.y,e.top,e.bottom);return(t.center.x-n)*(t.center.x-n)+(t.center.y-r)*(t.center.y-r)<=t.halfWidth*t.halfWidth},overlap:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.collideObjects(t,e,n,r,i,!0)},collide:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.collideObjects(t,e,n,r,i,!1)},collideObjects:function(t,e,n,r,i,o){var s,a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var u=Array.isArray(t),c=Array.isArray(e);if(this._total=0,u||c)if(!u&&c)for(s=0;s<e.length;s++)this.collideHandler(t,e[s],n,r,i,o);else if(u&&!c)if(e)for(s=0;s<t.length;s++)this.collideHandler(t[s],e,n,r,i,o);else for(s=0;s<t.length;s++){var h=t[s];for(a=s+1;a<t.length;a++)s!==a&&this.collideHandler(h,t[a],n,r,i,o)}else for(s=0;s<t.length;s++)for(a=0;a<e.length;a++)this.collideHandler(t[s],e[a],n,r,i,o);else this.collideHandler(t,e,n,r,i,o);return this._total>0},collideHandler:function(t,e,n,r,i,o){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,n,r,i,o);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,n,r,i,o);if(e.isParent)return this.collideSpriteVsGroup(t,e,n,r,i,o);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,n,r,i,o)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,n,r,i,o);if(e.isParent)return this.collideGroupVsGroup(t,e,n,r,i,o);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,n,r,i,o)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,n,r,i,o);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,n,r,i,o)}},collideSpriteVsSprite:function(t,e,n,r,i,o){return!(!t.body||!e.body)&&(this.separate(t.body,e.body,r,i,o)&&(n&&n.call(i,t,e),this._total++),!0)},collideSpriteVsGroup:function(t,e,n,r,i,o){var s,u,c,h=t.body;if(0!==e.length&&h&&h.enable)if(this.useTree){var l=this.treeMinMax;l.minX=h.left,l.minY=h.top,l.maxX=h.right,l.maxY=h.bottom;var f=e.physicsType===a.DYNAMIC_BODY?this.tree.search(l):this.staticTree.search(l);for(u=f.length,s=0;s<u;s++)h!==(c=f[s])&&e.contains(c.gameObject)&&this.separate(h,c,r,i,o)&&(n&&n.call(i,h.gameObject,c.gameObject),this._total++)}else{var d=e.getChildren(),p=e.children.entries.indexOf(t);for(u=d.length,s=0;s<u;s++)(c=d[s].body)&&s!==p&&c.enable&&this.separate(h,c,r,i,o)&&(n&&n.call(i,h.gameObject,c.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,n,r,i,o){var s=t.getChildren();if(0===s.length)return!1;for(var a=!1,u=0;u<s.length;u++)s[u].body&&this.collideSpriteVsTilemapLayer(s[u],e,n,r,i,o)&&(a=!0);return a},collideTiles:function(t,e,n,r,i){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,n,r,i,!1,!1)},overlapTiles:function(t,e,n,r,i){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,n,r,i,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,n,r,i,o){var s=t.body;if(!s.enable)return!1;var a=s.position.x,u=s.position.y,c=s.width,h=s.height,l=e.layer;if(l.tileWidth>l.baseTileWidth){var f=(l.tileWidth-l.baseTileWidth)*e.scaleX;a-=f,c+=f}l.tileHeight>l.baseTileHeight&&(h+=(l.tileHeight-l.baseTileHeight)*e.scaleY);var d=e.getTilesWithinWorldXY(a,u,c,h);return 0!==d.length&&this.collideSpriteVsTilesHandler(t,d,n,r,i,o,!0)},collideSpriteVsTilesHandler:function(t,e,n,r,i,o,s){for(var a,u,c=t.body,l={left:0,right:0,top:0,bottom:0},f=!1,d=0;d<e.length;d++)u=(a=e[d]).tilemapLayer,l.left=u.tileToWorldX(a.x),l.top=u.tileToWorldY(a.y),a.baseHeight!==a.height&&(l.top-=(a.height-a.baseHeight)*u.scaleY),l.right=l.left+a.width*u.scaleX,l.bottom=l.top+a.height*u.scaleY,A(l,c)&&(!r||r.call(i,t,a))&&y(a,t)&&(o||w(d,c,a,l,u,this.TILE_BIAS,s))&&(this._total++,f=!0,n&&n.call(i,t,a),o&&c.onOverlap?this.emit(h.TILE_OVERLAP,t,a,c):c.onCollide&&this.emit(h.TILE_COLLIDE,t,a,c));return f},collideGroupVsGroup:function(t,e,n,r,i,o){if(0!==t.length&&0!==e.length)for(var s=t.getChildren(),a=0;a<s.length;a++)this.collideSpriteVsGroup(s[a],e,n,r,i,o)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var n=0;n<t.length;n++)this.wrapObject(t[n],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=O(t.x,this.bounds.left-e,this.bounds.right+e),t.y=O(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=N},function(t,e,n){var r=n(95),i=n(0),o=n(101),s=n(340),a=n(298),u=n(22),c=n(96),h=n(8),l=new i({initialize:function(t,e){var n=e.width?e.width:64,r=e.height?e.height:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(e.x,e.y),this.prev=new h(e.x,e.y),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=n,this.height=r,this.sourceWidth=n,this.sourceHeight=r,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(n/2),this.halfHeight=Math.abs(r/2),this.center=new h(e.x+this.halfWidth,e.y+this.halfHeight),this.velocity=new h,this.newVelocity=new h,this.deltaMax=new h,this.acceleration=new h,this.allowDrag=!0,this.drag=new h,this.allowGravity=!0,this.gravity=new h,this.bounce=new h,this.worldBounce=null,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new h(1e4,1e4),this.maxSpeed=-1,this.friction=new h(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this._reset=!0,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._bounds=new u},updateBounds:function(){var t=this.gameObject,e=this.transform;if(t.parentContainer){var n=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);e.x=n.tx,e.y=n.ty,e.rotation=a(n.rotation),e.scaleX=n.scaleX,e.scaleY=n.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY}else e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY;var r=!1;if(this.syncBounds){var i=t.getBounds(this._bounds);this.width=i.width,this.height=i.height,r=!0}else{var o=Math.abs(e.scaleX),s=Math.abs(e.scaleY);this._sx===o&&this._sy===s||(this.width=this.sourceWidth*o,this.height=this.sourceHeight*s,this._sx=o,this._sy=s,r=!0)}r&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},resetFlags:function(){this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.none=!0,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateBounds();var n=this.transform;this.position.x=n.x+n.scaleX*(this.offset.x-n.displayOriginX),this.position.y=n.y+n.scaleY*(this.offset.y-n.displayOriginY),this.updateCenter(),this.rotation=n.rotation,this.preRotation=this.rotation,this._reset&&(this.prev.x=this.position.x,this.prev.y=this.position.y),t&&this.update(e)},update:function(t){if(this.moves){this.world.updateMotion(this,t);var e=this.velocity.x,n=this.velocity.y;this.newVelocity.set(e*t,n*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(n,e),this.speed=Math.sqrt(e*e+n*n),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prev.x,e=this.position.y-this.prev.y;if(this.moves){var n=this.deltaMax.x,r=this.deltaMax.y;0!==n&&0!==t&&(t<0&&t<-n?t=-n:t>0&&t>n&&(t=n)),0!==r&&0!==e&&(e<0&&e<-r?e=-r:e>0&&e>r&&(e=r)),this.gameObject.x+=t,this.gameObject.y+=e,this._reset=!0}t<0?this.facing=o.FACING_LEFT:t>0&&(this.facing=o.FACING_RIGHT),e<0?this.facing=o.FACING_UP:e>0&&(this.facing=o.FACING_DOWN),this._dx=t,this._dy=e,this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y},checkWorldBounds:function(){var t=this.position,e=this.world.bounds,n=this.world.checkCollision,r=this.worldBounce?-this.worldBounce.x:-this.bounce.x,i=this.worldBounce?-this.worldBounce.y:-this.bounce.y;return t.x<e.x&&n.left?(t.x=e.x,this.velocity.x*=r,this.blocked.left=!0,this.blocked.none=!1):this.right>e.right&&n.right&&(t.x=e.right-this.width,this.velocity.x*=r,this.blocked.right=!0,this.blocked.none=!1),t.y<e.y&&n.up?(t.y=e.y,this.velocity.y*=i,this.blocked.up=!0,this.blocked.none=!1):this.bottom>e.bottom&&n.down&&(t.y=e.bottom-this.height,this.velocity.y*=i,this.blocked.down=!0,this.blocked.none=!1),!this.blocked.none},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setSize:function(t,e,n){void 0===n&&(n=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),n&&r.getCenter){var i=r.displayWidth/2,o=r.displayHeight/2;this.offset.set(i-this.halfWidth,o-this.halfHeight)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,n){return void 0===e&&(e=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,n),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var n=this.gameObject;n.setPosition(t,e),n.getTopLeft?n.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.rotation=n.angle,this.preRotation=n.angle,this.updateBounds(),this.updateCenter()},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?r(this,t,e):c(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,n=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(n,r,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(n,r,n+this.velocity.x/2,r+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,n){void 0===t&&(t=!0),this.collideWorldBounds=t;var r=void 0!==e,i=void 0!==n;return(r||i)&&(this.worldBounce||(this.worldBounce=new h),r&&(this.worldBounce.x=e),i&&(this.worldBounce.y=n)),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=t,n=this.velocity.y;return this.speed=Math.sqrt(e*e+n*n),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x,n=t;return this.speed=Math.sqrt(e*e+n*n),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=l},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i,o,s){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=n,this.object2=r,this.collideCallback=i,this.processCallback=o,this.callbackContext=s},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=r},function(t,e,n){var r=n(101);t.exports=function(t,e,n,i){var o=0,s=t.deltaAbsX()+e.deltaAbsX()+i;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(o=t.right-e.x)>s&&!n||!1===t.checkCollision.right||!1===e.checkCollision.left?o=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType===r.STATIC_BODY&&(t.blocked.none=!1,t.blocked.right=!0),t.physicsType===r.STATIC_BODY&&(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(o=t.x-e.width-e.x)>s&&!n||!1===t.checkCollision.left||!1===e.checkCollision.right?o=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType===r.STATIC_BODY&&(t.blocked.none=!1,t.blocked.left=!0),t.physicsType===r.STATIC_BODY&&(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=o,e.overlapX=o,o}},function(t,e,n){var r=n(101);t.exports=function(t,e,n,i){var o=0,s=t.deltaAbsY()+e.deltaAbsY()+i;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(o=t.bottom-e.y)>s&&!n||!1===t.checkCollision.down||!1===e.checkCollision.up?o=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType===r.STATIC_BODY&&(t.blocked.none=!1,t.blocked.down=!0),t.physicsType===r.STATIC_BODY&&(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(o=t.y-e.bottom)>s&&!n||!1===t.checkCollision.up||!1===e.checkCollision.down?o=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType===r.STATIC_BODY&&(t.blocked.none=!1,t.blocked.up=!0),t.physicsType===r.STATIC_BODY&&(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=o,e.overlapY=o,o}},function(t,e,n){var r=new(n(0))({initialize:function(){this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(t){return this._pending.push(t),this._toProcess++,this},remove:function(t){return this._destroy.push(t),this._toProcess++,this},update:function(){if(0===this._toProcess)return this._active;var t,e,n=this._destroy,r=this._active;for(t=0;t<n.length;t++){e=n[t];var i=r.indexOf(e);-1!==i&&r.splice(i,1)}for(n.length=0,n=this._pending,t=0;t<n.length;t++)e=n[t],this._active.push(e);return n.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=r},function(t,e,n){var r=n(546);function i(t){if(!(this instanceof i))return new i(t,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,i,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(s=e+Math.ceil((n-e)/i/2)*i,r(t,s,e,n,o),a.push(e,s,s,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!p(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],p(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):d(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!p(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],p(t,s=e.leaf?n(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,s,a=this.data,u=this.toBBox(t),c=[],h=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],n=h.pop(),s=!0),a.leaf&&-1!==(i=o(t,a.children,e)))return a.children.splice(i,1),c.push(a),this._condense(c),this;s||a.leaf||!d(a,u)?r?(n++,a=r.children[n],s=!1):a=null:(c.push(a),h.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return s(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=m([])).leaf=!1,i.height=r;var u,c,h,l,f=Math.ceil(o/a),d=f*Math.ceil(Math.sqrt(a));for(v(t,e,n,d,this.compareMinX),u=e;u<=n;u+=d)for(v(t,u,h=Math.min(u+d-1,n),f,this.compareMinY),c=u;c<=h;c+=f)l=Math.min(c+f-1,h),i.children.push(this._build(t,c,l,r-1));return s(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,h,f,d,p;r.push(e),!e.leaf&&r.length-1!==n;){for(h=f=1/0,i=0,o=e.children.length;i<o;i++)u=l(s=e.children[i]),d=t,p=s,(c=(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-u)<f?(f=c,h=u<h?u:h,a=s):c===f&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),u(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=m(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,u,c,h,f,d,p,m,v,g,y;for(c=h=1/0,r=e;r<=n-e;r++)i=a(t,0,r,this.toBBox),o=a(t,r,n,this.toBBox),d=i,p=o,m=void 0,v=void 0,g=void 0,y=void 0,m=Math.max(d.minX,p.minX),v=Math.max(d.minY,p.minY),g=Math.min(d.maxX,p.maxX),y=Math.min(d.maxY,p.maxY),s=Math.max(0,g-m)*Math.max(0,y-v),u=l(i)+l(o),s<c?(c=s,f=r,h=u<h?u:h):s===c&&u<h&&(h=u,f=r);return f},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,c=a(t,0,e,s),h=a(t,n-e,n,s),l=f(c)+f(h);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?s(o):o),l+=f(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(h,t.leaf?s(o):o),l+=f(h);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},t.exports=i},function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},function(t,e,n){var r=n(95),i=n(0),o=n(101),s=n(96),a=n(8),u=new i({initialize:function(t,e){var n=e.width?e.width:64,r=e.height?e.height:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(e.x-e.displayOriginX,e.y-e.displayOriginY),this.width=n,this.height=r,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(e.x+this.halfWidth,e.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=o.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,n){void 0===n&&(n=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),n&&r.getCenter){var i=r.displayWidth/2,o=r.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(i-this.halfWidth,o-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,n){return void 0===e&&(e=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,n),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var n=this.gameObject;void 0===t&&(t=n.x),void 0===e&&(e=n.y),this.world.staticTree.remove(this),n.setPosition(t,e),n.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?r(this,t,e):s(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,n=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(n,r,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=u},function(t,e,n){var r=n(0),i=n(184),o=n(1534),s=n(185),a=n(1535),u=new r({initialize:function(t,e,n,r,o){void 0===r&&(r=16),void 0===o&&(o=r),this.world=t,this.gameObject=null,this.enabled=!0,this.parent,this.id=t.getNextID(),this.name="",this.size={x:r,y:o},this.offset={x:0,y:0},this.pos={x:e,y:n},this.last={x:e,y:n},this.vel={x:0,y:0},this.accel={x:0,y:0},this.friction={x:0,y:0},this.maxVel={x:t.defaults.maxVelocityX,y:t.defaults.maxVelocityY},this.standing=!1,this.gravityFactor=t.defaults.gravityFactor,this.bounciness=t.defaults.bounciness,this.minBounceVelocity=t.defaults.minBounceVelocity,this.accelGround=0,this.accelAir=0,this.jumpSpeed=0,this.type=s.NONE,this.checkAgainst=s.NONE,this.collides=i.NEVER,this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.updateCallback,this.slopeStanding={min:.767944870877505,max:2.3736477827122884}},reset:function(t,e){this.pos={x:t,y:e},this.last={x:t,y:e},this.vel={x:0,y:0},this.accel={x:0,y:0},this.friction={x:0,y:0},this.maxVel={x:100,y:100},this.standing=!1,this.gravityFactor=1,this.bounciness=0,this.minBounceVelocity=40,this.accelGround=0,this.accelAir=0,this.jumpSpeed=0,this.type=s.NONE,this.checkAgainst=s.NONE,this.collides=i.NEVER},update:function(t){var e=this.pos;this.last.x=e.x,this.last.y=e.y,this.vel.y+=this.world.gravity*t*this.gravityFactor,this.vel.x=o(t,this.vel.x,this.accel.x,this.friction.x,this.maxVel.x),this.vel.y=o(t,this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var n=this.vel.x*t,r=this.vel.y*t,i=this.world.collisionMap.trace(e.x,e.y,n,r,this.size.x,this.size.y);this.handleMovementTrace(i)&&a(this,i);var s=this.gameObject;s&&(s.x=e.x-this.offset.x+s.displayOriginX*s.scaleX,s.y=e.y-this.offset.y+s.displayOriginY*s.scaleY),this.updateCallback&&this.updateCallback(this)},drawDebug:function(t){var e=this.pos;if(this.debugShowBody&&(t.lineStyle(1,this.debugBodyColor,1),t.strokeRect(e.x,e.y,this.size.x,this.size.y)),this.debugShowVelocity){var n=e.x+this.size.x/2,r=e.y+this.size.y/2;t.lineStyle(1,this.world.defaults.velocityDebugColor,1),t.lineBetween(n,r,n+this.vel.x,r+this.vel.y)}},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},skipHash:function(){return!this.enabled||0===this.type&&0===this.checkAgainst&&0===this.collides},touches:function(t){return!(this.pos.x>=t.pos.x+t.size.x||this.pos.x+this.size.x<=t.pos.x||this.pos.y>=t.pos.y+t.size.y||this.pos.y+this.size.y<=t.pos.y)},resetSize:function(t,e,n,r){return this.pos.x=t,this.pos.y=e,this.size.x=n,this.size.y=r,this},toJSON:function(){return{name:this.name,size:{x:this.size.x,y:this.size.y},pos:{x:this.pos.x,y:this.pos.y},vel:{x:this.vel.x,y:this.vel.y},accel:{x:this.accel.x,y:this.accel.y},friction:{x:this.friction.x,y:this.friction.y},maxVel:{x:this.maxVel.x,y:this.maxVel.y},gravityFactor:this.gravityFactor,bounciness:this.bounciness,minBounceVelocity:this.minBounceVelocity,type:this.type,checkAgainst:this.checkAgainst,collides:this.collides}},fromJSON:function(){},check:function(){},collideWith:function(t,e){this.parent&&this.parent._collideCallback&&this.parent._collideCallback.call(this.parent._callbackScope,this,t,e)},handleMovementTrace:function(){return!0},destroy:function(){this.world.remove(this),this.enabled=!1,this.world=null,this.gameObject=null,this.parent=null}});t.exports=u},function(t,e,n){var r=n(0),i=n(1539),o=new r({initialize:function(t,e){void 0===t&&(t=32),this.tilesize=t,this.data=Array.isArray(e)?e:[],this.width=Array.isArray(e)?e[0].length:0,this.height=Array.isArray(e)?e.length:0,this.lastSlope=55,this.tiledef=i},trace:function(t,e,n,r,i,o){var s={collision:{x:!1,y:!1,slope:!1},pos:{x:t+n,y:e+r},tile:{x:0,y:0}};if(!this.data)return s;var a=Math.ceil(Math.max(Math.abs(n),Math.abs(r))/this.tilesize);if(a>1)for(var u=n/a,c=r/a,h=0;h<a&&(u||c)&&(this.step(s,t,e,u,c,i,o,n,r,h),t=s.pos.x,e=s.pos.y,s.collision.x&&(u=0,n=0),s.collision.y&&(c=0,r=0),!s.collision.slope);h++);else this.step(s,t,e,n,r,i,o,n,r,0);return s},step:function(t,e,n,r,i,o,s,a,u,c){var h,l,f=0,d=this.tilesize,p=this.width,m=this.height;if(r){var v=r>0?o:0,g=r<0?d:0,y=Math.max(Math.floor(n/d),0),b=Math.min(Math.ceil((n+s)/d),m);h=Math.floor((t.pos.x+v)/d);var x=Math.floor((e+v)/d);if((c>0||h===x||x<0||x>=p)&&(x=-1),h>=0&&h<p)for(l=y;l<b&&!(-1!==x&&(f=this.data[l][x])>1&&f<=this.lastSlope&&this.checkDef(t,f,e,n,a,u,o,s,x,l));l++)if(1===(f=this.data[l][h])||f>this.lastSlope||f>1&&this.checkDef(t,f,e,n,a,u,o,s,h,l)){if(f>1&&f<=this.lastSlope&&t.collision.slope)break;t.collision.x=!0,t.tile.x=f,t.pos.x=h*d-v+g,e=t.pos.x,a=0;break}}if(i){var w=i>0?s:0,E=i<0?d:0,_=Math.max(Math.floor(t.pos.x/d),0),S=Math.min(Math.ceil((t.pos.x+o)/d),p);l=Math.floor((t.pos.y+w)/d);var T=Math.floor((n+w)/d);if((c>0||l===T||T<0||T>=m)&&(T=-1),l>=0&&l<m)for(h=_;h<S&&!(-1!==T&&(f=this.data[T][h])>1&&f<=this.lastSlope&&this.checkDef(t,f,e,n,a,u,o,s,h,T));h++)if(1===(f=this.data[l][h])||f>this.lastSlope||f>1&&this.checkDef(t,f,e,n,a,u,o,s,h,l)){if(f>1&&f<=this.lastSlope&&t.collision.slope)break;t.collision.y=!0,t.tile.y=f,t.pos.y=l*d-w+E;break}}},checkDef:function(t,e,n,r,i,o,s,a,u,c){var h=this.tiledef[e];if(!h)return!1;var l=this.tilesize,f=(u+h[0])*l,d=(c+h[1])*l,p=(h[2]-h[0])*l,m=(h[3]-h[1])*l,v=h[4],g=n+i+(m<0?s:0)-f,y=r+o+(p>0?a:0)-d;if(p*y-m*g>0){if(i*-m+o*p<0)return v;var b=Math.sqrt(p*p+m*m),x=m/b,w=-p/b,E=g*x+y*w,_=x*E,S=w*E;return _*_+S*S>=i*i+o*o?v||p*(y-o)-m*(g-i)<.5:(t.pos.x=n+i-_,t.pos.y=r+o-S,t.collision.slope={x:p,y:m,nx:x,ny:w},!0)}return!1}});t.exports=o},function(t,e,n){var r=n(0),i=n(633),o=n(634),s=n(635),a=new r({initialize:function(t){this.world=t,this.sys=t.scene.sys},body:function(t,e,n,r){return new i(this.world,t,e,n,r)},existing:function(t){var e=t.x-t.frame.centerX,n=t.y-t.frame.centerY,r=t.width,i=t.height;return t.body=this.world.create(e,n,r,i),t.body.parent=t,t.body.gameObject=t,t},image:function(t,e,n,r){var i=new o(this.world,t,e,n,r);return this.sys.displayList.add(i),i},sprite:function(t,e,n,r){var i=new s(this.world,t,e,n,r);return this.sys.displayList.add(i),this.sys.updateList.add(i),i},destroy:function(){this.world=null,this.sys=null}});t.exports=a},function(t,e,n){var r=n(0),i=n(342),o=new r({Mixins:[i.Acceleration,i.BodyScale,i.BodyType,i.Bounce,i.CheckAgainst,i.Collides,i.Debug,i.Friction,i.Gravity,i.Offset,i.SetGameObject,i.Velocity],initialize:function(t,e,n,r,i){this.body=t.create(e,n,r,i),this.body.parent=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});t.exports=o},function(t,e,n){var r=n(0),i=n(342),o=n(152),s=new r({Extends:o,Mixins:[i.Acceleration,i.BodyScale,i.BodyType,i.Bounce,i.CheckAgainst,i.Collides,i.Debug,i.Friction,i.Gravity,i.Offset,i.SetGameObject,i.Velocity],initialize:function(t,e,n,r,i){o.call(this,t.scene,e,n,r,i),this.body=t.create(e-this.frame.centerX,n-this.frame.centerY,this.width,this.height),this.body.parent=this,this.body.gameObject=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});t.exports=s},function(t,e,n){var r=n(0),i=n(342),o=n(99),s=new r({Extends:o,Mixins:[i.Acceleration,i.BodyScale,i.BodyType,i.Bounce,i.CheckAgainst,i.Collides,i.Debug,i.Friction,i.Gravity,i.Offset,i.SetGameObject,i.Velocity],initialize:function(t,e,n,r,i){o.call(this,t.scene,e,n,r,i),this.body=t.create(e-this.frame.centerX,n-this.frame.centerY,this.width,this.height),this.body.parent=this,this.body.gameObject=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});t.exports=s},function(t,e,n){var r=n(630),i=n(0),o=n(184),s=n(631),a=n(20),u=n(341),c=n(1),h=n(153),l=n(151),f=n(1553),d=n(66),p=n(185),m=new i({Extends:a,initialize:function(t,e){a.call(this),this.scene=t,this.bodies=new l,this.gravity=c(e,"gravity",0),this.cellSize=c(e,"cellSize",64),this.collisionMap=new s,this.timeScale=c(e,"timeScale",1),this.maxStep=c(e,"maxStep",.05),this.enabled=!0,this.drawDebug=c(e,"debug",!1),this.debugGraphic;var n=c(e,"maxVelocity",100);if(this.defaults={debugShowBody:c(e,"debugShowBody",!0),debugShowVelocity:c(e,"debugShowVelocity",!0),bodyDebugColor:c(e,"debugBodyColor",16711935),velocityDebugColor:c(e,"debugVelocityColor",65280),maxVelocityX:c(e,"maxVelocityX",n),maxVelocityY:c(e,"maxVelocityY",n),minBounceVelocity:c(e,"minBounceVelocity",40),gravityFactor:c(e,"gravityFactor",1),bounciness:c(e,"bounciness",0)},this.walls={left:null,right:null,top:null,bottom:null},this.delta=0,this._lastId=0,c(e,"setBounds",!1)){var r=e.setBounds;if("boolean"==typeof r)this.setBounds();else{var i=c(r,"x",0),o=c(r,"y",0),u=c(r,"width",t.sys.scale.width),h=c(r,"height",t.sys.scale.height),f=c(r,"thickness",64),d=c(r,"left",!0),p=c(r,"right",!0),m=c(r,"top",!0),v=c(r,"bottom",!0);this.setBounds(i,o,u,h,f,d,p,m,v)}}this.drawDebug&&this.createDebugGraphic()},setCollisionMap:function(t,e){if("string"==typeof t){var n=this.scene.cache.tilemap.get(t);if(!n||n.format!==d.WELTMEISTER)return console.warn("The specified key does not correspond to a Weltmeister tilemap: "+t),null;for(var r,i=n.data.layer,o=0;o<i.length;o++)if("collision"===i[o].name){r=i[o];break}void 0===e&&(e=r.tilesize),this.collisionMap=new s(e,r.data)}else Array.isArray(t)?this.collisionMap=new s(e,t):console.warn("Invalid Weltmeister collision map data: "+t);return this.collisionMap},setCollisionMapFromTilemapLayer:function(t,e){void 0===e&&(e={});for(var n=c(e,"slopeProperty",null),r=c(e,"slopeMap",null),i=c(e,"defaultCollidingSlope",null),o=c(e,"defaultNonCollidingSlope",0),a=t.layer,u=a.baseTileWidth,l=[],f=0;f<a.height;f++){l[f]=[];for(var d=0;d<a.width;d++){var p=a.data[f][d];p&&p.collides?null!==n&&h(p.properties,n)?l[f][d]=parseInt(p.properties[n],10):null!==r&&h(r,p.index)?l[f][d]=r[p.index]:l[f][d]=null!==i?i:p.index:l[f][d]=o}}return this.collisionMap=new s(u,l),this.collisionMap},setBounds:function(t,e,n,r,i,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===i&&(i=64),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===u&&(u=!0),this.updateWall(o,"left",t-i,e,i,r),this.updateWall(s,"right",t+n,e,i,r),this.updateWall(a,"top",t,e-i,n,i),this.updateWall(u,"bottom",t,e+r,n,i),this},updateWall:function(t,e,n,r,i,s){var a=this.walls[e];t?a?a.resetSize(n,r,i,s):(this.walls[e]=this.create(n,r,i,s),this.walls[e].name=e,this.walls[e].gravityFactor=0,this.walls[e].collides=o.FIXED):(a&&this.bodies.remove(a),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},getNextID:function(){return this._lastId++},create:function(t,e,n,i){var o=new r(this,t,e,n,i);return this.bodies.set(o),o},remove:function(t){this.bodies.delete(t)},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(u.RESUME),this},update:function(t,e){if(this.enabled&&0!==this.bodies.size){var n,r,i=Math.min(e/1e3,this.maxStep)*this.timeScale;this.delta=i;var o=this.bodies.entries,s=o.length,a={},u=this.cellSize;for(n=0;n<s;n++)(r=o[n]).enabled&&r.update(i);for(n=0;n<s;n++)(r=o[n])&&!r.skipHash()&&this.checkHash(r,a,u);if(this.drawDebug){var c=this.debugGraphic;for(c.clear(),n=0;n<s;n++)(r=o[n])&&r.willDrawDebug()&&r.drawDebug(c)}}},checkHash:function(t,e,n){for(var r={},i=Math.floor(t.pos.x/n),o=Math.floor(t.pos.y/n),s=Math.floor((t.pos.x+t.size.x)/n)+1,a=Math.floor((t.pos.y+t.size.y)/n)+1,u=i;u<s;u++)for(var c=o;c<a;c++)if(e[u])if(e[u][c]){for(var h=e[u][c],l=0;l<h.length;l++)t.touches(h[l])&&!r[h[l].id]&&(r[h[l].id]=!0,this.checkBodies(t,h[l]));h.push(t)}else e[u][c]=[t];else e[u]={},e[u][c]=[t]},checkBodies:function(t,e){t.collides===o.FIXED&&e.collides===o.FIXED||(t.checkAgainst&e.type&&t.check(e),e.checkAgainst&t.type&&e.check(t),t.collides&&e.collides&&t.collides+e.collides>o.ACTIVE&&f(this,t,e))},setCollidesNever:function(t){for(var e=0;e<t.length;e++)t[e].collides=o.NEVER;return this},setLite:function(t){for(var e=0;e<t.length;e++)t[e].collides=o.LITE;return this},setPassive:function(t){for(var e=0;e<t.length;e++)t[e].collides=o.PASSIVE;return this},setActive:function(t){for(var e=0;e<t.length;e++)t[e].collides=o.ACTIVE;return this},setFixed:function(t){for(var e=0;e<t.length;e++)t[e].collides=o.FIXED;return this},setTypeNone:function(t){for(var e=0;e<t.length;e++)t[e].type=p.NONE;return this},setTypeA:function(t){for(var e=0;e<t.length;e++)t[e].type=p.A;return this},setTypeB:function(t){for(var e=0;e<t.length;e++)t[e].type=p.B;return this},setAvsB:function(t){for(var e=0;e<t.length;e++)t[e].type=p.A,t[e].checkAgainst=p.B;return this},setBvsA:function(t){for(var e=0;e<t.length;e++)t[e].type=p.B,t[e].checkAgainst=p.A;return this},setCheckAgainstNone:function(t){for(var e=0;e<t.length;e++)t[e].checkAgainst=p.NONE;return this},setCheckAgainstA:function(t){for(var e=0;e<t.length;e++)t[e].checkAgainst=p.A;return this},setCheckAgainstB:function(t){for(var e=0;e<t.length;e++)t[e].checkAgainst=p.B;return this},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners(),this.scene=null,this.bodies.clear(),this.bodies=null,this.collisionMap=null}});t.exports=m},function(t,e,n){var r=n(102),i=n(42),o=n(0),s=n(639),a=n(158),u=n(1557),c=n(640),h=n(641),l=n(345),f=n(1583),d=n(61),p=new o({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,n,i,o){var s=r.rectangle(t,e,n,i,o);return this.world.add(s),s},trapezoid:function(t,e,n,i,o,s){var a=r.trapezoid(t,e,n,i,o,s);return this.world.add(a),a},circle:function(t,e,n,i,o){var s=r.circle(t,e,n,i,o);return this.world.add(s),s},polygon:function(t,e,n,i,o){var s=r.polygon(t,e,n,i,o);return this.world.add(s),s},fromVertices:function(t,e,n,i,o,s,a){"string"==typeof n&&(n=d.fromPath(n));var u=r.fromVertices(t,e,n,i,o,s,a);return this.world.add(u),u},imageStack:function(t,e,n,r,i,o,a,u,h){void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h={});var l=this.world,f=this.sys.displayList;h.addToWorld=!1;var d=s.stack(n,r,i,o,a,u,function(n,r){var i=new c(l,n,r,t,e,h);return f.add(i),i.body});return l.add(d),d},stack:function(t,e,n,r,i,o,a){var u=s.stack(t,e,n,r,i,o,a);return this.world.add(u),u},pyramid:function(t,e,n,r,i,o,a){var u=s.pyramid(t,e,n,r,i,o,a);return this.world.add(u),u},chain:function(t,e,n,r,i,o){return s.chain(t,e,n,r,i,o)},mesh:function(t,e,n,r,i){return s.mesh(t,e,n,r,i)},newtonsCradle:function(t,e,n,r,i){var o=s.newtonsCradle(t,e,n,r,i);return this.world.add(o),o},car:function(t,e,n,r,i){var o=s.car(t,e,n,r,i);return this.world.add(o),o},softBody:function(t,e,n,r,i,o,a,u,c,h){var l=s.softBody(t,e,n,r,i,o,a,u,c,h);return this.world.add(l),l},joint:function(t,e,n,r,i){return this.constraint(t,e,n,r,i)},spring:function(t,e,n,r,i){return this.constraint(t,e,n,r,i)},constraint:function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i={}),i.bodyA="body"===t.type?t:t.body,i.bodyB="body"===e.type?e:e.body,n&&(i.length=n),i.stiffness=r;var o=a.create(i);return this.world.add(o),o},worldConstraint:function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r={}),r.bodyB="body"===t.type?t:t.body,r.length=e,r.stiffness=n;var i=a.create(r);return this.world.add(i),i},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var e=new f(this.scene,this.world,t);return this.world.add(e.constraint),e},image:function(t,e,n,r,i){var o=new c(this.world,t,e,n,r,i);return this.sys.displayList.add(o),o},tileBody:function(t,e){return new l(this.world,t,e)},sprite:function(t,e,n,r,i){var o=new h(this.world,t,e,n,r,i);return this.sys.displayList.add(o),this.sys.updateList.add(o),o},gameObject:function(t,e){return u(this.world,t,e)},velocity:function(t,e){return i.setVelocity(t,e),t},angularVelocity:function(t,e){return i.setAngularVelocity(t,e),t},force:function(t,e,n){return i.applyForce(t,e,n),t},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=p},function(t,e){function n(t,e,n){n=n||0;var r,i,o,s,a,u,c,h=[0,0];return r=t[1][1]-t[0][1],i=t[0][0]-t[1][0],o=r*t[0][0]+i*t[0][1],s=e[1][1]-e[0][1],a=e[0][0]-e[1][0],u=s*e[0][0]+a*e[0][1],E(c=r*a-s*i,0,n)||(h[0]=(a*o-i*u)/c,h[1]=(r*u-s*o)/c),h}function r(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1],s=r[0]-n[0],a=r[1]-n[1];if(s*o-a*i==0)return!1;var u=(i*(n[1]-t[1])+o*(t[0]-n[0]))/(s*o-a*i),c=(s*(t[1]-n[1])+a*(n[0]-t[0]))/(a*i-s*o);return u>=0&&u<=1&&c>=0&&c<=1}function i(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function o(t,e,n){return i(t,e,n)>0}function s(t,e,n){return i(t,e,n)>=0}function a(t,e,n){return i(t,e,n)<0}function u(t,e,n){return i(t,e,n)<=0}t.exports={decomp:function(t){var e=function t(e){var n=[],r=[],i=[],o=[];var s=Number.MAX_VALUE;for(var a=0;a<e.length;++a)if(m(e,a))for(var u=0;u<e.length;++u)if(y(e,a,u)){r=t(x(e,a,u,o)),i=t(x(e,u,a,o));for(var c=0;c<i.length;c++)r.push(i[c]);r.length<s&&(n=r,s=r.length,n.push([d(e,a),d(e,u)]))}return n}(t);return e.length>0?function t(e,n){if(0===n.length)return[e];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var r=[e],i=0;i<n.length;i++)for(var o=n[i],s=0;s<r.length;s++){var a=r[s],u=t(a,o);if(u){r.splice(s,1),r.push(u[0],u[1]);break}}return r}var o=n,i=e.indexOf(o[0]),s=e.indexOf(o[1]);return-1!==i&&-1!==s&&[x(e,i,s),x(e,s,i)]}(t,e):[t]},quickDecomp:function t(e,n,r,i,c,h,l){h=h||100;l=l||0;c=c||25;n=void 0!==n?n:[];r=r||[];i=i||[];var v=[0,0],g=[0,0],y=[0,0];var x=0,E=0,_=0,S=0;var T=0,A=0,M=0;var C=[],O=[];var N=e,k=e;if(k.length<3)return n;l++;if(l>h)return console.warn("quickDecomp: max level ("+h+") reached."),n;for(var R=0;R<e.length;++R)if(m(N,R)){r.push(N[R]),x=E=Number.MAX_VALUE;for(var P=0;P<e.length;++P)o(d(N,R-1),d(N,R),d(N,P))&&u(d(N,R-1),d(N,R),d(N,P-1))&&(y=w(d(N,R-1),d(N,R),d(N,P),d(N,P-1)),a(d(N,R+1),d(N,R),y)&&(_=f(N[R],y))<E&&(E=_,g=y,A=P)),o(d(N,R+1),d(N,R),d(N,P+1))&&u(d(N,R+1),d(N,R),d(N,P))&&(y=w(d(N,R+1),d(N,R),d(N,P),d(N,P+1)),o(d(N,R-1),d(N,R),y)&&(_=f(N[R],y))<x&&(x=_,v=y,T=P));if(A===(T+1)%e.length)y[0]=(g[0]+v[0])/2,y[1]=(g[1]+v[1])/2,i.push(y),R<T?(p(C,N,R,T+1),C.push(y),O.push(y),0!==A&&p(O,N,A,N.length),p(O,N,0,R+1)):(0!==R&&p(C,N,R,N.length),p(C,N,0,T+1),C.push(y),O.push(y),p(O,N,A,R+1));else{if(A>T&&(T+=e.length),S=Number.MAX_VALUE,T<A)return n;for(var P=A;P<=T;++P)s(d(N,R-1),d(N,R),d(N,P))&&u(d(N,R+1),d(N,R),d(N,P))&&(_=f(d(N,R),d(N,P)))<S&&b(N,R,P)&&(S=_,M=P%e.length);R<M?(p(C,N,R,M+1),0!==M&&p(O,N,M,k.length),p(O,N,0,R+1)):(0!==R&&p(C,N,R,k.length),p(C,N,0,M+1),p(O,N,M,R+1))}return C.length<O.length?(t(C,n,r,i,c,h,l),t(O,n,r,i,c,h,l)):(t(O,n,r,i,c,h,l),t(C,n,r,i,c,h,l)),n}n.push(e);return n},isSimple:function(t){var e,n=t;for(e=0;e<n.length-1;e++)for(var i=0;i<e-1;i++)if(r(n[e],n[e+1],n[i],n[i+1]))return!1;for(e=1;e<n.length-2;e++)if(r(n[0],n[n.length-1],n[e],n[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var n=0,r=t.length-1;t.length>3&&r>=0;--r)l(d(t,r-1),d(t,r),d(t,r+1),e)&&(t.splice(r%t.length,1),n++);return n},removeDuplicatePoints:function(t,e){for(var n=t.length-1;n>=1;--n)for(var r=t[n],i=n-1;i>=0;--i)_(r,t[i],e)&&t.splice(n,1)},makeCCW:function(t){for(var e=0,n=t,r=1;r<t.length;++r)(n[r][1]<n[e][1]||n[r][1]===n[e][1]&&n[r][0]>n[e][0])&&(e=r);return!o(d(t,e-1),d(t,e),d(t,e+1))&&(function(t){for(var e=[],n=t.length,r=0;r!==n;r++)e.push(t.pop());for(var r=0;r!==n;r++)t[r]=e[r]}(t),!0)}};var c=[],h=[];function l(t,e,n,r){if(r){var o=c,s=h;o[0]=e[0]-t[0],o[1]=e[1]-t[1],s[0]=n[0]-e[0],s[1]=n[1]-e[1];var a=o[0]*s[0]+o[1]*s[1],u=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.acos(a/(u*l))<r}return 0===i(t,e,n)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function d(t,e){var n=t.length;return t[e<0?e%n+n:e%n]}function p(t,e,n,r){for(var i=n;i<r;i++)t.push(e[i])}function m(t,e){return a(d(t,e-1),d(t,e),d(t,e+1))}var v=[],g=[];function y(t,e,r){var i,o,a=v,c=g;if(s(d(t,e+1),d(t,e),d(t,r))&&u(d(t,e-1),d(t,e),d(t,r)))return!1;o=f(d(t,e),d(t,r));for(var h=0;h!==t.length;++h)if((h+1)%t.length!==e&&h!==e&&s(d(t,e),d(t,r),d(t,h+1))&&u(d(t,e),d(t,r),d(t,h))&&(a[0]=d(t,e),a[1]=d(t,r),c[0]=d(t,h),c[1]=d(t,h+1),i=n(a,c),f(d(t,e),i)<o))return!1;return!0}function b(t,e,n){for(var i=0;i!==t.length;++i)if(i!==e&&i!==n&&(i+1)%t.length!==e&&(i+1)%t.length!==n&&r(d(t,e),d(t,n),d(t,i),d(t,i+1)))return!1;return!0}function x(t,e,n,r){var i=r||[];if(function(t){t.length=0}(i),e<n)for(var o=e;o<=n;o++)i.push(t[o]);else{for(o=0;o<=n;o++)i.push(t[o]);for(o=e;o<t.length;o++)i.push(t[o])}return i}function w(t,e,n,r,i){i=i||0;var o=e[1]-t[1],s=t[0]-e[0],a=o*t[0]+s*t[1],u=r[1]-n[1],c=n[0]-r[0],h=u*n[0]+c*n[1],l=o*c-u*s;return E(l,0,i)?[0,0]:[(c*a-s*h)/l,(o*h-u*a)/l]}function E(t,e,n){return n=n||0,Math.abs(t-e)<=n}function _(t,e,n){return E(t[0],e[0],n)&&E(t[1],e[1],n)}},function(t,e,n){var r={};t.exports=r;var i=n(131),o=n(158),s=n(30),a=n(42),u=n(102);r.stack=function(t,e,n,r,o,s,u){for(var c,h=i.create({label:"Stack"}),l=t,f=e,d=0,p=0;p<r;p++){for(var m=0,v=0;v<n;v++){var g=u(l,f,v,p,c,d);if(g){var y=g.bounds.max.y-g.bounds.min.y,b=g.bounds.max.x-g.bounds.min.x;y>m&&(m=y),a.translate(g,{x:.5*b,y:.5*y}),l=g.bounds.max.x+o,i.addBody(h,g),c=g,d+=1}else l+=o}f+=m+s,l=t}return h},r.chain=function(t,e,n,r,a,u){for(var c=t.bodies,h=1;h<c.length;h++){var l=c[h-1],f=c[h],d=l.bounds.max.y-l.bounds.min.y,p=l.bounds.max.x-l.bounds.min.x,m=f.bounds.max.y-f.bounds.min.y,v={bodyA:l,pointA:{x:p*e,y:d*n},bodyB:f,pointB:{x:(f.bounds.max.x-f.bounds.min.x)*r,y:m*a}},g=s.extend(v,u);i.addConstraint(t,o.create(g))}return t.label+=" Chain",t},r.mesh=function(t,e,n,r,a){var u,c,h,l,f,d=t.bodies;for(u=0;u<n;u++){for(c=1;c<e;c++)h=d[c-1+u*e],l=d[c+u*e],i.addConstraint(t,o.create(s.extend({bodyA:h,bodyB:l},a)));if(u>0)for(c=0;c<e;c++)h=d[c+(u-1)*e],l=d[c+u*e],i.addConstraint(t,o.create(s.extend({bodyA:h,bodyB:l},a))),r&&c>0&&(f=d[c-1+(u-1)*e],i.addConstraint(t,o.create(s.extend({bodyA:f,bodyB:l},a)))),r&&c<e-1&&(f=d[c+1+(u-1)*e],i.addConstraint(t,o.create(s.extend({bodyA:f,bodyB:l},a))))}return t.label+=" Mesh",t},r.pyramid=function(t,e,n,i,o,s,u){return r.stack(t,e,n,i,o,s,function(e,r,s,c,h,l){var f=Math.min(i,Math.ceil(n/2)),d=h?h.bounds.max.x-h.bounds.min.x:0;if(!(c>f||s<(c=f-c)||s>n-1-c))return 1===l&&a.translate(h,{x:(s+(n%2==1?1:-1))*d,y:0}),u(t+(h?s*d:0)+s*o,r,s,c,h,l)})},r.newtonsCradle=function(t,e,n,r,s){for(var a=i.create({label:"Newtons Cradle"}),c=0;c<n;c++){var h=u.circle(t+c*(1.9*r),e+s,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),l=o.create({pointA:{x:t+c*(1.9*r),y:e},bodyB:h});i.addBody(a,h),i.addConstraint(a,l)}return a},r.car=function(t,e,n,r,s){var c=a.nextGroup(!0),h=.5*-n+20,l=.5*n-20,f=i.create({label:"Car"}),d=u.rectangle(t,e,n,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),p=u.circle(t+h,e+0,s,{collisionFilter:{group:c},friction:.8}),m=u.circle(t+l,e+0,s,{collisionFilter:{group:c},friction:.8}),v=o.create({bodyB:d,pointB:{x:h,y:0},bodyA:p,stiffness:1,length:0}),g=o.create({bodyB:d,pointB:{x:l,y:0},bodyA:m,stiffness:1,length:0});return i.addBody(f,d),i.addBody(f,p),i.addBody(f,m),i.addConstraint(f,v),i.addConstraint(f,g),f},r.softBody=function(t,e,n,i,o,a,c,h,l,f){l=s.extend({inertia:1/0},l),f=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},f);var d=r.stack(t,e,n,i,o,a,function(t,e){return u.circle(t,e,h,l)});return r.mesh(d,n,i,c,f),d.label="Soft Body",d}},function(t,e,n){var r=n(0),i=n(236),o=n(24),s=n(1),a=n(152),u=n(209),c=n(8),h=new r({Extends:a,Mixins:[i.Bounce,i.Collision,i.Force,i.Friction,i.Gravity,i.Mass,i.Sensor,i.SetBody,i.Sleep,i.Static,i.Transform,i.Velocity,u],initialize:function(t,e,n,r,i,a){o.call(this,t.scene,"Image"),this.setTexture(r,i),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(e,n);var u=s(a,"shape",null);u?this.setBody(u,a):this.setRectangle(this.width,this.height,a),this.setPosition(e,n),this.initPipeline("TextureTintPipeline")}});t.exports=h},function(t,e,n){var r=n(419),i=n(0),o=n(236),s=n(24),a=n(1),u=n(209),c=n(99),h=n(8),l=new i({Extends:c,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,u],initialize:function(t,e,n,i,o,u){s.call(this,t.scene,"Sprite"),this.anims=new r(this),this.setTexture(i,o),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new h(e,n);var c=a(u,"shape",null);c?this.setBody(c,u):this.setRectangle(this.width,this.height,u),this.setPosition(e,n),this.initPipeline("TextureTintPipeline")}});t.exports=l},function(t,e,n){var r={};t.exports=r;var i=n(349),o=n(30);r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){i.use(r,Array.prototype.slice.call(arguments))},r.before=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathBefore(r,t,e)},r.after=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathAfter(r,t,e)}},function(t,e,n){var r={};t.exports=r;var i=n(237),o=n(346),s=n(30);r.create=function(t){var e={controller:r,detector:o.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(e,t)},r.update=function(t,e,n,i){var o,s,a,u,c,h=n.world,l=t.buckets,f=!1,d=n.metrics;for(d.broadphaseTests=0,o=0;o<e.length;o++){var p=e[o];if((!p.isSleeping||i)&&!(p.bounds.max.x<h.bounds.min.x||p.bounds.min.x>h.bounds.max.x||p.bounds.max.y<h.bounds.min.y||p.bounds.min.y>h.bounds.max.y)){var m=r._getRegion(t,p);if(!p.region||m.id!==p.region.id||i){d.broadphaseTests+=1,p.region&&!i||(p.region=m);var v=r._regionUnion(m,p.region);for(s=v.startCol;s<=v.endCol;s++)for(a=v.startRow;a<=v.endRow;a++){u=l[c=r._getBucketId(s,a)];var g=s>=m.startCol&&s<=m.endCol&&a>=m.startRow&&a<=m.endRow,y=s>=p.region.startCol&&s<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!g&&y&&y&&u&&r._bucketRemoveBody(t,u,p),(p.region===m||g&&!y||i)&&(u||(u=r._createBucket(l,c)),r._bucketAddBody(t,u,p))}p.region=m,f=!0}}}f&&(t.pairsList=r._createActivePairsList(t))},r.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},r._regionUnion=function(t,e){var n=Math.min(t.startCol,e.startCol),i=Math.max(t.endCol,e.endCol),o=Math.min(t.startRow,e.startRow),s=Math.max(t.endRow,e.endRow);return r._createRegion(n,i,o,s)},r._getRegion=function(t,e){var n=e.bounds,i=Math.floor(n.min.x/t.bucketWidth),o=Math.floor(n.max.x/t.bucketWidth),s=Math.floor(n.min.y/t.bucketHeight),a=Math.floor(n.max.y/t.bucketHeight);return r._createRegion(i,o,s,a)},r._createRegion=function(t,e,n,r){return{id:t+","+e+","+n+","+r,startCol:t,endCol:e,startRow:n,endRow:r}},r._getBucketId=function(t,e){return"C"+t+"R"+e},r._createBucket=function(t,e){return t[e]=[]},r._bucketAddBody=function(t,e,n){for(var r=0;r<e.length;r++){var o=e[r];if(!(n.id===o.id||n.isStatic&&o.isStatic)){var s=i.id(n,o),a=t.pairs[s];a?a[2]+=1:t.pairs[s]=[n,o,1]}}e.push(n)},r._bucketRemoveBody=function(t,e,n){e.splice(s.indexOf(e,n),1);for(var r=0;r<e.length;r++){var o=e[r],a=i.id(n,o),u=t.pairs[a];u&&(u[2]-=1)}},r._createActivePairsList=function(t){var e,n,r=[];e=s.keys(t.pairs);for(var i=0;i<e.length;i++)(n=t.pairs[e[i]])[2]>0?r.push(n):delete t.pairs[e[i]];return r}},function(t,e,n){var r={};t.exports=r;var i=n(237),o=n(30);r._pairMaxIdleLife=1e3,r.create=function(t){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},r.update=function(t,e,n){var r,o,s,a,u=t.list,c=t.table,h=t.collisionStart,l=t.collisionEnd,f=t.collisionActive;for(h.length=0,l.length=0,f.length=0,a=0;a<u.length;a++)u[a].confirmedActive=!1;for(a=0;a<e.length;a++)(r=e[a]).collided&&((s=c[o=i.id(r.bodyA,r.bodyB)])?(s.isActive?f.push(s):h.push(s),i.update(s,r,n),s.confirmedActive=!0):(s=i.create(r,n),c[o]=s,h.push(s),u.push(s)));for(a=0;a<u.length;a++)(s=u[a]).isActive&&!s.confirmedActive&&(i.setActive(s,!1,n),l.push(s))},r.removeOld=function(t,e){var n,i,o,s,a=t.list,u=t.table,c=[];for(s=0;s<a.length;s++)(i=(n=a[s]).collision).bodyA.isSleeping||i.bodyB.isSleeping?n.timeUpdated=e:e-n.timeUpdated>r._pairMaxIdleLife&&c.push(s);for(s=0;s<c.length;s++)delete u[(n=a[o=c[s]-s]).id],a.splice(o,1)},r.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,e,n){var r={};t.exports=r;var i=n(61),o=n(73),s=n(30),a=n(74);r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(t){var e,n,r;for(e=0;e<t.length;e++)(n=t[e]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},r.solvePosition=function(t,e,n){var i,o,s,a,u,c,h,l,f,d,p,m,v,g,y,b,x=n*r._positionDampen;for(i=0;i<e.length;i++){var w=e[i];w.previousPositionImpulse.x=w.positionImpulse.x,w.previousPositionImpulse.y=w.positionImpulse.y}for(i=0;i<t.length;i++)(a=t[i]).isActive&&!a.isSensor&&(c=(u=a.collision).parentA,h=u.parentB,l=u.normal,p=c.previousPositionImpulse,m=h.previousPositionImpulse,d=u.penetration,g=m.x-p.x+d.x,y=m.y-p.y+d.y,f=(o=l.x)*g+(s=l.y)*y,a.separation=f,b=(f-a.slop)*x,(c.isStatic||h.isStatic)&&(b*=2),c.isStatic||c.isSleeping||(v=b/c.totalContacts,c.positionImpulse.x+=o*v,c.positionImpulse.y+=s*v),h.isStatic||h.isSleeping||(v=b/h.totalContacts,h.positionImpulse.x-=o*v,h.positionImpulse.y-=s*v))},r.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var s=0;s<n.parts.length;s++){var u=n.parts[s];i.translate(u.vertices,n.positionImpulse),a.update(u.bounds,u.vertices,n.velocity),u.position.x+=n.positionImpulse.x,u.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,o.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=r._positionWarming,n.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(t){var e,n,r,i,s,a,u,c,h,l,f,d,p,m,v=o._temp[0],g=o._temp[1];for(e=0;e<t.length;e++)if((r=t[e]).isActive&&!r.isSensor)for(i=r.activeContacts,a=(s=r.collision).parentA,u=s.parentB,c=s.normal,h=s.tangent,n=0;n<i.length;n++)f=(l=i[n]).vertex,d=l.normalImpulse,p=l.tangentImpulse,0===d&&0===p||(v.x=c.x*d+h.x*p,v.y=c.y*d+h.y*p,a.isStatic||a.isSleeping||(m=o.sub(f,a.position,g),a.positionPrev.x+=v.x*a.inverseMass,a.positionPrev.y+=v.y*a.inverseMass,a.anglePrev+=o.cross(m,v)*a.inverseInertia),u.isStatic||u.isSleeping||(m=o.sub(f,u.position,g),u.positionPrev.x-=v.x*u.inverseMass,u.positionPrev.y-=v.y*u.inverseMass,u.anglePrev-=o.cross(m,v)*u.inverseInertia))},r.solveVelocity=function(t,e){for(var n=e*e,i=o._temp[0],a=o._temp[1],u=o._temp[2],c=o._temp[3],h=o._temp[4],l=o._temp[5],f=0;f<t.length;f++){var d=t[f];if(d.isActive&&!d.isSensor){var p=d.collision,m=p.parentA,v=p.parentB,g=p.normal,y=p.tangent,b=d.activeContacts,x=1/b.length;m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,v.velocity.x=v.position.x-v.positionPrev.x,v.velocity.y=v.position.y-v.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,v.angularVelocity=v.angle-v.anglePrev;for(var w=0;w<b.length;w++){var E=b[w],_=E.vertex,S=o.sub(_,m.position,a),T=o.sub(_,v.position,u),A=o.add(m.velocity,o.mult(o.perp(S),m.angularVelocity),c),M=o.add(v.velocity,o.mult(o.perp(T),v.angularVelocity),h),C=o.sub(A,M,l),O=o.dot(g,C),N=o.dot(y,C),k=Math.abs(N),R=s.sign(N),P=(1+d.restitution)*O,I=s.clamp(d.separation+O,0,1)*r._frictionNormalMultiplier,D=N,L=1/0;k>d.friction*d.frictionStatic*I*n&&(L=k,D=s.clamp(d.friction*R*n,-L,L));var B=o.cross(S,g),F=o.cross(T,g),z=x/(m.inverseMass+v.inverseMass+m.inverseInertia*B*B+v.inverseInertia*F*F);if(P*=z,D*=z,O<0&&O*O>r._restingThresh*n)E.normalImpulse=0;else{var j=E.normalImpulse;E.normalImpulse=Math.min(E.normalImpulse+P,0),P=E.normalImpulse-j}if(N*N>r._restingThreshTangent*n)E.tangentImpulse=0;else{var U=E.tangentImpulse;E.tangentImpulse=s.clamp(E.tangentImpulse+D,-L,L),D=E.tangentImpulse-U}i.x=g.x*P+y.x*D,i.y=g.y*P+y.y*D,m.isStatic||m.isSleeping||(m.positionPrev.x+=i.x*m.inverseMass,m.positionPrev.y+=i.y*m.inverseMass,m.anglePrev+=o.cross(S,i)*m.inverseInertia),v.isStatic||v.isSleeping||(v.positionPrev.x-=i.x*v.inverseMass,v.positionPrev.y-=i.y*v.inverseMass,v.anglePrev-=o.cross(T,i)*v.inverseInertia)}}}}},function(t,e,n){var r={};t.exports=r;var i=n(350),o=n(186),s=n(645),a=n(644),u=n(1585),c=n(643),h=n(157),l=n(131),f=n(158),d=n(30),p=n(42);r.create=function(t,e){e=(e=d.isElement(t)?e:t)||{},((t=d.isElement(t)?t:null)||e.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},r=d.extend(n,e);if(t||r.render){var o={element:t,controller:Render};r.render=d.extend(o,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=e.world||i.create(r.world),r.pairs=a.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r.metrics=u.create(r.metrics),r},r.update=function(t,e,n){e=e||1e3/60,n=n||1;var i,c=t.world,d=t.timing,p=t.broadphase,m=[];d.timestamp+=e*d.timeScale;var v={timestamp:d.timestamp};h.trigger(t,"beforeUpdate",v);var g=l.allBodies(c),y=l.allConstraints(c);for(u.reset(t.metrics),t.enableSleeping&&o.update(g,d.timeScale),r._bodiesApplyGravity(g,c.gravity),r._bodiesUpdate(g,e,d.timeScale,n,c.bounds),f.preSolveAll(g),i=0;i<t.constraintIterations;i++)f.solveAll(y,d.timeScale);f.postSolveAll(g),p.controller?(c.isModified&&p.controller.clear(p),p.controller.update(p,g,t,c.isModified),m=p.pairsList):m=g,c.isModified&&l.setModified(c,!1,!1,!0);var b=p.detector(m,t),x=t.pairs,w=d.timestamp;for(a.update(x,b,w),a.removeOld(x,w),t.enableSleeping&&o.afterCollisions(x.list,d.timeScale),x.collisionStart.length>0&&h.trigger(t,"collisionStart",{pairs:x.collisionStart}),s.preSolvePosition(x.list),i=0;i<t.positionIterations;i++)s.solvePosition(x.list,g,d.timeScale);for(s.postSolvePosition(g),f.preSolveAll(g),i=0;i<t.constraintIterations;i++)f.solveAll(y,d.timeScale);for(f.postSolveAll(g),s.preSolveVelocity(x.list),i=0;i<t.velocityIterations;i++)s.solveVelocity(x.list,d.timeScale);return x.collisionActive.length>0&&h.trigger(t,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&h.trigger(t,"collisionEnd",{pairs:x.collisionEnd}),u.update(t.metrics,t),r._bodiesClearForces(g),h.trigger(t,"afterUpdate",v),t},r.merge=function(t,e){if(d.extend(t,e),e.world){t.world=e.world,r.clear(t);for(var n=l.allBodies(t.world),i=0;i<n.length;i++){var s=n[i];o.set(s,!1),s.id=d.nextId()}}},r.clear=function(t){var e=t.world;a.clear(t.pairs);var n=t.broadphase;if(n.controller){var r=l.allBodies(e);n.controller.clear(n),n.controller.update(n,r,t,!0)}},r._bodiesClearForces=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.force.x=0,n.force.y=0,n.torque=0}},r._bodiesApplyGravity=function(t,e){var n=void 0!==e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==n)for(var r=0;r<t.length;r++){var i=t[r];i.ignoreGravity||i.isStatic||i.isSleeping||(i.force.y+=i.mass*e.y*n,i.force.x+=i.mass*e.x*n)}},r._bodiesUpdate=function(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o];s.isStatic||s.isSleeping||p.update(s,e,n,r)}}},function(t,e,n){var r=n(102),i=n(42),o=n(0),s=n(30),a=n(131),u=n(646),c=n(20),h=n(344),l=n(1),f=n(14),d=n(42),p=n(157),m=n(345),v=n(350),g=n(73),y=new o({Extends:c,initialize:function(t,e){c.call(this),this.scene=t,this.engine=u.create(e),this.localWorld=this.engine.world;var n=f(e,"gravity",null);if(n&&this.setGravity(n.x,n.y,n.scale),this.walls={left:null,right:null,top:null,bottom:null},l(e,"setBounds",!1)){var r=e.setBounds;if("boolean"==typeof r)this.setBounds();else{var i=l(r,"x",0),o=l(r,"y",0),s=l(r,"width",t.sys.scale.width),a=l(r,"height",t.sys.scale.height),h=l(r,"thickness",64),d=l(r,"left",!0),p=l(r,"right",!0),m=l(r,"top",!0),v=l(r,"bottom",!0);this.setBounds(i,o,s,a,h,d,p,m,v)}}this.enabled=f(e,"enabled",!0),this.correction=f(e,"correction",1),this.getDelta=f(e,"getDelta",this.update60Hz),this.autoUpdate=f(e,"autoUpdate",!0),this.drawDebug=f(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:l(e,"debugShowBody",!0),debugShowStaticBody:l(e,"debugShowStaticBody",!0),debugShowVelocity:l(e,"debugShowVelocity",!0),bodyDebugColor:l(e,"debugBodyColor",16711935),bodyDebugFillColor:l(e,"debugBodyFillColor",14919651),staticBodyDebugColor:l(e,"debugStaticBodyColor",255),velocityDebugColor:l(e,"debugVelocityColor",65280),debugShowJoint:l(e,"debugShowJoint",!0),jointDebugColor:l(e,"debugJointColor",0),debugWireframes:l(e,"debugWireframes",!0),debugShowInternalEdges:l(e,"debugShowInternalEdges",!1),debugShowConvexHulls:l(e,"debugShowConvexHulls",!1),debugConvexHullColor:l(e,"debugConvexHullColor",11184810),debugShowSleeping:l(e,"debugShowSleeping",!1)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy()},setEventsProxy:function(){var t=this,e=this.engine;p.on(e,"beforeUpdate",function(e){t.emit(h.BEFORE_UPDATE,e)}),p.on(e,"afterUpdate",function(e){t.emit(h.AFTER_UPDATE,e)}),p.on(e,"collisionStart",function(e){var n,r,i=e.pairs;i.length>0&&(n=i[0].bodyA,r=i[0].bodyB),t.emit(h.COLLISION_START,e,n,r)}),p.on(e,"collisionActive",function(e){var n,r,i=e.pairs;i.length>0&&(n=i[0].bodyA,r=i[0].bodyB),t.emit(h.COLLISION_ACTIVE,e,n,r)}),p.on(e,"collisionEnd",function(e){var n,r,i=e.pairs;i.length>0&&(n=i[0].bodyA,r=i[0].bodyB),t.emit(h.COLLISION_END,e,n,r)})},setBounds:function(t,e,n,r,i,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===i&&(i=128),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===u&&(u=!0),this.updateWall(o,"left",t-i,e-i,i,r+2*i),this.updateWall(s,"right",t+n,e-i,i,r+2*i),this.updateWall(a,"top",t,e-i,n,i),this.updateWall(u,"bottom",t,e+r,n,i),this},updateWall:function(t,e,n,r,i,o){var s=this.walls[e];t?(s&&v.remove(this.localWorld,s),n+=i/2,r+=o/2,this.walls[e]=this.create(n,r,i,o,{isStatic:!0,friction:0,frictionStatic:0})):(s&&v.remove(this.localWorld,s),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,void 0!==n&&(this.localWorld.gravity.scale=n),this},create:function(t,e,n,i,o){var s=r.rectangle(t,e,n,i,o);return v.add(this.localWorld,s),s},add:function(t){return v.add(this.localWorld,t),this},remove:function(t,e){var n=t.body?t.body:t;return a.remove(this.localWorld,n,e),this},removeConstraint:function(t,e){return a.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var n=t.layer,r=t.getTilesWithin(0,0,n.width,n.height,{isColliding:!0});return this.convertTiles(r,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var n=0;n<t.length;n++)new m(this,t[n],e);return this},nextGroup:function(t){return d.nextGroup(t)},nextCategory:function(){return d.nextCategory()},pause:function(){return this.enabled=!1,this.emit(h.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(h.RESUME),this},update:function(t,e){this.enabled&&this.autoUpdate&&u.update(this.engine,this.getDelta(t,e),this.correction)},step:function(t,e){u.update(this.engine,t,e)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},postUpdate:function(){if(this.drawDebug){this.debugGraphic.clear();var t=a.allBodies(this.localWorld);this.defaults.debugWireframes?(this.defaults.debugShowConvexHulls&&this.renderConvexHulls(t),this.renderWireframes(t)):this.renderBodies(t),this.defaults.debugShowJoint&&this.renderJoints()}},renderConvexHulls:function(t){var e=this.debugGraphic;e.lineStyle(1,this.defaults.debugConvexHullColor),e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];if(r.render.visible&&1!==r.parts.length){e.moveTo(r.vertices[0].x,r.vertices[0].y);for(var i=1;i<r.vertices.length;i++)e.lineTo(r.vertices[i].x,r.vertices[i].y);e.lineTo(r.vertices[0].x,r.vertices[0].y)}}e.strokePath()},renderWireframes:function(t){var e=this.debugGraphic,n=this.defaults.debugShowInternalEdges;e.lineStyle(1,this.defaults.bodyDebugColor),e.beginPath();for(var r=0;r<t.length;r++){var i=t[r];if(i.render.visible)for(var o=i.parts.length>1?1:0;o<i.parts.length;o++){var s=i.parts[o],a=s.vertices.length;e.moveTo(s.vertices[0].x,s.vertices[0].y);for(var u=1;u<a;u++)!s.vertices[u-1].isInternal||n?e.lineTo(s.vertices[u].x,s.vertices[u].y):e.moveTo(s.vertices[u].x,s.vertices[u].y),s.vertices[u].isInternal&&!n&&e.moveTo(s.vertices[(u+1)%a].x,s.vertices[(u+1)%a].y);e.lineTo(s.vertices[0].x,s.vertices[0].y)}}e.strokePath()},renderBodies:function(t){var e,n,r,i,o=this.debugGraphic,s=this.defaults.debugShowInternalEdges||!this.defaults.debugWireframes,a=this.defaults.debugShowSleeping,u=this.defaults.debugWireframes;for(r=0;r<t.length;r++)if((e=t[r]).render.visible)for(i=e.parts.length>1?1:0;i<e.parts.length;i++)if((n=e.parts[i]).render.visible){if(a&&e.isSleeping?(o.lineStyle(1,this.defaults.bodyDebugColor,.5*n.render.opacity),o.fillStyle(this.defaults.bodyDebugColor,.5*n.render.opacity)):(o.lineStyle(1,this.defaults.bodyDebugColor,n.render.opacity),o.fillStyle(this.defaults.bodyDebugColor,n.render.opacity)),n.circleRadius)o.beginPath(),o.arc(n.position.x,n.position.y,n.circleRadius,0,2*Math.PI);else{o.beginPath(),o.moveTo(n.vertices[0].x,n.vertices[0].y);for(var c=n.vertices.length,h=1;h<c;h++)!n.vertices[h-1].isInternal||s?o.lineTo(n.vertices[h].x,n.vertices[h].y):o.moveTo(n.vertices[h].x,n.vertices[h].y),n.vertices[h].isInternal&&!s&&o.moveTo(n.vertices[(h+1)%n.vertices.length].x,n.vertices[(h+1)%n.vertices.length].y);o.lineTo(n.vertices[0].x,n.vertices[0].y),o.closePath()}u?o.strokePath():o.fillPath()}},renderJoints:function(){var t=this.debugGraphic;t.lineStyle(2,this.defaults.jointDebugColor);for(var e=a.allConstraints(this.localWorld),n=0;n<e.length;n++){var r=e[n];if(r.render.visible&&r.pointA&&r.pointB){r.render.lineWidth&&t.lineStyle(r.render.lineWidth,s.colorToNumber(r.render.strokeStyle));var i,o,u=r.bodyA,c=r.bodyB;if(i=u?g.add(u.position,r.pointA):r.pointA,"pin"===r.render.type)t.beginPath(),t.arc(i.x,i.y,3,0,2*Math.PI),t.closePath();else{if(o=c?g.add(c.position,r.pointB):r.pointB,t.beginPath(),t.moveTo(i.x,i.y),"spring"===r.render.type)for(var h,l=g.sub(o,i),f=g.perp(g.normalise(l)),d=Math.ceil(s.clamp(r.length/5,12,20)),p=1;p<d;p+=1)h=p%2==0?1:-1,t.lineTo(i.x+l.x*(p/d)+f.x*h*4,i.y+l.y*(p/d)+f.y*h*4);t.lineTo(o.x,o.y)}r.render.lineWidth&&t.strokePath(),r.render.anchors&&(t.fillStyle(s.colorToNumber(r.render.strokeStyle)),t.beginPath(),t.arc(i.x,i.y,6,0,2*Math.PI),t.arc(o.x,o.y,6,0,2*Math.PI),t.closePath(),t.fillPath())}}},fromPath:function(t,e){void 0===e&&(e=[]);return t.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(t,n,r){e.push({x:parseFloat(n),y:parseFloat(r)})}),e},resetCollisionIDs:function(){return i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),v.clear(this.localWorld,!1),u.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=y},function(t,e,n){var r=new(n(0))({initialize:function(t){this.pluginManager=t,this.game=t.game,this.scene,this.systems},init:function(){},start:function(){},stop:function(){},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=r},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s,a){for(var u=r(n,i,o,s,null,a),c=0;c<u.length;c++)u[c]&&u[c].index===t&&(u[c].index=e)}},function(t,e,n){var r=n(187);t.exports=function(t,e,n){if(r(t,e,n)){var i=n.data[e][t];return null!==i&&i.index>-1}return!1}},function(t,e,n){var r=n(133),i=n(187),o=n(351);t.exports=function(t,e,n,s,a){if(void 0===n&&(n=!1),void 0===s&&(s=!0),!i(t,e,a))return null;var u=a.data[e][t];return u?(a.data[e][t]=n?null:new r(a,-1,t,e,u.width,u.height),s&&u&&u.collides&&o(t,e,a),u):null}},function(t,e,n){var r=n(66),i=n(354),o=n(653),s=n(654),a=n(665);t.exports=function(t,e,n,u,c,h){var l;switch(e){case r.ARRAY_2D:l=i(t,n,u,c,h);break;case r.CSV:l=o(t,n,u,c,h);break;case r.TILED_JSON:l=s(t,n,h);break;case r.WELTMEISTER:l=a(t,n,h);break;default:console.warn("Unrecognized tilemap data format: "+e),l=null}return l}},function(t,e,n){var r=n(66),i=n(354);t.exports=function(t,e,n,o,s){var a=e.trim().split("\n").map(function(t){return t.split(",")}),u=i(t,a,n,o,s);return u.format=r.CSV,u}},function(t,e,n){var r=n(66),i=n(189),o=n(655),s=n(657),a=n(658),u=n(661),c=n(663),h=n(664);t.exports=function(t,e,n){if("orthogonal"!==e.orientation)return console.warn("Only orthogonal map types are supported in this version of Phaser"),null;var l=new i({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation,format:r.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite});l.layers=o(e,n),l.images=s(e);var f=a(e);return l.tilesets=f.tilesets,l.imageCollections=f.imageCollections,l.objects=u(e),l.tiles=c(l),h(l),l}},function(t,e,n){var r=n(656),i=n(1),o=n(188),s=n(355),a=n(133);t.exports=function(t,e){for(var n=i(t,"infinite",!1),u=[],c=0;c<t.layers.length;c++)if("tilelayer"===t.layers[c].type){var h=t.layers[c];if(h.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+h.name+"'");else{var l,f,d,p;h.encoding&&"base64"===h.encoding&&(h.data=r(h.data),delete h.encoding);var m=[],v=0;if(n){var g=i(h,"startx",0)+h.x,y=i(h,"starty",0)+h.y;l=new o({name:h.name,x:g,y:y,width:h.width,height:h.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:h.opacity,visible:h.visible,properties:i(h,"properties",{})});for(var b=0;b<h.height;b++){m.push([null]);for(var x=0;x<h.width;x++)m[b][x]=null}for(b=0,k=h.chunks.length;b<k;b++)for(var w=h.chunks[b],E=w.x-g,_=w.y-y,S=0,T=0,A=w.data.length;T<A;T++){var M=v+E,C=S+_;(f=s(w.data[T])).gid>0?((d=new a(l,f.gid,M,C,t.tilewidth,t.tileheight)).rotation=f.rotation,d.flipX=f.flipped,m[C][M]=d):(p=e?null:new a(l,-1,M,C,t.tilewidth,t.tileheight),m[C][M]=p),++v===w.width&&(S++,v=0)}}else{l=new o({name:h.name,x:i(h,"offsetx",0)+h.x,y:i(h,"offsety",0)+h.y,width:h.width,height:h.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:h.opacity,visible:h.visible,properties:i(h,"properties",{})});for(var O=[],N=0,k=h.data.length;N<k;N++)(f=s(h.data[N])).gid>0?((d=new a(l,f.gid,v,m.length,t.tilewidth,t.tileheight)).rotation=f.rotation,d.flipX=f.flipped,O.push(d)):(p=e?null:new a(l,-1,v,m.length,t.tilewidth,t.tileheight),O.push(p)),++v===h.width&&(m.push(O),v=0,O=[])}l.data=m,u.push(l)}}return u}},function(t,e){t.exports=function(t){for(var e=window.atob(t),n=e.length,r=new Array(n/4),i=0;i<n;i+=4)r[i/4]=(e.charCodeAt(i)|e.charCodeAt(i+1)<<8|e.charCodeAt(i+2)<<16|e.charCodeAt(i+3)<<24)>>>0;return r}},function(t,e,n){var r=n(1);t.exports=function(t){for(var e=[],n=0;n<t.layers.length;n++)if("imagelayer"===t.layers[n].type){var i=t.layers[n];e.push({name:i.name,image:i.image,x:r(i,"offsetx",0)+i.x,y:r(i,"offsety",0)+i.y,alpha:i.opacity,visible:i.visible,properties:r(i,"properties",{})})}return e}},function(t,e,n){var r=n(242),i=n(659),o=n(356);t.exports=function(t){for(var e,n=[],s=[],a=null,u=0;u<t.tilesets.length;u++){var c=t.tilesets[u];if(c.source)console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.");else if(c.image){var h=new r(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing);if(t.version>1){if(Array.isArray(c.tiles)){for(var l={},f={},d=0;d<c.tiles.length;d++){var p=c.tiles[d];if(p.properties){var m={};p.properties.forEach(function(t){m[t.name]=t.value}),f[p.id]=m}if(p.objectgroup&&(l[p.id]={objectgroup:p.objectgroup},p.objectgroup.objects)){var v=p.objectgroup.objects.map(function(t){return o(t)});l[p.id].objectgroup.objects=v}p.animation&&(l.hasOwnProperty(p.id)?l[p.id].animation=p.animation:l[p.id]={animation:p.animation})}h.tileData=l,h.tileProperties=f}}else if(c.tileproperties&&(h.tileProperties=c.tileproperties),c.tiles)for(e in h.tileData=c.tiles,h.tileData){var g=h.tileData[e].objectgroup;if(g&&g.objects){var y=g.objects.map(function(t){return o(t)});h.tileData[e].objectgroup.objects=y}}h.updateTileData(c.imagewidth,c.imageheight),n.push(h)}else{var b=new i(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties);for(e in c.tiles){var x=c.tiles[e].image,w=c.firstgid+parseInt(e,10);b.addImage(w,x)}s.push(b)}a&&(a.lastgid=c.firstgid-1),a=c}return{tilesets:n,imageCollections:s}}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i,o,s){(void 0===n||n<=0)&&(n=32),(void 0===r||r<=0)&&(r=32),void 0===i&&(i=0),void 0===o&&(o=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|n,this.imageHeight=0|r,this.imageMargin=0|i,this.imageSpacing=0|o,this.properties=s||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=r},function(t,e,n){var r=n(153);t.exports=function(t,e){for(var n={},i=0;i<e.length;i++){var o=e[i];r(t,o)&&(n[o]=t[o])}return n}},function(t,e,n){var r=n(1),i=n(356),o=n(662);t.exports=function(t){for(var e=[],n=0;n<t.layers.length;n++)if("objectgroup"===t.layers[n].type){for(var s=t.layers[n],a=r(s,"offsetx",0),u=r(s,"offsety",0),c=[],h=0;h<s.objects.length;h++){var l=i(s.objects[h],a,u);c.push(l)}var f=new o(s);f.objects=c,e.push(f)}return e}},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=i(t,"name","object layer"),this.opacity=i(t,"opacity",1),this.properties=i(t,"properties",{}),this.propertyTypes=i(t,"propertytypes",{}),this.type=i(t,"type","objectgroup"),this.visible=i(t,"visible",!0),this.objects=i(t,"objects",[])}});t.exports=o},function(t,e){t.exports=function(t){for(var e=[],n=0;n<t.tilesets.length;n++)for(var r=t.tilesets[n],i=r.tileMargin,o=r.tileMargin,s=0,a=0,u=0,c=r.firstgid;c<r.firstgid+r.total&&(e[c]=[i,o,n],i+=r.tileWidth+r.tileSpacing,++s!==r.total)&&(++a!==r.columns||(i=r.tileMargin,o+=r.tileHeight+r.tileSpacing,a=0,++u!==r.rows));c++);return e}},function(t,e,n){var r=n(37);t.exports=function(t){for(var e,n,i,o,s,a=0;a<t.layers.length;a++){e=t.layers[a],o=null;for(var u=0;u<e.data.length;u++){s=e.data[u];for(var c=0;c<s.length;c++)null===(n=s[c])||n.index<0||(i=t.tiles[n.index][2],o=t.tilesets[i],n.width=o.tileWidth,n.height=o.tileHeight,o.tileProperties&&o.tileProperties[n.index-o.firstgid]&&(n.properties=r(n.properties,o.tileProperties[n.index-o.firstgid])))}}}},function(t,e,n){var r=n(66),i=n(189),o=n(666),s=n(667);t.exports=function(t,e,n){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var a=0,u=0,c=0;c<e.layer.length;c++)e.layer[c].width>a&&(a=e.layer[c].width),e.layer[c].height>u&&(u=e.layer[c].height);var h=new i({width:a,height:u,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:r.WELTMEISTER});return h.layers=o(e,n),h.tilesets=s(e),h}},function(t,e,n){var r=n(188),i=n(133);t.exports=function(t,e){for(var n=[],o=0;o<t.layer.length;o++){for(var s=t.layer[o],a=new r({name:s.name,width:s.width,height:s.height,tileWidth:s.tilesize,tileHeight:s.tilesize,visible:1===s.visible}),u=[],c=[],h=0;h<s.data.length;h++){for(var l=0;l<s.data[h].length;l++){var f,d=s.data[h][l]-1;f=d>-1?new i(a,d,l,h,s.tilesize,s.tilesize):e?null:new i(a,-1,l,h,s.tilesize,s.tilesize),u.push(f)}c.push(u),u=[]}a.data=c,n.push(a)}return n}},function(t,e,n){var r=n(242);t.exports=function(t){for(var e=[],n=[],i=0;i<t.layer.length;i++){var o=t.layer[i],s=o.tilesetName;""!==s&&-1===n.indexOf(s)&&(n.push(s),e.push(new r(s,0,o.tilesize,o.tilesize,0,0)))}return e}},function(t,e,n){var r=n(0),i=n(80),o=n(669),s=n(37),a=n(66),u=n(188),c=n(482),h=n(148),l=n(670),f=n(133),d=n(238),p=n(242),m=new r({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),e.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,e,n,r,i,o,s){if(void 0===t)return null;if(null==e&&(e=t),!this.scene.sys.textures.exists(e))return console.warn("Invalid Tileset Image: "+e),null;var u=this.scene.sys.textures.get(e),c=this.getTilesetIndex(t);if(null===c&&this.format===a.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var h=this.tilesets[c];return h?(h.setTileSize(n,r),h.setSpacing(i,o),h.setImage(u),h):(void 0===n&&(n=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),(h=new p(t,s,n,r,i,o)).setImage(u),this.tilesets.push(h),h)},convertLayerToStatic:function(t){if(null===(t=this.getLayer(t)))return null;var e=t.tilemapLayer;if(!(e&&e instanceof o))return null;var n=new l(e.scene,e.tilemap,e.layerIndex,e.tileset,e.x,e.y);return this.scene.sys.displayList.add(n),e.destroy(),n},copy:function(t,e,n,r,i,o,s,a){return a=this.getLayer(a),this._isStaticCall(a,"copy")?this:null!==a?(d.Copy(t,e,n,r,i,o,s,a),this):null},createBlankDynamicLayer:function(t,e,n,r,i,s,a,c){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=this.width),void 0===s&&(s=this.height),void 0===a&&(a=this.tileWidth),void 0===c&&(c=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var h,l=new u({name:t,tileWidth:a,tileHeight:c,width:i,height:s}),d=0;d<s;d++){h=[];for(var p=0;p<i;p++)h.push(new f(l,-1,p,d,a,c,this.tileWidth,this.tileHeight));l.data.push(h)}this.layers.push(l),this.currentLayerIndex=this.layers.length-1;var m=new o(this.scene,this,this.currentLayerIndex,e,n,r);return m.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(m),m},createDynamicLayer:function(t,e,n,r){var i=this.getLayerIndex(t);if(null===i)return console.warn("Invalid Tilemap Layer ID: "+t),null;var s=this.layers[i];if(s.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=i,void 0===n&&(n=s.x),void 0===r&&(r=s.y);var a=new o(this.scene,this,i,e,n,r);return a.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(a),a},createFromObjects:function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r=this.scene);var o=this.getObjectLayer(t);if(o){for(var a=o.objects,u=[],h=0;h<a.length;h++){var l=!1,f=a[h];if((void 0!==f.gid&&"number"==typeof e&&f.gid===e||void 0!==f.id&&"number"==typeof e&&f.id===e||void 0!==f.name&&"string"==typeof e&&f.name===e)&&(l=!0),l){var d=s({},n,f.properties);d.x=f.x,d.y=f.y;var p=this.scene.make.sprite(d);p.name=f.name,f.width&&(p.displayWidth=f.width),f.height&&(p.displayHeight=f.height);var m={x:p.originX*p.displayWidth,y:(p.originY-1)*p.displayHeight};if(f.rotation){var v=i(f.rotation);c(m,v),p.rotation=v}for(var g in p.x+=m.x,p.y+=m.y,void 0===f.flippedHorizontal&&void 0===f.flippedVertical||p.setFlip(f.flippedHorizontal,f.flippedVertical),f.visible||(p.visible=!1),f.properties)p.hasOwnProperty(g)||p.setData(g,f.properties[g]);u.push(p)}}return u}console.warn("Cannot create from object. Invalid objectgroup name given: "+t)},createFromTiles:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:d.CreateFromTiles(t,e,n,r,i,o)},createStaticLayer:function(t,e,n,r){var i=this.getLayerIndex(t);if(null===i)return console.warn("Invalid Tilemap Layer ID: "+t),null;if(this.layers[i].tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=i,void 0===n&&this.layers[i].x&&(n=this.layers[i].x),void 0===r&&this.layers[i].y&&(r=this.layers[i].y);var o=new l(this.scene,this,i,e,n,r);return o.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(o),o},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=void 0},fill:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:this._isStaticCall(s,"fill")?this:(d.Fill(t,e,n,r,i,o,s),this)},filterObjects:function(t,e,n){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.filter(e,n)},filterTiles:function(t,e,n,r,i,o,s,a){return null===(a=this.getLayer(a))?null:d.FilterTiles(t,e,n,r,i,o,s,a)},findByIndex:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.FindByIndex(t,e,n,r)},findObject:function(t,e,n){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.find(e,n)||null},findTile:function(t,e,n,r,i,o,s,a){return null===(a=this.getLayer(a))?null:d.FindTile(t,e,n,r,i,o,s,a)},forEachTile:function(t,e,n,r,i,o,s,a){return null===(a=this.getLayer(a))?null:(d.ForEachTile(t,e,n,r,i,o,s,a),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getIndex:function(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e)return n;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof l||t instanceof o?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.GetTileAt(t,e,n,r)},getTileAtWorldXY:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:d.GetTileAtWorldXY(t,e,n,r,i)},getTilesWithin:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:d.GetTilesWithin(t,e,n,r,i,o)},getTilesWithinShape:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.GetTilesWithinShape(t,e,n,r)},getTilesWithinWorldXY:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:d.GetTilesWithinWorldXY(t,e,n,r,i,o,s)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,n){return null===(n=this.getLayer(n))?null:d.HasTileAt(t,e,n)},hasTileAtWorldXY:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.HasTileAtWorldXY(t,e,n,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,n,r,i){return i=this.getLayer(i),this._isStaticCall(i,"putTileAt")?null:null===i?null:d.PutTileAt(t,e,n,r,i)},putTileAtWorldXY:function(t,e,n,r,i,o){return o=this.getLayer(o),this._isStaticCall(o,"putTileAtWorldXY")?null:null===o?null:d.PutTileAtWorldXY(t,e,n,r,i,o)},putTilesAt:function(t,e,n,r,i){return i=this.getLayer(i),this._isStaticCall(i,"putTilesAt")?this:null===i?null:(d.PutTilesAt(t,e,n,r,i),this)},randomize:function(t,e,n,r,i,o){return o=this.getLayer(o),this._isStaticCall(o,"randomize")?this:null===o?null:(d.Randomize(t,e,n,r,i,o),this)},calculateFacesAt:function(t,e,n){return null===(n=this.getLayer(n))?null:(d.CalculateFacesAt(t,e,n),this)},calculateFacesWithin:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:(d.CalculateFacesWithin(t,e,n,r,i),this)},removeLayer:function(t){var e=this.getLayerIndex(t);return null!==e?(h(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).destroy(),h(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=!0);var r=[];Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];r.push(this.removeTileAt(o.x,o.y,!0,n,o.tilemapLayer)),e>-1&&this.putTileAt(e,o.x,o.y,n,o.tilemapLayer)}return r},removeTileAt:function(t,e,n,r,i){return i=this.getLayer(i),this._isStaticCall(i,"removeTileAt")?null:null===i?null:d.RemoveTileAt(t,e,n,r,i)},removeTileAtWorldXY:function(t,e,n,r,i,o){return o=this.getLayer(o),this._isStaticCall(o,"removeTileAtWorldXY")?null:null===o?null:d.RemoveTileAtWorldXY(t,e,n,r,i,o)},renderDebug:function(t,e,n){return null===(n=this.getLayer(n))?null:(d.RenderDebug(t,e,n),this)},renderDebugFull:function(t,e){for(var n=this.layers,r=0;r<n.length;r++)d.RenderDebug(t,e,n[r]);return this},replaceByIndex:function(t,e,n,r,i,o,s){return s=this.getLayer(s),this._isStaticCall(s,"replaceByIndex")?this:null===s?null:(d.ReplaceByIndex(t,e,n,r,i,o,s),this)},setCollision:function(t,e,n,r){return null===(r=this.getLayer(r))?null:(d.SetCollision(t,e,n,r),this)},setCollisionBetween:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:(d.SetCollisionBetween(t,e,n,r,i),this)},setCollisionByProperty:function(t,e,n,r){return null===(r=this.getLayer(r))?null:(d.SetCollisionByProperty(t,e,n,r),this)},setCollisionByExclusion:function(t,e,n,r){return null===(r=this.getLayer(r))?null:(d.SetCollisionByExclusion(t,e,n,r),this)},setCollisionFromCollisionGroup:function(t,e,n){return null===(n=this.getLayer(n))?null:(d.SetCollisionFromCollisionGroup(t,e,n),this)},setTileIndexCallback:function(t,e,n,r){return null===(r=this.getLayer(r))?null:(d.SetTileIndexCallback(t,e,n,r),this)},setTileLocationCallback:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:(d.SetTileLocationCallback(t,e,n,r,i,o,s),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var n=0;n<this.layers.length;n++){this.layers[n].baseTileWidth=t,this.layers[n].baseTileHeight=e;for(var r=this.layers[n].data,i=this.layers[n].width,o=this.layers[n].height,s=0;s<o;s++)for(var a=0;a<i;a++){var u=r[s][a];null!==u&&u.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,n){if(null===(n=this.getLayer(n)))return this;n.tileWidth=t,n.tileHeight=e;for(var r=n.data,i=n.width,o=n.height,s=0;s<o;s++)for(var a=0;a<i;a++){var u=r[s][a];null!==u&&u.setSize(t,e)}return this},shuffle:function(t,e,n,r,i){return i=this.getLayer(i),this._isStaticCall(i,"shuffle")?this:null===i?null:(d.Shuffle(t,e,n,r,i),this)},swapByIndex:function(t,e,n,r,i,o,s){return s=this.getLayer(s),this._isStaticCall(s,"swapByIndex")?this:null===s?null:(d.SwapByIndex(t,e,n,r,i,o,s),this)},tileToWorldX:function(t,e,n){return null===(n=this.getLayer(n))?null:d.TileToWorldX(t,e,n)},tileToWorldY:function(t,e,n){return null===(n=this.getLayer(n))?null:d.TileToWorldY(t,e,n)},tileToWorldXY:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:d.TileToWorldXY(t,e,n,r,i)},weightedRandomize:function(t,e,n,r,i,o){return o=this.getLayer(o),this._isStaticCall(o,"weightedRandomize")?this:null===o?null:(d.WeightedRandomize(t,e,n,r,i,o),this)},worldToTileX:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.WorldToTileX(t,e,n,r)},worldToTileY:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.WorldToTileY(t,e,n,r)},worldToTileXY:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:d.WorldToTileXY(t,e,n,r,i,o)},_isStaticCall:function(t,e){return t.tilemapLayer instanceof l&&(console.warn(e+": You cannot change the tiles in a static tilemap layer"),!0)}});t.exports=m},function(t,e,n){var r=n(0),i=n(23),o=n(1636),s=n(24),a=n(238),u=new r({Extends:s,Mixins:[i.Alpha,i.BlendMode,i.ComputedSize,i.Depth,i.Flip,i.GetBounds,i.Origin,i.Pipeline,i.Transform,i.Visible,i.ScrollFactor,o],initialize:function(t,e,n,r,i,o){s.call(this,t,"DynamicTilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=n,this.layer=e.layers[n],this.layer.tilemapLayer=this,this.tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.CullTiles,this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(i,o),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline")},setTilesets:function(t){var e=[],n=[],r=this.tilemap;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if("string"==typeof o&&(o=r.getTileset(o)),o){n.push(o);for(var s=o.firstgid,a=0;a<o.total;a++)e[s+a]=o}}this.gidMap=e,this.tileset=n},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return a.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,n,r){return a.CalculateFacesWithin(t,e,n,r,this.layer),this},createFromTiles:function(t,e,n,r,i){return a.CreateFromTiles(t,e,n,r,i,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,n,r,i,o,s){return a.Copy(t,e,n,r,i,o,s,this.layer),this},destroy:function(t){void 0===t&&(t=!0),this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this)},fill:function(t,e,n,r,i,o){return a.Fill(t,e,n,r,i,o,this.layer),this},filterTiles:function(t,e,n,r,i,o,s){return a.FilterTiles(t,e,n,r,i,o,s,this.layer)},findByIndex:function(t,e,n){return a.FindByIndex(t,e,n,this.layer)},findTile:function(t,e,n,r,i,o,s){return a.FindTile(t,e,n,r,i,o,s,this.layer)},forEachTile:function(t,e,n,r,i,o,s){return a.ForEachTile(t,e,n,r,i,o,s,this.layer),this},getTileAt:function(t,e,n){return a.GetTileAt(t,e,n,this.layer)},getTileAtWorldXY:function(t,e,n,r){return a.GetTileAtWorldXY(t,e,n,r,this.layer)},getTilesWithin:function(t,e,n,r,i){return a.GetTilesWithin(t,e,n,r,i,this.layer)},getTilesWithinShape:function(t,e,n){return a.GetTilesWithinShape(t,e,n,this.layer)},getTilesWithinWorldXY:function(t,e,n,r,i,o){return a.GetTilesWithinWorldXY(t,e,n,r,i,o,this.layer)},hasTileAt:function(t,e){return a.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,n){return a.HasTileAtWorldXY(t,e,n,this.layer)},putTileAt:function(t,e,n,r){return a.PutTileAt(t,e,n,r,this.layer)},putTileAtWorldXY:function(t,e,n,r,i){return a.PutTileAtWorldXY(t,e,n,r,i,this.layer)},putTilesAt:function(t,e,n,r){return a.PutTilesAt(t,e,n,r,this.layer),this},randomize:function(t,e,n,r,i){return a.Randomize(t,e,n,r,i,this.layer),this},removeTileAt:function(t,e,n,r){return a.RemoveTileAt(t,e,n,r,this.layer)},removeTileAtWorldXY:function(t,e,n,r,i){return a.RemoveTileAtWorldXY(t,e,n,r,i,this.layer)},renderDebug:function(t,e){return a.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,n,r,i,o){return a.ReplaceByIndex(t,e,n,r,i,o,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,n){return a.SetCollision(t,e,n,this.layer),this},setCollisionBetween:function(t,e,n,r){return a.SetCollisionBetween(t,e,n,r,this.layer),this},setCollisionByProperty:function(t,e,n){return a.SetCollisionByProperty(t,e,n,this.layer),this},setCollisionByExclusion:function(t,e,n){return a.SetCollisionByExclusion(t,e,n,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return a.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,n){return a.SetTileIndexCallback(t,e,n,this.layer),this},setTileLocationCallback:function(t,e,n,r,i,o){return a.SetTileLocationCallback(t,e,n,r,i,o,this.layer),this},shuffle:function(t,e,n,r){return a.Shuffle(t,e,n,r,this.layer),this},swapByIndex:function(t,e,n,r,i,o){return a.SwapByIndex(t,e,n,r,i,o,this.layer),this},tileToWorldX:function(t,e){return a.TileToWorldX(t,e,this.layer)},tileToWorldY:function(t,e){return a.TileToWorldY(t,e,this.layer)},tileToWorldXY:function(t,e,n,r){return a.TileToWorldXY(t,e,n,r,this.layer)},weightedRandomize:function(t,e,n,r,i){return a.WeightedRandomize(t,e,n,r,i,this.layer),this},worldToTileX:function(t,e,n){return a.WorldToTileX(t,e,n,this.layer)},worldToTileY:function(t,e,n){return a.WorldToTileY(t,e,n,this.layer)},worldToTileXY:function(t,e,n,r,i){return a.WorldToTileXY(t,e,n,r,i,this.layer)}});t.exports=u},function(t,e,n){var r=n(0),i=n(23),o=n(58),s=n(24),a=n(1639),u=n(238),c=n(71),h=n(21),l=new r({Extends:s,Mixins:[i.Alpha,i.BlendMode,i.ComputedSize,i.Depth,i.Flip,i.GetBounds,i.Origin,i.Pipeline,i.Transform,i.Visible,i.ScrollFactor,a],initialize:function(t,e,n,r,i,a){s.call(this,t,"StaticTilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=n,this.layer=e.layers[n],this.layer.tilemapLayer=this,this.tileset=[],this.culledTiles=[],this.skipCull=!1,this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.CullTiles,this.renderer=t.sys.game.renderer,this.vertexBuffer=[],this.bufferData=[],this.vertexViewF32=[],this.vertexViewU32=[],this.dirty=[],this.vertexCount=[],this._renderOrder=0,this._tempMatrix=new c,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(i,a),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.updateVBOData(),this.initPipeline("TextureTintPipeline"),t.sys.game.config.renderType===o.WEBGL&&t.sys.game.renderer.onContextRestored(function(){this.updateVBOData()},this)},setTilesets:function(t){var e=[],n=[],r=this.tilemap;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if("string"==typeof o&&(o=r.getTileset(o)),o){n.push(o);for(var s=o.firstgid,a=0;a<o.total;a++)e[s+a]=o}}this.gidMap=e,this.tileset=n},updateVBOData:function(){for(var t=0;t<this.tileset.length;t++)this.dirty[t]=!0,this.vertexCount[t]=0,this.vertexBuffer[t]=null,this.bufferData[t]=null,this.vertexViewF32[t]=null,this.vertexViewU32[t]=null;return this},upload:function(t,e){var n=this.renderer,r=n.gl,i=n.pipelines.TextureTintPipeline;if(this.dirty[e]){var o,s,a,u=this.tileset[e],c=this.layer.width,h=this.layer.height,l=u.image.source[0].width,f=u.image.source[0].height,d=this.layer.data,p=this._renderOrder,m=u.firstgid,v=u.firstgid+u.total,g=this.vertexBuffer[e],y=this.bufferData[e],b=-1,x=c*h*i.vertexSize*6;if(this.vertexCount[e]=0,null===y&&(y=new ArrayBuffer(x),this.bufferData[e]=y,this.vertexViewF32[e]=new Float32Array(y),this.vertexViewU32[e]=new Uint32Array(y)),0===p)for(s=0;s<h;s++)for(a=0;a<c;a++)!(o=d[s][a])||o.index<m||o.index>v||!o.visible||(b=this.batchTile(b,o,u,l,f,t,e));else if(1===p)for(s=0;s<h;s++)for(a=c-1;a>=0;a--)!(o=d[s][a])||o.index<m||o.index>v||!o.visible||(b=this.batchTile(b,o,u,l,f,t,e));else if(2===p)for(s=h-1;s>=0;s--)for(a=0;a<c;a++)!(o=d[s][a])||o.index<m||o.index>v||!o.visible||(b=this.batchTile(b,o,u,l,f,t,e));else if(3===p)for(s=h-1;s>=0;s--)for(a=c-1;a>=0;a--)!(o=d[s][a])||o.index<m||o.index>v||!o.visible||(b=this.batchTile(b,o,u,l,f,t,e));this.dirty[e]=!1,null===g?(g=n.createVertexBuffer(y,r.STATIC_DRAW),this.vertexBuffer[e]=g):(n.setVertexBuffer(g),r.bufferSubData(r.ARRAY_BUFFER,0,y))}return this},batchTile:function(t,e,n,r,i,o,s){var a=n.getTileTextureCoordinates(e.index);if(!a)return t;var u=n.tileWidth,c=n.tileHeight,l=u/2,f=c/2,d=a.x/r,p=a.y/i,m=(a.x+u)/r,v=(a.y+c)/i,g=this._tempMatrix,y=-l,b=-f;e.flipX&&(u*=-1,y+=n.tileWidth),e.flipY&&(c*=-1,b+=n.tileHeight);var x=y+u,w=b+c;g.applyITRS(l+e.pixelX,f+e.pixelY,e.rotation,1,1);var E=h.getTintAppendFloatAlpha(16777215,o.alpha*this.alpha*e.alpha),_=g.getX(y,b),S=g.getY(y,b),T=g.getX(y,w),A=g.getY(y,w),M=g.getX(x,w),C=g.getY(x,w),O=g.getX(x,b),N=g.getY(x,b);o.roundPixels&&(_=Math.round(_),S=Math.round(S),T=Math.round(T),A=Math.round(A),M=Math.round(M),C=Math.round(C),O=Math.round(O),N=Math.round(N));var k=this.vertexViewF32[s],R=this.vertexViewU32[s];return k[++t]=_,k[++t]=S,k[++t]=d,k[++t]=p,k[++t]=0,R[++t]=E,k[++t]=T,k[++t]=A,k[++t]=d,k[++t]=v,k[++t]=0,R[++t]=E,k[++t]=M,k[++t]=C,k[++t]=m,k[++t]=v,k[++t]=0,R[++t]=E,k[++t]=_,k[++t]=S,k[++t]=d,k[++t]=p,k[++t]=0,R[++t]=E,k[++t]=M,k[++t]=C,k[++t]=m,k[++t]=v,k[++t]=0,R[++t]=E,k[++t]=O,k[++t]=N,k[++t]=m,k[++t]=p,k[++t]=0,R[++t]=E,this.vertexCount[s]+=6,t},setRenderOrder:function(t){if("string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4){this._renderOrder=t;for(var e=0;e<this.tileset.length;e++)this.dirty[e]=!0}return this},calculateFacesAt:function(t,e){return u.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,n,r){return u.CalculateFacesWithin(t,e,n,r,this.layer),this},createFromTiles:function(t,e,n,r,i){return u.CreateFromTiles(t,e,n,r,i,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles)},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},findByIndex:function(t,e,n){return u.FindByIndex(t,e,n,this.layer)},findTile:function(t,e,n,r,i,o,s){return u.FindTile(t,e,n,r,i,o,s,this.layer)},filterTiles:function(t,e,n,r,i,o,s){return u.FilterTiles(t,e,n,r,i,o,s,this.layer)},forEachTile:function(t,e,n,r,i,o,s){return u.ForEachTile(t,e,n,r,i,o,s,this.layer),this},getTileAt:function(t,e,n){return u.GetTileAt(t,e,n,this.layer)},getTileAtWorldXY:function(t,e,n,r){return u.GetTileAtWorldXY(t,e,n,r,this.layer)},getTilesWithin:function(t,e,n,r,i){return u.GetTilesWithin(t,e,n,r,i,this.layer)},getTilesWithinWorldXY:function(t,e,n,r,i,o){return u.GetTilesWithinWorldXY(t,e,n,r,i,o,this.layer)},getTilesWithinShape:function(t,e,n){return u.GetTilesWithinShape(t,e,n,this.layer)},hasTileAt:function(t,e){return u.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,n){return u.HasTileAtWorldXY(t,e,n,this.layer)},renderDebug:function(t,e){return u.RenderDebug(t,e,this.layer),this},setCollision:function(t,e,n){return u.SetCollision(t,e,n,this.layer),this},setCollisionBetween:function(t,e,n,r){return u.SetCollisionBetween(t,e,n,r,this.layer),this},setCollisionByProperty:function(t,e,n){return u.SetCollisionByProperty(t,e,n,this.layer),this},setCollisionByExclusion:function(t,e,n){return u.SetCollisionByExclusion(t,e,n,this.layer),this},setTileIndexCallback:function(t,e,n){return u.SetTileIndexCallback(t,e,n,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return u.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileLocationCallback:function(t,e,n,r,i,o){return u.SetTileLocationCallback(t,e,n,r,i,o,this.layer),this},tileToWorldX:function(t,e){return u.TileToWorldX(t,e,this.layer)},tileToWorldY:function(t,e){return u.TileToWorldY(t,e,this.layer)},tileToWorldXY:function(t,e,n,r){return u.TileToWorldXY(t,e,n,r,this.layer)},worldToTileX:function(t,e,n){return u.WorldToTileX(t,e,n,this.layer)},worldToTileY:function(t,e,n){return u.WorldToTileY(t,e,n,this.layer)},worldToTileXY:function(t,e,n,r,i){return u.WorldToTileXY(t,e,n,r,i,this.layer)},destroy:function(t){void 0===t&&(t=!0),this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null;for(var e=0;e<this.tileset.length;e++)this.dirty[e]=!0,this.vertexCount[e]=0,this.vertexBuffer[e]=null,this.bufferData[e]=null,this.vertexViewF32[e]=null,this.vertexViewU32[e]=null;this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this)}});t.exports=l},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=i(t,"delay",0),this.repeat=i(t,"repeat",0),this.loop=i(t,"loop",!1),this.callback=i(t,"callback",void 0),this.callbackScope=i(t,"callbackScope",this.callback),this.args=i(t,"args",[]),this.timeScale=i(t,"timeScale",1),this.startAt=i(t,"startAt",0),this.paused=i(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=o},function(t,e,n){var r=n(1648);t.exports=function(t){var e,n=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&n.push({key:e,value:t.props[e]});else for(e in t)-1===r.indexOf(e)&&"_"!==e.substr(0,1)&&n.push({key:e,value:t[e]});return n}},function(t,e,n){var r=n(14);t.exports=function(t){var e=r(t,"tweens",null);return null===e?[]:("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,n){var r=n(360),i=n(25),o=n(173),s=n(182),a=n(243),u=n(14),c=n(359),h=n(361),l=n(362);t.exports=function(t,e,n){void 0===n&&(n=r);var f=u(e,"from",0),d=u(e,"to",1),p=[{value:f}],m=a(e,"delay",n.delay),v=a(e,"duration",n.duration),g=u(e,"easeParams",n.easeParams),y=s(u(e,"ease",n.ease),g),b=a(e,"hold",n.hold),x=a(e,"repeat",n.repeat),w=a(e,"repeatDelay",n.repeatDelay),E=o(e,"yoyo",n.yoyo),_=[],S=c("value",d),T=l(p[0],"value",S.getEnd,S.getStart,y,m,v,E,b,x,w,!1,!1);T.start=f,T.current=f,T.to=d,_.push(T);var A=new h(t,_,p);A.offset=i(e,"offset",null),A.completeDelay=i(e,"completeDelay",0),A.loop=Math.round(i(e,"loop",0)),A.loopDelay=Math.round(i(e,"loopDelay",0)),A.paused=o(e,"paused",!1),A.useFrames=o(e,"useFrames",!1);for(var M=u(e,"callbackScope",A),C=[A,null],O=h.TYPES,N=0;N<O.length;N++){var k=O[N],R=u(e,k,!1);if(R){var P=u(e,k+"Scope",M),I=u(e,k+"Params",[]);A.setCallback(k,R,C.concat(I),P)}}return A}},function(t,e,n){var r=n(125),i=n(360),o=n(25),s=n(173),a=n(182),u=n(243),c=n(358),h=n(673),l=n(14),f=n(676),d=n(244);t.exports=function(t,e){var n=new f(t),p=h(e);if(0===p.length)return n.paused=!0,n;var m=r(i);m.targets=c(e);var v=o(e,"totalDuration",0);m.duration=v>0?Math.floor(v/p.length):u(e,"duration",m.duration),m.delay=u(e,"delay",m.delay),m.easeParams=l(e,"easeParams",m.easeParams),m.ease=a(l(e,"ease",m.ease),m.easeParams),m.hold=u(e,"hold",m.hold),m.repeat=u(e,"repeat",m.repeat),m.repeatDelay=u(e,"repeatDelay",m.repeatDelay),m.yoyo=s(e,"yoyo",m.yoyo),m.flipX=s(e,"flipX",m.flipX),m.flipY=s(e,"flipY",m.flipY);for(var g=0;g<p.length;g++)n.queue(d(n,p[g],m));n.completeDelay=o(e,"completeDelay",0),n.loop=Math.round(o(e,"loop",0)),n.loopDelay=Math.round(o(e,"loopDelay",0)),n.paused=s(e,"paused",!1),n.useFrames=s(e,"useFrames",!1);var y=l(e,"callbackScope",n),b=[n],x=l(e,"onStart",!1);if(x){var w=l(e,"onStartScope",y),E=l(e,"onStartParams",[]);n.setCallback("onStart",x,b.concat(E),w)}var _=l(e,"onUpdate",!1);if(_){var S=l(e,"onUpdateScope",y),T=l(e,"onUpdateParams",[]);n.setCallback("onUpdate",_,b.concat(T),S)}var A=l(e,"onLoop",!1);if(A){var M=l(e,"onLoopScope",y),C=l(e,"onLoopParams",[]);n.setCallback("onLoop",A,b.concat(C),M)}var O=l(e,"onYoyo",!1);if(O){var N=l(e,"onYoyoScope",y),k=l(e,"onYoyoParams",[]);n.setCallback("onYoyo",O,b.concat(null,k),N)}var R=l(e,"onComplete",!1);if(R){var P=l(e,"onCompleteScope",y),I=l(e,"onCompleteParams",[]);n.setCallback("onComplete",R,b.concat(I),P)}return n}},function(t,e,n){var r=n(0),i=n(20),o=n(677),s=n(244),a=n(174),u=new r({Extends:i,initialize:function(t){i.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(t){return this.queue(s(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"===typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var n=t[0],r=parseFloat(t.substr(2)),i=e;switch(n){case"+":i+=r;break;case"-":i-=r}return Math.max(0,i)},calcDuration:function(){for(var t=0,e=0,n=0,r=0;r<this.totalData;r++){var i=this.data[r];i.init(),this.hasOffset(i)?this.isOffsetAbsolute(i.offset)?(i.calculatedOffset=i.offset,0===i.offset&&(n=0)):this.isOffsetRelative(i.offset)&&(i.calculatedOffset=this.getRelativeOffset(i.offset,t)):i.calculatedOffset=n,t=i.totalDuration+i.calculatedOffset,e+=i.totalDuration,n+=i.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=a.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++){this.data[e].play(t)}},setCallback:function(t,e,n,r){return-1!==u.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:r,params:n}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==a.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=a.ACTIVE;var t=this.callbacks.onStart;t&&t.func.apply(t.scope,t.params),this.emit(o.TIMELINE_START,this)}},nextState:function(){if(this.loopCounter>0){this.elapsed=0,this.progress=0,this.loopCounter--;var t=this.callbacks.onLoop;t&&t.func.apply(t.scope,t.params),this.emit(o.TIMELINE_LOOP,this,this.loopCounter),this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):this.state=a.ACTIVE}else if(this.completeDelay>0)this.countdown=this.completeDelay,this.state=a.COMPLETE_DELAY;else{this.state=a.PENDING_REMOVE;var e=this.callbacks.onComplete;e&&e.func.apply(e.scope,e.params),this.emit(o.TIMELINE_COMPLETE,this)}},update:function(t,e){if(this.state!==a.PAUSED){switch(this.useFrames&&(e=1*this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var n=this.totalData,r=0;r<this.totalData;r++){this.data[r].update(t,e)&&n--}var i=this.callbacks.onUpdate;i&&i.func.apply(i.scope,i.params),this.emit(o.TIMELINE_UPDATE,this),0===n&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.ACTIVE);break;case a.COMPLETE_DELAY:if(this.countdown-=e,this.countdown<=0){this.state=a.PENDING_REMOVE;var s=this.callbacks.onComplete;s&&s.func.apply(s.scope,s.params),this.emit(o.TIMELINE_COMPLETE,this)}}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(o.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(o.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});u.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=u},function(t,e,n){t.exports={TIMELINE_COMPLETE:n(1649),TIMELINE_LOOP:n(1650),TIMELINE_PAUSE:n(1651),TIMELINE_RESUME:n(1652),TIMELINE_START:n(1653),TIMELINE_UPDATE:n(1654)}},function(t,e,n){var r=n(363),i=n(0),o=new(n(147)),s=new i({Extends:r,initialize:function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),r.call(this,t),this.viewportWidth=e,this.viewportHeight=n,this._zoom=1,this.near=0,this.update()},setToOrtho:function(t,e,n){void 0===e&&(e=this.viewportWidth),void 0===n&&(n=this.viewportHeight);var r=this.zoom;return this.up.set(0,t?-1:1,0),this.direction.set(0,0,t?1:-1),this.position.set(r*e/2,r*n/2,0),this.viewportWidth=e,this.viewportHeight=n,this.update()},update:function(){var t=this.viewportWidth,e=this.viewportHeight,n=Math.abs(this.near),r=Math.abs(this.far),i=this.zoom;return 0===t||0===e?this:(this.projection.ortho(i*-t/2,i*t/2,i*-e/2,i*e/2,n,r),o.copy(this.position).add(this.direction),this.view.lookAt(this.position,o,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this)},zoom:{get:function(){return this._zoom},set:function(t){this._zoom=t,this.update()}}});t.exports=s},function(t,e,n){var r=n(363),i=n(0),o=new(n(147)),s=new i({Extends:r,initialize:function(t,e,n,i){void 0===e&&(e=80),void 0===n&&(n=0),void 0===i&&(i=0),r.call(this,t),this.viewportWidth=n,this.viewportHeight=i,this.fieldOfView=e*Math.PI/180,this.update()},setFOV:function(t){return this.fieldOfView=t*Math.PI/180,this},update:function(){var t=this.viewportWidth/this.viewportHeight;return this.projection.perspective(this.fieldOfView,t,Math.abs(this.near),Math.abs(this.far)),o.copy(this.position).add(this.direction),this.view.lookAt(this.position,o,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this}});t.exports=s},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(1675),o=n(7).digits,s=n(364),a=n(190),u=function(){return u=i.create,i};e.create=function(t){t.isNumber=function(t){return"number"==typeof t},t.isComplex=function(e){return t.Complex&&e instanceof t.Complex||!1},t.isBigNumber=s,t.isFraction=function(e){return t.Fraction&&e instanceof t.Fraction||!1},t.isUnit=function(t){return t&&t.constructor.prototype.isUnit||!1},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray,t.isMatrix=a,t.isDenseMatrix=function(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix||!1},t.isSparseMatrix=function(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix||!1},t.isRange=function(t){return t&&t.constructor.prototype.isRange||!1},t.isIndex=function(t){return t&&t.constructor.prototype.isIndex||!1},t.isBoolean=function(t){return"boolean"==typeof t},t.isResultSet=function(t){return t&&t.constructor.prototype.isResultSet||!1},t.isHelp=function(t){return t&&t.constructor.prototype.isHelp||!1},t.isFunction=function(t){return"function"==typeof t},t.isDate=function(t){return t instanceof Date},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=function(e){return"object"===r(e)&&e.constructor===Object&&!t.isComplex(e)&&!t.isFraction(e)},t.isNull=function(t){return null===t},t.isUndefined=function(t){return void 0===t},t.isAccessorNode=function(t){return t&&t.isAccessorNode&&t.constructor.prototype.isNode||!1},t.isArrayNode=function(t){return t&&t.isArrayNode&&t.constructor.prototype.isNode||!1},t.isAssignmentNode=function(t){return t&&t.isAssignmentNode&&t.constructor.prototype.isNode||!1},t.isBlockNode=function(t){return t&&t.isBlockNode&&t.constructor.prototype.isNode||!1},t.isConditionalNode=function(t){return t&&t.isConditionalNode&&t.constructor.prototype.isNode||!1},t.isConstantNode=function(t){return t&&t.isConstantNode&&t.constructor.prototype.isNode||!1},t.isFunctionAssignmentNode=function(t){return t&&t.isFunctionAssignmentNode&&t.constructor.prototype.isNode||!1},t.isFunctionNode=function(t){return t&&t.isFunctionNode&&t.constructor.prototype.isNode||!1},t.isIndexNode=function(t){return t&&t.isIndexNode&&t.constructor.prototype.isNode||!1},t.isNode=function(t){return t&&t.isNode&&t.constructor.prototype.isNode||!1},t.isObjectNode=function(t){return t&&t.isObjectNode&&t.constructor.prototype.isNode||!1},t.isOperatorNode=function(t){return t&&t.isOperatorNode&&t.constructor.prototype.isNode||!1},t.isParenthesisNode=function(t){return t&&t.isParenthesisNode&&t.constructor.prototype.isNode||!1},t.isRangeNode=function(t){return t&&t.isRangeNode&&t.constructor.prototype.isNode||!1},t.isSymbolNode=function(t){return t&&t.isSymbolNode&&t.constructor.prototype.isNode||!1},t.isChain=function(t){return t&&t.constructor.prototype.isChain||!1};var e=u();return e.types=[{name:"number",test:t.isNumber},{name:"Complex",test:t.isComplex},{name:"BigNumber",test:t.isBigNumber},{name:"Fraction",test:t.isFraction},{name:"Unit",test:t.isUnit},{name:"string",test:t.isString},{name:"Array",test:t.isArray},{name:"Matrix",test:t.isMatrix},{name:"DenseMatrix",test:t.isDenseMatrix},{name:"SparseMatrix",test:t.isSparseMatrix},{name:"Range",test:t.isRange},{name:"Index",test:t.isIndex},{name:"boolean",test:t.isBoolean},{name:"ResultSet",test:t.isResultSet},{name:"Help",test:t.isHelp},{name:"function",test:t.isFunction},{name:"Date",test:t.isDate},{name:"RegExp",test:t.isRegExp},{name:"null",test:t.isNull},{name:"undefined",test:t.isUndefined},{name:"OperatorNode",test:t.isOperatorNode},{name:"ConstantNode",test:t.isConstantNode},{name:"SymbolNode",test:t.isSymbolNode},{name:"ParenthesisNode",test:t.isParenthesisNode},{name:"FunctionNode",test:t.isFunctionNode},{name:"FunctionAssignmentNode",test:t.isFunctionAssignmentNode},{name:"ArrayNode",test:t.isArrayNode},{name:"AssignmentNode",test:t.isAssignmentNode},{name:"BlockNode",test:t.isBlockNode},{name:"ConditionalNode",test:t.isConditionalNode},{name:"IndexNode",test:t.isIndexNode},{name:"RangeNode",test:t.isRangeNode},{name:"Node",test:t.isNode},{name:"Object",test:t.isObject}],e.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(o(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t.BigNumber(e)}},{from:"number",to:"Complex",convert:function(e){return new t.Complex(e,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(e){return new t.Complex(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return new t.Complex(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){if(new t.Fraction(e).valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return new t.Fraction(e)}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(e){try{return new t.BigNumber(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){try{return new t.Fraction(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){try{return new t.Complex(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(e){return new t.BigNumber(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return new t.Fraction(+e)}},{from:"boolean",to:"string",convert:function(t){return+t}},{from:"Array",to:"Matrix",convert:function(e){return new t.DenseMatrix(e)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],e}},function(t,e,n){"use strict";var r=n(1676);e.mixin=function(t){var e=new r;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}},function(t,e,n){"use strict";var r=n(4);e.name="bignumber",e.factory=function(t,e,n,i){var o=i("bignumber",{"":function(){return new t.BigNumber(0)},number:function(e){return new t.BigNumber(e+"")},string:function(e){return new t.BigNumber(e)},BigNumber:function(t){return t},Fraction:function(e){return new t.BigNumber(e.n).div(e.d).times(e.s)},null:function(e){return new t.BigNumber(0)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={0:"0",1:"\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(7);e.name="Range",e.path="type",e.factory=function(t,e,n,i){function o(e,n,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");var i=null!=e,s=null!=n,a=null!=r;if(i)if(t.isBigNumber(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(s)if(t.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(a)if(t.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(e):0,this.end=s?parseFloat(n):0,this.step=a?parseFloat(r):1}return o.prototype.type="Range",o.prototype.isRange=!0,o.parse=function(t){if("string"!=typeof t)return null;var e=t.split(":").map(function(t){return parseFloat(t)});if(e.some(function(t){return isNaN(t)}))return null;switch(e.length){case 2:return new o(e[0],e[1]);case 3:return new o(e[0],e[2],e[1]);default:return null}},o.prototype.clone=function(){return new o(this.start,this.end,this.step)},o.prototype.size=function(){var t=0,e=this.start,n=this.step,i=this.end-e;return r.sign(n)===r.sign(i)?t=Math.ceil(i/n):0===i&&(t=0),isNaN(t)&&(t=0),[t]},o.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},o.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},o.prototype.forEach=function(t){var e=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;e<r;)t(e,[i],this),e+=n,i++;else if(n<0)for(;e>r;)t(e,[i],this),e+=n,i++},o.prototype.map=function(t){var e=[];return this.forEach(function(n,r,i){e[r[0]]=t(n,r,i)}),e},o.prototype.toArray=function(){var t=[];return this.forEach(function(e,n){t[n[0]]=e}),t},o.prototype.valueOf=function(){return this.toArray()},o.prototype.format=function(t){var e=r.format(this.start,t);return 1!==this.step&&(e+=":"+r.format(this.step,t)),e+=":"+r.format(this.end,t)},o.prototype.toString=function(){return this.format()},o.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},o.fromJSON=function(t){return new o(t.start,t.end,t.step)},o}},function(t,e,n){"use strict";e.name="ResultSet",e.path="type",e.factory=function(t,e,n,r){function i(t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return i.prototype.type="ResultSet",i.prototype.isResultSet=!0,i.prototype.valueOf=function(){return this.entries},i.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},i.fromJSON=function(t){return new i(t.entries)},i}},function(t,e,n){"use strict";var r=n(117).memoize;function i(t){return t[0].precision}e.e=r(function(t){return new t(1).exp()},i),e.phi=r(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},i),e.pi=r(function(t){return t.acos(-1)},i),e.tau=r(function(t){return e.pi(t).times(2)},i)},function(t,e,n){"use strict";var r=n(4);e.name="fix",e.factory=function(t,e,i,o){var s=i(n(688)),a=i(n(689)),u=o("fix",{number:function(t){return t>0?a(t):s(t)},Complex:function(e){return new t.Complex(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},BigNumber:function(t){return t.isNegative()?s(t):a(t)},Fraction:function(t){return t.s<0?t.ceil():t.floor()},"Array | Matrix":function(t){return r(t,u,!0)}});return u.toTex={1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},u}},function(t,e,n){"use strict";var r=n(4),i=n(7).nearlyEqual,o=n(105);e.name="ceil",e.factory=function(t,e,s,a){var u=s(n(251)),c=a("ceil",{number:function(t){return i(t,u(t),e.epsilon)?u(t):Math.ceil(t)},Complex:function(t){return t.ceil()},BigNumber:function(t){return o(t,u(t),e.epsilon)?u(t):t.ceil()},Fraction:function(t){return t.ceil()},"Array | Matrix":function(t){return r(t,c,!0)}});return c.toTex={1:"\\left\\lceil${args[0]}\\right\\rceil"},c}},function(t,e,n){"use strict";var r=n(4),i=n(7).nearlyEqual,o=n(105);e.name="floor",e.factory=function(t,e,s,a){var u=s(n(251)),c=a("floor",{number:function(t){return i(t,u(t),e.epsilon)?u(t):Math.floor(t)},Complex:function(t){return t.floor()},BigNumber:function(t){return o(t,u(t),e.epsilon)?u(t):t.floor()},Fraction:function(t){return t.floor()},"Array | Matrix":function(t){return r(t,c,!0)}});return c.toTex={1:"\\left\\lfloor${args[0]}\\right\\rfloor"},c}},function(t,e,n){"use strict";var r=n(26);e.name="format",e.factory=function(t,e,n,i){var o=i("format",{any:r.format,"any, Object | function | number":r.format});return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(45).getSafeProperty;e.name="AccessorNode",e.path="expression.node",e.factory=function(t,e,i,o){var s=i(n(49)),a=i(n(693));function u(e,n){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError('Node expected for parameter "object"');if(!t.isIndexNode(n))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=n,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function c(e){return!(t.isAccessorNode(e)||t.isArrayNode(e)||t.isConstantNode(e)||t.isFunctionNode(e)||t.isObjectNode(e)||t.isParenthesisNode(e)||t.isSymbolNode(e))}return u.prototype=new s,u.prototype.type="AccessorNode",u.prototype.isAccessorNode=!0,u.prototype._compile=function(t,e){var n=this.object._compile(t,e),i=this.index._compile(t,e);if(this.index.isObjectProperty()){var o=this.index.getObjectProperty();return function(t,e,i){return r(n(t,e,i),o)}}return function(t,e,r){var o=n(t,e,r),s=i(t,e,o);return a(o,s)}},u.prototype.forEach=function(t){t(this.object,"object",this),t(this.index,"index",this)},u.prototype.map=function(t){return new u(this._ifNode(t(this.object,"object",this)),this._ifNode(t(this.index,"index",this)))},u.prototype.clone=function(){return new u(this.object,this.index)},u.prototype._toString=function(t){var e=this.object.toString(t);return c(this.object)&&(e="("+e+")"),e+this.index.toString(t)},u.prototype.toHTML=function(t){var e=this.object.toHTML(t);return c(this.object)&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+this.index.toHTML(t)},u.prototype._toTex=function(t){var e=this.object.toTex(t);return c(this.object)&&(e="\\left(' + object + '\\right)"),e+this.index.toTex(t)},u.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},u.fromJSON=function(t){return new u(t.object,t.index)},u}},function(t,e,n){"use strict";t.exports={end:!0}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(63).transform,o=n(45).getSafeProperty;e.factory=function(t,e,s,a){var u=s(n(64));return function(t,e){try{if(Array.isArray(t))return u(t,e);if(t&&"function"==typeof t.subset)return t.subset(e);if("string"==typeof t)return u(t,e);if("object"===r(t)){if(!e.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return o(t,e.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw i(t)}}}},function(t,e,n){"use strict";var r=n(5).map;e.name="ArrayNode",e.path="expression.node",e.factory=function(t,e,i,o){var s=i(n(49));function a(e){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(t.isNode))throw new TypeError("Array containing Nodes expected");var n=function(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")};Object.defineProperty(this,"nodes",{get:n,set:n})}return a.prototype=new s,a.prototype.type="ArrayNode",a.prototype.isArrayNode=!0,a.prototype._compile=function(t,e){var n=r(this.items,function(n){return n._compile(t,e)});if("Array"!==t.config().matrix){var i=t.matrix;return function(t,e,o){return i(r(n,function(n){return n(t,e,o)}))}}return function(t,e,i){return r(n,function(n){return n(t,e,i)})}},a.prototype.forEach=function(t){for(var e=0;e<this.items.length;e++)t(this.items[e],"items["+e+"]",this)},a.prototype.map=function(t){for(var e=[],n=0;n<this.items.length;n++)e[n]=this._ifNode(t(this.items[n],"items["+n+"]",this));return new a(e)},a.prototype.clone=function(){return new a(this.items.slice(0))},a.prototype._toString=function(t){return"["+this.items.map(function(e){return e.toString(t)}).join(", ")+"]"},a.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},a.fromJSON=function(t){return new a(t.items)},a.prototype.toHTML=function(t){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map(function(e){return e.toHTML(t)}).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},a.prototype._toTex=function(t){var e="\\begin{bmatrix}";return this.items.forEach(function(n){n.items?e+=n.items.map(function(e){return e.toTex(t)}).join("&"):e+=n.toTex(t),e+="\\\\"}),e+="\\end{bmatrix}"},a}},function(t,e,n){"use strict";var r=n(45).getSafeProperty,i=n(45).setSafeProperty;e.name="AssignmentNode",e.path="expression.node",e.factory=function(t,e,o,s){var a=o(n(49)),u=o(n(1717)),c=o(n(693)),h=n(164);function l(e,n,r){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=r?n:null,this.value=r||n,!t.isSymbolNode(e)&&!t.isAccessorNode(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(t.isSymbolNode(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!t.isIndexNode(this.index))throw new TypeError('IndexNode expected as "index"');if(!t.isNode(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function f(t,e){e||(e="keep");var n=h.getPrecedence(t,e),r=h.getPrecedence(t.value,e);return"all"===e||null!==r&&r<=n}return l.prototype=new a,l.prototype.type="AssignmentNode",l.prototype.isAssignmentNode=!0,l.prototype._compile=function(e,n){var o=this.object._compile(e,n),s=this.index?this.index._compile(e,n):null,a=this.value._compile(e,n),h=this.object.name;if(this.index){if(this.index.isObjectProperty()){var l=this.index.getObjectProperty();return function(t,e,n){var r=o(t,e,n),s=a(t,e,n);return i(r,l,s)}}if(t.isSymbolNode(this.object))return function(t,e,n){var r=o(t,e,n),c=a(t,e,n),l=s(t,e,r);return i(t,h,u(r,l,c)),c};var f=this.object.object._compile(e,n);if(this.object.index.isObjectProperty()){var d=this.object.index.getObjectProperty();return function(t,e,n){var o=f(t,e,n),c=r(o,d),h=s(t,e,c),l=a(t,e,n);return i(o,d,u(c,h,l)),l}}var p=this.object.index._compile(e,n);return function(t,e,n){var r=f(t,e,n),i=p(t,e,r),o=c(r,i),h=s(t,e,o),l=a(t,e,n);return u(r,i,u(o,h,l)),l}}if(!t.isSymbolNode(this.object))throw new TypeError("SymbolNode expected as object");return function(t,e,n){return i(t,h,a(t,e,n))}},l.prototype.forEach=function(t){t(this.object,"object",this),this.index&&t(this.index,"index",this),t(this.value,"value",this)},l.prototype.map=function(t){return new l(this._ifNode(t(this.object,"object",this)),this.index?this._ifNode(t(this.index,"index",this)):null,this._ifNode(t(this.value,"value",this)))},l.prototype.clone=function(){return new l(this.object,this.index,this.value)},l.prototype._toString=function(t){var e=this.object.toString(t),n=this.index?this.index.toString(t):"",r=this.value.toString(t);return f(this,t&&t.parenthesis)&&(r="("+r+")"),e+n+" = "+r},l.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},l.fromJSON=function(t){return new l(t.object,t.index,t.value)},l.prototype.toHTML=function(t){var e=this.object.toHTML(t),n=this.index?this.index.toHTML(t):"",r=this.value.toHTML(t);return f(this,t&&t.parenthesis)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),e+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r},l.prototype._toTex=function(t){var e=this.object.toTex(t),n=this.index?this.index.toTex(t):"",r=this.value.toTex(t);return f(this,t&&t.parenthesis)&&(r="\\left(".concat(r,"\\right)")),e+n+":="+r},l}},function(t,e,n){"use strict";var r=n(5).forEach,i=n(5).map;e.name="BlockNode",e.path="expression.node",e.factory=function(t,e,o,s){var a=o(n(49)),u=o(n(685));function c(e){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map(function(e){var n=e&&e.node,r=!e||void 0===e.visible||e.visible;if(!t.isNode(n))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof r)throw new TypeError('Property "visible" must be a boolean');return{node:n,visible:r}})}return c.prototype=new a,c.prototype.type="BlockNode",c.prototype.isBlockNode=!0,c.prototype._compile=function(t,e){var n=i(this.blocks,function(n){return{eval:n.node._compile(t,e),visible:n.visible}});return function(t,e,i){var o=[];return r(n,function(n){var r=n.eval(t,e,i);n.visible&&o.push(r)}),new u(o)}},c.prototype.forEach=function(t){for(var e=0;e<this.blocks.length;e++)t(this.blocks[e].node,"blocks["+e+"].node",this)},c.prototype.map=function(t){for(var e=[],n=0;n<this.blocks.length;n++){var r=this.blocks[n],i=this._ifNode(t(r.node,"blocks["+n+"].node",this));e[n]={node:i,visible:r.visible}}return new c(e)},c.prototype.clone=function(){return new c(this.blocks.map(function(t){return{node:t.node,visible:t.visible}}))},c.prototype._toString=function(t){return this.blocks.map(function(e){return e.node.toString(t)+(e.visible?"":";")}).join("\n")},c.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},c.fromJSON=function(t){return new c(t.blocks)},c.prototype.toHTML=function(t){return this.blocks.map(function(e){return e.node.toHTML(t)+(e.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')},c.prototype._toTex=function(t){return this.blocks.map(function(e){return e.node.toTex(t)+(e.visible?"":";")}).join("\\;\\;\n")},c}},function(t,e,n){"use strict";var r=n(164);e.name="ConditionalNode",e.path="expression.node",e.factory=function(t,e,i,o){var s=i(n(49)),a=i(n(75));function u(e,n,r){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError("Parameter condition must be a Node");if(!t.isNode(n))throw new TypeError("Parameter trueExpr must be a Node");if(!t.isNode(r))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=n,this.falseExpr=r}return u.prototype=new s,u.prototype.type="ConditionalNode",u.prototype.isConditionalNode=!0,u.prototype._compile=function(e,n){var r=this.condition._compile(e,n),i=this.trueExpr._compile(e,n),o=this.falseExpr._compile(e,n);return function(e,n,s){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(t.isBigNumber(e))return!e.isZero();if(t.isComplex(e))return!(!e.re&&!e.im);if(t.isUnit(e))return!!e.value}if(null==e)return!1;throw new TypeError('Unsupported type of condition "'+a(e)+'"')}(r(e,n,s))?i(e,n,s):o(e,n,s)}},u.prototype.forEach=function(t){t(this.condition,"condition",this),t(this.trueExpr,"trueExpr",this),t(this.falseExpr,"falseExpr",this)},u.prototype.map=function(t){return new u(this._ifNode(t(this.condition,"condition",this)),this._ifNode(t(this.trueExpr,"trueExpr",this)),this._ifNode(t(this.falseExpr,"falseExpr",this)))},u.prototype.clone=function(){return new u(this.condition,this.trueExpr,this.falseExpr)},u.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),i=this.condition.toString(t),o=r.getPrecedence(this.condition,e);("all"===e||"OperatorNode"===this.condition.type||null!==o&&o<=n)&&(i="("+i+")");var s=this.trueExpr.toString(t),a=r.getPrecedence(this.trueExpr,e);("all"===e||"OperatorNode"===this.trueExpr.type||null!==a&&a<=n)&&(s="("+s+")");var u=this.falseExpr.toString(t),c=r.getPrecedence(this.falseExpr,e);return("all"===e||"OperatorNode"===this.falseExpr.type||null!==c&&c<=n)&&(u="("+u+")"),i+" ? "+s+" : "+u},u.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},u.fromJSON=function(t){return new u(t.condition,t.trueExpr,t.falseExpr)},u.prototype.toHTML=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),i=this.condition.toHTML(t),o=r.getPrecedence(this.condition,e);("all"===e||"OperatorNode"===this.condition.type||null!==o&&o<=n)&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.trueExpr.toHTML(t),a=r.getPrecedence(this.trueExpr,e);("all"===e||"OperatorNode"===this.trueExpr.type||null!==a&&a<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var u=this.falseExpr.toHTML(t),c=r.getPrecedence(this.falseExpr,e);return("all"===e||"OperatorNode"===this.falseExpr.type||null!==c&&c<=n)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i+'<span class="math-operator math-conditional-operator">?</span>'+s+'<span class="math-operator math-conditional-operator">:</span>'+u},u.prototype._toTex=function(t){return"\\begin{cases} {"+this.trueExpr.toTex(t)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(t)+"}\\\\{"+this.falseExpr.toTex(t)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},u}},function(t,e,n){"use strict";var r=n(692),i=n(26).escape,o=n(5).forEach,s=n(5).join,a=n(9),u=n(164),c=n(45).setSafeProperty;e.name="FunctionAssignmentNode",e.path="expression.node",e.factory=function(t,e,h,l){var f=h(n(49));function d(e,n,i){if(!(this instanceof d))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(n))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!t.isNode(i))throw new TypeError('Node expected for parameter "expr"');if(e in r)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=n.map(function(t){return t&&t.name||t}),this.types=n.map(function(t){return t&&t.type||"any"}),this.expr=i}function p(t,e){var n=u.getPrecedence(t,e),r=u.getPrecedence(t.expr,e);return"all"===e||null!==r&&r<=n}return d.prototype=new f,d.prototype.type="FunctionAssignmentNode",d.prototype.isFunctionAssignmentNode=!0,d.prototype._compile=function(t,e){var n=Object.create(e);o(this.params,function(t){n[t]=!0});var r=this.expr._compile(t,n),i=this.name,a=this.params,u=s(this.types,","),h=i+"("+s(this.params,", ")+")";return function(t,e,n){var o={};o[u]=function(){for(var i=Object.create(e),o=0;o<a.length;o++)i[a[o]]=arguments[o];return r(t,i,n)};var s=l(i,o);return s.syntax=h,c(t,i,s),s}},d.prototype.forEach=function(t){t(this.expr,"expr",this)},d.prototype.map=function(t){var e=this._ifNode(t(this.expr,"expr",this));return new d(this.name,this.params.slice(0),e)},d.prototype.clone=function(){return new d(this.name,this.params.slice(0),this.expr)},d.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=this.expr.toString(t);return p(this,e)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n},d.prototype.toJSON=function(){var t=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map(function(e,n){return{name:e,type:t[n]}}),expr:this.expr}},d.fromJSON=function(t){return new d(t.name,t.params,t.expr)},d.prototype.toHTML=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",n=[],r=0;r<this.params.length;r++)n.push('<span class="math-symbol math-parameter">'+i(this.params[r])+"</span>");var o=this.expr.toHTML(t);return p(this,e)&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+i(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+o},d.prototype._toTex=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=this.expr.toTex(t);return p(this,e)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(a.toSymbol).join(",")+"\\right):="+n},d}},function(t,e,n){"use strict";var r=n(5).map,i=n(26).escape;e.name="IndexNode",e.path="expression.node",e.factory=function(t,e,o,s){var a=o(n(49)),u=o(n(684)),c=Array.isArray;function h(e,n){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=n||!1,!c(e)||!e.every(t.isNode))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");var r=function(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")};Object.defineProperty(this,"object",{get:r,set:r})}function l(e,n,r){return new u(t.isBigNumber(e)?e.toNumber():e,t.isBigNumber(n)?n.toNumber():n,t.isBigNumber(r)?r.toNumber():r)}return h.prototype=new a,h.prototype.type="IndexNode",h.prototype.isIndexNode=!0,h.prototype._compile=function(e,n){var i=r(this.dimensions,function(r,i){if(t.isRangeNode(r)){if(r.needsEnd()){var o=Object.create(n);o.end=!0;var s=r.start._compile(e,o),a=r.end._compile(e,o),u=r.step?r.step._compile(e,o):function(){return 1};return function(t,n,r){var o=e.size(r).valueOf(),c=Object.create(n);return c.end=o[i],l(s(t,c,r),a(t,c,r),u(t,c,r))}}var c=r.start._compile(e,n),h=r.end._compile(e,n),f=r.step?r.step._compile(e,n):function(){return 1};return function(t,e,n){return l(c(t,e,n),h(t,e,n),f(t,e,n))}}if(t.isSymbolNode(r)&&"end"===r.name){var d=Object.create(n);d.end=!0;var p=r._compile(e,d);return function(t,n,r){var o=e.size(r).valueOf(),s=Object.create(n);return s.end=o[i],p(t,s,r)}}var m=r._compile(e,n);return function(t,e,n){return m(t,e,n)}});return function(t,n,o){var s=r(i,function(e){return e(t,n,o)});return e.index.apply(e,s)}},h.prototype.forEach=function(t){for(var e=0;e<this.dimensions.length;e++)t(this.dimensions[e],"dimensions["+e+"]",this)},h.prototype.map=function(t){for(var e=[],n=0;n<this.dimensions.length;n++)e[n]=this._ifNode(t(this.dimensions[n],"dimensions["+n+"]",this));return new h(e)},h.prototype.clone=function(){return new h(this.dimensions.slice(0))},h.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&t.isConstantNode(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},h.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},h.prototype._toString=function(t){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},h.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},h.fromJSON=function(t){return new h(t.dimensions,t.dotNotation)},h.prototype.toHTML=function(t){for(var e=[],n=0;n<this.dimensions.length;n++)e[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+i(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},h.prototype._toTex=function(t){var e=this.dimensions.map(function(e){return e.toTex(t)});return this.dotNotation?"."+this.getObjectProperty():"_{"+e.join(",")+"}"},h}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(26).stringify,o=n(26).escape,s=n(45).isSafeProperty,a=n(15).hasOwnProperty;e.name="ObjectNode",e.path="expression.node",e.factory=function(t,e,u,c){var h=u(n(49));function l(e){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!==r(e)||!Object.keys(e).every(function(n){return t.isNode(e[n])})))throw new TypeError("Object containing Nodes expected")}return l.prototype=new h,l.prototype.type="ObjectNode",l.prototype.isObjectNode=!0,l.prototype._compile=function(t,e){var n={};for(var r in this.properties)if(a(this.properties,r)){var o=i(r),u=JSON.parse(o);if(!s(this.properties,u))throw new Error('No access to property "'+u+'"');n[u]=this.properties[r]._compile(t,e)}return function(t,e,r){var i={};for(var o in n)a(n,o)&&(i[o]=n[o](t,e,r));return i}},l.prototype.forEach=function(t){for(var e in this.properties)this.properties.hasOwnProperty(e)&&t(this.properties[e],"properties["+i(e)+"]",this)},l.prototype.map=function(t){var e={};for(var n in this.properties)this.properties.hasOwnProperty(n)&&(e[n]=this._ifNode(t(this.properties[n],"properties["+i(n)+"]",this)));return new l(e)},l.prototype.clone=function(){var t={};for(var e in this.properties)this.properties.hasOwnProperty(e)&&(t[e]=this.properties[e]);return new l(t)},l.prototype._toString=function(t){var e=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&e.push(i(n)+": "+this.properties[n].toString(t));return"{"+e.join(", ")+"}"},l.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},l.fromJSON=function(t){return new l(t.properties)},l.prototype.toHTML=function(t){var e=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&e.push('<span class="math-symbol math-property">'+o(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(t));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},l.prototype._toTex=function(t){var e=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&e.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(t)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(e.join("\n"),"\\end{array}\\right\\}")},l}},function(t,e,n){"use strict";var r=n(164);e.name="RangeNode",e.path="expression.node",e.factory=function(t,e,i,o){var s=i(n(49));function a(e,n,r){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError("Node expected");if(!t.isNode(n))throw new TypeError("Node expected");if(r&&!t.isNode(r))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=n,this.step=r||null}function u(t,e){var n=r.getPrecedence(t,e),i={},o=r.getPrecedence(t.start,e);if(i.start=null!==o&&o<=n||"all"===e,t.step){var s=r.getPrecedence(t.step,e);i.step=null!==s&&s<=n||"all"===e}var a=r.getPrecedence(t.end,e);return i.end=null!==a&&a<=n||"all"===e,i}return a.prototype=new s,a.prototype.type="RangeNode",a.prototype.isRangeNode=!0,a.prototype.needsEnd=function(){return this.filter(function(e){return t.isSymbolNode(e)&&"end"===e.name}).length>0},a.prototype._compile=function(t,e){var n=t.range,r=this.start._compile(t,e),i=this.end._compile(t,e);if(this.step){var o=this.step._compile(t,e);return function(t,e,s){return n(r(t,e,s),i(t,e,s),o(t,e,s))}}return function(t,e,o){return n(r(t,e,o),i(t,e,o))}},a.prototype.forEach=function(t){t(this.start,"start",this),t(this.end,"end",this),this.step&&t(this.step,"step",this)},a.prototype.map=function(t){return new a(this._ifNode(t(this.start,"start",this)),this._ifNode(t(this.end,"end",this)),this.step&&this._ifNode(t(this.step,"step",this)))},a.prototype.clone=function(){return new a(this.start,this.end,this.step&&this.step)},a.prototype._toString=function(t){var e,n=u(this,t&&t.parenthesis?t.parenthesis:"keep"),r=this.start.toString(t);if(n.start&&(r="("+r+")"),e=r,this.step){var i=this.step.toString(t);n.step&&(i="("+i+")"),e+=":"+i}var o=this.end.toString(t);return n.end&&(o="("+o+")"),e+=":"+o},a.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},a.fromJSON=function(t){return new a(t.start,t.end,t.step)},a.prototype.toHTML=function(t){var e,n=u(this,t&&t.parenthesis?t.parenthesis:"keep"),r=this.start.toHTML(t);if(n.start&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e=r,this.step){var i=this.step.toHTML(t);n.step&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+='<span class="math-operator math-range-operator">:</span>'+i}var o=this.end.toHTML(t);return n.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+='<span class="math-operator math-range-operator">:</span>'+o},a.prototype._toTex=function(t){var e=u(this,t&&t.parenthesis?t.parenthesis:"keep"),n=this.start.toTex(t);if(e.start&&(n="\\left(".concat(n,"\\right)")),this.step){var r=this.step.toTex(t);e.step&&(r="\\left(".concat(r,"\\right)")),n+=":"+r}var i=this.end.toTex(t);return e.end&&(i="\\left(".concat(i,"\\right)")),n+=":"+i},a}},function(t,e,n){"use strict";var r=n(164),i=n(9),o=n(26).escape;e.name="RelationalNode",e.path="expression.node",e.factory=function(t,e,s,a){var u=s(n(49)),c=n(45).getSafeProperty;function h(t,e){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(t))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(e))throw new TypeError("Parameter params must be an array");if(t.length!==e.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=t,this.params=e}return h.prototype=new u,h.prototype.type="RelationalNode",h.prototype.isRelationalNode=!0,h.prototype._compile=function(t,e){var n=this,r=this.params.map(function(n){return n._compile(t,e)});return function(e,i,o){for(var s,a=r[0](e,i,o),u=0;u<n.conditionals.length;u++)if(s=a,a=r[u+1](e,i,o),!c(t,n.conditionals[u])(s,a))return!1;return!0}},h.prototype.forEach=function(t){var e=this;this.params.forEach(function(n,r){return t(n,"params["+r+"]",e)},this)},h.prototype.map=function(t){var e=this;return new h(this.conditionals.slice(),this.params.map(function(n,r){return e._ifNode(t(n,"params["+r+"]",e))},this))},h.prototype.clone=function(){return new h(this.conditionals,this.params)},h.prototype._toString=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),i=this.params.map(function(i,o){var s=r.getPrecedence(i,e);return"all"===e||null!==s&&s<=n?"("+i.toString(t)+")":i.toString(t)}),o={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=i[0],a=0;a<this.conditionals.length;a++)s+=" "+o[this.conditionals[a]]+" "+i[a+1];return s},h.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},h.fromJSON=function(t){return new h(t.conditionals,t.params)},h.prototype.toHTML=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),i=this.params.map(function(i,o){var s=r.getPrecedence(i,e);return"all"===e||null!==s&&s<=n?'<span class="math-parenthesis math-round-parenthesis">(</span>'+i.toHTML(t)+'<span class="math-parenthesis math-round-parenthesis">)</span>':i.toHTML(t)}),s={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},a=i[0],u=0;u<this.conditionals.length;u++)a+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+o(s[this.conditionals[u]])+"</span>"+i[u+1];return a},h.prototype._toTex=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),o=this.params.map(function(i,o){var s=r.getPrecedence(i,e);return"all"===e||null!==s&&s<=n?"\\left("+i.toTex(t)+"\right)":i.toTex(t)}),s=o[0],a=0;a<this.conditionals.length;a++)s+=i.operators[this.conditionals[a]]+o[a+1];return s},h}},function(t,e,n){"use strict";e.math=!0,e.name="simplifyConstant",e.path="algebra.simplify",e.factory=function(t,e,r,i,o){var s=r(n(704)),a=s.isCommutative,u=s.isAssociative,c=s.allChildren,h=s.createMakeNodeFunction,l=o.expression.node.ConstantNode,f=o.expression.node.OperatorNode,d=o.expression.node.FunctionNode;function p(e,n,r){try{return g(o[e].apply(null,n),r)}catch(i){return n=n.map(function(e){return t.isFraction(e)?e.valueOf():e}),g(o[e].apply(null,n),r)}}var m=i({Fraction:function(t){var e,n=t.s*t.n;return e=n<0?new f("-","unaryMinus",[new l(-n)]):new l(n),1===t.d?e:new f("/","divide",[e,new l(t.d)])},number:function(t){return t<0?y(new l(-t)):new l(t)},BigNumber:function(t){return t<0?y(new l(-t)):new l(t)},Complex:function(t){throw new Error("Cannot convert Complex number to Node")}});function v(t,e){if(e&&!1!==e.exactFractions&&isFinite(t)){var n=o.fraction(t);if(n.valueOf()===t)return n}return t}var g=i({"string, Object":function(t,n){return"BigNumber"===e.number?o.bignumber(t):"Fraction"===e.number?o.fraction(t):v(parseFloat(t),n)},"Fraction, Object":function(t,e){return t},"BigNumber, Object":function(t,e){return t},"number, Object":function(t,e){return v(t,e)},"Complex, Object":function(t,e){return 0!==t.im?t:v(t.re,e)}});function y(t){return new f("-","unaryMinus",[t])}function b(e,n,r,i){return n.reduce(function(n,o){if(t.isNode(n)||t.isNode(o))t.isNode(n)?t.isNode(o)||(o=m(o)):n=m(n);else{try{return p(e,[n,o],i)}catch(t){}n=m(n),o=m(o)}return r([n,o])})}return function(e,n){var r=function e(n,r){switch(n.type){case"SymbolNode":return n;case"ConstantNode":return"number"!=typeof n.value&&isNaN(n.value)?n:g(n.value,r);case"FunctionNode":if(o[n.name]&&o[n.name].rawArgs)return n;if(-1===["add","multiply"].indexOf(n.name)){var i=n.args.map(function(t){return e(t,r)});if(!i.some(t.isNode))try{return p(n.name,i,r)}catch(t){}return i=i.map(function(e){return t.isNode(e)?e:m(e)}),new d(n.name,i)}case"OperatorNode":var s,l,f=n.fn.toString(),v=h(n);if(n.isUnary())s=[e(n.args[0],r)],l=t.isNode(s[0])?v(s):p(f,s,r);else if(u(n))if(s=(s=c(n)).map(function(t){return e(t,r)}),a(f)){for(var y=[],x=[],w=0;w<s.length;w++)t.isNode(s[w])?x.push(s[w]):y.push(s[w]);y.length>1?(l=b(f,y,v,r),x.unshift(l),l=b(f,x,v,r)):l=b(f,s,v,r)}else l=b(f,s,v,r);else s=n.args.map(function(t){return e(t,r)}),l=b(f,s,v,r);return l;case"ParenthesisNode":return e(n.content,r);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"UpdateNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(n.type))}}(e,n);return t.isNode(r)?r:m(r)}}},function(t,e,n){"use strict";e.factory=function(t,e,n,r,i){var o=i.expression.node.FunctionNode,s=i.expression.node.OperatorNode,a=i.expression.node.SymbolNode,u={add:!0,multiply:!0},c={add:!0,multiply:!0};function h(e,n){if(!t.isOperatorNode(e))return!1;var r=e.fn.toString();return n&&n.hasOwnProperty(r)&&n[r].hasOwnProperty("associative")?n[r].associative:c[r]||!1}function l(e){var n,r=[];return h(e)?(n=e.op,function e(i){for(var o=0;o<i.args.length;o++){var s=i.args[o];t.isOperatorNode(s)&&n===s.op?e(s):r.push(s)}}(e),r):e.args}function f(e){return t.isOperatorNode(e)?function(t){try{return new s(e.op,e.fn,t,e.implicit)}catch(t){return console.error(t),[]}}:function(t){return new o(new a(e.name),t)}}return{createMakeNodeFunction:f,isCommutative:function(e,n){if(!t.isOperatorNode(e))return!0;var r=e.fn.toString();return n&&n.hasOwnProperty(r)&&n[r].hasOwnProperty("commutative")?n[r].commutative:u[r]||!1},isAssociative:h,flatten:function t(e){if(!e.args||0===e.args.length)return e;e.args=l(e);for(var n=0;n<e.args.length;n++)t(e.args[n])},allChildren:l,unflattenr:function t(e){if(e.args&&0!==e.args.length){for(var n=f(e),r=e.args.length,i=0;i<r;i++)t(e.args[i]);if(r>2&&h(e)){for(var o=e.args.pop();e.args.length>0;)o=n([e.args.pop(),o]);e.args=o.args}}},unflattenl:function t(e){if(e.args&&0!==e.args.length){for(var n=f(e),r=e.args.length,i=0;i<r;i++)t(e.args[i]);if(r>2&&h(e)){for(var o=e.args.shift();e.args.length>0;)o=n([o,e.args.shift()]);e.args=o.args}}}}},e.math=!0},function(t,e,n){"use strict";e.math=!0,e.name="simplifyCore",e.path="algebra.simplify",e.factory=function(t,e,r,i,o){var s=r(n(162)),a=r(n(194)),u=r(n(47)),c=r(n(48)),h=r(n(28)),l=r(n(138)),f=r(n(135)),d=o.expression.node.ConstantNode,p=o.expression.node.OperatorNode,m=o.expression.node.FunctionNode,v=o.expression.node.ParenthesisNode,g=new d(0),y=new d(1);return function e(n){if(t.isOperatorNode(n)&&n.isUnary()){var r=e(n.args[0]);if("+"===n.op)return r;if("-"===n.op){if(t.isOperatorNode(r)){if(r.isUnary()&&"-"===r.op)return r.args[0];if(r.isBinary()&&"subtract"===r.fn)return new p("-","subtract",[r.args[1],r.args[0]])}return new p(n.op,n.fn,[r])}}else if(t.isOperatorNode(n)&&n.isBinary()){var i=e(n.args[0]),o=e(n.args[1]);if("+"===n.op){if(t.isConstantNode(i)){if(a(i.value))return o;if(t.isConstantNode(o))return new d(u(i.value,o.value))}return t.isConstantNode(o)&&a(o.value)?i:t.isOperatorNode(o)&&o.isUnary()&&"-"===o.op?new p("-","subtract",[i,o.args[0]]):new p(n.op,n.fn,o?[i,o]:[i])}if("-"===n.op){if(t.isConstantNode(i)&&o){if(t.isConstantNode(o))return new d(c(i.value,o.value));if(a(i.value))return new p("-","unaryMinus",[o])}if("subtract"===n.fn)return t.isConstantNode(o)&&a(o.value)?i:t.isOperatorNode(o)&&o.isUnary()&&"-"===o.op?e(new p("+","add",[i,o.args[0]])):new p(n.op,n.fn,[i,o])}else{if("*"===n.op){if(t.isConstantNode(i)){if(a(i.value))return g;if(s(i.value,1))return o;if(t.isConstantNode(o))return new d(h(i.value,o.value))}if(t.isConstantNode(o)){if(a(o.value))return g;if(s(o.value,1))return i;if(t.isOperatorNode(i)&&i.isBinary()&&i.op===n.op){var b=i.args[0];if(t.isConstantNode(b)){var x=new d(h(b.value,o.value));return new p(n.op,n.fn,[x,i.args[1]],n.implicit)}}return new p(n.op,n.fn,[o,i],n.implicit)}return new p(n.op,n.fn,[i,o],n.implicit)}if("/"===n.op){if(t.isConstantNode(i)){if(a(i.value))return g;if(t.isConstantNode(o)&&(s(o.value,1)||s(o.value,2)||s(o.value,4)))return new d(l(i.value,o.value))}return new p(n.op,n.fn,[i,o])}if("^"===n.op){if(t.isConstantNode(o)){if(a(o.value))return y;if(s(o.value,1))return i;if(t.isConstantNode(i))return new d(f(i.value,o.value));if(t.isOperatorNode(i)&&i.isBinary()&&"^"===i.op){var w=i.args[1];if(t.isConstantNode(w))return new p(n.op,n.fn,[i.args[0],new d(h(w.value,o.value))])}}return new p(n.op,n.fn,[i,o])}}}else{if(t.isParenthesisNode(n)){var E=e(n.content);return t.isParenthesisNode(E)||t.isSymbolNode(E)||t.isConstantNode(E)?E:new v(E)}if(t.isFunctionNode(n)){var _=n.args.map(e).map(function(e){return t.isParenthesisNode(e)?e.content:e});return new m(e(n.fn),_)}}return n}}},function(t,e,n){"use strict";var r=n(104),i=r.object,o=r.string;e.name="det",e.factory=function(t,e,r,s){var a=r(n(3)),u=r(n(48)),c=r(n(28)),h=r(n(120)),l=r(n(370)),f=s("det",{any:function(t){return i.clone(t)},"Array | Matrix":function(e){var n;switch((n=t.isMatrix(e)?e.size():Array.isArray(e)?(e=a(e)).size():[]).length){case 0:return i.clone(e);case 1:if(1===n[0])return i.clone(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");case 2:var r=n[0],s=n[1];if(r===s)return function(t,e,n){if(1===e)return i.clone(t[0][0]);if(2===e)return u(c(t[0][0],t[1][1]),c(t[1][0],t[0][1]));for(var r=l(t),o=r.U[0][0],s=1;s<e;s++)o=c(o,r.U[s][s]);for(var a=0,f=0,d=[];;){for(;d[f];)f++;if(f>=e)break;for(var p=f,m=0;!d[r.p[p]];)d[r.p[p]]=!0,p=r.p[p],m++;m%2==0&&a++}return a%2==0?o:h(o)}(e.clone().valueOf(),r);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+o.format(n)+")")}}});return f.toTex={1:"\\det\\left(${args[0]}\\right)"},f}},function(t,e,n){"use strict";e.name="parse",e.factory=function(t,e,r,i){var o=r(n(137));return i("parse",{"string | Array | Matrix":o,"string | Array | Matrix, Object":o})}},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.name="unequal",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(54)),c=o(n(83)),h=o(n(55)),l=o(n(19)),f=o(n(18)),d=n(9),p=s("unequal",{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:m(t,e)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,m)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,m,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,m,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,m)},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"SparseMatrix, any":function(t,e){return h(t,e,m,!1)},"DenseMatrix, any":function(t,e){return f(t,e,m,!1)},"any, SparseMatrix":function(t,e){return h(e,t,m,!0)},"any, DenseMatrix":function(t,e){return f(e,t,m,!0)},"Array, any":function(t,e){return f(a(t),e,m,!1).valueOf()},"any, Array":function(t,e){return f(a(e),t,m,!0).valueOf()}}),m=s("_unequal",{"boolean, boolean":function(t,e){return t!==e},"number, number":function(t,n){return!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return!t.equals(e)},"Complex, Complex":function(t,e){return!t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)}});return p.toTex={2:"\\left(${args[0]}".concat(d.operators.unequal,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(7),i=n(4);e.name="sign",e.factory=function(t,e,n,o){var s=o("sign",{number:r.sign,Complex:function(t){return t.sign()},BigNumber:function(e){return new t.BigNumber(e.cmp(0))},Fraction:function(e){return new t.Fraction(e.s,1)},"Array | Matrix":function(t){return i(t,s,!0)},Unit:function(t){return s(t.value)}});return s.toTex={1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(104).number.isInteger;e.name="slu",e.factory=function(t,e,i,o){var s=i(n(1721)),a=i(n(1729));return o("slu",{"SparseMatrix, number, number":function(t,e,n){if(!r(e)||e<0||e>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var i=s(e,t,!1),o=a(t,i,n);return{L:o.L,U:o.U,p:o.pinv,q:i.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}},function(t,e,n){"use strict";e.name="csTdfs",e.path="algebra.sparse",e.factory=function(){return function(t,e,n,r,i,o,s){var a=0;for(n[s]=t;a>=0;){var u=n[s+a],c=n[r+u];-1===c?(a--,o[e++]=u):(n[r+u]=n[i+c],n[s+ ++a]=c)}return e}}},function(t,e,n){"use strict";e.name="csMarked",e.path="algebra.sparse",e.factory=function(){return function(t,e){return t[e]<0}}},function(t,e,n){"use strict";e.name="csMark",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(371));return function(t,e){t[e]=i(t[e])}}},function(t,e,n){"use strict";e.name="lsolve",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(44)),a=r(n(62)),u=r(n(48)),c=r(n(31)),h=r(n(373)),l=t.DenseMatrix;function f(t,e){for(var n=(e=h(t,e,!0))._data,r=t._size[0],i=t._size[1],o=[],f=t._data,d=0;d<i;d++){var p=n[d][0]||0,m=void 0;if(c(p,0))m=0;else{var v=f[d][d];if(c(v,0))throw new Error("Linear system cannot be solved since matrix is singular");m=s(p,v);for(var g=d+1;g<r;g++)n[g]=[u(n[g][0]||0,a(m,f[g][d]))]}o[d]=[m]}return new l({data:o,size:[r,1]})}return i("lsolve",{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var n,r,i=(e=h(t,e,!0))._data,o=t._size[0],f=t._size[1],d=t._values,p=t._index,m=t._ptr,v=[],g=0;g<f;g++){var y=i[g][0]||0;if(c(y,0))v[g]=[0];else{var b=0,x=[],w=[],E=m[g+1];for(r=m[g];r<E;r++)(n=p[r])===g?b=d[r]:n>g&&(x.push(d[r]),w.push(n));if(c(b,0))throw new Error("Linear system cannot be solved since matrix is singular");var _=s(y,b);for(r=0,E=w.length;r<E;r++)n=w[r],i[n]=[u(i[n][0]||0,a(_,x[r]))];v[g]=[_]}}return new l({data:v,size:[o,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return f(t,e)},"Array, Array | Matrix":function(t,e){return f(o(t),e).valueOf()}})}},function(t,e,n){"use strict";e.name="usolve",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(44)),a=r(n(62)),u=r(n(48)),c=r(n(31)),h=r(n(373)),l=t.DenseMatrix;function f(t,e){for(var n=(e=h(t,e,!0))._data,r=t._size[0],i=t._size[1],o=[],f=t._data,d=i-1;d>=0;d--){var p=n[d][0]||0,m=void 0;if(c(p,0))m=0;else{var v=f[d][d];if(c(v,0))throw new Error("Linear system cannot be solved since matrix is singular");m=s(p,v);for(var g=d-1;g>=0;g--)n[g]=[u(n[g][0]||0,a(m,f[g][d]))]}o[d]=[m]}return new l({data:o,size:[r,1]})}return i("usolve",{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var n,r,i=(e=h(t,e,!0))._data,o=t._size[0],f=t._size[1],d=t._values,p=t._index,m=t._ptr,v=[],g=f-1;g>=0;g--){var y=i[g][0]||0;if(c(y,0))v[g]=[0];else{var b=0,x=[],w=[],E=m[g],_=m[g+1];for(r=_-1;r>=E;r--)(n=p[r])===g?b=d[r]:n<g&&(x.push(d[r]),w.push(n));if(c(b,0))throw new Error("Linear system cannot be solved since matrix is singular");var S=s(y,b);for(r=0,_=w.length;r<_;r++)n=w[r],i[n]=[u(i[n][0],a(S,x[r]))];v[g]=[S]}}return new l({data:v,size:[o,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return f(t,e)},"Array, Array | Matrix":function(t,e){return f(o(t),e).valueOf()}})}},function(t,e,n){"use strict";e.name="dotDivide",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(44)),a=n(9),u=r(n(76)),c=r(n(54)),h=r(n(83)),l=r(n(56)),f=r(n(55)),d=r(n(19)),p=r(n(18)),m=i("dotDivide",{"any, any":s,"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,s,!1)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,s,!0)},"DenseMatrix, SparseMatrix":function(t,e){return c(t,e,s,!1)},"DenseMatrix, DenseMatrix":function(t,e){return d(t,e,s)},"Array, Array":function(t,e){return m(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return m(o(t),e)},"Matrix, Array":function(t,e){return m(t,o(e))},"SparseMatrix, any":function(t,e){return l(t,e,s,!1)},"DenseMatrix, any":function(t,e){return p(t,e,s,!1)},"any, SparseMatrix":function(t,e){return f(e,t,s,!0)},"any, DenseMatrix":function(t,e){return p(e,t,s,!0)},"Array, any":function(t,e){return p(o(t),e,s,!1).valueOf()},"any, Array":function(t,e){return p(o(e),t,s,!0).valueOf()}});return m.toTex={2:"\\left(${args[0]}".concat(a.operators.dotDivide,"${args[1]}\\right)")},m}},function(t,e,n){"use strict";var r=n(39);e.name="algorithm09",e.factory=function(t,e,i,o){var s=i(n(31)),a=t.SparseMatrix;return function(t,e,n){var i=t._values,u=t._index,c=t._ptr,h=t._size,l=t._datatype,f=e._values,d=e._index,p=e._ptr,m=e._size,v=e._datatype;if(h.length!==m.length)throw new r(h.length,m.length);if(h[0]!==m[0]||h[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+m+")");var g,y=h[0],b=h[1],x=s,w=0,E=n;"string"==typeof l&&l===v&&(g=l,x=o.find(s,[g,g]),w=o.convert(0,g),E=o.find(n,[g,g]));var _,S,T,A,M,C=i&&f?[]:void 0,O=[],N=[],k=new a({values:C,index:O,ptr:N,size:[y,b],datatype:g}),R=C?[]:void 0,P=[];for(S=0;S<b;S++){N[S]=O.length;var I=S+1;if(R)for(A=p[S],M=p[S+1],T=A;T<M;T++)P[_=d[T]]=I,R[_]=f[T];for(A=c[S],M=c[S+1],T=A;T<M;T++)if(_=u[T],R){var D=P[_]===I?R[_]:w,L=E(i[T],D);x(L,w)||(O.push(_),C.push(L))}else O.push(_)}return N[b]=O.length,k}}},function(t,e,n){"use strict";e.name="stirlingS2",e.factory=function(t,e,r,i){var o=r(n(47)),s=r(n(48)),a=r(n(28)),u=r(n(138)),c=r(n(135)),h=r(n(259)),l=r(n(260)),f=r(n(195)),d=r(n(107)),p=r(n(106)),m=i("stirlingS2",{"number | BigNumber, number | BigNumber":function(t,e){if(!d(t)||f(t)||!d(e)||f(e))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(e,t))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var n=h(e),r=0,i=0;i<=e;i++){var m=c(-1,s(e,i)),v=l(e,i),g=c(i,t);r=o(r,a(a(v,g),m))}return u(r,n)}});return m.toTex={2:"\\mathrm{S}\\left(${args}\\right)"},m}},function(t,e,n){"use strict";var r=n(4),i=n(7).isInteger;var o=4.7421875,s=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.name="gamma",e.factory=function(t,e,a,u){var c=a(n(28)),h=a(n(135)),l=n(378),f=u("gamma",{number:function(t){var e,n;if(i(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:l(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*f(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,a=r*t,u=a*t,c=u*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*a)-571/(2488320*u)+163879/(209018880*c)+5246819/(75246796800*c*t))}--t,n=s[0];for(var h=1;h<s.length;++h)n+=s[h]/(t+h);return e=t+o+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n},Complex:function(e){var n,r;if(0===e.im)return f(e.re);e=new t.Complex(e.re-1,e.im),r=new t.Complex(s[0],0);for(var i=1;i<s.length;++i){var a=e.re+i,u=a*a+e.im*e.im;0!==u?(r.re+=s[i]*a/u,r.im+=-s[i]*e.im/u):r.re=s[i]<0?-1/0:1/0}n=new t.Complex(e.re+o+.5,e.im);var l=Math.sqrt(2*Math.PI);e.re+=.5;var d=h(n,e);0===d.im?d.re*=l:0===d.re?d.im*=l:(d.re*=l,d.im*=l);var p=Math.exp(-n.re);return n.re=p*Math.cos(-n.im),n.im=p*Math.sin(-n.im),c(c(d,n),r)},BigNumber:function(n){if(n.isInteger())return n.isNegative()||n.isZero()?new t.BigNumber(1/0):function(n){if(n.isZero())return new t.BigNumber(1);for(var r=e.precision+(0|Math.log(n.toNumber())),i=new(t.BigNumber.clone({precision:r}))(n),o=n.toNumber()-1;o>1;)i=i.times(o),o--;return new t.BigNumber(i.toPrecision(t.BigNumber.precision))}(n.minus(1));if(!n.isFinite())return new t.BigNumber(n.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return r(t,f)}});return f.toTex={1:"\\Gamma\\left(${args[0]}\\right)"},f}},function(t,e,n){"use strict";var r=n(4);e.name="not",e.factory=function(t,e,i,o){var s=n(9),a=o("not",{number:function(t){return!t},Complex:function(t){return 0===t.re&&0===t.im},BigNumber:function(t){return t.isZero()||t.isNaN()},Unit:function(t){return null===t.value||a(t.value)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:s.operators.not+"\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(15).clone,i=n(5).validateIndex;e.name="column",e.factory=function(t,e,o,s){var a=o(n(67)),u=o(n(3)),c=o(n(261)),h=s("column",{"Matrix, number":l,"Array, number":function(t,e){return l(u(r(t)),e).valueOf()}});return h.toTex=void 0,h;function l(t,e){if(2!==t.size().length)throw new Error("Only two dimensional matrix is supported");i(e,t.size()[1]);var n=c(0,t.size()[0]),r=new a(n,e);return t.subset(r)}}},function(t,e,n){"use strict";var r=n(7).nearlyEqual,i=n(105);e.name="smallerEq",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(54)),c=o(n(83)),h=o(n(55)),l=o(n(19)),f=o(n(18)),d=n(9),p=s("smallerEq",{"boolean, boolean":function(t,e){return t<=e},"number, number":function(t,n){return t<=n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.lte(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return 1!==t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,p)},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"SparseMatrix, any":function(t,e){return h(t,e,p,!1)},"DenseMatrix, any":function(t,e){return f(t,e,p,!1)},"any, SparseMatrix":function(t,e){return h(e,t,p,!0)},"any, DenseMatrix":function(t,e){return f(e,t,p,!0)},"Array, any":function(t,e){return f(a(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(a(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(d.operators.smallerEq,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(117).maxArgumentCount;function i(t,e){var n=r(e);return function r(i,o){return Array.isArray(i)?i.map(function(t,e){return r(t,o.concat(e))}):1===n?e(i):2===n?e(i,o):e(i,o,t)}(t,[])}e.name="map",e.factory=function(t,e,n,r){var o=r("map",{"Array, function":i,"Matrix, function":function(t,e){return t.map(e)}});return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(15).clone,i=n(5).validateIndex;e.name="row",e.factory=function(t,e,o,s){var a=o(n(67)),u=o(n(3)),c=o(n(261)),h=s("row",{"Matrix, number":l,"Array, number":function(t,e){return l(u(r(t)),e).valueOf()}});return h.toTex=void 0,h;function l(t,e){if(2!==t.size().length)throw new Error("Only two dimensional matrix is supported");i(e,t.size()[0]);var n=c(0,t.size()[1]),r=new a(e,n);return t.subset(r)}}},function(t,e,n){"use strict";e.name="compareText",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(75)),a=r(n(19)),u=r(n(18)),c=i("compareText",{"any, any":h,"DenseMatrix, DenseMatrix":function(t,e){return a(t,e,h)},"Array, Array":function(t,e){return c(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return c(o(t),e)},"Matrix, Array":function(t,e){return c(t,o(e))},"DenseMatrix, any":function(t,e){return u(t,e,h,!1)},"any, DenseMatrix":function(t,e){return u(e,t,h,!0)},"Array, any":function(t,e){return u(o(t),e,h,!1).valueOf()},"any, Array":function(t,e){return u(o(e),t,h,!0).valueOf()}});function h(e,n){if(!t.isString(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+s(e)+", index: 0)");if(!t.isString(n))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+s(n)+", index: 1)");return e===n?0:e>n?1:-1}return c.toTex=void 0,c}},function(t,e,n){"use strict";var r=n(5).flatten,i=n(5).identify,o=n(5).generalize;e.name="setDifference",e.factory=function(t,e,s,a){var u=s(n(67)),c=s(n(160)),h=s(n(77)),l=s(n(64)),f=s(n(84));return a("setDifference",{"Array | Matrix, Array | Matrix":function(t,e){var n;if(0===l(h(t),new u(0)))n=[];else{if(0===l(h(e),new u(0)))return r(t.toArray());var s,a=i(r(Array.isArray(t)?t:t.toArray()).sort(f)),d=i(r(Array.isArray(e)?e:e.toArray()).sort(f));n=[];for(var p=0;p<a.length;p++){s=!1;for(var m=0;m<d.length;m++)if(0===f(a[p].value,d[m].value)&&a[p].identifier===d[m].identifier){s=!0;break}s||n.push(a[p])}}return Array.isArray(t)&&Array.isArray(e)?o(n):new c(o(n))}})}},function(t,e,n){"use strict";var r=n(5).flatten,i=n(5).identify,o=n(5).generalize;e.name="setIntersect",e.factory=function(t,e,s,a){var u=s(n(67)),c=s(n(160)),h=s(n(77)),l=s(n(64)),f=s(n(84));return a("setIntersect",{"Array | Matrix, Array | Matrix":function(t,e){var n;if(0===l(h(t),new u(0))||0===l(h(e),new u(0)))n=[];else{var s=i(r(Array.isArray(t)?t:t.toArray()).sort(f)),a=i(r(Array.isArray(e)?e:e.toArray()).sort(f));n=[];for(var d=0;d<s.length;d++)for(var p=0;p<a.length;p++)if(0===f(s[d].value,a[p].value)&&s[d].identifier===a[p].identifier){n.push(s[d]);break}}return Array.isArray(t)&&Array.isArray(e)?o(n):new c(o(n))}})}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setSymDifference",e.factory=function(t,e,i,o){var s=i(n(67)),a=i(n(262)),u=i(n(77)),c=i(n(64)),h=i(n(726));return o("setSymDifference",{"Array | Matrix, Array | Matrix":function(t,e){if(0===c(u(t),new s(0)))return r(e);if(0===c(u(e),new s(0)))return r(t);var n=r(t),i=r(e);return a(h(n,i),h(i,n))}})}},function(t,e,n){"use strict";var r=n(5).flatten,i=n(196);e.name="median",e.factory=function(t,e,o,s){var a=o(n(53)),u=o(n(44)),c=o(n(166)),h=o(n(380)),l=o(n(121)),f=s("median",{"Array | Matrix":d,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("median(A, dim) is not yet supported")},"...":function(t){if(i(t))throw new TypeError("Scalar values expected in function median");return d(t)}});function d(t){try{var e=(t=r(t.valueOf())).length;if(0===e)throw new Error("Cannot calculate median of an empty array");if(e%2==0){for(var n=e/2-1,i=h(t,n+1),o=t[n],s=0;s<n;++s)c(t[s],o)>0&&(o=t[s]);return m(o,i)}var a=h(t,(e-1)/2);return p(a)}catch(t){throw l(t,"median")}}var p=s({"number | BigNumber | Complex | Unit":function(t){return t}}),m=s({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(t,e){return u(a(t,e),2)}});return f.toTex=void 0,f}},function(t,e,n){"use strict";var r=n(5).size,i=n(140),o=n(264),s=n(196);e.name="mean",e.factory=function(t,e,a,u){var c=a(n(47)),h=a(n(138)),l=a(n(121)),f=u("mean",{"Array | Matrix":d,"Array | Matrix, number | BigNumber":function(t,e){try{var n=o(t,e,c),i=Array.isArray(t)?r(t):t.size();return h(n,i[e])}catch(t){throw l(t,"mean")}},"...":function(t){if(s(t))throw new TypeError("Scalar values expected in function mean");return d(t)}});return f.toTex=void 0,f;function d(t){var e=0,n=0;if(i(t,function(t){try{e=c(e,t),n++}catch(e){throw l(e,"mean",t)}}),0===n)throw new Error("Cannot calculate mean of an empty array");return h(e,n)}}},function(t,e,n){"use strict";var r=n(140),i=n(264),o=n(196);e.name="min",e.factory=function(t,e,s,a){var u=s(n(119)),c=s(n(121)),h=a("min",{"Array | Matrix":f,"Array | Matrix, number | BigNumber":function(t,e){return i(t,e.valueOf(),l)},"...":function(t){if(o(t))throw new TypeError("Scalar values expected in function min");return f(t)}});return h.toTex="\\min\\left(${args}\\right)",h;function l(t,e){try{return u(t,e)?t:e}catch(t){throw c(t,"min",e)}}function f(t){var e;if(r(t,function(t){try{isNaN(t)&&"number"==typeof t?e=NaN:(void 0===e||u(t,e))&&(e=t)}catch(e){throw c(e,"min",t)}}),void 0===e)throw new Error("Cannot calculate min of an empty array");return e}}},function(t,e,n){"use strict";e.name="std",e.factory=function(t,e,r,i){var o=r(n(139)),s=r(n(384)),a=i("std",{"Array | Matrix":u,"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":u,"Array | Matrix, number | BigNumber, string":u,"...":function(t){return u(t)}});return a.toTex=void 0,a;function u(t,e){if(0===t.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return o(s.apply(null,arguments))}catch(t){throw t instanceof TypeError&&-1!==t.message.indexOf(" var")?new TypeError(t.message.replace(" var"," std")):t}}}},function(t,e,n){"use strict";e.name="docs",e.path="expression",e.factory=function(t,e,r,i){var o={};return o.bignumber=n(1867),o.boolean=n(1868),o.complex=n(1869),o.createUnit=n(1870),o.fraction=n(1871),o.index=n(1872),o.matrix=n(1873),o.number=n(1874),o.sparse=n(1875),o.splitUnit=n(1876),o.string=n(1877),o.unit=n(1878),o.e=n(734),o.E=n(734),o.false=n(1879),o.i=n(1880),o[1/0]=n(1881),o.LN2=n(1882),o.LN10=n(1883),o.LOG2E=n(1884),o.LOG10E=n(1885),o.NaN=n(1886),o.null=n(1887),o.pi=n(735),o.PI=n(735),o.phi=n(1888),o.SQRT1_2=n(1889),o.SQRT2=n(1890),o.tau=n(1891),o.true=n(1892),o.version=n(1893),o.speedOfLight={description:"Speed of light in vacuum",examples:["speedOfLight"]},o.gravitationConstant={description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},o.planckConstant={description:"Planck constant",examples:["planckConstant"]},o.reducedPlanckConstant={description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},o.magneticConstant={description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},o.electricConstant={description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},o.vacuumImpedance={description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},o.coulomb={description:"Coulomb's constant",examples:["coulomb"]},o.elementaryCharge={description:"Elementary charge",examples:["elementaryCharge"]},o.bohrMagneton={description:"Borh magneton",examples:["bohrMagneton"]},o.conductanceQuantum={description:"Conductance quantum",examples:["conductanceQuantum"]},o.inverseConductanceQuantum={description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},o.magneticFluxQuantum={description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},o.nuclearMagneton={description:"Nuclear magneton",examples:["nuclearMagneton"]},o.klitzing={description:"Von Klitzing constant",examples:["klitzing"]},o.bohrRadius={description:"Borh radius",examples:["bohrRadius"]},o.classicalElectronRadius={description:"Classical electron radius",examples:["classicalElectronRadius"]},o.electronMass={description:"Electron mass",examples:["electronMass"]},o.fermiCoupling={description:"Fermi coupling constant",examples:["fermiCoupling"]},o.fineStructure={description:"Fine-structure constant",examples:["fineStructure"]},o.hartreeEnergy={description:"Hartree energy",examples:["hartreeEnergy"]},o.protonMass={description:"Proton mass",examples:["protonMass"]},o.deuteronMass={description:"Deuteron Mass",examples:["deuteronMass"]},o.neutronMass={description:"Neutron mass",examples:["neutronMass"]},o.quantumOfCirculation={description:"Quantum of circulation",examples:["quantumOfCirculation"]},o.rydberg={description:"Rydberg constant",examples:["rydberg"]},o.thomsonCrossSection={description:"Thomson cross section",examples:["thomsonCrossSection"]},o.weakMixingAngle={description:"Weak mixing angle",examples:["weakMixingAngle"]},o.efimovFactor={description:"Efimov factor",examples:["efimovFactor"]},o.atomicMass={description:"Atomic mass constant",examples:["atomicMass"]},o.avogadro={description:"Avogadro's number",examples:["avogadro"]},o.boltzmann={description:"Boltzmann constant",examples:["boltzmann"]},o.faraday={description:"Faraday constant",examples:["faraday"]},o.firstRadiation={description:"First radiation constant",examples:["firstRadiation"]},o.loschmidt={description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},o.gasConstant={description:"Gas constant",examples:["gasConstant"]},o.molarPlanckConstant={description:"Molar Planck constant",examples:["molarPlanckConstant"]},o.molarVolume={description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},o.sackurTetrode={description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},o.secondRadiation={description:"Second radiation constant",examples:["secondRadiation"]},o.stefanBoltzmann={description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},o.wienDisplacement={description:"Wien displacement law constant",examples:["wienDisplacement"]},o.molarMass={description:"Molar mass constant",examples:["molarMass"]},o.molarMassC12={description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},o.gravity={description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},o.planckLength={description:"Planck length",examples:["planckLength"]},o.planckMass={description:"Planck mass",examples:["planckMass"]},o.planckTime={description:"Planck time",examples:["planckTime"]},o.planckCharge={description:"Planck charge",examples:["planckCharge"]},o.planckTemperature={description:"Planck temperature",examples:["planckTemperature"]},o.derivative=n(1894),o.lsolve=n(1895),o.lup=n(1896),o.lusolve=n(1897),o.simplify=n(1898),o.rationalize=n(1899),o.slu=n(1900),o.usolve=n(1901),o.qr=n(1902),o.abs=n(1903),o.add=n(1904),o.cbrt=n(1905),o.ceil=n(1906),o.cube=n(1907),o.divide=n(1908),o.dotDivide=n(1909),o.dotMultiply=n(1910),o.dotPow=n(1911),o.exp=n(1912),o.expm=n(1913),o.expm1=n(1914),o.fix=n(1915),o.floor=n(1916),o.gcd=n(1917),o.hypot=n(1918),o.lcm=n(1919),o.log=n(1920),o.log2=n(1921),o.log1p=n(1922),o.log10=n(1923),o.mod=n(1924),o.multiply=n(1925),o.norm=n(1926),o.nthRoot=n(1927),o.nthRoots=n(1928),o.pow=n(1929),o.round=n(1930),o.sign=n(1931),o.sqrt=n(1932),o.sqrtm=n(1933),o.square=n(1934),o.subtract=n(1935),o.unaryMinus=n(1936),o.unaryPlus=n(1937),o.xgcd=n(1938),o.bitAnd=n(1939),o.bitNot=n(1940),o.bitOr=n(1941),o.bitXor=n(1942),o.leftShift=n(1943),o.rightArithShift=n(1944),o.rightLogShift=n(1945),o.bellNumbers=n(1946),o.catalan=n(1947),o.composition=n(1948),o.stirlingS2=n(1949),o.config=n(1950),o.import=n(1951),o.typed=n(1952),o.arg=n(1953),o.conj=n(1954),o.re=n(1955),o.im=n(1956),o.eval=n(1957),o.help=n(1958),o.distance=n(1959),o.intersect=n(1960),o.and=n(1961),o.not=n(1962),o.or=n(1963),o.xor=n(1964),o.column=n(1965),o.concat=n(1966),o.cross=n(1967),o.ctranspose=n(1968),o.det=n(1969),o.diag=n(1970),o.dot=n(1971),o.getMatrixDataType=n(1972),o.identity=n(1973),o.filter=n(1974),o.flatten=n(1975),o.forEach=n(1976),o.inv=n(1977),o.kron=n(1978),o.map=n(1979),o.ones=n(1980),o.partitionSelect=n(1981),o.range=n(1982),o.resize=n(1983),o.reshape=n(1984),o.row=n(1985),o.size=n(1986),o.sort=n(1987),o.squeeze=n(1988),o.subset=n(1989),o.trace=n(1990),o.transpose=n(1991),o.zeros=n(1992),o.combinations=n(1993),o.factorial=n(1994),o.gamma=n(1995),o.kldivergence=n(1996),o.multinomial=n(1997),o.permutations=n(1998),o.pickRandom=n(1999),o.random=n(2e3),o.randomInt=n(2001),o.compare=n(2002),o.compareNatural=n(2003),o.compareText=n(2004),o.deepEqual=n(2005),o.equal=n(2006),o.equalText=n(2007),o.larger=n(2008),o.largerEq=n(2009),o.smaller=n(2010),o.smallerEq=n(2011),o.unequal=n(2012),o.setCartesian=n(2013),o.setDifference=n(2014),o.setDistinct=n(2015),o.setIntersect=n(2016),o.setIsSubset=n(2017),o.setMultiplicity=n(2018),o.setPowerset=n(2019),o.setSize=n(2020),o.setSymDifference=n(2021),o.setUnion=n(2022),o.erf=n(2023),o.mad=n(2024),o.max=n(2025),o.mean=n(2026),o.median=n(2027),o.min=n(2028),o.mode=n(2029),o.prod=n(2030),o.quantileSeq=n(2031),o.std=n(2032),o.sum=n(2033),o.var=n(2034),o.acos=n(2035),o.acosh=n(2036),o.acot=n(2037),o.acoth=n(2038),o.acsc=n(2039),o.acsch=n(2040),o.asec=n(2041),o.asech=n(2042),o.asin=n(2043),o.asinh=n(2044),o.atan=n(2045),o.atanh=n(2046),o.atan2=n(2047),o.cos=n(2048),o.cosh=n(2049),o.cot=n(2050),o.coth=n(2051),o.csc=n(2052),o.csch=n(2053),o.sec=n(2054),o.sech=n(2055),o.sin=n(2056),o.sinh=n(2057),o.tan=n(2058),o.tanh=n(2059),o.to=n(2060),o.clone=n(2061),o.format=n(2062),o.isNaN=n(2063),o.isInteger=n(2064),o.isNegative=n(2065),o.isNumeric=n(2066),o.hasNumericValue=n(2067),o.isPositive=n(2068),o.isPrime=n(2069),o.isZero=n(2070),o.typeof=n(2071),o}},function(t,e,n){"use strict";t.exports={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]}},function(t,e,n){"use strict";t.exports={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]}},function(t,e,n){"use strict";e.name="parser",e.factory=function(t,e,r,i,o){var s=r(n(737));return i("parser",{"":function(){return new s(o)}})},e.math=!0},function(t,e,n){"use strict";var r=n(15).extend,i=n(45);e.name="Parser",e.path="expression",e.factory=function(t,e,o,s,a){var u=o(n(137));function c(){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return c.prototype.type="Parser",c.prototype.isParser=!0,c.prototype.parse=function(t){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},c.prototype.compile=function(t){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},c.prototype.eval=function(t){return u(t).compile().eval(this.scope)},c.prototype.get=function(t){return t in this.scope?i.getSafeProperty(this.scope,t):void 0},c.prototype.getAll=function(){return r({},this.scope)},c.prototype.set=function(t,e){return i.setSafeProperty(this.scope,t,e)},c.prototype.remove=function(t){delete this.scope[t]},c.prototype.clear=function(){for(var t in this.scope)this.scope.hasOwnProperty(t)&&delete this.scope[t]},c},e.math=!0},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(11).Buffer,i=n(387).Transform;function o(t){i.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(10)(o,i),o.prototype._transform=function(t,e,n){var r=null;try{this.update(t,e)}catch(t){r=t}n(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var n=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)n[this._blockOffset++]=t[i++];for(var s=0,a=8*t.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,n){"use strict";(function(e,r){var i=n(265);t.exports=b;var o,s=n(738);b.ReadableState=y;n(388).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=n(741),c=n(11).Buffer,h=e.Uint8Array||function(){};var l=n(198);l.inherits=n(10);var f=n(2102),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n(2103),v=n(742);l.inherits(b,u);var g=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(o=o||n(141));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(391).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(141),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function x(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}(t,s)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof h||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):A(t,s)):w(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),A(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),x(this,t,e,!1,n)},b.prototype.unshift=function(t){return x(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(391).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var E=8388608;function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=E?t=E:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(T,t):T(t))}function T(t){d("emit readable"),t.emit("readable"),N(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(M,t,e))}function M(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function C(t){d("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function I(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):S(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(n,e))),null===(r=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?h:b;function c(e,r){d("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",l),t.removeListener("error",v),t.removeListener("unpipe",c),n.removeListener("end",h),n.removeListener("end",b),n.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function h(){d("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var l=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",l);var f=!1;var p=!1;function m(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==I(o.pipes,t))&&!f&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(e){d("onerror",e),b(),t.removeListener("error",v),0===a(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",y),b()}function y(){d("onfinish"),t.removeListener("close",g),b()}function b(){d("unpipe"),n.unpipe(t)}return n.on("data",m),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",v),t.once("close",g),t.once("finish",y),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=I(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(C,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(O,t,e))}(this,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=k}).call(this,n(50),n(81))},function(t,e,n){t.exports=n(388).EventEmitter},function(t,e,n){"use strict";var r=n(265);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";t.exports=s;var r=n(141),i=n(198);function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){u(t,e,n)}):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(10),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var r=n(10),i=n(168),o=n(11).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(t,e,n){return n^t&(e^n)}function h(t,e,n){return t&e|n&(t|e)}function l(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,p=0|this._f,m=0|this._g,v=0|this._h,g=0;g<16;++g)n[g]=t.readInt32BE(4*g);for(;g<64;++g)n[g]=0|(((e=n[g-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[g-7]+d(n[g-15])+n[g-16];for(var y=0;y<64;++y){var b=v+f(u)+c(u,p,m)+s[y]+n[y]|0,x=l(r)+h(r,i,o)|0;v=m,m=p,p=u,u=a+b|0,a=o,o=i,i=r,r=b+x|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=v+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},function(t,e,n){var r=n(10),i=n(168),o=n(11).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,i.call(this,128,112)}function c(t,e,n){return n^t&(e^n)}function h(t,e,n){return t&e|n&(t|e)}function l(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function v(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function g(t,e){return t>>>0<e>>>0?1:0}r(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,u=0|this._fh,y=0|this._gh,b=0|this._hh,x=0|this._al,w=0|this._bl,E=0|this._cl,_=0|this._dl,S=0|this._el,T=0|this._fl,A=0|this._gl,M=0|this._hl,C=0;C<32;C+=2)e[C]=t.readInt32BE(4*C),e[C+1]=t.readInt32BE(4*C+4);for(;C<160;C+=2){var O=e[C-30],N=e[C-30+1],k=d(O,N),R=p(N,O),P=m(O=e[C-4],N=e[C-4+1]),I=v(N,O),D=e[C-14],L=e[C-14+1],B=e[C-32],F=e[C-32+1],z=R+L|0,j=k+D+g(z,R)|0;j=(j=j+P+g(z=z+I|0,I)|0)+B+g(z=z+F|0,F)|0,e[C]=j,e[C+1]=z}for(var U=0;U<160;U+=2){j=e[U],z=e[U+1];var Y=h(n,r,i),W=h(x,w,E),X=l(n,x),G=l(x,n),V=f(a,S),q=f(S,a),H=s[U],K=s[U+1],$=c(a,u,y),J=c(S,T,A),Z=M+q|0,Q=b+V+g(Z,M)|0;Q=(Q=(Q=Q+$+g(Z=Z+J|0,J)|0)+H+g(Z=Z+K|0,K)|0)+j+g(Z=Z+z|0,z)|0;var tt=G+W|0,et=X+Y+g(tt,G)|0;b=y,M=A,y=u,A=T,u=a,T=S,a=o+Q+g(S=_+Z|0,_)|0,o=i,_=E,i=r,E=w,r=n,w=x,n=Q+et+g(x=Z+tt|0,Z)|0}this._al=this._al+x|0,this._bl=this._bl+w|0,this._cl=this._cl+E|0,this._dl=this._dl+_|0,this._el=this._el+S|0,this._fl=this._fl+T|0,this._gl=this._gl+A|0,this._hl=this._hl+M|0,this._ah=this._ah+n+g(this._al,x)|0,this._bh=this._bh+r+g(this._bl,w)|0,this._ch=this._ch+i+g(this._cl,E)|0,this._dh=this._dh+o+g(this._dl,_)|0,this._eh=this._eh+a+g(this._el,S)|0,this._fh=this._fh+u+g(this._fl,T)|0,this._gh=this._gh+y+g(this._gl,A)|0,this._hh=this._hh+b+g(this._hl,M)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},function(t,e,n){"use strict";var r=n(10),i=n(2115),o=n(122),s=n(11).Buffer,a=n(747),u=n(392),c=n(393),h=s.alloc(128);function l(t,e){o.call(this,"digest"),"string"==typeof e&&(e=s.from(e));var n="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>n)?e=("rmd160"===t?new u:c(t)).update(e).digest():e.length<n&&(e=s.concat([e,h],n));for(var r=this._ipad=s.allocUnsafe(n),i=this._opad=s.allocUnsafe(n),a=0;a<n;a++)r[a]=54^e[a],i[a]=92^e[a];this._hash="rmd160"===t?new u:c(t),this._hash.update(r)}r(l,o),l.prototype._update=function(t){this._hash.update(t)},l.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:c(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new l("rmd160",e):"md5"===t?new i(a,e):new l(t,e)}},function(t,e,n){var r=n(386);t.exports=function(t){return(new r).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,n){e.pbkdf2=n(2117),e.pbkdf2Sync=n(752)},function(t,e,n){(function(e){var n=Math.pow(2,30)-1;function r(t,n){if("string"!=typeof t&&!e.isBuffer(t))throw new TypeError(n+" must be a buffer or string")}t.exports=function(t,e,i,o){if(r(t,"Password"),r(e,"Salt"),"number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0||o>n||o!=o)throw new TypeError("Bad key length")}}).call(this,n(46).Buffer)},function(t,e,n){(function(e){var n;e.browser?n="utf-8":n=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";t.exports=n}).call(this,n(81))},function(t,e,n){var r=n(747),i=n(392),o=n(393),s=n(750),a=n(751),u=n(11).Buffer,c=u.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(t,e,n){var s=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?r:function(e){return o(t).update(e).digest()}}(t),a="sha512"===t||"sha384"===t?128:64;e.length>a?e=s(e):e.length<a&&(e=u.concat([e,c],a));for(var l=u.allocUnsafe(a+h[t]),f=u.allocUnsafe(a+h[t]),d=0;d<a;d++)l[d]=54^e[d],f[d]=92^e[d];var p=u.allocUnsafe(a+n+4);l.copy(p,0,0,a),this.ipad1=p,this.ipad2=l,this.opad=f,this.alg=t,this.blocksize=a,this.hash=s,this.size=h[t]}l.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,n,r,i){s(t,e,n,r),u.isBuffer(t)||(t=u.from(t,a)),u.isBuffer(e)||(e=u.from(e,a));var o=new l(i=i||"sha1",t,e.length),c=u.allocUnsafe(r),f=u.allocUnsafe(e.length+4);e.copy(f,0,0,e.length);for(var d=0,p=h[i],m=Math.ceil(r/p),v=1;v<=m;v++){f.writeUInt32BE(v,e.length);for(var g=o.run(f,o.ipad1),y=g,b=1;b<n;b++){y=o.run(y,o.ipad2);for(var x=0;x<p;x++)g[x]^=y[x]}g.copy(c,d),d+=p}return c}},function(t,e,n){var r=n(199),i=n(11).Buffer,o=n(754);function s(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var n=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*n)]);for(var a=0;a<n;a++){var u=s(t),c=o+16*a;t._cache.writeUInt32BE(u[0],c+0),t._cache.writeUInt32BE(u[1],c+4),t._cache.writeUInt32BE(u[2],c+8),t._cache.writeUInt32BE(u[3],c+12)}var h=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,h)}},function(t,e){t.exports=function(t){for(var e,n=t.length;n--;){if(255!==(e=t.readUInt8(n))){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,n){var r=n(266),i=n(11).Buffer,o=n(122),s=n(10),a=n(2132),u=n(199),c=n(754);function h(t,e,n,s){o.call(this);var u=i.alloc(4,0);this._cipher=new r.AES(e);var h=this._cipher.encryptBlock(u);this._ghash=new a(h),n=function(t,e,n){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var r=new a(n),o=e.length,s=o%16;r.update(e),s&&(s=16-s,r.update(i.alloc(s,0))),r.update(i.alloc(8,0));var u=8*o,h=i.alloc(8);h.writeUIntBE(u,0,8),r.update(h),t._finID=r.state;var l=i.from(t._finID);return c(l),l}(this,n,h),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(h,o),h.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=0;i<r;++i)n+=t[i]^e[i];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},h.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=h},function(t,e,n){var r=n(266),i=n(11).Buffer,o=n(122);function s(t,e,n,s){o.call(this),this._cipher=new r.AES(e),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=t}n(10)(s,o),s.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},function(t,e,n){var r=n(167);t.exports=y,y.simpleSieve=v,y.fermatTest=g;var i=n(32),o=new i(24),s=new(n(759)),a=new i(1),u=new i(2),c=new i(5),h=(new i(16),new i(8),new i(10)),l=new i(3),f=(new i(7),new i(11)),d=new i(4),p=(new i(12),null);function m(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<e&&t[i]<=r&&n%t[i]!=0;i++);e!==i&&t[i]<=r||(t[e++]=n)}return p=t,t}function v(t){for(var e=m(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n]);return!0}function g(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function y(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var n,p;for(e=new i(e);;){for(n=new i(r(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(a),n.testn(1)||n.iadd(u),e.cmp(u)){if(!e.cmp(c))for(;n.mod(h).cmp(l);)n.iadd(d)}else for(;n.mod(o).cmp(f);)n.iadd(d);if(v(p=n.shrn(1))&&v(n)&&g(p)&&g(n)&&s.test(p)&&s.test(n))return n}}},function(t,e,n){var r=n(32),i=n(397);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),n=Math.ceil(e/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var n=e.sub(t);return t.add(this._randbelow(n))},o.prototype.test=function(t,e,n){var i=t.bitLength(),o=r.mont(t),s=new r(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),u=0;!a.testn(u);u++);for(var c=t.shrn(u),h=a.toRed(o);e>0;e--){var l=this._randrange(new r(2),a);n&&n(l);var f=l.toRed(o).redPow(c);if(0!==f.cmp(s)&&0!==f.cmp(h)){for(var d=1;d<u;d++){if(0===(f=f.redSqr()).cmp(s))return!1;if(0===f.cmp(h))break}if(d===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var n=t.bitLength(),i=r.mont(t),o=new r(1).toRed(i);e||(e=Math.max(1,n/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var u=t.shrn(a),c=s.toRed(i);e>0;e--){var h=this._randrange(new r(2),s),l=t.gcd(h);if(0!==l.cmpn(1))return l;var f=h.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(c)){for(var d=1;d<a;d++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(c))break}if(d===a)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,n){"use strict";var r=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",n=0;n<t.length;n++)e+=i(t[n].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,s=255&i;o?n.push(o,s):n.push(s)}return n},r.zero2=i,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,n){"use strict";var r=e;r.base=n(268),r.short=n(2144),r.mont=n(2145),r.edwards=n(2146)},function(t,e,n){"use strict";var r=n(85).rotr32;function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function s(t,e,n){return t^e^n}e.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?s(e,n,r):2===t?o(e,n,r):void 0},e.ch32=i,e.maj32=o,e.p32=s,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},function(t,e,n){"use strict";var r=n(85),i=n(200),o=n(762),s=n(69),a=r.sum32,u=r.sum32_4,c=r.sum32_5,h=o.ch32,l=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,m=o.g1_256,v=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}r.inherits(y,v),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],v=this.h[2],g=this.h[3],y=this.h[4],b=this.h[5],x=this.h[6],w=this.h[7];for(s(this.k.length===n.length),r=0;r<n.length;r++){var E=c(w,d(y),h(y,b,x),this.k[r],n[r]),_=a(f(i),l(i,o,v));w=x,x=b,b=y,y=a(g,E),g=v,v=o,o=i,i=a(E,_)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],v),this.h[3]=a(this.h[3],g),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],x),this.h[7]=a(this.h[7],w)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(85),i=n(200),o=n(69),s=r.rotr64_hi,a=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,h=r.sum64,l=r.sum64_hi,f=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,v=r.sum64_5_lo,g=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function x(t,e,n,r,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,n,r,i,o){var s=e&r^~e&o;return s<0&&(s+=4294967296),s}function E(t,e,n,r,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function _(t,e,n,r,i,o){var s=e&r^e&o^r&o;return s<0&&(s+=4294967296),s}function S(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function T(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function A(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function M(t,e){var n=a(t,e,14)^a(t,e,18)^a(e,t,9);return n<0&&(n+=4294967296),n}function C(t,e){var n=s(t,e,1)^s(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function O(t,e){var n=a(t,e,1)^a(t,e,8)^c(t,e,7);return n<0&&(n+=4294967296),n}function N(t,e){var n=s(t,e,19)^s(e,t,29)^u(t,e,6);return n<0&&(n+=4294967296),n}function k(t,e){var n=a(t,e,19)^a(e,t,29)^c(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,g),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=N(n[r-4],n[r-3]),o=k(n[r-4],n[r-3]),s=n[r-14],a=n[r-13],u=C(n[r-30],n[r-29]),c=O(n[r-30],n[r-29]),h=n[r-32],l=n[r-31];n[r]=d(i,o,s,a,u,c,h,l),n[r+1]=p(i,o,s,a,u,c,h,l)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,r=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],d=this.h[6],p=this.h[7],g=this.h[8],y=this.h[9],b=this.h[10],C=this.h[11],O=this.h[12],N=this.h[13],k=this.h[14],R=this.h[15];o(this.k.length===n.length);for(var P=0;P<n.length;P+=2){var I=k,D=R,L=A(g,y),B=M(g,y),F=x(g,y,b,C,O),z=w(g,y,b,C,O,N),j=this.k[P],U=this.k[P+1],Y=n[P],W=n[P+1],X=m(I,D,L,B,F,z,j,U,Y,W),G=v(I,D,L,B,F,z,j,U,Y,W);I=S(r,i),D=T(r,i),L=E(r,i,s,a,u),B=_(r,i,s,a,u,c);var V=l(I,D,L,B),q=f(I,D,L,B);k=O,R=N,O=b,N=C,b=g,C=y,g=l(d,p,X,G),y=f(p,p,X,G),d=u,p=c,u=s,c=a,s=r,a=i,r=l(X,G,V,q),i=f(X,G,V,q)}h(this.h,0,r,i),h(this.h,2,s,a),h(this.h,4,u,c),h(this.h,6,d,p),h(this.h,8,g,y),h(this.h,10,b,C),h(this.h,12,O,N),h(this.h,14,k,R)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){var r=n(10),i=n(202).Reporter,o=n(46).Buffer;function s(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof a||(t=new a(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(s,i),e.DecoderBuffer=s,s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){var e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=a,a.prototype.join=function(t,e){return t||(t=new o(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(t,e),e+=n.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},function(t,e,n){var r=e;r._reverse=function(t){var e={};return Object.keys(t).forEach(function(n){(0|n)==n&&(n|=0);var r=t[n];e[r]=n}),e},r.der=n(2166)},function(t,e,n){var r=n(10),i=n(201),o=i.base,s=i.bignum,a=i.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){o.Node.call(this,"der",t)}function h(t,e){var n=t.readUInt8(e);if(t.isError(n))return n;var r=a.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){var o=n;for(n=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;n<<=7,n|=127&o}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:a.tag[n]}}function l(t,e,n){var r=t.readUInt8(n);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;var i=127&r;if(i>4)return t.error("length octect is too long");r=0;for(var o=0;o<i;o++){r<<=8;var s=t.readUInt8(n);if(t.isError(s))return s;r|=s}return r}t.exports=u,u.prototype.decode=function(t,e){return t instanceof o.DecoderBuffer||(t=new o.DecoderBuffer(t,e)),this.tree._decode(t,e)},r(c,o.Node),c.prototype._peekTag=function(t,e,n){if(t.isEmpty())return!1;var r=t.save(),i=h(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(r),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||n)},c.prototype._decodeTag=function(t,e,n){var r=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var i=l(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!n&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');var o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(t,e){for(;;){var n=h(t,e);if(t.isError(n))return n;var r,i=l(t,n.primitive,e);if(t.isError(i))return i;if(r=n.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===n.tagStr)break}},c.prototype._decodeList=function(t,e,n,r){for(var i=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var s=n.decode(t,"der",r);if(t.isError(s)&&o)break;i.push(s)}return i},c.prototype._decodeStr=function(t,e){if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<r.length/2;o++)i+=String.fromCharCode(r.readUInt16BE(2*o));return i}if("numstr"===e){var s=t.raw().toString("ascii");return this._isNumstr(s)?s:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var a=t.raw().toString("ascii");return this._isPrintstr(a)?a:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(t,e,n){for(var r,i=[],o=0;!t.isEmpty();){var s=t.readUInt8();o<<=7,o|=127&s,0==(128&s)&&(i.push(o),o=0)}128&s&&i.push(o);var a=i[0]/40|0,u=i[0]%40;if(r=n?i:[a,u].concat(i.slice(1)),e){var c=e[r.join(" ")];void 0===c&&(c=e[r.join(".")]),void 0!==c&&(r=c)}return r},c.prototype._decodeTime=function(t,e){var n=t.raw().toString();if("gentime"===e)var r=0|n.slice(0,4),i=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),u=0|n.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,o,s,a,u,0)},c.prototype._decodeNull=function(t){return null},c.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},c.prototype._decodeInt=function(t,e){var n=t.raw(),r=new s(n);return e&&(r=e[r.toString(10)]||r),r},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t,e,n){var r=n(10),i=n(46).Buffer,o=n(201),s=o.base,a=o.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){s.Node.call(this,"der",t)}function h(t){return t<10?"0"+t:t}t.exports=u,u.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(c,s.Node),c.prototype._encodeComposite=function(t,e,n,r){var o,s=function(t,e,n,r){var i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))i=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);i=t}if(i>=31)return r.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=a.tagClassByName[n||"universal"]<<6}(t,e,n,this.reporter);if(r.length<128)return(o=new i(2))[0]=s,o[1]=r.length,this._createEncoderBuffer([o,r]);for(var u=1,c=r.length;c>=256;c>>=8)u++;(o=new i(2+u))[0]=s,o[1]=128|u;c=1+u;for(var h=r.length;h>0;c--,h>>=8)o[c]=255&h;return this._createEncoderBuffer([o,r])},c.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var n=new i(2*t.length),r=0;r<t.length;r++)n.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},c.prototype._encodeObjid=function(t,e,n){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(r=0;r<t.length;r++)t[r]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var o=0;for(r=0;r<t.length;r++){var s=t[r];for(o++;s>=128;s>>=7)o++}var a=new i(o),u=a.length-1;for(r=t.length-1;r>=0;r--){s=t[r];for(a[u--]=127&s;(s>>=7)>0;)a[u--]=128|127&s}return this._createEncoderBuffer(a)},c.prototype._encodeTime=function(t,e){var n,r=new Date(t);return"gentime"===e?n=[h(r.getFullYear()),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[h(r.getFullYear()%100),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){var n=t.toArray();!t.sign&&128&n[0]&&n.unshift(0),t=new i(n)}if(i.isBuffer(t)){var r=t.length;0===t.length&&r++;var o=new i(r);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);r=1;for(var s=t;s>=256;s>>=8)r++;for(s=(o=new Array(r)).length-1;s>=0;s--)o[s]=255&t,t>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new i(o))},c.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},c.prototype._skipDefault=function(t,e,n){var r,i=this._baseState;if(null===i.default)return!1;var o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,n).join()),o.length!==i.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==i.defaultBuffer[r])return!1;return!0}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,n){var r=n(197),i=n(11).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var n,s=i.alloc(0),a=0;s.length<e;)n=o(a++),s=i.concat([s,r("sha1").update(t).update(n).digest()]);return s.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var n=t.length,r=-1;++r<n;)t[r]^=e[r];return t}},function(t,e,n){var r=n(32),i=n(11).Buffer;t.exports=function(t,e){return i.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){t.exports=function(){var t=function(t){var e;return function(n){return e||t(e={exports:{},parent:n},e.exports),e.exports}},e=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scope=e.ActionName=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),i=f(a),o=f(ye),s=f(we),u=f(Oe),c=f(We),h=f(on),l=f(n({}));function f(t){return t&&t.__esModule?t:{default:t}}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}var w,E=r.win,_=r.browser,S=r.raf,T=r.Signals,A=r.events;e.ActionName=w,w||(e.ActionName=w={});var M=function(){function t(){var e=this;y(this,t),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.signals=new T,this.browser=_,this.events=A,this.utils=r,this.defaults=r.clone(o.default),this.Eventable=s.default,this.actions={names:[],methodDict:{},eventTypes:[]},this.InteractEvent=h.default,this.interactables=new c.default(this),this.documents=[],this._plugins=[],this._pluginMap={},this.onWindowUnload=function(t){return e.removeDocument(t.target)};var n=this;this.Interactable=function(t){function e(){return y(this,e),p(this,v(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,t),x(e,[{key:"set",value:function(t){return m(v(e.prototype),"set",this).call(this,t),n.interactables.signals.fire("set",{options:t,interactable:this}),this}},{key:"unset",value:function(){m(v(e.prototype),"unset",this).call(this);for(var t=n.interactions.list.length-1;t>=0;t--){var r=n.interactions.list[t];r.interactable===this&&(r.stop(),n.interactions.signals.fire("destroy",{interaction:r}),r.destroy(),n.interactions.list.length>2&&n.interactions.list.splice(t,1))}n.interactables.signals.fire("unset",{interactable:this})}},{key:"_defaults",get:function(){return n.defaults}}]),e}(u.default)}return x(t,[{key:"init",value:function(t){return C(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._pluginMap[t.id]||-1!==this._plugins.indexOf(t)}},{key:"usePlugin",value:function(t,e){return this.pluginIsInstalled(t)?this:(t.id&&(this._pluginMap[t.id]=t),t.install(this,e),this._plugins.push(t),this)}},{key:"addDocument",value:function(t,e){if(-1!==this.getDocIndex(t))return!1;var n=E.getWindow(t);e=e?r.extend({},e):{},this.documents.push({doc:t,options:e}),A.documents.push(t),t!==this.document&&A.add(n,"unload",this.onWindowUnload),this.signals.fire("add-document",{doc:t,window:n,scope:this,options:e})}},{key:"removeDocument",value:function(t){var e=this.getDocIndex(t),n=E.getWindow(t),r=this.documents[e].options;A.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),A.documents.splice(e,1),this.signals.fire("remove-document",{doc:t,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function C(t,e){return E.init(e),i.default.init(e),_.init(e),S.init(e),A.init(e),t.usePlugin(l.default),t.document=e.document,t.window=e,t}e.Scope=M}),n=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(A),i=l(a),o=l(ut),s=l(Z),u=l($t),c=l(r({})),h=l(_n);function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function b(t,e){return function(r){var i=e.interactions.list,o=s.default.getPointerType(r),a=s.default.getEventTargets(r),u=d(a,2),c=u[0],h=u[1],l=[];if(/^touch/.test(r.type)){e.prevTouchTime=e.now();for(var f=0;f<r.changedTouches.length;f++){var p=r.changedTouches[f],m=p,v=s.default.getPointerId(m),g={pointer:m,pointerId:v,pointerType:o,eventType:r.type,eventTarget:c,curEventTarget:h,scope:e},y=x(g);l.push([g.pointer,g.eventTarget,g.curEventTarget,y])}}else{var b=!1;if(!n.default.supportsPointerEvent&&/mouse/.test(r.type)){for(var w=0;w<i.length&&!b;w++)b="mouse"!==i[w].pointerType&&i[w].pointerIsDown;b=b||e.now()-e.prevTouchTime<500||0===r.timeStamp}if(!b){var E={pointer:r,pointerId:s.default.getPointerId(r),pointerType:o,eventType:r.type,curEventTarget:h,eventTarget:c,scope:e},_=x(E);l.push([E.pointer,E.eventTarget,E.curEventTarget,_])}}for(var S=0;S<l.length;S++){var T=d(l[S],4),A=T[0],M=T[1],C=T[2],O=T[3];O[t](A,r,M,C)}}}function x(t){var e=t.pointerType,n=t.scope,r=h.default.search(t),i={interaction:r,searchDetails:t};return n.interactions.signals.fire("find",i),i.interaction||n.interactions.new({pointerType:e})}function w(t,e){var n=t.doc,r=t.scope,i=t.options,s=r.interactions.docEvents,a=0===e.indexOf("add")?o.default.add:o.default.remove;for(var u in r.browser.isIOS&&!i.events&&(i.events={passive:!1}),o.default.delegatedEvents)a(n,u,o.default.delegateListener),a(n,u,o.default.delegateUseCapture,!0);for(var c=i&&i.events,h=0;h<s.length;h++){var l=s[h],f=l.type,d=l.listener;a(n,f,d,c)}}var E={id:"core/interactions",install:function(t){for(var e=new u.default,r={},o=0;o<y.length;o++){var s=y[o];r[s]=b(s,t)}var a,h=n.default.pEventTypes;function l(){for(var e=0;e<t.interactions.list.length;e++){var n=t.interactions.list[e];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var r=function(){var e=n.pointers[i];t.documents.some(function(t){var n=t.doc;return(0,P.nodeContains)(n,e.downTarget)})||n.removePointer(e.pointer,e.event)},i=0;i<n.pointers.length;i++)r()}}(a=i.default.PointerEvent?[{type:h.down,listener:l},{type:h.down,listener:r.pointerDown},{type:h.move,listener:r.pointerMove},{type:h.up,listener:r.pointerUp},{type:h.cancel,listener:r.pointerUp}]:[{type:"mousedown",listener:r.pointerDown},{type:"mousemove",listener:r.pointerMove},{type:"mouseup",listener:r.pointerUp},{type:"touchstart",listener:l},{type:"touchstart",listener:r.pointerDown},{type:"touchmove",listener:r.pointerMove},{type:"touchend",listener:r.pointerUp},{type:"touchcancel",listener:r.pointerUp}]).push({type:"blur",listener:function(e){for(var n=0;n<t.interactions.list.length;n++){var r=t.interactions.list[n];r.documentBlur(e)}}}),t.signals.on("add-document",w),t.signals.on("remove-document",w),t.prevTouchTime=0,t.Interaction=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),m(this,v(n).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(n,e),r=n,(i=[{key:"_now",value:function(){return t.now()}},{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}}])&&p(r.prototype,i),o&&p(r,o),n;var r,i,o}(c.default),t.interactions={signals:e,list:[],new:function(n){n.signals=e;var r=new t.Interaction(n);return t.interactions.list.push(r),r},listeners:r,docEvents:a,pointerMoveTolerance:1}},onDocSignal:w,doOnInteractions:b,methodNames:y};e.default=E}),r=t(function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PointerInfo",{enumerable:!0,get:function(){return u.default}}),n.default=n.Interaction=n._ProxyMethods=n._ProxyValues=void 0;var r,i,o,s=h(Qt),a=h(on),u=(r=xn)&&r.__esModule?r:{default:r},c=e({});function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n._ProxyValues=i,function(t){t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy=""}(i||(n._ProxyValues=i={})),n._ProxyMethods=o,function(t){t.start="",t.move="",t.end="",t.stop="",t.interacting=""}(o||(n._ProxyMethods=o={}));var f=function(){function t(e){var n=this,r=e.pointerType,a=e.signals;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.interactable=null,this.element=null,this.prepared={name:null,axis:null,edges:null},this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=null,this.simulation=null,this.doMove=s.warnOnce(function(t){this.move(t)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:s.pointer.newCoords(),prev:s.pointer.newCoords(),cur:s.pointer.newCoords(),delta:s.pointer.newCoords(),velocity:s.pointer.newCoords()},this._signals=a,this.pointerType=r;var u=this;this._proxy={};var c=function(t){Object.defineProperty(n._proxy,t,{get:function(){return u[t]}})};for(var h in i)c(h);var l=function(t){Object.defineProperty(n._proxy,t,{value:function(){return u[t].apply(u,arguments)}})};for(var h in o)l(h);this._signals.fire("new",{interaction:this})}return e=t,(n=[{key:"pointerDown",value:function(t,e,n){var r=this.updatePointer(t,e,n,!0);this._signals.fire("down",{pointer:t,event:e,eventTarget:n,pointerIndex:r,interaction:this})}},{key:"start",value:function(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(t.name===c.ActionName.Gesture?2:1)||!e.options[t.name].enabled)&&(s.copyAction(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges,this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:a.EventPhase.Start})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,n){this.simulation||this.modifiers&&this.modifiers.endPrevented||(this.updatePointer(t,e,n,!1),s.pointer.setCoords(this.coords.cur,this.pointers.map(function(t){return t.pointer}),this._now()));var r,i,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=s.hypot(r,i)>this.pointerMoveTolerance);var a={pointer:t,pointerIndex:this.getPointerIndex(t),event:e,eventTarget:n,dx:r,dy:i,duplicate:o,interaction:this};o||(s.pointer.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),s.pointer.setCoordVelocity(this.coords.velocity,this.coords.delta)),this._signals.fire("move",a),o||(this.interacting()&&this.move(a),this.pointerWasMoved&&s.pointer.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){(t=s.extend({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase=a.EventPhase.Move,this._doPhase(t)}},{key:"pointerUp",value:function(t,e,n,r){var i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,n,!1)),this._signals.fire(/cancel$/i.test(e.type)?"cancel":"up",{pointer:t,pointerIndex:i,event:e,eventTarget:n,curEventTarget:r,interaction:this}),this.simulation||this.end(e),this.pointerIsDown=!1,this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._signals.fire("blur",{event:t,interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:a.EventPhase.End})),this._ending=!1,!0===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._signals.fire("stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=s.pointer.getPointerId(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:s.arr.findIndex(this.pointers,function(t){return t.id===e})}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,n,r){var i=s.pointer.getPointerId(t),o=this.getPointerIndex(t),a=this.pointers[o];return r=!1!==r&&(r||/(down|start)$/i.test(e.type)),a?a.pointer=t:(a=new u.default(i,t,e,null,null),o=this.pointers.length,this.pointers.push(a)),r&&(this.pointerIsDown=!0,this.interacting()||(s.pointer.setCoords(this.coords.start,this.pointers.map(function(t){return t.pointer}),this._now()),s.pointer.copyCoords(this.coords.cur,this.coords.start),s.pointer.copyCoords(this.coords.prev,this.coords.start),s.pointer.pointerExtend(this.downPointer,t),this.downEvent=e,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._signals.fire("update-pointer",{pointer:t,event:e,eventTarget:n,down:r,pointerInfo:a,pointerIndex:o,interaction:this}),o}},{key:"removePointer",value:function(t,e){var n=this.getPointerIndex(t);if(-1!==n){var r=this.pointers[n];this._signals.fire("remove-pointer",{pointer:t,event:e,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1)}}},{key:"_updateLatestPointer",value:function(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,n,r){var i=this.prepared.name;return new a.default(this,t,i,e,this.element,null,n,r)}},{key:"_fireEvent",value:function(t){this.interactable.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,n=t.phase,r=t.preEnd,i=t.type,o=this._signals.fire("before-action-".concat(n),t);if(!1===o)return!1;var s=t.iEvent=this._createPreparedEvent(e,n,r,i),a=this.rect;if(a){var u=this.edges||this.prepared.edges||{left:!0,right:!0,top:!0,bottom:!0};u.top&&(a.top+=s.delta.y),u.bottom&&(a.bottom+=s.delta.y),u.left&&(a.left+=s.delta.x),u.right&&(a.right+=s.delta.x),a.width=a.right-a.left,a.height=a.bottom-a.top}return this._signals.fire("action-".concat(n),t),this._fireEvent(s),this._signals.fire("after-action-".concat(n),t),!0}},{key:"_now",value:function(){return Date.now()}},{key:"pointerMoveTolerance",get:function(){return 1}}])&&l(e.prototype,n),r&&l(e,r),t;var e,n,r}();n.Interaction=f;var d=f;n.default=d}),i={};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function s(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}Object.defineProperty(i,"__esModule",{value:!0}),i.contains=function(t,e){return-1!==t.indexOf(e)},i.remove=function(t,e){return t.splice(t.indexOf(e),1)},i.merge=o,i.from=function(t){return o([],t)},i.findIndex=s,i.find=function(t,e){return t[s(t,e)]};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u={init:function(t){var e=t;u.document=e.document,u.DocumentFragment=e.DocumentFragment||c,u.SVGElement=e.SVGElement||c,u.SVGSVGElement=e.SVGSVGElement||c,u.SVGElementInstance=e.SVGElementInstance||c,u.Element=e.Element||c,u.HTMLElement=e.HTMLElement||u.Element,u.Event=e.Event,u.Touch=e.Touch||c,u.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function c(){}var h=u;a.default=h;var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,l.default=function(t){return!(!t||!t.Window)&&t instanceof t.Window};var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.init=v,f.getWindow=g,f.default=void 0;var d,p=(d=l)&&d.__esModule?d:{default:d},m={realWindow:void 0,window:void 0,getWindow:g,init:v};function v(t){m.realWindow=t;var e=t.document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),m.window=t}function g(t){if((0,p.default)(t))return t;var e=t.ownerDocument||t;return e.defaultView||m.window}"undefined"==typeof window?(m.window=void 0,m.realWindow=void 0):v(window),m.init=v;var y=m;f.default=y;var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.array=b.plainObject=b.element=b.string=b.bool=b.number=b.func=b.object=b.docFrag=b.window=void 0;var x=E(l),w=E(f);function E(t){return t&&t.__esModule?t:{default:t}}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}b.window=function(t){return t===w.default.window||(0,x.default)(t)},b.docFrag=function(t){return S(t)&&11===t.nodeType};var S=function(t){return!!t&&"object"===_(t)};b.object=S;var T=function(t){return"function"==typeof t};b.func=T,b.number=function(t){return"number"==typeof t},b.bool=function(t){return"boolean"==typeof t},b.string=function(t){return"string"==typeof t},b.element=function(t){if(!t||"object"!==_(t))return!1;var e=w.default.getWindow(t)||w.default.window;return/object|function/.test(_(e.Element))?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},b.plainObject=function(t){return S(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},b.array=function(t){return S(t)&&void 0!==t.length&&T(t.splice)};var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var M=N(a),C=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b),O=N(f);function N(t){return t&&t.__esModule?t:{default:t}}var k={init:function(t){var e=M.default.Element,n=O.default.window.navigator;k.supportsTouch="ontouchstart"in t||C.func(t.DocumentTouch)&&M.default.document instanceof t.DocumentTouch,k.supportsPointerEvent=!1!==n.pointerEnabled&&!!M.default.PointerEvent,k.isIOS=/iP(hone|od|ad)/.test(n.platform),k.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),k.isIe9=/MSIE 9/.test(n.userAgent),k.isOperaMobile="Opera"===n.appName&&k.supportsTouch&&/Presto/.test(n.userAgent),k.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",k.pEventTypes=k.supportsPointerEvent?M.default.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,k.wheelEvent="onmousewheel"in M.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},R=k;A.default=R;var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.nodeContains=function(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1},P.closest=function(t,e){for(;L.element(t);){if(j(t,e))return t;t=z(t)}return null},P.parentNode=z,P.matchesSelector=j,P.indexOfDeepestElement=function(t){var e,n,r,i,o,s=[],a=[],u=t[0],c=u?0:-1;for(i=1;i<t.length;i++)if((e=t[i])&&e!==u)if(u){if(e.parentNode!==e.ownerDocument)if(u.parentNode!==e.ownerDocument){if(!s.length)for(n=u;U(n)&&U(n)!==n.ownerDocument;)s.unshift(n),n=U(n);if(u instanceof D.default.HTMLElement&&e instanceof D.default.SVGElement&&!(e instanceof D.default.SVGSVGElement)){if(e===u.parentNode)continue;n=e.ownerSVGElement}else n=e;for(a=[];n.parentNode!==n.ownerDocument;)a.unshift(n),n=U(n);for(o=0;a[o]&&a[o]===s[o];)o++;var h=[a[o-1],a[o],s[o]];for(r=h[0].lastChild;r;){if(r===h[1]){u=e,c=i,s=[];break}if(r===h[2])break;r=r.previousSibling}}else u=e,c=i}else u=e,c=i;return c},P.matchesUpTo=function(t,e,n){for(;L.element(t);){if(j(t,e))return!0;if((t=z(t))===n)return j(t,e)}return!1},P.getActualElement=function(t){return t instanceof D.default.SVGElementInstance?t.correspondingUseElement:t},P.getScrollXY=Y,P.getElementClientRect=W,P.getElementRect=function(t){var e=W(t);if(!I.default.isIOS7&&e){var n=Y(B.default.getWindow(t));e.left+=n.x,e.right+=n.x,e.top+=n.y,e.bottom+=n.y}return e},P.getPath=function(t){for(var e=[];t;)e.push(t),t=z(t);return e},P.trySelector=function(t){return!!L.string(t)&&(D.default.document.querySelector(t),!0)};var I=F(A),D=F(a),L=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b),B=F(f);function F(t){return t&&t.__esModule?t:{default:t}}function z(t){var e=t.parentNode;if(L.docFrag(e)){for(;(e=e.host)&&L.docFrag(e););return e}return e}function j(t,e){return B.default.window!==B.default.realWindow&&(e=e.replace(/\/deep\//g," ")),t[I.default.prefixedMatchesSelector](e)}var U=function(t){return t.parentNode?t.parentNode:t.host};function Y(t){return{x:(t=t||B.default.window).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function W(t){var e=t instanceof D.default.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.default=function t(e){var n={};for(var r in e){var i=e[r];V.plainObject(i)?n[r]=t(i):V.array(i)?n[r]=G.from(i):n[r]=i}return n};var G=q(i),V=q(b);function q(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}var H={};function K(t,e){for(var n in e){var r=K.prefixedPropREs,i=!1;for(var o in r)if(0===n.indexOf(o)&&r[o].test(n)){i=!0;break}i||"function"==typeof e[n]||(t[n]=e[n])}return t}Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0,K.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};var $=K;H.default=$;var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0,J.default=function(t,e){return Math.sqrt(t*t+e*e)};var Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var Q=ot(A),tt=ot(a),et=it(P),nt=ot(J),rt=it(b);function it(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function ot(t){return t&&t.__esModule?t:{default:t}}var st={copyCoords:function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},setCoordDeltas:function(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=n.timeStamp-e.timeStamp},setCoordVelocity:function(t,e){var n=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/n,t.page.y=e.page.y/n,t.client.x=e.client.x/n,t.client.y=e.client.y/n,t.timeStamp=n},isNativePointer:function(t){return t instanceof tt.default.Event||t instanceof tt.default.Touch},getXY:function(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n},getPageXY:function(t,e){return e=e||{x:0,y:0},Q.default.isOperaMobile&&st.isNativePointer(t)?(st.getXY("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):st.getXY("page",t,e),e},getClientXY:function(t,e){return e=e||{},Q.default.isOperaMobile&&st.isNativePointer(t)?st.getXY("screen",t,e):st.getXY("client",t,e),e},getPointerId:function(t){return rt.number(t.pointerId)?t.pointerId:t.identifier},setCoords:function(t,e,n){var r=e.length>1?st.pointerAverage(e):e[0],i={};st.getPageXY(r,i),t.page.x=i.x,t.page.y=i.y,st.getClientXY(r,i),t.client.x=i.x,t.client.y=i.y,t.timeStamp=n},pointerExtend:ot(H).default,getTouchPair:function(t){var e=[];return rt.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e},pointerAverage:function(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var r=t[n];for(var i in e)e[i]+=r[i]}for(var o in e)e[o]/=t.length;return e},touchBBox:function(t){if(!(t.length||t.touches&&t.touches.length>1))return null;var e=st.getTouchPair(t),n=Math.min(e[0].pageX,e[1].pageX),r=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),o=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:r,left:n,top:r,right:i,bottom:o,width:i-n,height:o-r}},touchDistance:function(t,e){var n=e+"X",r=e+"Y",i=st.getTouchPair(t),o=i[0][n]-i[1][n],s=i[0][r]-i[1][r];return(0,nt.default)(o,s)},touchAngle:function(t,e){var n=e+"X",r=e+"Y",i=st.getTouchPair(t),o=i[1][n]-i[0][n],s=i[1][r]-i[0][r],a=180*Math.atan2(s,o)/Math.PI;return a},getPointerType:function(t){return rt.string(t.pointerType)?t.pointerType:rt.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof tt.default.Touch?"touch":"mouse"},getEventTargets:function(t){var e=rt.func(t.composedPath)?t.composedPath():t.path;return[et.getActualElement(e?e[0]:t.target),et.getActualElement(t.currentTarget)]},newCoords:function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},coordsToEvent:function(t){var e={coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons}};return e}},at=st;Z.default=at;var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.default=ut.FakeEvent=void 0;var ct=pt(P),ht=pt(b),lt=dt(H),ft=dt(Z);function dt(t){return t&&t.__esModule?t:{default:t}}function pt(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gt=[],yt=[],bt={},xt=[];function wt(t,e,n,r){var o=Tt(r),s=gt.indexOf(t),a=yt[s];a||(a={events:{},typeCount:0},s=gt.push(t)-1,yt.push(a)),a.events[e]||(a.events[e]=[],a.typeCount++),(0,i.contains)(a.events[e],n)||(t.addEventListener(e,n,Mt.supportsOptions?o:!!o.capture),a.events[e].push(n))}function Et(t,e,n,r){var i=Tt(r),o=gt.indexOf(t),s=yt[o];if(s&&s.events)if("all"!==e){if(s.events[e]){var a=s.events[e].length;if("all"===n){for(var u=0;u<a;u++)Et(t,e,s.events[e][u],i);return}for(var c=0;c<a;c++)if(s.events[e][c]===n){t.removeEventListener(e,n,Mt.supportsOptions?i:!!i.capture),s.events[e].splice(c,1);break}s.events[e]&&0===s.events[e].length&&(s.events[e]=null,s.typeCount--)}s.typeCount||(yt.splice(o,1),gt.splice(o,1))}else for(e in s.events)s.events.hasOwnProperty(e)&&Et(t,e,"all")}function _t(t,e){for(var n=Tt(e),r=new At(t),i=bt[t.type],o=ft.default.getEventTargets(t),s=vt(o,1),a=s[0],u=a;ht.element(u);){for(var c=0;c<i.selectors.length;c++){var h=i.selectors[c],l=i.contexts[c];if(ct.matchesSelector(u,h)&&ct.nodeContains(l,a)&&ct.nodeContains(l,u)){var f=i.listeners[c];r.currentTarget=u;for(var d=0;d<f.length;d++){var p=f[d],m=vt(p,3),v=m[0],g=m[1],y=m[2];g===!!n.capture&&y===n.passive&&v(r)}}}u=ct.parentNode(u)}}function St(t){return _t.call(this,t,!0)}function Tt(t){return ht.object(t)?t:{capture:t}}var At=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originalEvent=e,(0,lt.default)(this,e)}return e=t,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&mt(e.prototype,n),r&&mt(e,r),t;var e,n,r}();ut.FakeEvent=At;var Mt={add:wt,remove:Et,addDelegate:function(t,e,n,r,i){var o=Tt(i);if(!bt[n]){bt[n]={contexts:[],listeners:[],selectors:[]};for(var s=0;s<xt.length;s++){var a=xt[s];wt(a,n,_t),wt(a,n,St,!0)}}var u,c=bt[n];for(u=c.selectors.length-1;u>=0&&(c.selectors[u]!==t||c.contexts[u]!==e);u--);-1===u&&(u=c.selectors.length,c.selectors.push(t),c.contexts.push(e),c.listeners.push([])),c.listeners[u].push([r,!!o.capture,o.passive])},removeDelegate:function(t,e,n,r,i){var o,s=Tt(i),a=bt[n],u=!1;if(a)for(o=a.selectors.length-1;o>=0;o--)if(a.selectors[o]===t&&a.contexts[o]===e){for(var c=a.listeners[o],h=c.length-1;h>=0;h--){var l=vt(c[h],3),f=l[0],d=l[1],p=l[2];if(f===r&&d===!!s.capture&&p===s.passive){c.splice(h,1),c.length||(a.selectors.splice(o,1),a.contexts.splice(o,1),a.listeners.splice(o,1),Et(e,n,_t),Et(e,n,St,!0),a.selectors.length||(bt[n]=null)),u=!0;break}}if(u)break}},delegateListener:_t,delegateUseCapture:St,delegatedEvents:bt,documents:xt,supportsOptions:!1,supportsPassive:!1,_elements:gt,_targets:yt,init:function(t){t.document.createElement("div").addEventListener("test",null,{get capture(){return Mt.supportsOptions=!0},get passive(){return Mt.supportsPassive=!0}})}},Ct=Mt;ut.default=Ct;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=function(t,e){for(var n in e)t[n]=e[n];return t};var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.getStringOptionResult=It,Nt.resolveRectLike=Dt,Nt.rectToXY=Lt,Nt.xywhToTlbr=Bt,Nt.tlbrToXywh=Ft,Nt.default=void 0;var kt=function(t){return t&&t.__esModule?t:{default:t}}(Ot),Rt=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b);function Pt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function It(t,e,n){return"parent"===t?(0,P.parentNode)(n):"self"===t?e.getRect(n):(0,P.closest)(n,t)}function Dt(t,e,n,r){return Rt.string(t)?t=It(t,e,n):Rt.func(t)&&(t=t.apply(void 0,Pt(r))),Rt.element(t)&&(t=(0,P.getElementRect)(t)),t}function Lt(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}}function Bt(t){return!t||"left"in t&&"top"in t||((t=(0,kt.default)({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t}function Ft(t){return!t||"x"in t&&"y"in t||((t=(0,kt.default)({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||t.right-t.x,t.height=t.height||t.bottom-t.y),t}var zt={getStringOptionResult:It,resolveRectLike:Dt,rectToXY:Lt,xywhToTlbr:Bt,tlbrToXywh:Ft};Nt.default=zt;var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=function(t,e,n){var r=t.options[n],i=r&&r.origin||t.options.origin,o=(0,Nt.resolveRectLike)(i,t,e,[t&&e]);return(0,Nt.rectToXY)(o)||{x:0,y:0}};var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default=function t(e,n,r){if(r=r||{},Wt.string(e)&&-1!==e.search(" ")&&(e=Xt(e)),Wt.array(e))return e.reduce(function(e,i){return(0,Yt.default)(e,t(i,n,r))},r);if(Wt.object(e)&&(n=e,e=""),Wt.func(n))r[e]=r[e]||[],r[e].push(n);else if(Wt.array(n))for(var i=0;i<n.length;i++){var o=n[i];t(e,o,r)}else if(Wt.object(n))for(var s in n){var a=Xt(s).map(function(t){return"".concat(e).concat(t)});t(a,n[s],r)}return r};var Yt=function(t){return t&&t.__esModule?t:{default:t}}(Ot),Wt=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b);function Xt(t){return t.trim().split(/ +/)}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var Vt,qt,Ht=0,Kt={request:function(t){return Vt(t)},cancel:function(t){return qt(t)},init:function(t){if(Vt=t.requestAnimationFrame,qt=t.cancelAnimationFrame,!Vt)for(var e=["ms","moz","webkit","o"],n=0;n<e.length;n++){var r=e[n];Vt=t["".concat(r,"RequestAnimationFrame")],qt=t["".concat(r,"CancelAnimationFrame")]||t["".concat(r,"CancelRequestAnimationFrame")]}Vt||(Vt=function(t){var e=Date.now(),n=Math.max(0,16-(e-Ht)),r=setTimeout(function(){t(e+n)},n);return Ht=e+n,r},qt=function(t){return clearTimeout(t)})}};Gt.default=Kt;var $t={};function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty($t,"__esModule",{value:!0}),$t.default=void 0;var Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}return e=t,(n=[{key:"on",value:function(t,e){this.listeners[t]?this.listeners[t].push(e):this.listeners[t]=[e]}},{key:"off",value:function(t,e){if(this.listeners[t]){var n=this.listeners[t].indexOf(e);-1!==n&&this.listeners[t].splice(n,1)}}},{key:"fire",value:function(t,e){var n=this.listeners[t];if(n)for(var r=0;r<n.length;r++){var i=n[r];if(!1===i(e,t))return!1}}}])&&Jt(e.prototype,n),r&&Jt(e,r),t;var e,n,r}();$t.default=Zt;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.warnOnce=function(t,e){var n=!1;return function(){return n||(re.default.window.console.warn(e),n=!0),t.apply(this,arguments)}},Qt._getQBezierValue=ge,Qt.getQuadraticCurvePoint=function(t,e,n,r,i,o,s){return{x:ge(s,t,n,i),y:ge(s,e,r,o)}},Qt.easeOutQuad=function(t,e,n,r){return-n*(t/=r)*(t-2)+e},Qt.copyAction=function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t},Object.defineProperty(Qt,"win",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(Qt,"browser",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(Qt,"clone",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(Qt,"events",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(Qt,"extend",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(Qt,"getOriginXY",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(Qt,"hypot",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(Qt,"normalizeListeners",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(Qt,"pointer",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(Qt,"raf",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(Qt,"rect",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(Qt,"Signals",{enumerable:!0,get:function(){return pe.default}}),Qt.is=Qt.dom=Qt.arr=void 0;var te=ve(i);Qt.arr=te;var ee=ve(P);Qt.dom=ee;var ne=ve(b);Qt.is=ne;var re=me(f),ie=me(A),oe=me(X),se=me(ut),ae=me(Ot),ue=me(jt),ce=me(J),he=me(Ut),le=me(Z),fe=me(Gt),de=me(Nt),pe=me($t);function me(t){return t&&t.__esModule?t:{default:t}}function ve(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function ge(t,e,n,r){var i=1-t;return i*i*e+2*i*t*n+t*t*r}var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=ye.defaults=void 0;var be={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};ye.defaults=be;var xe=be;ye.default=xe;var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var Ee=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(i),_e=Te(Ot),Se=Te(Ut);function Te(t){return t&&t.__esModule?t:{default:t}}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t.immediatePropagationStopped)break;r(t)}}var Ce=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.options=(0,_e.default)({},e||{})}return e=t,(n=[{key:"fire",value:function(t){var e,n=this.global;(e=this.types[t.type])&&Me(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&Me(t,e)}},{key:"on",value:function(t,e){var n=(0,Se.default)(t,e);for(t in n)this.types[t]=Ee.merge(this.types[t]||[],n[t])}},{key:"off",value:function(t,e){var n=(0,Se.default)(t,e);for(t in n){var r=this.types[t];if(r&&r.length)for(var i=0;i<n[t].length;i++){var o=n[t][i],s=r.indexOf(o);-1!==s&&r.splice(s,1)}}}}])&&Ae(e.prototype,n),r&&Ae(e,r),t;var e,n,r}();we.default=Ce;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=Oe.Interactable=void 0;var Ne=ze(i),ke=Fe(A),Re=Fe(X),Pe=Fe(ut),Ie=Fe(Ot),De=ze(b),Le=Fe(Ut),Be=Fe(we);function Fe(t){return t&&t.__esModule?t:{default:t}}function ze(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ue=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events=new Be.default,this._actions=n.actions,this.target=e,this._context=n.context||r,this._win=(0,f.getWindow)((0,P.trySelector)(e)?this._context:e),this._doc=this._win.document,this.set(n)}return e=t,(n=[{key:"setOnEvents",value:function(t,e){return De.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),De.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),De.func(e.onend)&&this.on("".concat(t,"end"),e.onend),De.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,n){(De.array(e)||De.object(e))&&this.off(t,e),(De.array(n)||De.object(n))&&this.on(t,n)}},{key:"setPerAction",value:function(t,e){var n=this._defaults;for(var r in e){var i=this.options[t],o=e[r],s=De.array(o);"listeners"===r&&this.updatePerActionListeners(t,i.listeners,o),s?i[r]=Ne.from(o):!s&&De.plainObject(o)?(i[r]=(0,Ie.default)(i[r]||{},(0,Re.default)(o)),De.object(n.perAction[r])&&"enabled"in n.perAction[r]&&(i[r].enabled=!1!==o.enabled)):De.bool(o)&&De.object(n.perAction[r])?i[r].enabled=o:i[r]=o}}},{key:"getRect",value:function(t){return t=t||(De.element(this.target)?this.target:null),De.string(this.target)&&(t=t||this._context.querySelector(this.target)),(0,P.getElementRect)(t)}},{key:"rectChecker",value:function(t){return De.func(t)?(this.getRect=t,this):null===t?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if((0,P.trySelector)(e)||De.object(e)){this.options[t]=e;for(var n=0;n<this._actions.names.length;n++){var r=this._actions.names[n];this.options[r][t]=e}return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||(0,P.nodeContains)(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}},{key:"testAllow",value:function(t,e,n){return!t||!!De.element(n)&&(De.string(t)?(0,P.matchesUpTo)(n,t,e):!!De.element(t)&&(0,P.nodeContains)(t,n))}},{key:"testIgnore",value:function(t,e,n){return!(!t||!De.element(n))&&(De.string(t)?(0,P.matchesUpTo)(n,t,e):!!De.element(t)&&(0,P.nodeContains)(t,n))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,n,r){De.object(e)&&!De.array(e)&&(r=n,n=null);var i="on"===t?"add":"remove",o=(0,Le.default)(e,n);for(var s in o){"wheel"===s&&(s=ke.default.wheelEvent);for(var a=0;a<o[s].length;a++){var u=o[s][a];Ne.contains(this._actions.eventTypes,s)?this.events[t](s,u):De.string(this.target)?Pe.default["".concat(i,"Delegate")](this.target,this._context,s,u,r):Pe.default[i](this.target,s,u,r)}}return this}},{key:"on",value:function(t,e,n){return this._onOff("on",t,e,n)}},{key:"off",value:function(t,e,n){return this._onOff("off",t,e,n)}},{key:"set",value:function(t){var e=this._defaults;for(var n in De.object(t)||(t={}),this.options=(0,Re.default)(e.base),this._actions.methodDict){var r=this._actions.methodDict[n];this.options[n]={},this.setPerAction(n,(0,Ie.default)((0,Ie.default)({},e.perAction),e.actions[n])),this[r](t[n])}for(var i in t)De.func(this[i])&&this[i](t[i]);return this}},{key:"unset",value:function(){if(Pe.default.remove(this.target,"all"),De.string(this.target))for(var t in Pe.default.delegatedEvents){var e=Pe.default.delegatedEvents[t];e.selectors[0]===this.target&&e.contexts[0]===this._context&&(e.selectors.splice(0,1),e.contexts.splice(0,1),e.listeners.splice(0,1),e.selectors.length||(e[t]=null)),Pe.default.remove(this._context,t,Pe.default.delegateListener),Pe.default.remove(this._context,t,Pe.default.delegateUseCapture,!0)}else Pe.default.remove(this.target,"all")}},{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}])&&je(e.prototype,n),r&&je(e,r),t;var e,n,r}();Oe.Interactable=Ue;var Ye=Ue;Oe.default=Ye;var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.default=void 0;var Xe=$e(i),Ge=$e(P),Ve=Ke(Ot),qe=$e(b),He=Ke($t);function Ke(t){return t&&t.__esModule?t:{default:t}}function $e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ze=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scope=e,this.signals=new He.default,this.list=[],this.selectorMap={},this.signals.on("unset",function(t){var e=t.interactable,r=e.target,i=e._context,o=qe.string(r)?n.selectorMap[r]:r[n.scope.id],s=o.findIndex(function(t){return t.context===i});o[s]&&(o[s].context=null,o[s].interactable=null),o.splice(s,1)})}return e=t,(n=[{key:"new",value:function(t,e){e=(0,Ve.default)(e||{},{actions:this.scope.actions});var n=new this.scope.Interactable(t,e,this.scope.document),r={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),qe.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(r)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(r)),this.signals.fire("new",{target:t,options:e,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(t,e){var n=e&&e.context||this.scope.document,r=qe.string(t),i=r?this.selectorMap[t]:t[this.scope.id];if(!i)return null;var o=Xe.find(i,function(e){return e.context===n&&(r||e.interactable.inContext(t))});return o&&o.interactable}},{key:"forEachMatch",value:function(t,e){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=void 0;if((qe.string(r.target)?qe.element(t)&&Ge.matchesSelector(t,r.target):t===r.target)&&r.inContext(t)&&(i=e(r)),void 0!==i)return i}}}])&&Je(e.prototype,n),r&&Je(e,r),t;var e,n,r}();We.default=Ze;var Qe,tn={};function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(tn,"__esModule",{value:!0}),tn.default=tn.BaseEvent=tn.EventPhase=void 0,tn.EventPhase=Qe,function(t){t.Start="start",t.Move="move",t.End="end",t._NONE=""}(Qe||(tn.EventPhase=Qe={}));var nn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=e}return e=t,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"interaction",get:function(){return this._interaction._proxy}}])&&en(e.prototype,n),r&&en(e,r),t;var e,n,r}();tn.BaseEvent=nn;var rn=nn;tn.default=rn;var on={};Object.defineProperty(on,"__esModule",{value:!0}),on.default=on.InteractEvent=on.EventPhase=void 0;var sn,an=fn(Ot),un=fn(jt),cn=fn(J),hn=fn(tn),ln=fn(ye);function fn(t){return t&&t.__esModule?t:{default:t}}function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mn(t){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}on.EventPhase=sn,function(t){t.Start="start",t.Move="move",t.End="end",t._NONE=""}(sn||(on.EventPhase=sn={}));var yn=function(t){function e(t,n,r,i,o,s,a,u){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c=function(t,e){return!e||"object"!==dn(e)&&"function"!=typeof e?vn(t):e}(this,mn(e).call(this,t)),o=o||t.element;var h=t.interactable,l=(h&&h.options||ln.default).deltaSource,f=(0,un.default)(h,o,r),d="start"===i,p="end"===i,m=d?vn(c):t.prevEvent,v=d?t.coords.start:p?{page:m.page,client:m.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return c.page=(0,an.default)({},v.page),c.client=(0,an.default)({},v.client),c.rect=(0,an.default)({},t.rect),c.timeStamp=v.timeStamp,p||(c.page.x-=f.x,c.page.y-=f.y,c.client.x-=f.x,c.client.y-=f.y),c.ctrlKey=n.ctrlKey,c.altKey=n.altKey,c.shiftKey=n.shiftKey,c.metaKey=n.metaKey,c.button=n.button,c.buttons=n.buttons,c.target=o,c.currentTarget=o,c.relatedTarget=s||null,c.preEnd=a,c.type=u||r+(i||""),c.interactable=h,c.t0=d?t.pointers[t.pointers.length-1].downTime:m.t0,c.x0=t.coords.start.page.x-f.x,c.y0=t.coords.start.page.y-f.y,c.clientX0=t.coords.start.client.x-f.x,c.clientY0=t.coords.start.client.y-f.y,c.delta=d||p?{x:0,y:0}:{x:c[l].x-m[l].x,y:c[l].y-m[l].y},c.dt=t.coords.delta.timeStamp,c.duration=c.timeStamp-c.t0,c.velocity=(0,an.default)({},t.coords.velocity[l]),c.speed=(0,cn.default)(c.velocity.x,c.velocity.y),c.swipe=p||"inertiastart"===i?c.getSwipe():null,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gn(t,e)}(e,t),n=e,(r=[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,r=202.5<=e&&e<337.5,i=!n&&(292.5<=e||e<67.5),o=!r&&22.5<=e&&e<157.5;return{up:r,down:o,left:n,right:i,angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"pageX",get:function(){return this.page.x},set:function(t){this.page.x=t}},{key:"pageY",get:function(){return this.page.y},set:function(t){this.page.y=t}},{key:"clientX",get:function(){return this.client.x},set:function(t){this.client.x=t}},{key:"clientY",get:function(){return this.client.y},set:function(t){this.client.y=t}},{key:"dx",get:function(){return this.delta.x},set:function(t){this.delta.x=t}},{key:"dy",get:function(){return this.delta.y},set:function(t){this.delta.y=t}},{key:"velocityX",get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},{key:"velocityY",get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}])&&pn(n.prototype,r),i&&pn(n,i),e;var n,r,i}(hn.default);on.InteractEvent=yn;var bn=yn;on.default=bn;var xn={};Object.defineProperty(xn,"__esModule",{value:!0}),xn.default=xn.PointerInfo=void 0;var wn=function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.pointer=n,this.event=r,this.downTime=i,this.downTarget=o};xn.PointerInfo=wn;var En=wn;xn.default=En;var _n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.default=void 0;var Sn=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(P),Tn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0;e<Tn.methodOrder.length;e++){var n=Tn.methodOrder[e],r=Tn[n](t);if(r)return r}},simulationResume:function(t){var e=t.pointerType,n=t.eventType,r=t.eventTarget,i=t.scope;if(!/down|start/i.test(n))return null;for(var o=0;o<i.interactions.list.length;o++){var s=i.interactions.list[o],a=r;if(s.simulation&&s.simulation.allowResume&&s.pointerType===e)for(;a;){if(a===s.element)return s;a=Sn.parentNode(a)}}return null},mouseOrPen:function(t){var e,n=t.pointerId,r=t.pointerType,i=t.eventType,o=t.scope;if("mouse"!==r&&"pen"!==r)return null;for(var s=0;s<o.interactions.list.length;s++){var a=o.interactions.list[s];if(a.pointerType===r){if(a.simulation&&!An(a,n))continue;if(a.interacting())return a;e||(e=a)}}if(e)return e;for(var u=0;u<o.interactions.list.length;u++){var c=o.interactions.list[u];if(!(c.pointerType!==r||/down/i.test(i)&&c.simulation))return c}return null},hasPointer:function(t){for(var e=t.pointerId,n=t.scope,r=0;r<n.interactions.list.length;r++){var i=n.interactions.list[r];if(An(i,e))return i}return null},idle:function(t){for(var e=t.pointerType,n=t.scope,r=0;r<n.interactions.list.length;r++){var i=n.interactions.list[r];if(1===i.pointers.length){var o=i.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&e===i.pointerType)return i}return null}};function An(t,e){return t.pointers.some(function(t){var n=t.id;return n===e})}var Mn=Tn;_n.default=Mn;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.default=void 0;var On=e({}),Nn=Rn(i),kn=Rn(b);function Rn(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function Pn(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function In(t){var e=t.iEvent,n=t.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var i="x"===r?"y":"x";e.page[i]=n.coords.start.page[i],e.client[i]=n.coords.start.client[i],e.delta[i]=0}}}On.ActionName.Drag="drag";var Dn={id:"actions/drag",install:function(t){var e=t.actions,n=t.Interactable,r=t.interactions,i=t.defaults;r.signals.on("before-action-move",Pn),r.signals.on("action-resume",Pn),r.signals.on("action-move",In),n.prototype.draggable=Dn.draggable,e[On.ActionName.Drag]=Dn,e.names.push(On.ActionName.Drag),Nn.merge(e.eventTypes,["dragstart","dragmove","draginertiastart","dragresume","dragend"]),e.methodDict.drag="draggable",i.actions.drag=Dn.defaults},draggable:function(t){return kn.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):kn.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:Pn,move:In,defaults:{startAxis:"xy",lockAxis:"xy"},checker:function(t,e,n){var r=n.options.drag;return r.enabled?{name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis}:null},getCursor:function(){return"move"}},Ln=Dn;Cn.default=Ln;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.default=void 0;var Fn=function(t){return t&&t.__esModule?t:{default:t}}(tn),zn=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(i);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vn=function(t){function e(t,n,r){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Wn(this,Xn(e).call(this,n._interaction))).propagationStopped=!1,i.immediatePropagationStopped=!1;var o="dragleave"===r?t.prev:t.cur,s=o.element,a=o.dropzone;return i.type=r,i.target=s,i.currentTarget=s,i.dropzone=a,i.dragEvent=n,i.relatedTarget=n.target,i.draggable=n.interactable,i.timeStamp=n.timeStamp,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(e,t),n=e,(r=[{key:"reject",value:function(){var t=this,n=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&n.cur.dropzone===this.dropzone&&n.cur.element===this.target)if(n.prev.dropzone=this.dropzone,n.prev.element=this.target,n.rejected=!0,n.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=n.activeDrops,i=zn.findIndex(r,function(e){var n=e.dropzone,r=e.element;return n===t.dropzone&&r===t.target});n.activeDrops=[].concat(Un(r.slice(0,i)),Un(r.slice(i+1)));var o=new e(n,this.dragEvent,"dropdeactivate");o.dropzone=this.dropzone,o.target=this.target,this.dropzone.fire(o)}else this.dropzone.fire(new e(n,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&Yn(n.prototype,r),i&&Yn(n,i),e;var n,r,i}(Fn.default);Bn.default=Vn;var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0;var Hn=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),Kn=Jn(Cn),$n=Jn(Bn);function Jn(t){return t&&t.__esModule?t:{default:t}}function Zn(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.dropzone,o=r.element;e.dropzone=i,e.target=o,i.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function Qn(t,e){for(var n=function(t,e){for(var n=t.interactables,r=[],i=0;i<n.list.length;i++){var o=n.list[i];if(o.options.drop.enabled){var s=o.options.drop.accept;if(!(Hn.is.element(s)&&s!==e||Hn.is.string(s)&&!Hn.dom.matchesSelector(e,s)||Hn.is.func(s)&&!s({dropzone:o,draggableElement:e})))for(var a=Hn.is.string(o.target)?o._context.querySelectorAll(o.target):Hn.is.array(o.target)?o.target:[o.target],u=0;u<a.length;u++){var c=a[u];c!==e&&r.push({dropzone:o,element:c})}}}return r}(t,e),r=0;r<n.length;r++){var i=n[r];i.rect=i.dropzone.getRect(i.element)}return n}function tr(t,e,n){for(var r=t.dropState,i=t.interactable,o=t.element,s=[],a=0;a<r.activeDrops.length;a++){var u=r.activeDrops[a],c=u.dropzone,h=u.element,l=u.rect;s.push(c.dropCheck(e,n,i,o,h,l)?h:null)}var f=Hn.dom.indexOfDeepestElement(s);return r.activeDrops[f]||null}function er(t,e,n){var r=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(i.activate=new $n.default(r,n,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===n.type&&(i.deactivate=new $n.default(r,n,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),r.rejected?i:(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(i.leave=new $n.default(r,n,"dragleave"),n.dragLeave=i.leave.target=r.prev.element,n.prevDropzone=i.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(i.enter=new $n.default(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(i.drop=new $n.default(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(i.move=new $n.default(r,n,"dropmove"),i.move.dragmove=n,n.dropzone=r.cur.dropzone),i)}function nr(t,e){var n=t.dropState,r=n.activeDrops,i=n.cur,o=n.prev;e.leave&&o.dropzone.fire(e.leave),e.move&&i.dropzone.fire(e.move),e.enter&&i.dropzone.fire(e.enter),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&Zn(r,e.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function rr(t,e){var n=t.interaction,r=t.iEvent,i=t.event;if("dragmove"===r.type||"dragend"===r.type){var o=n.dropState;e.dynamicDrop&&(o.activeDrops=Qn(e,n.element));var s=r,a=tr(n,s,i);o.rejected=o.rejected&&!!a&&a.dropzone===o.cur.dropzone&&a.element===o.cur.element,o.cur.dropzone=a&&a.dropzone,o.cur.element=a&&a.element,o.events=er(n,0,s)}}var ir={id:"actions/drop",install:function(t){var e=t.actions,n=t.interact,r=t.Interactable,i=t.interactions,o=t.defaults;t.usePlugin(Kn.default),i.signals.on("before-action-start",function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:null})}),i.signals.on("after-action-start",function(e){var n=e.interaction,r=(e.event,e.iEvent);if("drag"===n.prepared.name){var i=n.dropState;i.activeDrops=null,i.events=null,i.activeDrops=Qn(t,n.element),i.events=er(n,0,r),i.events.activate&&Zn(i.activeDrops,i.events.activate)}}),i.signals.on("action-move",function(e){return rr(e,t)}),i.signals.on("action-end",function(e){return rr(e,t)}),i.signals.on("after-action-move",function(t){var e=t.interaction;"drag"===e.prepared.name&&(nr(e,e.dropState.events),e.dropState.events={})}),i.signals.on("after-action-end",function(t){var e=t.interaction;"drag"===e.prepared.name&&nr(e,e.dropState.events)}),i.signals.on("stop",function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}),r.prototype.dropzone=function(t){return function(t,e){if(Hn.is.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var n=Hn.normalizeListeners(e.listeners),r=Object.keys(n).reduce(function(t,e){var r=/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e;return t[r]=n[e],t},{});t.off(t.options.drop.listeners),t.on(r),t.options.drop.listeners=r}return Hn.is.func(e.ondrop)&&t.on("drop",e.ondrop),Hn.is.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),Hn.is.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),Hn.is.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),Hn.is.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),Hn.is.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:Hn.is.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return Hn.is.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},r.prototype.dropCheck=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a=!1;if(!(s=s||t.getRect(o)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,a,t,o,r,i);var u=t.options.drop.overlap;if("pointer"===u){var c=Hn.getOriginXY(r,i,"drag"),h=Hn.pointer.getPageXY(e);h.x+=c.x,h.y+=c.y;var l=h.x>s.left&&h.x<s.right,f=h.y>s.top&&h.y<s.bottom;a=l&&f}var d=r.getRect(i);if(d&&"center"===u){var p=d.left+d.width/2,m=d.top+d.height/2;a=p>=s.left&&p<=s.right&&m>=s.top&&m<=s.bottom}if(d&&Hn.is.number(u)){var v=Math.max(0,Math.min(s.right,d.right)-Math.max(s.left,d.left))*Math.max(0,Math.min(s.bottom,d.bottom)-Math.max(s.top,d.top)),g=v/(d.width*d.height);a=g>=u}return t.options.drop.checker&&(a=t.options.drop.checker(e,n,a,t,o,r,i)),a}(this,t,e,n,r,i,o)},n.dynamicDrop=function(e){return Hn.is.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},Hn.arr.merge(e.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]),e.methodDict.drop="dropzone",t.dynamicDrop=!1,o.actions.drop=ir.defaults},getActiveDrops:Qn,getDrop:tr,getDropEvents:er,fireDropEvents:nr,defaults:{enabled:!1,accept:null,overlap:"pointer"}},or=ir;qn.default=or;var sr={};Object.defineProperty(sr,"__esModule",{value:!0}),sr.default=void 0;var ar=function(t){return t&&t.__esModule?t:{default:t}}(on),ur=e({}),cr=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt);ur.ActionName.Gesture="gesture";var hr={id:"actions/gesture",install:function(t){var e=t.actions,n=t.Interactable,r=t.interactions,i=t.defaults;n.prototype.gesturable=function(t){return cr.is.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):cr.is.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},r.signals.on("action-start",lr),r.signals.on("action-move",lr),r.signals.on("action-end",lr),r.signals.on("new",function(t){var e=t.interaction;e.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}}),e[ur.ActionName.Gesture]=hr,e.names.push(ur.ActionName.Gesture),cr.arr.merge(e.eventTypes,["gesturestart","gesturemove","gestureend"]),e.methodDict.gesture="gesturable",i.actions.gesture=hr.defaults},defaults:{},checker:function(t,e,n,r,i){return i.pointers.length>=2?{name:"gesture"}:null},getCursor:function(){return""}};function lr(t){var e=t.interaction,n=t.iEvent,r=t.event,i=t.phase;if("gesture"===e.prepared.name){var o=e.pointers.map(function(t){return t.pointer}),s="start"===i,a="end"===i,u=e.interactable.options.deltaSource;if(n.touches=[o[0],o[1]],s)n.distance=cr.pointer.touchDistance(o,u),n.box=cr.pointer.touchBBox(o),n.scale=1,n.ds=0,n.angle=cr.pointer.touchAngle(o,u),n.da=0,e.gesture.startDistance=n.distance,e.gesture.startAngle=n.angle;else if(a||r instanceof ar.default){var c=e.prevEvent;n.distance=c.distance,n.box=c.box,n.scale=c.scale,n.ds=0,n.angle=c.angle,n.da=0}else n.distance=cr.pointer.touchDistance(o,u),n.box=cr.pointer.touchBBox(o),n.scale=n.distance/e.gesture.startDistance,n.angle=cr.pointer.touchAngle(o,u),n.ds=n.scale-e.gesture.scale,n.da=n.angle-e.gesture.angle;e.gesture.distance=n.distance,e.gesture.angle=n.angle,cr.is.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(e.gesture.scale=n.scale)}}var fr=hr;sr.default=fr;var dr={};Object.defineProperty(dr,"__esModule",{value:!0}),dr.default=void 0;var pr=e({}),mr=br(i),vr=br(P),gr=function(t){return t&&t.__esModule?t:{default:t}}(Ot),yr=br(b);function br(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}pr.ActionName.Resize="resize";var xr={id:"actions/resize",install:function(t){var e=t.actions,n=t.browser,r=t.Interactable,i=t.interactions,o=t.defaults;i.signals.on("new",function(t){t.resizeAxes="xy"}),i.signals.on("action-start",Er),i.signals.on("action-move",_r),i.signals.on("action-start",Sr),i.signals.on("action-move",Sr),xr.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),xr.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(e){return function(t,e,n){return yr.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),yr.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),yr.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:yr.bool(e.square)&&(t.options.resize.square=e.square),t):yr.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e[pr.ActionName.Resize]=xr,e.names.push(pr.ActionName.Resize),mr.merge(e.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeresume","resizeend"]),e.methodDict.resize="resizable",o.actions.resize=xr.defaults},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function(t,e,n,r,i,o){if(!o)return null;var s=(0,gr.default)({},i.coords.cur.page),a=n.options;if(a.resize.enabled){var u=a.resize,c={left:!1,right:!1,top:!1,bottom:!1};if(yr.object(u.edges)){for(var h in c)c[h]=wr(h,u.edges[h],s,i._latestPointer.eventTarget,r,o,u.margin||this.defaultMargin);if(c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,c.left||c.right||c.top||c.bottom)return{name:"resize",edges:c}}else{var l="y"!==a.resize.axis&&s.x>o.right-this.defaultMargin,f="x"!==a.resize.axis&&s.y>o.bottom-this.defaultMargin;if(l||f)return{name:"resize",axes:(l?"x":"")+(f?"y":"")}}}return null},cursors:null,getCursor:function(t){var e=t.edges,n=t.axis,r=t.name,i=xr.cursors,o=null;if(n)o=i[r+n];else if(e){for(var s="",a=["top","bottom","left","right"],u=0;u<a.length;u++){var c=a[u];e[c]&&(s+=c)}o=i[s]}return o},defaultMargin:null};function wr(t,e,n,r,i,o,s){if(!e)return!1;if(!0===e){var a=yr.number(o.width)?o.width:o.right-o.left,u=yr.number(o.height)?o.height:o.bottom-o.top;if(s=Math.min(s,("left"===t||"right"===t?a:u)/2),a<0&&("left"===t?t="right":"right"===t&&(t="left")),u<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return n.x<(a>=0?o.left:o.right)+s;if("top"===t)return n.y<(u>=0?o.top:o.bottom)+s;if("right"===t)return n.x>(a>=0?o.right:o.left)-s;if("bottom"===t)return n.y>(u>=0?o.bottom:o.top)-s}return!!yr.element(r)&&(yr.element(e)?e===r:vr.matchesUpTo(r,e,i))}function Er(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=n.rect,i=n.interactable.options.resize;if(i.square||i.preserveAspectRatio){var o=(0,gr.default)({},n.prepared.edges);o.top=o.top||o.left&&!o.bottom,o.left=o.left||o.top&&!o.right,o.bottom=o.bottom||o.right&&!o.top,o.right=o.right||o.bottom&&!o.left,n.prepared._linkedEdges=o}else n.prepared._linkedEdges=null;i.preserveAspectRatio&&(n.resizeStartAspectRatio=r.width/r.height),n.resizeRects={start:r,current:(0,gr.default)({},r),inverted:(0,gr.default)({},r),previous:(0,gr.default)({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},e.rect=n.resizeRects.inverted,e.deltaRect=n.resizeRects.delta}}function _r(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r,i=n.interactable.options.resize,o=i.invert,s="reposition"===o||"negate"===o,a=n.prepared.edges,u=n.resizeRects.start,c=n.resizeRects.current,h=n.resizeRects.inverted,l=n.resizeRects.delta,f=(0,gr.default)(n.resizeRects.previous,h),d=a,p=(0,gr.default)({},e.delta);if(i.preserveAspectRatio||i.square){var m=i.preserveAspectRatio?n.resizeStartAspectRatio:1;a=n.prepared._linkedEdges,d.left&&d.bottom||d.right&&d.top?p.y=-p.x/m:d.left||d.right?p.y=p.x/m:(d.top||d.bottom)&&(p.x=p.y*m)}for(var v in a.top&&(c.top+=p.y),a.bottom&&(c.bottom+=p.y),a.left&&(c.left+=p.x),a.right&&(c.right+=p.x),s?((0,gr.default)(h,c),"reposition"===o&&(h.top>h.bottom&&(r=h.top,h.top=h.bottom,h.bottom=r),h.left>h.right&&(r=h.left,h.left=h.right,h.right=r))):(h.top=Math.min(c.top,u.bottom),h.bottom=Math.max(c.bottom,u.top),h.left=Math.min(c.left,u.right),h.right=Math.max(c.right,u.left)),h.width=h.right-h.left,h.height=h.bottom-h.top,h)l[v]=h[v]-f[v];e.edges=n.prepared.edges,e.rect=h,e.deltaRect=l}}function Sr(t){var e=t.interaction,n=t.iEvent,r=t.action;if("resize"===r&&e.resizeAxes){var i=e.interactable.options;i.resize.square?("y"===e.resizeAxes?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=e.resizeAxes,"x"===e.resizeAxes?n.delta.y=0:"y"===e.resizeAxes&&(n.delta.x=0))}}var Tr=xr;dr.default=Tr;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.install=function(t){t.usePlugin(Or.default),t.usePlugin(Nr.default),t.usePlugin(Mr.default),t.usePlugin(Cr.default)},Object.defineProperty(Ar,"drag",{enumerable:!0,get:function(){return Mr.default}}),Object.defineProperty(Ar,"drop",{enumerable:!0,get:function(){return Cr.default}}),Object.defineProperty(Ar,"gesture",{enumerable:!0,get:function(){return Or.default}}),Object.defineProperty(Ar,"resize",{enumerable:!0,get:function(){return Nr.default}}),Ar.id=void 0;var Mr=kr(Cn),Cr=kr(qn),Or=kr(sr),Nr=kr(dr);function kr(t){return t&&t.__esModule?t:{default:t}}Ar.id="actions";var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.getContainer=Fr,Rr.getScroll=zr,Rr.getScrollSize=function(t){return Ir.window(t)&&(t=window.document.body),{x:t.scrollWidth,y:t.scrollHeight}},Rr.getScrollSizeDelta=function(t,e){var n=t.interaction,r=t.element,i=n&&n.interactable.options[n.prepared.name].autoScroll;if(!i||!i.enabled)return e(),{x:0,y:0};var o=Fr(i.container,n.interactable,r),s=zr(o);e();var a=zr(o);return{x:a.x-s.x,y:a.y-s.y}},Rr.default=void 0;var Pr=Lr(P),Ir=Lr(b),Dr=function(t){return t&&t.__esModule?t:{default:t}}(Gt);function Lr(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}var Br={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:null,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){Br.isScrolling=!0,Dr.default.cancel(Br.i),t.autoScroll=Br,Br.interaction=t,Br.prevTime=Br.now(),Br.i=Dr.default.request(Br.scroll)},stop:function(){Br.isScrolling=!1,Br.interaction&&(Br.interaction.autoScroll=null),Dr.default.cancel(Br.i)},scroll:function(){var t=Br.interaction,e=t.interactable,n=t.element,r=e.options[Br.interaction.prepared.name].autoScroll,i=Fr(r.container,e,n),o=Br.now(),s=(o-Br.prevTime)/1e3,a=r.speed*s;if(a>=1){var u={x:Br.x*a,y:Br.y*a};if(u.x||u.y){var c=zr(i);Ir.window(i)?i.scrollBy(u.x,u.y):i&&(i.scrollLeft+=u.x,i.scrollTop+=u.y);var h=zr(i),l={x:h.x-c.x,y:h.y-c.y};(l.x||l.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:l,interaction:t,container:i})}Br.prevTime=o}Br.isScrolling&&(Dr.default.cancel(Br.i),Br.i=Dr.default.request(Br.scroll))},check:function(t,e){var n=t.options;return n[e].autoScroll&&n[e].autoScroll.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&Br.check(e.interactable,e.prepared.name))if(e.simulation)Br.x=Br.y=0;else{var r,i,o,s,a=e.interactable,u=e.element,c=a.options[e.prepared.name].autoScroll,h=Fr(c.container,a,u);if(Ir.window(h))s=n.clientX<Br.margin,r=n.clientY<Br.margin,i=n.clientX>h.innerWidth-Br.margin,o=n.clientY>h.innerHeight-Br.margin;else{var l=Pr.getElementClientRect(h);s=n.clientX<l.left+Br.margin,r=n.clientY<l.top+Br.margin,i=n.clientX>l.right-Br.margin,o=n.clientY>l.bottom-Br.margin}Br.x=i?1:s?-1:0,Br.y=o?1:r?-1:0,Br.isScrolling||(Br.margin=c.margin,Br.speed=c.speed,Br.start(e))}}};function Fr(t,e,n){return(Ir.string(t)?(0,Nt.getStringOptionResult)(t,e,n):t)||(0,f.getWindow)(n)}function zr(t){return Ir.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var jr={id:"auto-scroll",install:function(t){var e=t.interactions,n=t.defaults,r=t.actions;t.autoScroll=Br,Br.now=function(){return t.now()},e.signals.on("new",function(t){var e=t.interaction;e.autoScroll=null}),e.signals.on("destroy",function(t){var e=t.interaction;e.autoScroll=null,Br.stop(),Br.interaction&&(Br.interaction=null)}),e.signals.on("stop",Br.stop),e.signals.on("action-move",function(t){return Br.onInteractionMove(t)}),r.eventTypes.push("autoscroll"),n.perAction.autoScroll=Br.defaults}};Rr.default=jr;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.default=void 0;var Yr=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b);function Wr(t,e,n,r){var i=this.defaultActionChecker(t,e,n,r);return this.options.actionChecker?this.options.actionChecker(t,e,i,this,r,n):i}function Xr(t){return Yr.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function Gr(t){return Yr.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}var Vr={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable,n=t.actions;e.prototype.getAction=Wr,e.prototype.ignoreFrom=(0,Qt.warnOnce)(function(t){return this._backCompatOption("ignoreFrom",t)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,Qt.warnOnce)(function(t){return this._backCompatOption("allowFrom",t)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=Gr,e.prototype.styleCursor=Xr,e.prototype.defaultActionChecker=function(t,e,r,i){return function(t,e,n,r,i,o){for(var s=t.getRect(i),a=n.buttons||{0:1,1:4,3:8,4:16}[n.button],u=null,c=0;c<o.names.length;c++){var h=o.names[c];if((!r.pointerIsDown||!/mouse|pointer/.test(r.pointerType)||0!=(a&t.options[h].mouseButtons))&&(u=o[h].checker(e,n,t,i,r,s)))return u}}(this,t,e,r,i,n)}}};Ur.default=Vr;var qr={};Object.defineProperty(qr,"__esModule",{value:!0}),qr.default=void 0;var Hr=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),Kr=function(t){return t&&t.__esModule?t:{default:t}}(Ur);function $r(t,e,n,r,i){return e.testIgnoreAllow(e.options[t.name],n,r)&&e.options[t.name].enabled&&ti(e,n,t,i)?t:null}function Jr(t,e,n,r,i,o,s){for(var a=0,u=r.length;a<u;a++){var c=r[a],h=i[a],l=c.getAction(e,n,t,h);if(l){var f=$r(l,c,h,o,s);if(f)return{action:f,interactable:c,element:h}}}return{action:null,interactable:null,element:null}}function Zr(t,e,n,r,i){var o=[],s=[],a=r;function u(t){o.push(t),s.push(a)}for(;Hr.is.element(a);){o=[],s=[],i.interactables.forEachMatch(a,u);var c=Jr(t,e,n,o,s,r,i);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;a=Hr.dom.parentNode(a)}return{action:null,interactable:null,element:null}}function Qr(t,e,n){var r=e.action,i=e.interactable,o=e.element;if(r=r||{},t.interactable&&t.interactable.options.styleCursor&&ni(t.element,"",n),t.interactable=i,t.element=o,Hr.copyAction(t.prepared,r),t.rect=i&&r.name?i.getRect(o):null,"mouse"===t.pointerType&&i&&i.options.styleCursor){var s="";if(r){var a=i.options[r.name].cursorChecker;s=Hr.is.func(a)?a(r,i,o):n.actions[r.name].getCursor(r)}ni(t.element,s||"",n)}n.autoStart.signals.fire("prepared",{interaction:t})}function ti(t,e,n,r){var i=t.options,o=i[n.name].max,s=i[n.name].maxPerElement,a=r.autoStart.maxInteractions,u=0,c=0,h=0;if(!(o&&s&&a))return!1;for(var l=0;l<r.interactions.list.length;l++){var f=r.interactions.list[l],d=f.prepared.name;if(f.interacting()){if(++u>=a)return!1;if(f.interactable===t){if((c+=d===n.name?1:0)>=o)return!1;if(f.element===e&&(h++,d===n.name&&h>=s))return!1}}}return a>0}function ei(t,e){return Hr.is.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function ni(t,e,n){n.autoStart.cursorElement&&(n.autoStart.cursorElement.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}var ri={id:"auto-start/base",install:function(t){var e=t.interact,n=t.interactions,r=t.defaults;t.usePlugin(Kr.default),n.signals.on("down",function(e){var n=e.interaction,r=e.pointer,i=e.event,o=e.eventTarget;if(!n.interacting()){var s=Zr(n,r,i,o,t);Qr(n,s,t)}}),n.signals.on("move",function(e){var n=e.interaction,r=e.pointer,i=e.event,o=e.eventTarget;if("mouse"===n.pointerType&&!n.pointerIsDown&&!n.interacting()){var s=Zr(n,r,i,o,t);Qr(n,s,t)}}),n.signals.on("move",function(e){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.autoStart.signals.fire("before-start",e);var r=n.interactable;n.prepared.name&&r&&(r.options[n.prepared.name].manualStart||!ti(r,n.element,n.prepared,t)?n.stop():n.start(n.prepared,r,n.element))}}),n.signals.on("stop",function(e){var n=e.interaction,r=n.interactable;r&&r.options.styleCursor&&ni(n.element,"",t)}),r.base.actionChecker=null,r.base.styleCursor=!0,Hr.extend(r.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return ei(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:ti,cursorElement:null,signals:new Hr.Signals}},maxInteractions:ei,withinInteractionLimit:ti,validateAction:$r};qr.default=ri;var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.default=void 0;var oi=e({}),si=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b),ai=function(t){return t&&t.__esModule?t:{default:t}}(qr),ui={id:"auto-start/dragAxis",install:function(t){t.autoStart.signals.on("before-start",function(e){var n=e.interaction,r=e.eventTarget,i=e.dx,o=e.dy;if("drag"===n.prepared.name){var s=Math.abs(i),a=Math.abs(o),u=n.interactable.options.drag,c=u.startAxis,h=s>a?"x":s<a?"y":"xy";if(n.prepared.axis="start"===u.lockAxis?h[0]:u.lockAxis,"xy"!==h&&"xy"!==c&&c!==h){n.prepared.name=null;for(var l=r,f=function(e){if(e!==n.interactable){var i=n.interactable.options.drag;if(!i.manualStart&&e.testIgnoreAllow(i,l,r)){var o=e.getAction(n.downPointer,n.downEvent,n,l);if(o&&o.name===oi.ActionName.Drag&&function(t,e){if(!e)return!1;var n=e.options[oi.ActionName.Drag].startAxis;return"xy"===t||"xy"===n||n===t}(h,e)&&ai.default.validateAction(o,e,l,r,t))return e}}};si.element(l);){var d=t.interactables.forEachMatch(l,f);if(d){n.prepared.name=oi.ActionName.Drag,n.interactable=d,n.element=l;break}l=(0,P.parentNode)(l)}}}})}};ii.default=ui;var ci={};Object.defineProperty(ci,"__esModule",{value:!0}),ci.default=void 0;var hi=function(t){return t&&t.__esModule?t:{default:t}}(qr);function li(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.interactable.options;return n[e].hold||n[e].delay}var fi={id:"auto-start/hold",install:function(t){var e=t.autoStart,n=t.interactions,r=t.defaults;t.usePlugin(hi.default),r.perAction.hold=0,r.perAction.delay=0,n.signals.on("new",function(t){t.autoStartHoldTimer=null}),e.signals.on("prepared",function(t){var e=t.interaction,n=li(e);n>0&&(e.autoStartHoldTimer=setTimeout(function(){e.start(e.prepared,e.interactable,e.element)},n))}),n.signals.on("move",function(t){var e=t.interaction,n=t.duplicate;e.pointerWasMoved&&!n&&clearTimeout(e.autoStartHoldTimer)}),e.signals.on("before-start",function(t){var e=t.interaction,n=li(e);n>0&&(e.prepared.name=null)})},getHoldDuration:li};ci.default=fi;var di={};Object.defineProperty(di,"__esModule",{value:!0}),di.install=function(t){t.usePlugin(pi.default),t.usePlugin(vi.default),t.usePlugin(mi.default)},Object.defineProperty(di,"autoStart",{enumerable:!0,get:function(){return pi.default}}),Object.defineProperty(di,"dragAxis",{enumerable:!0,get:function(){return mi.default}}),Object.defineProperty(di,"hold",{enumerable:!0,get:function(){return vi.default}}),di.id=void 0;var pi=gi(qr),mi=gi(ii),vi=gi(ci);function gi(t){return t&&t.__esModule?t:{default:t}}di.id="auto-start";var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.install=_i,yi.default=void 0;var bi=function(t){return t&&t.__esModule?t:{default:t}}(ut),xi=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b);function wi(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):xi.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function Ei(t){var e=t.interaction,n=t.event;e.interactable&&e.interactable.checkAndPreventDefault(n)}function _i(t){var e=t.Interactable;e.prototype.preventDefault=wi,e.prototype.checkAndPreventDefault=function(e){return function(t,e,n){var r=t.options.preventDefault;if("never"!==r)if("always"!==r){if(bi.default.supportsPassive&&/^touch(start|move)$/.test(n.type)){var i=(0,f.getWindow)(n.target).document,o=e.getDocOptions(i);if(!o||!o.events||!1!==o.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||xi.element(n.target)&&(0,P.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,e)};for(var n=["down","move","up","cancel"],r=0;r<n.length;r++){var i=n[r];t.interactions.signals.on(i,Ei)}t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var n=0;n<t.interactions.list.length;n++){var r=t.interactions.list[n];if(r.element&&(r.element===e.target||(0,P.nodeContains)(r.element,e.target)))return void r.interactable.checkAndPreventDefault(e)}}})}var Si={id:"core/interactablePreventDefault",install:_i};yi.default=Si;var Ti,Ai={};function Mi(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=void 0,Mi(a),Mi(Ot),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}e.default=t}(b),Mi(f),function(t){t.touchAction="",t.boxSizing="",t.noListeners=""}(Ti||(Ti={}));var Ci={id:"dev-tools",install:function(){}};Ai.default=Ci;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.startAll=Pi,Oi.setAll=Ii,Oi.prepareStates=zi,Oi.makeModifier=Xi,Oi.default=void 0;var Ni=function(t){return t&&t.__esModule?t:{default:t}}(Ot);function ki(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ri(t,e){var n=t.interaction,r=t.phase,i=n.interactable,o=n.element,s=Fi(n),a=zi(s),u=(0,Ni.default)({},n.rect);"width"in u||(u.width=u.right-u.left),"height"in u||(u.height=u.bottom-u.top);var c=Wi(u,e);n.modifiers.startOffset=c,n.modifiers.startDelta={x:0,y:0};var h={interaction:n,interactable:i,element:o,pageCoords:e,phase:r,rect:u,startOffset:c,states:a,preEnd:!1,requireEndOnly:!1};n.modifiers.states=a,n.modifiers.result=null,Pi(h),h.pageCoords=(0,Ni.default)({},n.coords.start.page);var l=n.modifiers.result=Ii(h);return l}function Pi(t){for(var e=t.states,n=0;n<e.length;n++){var r=e[n];r.methods.start&&(t.state=r,r.methods.start(t))}}function Ii(t){var e=t.interaction,n=t.modifiersState,r=void 0===n?e.modifiers:n,i=t.prevCoords,o=void 0===i?r.result?r.result.coords:e.coords.prev.page:i,s=t.phase,a=t.preEnd,u=t.requireEndOnly,c=t.rect,h=t.skipModifiers,l=h?t.states.slice(h):t.states;t.coords=(0,Ni.default)({},t.pageCoords),t.rect=(0,Ni.default)({},c);for(var f={delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},coords:t.coords,changed:!0},d=0;d<l.length;d++){var p=l[d],m=p.options;p.methods.set&&Yi(m,a,u,s)&&(t.state=p,p.methods.set(t))}f.delta.x=t.coords.x-t.pageCoords.x,f.delta.y=t.coords.y-t.pageCoords.y;var v=!1;return c&&(f.rectDelta.left=t.rect.left-c.left,f.rectDelta.right=t.rect.right-c.right,f.rectDelta.top=t.rect.top-c.top,f.rectDelta.bottom=t.rect.bottom-c.bottom,v=0!==f.rectDelta.left||0!==f.rectDelta.right||0!==f.rectDelta.top||0!==f.rectDelta.bottom),f.changed=o.x!==f.coords.x||o.y!==f.coords.y||v,f}function Di(t){var e=t.interaction,n=t.phase,r=t.preEnd,i=t.skipModifiers,o=e.interactable,s=e.element,a=Ii({interaction:e,interactable:o,element:s,preEnd:r,phase:n,pageCoords:e.coords.cur.page,rect:e.rect,states:e.modifiers.states,requireEndOnly:!1,skipModifiers:i});if(e.modifiers.result=a,!a.changed&&e.interacting())return!1;ji(t)}function Li(t){var e=t.interaction,n=t.event,r=t.noPreEnd,i=e.modifiers.states;if(!r&&i&&i.length)for(var o=!1,s=0;s<i.length;s++){var a=i[s];t.state=a;var u=a.options,c=a.methods,h=c.beforeEnd&&c.beforeEnd(t);if(!1===h)return e.modifiers.endPrevented=!0,!1;!o&&Yi(u,!0,!0)&&(e.move({event:n,preEnd:!0}),o=!0)}}function Bi(t){var e=t.interaction,n=e.modifiers.states;if(n&&n.length){var r=(0,Ni.default)({states:n,interactable:e.interactable,element:e.element},t);Ui(t);for(var i=0;i<n.length;i++){var o=n[i];r.state=o,o.methods.stop&&o.methods.stop(r)}t.interaction.modifiers.states=null,t.interaction.modifiers.endPrevented=!1}}function Fi(t){var e=t.interactable.options[t.prepared.name],n=e.modifiers;return n&&n.length?n.filter(function(t){return!t.options||!1!==t.options.enabled}):["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(t){var n=e[t];return n&&n.enabled&&{options:n,methods:n._methods}}).filter(function(t){return!!t})}function zi(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r.options,o=r.methods,s=r.name;i&&!1===i.enabled||e.push({options:i,methods:o,index:n,name:s})}return e}function ji(t){var e=t.interaction,n=t.phase,r=t.curCoords||e.coords.cur,i=t.startCoords||e.coords.start,o=e.modifiers,s=o.result,a=o.startDelta,u=s.delta;"start"===n&&(0,Ni.default)(e.modifiers.startDelta,s.delta);for(var c=[[i,a],[r,u]],h=0;h<c.length;h++){var l=ki(c[h],2),f=l[0],d=l[1];f.page.x+=d.x,f.page.y+=d.y,f.client.x+=d.x,f.client.y+=d.y}var p=e.modifiers.result.rectDelta,m=t.rect||e.rect;m.left+=p.left,m.right+=p.right,m.top+=p.top,m.bottom+=p.bottom,m.width=m.right-m.left,m.height=m.bottom-m.top}function Ui(t){var e=t.interaction,n=e.coords,r=e.rect,i=e.modifiers;if(i.result){for(var o=i.startDelta,s=i.result,a=s.delta,u=s.rectDelta,c=[[n.start,o],[n.cur,a]],h=0;h<c.length;h++){var l=ki(c[h],2),f=l[0],d=l[1];f.page.x-=d.x,f.page.y-=d.y,f.client.x-=d.x,f.client.y-=d.y}r.left-=u.left,r.right-=u.right,r.top-=u.top,r.bottom-=u.bottom}}function Yi(t,e,n,r){return t?!1!==t.enabled&&(e||!t.endOnly)&&(!n||t.endOnly||t.alwaysOnEnd)&&(t.setStart||"start"!==r):!n}function Wi(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}function Xi(t,e){var n=t.defaults,r={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},i=function(t){var i=t||{};for(var o in i.enabled=!1!==i.enabled,n)o in i||(i[o]=n[o]);var s={options:i,methods:r,name:e};return s};return e&&"string"==typeof e&&(i._defaults=n,i._methods=r),i}var Gi={id:"modifiers/base",install:function(t){var e=t.interactions;t.defaults.perAction.modifiers=[],e.signals.on("new",function(t){var e=t.interaction;e.modifiers={startOffset:{left:0,right:0,top:0,bottom:0},offsets:{},states:null,result:null,endPrevented:!1,startDelta:null}}),e.signals.on("before-action-start",function(t){Ri(t,t.interaction.coords.start.page)}),e.signals.on("action-resume",function(t){Bi(t),Ri(t,t.interaction.coords.cur.page),Di(t)}),e.signals.on("after-action-move",Ui),e.signals.on("before-action-move",Di),e.signals.on("before-action-start",ji),e.signals.on("after-action-start",Ui),e.signals.on("before-action-end",Li),e.signals.on("stop",Bi)},startAll:Pi,setAll:Ii,prepareStates:zi,start:Ri,beforeMove:Di,beforeEnd:Li,stop:Bi,shouldDo:Yi,getModifierList:Fi,getRectOffset:Wi,makeModifier:Xi};Oi.default=Gi;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.default=void 0;var qi=$i(Oi),Hi=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),Ki=$i(Gt);function $i(t){return t&&t.__esModule?t:{default:t}}function Ji(t,e){var n=eo(t),r=n.resistance,i=-Math.log(n.endSpeed/e.v0)/r;e.x0=t.prevEvent.page.x,e.y0=t.prevEvent.page.y,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-i)/r,e.modifiedYe=e.ye=(e.vy0-i)/r,e.te=i,e.lambda_v0=r/e.v0,e.one_ve_v0=1-n.endSpeed/e.v0}function Zi(t){to(t),Hi.pointer.setCoordDeltas(t.coords.delta,t.coords.prev,t.coords.cur),Hi.pointer.setCoordVelocity(t.coords.velocity,t.coords.delta);var e=t.inertia,n=eo(t),r=n.resistance,i=t._now()/1e3-e.t0;if(i<e.te){var o=1-(Math.exp(-r*i)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye)e.sx=e.xe*o,e.sy=e.ye*o;else{var s=Hi.getQuadraticCurvePoint(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,o);e.sx=s.x,e.sy=s.y}t.move(),e.timeout=Ki.default.request(function(){return Zi(t)})}else e.sx=e.modifiedXe,e.sy=e.modifiedYe,t.move(),t.end(e.startEvent),e.active=!1,t.simulation=null;Hi.pointer.copyCoords(t.coords.prev,t.coords.cur)}function Qi(t){to(t);var e=t.inertia,n=t._now()-e.t0,r=eo(t),i=r.smoothEndDuration;n<i?(e.sx=Hi.easeOutQuad(n,0,e.xe,i),e.sy=Hi.easeOutQuad(n,0,e.ye,i),t.move(),e.timeout=Ki.default.request(function(){return Qi(t)})):(e.sx=e.xe,e.sy=e.ye,t.move(),t.end(e.startEvent),e.smoothEnd=e.active=!1,t.simulation=null)}function to(t){var e=t.inertia;if(e.active){var n=e.upCoords.page,r=e.upCoords.client;Hi.pointer.setCoords(t.coords.cur,[{pageX:n.x+e.sx,pageY:n.y+e.sy,clientX:r.x+e.sx,clientY:r.y+e.sy}],t._now())}}function eo(t){var e=t.interactable,n=t.prepared;return e&&e.options&&n.name&&e.options[n.name].inertia}on.EventPhase.Resume="resume",on.EventPhase.InertiaStart="inertiastart";var no={id:"inertia",install:function(t){var e=t.interactions,n=t.defaults;e.signals.on("new",function(t){var e=t.interaction;e.inertia={active:!1,smoothEnd:!1,allowResume:!1,upCoords:{},timeout:null}}),e.signals.on("before-action-end",function(e){return function(t,e){var n=t.interaction,r=t.event,i=t.noPreEnd,o=n.inertia;if(!n.interacting()||n.simulation&&n.simulation.active||i)return null;var s,a=eo(n),u=n._now(),c=n.coords.velocity.client,h=Hi.hypot(c.x,c.y),l=!1,f=a&&a.enabled&&"gesture"!==n.prepared.name&&r!==o.startEvent,d=f&&u-n.coords.cur.timeStamp<50&&h>a.minSpeed&&h>a.endSpeed,p={interaction:n,pageCoords:Hi.extend({},n.coords.cur.page),states:f&&n.modifiers.states.map(function(t){return Hi.extend({},t)}),preEnd:!0,prevCoords:void 0,requireEndOnly:null};return f&&!d&&(p.prevCoords=n.prevEvent.page,p.requireEndOnly=!1,(s=qi.default.setAll(p)).changed&&(l=!0)),d||l?(Hi.pointer.copyCoords(o.upCoords,n.coords.cur),n.pointers[0].pointer=o.startEvent=new e.InteractEvent(n,r,n.prepared.name,on.EventPhase.InertiaStart,n.element),o.t0=u,o.active=!0,o.allowResume=a.allowResume,n.simulation=o,n.interactable.fire(o.startEvent),d?(o.vx0=n.coords.velocity.client.x,o.vy0=n.coords.velocity.client.y,o.v0=h,Ji(n,o),Hi.extend(p.pageCoords,n.coords.cur.page),p.pageCoords.x+=o.xe,p.pageCoords.y+=o.ye,p.prevCoords=void 0,p.requireEndOnly=!0,s=qi.default.setAll(p),o.modifiedXe+=s.delta.x,o.modifiedYe+=s.delta.y,o.timeout=Ki.default.request(function(){return Zi(n)})):(o.smoothEnd=!0,o.xe=s.delta.x,o.ye=s.delta.y,o.sx=o.sy=0,o.timeout=Ki.default.request(function(){return Qi(n)})),!1):null}(e,t)}),e.signals.on("down",function(e){return function(t,e){var n=t.interaction,r=t.event,i=t.pointer,o=t.eventTarget,s=n.inertia;if(s.active)for(var a=o;Hi.is.element(a);){if(a===n.element){Ki.default.cancel(s.timeout),s.active=!1,n.simulation=null,n.updatePointer(i,r,o,!0),Hi.pointer.setCoords(n.coords.cur,n.pointers.map(function(t){return t.pointer}),n._now());var u={interaction:n};e.interactions.signals.fire("action-resume",u);var c=new e.InteractEvent(n,r,n.prepared.name,on.EventPhase.Resume,n.element);n._fireEvent(c),Hi.pointer.copyCoords(n.coords.prev,n.coords.cur);break}a=Hi.dom.parentNode(a)}}(e,t)}),e.signals.on("stop",function(t){return e=t.interaction,void((n=e.inertia).active&&(Ki.default.cancel(n.timeout),n.active=!1,e.simulation=null));var e,n}),n.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300},t.usePlugin(qi.default)},calcInertia:Ji,inertiaTick:Zi,smothEndTick:Qi,updateInertiaCoords:to};Vi.default=no;var ro={};Object.defineProperty(ro,"__esModule",{value:!0}),ro.default=void 0;var io=ao(Ot),oo=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b),so=ao(Nt);function ao(t){return t&&t.__esModule?t:{default:t}}function uo(t,e,n){return oo.func(t)?so.default.resolveRectLike(t,e.interactable,e.element,[n.x,n.y,e]):so.default.resolveRectLike(t,e.interactable,e.element)}var co={start:function(t){var e=t.rect,n=t.startOffset,r=t.state,i=t.interaction,o=t.pageCoords,s=r.options,a=s.elementRect,u=(0,io.default)({left:0,top:0,right:0,bottom:0},s.offset||{});if(e&&a){var c=uo(s.restriction,i,o);if(c){var h=c.right-c.left-e.width,l=c.bottom-c.top-e.height;h<0&&(u.left+=h,u.right+=h),l<0&&(u.top+=l,u.bottom+=l)}u.left+=n.left-e.width*a.left,u.top+=n.top-e.height*a.top,u.right+=n.right-e.width*(1-a.right),u.bottom+=n.bottom-e.height*(1-a.bottom)}r.offset=u},set:function(t){var e=t.coords,n=t.interaction,r=t.state,i=r.options,o=r.offset,s=uo(i.restriction,n,e);if(s){var a=so.default.xywhToTlbr(s);e.x=Math.max(Math.min(a.right-o.right,e.x),a.left+o.left),e.y=Math.max(Math.min(a.bottom-o.bottom,e.y),a.top+o.top)}},getRestrictionRect:uo,defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};ro.default=co;var ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.default=void 0;var lo=po(Ot),fo=po(Nt);function po(t){return t&&t.__esModule?t:{default:t}}var mo=po(ro).default.getRestrictionRect,vo={top:1/0,left:1/0,bottom:-1/0,right:-1/0},go={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function yo(t,e){for(var n=["top","left","bottom","right"],r=0;r<n.length;r++){var i=n[r];i in t||(t[i]=e[i])}return t}var bo={noInner:vo,noOuter:go,getRestrictionRect:mo,start:function(t){var e,n=t.interaction,r=t.state,i=r.options,o=n.modifiers.startOffset;if(i){var s=mo(i.offset,n,n.coords.start.page);e=fo.default.rectToXY(s)}e=e||{x:0,y:0},r.offset={top:e.y+o.top,left:e.x+o.left,bottom:e.y-o.bottom,right:e.x-o.right}},set:function(t){var e=t.coords,n=t.interaction,r=t.state,i=r.offset,o=r.options,s=n.prepared._linkedEdges||n.prepared.edges;if(s){var a=(0,lo.default)({},e),u=mo(o.inner,n,a)||{},c=mo(o.outer,n,a)||{};yo(u,vo),yo(c,go),s.top?e.y=Math.min(Math.max(c.top+i.top,a.y),u.top+i.top):s.bottom&&(e.y=Math.max(Math.min(c.bottom+i.bottom,a.y),u.bottom+i.bottom)),s.left?e.x=Math.min(Math.max(c.left+i.left,a.x),u.left+i.left):s.right&&(e.x=Math.max(Math.min(c.right+i.right,a.x),u.right+i.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};ho.default=bo;var xo={};Object.defineProperty(xo,"__esModule",{value:!0}),xo.default=void 0;var wo=_o(Ot),Eo=_o(ro);function _o(t){return t&&t.__esModule?t:{default:t}}var So=(0,wo.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},Eo.default.defaults),To={start:Eo.default.start,set:Eo.default.set,defaults:So};xo.default=To;var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=void 0;var Mo=No(Ot),Co=No(Nt),Oo=No(ho);function No(t){return t&&t.__esModule?t:{default:t}}var ko={width:-1/0,height:-1/0},Ro={width:1/0,height:1/0},Po={start:function(t){return Oo.default.start(t)},set:function(t){var e=t.interaction,n=t.state,r=n.options,i=e.prepared._linkedEdges||e.prepared.edges;if(i){var o=Co.default.xywhToTlbr(e.resizeRects.inverted),s=Co.default.tlbrToXywh(Oo.default.getRestrictionRect(r.min,e,t.coords))||ko,a=Co.default.tlbrToXywh(Oo.default.getRestrictionRect(r.max,e,t.coords))||Ro;n.options={endOnly:r.endOnly,inner:(0,Mo.default)({},Oo.default.noInner),outer:(0,Mo.default)({},Oo.default.noOuter)},i.top?(n.options.inner.top=o.bottom-s.height,n.options.outer.top=o.bottom-a.height):i.bottom&&(n.options.inner.bottom=o.top+s.height,n.options.outer.bottom=o.top+a.height),i.left?(n.options.inner.left=o.right-s.width,n.options.outer.left=o.right-a.width):i.right&&(n.options.inner.right=o.left+s.width,n.options.outer.right=o.left+a.width),Oo.default.set(t),n.options=r}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Ao.default=Po;var Io={};Object.defineProperty(Io,"__esModule",{value:!0}),Io.default=void 0;var Do=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),Lo={start:function(t){var e,n=t.interaction,r=t.interactable,i=t.element,o=t.rect,s=t.state,a=t.startOffset,u=s.options,c=[],h=u.offsetWithOrigin?function(t){return Do.rect.rectToXY(Do.rect.resolveRectLike(t.state.options.origin,[t.interaction.element]))||Do.getOriginXY(t.interactable,t.interaction.element,t.interaction.prepared.name)}(t):{x:0,y:0};if("startCoords"===u.offset)e={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var l=Do.rect.resolveRectLike(u.offset,r,i,[n]);(e=Do.rect.rectToXY(l)||{x:0,y:0}).x+=h.x,e.y+=h.y}var f=u.relativePoints||[];if(o&&u.relativePoints&&u.relativePoints.length)for(var d=0;d<f.length;d++){var p=f[d];c.push({index:d,relativePoint:p,x:a.left-o.width*p.x+e.x,y:a.top-o.height*p.y+e.y})}else c.push(Do.extend({index:0,relativePoint:null},e));s.offsets=c},set:function(t){var e,n=t.interaction,r=t.coords,i=t.state,o=i.options,s=i.offsets,a=Do.getOriginXY(n.interactable,n.element,n.prepared.name),u=Do.extend({},r),c=[];o.offsetWithOrigin||(u.x-=a.x,u.y-=a.y),i.realX=u.x,i.realY=u.y;for(var h=0;h<s.length;h++)for(var l=s[h],f=u.x-l.x,d=u.y-l.y,p=0,m=o.targets.length;p<m;p++){var v=o.targets[p];(e=Do.is.func(v)?v(f,d,n,l,p):v)&&c.push({x:(Do.is.number(e.x)?e.x:f)+l.x,y:(Do.is.number(e.y)?e.y:d)+l.y,range:Do.is.number(e.range)?e.range:o.range})}for(var g={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0},y=0,b=c.length;y<b;y++){var x=(e=c[y]).range,w=e.x-u.x,E=e.y-u.y,_=Do.hypot(w,E),S=_<=x;x===1/0&&g.inRange&&g.range!==1/0&&(S=!1),g.target&&!(S?g.inRange&&x!==1/0?_/x<g.distance/g.range:x===1/0&&g.range!==1/0||_<g.distance:!g.inRange&&_<g.distance)||(g.target=e,g.distance=_,g.range=x,g.inRange=S,g.dx=w,g.dy=E,i.range=x)}g.inRange&&(r.x=g.target.x,r.y=g.target.y),i.closest=g},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Io.default=Lo;var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.default=void 0;var Fo=Uo(Ot),zo=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(b),jo=Uo(Io);function Uo(t){return t&&t.__esModule?t:{default:t}}function Yo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wo={start:function(t){var e=t.interaction,n=t.state,r=n.options,i=e.prepared.edges;if(!i)return null;t.state={options:{targets:null,relativePoints:[{x:i.left?0:1,y:i.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},n.targetFields=n.targetFields||[["width","height"],["x","y"]],jo.default.start(t),n.offsets=t.state.offsets,t.state=n},set:function(t){var e=t.interaction,n=t.state,r=t.coords,i=n.options,o=n.offsets,s={x:r.x-o[0].x,y:r.y-o[0].y};n.options=(0,Fo.default)({},i),n.options.targets=[];for(var a=0;a<(i.targets||[]).length;a++){var u=(i.targets||[])[a],c=void 0;if(c=zo.func(u)?u(s.x,s.y,e):u){for(var h=0;h<n.targetFields.length;h++){var l=n.targetFields[h],f=Yo(l,2),d=f[0],p=f[1];if(d in c||p in c){c.x=c[d],c.y=c[p];break}}n.options.targets.push(c)}}jo.default.set(t),n.options=i},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};Bo.default=Wo;var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.default=void 0;var Go=Ho(X),Vo=Ho(Ot),qo=Ho(Bo);function Ho(t){return t&&t.__esModule?t:{default:t}}var Ko={start:function(t){var e=t.interaction.prepared.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],qo.default.start(t)):null},set:function(t){return qo.default.set(t)},defaults:(0,Vo.default)((0,Go.default)(qo.default.defaults),{offset:{x:0,y:0}})};Xo.default=Ko;var $o={};Object.defineProperty($o,"__esModule",{value:!0}),$o.restrictSize=$o.restrictEdges=$o.restrictRect=$o.restrict=$o.snapEdges=$o.snapSize=$o.snap=void 0;var Jo=os(Oi),Zo=os(ho),Qo=os(ro),ts=os(xo),es=os(Ao),ns=os(Xo),rs=os(Io),is=os(Bo);function os(t){return t&&t.__esModule?t:{default:t}}var ss=Jo.default.makeModifier,as=ss(rs.default,"snap");$o.snap=as;var us=ss(is.default,"snapSize");$o.snapSize=us;var cs=ss(ns.default,"snapEdges");$o.snapEdges=cs;var hs=ss(Qo.default,"restrict");$o.restrict=hs;var ls=ss(ts.default,"restrictRect");$o.restrictRect=ls;var fs=ss(Zo.default,"restrictEdges");$o.restrictEdges=fs;var ds=ss(es.default,"restrictSize");$o.restrictSize=ds;var ps={};Object.defineProperty(ps,"__esModule",{value:!0}),ps.default=void 0;var ms=gs(tn),vs=gs(Z);function gs(t){return t&&t.__esModule?t:{default:t}}function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ws(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Es(t,e){return(Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _s=function(t){function e(t,n,r,i,o,s){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?ws(t):e}(this,xs(e).call(this,o)),vs.default.pointerExtend(ws(a),r),r!==n&&vs.default.pointerExtend(ws(a),n),a.timeStamp=s,a.originalEvent=r,a.type=t,a.pointerId=vs.default.getPointerId(n),a.pointerType=vs.default.getPointerType(n),a.target=i,a.currentTarget=null,"tap"===t){var u=o.getPointerIndex(n);a.dt=a.timeStamp-o.pointers[u].downTime;var c=a.timeStamp-o.tapTime;a.double=!!(o.prevTap&&"doubletap"!==o.prevTap.type&&o.prevTap.target===a.target&&c<500)}else"doubletap"===t&&(a.dt=n.timeStamp-o.tapTime);return a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(e,t),n=e,(r=[{key:"_subtractOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this}},{key:"_addOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&bs(n.prototype,r),i&&bs(n,i),e;var n,r,i}(ms.default);ps.default=_s;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.default=void 0;var Ts=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),As=function(t){return t&&t.__esModule?t:{default:t}}(ps),Ms=new Ts.Signals,Cs=["down","up","cancel"],Os=["down","up","cancel"],Ns={id:"pointer-events/base",install:function(t){var e=t.interactions;t.pointerEvents=Ns,t.defaults.actions.pointerEvents=Ns.defaults,e.signals.on("new",function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0}),e.signals.on("update-pointer",function(t){var e=t.down,n=t.pointerInfo;!e&&n.hold||(n.hold={duration:1/0,timeout:null})}),e.signals.on("move",function(e){var n=e.interaction,r=e.pointer,i=e.event,o=e.eventTarget,s=e.duplicateMove,a=n.getPointerIndex(r);s||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&clearTimeout(n.pointers[a].hold.timeout),ks({interaction:n,pointer:r,event:i,eventTarget:o,type:"move"},t))}),e.signals.on("down",function(e){for(var n=e.interaction,r=e.pointer,i=e.event,o=e.eventTarget,s=e.pointerIndex,a=n.pointers[s].hold,u=Ts.dom.getPath(o),c={interaction:n,pointer:r,event:i,eventTarget:o,type:"hold",targets:[],path:u,node:null},h=0;h<u.length;h++){var l=u[h];c.node=l,Ms.fire("collect-targets",c)}if(c.targets.length){for(var f=1/0,d=0;d<c.targets.length;d++){var p=c.targets[d],m=p.eventable.options.holdDuration;m<f&&(f=m)}a.duration=f,a.timeout=setTimeout(function(){ks({interaction:n,eventTarget:o,pointer:r,event:i,type:"hold"},t)},f)}});for(var n=["up","cancel"],r=0;r<n.length;r++){var i=n[r];e.signals.on(i,function(t){var e=t.interaction,n=t.pointerIndex;e.pointers[n].hold&&clearTimeout(e.pointers[n].hold.timeout)})}for(var o=0;o<Cs.length;o++)e.signals.on(Cs[o],Ps(Os[o],t));e.signals.on("up",function(e){var n=e.interaction,r=e.pointer,i=e.event,o=e.eventTarget;n.pointerWasMoved||ks({interaction:n,eventTarget:o,pointer:r,event:i,type:"tap"},t)})},signals:Ms,PointerEvent:As.default,fire:ks,collectEventTargets:Rs,createSignalListener:Ps,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};function ks(t,e){for(var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget,s=t.type,a=void 0===s?t.pointerEvent.type:s,u=t.targets,c=void 0===u?Rs(t):u,h=t.pointerEvent,l=void 0===h?new As.default(a,r,i,o,n,e.now()):h,f={interaction:n,pointer:r,event:i,eventTarget:o,targets:c,type:a,pointerEvent:l},d=0;d<c.length;d++){var p=c[d];for(var m in p.props||{})l[m]=p.props[m];var v=Ts.getOriginXY(p.eventable,p.node);if(l._subtractOrigin(v),l.eventable=p.eventable,l.currentTarget=p.node,p.eventable.fire(l),l._addOrigin(v),l.immediatePropagationStopped||l.propagationStopped&&d+1<c.length&&c[d+1].node!==l.currentTarget)break}if(Ms.fire("fired",f),"tap"===a){var g=l.double?ks({interaction:n,pointer:r,event:i,eventTarget:o,type:"doubletap"},e):l;n.prevTap=g,n.tapTime=g.timeStamp}return l}function Rs(t){var e=t.interaction,n=t.pointer,r=t.event,i=t.eventTarget,o=t.type,s=e.getPointerIndex(n),a=e.pointers[s];if("tap"===o&&(e.pointerWasMoved||!a||a.downTarget!==i))return[];for(var u=Ts.dom.getPath(i),c={interaction:e,pointer:n,event:r,eventTarget:i,type:o,path:u,targets:[],node:null},h=0;h<u.length;h++){var l=u[h];c.node=l,Ms.fire("collect-targets",c)}return"hold"===o&&(c.targets=c.targets.filter(function(t){return t.eventable.options.holdDuration===e.pointers[s].hold.duration})),c.targets}function Ps(t,e){return function(n){var r=n.interaction,i=n.pointer,o=n.event,s=n.eventTarget;ks({interaction:r,eventTarget:s,pointer:i,event:o,type:t},e)}}var Is=Ns;Ss.default=Is;var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.default=void 0;var Ls=function(t){return t&&t.__esModule?t:{default:t}}(Ss);function Bs(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)}function Fs(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}var zs={id:"pointer-events/holdRepeat",install:function(t){var e=t.pointerEvents,n=t.interactions;t.usePlugin(Ls.default),e.signals.on("new",Bs),e.signals.on("fired",function(e){return function(t,e){var n=t.interaction,r=t.pointerEvent,i=t.eventTarget,o=t.targets;if("hold"===r.type&&o.length){var s=o[0].eventable.options.holdRepeatInterval;s<=0||(n.holdIntervalHandle=setTimeout(function(){e.pointerEvents.fire({interaction:n,eventTarget:i,type:"hold",pointer:r,event:r},e)},s))}}(e,t)});for(var r=["move","up","cancel","endall"],i=0;i<r.length;i++){var o=r[i];n.signals.on(o,Fs)}e.defaults.holdRepeatInterval=0,e.types.push("holdrepeat")}};Ds.default=zs;var js={};Object.defineProperty(js,"__esModule",{value:!0}),js.default=void 0;var Us=function(t){return t&&t.__esModule?t:{default:t}}(Ot);function Ys(t){return(0,Us.default)(this.events.options,t),this}var Ws={id:"pointer-events/interactableTargets",install:function(t){var e=t.pointerEvents,n=t.actions,r=t.Interactable,o=t.interactables;e.signals.on("collect-targets",function(e){var n=e.targets,r=e.node,i=e.type,o=e.eventTarget;t.interactables.forEachMatch(r,function(t){var e=t.events,s=e.options;e.types[i]&&e.types[i].length&&t.testIgnoreAllow(s,r,o)&&n.push({node:r,eventable:e,props:{interactable:t}})})}),o.signals.on("new",function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}}),o.signals.on("set",function(t){var n=t.interactable,r=t.options;(0,Us.default)(n.events.options,e.defaults),(0,Us.default)(n.events.options,r.pointerEvents||{})}),(0,i.merge)(n.eventTypes,e.types),r.prototype.pointerEvents=Ys;var s=r.prototype._backCompatOption;r.prototype._backCompatOption=function(t,e){var n=s.call(this,t,e);return n===this&&(this.events.options[t]=e),n}}};js.default=Ws;var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.install=function(t){t.usePlugin(Gs.default),t.usePlugin(Vs.default),t.usePlugin(qs.default)},Object.defineProperty(Xs,"pointerEvents",{enumerable:!0,get:function(){return Gs.default}}),Object.defineProperty(Xs,"holdRepeat",{enumerable:!0,get:function(){return Vs.default}}),Object.defineProperty(Xs,"interactableTargets",{enumerable:!0,get:function(){return qs.default}}),Xs.id=void 0;var Gs=Hs(Ss),Vs=Hs(Ds),qs=Hs(js);function Hs(t){return t&&t.__esModule?t:{default:t}}Xs.id="pointer-events";var Ks={};function $s(t){for(var e=t.actions,n=t.interactions,r=t.Interactable,i=0;i<e.names.length;i++){var o=e.names[i];e.eventTypes.push("".concat(o,"reflow"))}n.signals.on("stop",function(e){var n=e.interaction;n.pointerType===on.EventPhase.Reflow&&(n._reflowResolve&&n._reflowResolve(),Qt.arr.remove(t.interactions.list,n))}),r.prototype.reflow=function(e){return function(t,e,n){for(var r=Qt.is.string(t.target)?Qt.arr.from(t._context.querySelectorAll(t.target)):[t.target],i=Qt.win.window.Promise,o=i?[]:null,s=function(){var s=r[a],u=t.getRect(s);if(!u)return"break";var c=Qt.arr.find(n.interactions.list,function(n){return n.interacting()&&n.interactable===t&&n.element===s&&n.prepared.name===e.name}),h=void 0;if(c)c.move(),o&&(h=c._reflowPromise||new i(function(t){c._reflowResolve=t}));else{var l=Qt.rect.tlbrToXywh(u),f={page:{x:l.x,y:l.y},client:{x:l.x,y:l.y},timeStamp:n.now()},d=Qt.pointer.coordsToEvent(f);h=function(t,e,n,r,i){var o=t.interactions.new({pointerType:"reflow"}),s={interaction:o,event:i,pointer:i,eventTarget:n,phase:on.EventPhase.Reflow};o.interactable=e,o.element=n,o.prepared=(0,Qt.extend)({},r),o.prevEvent=i,o.updatePointer(i,i,n,!0),o._doPhase(s);var a=Qt.win.window.Promise?new Qt.win.window.Promise(function(t){o._reflowResolve=t}):null;return o._reflowPromise=a,o.start(r,e,n),o._interacting?(o.move(s),o.end(i)):o.stop(),o.removePointer(i,i),o.pointerIsDown=!1,a}(n,t,s,e,d)}o&&o.push(h)},a=0;a<r.length;a++){var u=s();if("break"===u)break}return o&&i.all(o).then(function(){return t})}(this,e,t)}}Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.install=$s,Ks.default=void 0,on.EventPhase.Reflow="reflow";var Js={id:"reflow",install:$s};Ks.default=Js;var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.default=Zs.scope=Zs.interact=void 0;var Qs=e({}),ta=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(Qt),ea=ra(A),na=ra(ut);function ra(t){return t&&t.__esModule?t:{default:t}}var ia={},oa=new Qs.Scope;Zs.scope=oa;var sa=function(t,e){var n=oa.interactables.get(t,e);return n||((n=oa.interactables.new(t,e)).events.global=ia),n};Zs.interact=sa,sa.use=function(t,e){return oa.usePlugin(t,e),sa},sa.isSet=function(t,e){return!!oa.interactables.get(t,e&&e.context)},sa.on=function(t,e,n){if(ta.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),ta.is.array(t)){for(var r=0;r<t.length;r++){var i=t[r];sa.on(i,e,n)}return sa}if(ta.is.object(t)){for(var o in t)sa.on(o,t[o],e);return sa}return ta.arr.contains(oa.actions.eventTypes,t)?ia[t]?ia[t].push(e):ia[t]=[e]:na.default.add(oa.document,t,e,{options:n}),sa},sa.off=function(t,e,n){if(ta.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),ta.is.array(t)){for(var r=0;r<t.length;r++){var i=t[r];sa.off(i,e,n)}return sa}if(ta.is.object(t)){for(var o in t)sa.off(o,t[o],e);return sa}var s;return ta.arr.contains(oa.actions.eventTypes,t)?t in ia&&-1!==(s=ia[t].indexOf(e))&&ia[t].splice(s,1):na.default.remove(oa.document,t,e,n),sa},sa.debug=function(){return oa},sa.getPointerAverage=ta.pointer.pointerAverage,sa.getTouchBBox=ta.pointer.touchBBox,sa.getTouchDistance=ta.pointer.touchDistance,sa.getTouchAngle=ta.pointer.touchAngle,sa.getElementRect=ta.dom.getElementRect,sa.getElementClientRect=ta.dom.getElementClientRect,sa.matchesSelector=ta.dom.matchesSelector,sa.closest=ta.dom.closest,sa.supportsTouch=function(){return ea.default.supportsTouch},sa.supportsPointerEvent=function(){return ea.default.supportsPointerEvent},sa.stop=function(){for(var t=0;t<oa.interactions.list.length;t++){var e=oa.interactions.list[t];e.stop()}return sa},sa.pointerMoveTolerance=function(t){return ta.is.number(t)?(oa.interactions.pointerMoveTolerance=t,sa):oa.interactions.pointerMoveTolerance},oa.interactables.signals.on("unset",function(t){var e=t.interactable;oa.interactables.list.splice(oa.interactables.list.indexOf(e),1);for(var n=0;n<oa.interactions.list.length;n++){var r=oa.interactions.list[n];r.interactable===e&&r.interacting()&&!r._ending&&r.stop()}}),sa.addDocument=function(t,e){return oa.addDocument(t,e)},sa.removeDocument=function(t){return oa.removeDocument(t)},oa.interact=sa;var aa=sa;Zs.default=aa;var ua={};Object.defineProperty(ua,"__esModule",{value:!0}),ua.init=function(t){for(var e in ya.scope.init(t),ya.default.use(fa.default),ya.default.use(va),ya.default.use(da.default),ya.default.use(la),ya.default.use(ca),ya.default.use(ma.default),pa){var n=pa[e],r=n._defaults,i=n._methods;r._methods=i,ya.scope.defaults.perAction[e]=r}return ya.default.use(ha.default),ya.default.use(ga.default),ya.default},Object.defineProperty(ua,"autoScroll",{enumerable:!0,get:function(){return ha.default}}),Object.defineProperty(ua,"interactablePreventDefault",{enumerable:!0,get:function(){return fa.default}}),Object.defineProperty(ua,"inertia",{enumerable:!0,get:function(){return da.default}}),Object.defineProperty(ua,"modifiers",{enumerable:!0,get:function(){return ma.default}}),Object.defineProperty(ua,"reflow",{enumerable:!0,get:function(){return ga.default}}),Object.defineProperty(ua,"interact",{enumerable:!0,get:function(){return ya.default}}),ua.pointerEvents=ua.actions=ua.default=void 0;var ca=xa(Ar);ua.actions=ca;var ha=ba(Rr),la=xa(di),fa=ba(yi),da=(ba(Ai),ba(Vi)),pa=xa($o),ma=ba(Oi),va=xa(Xs);ua.pointerEvents=va;var ga=ba(Ks),ya=xa(Zs);function ba(t){return t&&t.__esModule?t:{default:t}}function xa(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}ya.default.version="1.5.4";var wa=ya.default;ua.default=wa;var Ea={};function _a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.default=void 0;var Sa=function(t){var e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(e){var n=_a(e,2),r=n[0],i=n[1];return r in t||i in t});return function(n,r){for(var i=t.range,o=t.limits,s=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,a=t.offset,u=void 0===a?{x:0,y:0}:a,c={range:i},h=0;h<e.length;h++){var l=e[h],f=_a(l,2),d=f[0],p=f[1],m=Math.round((n-u.x)/t[d]),v=Math.round((r-u.y)/t[p]);c[d]=Math.max(s.left,Math.min(s.right,m*t[d]+u.x)),c[p]=Math.max(s.top,Math.min(s.bottom,v*t[p]+u.y))}return c}};Ea.default=Sa;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0}),Object.defineProperty(Ta,"grid",{enumerable:!0,get:function(){return Aa.default}});var Aa=function(t){return t&&t.__esModule?t:{default:t}}(Ea),Ma={exports:{}};Object.defineProperty(Ma.exports,"__esModule",{value:!0}),Ma.exports.init=Ia,Ma.exports.default=void 0;var Ca=Ra(ua),Oa=Ra($o),Na=function(t){return t&&t.__esModule?t:{default:t}}(Ot),ka=Ra(Ta);function Ra(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function Pa(t){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ia(t){return(0,Ca.init)(t),Ca.default.use({id:"interactjs",install:function(){Ca.default.modifiers=(0,Na.default)({},Oa),Ca.default.snappers=ka,Ca.default.createSnapGrid=Ca.default.snappers.grid}})}"object"===("undefined"==typeof window?"undefined":Pa(window))&&window&&Ia(window);var Da=Ca.default;return Ma.exports.default=Da,Ca.default.default=Ca.default,Ca.default.init=Ia,"object"===Pa(Ma)&&Ma&&(Ma.exports=Ca.default),Ma=Ma.exports}()},function(t,e,n){t.exports=n.p+"3c3dd364fb328ae88c2c99d1df126b61.png"},function(t,e,n){t.exports=n.p+"716f151f3b4e56c0e1a1b49ff42fd46e.png"},function(t,e,n){t.exports=n.p+"10ca50c6a33da3b72fc13ca6e50b2cc1.png"},function(t,e,n){t.exports=n.p+"0260d2dd28712c1a30caa3f154f6293e.png"},function(t,e,n){t.exports=n.p+"540e5da610e444e875cf733bb82b297b.png"},function(t,e,n){t.exports=n.p+"8433d98f2c976a0ea8a1cc0de68d9b1b.png"},function(t,e,n){t.exports=n.p+"35caf6a66b97120cf480f3782f735c2d.png"},function(t,e,n){t.exports=n.p+"4b37c9846552050bf95c909e18d18a6a.png"},function(t,e,n){n(784),n(785),n(786),n(787),n(788),n(789),n(790),n(791)},function(t,e){Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)i in e&&t.call(r,e[i],i,e)})},function(t,e){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})},function(t,e){!function(){function t(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var n=e?this.internal_createDelay(e):this.internal_createDelay();return t(n.delayTime),n},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start?(e.internal_start=e.start,e.start=function(t,n,r){void 0!==r?e.internal_start(t||0,n,r):e.internal_start(t||0,n||0)}):e.start=function(t,e,n){e||n?this.noteGrainOn(t||0,e,n):this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},t(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return t(e.threshold),t(e.knee),t(e.ratio),t(e.reduction),t(e.attack),t(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return t(e.frequency),t(e.detune),t(e.Q),t(e.gain),e},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start?(e.internal_start=e.start,e.start=function(t){e.internal_start(t||0)}):e.start=function(t){this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},e.setPeriodicWave||(e.setPeriodicWave=e.setWaveTable),t(e.frequency),t(e.detune),e})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)}()},function(t,e){window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){})},function(t,e){Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)})},function(t,e){!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}()},function(t,e,n){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[r[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r[i]+"CancelAnimationFrame"]||t[r[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+n-e;return r<0&&(r=0),n=e,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,n(50))},function(t,e){if("function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var n=function(t){var e=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var e=0;e<this.length;e++)this[e]=0}else{Array.call(this,t.length),this.length=t.length;for(e=0;e<this.length;e++)this[e]=t[e]}},window[t].prototype=e,window[t].constructor=window[t]};n("Float32Array"),n("Uint32Array"),n("Uint16Array"),n("Int16Array"),n("ArrayBuffer")}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"angle",e,n,i,o)}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];e.call(n,i)}return t}},function(t,e){t.exports=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++){var i=t[r],o=!0;for(var s in e)i[s]!==e[s]&&(o=!1);if(o)return i}return null}},function(t,e){t.exports=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++){var i=t[r],o=!0;for(var s in e)i[s]!==e[s]&&(o=!1);if(o)return i}return null}},function(t,e,n){var r=n(404),i=n(271),o=n(1),s=n(2),a=new(n(206))({sys:{queueDepthSort:s,events:{once:s}}},0,0,1,1);t.exports=function(t,e){void 0===e&&(e={});var n=o(e,"width",-1),s=o(e,"height",-1),u=o(e,"cellWidth",1),c=o(e,"cellHeight",u),h=o(e,"position",i.TOP_LEFT),l=o(e,"x",0),f=o(e,"y",0),d=0,p=0,m=n*u,v=s*c;a.setPosition(l,f),a.setSize(u,c);for(var g=0;g<t.length;g++)if(r(t[g],a,h),-1===n)p+=c,a.y+=c,p===v&&(p=0,a.x+=u,a.y=f);else if(-1===s)d+=u,a.x+=u,d===m&&(d=0,a.x=l,a.y+=c);else if(d+=u,a.x+=u,d===m&&(d=0,p+=c,a.x=l,a.y+=c,p===v))break;return t}},function(t,e){t.exports="add"},function(t,e){t.exports="complete"},function(t,e){t.exports="repeat"},function(t,e){t.exports="restart"},function(t,e){t.exports="start"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat-"},function(t,e){t.exports="animationrestart-"},function(t,e){t.exports="animationstart-"},function(t,e){t.exports="animationupdate-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,n,r,this.flipX,this.flipY);else{var i=t;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,n){var r=n(22),i=n(426),o=n(8),s={prepareBoundsOutput:function(t,e){(void 0===e&&(e=!1),0!==this.rotation&&i(t,this.x,this.y,this.rotation),e&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function(t){return void 0===t&&(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,n,i,o,s,a,u,c;if(void 0===t&&(t=new r),this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),h.transformPoint(t.x,t.y,t),e=t.x,n=t.y,this.getTopRight(t),h.transformPoint(t.x,t.y,t),i=t.x,o=t.y,this.getBottomLeft(t),h.transformPoint(t.x,t.y,t),s=t.x,a=t.y,this.getBottomRight(t),h.transformPoint(t.x,t.y,t),u=t.x,c=t.y}else this.getTopLeft(t),e=t.x,n=t.y,this.getTopRight(t),i=t.x,o=t.y,this.getBottomLeft(t),s=t.x,a=t.y,this.getBottomRight(t),u=t.x,c=t.y;return t.x=Math.min(e,i,s,u),t.y=Math.min(n,o,a,c),t.width=Math.max(e,i,s,u)-t.x,t.height=Math.max(n,o,a,c)-t.y,t}};t.exports=s},function(t,e){var n={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=Math.round(this.originX*this.width),this._displayOriginY=Math.round(this.originY*this.height),this}};t.exports=n},function(t,e,n){var r=n(80),i=n(173),o=n(14),s=n(174),a=n(8),u={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathTween:null,pathConfig:null,_prevDirection:s.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),"number"==typeof t&&(t={duration:t}),t.from=o(t,"from",0),t.to=o(t,"to",1);var u=i(t,"positionOnPath",!1);this.rotateToPath=i(t,"rotateToPath",!1),this.pathRotationOffset=o(t,"rotationOffset",0);var c=o(t,"startAt",e);if(c&&(t.onStart=function(t){var e=t.data[0];e.progress=c,e.elapsed=e.duration*c;var n=e.ease(e.progress);e.current=e.start+(e.end-e.start)*n,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),u&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=s.PLAYING_FORWARD,this.rotateToPath){var h=this.path.getPoint(.1);this.rotation=Math.atan2(h.y-this.y,h.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0];if(e.state!==s.PLAYING_FORWARD&&e.state!==s.PLAYING_BACKWARD)return;var n=this.pathVector;this.path.getPoint(t.getValue(),n),n.add(this.pathOffset);var i=this.x,o=this.y;this.setPosition(n.x,n.y);var a=this.x-i,u=this.y-o;if(0===a&&0===u)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(u,a)+r(this.pathRotationOffset))}}};t.exports=u},function(t,e){var n={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.frame.realWidth},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return this.scaleY*this.frame.realHeight},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=n},function(t,e){var n={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},function(t,e){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,n,r,this.flipX,this.flipY);else{var i=t;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,e){var n=function(t){return(t>>16)+(65280&t)+((255&t)<<16)},r={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function(){return this.setTint(16777215),this._isTinted=!1,this},setTint:function(t,e,r,i){return void 0===t&&(t=16777215),void 0===e&&(e=t,r=t,i=t),this._tintTL=n(t),this._tintTR=n(e),this._tintBL=n(r),this._tintBR=n(i),this._isTinted=!0,this.tintFill=!1,this},setTintFill:function(t,e,n,r){return this.setTint(t,e,n,r),this.tintFill=!0,this},tintTopLeft:{get:function(){return this._tintTL},set:function(t){this._tintTL=n(t),this._isTinted=!0}},tintTopRight:{get:function(){return this._tintTR},set:function(t){this._tintTR=n(t),this._isTinted=!0}},tintBottomLeft:{get:function(){return this._tintBL},set:function(t){this._tintBL=n(t),this._isTinted=!0}},tintBottomRight:{get:function(){return this._tintBR},set:function(t){this._tintBR=n(t),this._isTinted=!0}},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){return this._isTinted}}};t.exports=r},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e){t.exports="destroy"},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"alpha",e,n,i,o)}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"x",e,n,i,o)}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o,s,a){return null==n&&(n=e),r(t,"x",e,i,s,a),r(t,"y",n,o,s,a)}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"y",e,n,i,o)}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=6.28);for(var i=n,o=(r-n)/t.length,s=0;s<t.length;s++)t[s].x=e.x+e.radius*Math.cos(i),t[s].y=e.y+e.radius*Math.sin(i),i+=o;return t}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=6.28);for(var i=n,o=(r-n)/t.length,s=e.width/2,a=e.height/2,u=0;u<t.length;u++)t[u].x=e.x+s*Math.cos(i),t[u].y=e.y+a*Math.sin(i),i+=o;return t}},function(t,e,n){var r=n(276);t.exports=function(t,e){for(var n=r(e,t.length),i=0;i<t.length;i++){var o=t[i],s=n[i];o.x=s.x,o.y=s.y}return t}},function(t,e,n){var r=n(435),i=n(436),o=n(437);t.exports=function(t,e,n){void 0===n&&(n=0);var s=r(e,!1,t.length);n>0?i(s,n):n<0&&o(s,Math.abs(n));for(var a=0;a<t.length;a++)t[a].x=s[a].x,t[a].y=s[a].y;return t}},function(t,e,n){var r=n(438);t.exports=function(t,e,n){var i=r({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},n),o=r({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},n),s=r({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},n);i.pop(),o.pop(),s.pop();for(var a=(i=i.concat(o,s)).length/t.length,u=0,c=0;c<t.length;c++){var h=t[c],l=i[Math.floor(u)];h.x=l.x,h.y=l.y,u+=a}return t}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.length;r++)t[r].anims.play(e,n);return t}},function(t,e,n){var r=n(273);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(281);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(277);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(278);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(282);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"rotation",e,n,i,o)}},function(t,e,n){var r=n(283),i=n(112);t.exports=function(t,e,n){for(var o=e.x,s=e.y,a=0;a<t.length;a++){var u=t[a];r(u,o,s,n,Math.max(1,i(u.x,u.y,o,s)))}return t}},function(t,e,n){var r=n(283);t.exports=function(t,e,n,i){var o=e.x,s=e.y;if(0===i)return t;for(var a=0;a<t.length;a++)r(t[a],o,s,n,i);return t}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"scaleX",e,n,i,o)}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o,s,a){return null==n&&(n=e),r(t,"scaleX",e,i,s,a),r(t,"scaleY",n,o,s,a)}},function(t,e,n){var r=n(79);t.exports=function(t,e,n,i,o){return r(t,"scaleY",e,n,i,o)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"alpha",e,n,i,o)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i){return r(t,"blendMode",e,0,n,i)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"depth",e,n,i,o)}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.length;r++)t[r].setInteractive(e,n);return t}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o,s,a){return null==n&&(n=e),r(t,"originX",e,i,s,a),r(t,"originY",n,o,s,a)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"rotation",e,n,i,o)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o,s,a){return null==n&&(n=e),r(t,"scaleX",e,i,s,a),r(t,"scaleY",n,o,s,a)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"scaleX",e,n,i,o)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"scaleY",e,n,i,o)}},function(t,e){t.exports=function(t,e,n,r,i){for(var o=0;o<t.length;o++)t[o].setTint(e,n,r,i);return t}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i){return r(t,"visible",e,0,n,i)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"x",e,n,i,o)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o,s,a){return null==n&&(n=e),r(t,"x",e,i,s,a),r(t,"y",n,o,s,a)}},function(t,e,n){var r=n(59);t.exports=function(t,e,n,i,o){return r(t,"y",e,n,i,o)}},function(t,e,n){var r=n(8);t.exports=function(t,e,n,i,o){var s,a,u,c,h,l;if(void 0===i&&(i=0),void 0===o&&(o=new r),t.length>1)if(0===i){var f=t.length-1;for(s=t[f].x,a=t[f].y,u=f-1;u>=0;u--)c=(l=t[u]).x,h=l.y,l.x=s,l.y=a,s=c,a=h;t[f].x=e,t[f].y=n}else{for(s=t[0].x,a=t[0].y,u=1;u<t.length;u++)c=(l=t[u]).x,h=l.y,l.x=s,l.y=a,s=c,a=h;t[0].x=e,t[0].y=n}else s=t[0].x,a=t[0].y,t[0].x=e,t[0].y=n;return o.x=s,o.y=a,o}},function(t,e,n){var r=n(211);t.exports=function(t){return r(t)}},function(t,e,n){var r=n(284);t.exports=function(t,e,n,i,o){void 0===o&&(o=!1);var s,a=Math.abs(i-n)/t.length;if(o)for(s=0;s<t.length;s++)t[s][e]+=r(s*a,n,i);else for(s=0;s<t.length;s++)t[s][e]=r(s*a,n,i);return t}},function(t,e,n){var r=n(285);t.exports=function(t,e,n,i,o){void 0===o&&(o=!1);var s,a=Math.abs(i-n)/t.length;if(o)for(s=0;s<t.length;s++)t[s][e]+=r(s*a,n,i);else for(s=0;s<t.length;s++)t[s][e]=r(s*a,n,i);return t}},function(t,e){t.exports=function(t,e,n,r,i){void 0===i&&(i=!1);var o,s=Math.abs(r-n)/t.length;if(i)for(o=0;o<t.length;o++)t[o][e]+=o*s+n;else for(o=0;o<t.length;o++)t[o][e]=o*s+n;return t}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},function(t,e,n){var r=n(111);t.exports=function(t,e,n){void 0===n&&(n=0);for(var i=0;i<t.length;i++){var o=t[i];o.x=r(o.x,e.left-n,e.right+n),o.y=r(o.y,e.top-n,e.bottom+n)}return t}},function(t,e,n){t.exports={Animation:n(274),AnimationFrame:n(421),AnimationManager:n(439),Events:n(207)}},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e,n){t.exports={BaseCache:n(440),CacheManager:n(442),Events:n(441)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,n){t.exports={Controls:n(891),Scene2D:n(894)}},function(t,e,n){t.exports={FixedKeyControl:n(892),SmoothedKeyControl:n(893)}},function(t,e,n){var r=n(0),i=n(14),o=new r({initialize:function(t){this.camera=i(t,"camera",null),this.left=i(t,"left",null),this.right=i(t,"right",null),this.up=i(t,"up",null),this.down=i(t,"down",null),this.zoomIn=i(t,"zoomIn",null),this.zoomOut=i(t,"zoomOut",null),this.zoomSpeed=i(t,"zoomSpeed",.01),this.speedX=0,this.speedY=0;var e=i(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=i(t,"speed.x",0),this.speedY=i(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<.1&&(e.zoom=.1)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed)}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=o},function(t,e,n){var r=n(0),i=n(14),o=new r({initialize:function(t){this.camera=i(t,"camera",null),this.left=i(t,"left",null),this.right=i(t,"right",null),this.up=i(t,"up",null),this.down=i(t,"down",null),this.zoomIn=i(t,"zoomIn",null),this.zoomOut=i(t,"zoomOut",null),this.zoomSpeed=i(t,"zoomSpeed",.01),this.accelX=0,this.accelY=0;var e=i(t,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=i(t,"acceleration.x",0),this.accelY=i(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=i(t,"drag",null);"number"==typeof n?(this.dragX=n,this.dragY=n):(this.dragX=i(t,"drag.x",0),this.dragY=i(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=i(t,"maxSpeed",null);"number"==typeof r?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=i(t,"maxSpeed.x",0),this.maxSpeedY=i(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<.1&&(e.zoom=.1))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=o},function(t,e,n){t.exports={Camera:n(443),CameraManager:n(947),Effects:n(451),Events:n(97)}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,n){var r=n(40),i=n(0),o=n(97),s=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,s,a,u){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene),!s&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=n,this.green=r,this.blue=i,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=u;var c=t?o.FADE_OUT_START:o.FADE_IN_START;return this.camera.emit(c,this.camera,this,e,n,r,i),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e._cx,e._cy,e._cw,e._ch),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,r=this.red/255,i=this.blue/255,o=this.green/255;return t.drawFillRect(n._cx,n._cy,n._cw,n._ch,e(r,o,i,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?o.FADE_OUT_COMPLETE:o.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=s},function(t,e,n){var r=n(40),i=n(0),o=n(97),s=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,s,a){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===n&&(n=255),void 0===r&&(r=255),void 0===i&&(i=!1),void 0===s&&(s=null),void 0===a&&(a=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=n,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=s,this._onUpdateScope=a,this.camera.emit(o.FLASH_START,this.camera,this,t,e,n,r),this.camera)},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e._cx,e._cy,e._cw,e._ch),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var n=this.camera,r=this.red/255,i=this.blue/255,o=this.green/255;return t.drawFillRect(n._cx,n._cy,n._cw,n._ch,e(r,o,i,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=s},function(t,e,n){var r=n(40),i=n(0),o=n(292),s=n(97),a=n(8),u=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,a,u){void 0===n&&(n=1e3),void 0===r&&(r=o.Linear),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene);var c=this.camera;return!i&&this.isRunning?c:(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(c.scrollX,c.scrollY),this.destination.set(t,e),c.getScroll(t,e,this.current),"string"==typeof r&&o.hasOwnProperty(r)?this.ease=o[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=u,this.camera.emit(s.PAN_START,this.camera,this,n,t,e),c)},update:function(t,e){if(this.isRunning){this._elapsed+=e;var n=r(this._elapsed/this.duration,0,1);this.progress=n;var i=this.camera;if(this._elapsed<this.duration){var o=this.ease(n);i.getScroll(this.destination.x,this.destination.y,this.current);var s=this.source.x+(this.current.x-this.source.x)*o,a=this.source.y+(this.current.y-this.source.y)*o;i.setScroll(s,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,n,s,a)}else i.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,n,i.scrollX,i.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=u},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var n=1.525*e;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,n){if(void 0===e&&(e=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return e<1?e=1:r=n*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)}},function(t,e){t.exports=function(t,e,n){if(void 0===e&&(e=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return e<1?e=1:r=n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/n)+1}},function(t,e){t.exports=function(t,e,n){if(void 0===e&&(e=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return e<1?e=1:r=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},function(t,e,n){var r=n(40),i=n(0),o=n(97),s=n(8),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new s,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===i&&(i=this.camera.scene),!n&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=i,this.camera.emit(o.SHAKE_START,this.camera,this,t,e),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){if(this.isRunning)if(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var n=this.intensity,i=this.camera._cw,o=this.camera._ch,s=this.camera.zoom;this._offsetX=(Math.random()*n.x*i*2-n.x*i)*s,this._offsetY=(Math.random()*n.y*o*2-n.y*o)*s,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=a},function(t,e,n){var r=n(40),i=n(0),o=n(292),s=n(97),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,a){void 0===e&&(e=1e3),void 0===n&&(n=o.Linear),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===a&&(a=this.camera.scene);var u=this.camera;return!r&&this.isRunning?u:(this.isRunning=!0,this.duration=e,this.progress=0,this.source=u.zoom,this.destination=t,"string"==typeof n&&o.hasOwnProperty(n)?this.ease=o[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=i,this._onUpdateScope=a,this.camera.emit(s.ZOOM_START,this.camera,this,e,t),u)},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,n){var r=n(443),i=n(0),o=n(1),s=n(29),a=n(96),u=n(176),c=n(34),h=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(u.RESIZE,this.onResize,this),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(c.UPDATE,this.update,this),e.once(c.SHUTDOWN,this.shutdown,this)},add:function(t,e,n,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),void 0===o&&(o=!1),void 0===s&&(s="");var a=new r(t,e,n,i);return a.setName(s),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),o&&(this.main=a),a},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,n=0;n<32;n++){for(var r=!1,i=0;i<t.length;i++){var o=t[i];o&&o.id===e&&(r=!0)}if(!r)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,n=this.cameras,r=0;r<n.length;r++){var i=n[r];(!t||t&&i.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,n=this.scene.sys.scale.height,r=0;r<t.length;r++){var i=t[r],s=o(i,"x",0),a=o(i,"y",0),u=o(i,"width",e),c=o(i,"height",n),h=this.add(s,a,u,c);h.name=o(i,"name",""),h.zoom=o(i,"zoom",1),h.rotation=o(i,"rotation",0),h.scrollX=o(i,"scrollX",0),h.scrollY=o(i,"scrollY",0),h.roundPixels=o(i,"roundPixels",!1),h.visible=o(i,"visible",!0);var l=o(i,"backgroundColor",!1);l&&h.setBackgroundColor(l);var f=o(i,"bounds",null);if(f){var d=o(f,"x",0),p=o(f,"y",0),m=o(f,"width",e),v=o(f,"height",n);h.setBounds(d,p,m,v)}}return this},getCamera:function(t){for(var e=this.cameras,n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,n=t.x,r=t.y,i=[],o=0;o<e.length;o++){var s=e[o];s.visible&&s.inputEnabled&&a(s,n,r)&&i.unshift(s)}return i},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var n=0,r=this.cameras,i=0;i<t.length;i++){var o=r.indexOf(t[i]);-1!==o&&(e&&r[o].destroy(),r.splice(o,1),n++)}return!this.main&&r[0]&&(this.main=r[0]),n},render:function(t,e,n){for(var r=this.scene,i=this.cameras,o=0;o<this.cameras.length;o++){var s=i[o];s.visible&&s.alpha>0&&(s.preRender(1),t.render(r,e,n,s))}},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var n=0;n<this.cameras.length;n++)this.cameras[n].update(t,e)},onResize:function(t,e,n,r,i,o){for(var s=0;s<this.cameras.length;s++){var a=this.cameras[s];0===a._x&&0===a._y&&a._width===i&&a._height===o&&a.setSize(e.width,e.height)}},resize:function(t,e){for(var n=0;n<this.cameras.length;n++)this.cameras[n].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(c.UPDATE,this.update,this),e.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});s.register("CameraManager",h,"cameras"),t.exports=h},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,n){t.exports={Config:n(464),CreateRenderer:n(488),DebugHeader:n(498),Events:n(60),TimeStep:n(499),VisibilityHandler:n(501)}},function(t,e,n){var r=n(216),i={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(i.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(i.mspointer=!0),navigator.getGamepads&&(i.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?i.wheelEvent="wheel":"onmousewheel"in window?i.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(i.wheelEvent="DOMMouseScroll"),i)},function(t,e,n){var r=n(216),i={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){i.audioData=!!window.Audio,i.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(i.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(i.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(i.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(i.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(i.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(i.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)i.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),o=parseInt(RegExp.$2,10);(10===n&&o>=11||n>10)&&(i.dolby=!0)}}catch(t){}return i}()},function(t,e){var n={h264Video:!1,hlsVideo:!1,mp4Video:!1,oggVideo:!1,vp9Video:!1,webmVideo:!1};t.exports=function(){var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(n.oggVideo=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.h264Video=!0,n.mp4Video=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(n.webmVideo=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(n.vp9Video=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.hlsVideo=!0))}catch(t){}return n}()},function(t,e){var n={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){var t,e="Fullscreen",r="FullScreen",i=["request"+e,"request"+r,"webkitRequest"+e,"webkitRequest"+r,"msRequest"+e,"msRequest"+r,"mozRequest"+r,"mozRequest"+e];for(t=0;t<i.length;t++)if(document.documentElement[i[t]]){n.available=!0,n.request=i[t];break}var o=["cancel"+r,"exit"+e,"webkitCancel"+r,"webkitExit"+e,"msCancel"+r,"msExit"+e,"mozCancel"+r,"mozExit"+e];if(n.available)for(t=0;t<o.length;t++)if(document[o[t]]){n.cancel=o[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(n.keyboard=!0),Object.defineProperty(n,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),n}()},function(t,e,n){t.exports={Between:n(467),BetweenPoints:n(979),BetweenPointsY:n(980),BetweenY:n(981),CounterClockwise:n(982),Normalize:n(468),Reverse:n(983),RotateTo:n(984),ShortestBetween:n(985),Wrap:n(279),WrapDegrees:n(280)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,n,r){return Math.atan2(n-t,r-e)}},function(t,e,n){var r=n(41);t.exports=function(t){return Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)}},function(t,e,n){var r=n(468);t.exports=function(t){return r(t+Math.PI)}},function(t,e,n){var r=n(41);t.exports=function(t,e,n){return void 0===n&&(n=.05),t===e?t:(Math.abs(e-t)<=n||Math.abs(e-t)>=r.PI2-n?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=r.PI2:e-=r.PI2),e>t?t+=n:e<t&&(t-=n)),t)}},function(t,e){t.exports=function(t,e){var n=e-t;return 0===n?0:n-360*Math.floor((n- -180)/360)}},function(t,e,n){t.exports={Between:n(112),Power:n(987),Squared:n(469)}},function(t,e){t.exports=function(t,e,n,r,i){return void 0===i&&(i=2),Math.sqrt(Math.pow(n-t,i)+Math.pow(r-e,i))}},function(t,e,n){t.exports={Back:n(452),Bounce:n(453),Circular:n(454),Cubic:n(455),Elastic:n(456),Expo:n(457),Linear:n(458),Quadratic:n(459),Quartic:n(460),Quintic:n(461),Sine:n(462),Stepped:n(463)}},function(t,e,n){t.exports={Ceil:n(990),Equal:n(295),Floor:n(991),GreaterThan:n(470),LessThan:n(471)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e,n){t.exports={Bezier:n(993),CatmullRom:n(994),CubicBezier:n(474),Linear:n(995),QuadraticBezier:n(475),SmoothStep:n(476),SmootherStep:n(996)}},function(t,e,n){var r=n(472);t.exports=function(t,e){for(var n=0,i=t.length-1,o=0;o<=i;o++)n+=Math.pow(1-e,i-o)*Math.pow(e,o)*t[o]*r(i,o);return n}},function(t,e,n){var r=n(296);t.exports=function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i);return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),r(i-o,t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n])):e<0?t[0]-(r(-i,t[0],t[0],t[1],t[1])-t[0]):e>1?t[n]-(r(i-n,t[n],t[n],t[n-1],t[n-1])-t[n]):r(i-o,t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2])}},function(t,e,n){var r=n(214);t.exports=function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i);return e<0?r(t[0],t[1],i):e>1?r(t[n],t[n-1],n-i):r(t[o],t[o+1>n?n:o+1],i-o)}},function(t,e,n){var r=n(284);t.exports=function(t,e,n){return e+(n-e)*r(t,0,1)}},function(t,e,n){t.exports={GetNext:n(477),IsSize:n(217),IsValue:n(998)}},function(t,e){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,e,n){t.exports={Ceil:n(478),Floor:n(177),To:n(1e3)}},function(t,e){t.exports=function(t,e,n,r){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.round(t/e),r?(n+t)/e:n+t)}},function(t,e,n){var r=new(n(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,n=this.n;t=t.toString();for(var r=0;r<t.length;r++)e=.02519603282416938*(n+=t.charCodeAt(r)),e-=n=e>>>0,n=(e*=n)>>>0,n+=4294967296*(e-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var n=t[e];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+1.1102230246251565e-16*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(this.frac()*(e+1)),r=t[n];t[n]=t[e],t[e]=r}return t}});t.exports=r},function(t,e){t.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=+t[n];return e/t.length}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.ceil(t*r)/r}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.floor(t*r)/r}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,n){return Math.min(t+e,n)}},function(t,e){t.exports=function(t,e,n){return Math.max(t-e,n)}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=e+1);var i=(t-e)/(n-e);return i>1?void 0!==r?(i=(r-t)/(r-n))<0&&(i=0):i=1:i<0&&(i=0),i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.round(t*r)/r}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=1),r*=Math.PI/t;for(var i=[],o=[],s=0;s<t;s++)e+=(n-=e*r)*r,i[s]=n,o[s]=e;return{sin:o,cos:i,length:t}}},function(t,e){t.exports=function(t,e,n){return Math.abs(t-e)<=n}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join("\n")},function(t,e,n){t.exports={GenerateTexture:n(502),Palettes:n(1027)}},function(t,e,n){t.exports={ARNE16:n(503),C64:n(1028),CGA:n(1029),JMP:n(1030),MSX:n(1031)}},function(t,e){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,e){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,e,n){t.exports={Path:n(1033),CubicBezier:n(504),Curve:n(149),Ellipse:n(505),Line:n(506),QuadraticBezier:n(507),Spline:n(508)}},function(t,e,n){var r=n(0),i=n(504),o=n(505),s=n(13),a=n(506),u=n(1034),c=n(507),h=n(22),l=n(508),f=n(8),d=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,n){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,n)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new a(e,t)),this},cubicBezierTo:function(t,e,n,r,o,s){var a,u,c,h=this.getEndPoint();return t instanceof f?(a=t,u=e,c=n):(a=new f(n,r),u=new f(o,s),c=new f(t,e)),this.add(new i(h,a,u,c))},quadraticBezierTo:function(t,e,n,r){var i,o,s=this.getEndPoint();return t instanceof f?(i=t,o=e):(i=new f(n,r),o=new f(t,e)),this.add(new c(s,i,o))},draw:function(t,e){for(var n=0;n<this.curves.length;n++){var r=this.curves[n];r.active&&r.draw(t,e)}return t},ellipseTo:function(t,e,n,r,i,s){var a=new o(0,0,t,e,n,r,i,s),u=this.getEndPoint(this._tmpVec2A),c=a.getStartPoint(this._tmpVec2B);return u.subtract(c),a.x=u.x,a.y=u.y,this.add(a)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var n=t.curves[e];switch(n.type){case"LineCurve":this.add(a.fromJSON(n));break;case"EllipseCurve":this.add(o.fromJSON(n));break;case"SplineCurve":this.add(l.fromJSON(n));break;case"CubicBezierCurve":this.add(i.fromJSON(n));break;case"QuadraticBezierCurve":this.add(c.fromJSON(n))}}return this},getBounds:function(t,e){void 0===t&&(t=new h),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var n=new h,r=Number.MIN_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<this.curves.length;o++){var s=this.curves[o];s.active&&(s.getBounds(n,e),t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),r=Math.max(r,n.right),i=Math.max(i,n.bottom))}return t.right=r,t.bottom=i,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0;n<this.curves.length;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new f);for(var n=t*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=r[i]-n,s=this.curves[i],a=s.getLength(),u=0===a?0:1-o/a;return s.getPointAt(u,e)}i++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,n=[],r=0;r<this.curves.length;r++){var i=this.curves[r];if(i.active)for(var o=i.getResolution(t),s=i.getPoints(o),a=0;a<s.length;a++){var u=s[a];e&&e.equals(u)||(n.push(u),e=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},getRandomPoint:function(t){return void 0===t&&(t=new f),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new f),t.copy(this.startPoint)},lineTo:function(t,e){t instanceof f?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var n=this.getEndPoint(this._tmpVec2A);return this.add(new a([n.x,n.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new l(t))},moveTo:function(t,e){return this.add(new u(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});s.register("path",function(t,e){return new d(t,e)}),t.exports=d},function(t,e,n){var r=n(0),i=n(8),o=new r({initialize:function(t,e){this.active=!1,this.p0=new i(t,e)},getPoint:function(t,e){return void 0===e&&(e=new i),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=o},function(t,e,n){t.exports={DataManager:n(175),DataManagerPlugin:n(1036),Events:n(434)}},function(t,e,n){var r=n(0),i=n(175),o=n(29),s=n(34),a=new r({Extends:i,initialize:function(t){i.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){i.prototype.destroy.call(this),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("DataManagerPlugin",a,"data"),t.exports=a},function(t,e,n){t.exports={Align:n(1038),BaseShader:n(509),Bounds:n(1053),Canvas:n(1056),Color:n(510),Masks:n(1065)}},function(t,e,n){var r=n(271),i=n(37),o={In:n(1039),To:n(1040)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={BottomCenter:n(405),BottomLeft:n(406),BottomRight:n(407),Center:n(408),LeftCenter:n(410),QuickSet:n(404),RightCenter:n(411),TopCenter:n(412),TopLeft:n(413),TopRight:n(414)}},function(t,e,n){t.exports={BottomCenter:n(1041),BottomLeft:n(1042),BottomRight:n(1043),LeftBottom:n(1044),LeftCenter:n(1045),LeftTop:n(1046),RightBottom:n(1047),RightCenter:n(1048),RightTop:n(1049),TopCenter:n(1050),TopLeft:n(1051),TopRight:n(1052)}},function(t,e,n){var r=n(87),i=n(142),o=n(143),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,i(e)+n),s(t,r(e)+a),t}},function(t,e,n){var r=n(87),i=n(89),o=n(90),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,i(e)-n),s(t,r(e)+a),t}},function(t,e,n){var r=n(87),i=n(91),o=n(92),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,i(e)+n),s(t,r(e)+a),t}},function(t,e,n){var r=n(87),i=n(89),o=n(88),s=n(92);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(145),i=n(89),o=n(144),s=n(92);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(89),i=n(93),o=n(92),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)-n),s(t,i(e)-a),t}},function(t,e,n){var r=n(87),i=n(91),o=n(88),s=n(90);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(145),i=n(91),o=n(144),s=n(90);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(91),i=n(93),o=n(90),s=n(94);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)+n),s(t,i(e)-a),t}},function(t,e,n){var r=n(142),i=n(93),o=n(88),s=n(143);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,r(e)+n),o(t,i(e)-a),t}},function(t,e,n){var r=n(89),i=n(93),o=n(88),s=n(90);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,r(e)-n),o(t,i(e)-a),t}},function(t,e,n){var r=n(91),i=n(93),o=n(88),s=n(92);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,r(e)+n),o(t,i(e)-a),t}},function(t,e,n){t.exports={CenterOn:n(409),GetBottom:n(87),GetCenterX:n(142),GetCenterY:n(145),GetLeft:n(89),GetOffsetX:n(1054),GetOffsetY:n(1055),GetRight:n(91),GetTop:n(93),SetBottom:n(88),SetCenterX:n(143),SetCenterY:n(144),SetLeft:n(90),SetRight:n(92),SetTop:n(94)}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,n){t.exports={CanvasInterpolation:n(489),CanvasPool:n(51),Smoothing:n(213),TouchAction:n(1057),UserSelect:n(1058)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e="none");return["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(n){t.style[n+"user-select"]=e}),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(e.a=t>>>24),e}},function(t,e,n){var r=n(72),i=n(512);t.exports=function(t,e,n){var o=n,s=n,a=n;if(0!==e){var u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;o=i(c,u,t+1/3),s=i(c,u,t),a=i(c,u,t-1/3)}return(new r).setGLTo(o,s,a,1)}},function(t,e,n){var r=n(290);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var n=[],i=0;i<=359;i++)n.push(r(i/359,t,e));return n}},function(t,e,n){var r=n(214),i=function(t,e,n,i,o,s,a,u){void 0===a&&(a=100),void 0===u&&(u=0);var c=u/a;return{r:r(t,i,c),g:r(e,o,c),b:r(n,s,c)}};t.exports={RGBWithRGB:i,ColorWithRGB:function(t,e,n,r,o,s){return void 0===o&&(o=100),void 0===s&&(s=0),i(t.r,t.g,t.b,e,n,r,o,s)},ColorWithColor:function(t,e,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),i(t.r,t.g,t.b,e.r,e.g,e.b,n,r)}}},function(t,e,n){var r=n(297),i=n(72);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new i(r(t,e),r(t,e),r(t,e))}},function(t,e,n){var r=n(511);t.exports=function(t,e,n,i,o){return void 0===i&&(i=255),void 0===o&&(o="#"),"#"===o?"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1):"0x"+r(i)+r(t)+r(e)+r(n)}},function(t,e,n){t.exports={BitmapMask:n(428),GeometryMask:n(429)}},function(t,e,n){var r={AddToDOM:n(220),DOMContentLoaded:n(513),GetScreenOrientation:n(514),GetTarget:n(519),ParseXML:n(520),RemoveFromDOM:n(305),RequestAnimationFrame:n(500)};t.exports=r},function(t,e,n){t.exports={EventEmitter:n(1068)}},function(t,e,n){var r=n(0),i=n(20),o=n(29),s=new r({Extends:i,initialize:function(){i.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});o.register("EventEmitter",s,"events"),t.exports=s},function(t,e,n){var r=n(220),i=n(439),o=n(442),s=n(51),a=n(0),u=n(464),c=n(1070),h=n(488),l=n(175),f=n(498),d=n(465),p=n(513),m=n(20),v=n(60),g=n(521),y=n(29),b=n(526),x=n(527),w=n(529),E=n(219),_=n(533),S=n(499),T=n(501),A=n(536),M=n(544),C=new a({initialize:function(t){this.config=new u(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new i(this),this.textures=new _(this),this.cache=new o(this),this.registry=new l(this),this.input=new g(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=d,this.scale=new x(this,this.config),this.sound=null,this.sound=A.create(this),this.loop=new S(this,this.config.fps),this.plugins=new b(this,this.config),this.facebook=new M(this),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),h(this),c(this),f(this),r(this.canvas,this.config.parent),this.textures.once(E.READY,this.texturesReady,this),this.events.emit(v.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(v.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),T(this);var t=this.events;t.on(v.HIDDEN,this.onHidden,this),t.on(v.VISIBLE,this.onVisible,this),t.on(v.BLUR,this.onBlur,this),t.on(v.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(v.PRE_STEP,t,e),n.emit(v.STEP,t,e),this.scene.update(t,e),n.emit(v.POST_STEP,t,e);var r=this.renderer;r.preRender(),n.emit(v.PRE_RENDER,r,t,e),this.scene.render(r),r.postRender(),n.emit(v.POST_RENDER,r,t,e)},headlessStep:function(t,e){var n=this.events;n.emit(v.PRE_STEP,t,e),n.emit(v.STEP,t,e),this.scene.update(t,e),n.emit(v.POST_STEP,t,e),n.emit(v.PRE_RENDER),n.emit(v.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(v.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(v.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.events.emit(v.DESTROY),this.events.removeAllListeners(),this.scene.destroy(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(s.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=C},function(t,e,n){var r=n(220);t.exports=function(t){var e=t.config;if(e.parent&&e.domCreateContainer){var n=document.createElement("div");n.style=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=n,r(n,e.parent)}}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),n={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),n.w=90===e?r.offsetHeight:window.innerWidth,n.h=90===e?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,90!==Math.abs(window.orientation)?n.h:n.w}},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,n){var r=n(1),i=n(531);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,n=r(t.settings,"physics",!1);if(e||n){var o=[];if(e&&o.push(i(e+"Physics")),n)for(var s in n)s=i(s.concat("Physics")),-1===o.indexOf(s)&&o.push(s);return o}}},function(t,e,n){var r=n(1);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),n=r(t.settings,"plugins",!1);return Array.isArray(n)?n:e||[]}},function(t,e){var n={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter",cameras3d:"cameras3d",facebook:"facebook"};t.exports=n},function(t,e,n){var r=n(0),i=n(40),o=n(72),s=n(217),a=n(308),u=new r({Extends:a,initialize:function(t,e,n,r,i){a.call(this,t,e,n,r,i),this.add("__BASE",0,0,0,r,i),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=r,this.height=i,this.imageData=this.context.getImageData(0,0,r,i),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this},draw:function(t,e,n){return this.context.drawImage(n,t,e),this.update()},drawFrame:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this.manager.getFrame(t,e);if(i){var o=i.canvasData,s=i.cutWidth,a=i.cutHeight,u=i.source.resolution;return this.context.drawImage(i.source.image,o.x,o.y,s,a,n,r,s/u,a/u),this.update()}return this},setPixel:function(t,e,n,r,i,o){if(void 0===o&&(o=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),this.getIndex(t,e)>-1){var s=this.context.getImageData(t,e,1,1);s.data[0]=n,s.data[1]=r,s.data[2]=i,s.data[3]=o,this.context.putImageData(s,t,e)}return this},putData:function(t,e,n,r,i,o,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=t.width),void 0===s&&(s=t.height),this.context.putImageData(t,e,n,r,i,o,s),this},getData:function(t,e,n,r){return t=i(Math.floor(t),0,this.width-1),e=i(Math.floor(e),0,this.height-1),n=i(n,1,this.width-t),r=i(r,1,this.height-e),this.context.getImageData(t,e,n,r)},getPixel:function(t,e,n){n||(n=new o);var r=this.getIndex(t,e);if(r>-1){var i=this.data,s=i[r+0],a=i[r+1],u=i[r+2],c=i[r+3];n.setTo(s,a,u,c)}return n},getPixels:function(t,e,n,r){void 0===r&&(r=n),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var s=i(t,0,this.width),a=i(t+n,0,this.width),u=i(e,0,this.height),c=i(e+r,0,this.height),h=new o,l=[],f=u;f<c;f++){for(var d=[],p=s;p<a;p++)h=this.getPixel(p,f,h),d.push({x:p,y:f,color:h.color,alpha:h.alphaGL});l.push(d)}return l},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.width),void 0===r&&(r=this.height),this.context.clearRect(t,e,n,r),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=s(t,e),this.frames.__BASE.setSize(t,e,0,0),this.refresh()),this},destroy:function(){a.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=u},function(t,e){t.exports=function(t,e,n){if(n.getElementsByTagName("TextureAtlas")){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);for(var i,o=n.getElementsByTagName("SubTexture"),s=0;s<o.length;s++){var a=o[s].attributes,u=a.name.value,c=parseInt(a.x.value,10),h=parseInt(a.y.value,10),l=parseInt(a.width.value,10),f=parseInt(a.height.value,10);if(i=t.add(u,e,c,h,l,f),a.frameX){var d=Math.abs(parseInt(a.frameX.value,10)),p=Math.abs(parseInt(a.frameY.value,10)),m=parseInt(a.frameWidth.value,10),v=parseInt(a.frameHeight.value,10);i.setTrim(l,f,d,p,m,v)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,e){t.exports=function(t,e){var n=t.source[e];return t.add("__BASE",e,0,0,n.width,n.height),t}},function(t,e){t.exports=function(t,e){var n=t.source[e];return t.add("__BASE",e,0,0,n.width,n.height),t}},function(t,e,n){var r=n(125);t.exports=function(t,e,n){if(n.frames||n.textures){var i=t.source[e];t.add("__BASE",e,0,0,i.width,i.height);for(var o,s=Array.isArray(n.textures)?n.textures[e].frames:n.frames,a=0;a<s.length;a++){var u=s[a];o=t.add(u.filename,e,u.frame.x,u.frame.y,u.frame.w,u.frame.h),u.trimmed&&o.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(o.rotated=!0,o.updateUVsInverted()),u.anchor&&(o.customPivot=!0,o.pivotX=u.anchor.x,o.pivotY=u.anchor.y),o.customData=r(u)}for(var c in n)"frames"!==c&&(Array.isArray(n[c])?t.customData[c]=n[c].slice(0):t.customData[c]=n[c]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,e,n){var r=n(125);t.exports=function(t,e,n){if(n.frames){var i=t.source[e];t.add("__BASE",e,0,0,i.width,i.height);var o,s=n.frames;for(var a in s){var u=s[a];o=t.add(a,e,u.frame.x,u.frame.y,u.frame.w,u.frame.h),u.trimmed&&o.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(o.rotated=!0,o.updateUVsInverted()),o.customData=r(u)}for(var c in n)"frames"!==c&&(Array.isArray(n[c])?t.customData[c]=n[c].slice(0):t.customData[c]=n[c]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,e,n){var r=n(1);t.exports=function(t,e,n,i,o,s,a){var u=r(a,"frameWidth",null),c=r(a,"frameHeight",u);if(null===u)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var h=t.source[e];t.add("__BASE",e,0,0,h.width,h.height);var l=r(a,"startFrame",0),f=r(a,"endFrame",-1),d=r(a,"margin",0),p=r(a,"spacing",0),m=Math.floor((o-d+p)/(u+p))*Math.floor((s-d+p)/(c+p));0===m&&console.warn("SpriteSheet frame dimensions will result in zero frames."),(l>m||l<-m)&&(l=0),l<0&&(l=m+l),-1!==f&&(m=l+(f+1));for(var v=d,g=d,y=0,b=0,x=0;x<m;x++){y=0,b=0;var w=v+u,E=g+c;w>o&&(y=w-o),E>s&&(b=E-s),t.add(x,e,n+v,i+g,u-y,c-b),(v+=u+p)+u>o&&(v=d,g+=c+p)}return t}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i=r(n,"frameWidth",null),o=r(n,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var s=t.source[0];t.add("__BASE",0,0,0,s.width,s.height);var a,u=r(n,"startFrame",0),c=r(n,"endFrame",-1),h=r(n,"margin",0),l=r(n,"spacing",0),f=e.cutX,d=e.cutY,p=e.cutWidth,m=e.cutHeight,v=e.realWidth,g=e.realHeight,y=Math.floor((v-h+l)/(i+l)),b=Math.floor((g-h+l)/(o+l)),x=y*b,w=e.x,E=i-w,_=i-(v-p-w),S=e.y,T=o-S,A=o-(g-m-S);(u>x||u<-x)&&(u=0),u<0&&(u=x+u),-1!==c&&(x=u+(c+1));for(var M=h,C=h,O=0,N=e.sourceIndex,k=0;k<b;k++){for(var R=0===k,P=k===b-1,I=0;I<y;I++){var D=0===I,L=I===y-1;if(a=t.add(O,N,f+M,d+C,i,o),D||R||L||P){var B=D?w:0,F=R?S:0,z=0,j=0;D&&(z+=i-E),L&&(z+=i-_),R&&(j+=o-T),P&&(j+=o-A);var U=i-z,Y=o-j;a.cutWidth=U,a.cutHeight=Y,a.setTrim(i,o,B,F,U,Y)}M+=l,M+=D?E:L?_:i,O++}M=h,C+=l,C+=R?T:P?A:o}return t}},function(t,e){var n=0,r=function(t,e,r,i){var o=n-i.y-i.height;t.add(r,e,i.x,o,i.width,i.height)};t.exports=function(t,e,i){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height),n=o.height;for(var s=i.split("\n"),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",c="",h={x:0,y:0,width:0,height:0},l=0;l<s.length;l++){var f=s[l].match(a);if(f){var d="- "===f[1],p=f[2],m=f[3];if(d&&(c!==u&&(r(t,e,c,h),u=c),h={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":h[p]=parseInt(m,10)}else c=m}}return c!==u&&r(t,e,c,h),t}},function(t,e){t.exports="complete"},function(t,e){t.exports="decoded"},function(t,e){t.exports="decodedall"},function(t,e){t.exports="destroy"},function(t,e){t.exports="detune"},function(t,e){t.exports="detune"},function(t,e){t.exports="mute"},function(t,e){t.exports="rate"},function(t,e){t.exports="volume"},function(t,e){t.exports="loop"},function(t,e){t.exports="looped"},function(t,e){t.exports="mute"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="pause"},function(t,e){t.exports="play"},function(t,e){t.exports="rate"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="resume"},function(t,e){t.exports="seek"},function(t,e){t.exports="stopall"},function(t,e){t.exports="stop"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="volume"},function(t,e){t.exports=function(t,e,n){return{instance:e,placementID:t,shown:!1,video:n}}},function(t,e,n){var r=n(0),i=n(20),o=n(1165),s=new r({Extends:i,initialize:function(t,e){i.call(this),this.plugin=t,this.ref=e,this.name=e.getName(),this.contextID=e.getContextID(),this.entryCount=0,this.playerScore=null,this.scores=[],this.getEntryCount()},getEntryCount:function(){var t=this;return this.ref.getEntryCountAsync().then(function(e){t.entryCount=e,t.emit("getentrycount",e,t.name)}).catch(function(t){console.warn(t)}),this},setScore:function(t,e){void 0===e&&(e=""),"object"==typeof e&&(e=JSON.stringify(e));var n=this;return this.ref.setScoreAsync(t,e).then(function(t){if(t){var e=o(t);n.playerScore=e,n.emit("setscore",e,n.name)}else n.emit("setscore",null,n.name)}).catch(function(t){console.warn(t)}),this},getPlayerScore:function(){var t=this;return this.ref.getPlayerEntryAsync().then(function(e){if(e){var n=o(e);t.playerScore=n,t.emit("getplayerscore",n,t.name)}else t.emit("getplayerscore",null,t.name)}).catch(function(t){console.warn(t)}),this},getScores:function(t,e){void 0===t&&(t=10),void 0===e&&(e=0);var n=this;return this.ref.getEntriesAsync(t,e).then(function(t){n.scores=[],t.forEach(function(t){n.scores.push(o(t))}),n.emit("getscores",n.scores,n.name)}).catch(function(t){console.warn(t)}),this},getConnectedScores:function(t,e){void 0===t&&(t=10),void 0===e&&(e=0);var n=this;return this.ref.getConnectedPlayerEntriesAsync().then(function(t){n.scores=[],t.forEach(function(t){n.scores.push(o(t))}),n.emit("getconnectedscores",n.scores,n.name)}).catch(function(t){console.warn(t)}),this}});t.exports=s},function(t,e){t.exports=function(t){return{score:t.getScore(),scoreFormatted:t.getFormattedScore(),timestamp:t.getTimestamp(),rank:t.getRank(),data:t.getExtraData(),playerName:t.getPlayer().getName(),playerPhotoURL:t.getPlayer().getPhoto(),playerID:t.getPlayer().getID()}}},function(t,e,n){var r=n(1);t.exports=function(t){return{title:r(t,"title",""),productID:r(t,"productID",""),description:r(t,"description",""),imageURI:r(t,"imageURI",""),price:r(t,"price",""),priceCurrencyCode:r(t,"priceCurrencyCode","")}}},function(t,e,n){var r=n(1);t.exports=function(t){return{developerPayload:r(t,"developerPayload",""),paymentID:r(t,"paymentID",""),productID:r(t,"productID",""),purchaseTime:r(t,"purchaseTime",""),purchaseToken:r(t,"purchaseToken",""),signedRequest:r(t,"signedRequest","")}}},function(t,e,n){var r={Events:n(210),DisplayList:n(1169),GameObjectCreator:n(27),GameObjectFactory:n(13),UpdateList:n(1197),Components:n(23),BuildGameObject:n(57),BuildGameObjectAnimation:n(312),GameObject:n(24),BitmapText:n(229),Blitter:n(314),Container:n(315),DOMElement:n(549),DynamicBitmapText:n(316),Extern:n(551),Graphics:n(317),Group:n(181),Image:n(152),Particles:n(1226),PathFollower:n(563),RenderTexture:n(321),RetroFont:n(1235),Sprite:n(99),Text:n(322),TileSprite:n(323),Zone:n(206),Shape:n(65),Arc:n(565),Curve:n(566),Ellipse:n(567),Grid:n(568),IsoBox:n(569),IsoTriangle:n(570),Line:n(571),Polygon:n(572),Rectangle:n(577),Star:n(578),Triangle:n(579),Factories:{Blitter:n(1280),Container:n(1281),DOMElement:n(1282),DynamicBitmapText:n(1283),Extern:n(1284),Graphics:n(1285),Group:n(1286),Image:n(1287),Particles:n(1288),PathFollower:n(1289),RenderTexture:n(1290),Sprite:n(1291),StaticBitmapText:n(1292),Text:n(1293),TileSprite:n(1294),Zone:n(1295),Arc:n(1296),Curve:n(1297),Ellipse:n(1298),Grid:n(1299),IsoBox:n(1300),IsoTriangle:n(1301),Line:n(1302),Polygon:n(1303),Rectangle:n(1304),Star:n(1305),Triangle:n(1306)},Creators:{Blitter:n(1307),Container:n(1308),DynamicBitmapText:n(1309),Graphics:n(1310),Group:n(1311),Image:n(1312),Particles:n(1313),RenderTexture:n(1314),Sprite:n(1315),StaticBitmapText:n(1316),Text:n(1317),TileSprite:n(1318),Zone:n(1319)}};r.Mesh=n(230),r.Quad=n(326),r.Shader=n(327),r.Factories.Mesh=n(1326),r.Factories.Quad=n(1327),r.Factories.Shader=n(1328),r.Creators.Mesh=n(1329),r.Creators.Quad=n(1330),r.Creators.Shader=n(1331),r.Light=n(583),n(584),n(1332),t.exports=r},function(t,e,n){var r=n(0),i=n(226),o=n(29),s=n(34),a=n(228),u=new r({Extends:i,initialize:function(t){i.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(a.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list.length;t--;)this.list[t].destroy(!0);this.list.length=0,this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("DisplayList",u,"displayList"),t.exports=u},function(t,e,n){t.exports={CheckMatrix:n(310),MatrixToString:n(1171),ReverseColumns:n(1172),ReverseRows:n(1173),Rotate180:n(1174),RotateLeft:n(1175),RotateMatrix:n(227),RotateRight:n(1176),TransposeMatrix:n(545)}},function(t,e,n){var r=n(287),i=n(310);t.exports=function(t){var e="";if(!i(t))return e;for(var n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++){var s=t[n][o].toString();e+="undefined"!==s?r(s,2):"?",o<t[n].length-1&&(e+=" |")}if(n<t.length-1){e+="\n";for(var a=0;a<t[n].length;a++)e+="---",a<t[n].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,n){var r=n(227);t.exports=function(t){return r(t,180)}},function(t,e,n){var r=n(227);t.exports=function(t){return r(t,90)}},function(t,e,n){var r=n(227);t.exports=function(t){return r(t,-90)}},function(t,e){t.exports=function(t,e,n,r,i){if(void 0===i&&(i=t),n>0){var o=n-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),r&&r.call(i,e),e):null;for(var s=e.length-1;s>=0;)-1!==t.indexOf(e[s])&&e.splice(s,1),s--;if(0===(s=e.length))return null;n>0&&s>o&&(e.splice(o),s=o);for(var a=0;a<s;a++){var u=e[a];t.push(u),r&&r.call(i,u)}return e}},function(t,e){t.exports=function(t,e,n,r,i,o){if(void 0===n&&(n=0),void 0===o&&(o=t),r>0){var s=r-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(n,0,e),i&&i.call(o,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;r>0&&a>s&&(e.splice(s),a=s);for(var u=a-1;u>=0;u--){var c=e[u];t.splice(n,0,c),i&&i.call(o,c)}return e}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(e)),e}},function(t,e,n){var r=n(127);t.exports=function(t,e,n,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var s=0;if(r(t,i,o))for(var a=i;a<o;a++)t[a][e]===n&&s++;return s}},function(t,e){t.exports=function(t,e,n){var r,i=[null];for(r=3;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<t.length;r++)i[0]=t[r],e.apply(n,i);return t}},function(t,e,n){var r=n(127);t.exports=function(t,e,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=t.length),r(t,i,o)){var s,a=[null];for(s=5;s<arguments.length;s++)a.push(arguments[s]);for(s=i;s<o;s++)a[0]=t[s],e.apply(n,a)}return t}},function(t,e,n){var r=n(127);t.exports=function(t,e,n,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var s=[];if(r(t,i,o))for(var a=i;a<o;a++){var u=t[a];(!e||e&&void 0===n&&u.hasOwnProperty(e)||e&&void 0!==n&&u[e]===n)&&s.push(u)}return s}},function(t,e,n){var r=n(127);t.exports=function(t,e,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=t.length),r(t,i,o))for(var s=i;s<o;s++){var a=t[s];if(!e||e&&void 0===n&&a.hasOwnProperty(e)||e&&void 0!==n&&a[e]===n)return a}return null}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);if(n>0){var r=t[n-1],i=t.indexOf(r);t[n]=r,t[i]=e}return t}},function(t,e){t.exports=function(t,e,n){var r=t.indexOf(e);if(-1===r||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return r!==n&&(t.splice(r,1),t.splice(n,0,e)),e}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);if(-1!==n&&n<t.length-1){var r=t[n+1],i=t.indexOf(r);t[n]=r,t[i]=e}return t}},function(t,e){t.exports=function(t,e,n,r){for(var i=[],o=t;o<=e;o++)if(n||r){var s=n?n+o.toString():o.toString();r&&(s=s.concat(r)),i.push(s)}else i.push(o);return i}},function(t,e,n){var r=n(483);t.exports=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=null),void 0===n&&(n=1),null===e&&(e=t,t=0);for(var i=[],o=Math.max(r((e-t)/(n||1)),0),s=0;s<o;s++)i.push(t),t+=n;return i}},function(t,e,n){var r=n(148);t.exports=function(t,e,n,i){if(void 0===i&&(i=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var o=r(t,e);return n&&n.call(i,o),o}},function(t,e,n){var r=n(127);t.exports=function(t,e,n,i,o){if(void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===o&&(o=t),r(t,e,n)){var s=n-e,a=t.splice(e,s);if(i)for(var u=0;u<a.length;u++){var c=a[u];i.call(o,c)}return a}return[]}},function(t,e,n){var r=n(148);t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);var i=e+Math.floor(Math.random()*n);return r(t,i)}},function(t,e){t.exports=function(t,e,n){var r=t.indexOf(e),i=t.indexOf(n);return-1!==r&&-1===i&&(t[r]=n,!0)}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);return-1!==n&&n>0&&(t.splice(n,1),t.unshift(e)),e}},function(t,e,n){var r=n(127);t.exports=function(t,e,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=t.length),r(t,i,o))for(var s=i;s<o;s++){var a=t[s];a.hasOwnProperty(e)&&(a[e]=n)}return t}},function(t,e){t.exports=function(t,e,n){if(e!==n){var r=t.indexOf(e),i=t.indexOf(n);if(r<0||i<0)throw new Error("Supplied items must be elements of the same array");return t[r]=n,t[i]=e,t}}},function(t,e,n){var r=n(0),i=n(29),o=n(34),s=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.preUpdate,this),t.on(o.UPDATE,this.update,this),t.once(o.SHUTDOWN,this.shutdown,this)},add:function(t){return-1===this._list.indexOf(t)&&-1===this._pendingInsertion.indexOf(t)&&this._pendingInsertion.push(t),t},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var n,r;for(n=0;n<t;n++){r=this._pendingRemoval[n];var i=this._list.indexOf(r);i>-1&&this._list.splice(i,1)}this._list=this._list.concat(this._pendingInsertion.splice(0)),this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){for(var n=0;n<this._list.length;n++){var r=this._list[n];r.active&&r.preUpdate.call(r,t,e)}},remove:function(t){return-1!==this._pendingRemoval.indexOf(t)&&this._pendingRemoval.push(t),t},removeAll:function(){for(var t=this._list.length;t--;)this.remove(this._list[t]);return this},shutdown:function(){for(var t=this._list.length;t--;)this._list[t].destroy(!0);for(t=this._pendingRemoval.length;t--;)this._pendingRemoval[t].destroy(!0);for(t=this._pendingInsertion.length;t--;)this._pendingInsertion[t].destroy(!0);this._list.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(o.PRE_UPDATE,this.preUpdate,this),e.off(o.UPDATE,this.update,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null},length:{get:function(){return this._list.length}}});i.register("UpdateList",s,"updateList"),t.exports=s},function(t,e){t.exports=function(t,e,n){void 0===n&&(n={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null}});for(var r=t.text,i=r.length,o=Number.MAX_VALUE,s=Number.MAX_VALUE,a=0,u=0,c=t.fontData.chars,h=t.fontData.lineHeight,l=t.letterSpacing,f=0,d=0,p=0,m=null,v=0,g=0,y=t.fontSize/t.fontData.size,b=y*t.scaleX,x=y*t.scaleY,w=null,E=0,_=[],S=Number.MAX_VALUE,T=0,A=0,M=0,C=0;C<i;C++)if(10!==(p=r.charCodeAt(C))){if(m=c[p]){if(v=f,g=d,null!==w){var O=m.kerning[E];v+=void 0!==O?O:0}o>v&&(o=v),s>g&&(s=g);var N=v+m.xAdvance,k=g+h;a<N&&(a=N),u<k&&(u=k),f+=m.xAdvance+l,w=m,E=p,M=N*y}}else f=0,d+=h,w=null,_[A]=M,M>T&&(T=M),M<S&&(S=M),A++,M=0;_[A]=M,M>T&&(T=M),M<S&&(S=M);var R=n.local,P=n.global,I=n.lines;return R.x=o*y,R.y=s*y,R.width=a*y,R.height=u*y,P.x=t.x-t.displayOriginX+o*b,P.y=t.y-t.displayOriginY+s*x,P.width=a*b,P.height=u*x,I.shortest=S,I.longest=T,I.lengths=_,e&&(R.x=Math.round(R.x),R.y=Math.round(R.y),R.width=Math.round(R.width),R.height=Math.round(R.height),P.x=Math.round(P.x),P.y=Math.round(P.y),P.width=Math.round(P.width),P.height=Math.round(P.height),I.shortest=Math.round(S),I.longest=Math.round(T)),n}},function(t,e,n){var r=n(313);t.exports=function(t,e,n,i,o,s,a){var u=t.sys.textures.getFrame(n,i),c=t.sys.cache.xml.get(o);if(u&&c){var h=r(c,s,a,u);return t.sys.cache.bitmapFont.add(e,{data:h,texture:n,frame:i}),!0}return!1}},function(t,e,n){var r=n(2),i=n(2);r=n(1201),i=n(1202),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=e._text,a=s.length;if(0!==a){var u=this.pipeline;t.setPipeline(u,e);var c=u._tempMatrix1,h=u._tempMatrix2,l=u._tempMatrix3;h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),c.copyFrom(i.matrix),o?(c.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y,c.multiply(h,l)):(h.e-=i.scrollX*e.scrollFactorX,h.f-=i.scrollY*e.scrollFactorY,c.multiply(h,l));var f=e.frame,d=f.glTexture,p=f.cutX,m=f.cutY,v=d.width,g=d.height,y=e._isTinted&&e.tintFill,b=r.getTintAppendFloatAlpha(e._tintTL,i.alpha*e._alphaTL),x=r.getTintAppendFloatAlpha(e._tintTR,i.alpha*e._alphaTR),w=r.getTintAppendFloatAlpha(e._tintBL,i.alpha*e._alphaBL),E=r.getTintAppendFloatAlpha(e._tintBR,i.alpha*e._alphaBR);u.setTexture2D(d,0);var _,S,T=0,A=0,M=0,C=0,O=e._letterSpacing,N=0,k=0,R=0,P=0,I=e.fontData,D=I.chars,L=I.lineHeight,B=e._fontSize/I.size,F=e._align,z=0,j=0;e.getTextBounds(!1);var U=e._bounds.lines;1===F?j=(U.longest-U.lengths[0])/2:2===F&&(j=U.longest-U.lengths[0]);for(var Y=i.roundPixels,W=0;W<a;W++)if(10!==(M=s.charCodeAt(W))){if(_=D[M]){N=p+_.x,k=m+_.y,R=_.width,P=_.height;var X=_.xOffset+T,G=_.yOffset+A;if(null!==S){var V=_.kerning[C];X+=void 0!==V?V:0}if(T+=_.xAdvance+O,S=_,C=M,0!==R&&0!==P&&32!==M){X*=B,G*=B,X-=e.displayOriginX;var q=N/v,H=k/g,K=(N+R)/v,$=(k+P)/g,J=(X+=j)+R*B,Z=(G-=e.displayOriginY)+P*B,Q=l.getX(X,G),tt=l.getY(X,G),et=l.getX(X,Z),nt=l.getY(X,Z),rt=l.getX(J,Z),it=l.getY(J,Z),ot=l.getX(J,G),st=l.getY(J,G);Y&&(Q=Math.round(Q),tt=Math.round(tt),et=Math.round(et),nt=Math.round(nt),rt=Math.round(rt),it=Math.round(it),ot=Math.round(ot),st=Math.round(st)),u.batchQuad(Q,tt,et,nt,rt,it,ot,st,q,H,K,$,b,x,w,E,y,d,0)}}}else z++,1===F?j=(U.longest-U.lengths[z])/2:2===F&&(j=U.longest-U.lengths[z]),T=0,A+=L,S=null}}},function(t,e,n){var r=n(52);t.exports=function(t,e,n,i,o){var s=e._text,a=s.length,u=t.currentContext;if(0!==a&&r(t,u,e,i,o)){var c=e.frame,h=e.fontData.chars,l=e.fontData.lineHeight,f=e._letterSpacing,d=0,p=0,m=0,v=null,g=0,y=0,b=0,x=0,w=0,E=0,_=null,S=0,T=e.frame.source.image,A=c.cutX,M=c.cutY,C=e._fontSize/e.fontData.size,O=e._align,N=0,k=0;e.getTextBounds(!1);var R=e._bounds.lines;1===O?k=(R.longest-R.lengths[0])/2:2===O&&(k=R.longest-R.lengths[0]),u.translate(-e.displayOriginX,-e.displayOriginY);for(var P=i.roundPixels,I=0;I<a;I++)if(10!==(m=s.charCodeAt(I))){if(v=h[m]){if(g=A+v.x,y=M+v.y,b=v.width,x=v.height,w=v.xOffset+d,E=v.yOffset+p,null!==_){var D=v.kerning[S];w+=void 0!==D?D:0}w*=C,E*=C,w+=k,d+=v.xAdvance+f,_=v,S=m,0!==b&&0!==x&&32!==m&&(P&&(w=Math.round(w),E=Math.round(E)),u.save(),u.translate(w,E),u.scale(C,C),u.drawImage(T,g,y,b,x,0,0,b,x),u.restore())}}else N++,1===O?k=(R.longest-R.lengths[N])/2:2===O&&(k=R.longest-R.lengths[N]),d=0,p+=l,_=null;u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1204),i=n(1205),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=e.getRenderList();if(0!==s.length){var a=this.pipeline;t.setPipeline(a,e);var u=i.scrollX*e.scrollFactorX,c=i.scrollY*e.scrollFactorY,h=a._tempMatrix1;h.copyFrom(i.matrix),o&&(h.multiplyWithOffset(o,-u,-c),u=0,c=0);for(var l=e.x-u,f=e.y-c,d=-1,p=i.alpha*e.alpha,m=i.roundPixels,v=0;v<s.length;v++){var g=s[v],y=g.frame,b=g.alpha*p;if(0!==b){var x=y.width,w=y.height,E=l+g.x+y.x,_=f+g.y+y.y;g.flipX&&(x*=-1,E+=y.width),g.flipY&&(w*=-1,_+=y.height);var S=E+x,T=_+w,A=h.getX(E,_),M=h.getY(E,_),C=h.getX(S,T),O=h.getY(S,T),N=r.getTintAppendFloatAlpha(16777215,b);y.sourceIndex!==d&&(a.setTexture2D(y.glTexture,0),d=y.sourceIndex),m&&(A=Math.round(A),M=Math.round(M),C=Math.round(C),O=Math.round(O)),a.batchQuad(A,M,A,O,C,O,C,M,y.u0,y.v0,y.u1,y.v1,N,N,N,N,!1,y.glTexture,0)&&(d=-1)}}}}},function(t,e){t.exports=function(t,e,n,r,i){var o=e.getRenderList();if(0!==o.length){var s=t.currentContext,a=r.alpha*e.alpha;if(0!==a){s.globalCompositeOperation=t.blendModes[e.blendMode];var u=e.x-r.scrollX*e.scrollFactorX,c=e.y-r.scrollY*e.scrollFactorY;s.save(),i&&i.copyToContext(s);for(var h=r.roundPixels,l=0;l<o.length;l++){var f=o[l],d=f.flipX||f.flipY,p=f.frame,m=p.canvasData,v=p.x,g=p.y,y=1,b=1,x=f.alpha*a;0!==x&&(s.globalAlpha=x,d?(f.flipX&&(y=-1,v-=m.width),f.flipY&&(b=-1,g-=m.height),s.save(),s.translate(f.x+u,f.y+c),s.scale(y,b),s.drawImage(p.source.image,m.x,m.y,m.width,m.height,v,g,m.width,m.height),s.restore()):(h&&(v=Math.round(v),g=Math.round(g)),s.drawImage(p.source.image,m.x,m.y,m.width,m.height,v+f.x+u,g+f.y+c,m.width,m.height)))}s.restore()}}}},function(t,e,n){var r=n(0),i=n(178),o=new r({initialize:function(t,e,n,r,i){this.parent=t,this.x=e,this.y=n,this.frame=r,this.data={},this._visible=i,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof i&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,n){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this._visible=t,this.parent.dirty=!0}},alpha:{get:function(){return this._alpha},set:function(t){this._alpha=t,this.parent.dirty=!0}}});t.exports=o},function(t,e,n){var r=n(2),i=n(2);r=n(1208),i=n(1209),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r,i){var o=e.list;if(0!==o.length){var s=e.localTransform;i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var u=e._alpha,c=e.scrollFactorX,h=e.scrollFactorY,l=0;l<o.length;l++){var f=o[l];if(f.willRender(r)){var d=f._alpha,p=f.scrollFactorX,m=f.scrollFactorY;a||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode),f.mask&&f.mask.preRenderWebGL(t,f,r),f.setScrollFactor(p*c,m*h),f.setAlpha(d*u),f.renderWebGL(t,f,n,r,s),f.setAlpha(d),f.setScrollFactor(p,m),f.mask&&f.mask.postRenderWebGL(t,r)}}}}},function(t,e){t.exports=function(t,e,n,r,i){var o=e.list;if(0!==o.length){var s=e.localTransform;i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var u=e._alpha,c=e.scrollFactorX,h=e.scrollFactorY,l=0;l<o.length;l++){var f=o[l];if(f.willRender(r)){var d=f._alpha,p=f._blendMode,m=f.scrollFactorX,v=f.scrollFactorY;f.setScrollFactor(m*c,v*h),f.setAlpha(d*u),a&&f.setBlendMode(e._blendMode),f.renderCanvas(t,f,n,r,s),f.setAlpha(d),f.setScrollFactor(m,v),f.setBlendMode(p)}}}}},function(t,e,n){var r=n(2),i=n(2);r=n(550),i=n(550),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,e,n){var r=n(2),i=n(2);r=n(1213),i=n(1214),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=e.text,a=s.length;if(0!==a){var u=this.pipeline;t.setPipeline(u,e);var c=e.cropWidth>0||e.cropHeight>0;c&&(u.flush(),t.pushScissor(e.x,e.y,e.cropWidth*e.scaleX,e.cropHeight*e.scaleY));var h=u._tempMatrix1,l=u._tempMatrix2,f=u._tempMatrix3,d=u._tempMatrix4;l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(i.matrix),o?(h.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y,h.multiply(l,f)):(l.e-=i.scrollX*e.scrollFactorX,l.f-=i.scrollY*e.scrollFactorY,h.multiply(l,f));var p=e.frame,m=p.glTexture,v=p.cutX,g=p.cutY,y=m.width,b=m.height,x=e._isTinted&&e.tintFill,w=r.getTintAppendFloatAlpha(e._tintTL,i.alpha*e._alphaTL),E=r.getTintAppendFloatAlpha(e._tintTR,i.alpha*e._alphaTR),_=r.getTintAppendFloatAlpha(e._tintBL,i.alpha*e._alphaBL),S=r.getTintAppendFloatAlpha(e._tintBR,i.alpha*e._alphaBR);u.setTexture2D(m,0);var T,A,M=0,C=0,O=0,N=0,k=e.letterSpacing,R=0,P=0,I=0,D=0,L=e.scrollX,B=e.scrollY,F=e.fontData,z=F.chars,j=F.lineHeight,U=e.fontSize/F.size,Y=0,W=e._align,X=0,G=0;e.getTextBounds(!1);var V=e._bounds.lines;1===W?G=(V.longest-V.lengths[0])/2:2===W&&(G=V.longest-V.lengths[0]);for(var q=i.roundPixels,H=e.displayCallback,K=e.callbackData,$=0;$<a;$++)if(10!==(O=s.charCodeAt($))){if(T=z[O]){R=v+T.x,P=g+T.y,I=T.width,D=T.height;var J=T.xOffset+M-L,Z=T.yOffset+C-B;if(null!==A){var Q=T.kerning[N];J+=void 0!==Q?Q:0}if(M+=T.xAdvance+k,A=T,N=O,0!==I&&0!==D&&32!==O){if(U=e.fontSize/e.fontData.size,Y=0,H){K.color=0,K.tint.topLeft=w,K.tint.topRight=E,K.tint.bottomLeft=_,K.tint.bottomRight=S,K.index=$,K.charCode=O,K.x=J,K.y=Z,K.scale=U,K.rotation=Y,K.data=T.data;var tt=H(K);J=tt.x,Z=tt.y,U=tt.scale,Y=tt.rotation,tt.color?(w=tt.color,E=tt.color,_=tt.color,S=tt.color):(w=tt.tint.topLeft,E=tt.tint.topRight,_=tt.tint.bottomLeft,S=tt.tint.bottomRight),w=r.getTintAppendFloatAlpha(w,i.alpha*e._alphaTL),E=r.getTintAppendFloatAlpha(E,i.alpha*e._alphaTR),_=r.getTintAppendFloatAlpha(_,i.alpha*e._alphaBL),S=r.getTintAppendFloatAlpha(S,i.alpha*e._alphaBR)}J*=U,Z*=U,J-=e.displayOriginX,Z-=e.displayOriginY,J+=G,d.applyITRS(J,Z,Y,U,U),f.multiply(d,l);var et=R/y,nt=P/b,rt=(R+I)/y,it=(P+D)/b,ot=I,st=D,at=l.e,ut=l.f,ct=st*l.c+l.e,ht=st*l.d+l.f,lt=ot*l.a+st*l.c+l.e,ft=ot*l.b+st*l.d+l.f,dt=ot*l.a+l.e,pt=ot*l.b+l.f;q&&(at=Math.round(at),ut=Math.round(ut),ct=Math.round(ct),ht=Math.round(ht),lt=Math.round(lt),ft=Math.round(ft),dt=Math.round(dt),pt=Math.round(pt)),u.batchQuad(at,ut,ct,ht,lt,ft,dt,pt,et,nt,rt,it,w,E,_,S,x,m,0)}}}else X++,1===W?G=(V.longest-V.lengths[X])/2:2===W&&(G=V.longest-V.lengths[X]),M=0,C+=j,A=null;c&&(u.flush(),t.popScissor())}}},function(t,e,n){var r=n(52);t.exports=function(t,e,n,i,o){var s=e.text,a=s.length,u=t.currentContext;if(0!==a&&r(t,u,e,i,o)){var c=e.frame,h=e.displayCallback,l=e.callbackData,f=i.scrollX*e.scrollFactorX,d=i.scrollY*e.scrollFactorY,p=e.fontData.chars,m=e.fontData.lineHeight,v=0,g=0,y=0,b=0,x=null,w=0,E=0,_=0,S=0,T=0,A=0,M=null,C=0,O=e.frame.source.image,N=c.cutX,k=c.cutY,R=0,P=e.fontSize/e.fontData.size;e.cropWidth>0&&e.cropHeight>0&&(u.beginPath(),u.rect(0,0,e.cropWidth,e.cropHeight),u.clip());for(var I=0;I<a;++I)if(P=e.fontSize/e.fontData.size,R=0,10!==(b=s.charCodeAt(I))){if(x=p[b]){if(w=N+x.x,E=k+x.y,_=x.width,S=x.height,T=y+x.xOffset+v-e.scrollX,A=x.yOffset+g-e.scrollY,null!==M){var D=x.kerning[C];T+=void 0!==D?D:0}if(h){l.index=I,l.charCode=b,l.x=T,l.y=A,l.scale=P,l.rotation=R,l.data=x.data;var L=h(l);T=L.x,A=L.y,P=L.scale,R=L.rotation}T*=P,A*=P,T-=f,A-=d,i.roundPixels&&(T=Math.round(T),A=Math.round(A)),u.save(),u.translate(T,A),u.rotate(R),u.scale(P,P),u.drawImage(O,w,E,_,S,0,0,_,S),u.restore(),v+=x.xAdvance,y+=1,M=x,C=b}}else v=0,y=0,g+=m,M=null;u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1216),i=n(1217),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r,i){var o=t.currentPipeline;t.clearPipeline();var s=t._tempMatrix1,a=t._tempMatrix2,u=t._tempMatrix3;a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),s.copyFrom(r.matrix),i?(s.multiplyWithOffset(i,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),a.e=e.x,a.f=e.y,s.multiply(a,u)):(a.e-=r.scrollX*e.scrollFactorX,a.f-=r.scrollY*e.scrollFactorY,s.multiply(a,u)),e.render.call(e,t,r,u),t.rebindPipeline(o)}},function(t,e){},function(t,e,n){var r=n(2),i=n(2);r=n(1219),i=n(555),i=n(555),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(318),i=n(21),o=function(t,e,n){this.x=t,this.y=e,this.width=n},s=function(t,e,n){this.points=[],this.pointsLength=1,this.points[0]=new o(t,e,n)},a=[];t.exports=function(t,e,n,u,c){if(0!==e.commandBuffer.length){var h=this.pipeline;t.setPipeline(h,e);var l=e._tempMatrix1,f=e._tempMatrix2,d=e._tempMatrix3;d.loadIdentity(),f.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),l.copyFrom(u.matrix),c?(l.multiplyWithOffset(c,-u.scrollX*e.scrollFactorX,-u.scrollY*e.scrollFactorY),f.e=e.x,f.f=e.y,l.multiply(f)):(f.e-=u.scrollX*e.scrollFactorX,f.f-=u.scrollY*e.scrollFactorY,l.multiply(f));for(var p=e.commandBuffer,m=u.alpha*e.alpha,v=1,g=h.fillTint,y=h.strokeTint,b=0,x=0,w=0,E=2*Math.PI,_=[],S=0,T=!1,A=null,M=i.getTintAppendFloatAlphaAndSwap,C=t.blankTexture.glTexture,O=0;O<p.length;O++)switch(p[O]){case r.BEGIN_PATH:_.length=0,A=null,T=!0;break;case r.CLOSE_PATH:T=!1,A&&A.points.length&&A.points.push(A.points[0]);break;case r.FILL_PATH:for(S=0;S<_.length;S++)h.setTexture2D(C),h.batchFillPath(_[S].points,d,l);break;case r.STROKE_PATH:for(S=0;S<_.length;S++)h.setTexture2D(C),h.batchStrokePath(_[S].points,v,T,d,l);break;case r.LINE_STYLE:v=p[++O];var N=M(p[++O],p[++O]*m);y.TL=N,y.TR=N,y.BL=N,y.BR=N;break;case r.FILL_STYLE:var k=M(p[++O],p[++O]*m);g.TL=k,g.TR=k,g.BL=k,g.BR=k;break;case r.GRADIENT_FILL_STYLE:var R=p[++O]*m;g.TL=M(p[++O],R),g.TR=M(p[++O],R),g.BL=M(p[++O],R),g.BR=M(p[++O],R);break;case r.GRADIENT_LINE_STYLE:v=p[++O];var P=p[++O]*m;y.TL=M(p[++O],P),y.TR=M(p[++O],P),y.BL=M(p[++O],P),y.BR=M(p[++O],P);break;case r.ARC:var I=0,D=p[++O],L=p[++O],B=p[++O],F=p[++O],z=p[++O],j=p[++O],U=p[++O];for(z-=F,j?z<-E?z=-E:z>0&&(z=z%E-E):z>E?z=E:z<0&&(z=E+z%E),null===A&&(A=new s(D+Math.cos(F)*B,L+Math.sin(F)*B,v),_.push(A),I+=.01);I<1+U;)w=z*I+F,b=D+Math.cos(w)*B,x=L+Math.sin(w)*B,A.points.push(new o(b,x,v)),I+=.01;w=z+F,b=D+Math.cos(w)*B,x=L+Math.sin(w)*B,A.points.push(new o(b,x,v));break;case r.FILL_RECT:h.setTexture2D(C),h.batchFillRect(p[++O],p[++O],p[++O],p[++O],d,l);break;case r.FILL_TRIANGLE:h.setTexture2D(C),h.batchFillTriangle(p[++O],p[++O],p[++O],p[++O],p[++O],p[++O],d,l);break;case r.STROKE_TRIANGLE:h.setTexture2D(C),h.batchStrokeTriangle(p[++O],p[++O],p[++O],p[++O],p[++O],p[++O],v,d,l);break;case r.LINE_TO:null!==A?A.points.push(new o(p[++O],p[++O],v)):(A=new s(p[++O],p[++O],v),_.push(A));break;case r.MOVE_TO:A=new s(p[++O],p[++O],v),_.push(A);break;case r.SAVE:a.push(d.copyToArray());break;case r.RESTORE:d.copyFromArray(a.pop());break;case r.TRANSLATE:D=p[++O],L=p[++O],d.translate(D,L);break;case r.SCALE:D=p[++O],L=p[++O],d.scale(D,L);break;case r.ROTATE:d.rotate(p[++O]);break;case r.SET_TEXTURE:var Y=p[++O],W=p[++O];h.currentFrame=Y,h.setTexture2D(Y.glTexture,0),h.tintEffect=W,C=Y.glTexture;break;case r.CLEAR_TEXTURE:h.currentFrame=t.blankTexture,h.tintEffect=2,C=t.blankTexture.glTexture}}}},function(t,e,n){var r=n(2),i=n(2);r=n(1221),i=n(1222),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r,i){this.pipeline.batchSprite(e,r,i)}},function(t,e){t.exports=function(t,e,n,r,i){t.batchSprite(e,e.frame,r,i)}},function(t,e,n){var r=n(2),i=n(2);r=n(1224),i=n(1225),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r,i){this.pipeline.batchSprite(e,r,i)}},function(t,e){t.exports=function(t,e,n,r,i){t.batchSprite(e,e.frame,r,i)}},function(t,e,n){t.exports={GravityWell:n(556),Particle:n(557),ParticleEmitter:n(558),ParticleEmitterManager:n(320),Zones:n(1231)}},function(t,e,n){var r=n(0),i=n(479),o=n(182),s=n(1),a=n(111),u=new r({initialize:function(t,e,n,r){void 0===r&&(r=!1),this.propertyKey=e,this.propertyValue=n,this.defaultValue=n,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=r,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=s(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if("number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&(this.has(t,"random")||this.hasBoth(t,"start","end")||this.hasBoth(t,"min","max"))){this.start=this.has(t,"start")?t.start:t.min,this.end=this.has(t,"end")?t.end:t.max;var n=this.hasBoth(t,"min","max")||!!t.random;if(n){var r=t.random;Array.isArray(r)&&(this.start=r[0],this.end=r[1]),this.onEmit=this.randomRangedValueEmit}if(this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var i=this.has(t,"ease")?t.ease:"Linear";this.ease=o(i),n||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,n){return t.hasOwnProperty(e)&&t.hasOwnProperty(n)},hasEither:function(t,e,n){return t.hasOwnProperty(e)||t.hasOwnProperty(n)},defaultEmit:function(t,e,n){return n},defaultUpdate:function(t,e,n,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var n=i(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=n),n},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=a(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var n=t.data[e];n.min=this.start,n.max=this.end}return this.start},easeValueUpdate:function(t,e,n){var r=t.data[e];return(r.max-r.min)*this.ease(n)+r.min}});t.exports=u},function(t,e,n){var r=n(2),i=n(2);r=n(1229),i=n(1230),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=e.emitters.list,a=s.length;if(0!==a){var u=this.pipeline,c=u._tempMatrix1.copyFrom(i.matrix),h=u._tempMatrix2,l=u._tempMatrix3,f=u._tempMatrix4.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);c.multiply(f),t.setPipeline(u);var d=i.roundPixels,p=e.defaultFrame.glTexture,m=r.getTintAppendFloatAlphaAndSwap;u.setTexture2D(p,0);for(var v=0;v<a;v++){var g=s[v],y=g.alive,b=y.length;if(g.visible&&0!==b){var x=i.scrollX*g.scrollFactorX,w=i.scrollY*g.scrollFactorY;o&&(c.multiplyWithOffset(o,-x,-w),x=0,w=0),t.setBlendMode(g.blendMode)&&u.setTexture2D(p,0),g.mask&&(g.mask.preRenderWebGL(t,g,i),u.setTexture2D(p,0));for(var E=0;E<b;E++){var _=y[E],S=_.alpha*i.alpha;if(!(S<=0)){var T=_.frame,A=-T.halfWidth,M=-T.halfHeight,C=A+T.width,O=M+T.height;l.applyITRS(0,0,_.rotation,_.scaleX,_.scaleY),l.e=_.x-x,l.f=_.y-w,c.multiply(l,h);var N=h.getX(A,M),k=h.getY(A,M),R=h.getX(A,O),P=h.getY(A,O),I=h.getX(C,O),D=h.getY(C,O),L=h.getX(C,M),B=h.getY(C,M);d&&(N=Math.round(N),k=Math.round(k),R=Math.round(R),P=Math.round(P),I=Math.round(I),D=Math.round(D),L=Math.round(L),B=Math.round(B));var F=m(_.tint,S);u.batchQuad(N,k,R,P,I,D,L,B,T.u0,T.v0,T.u1,T.v1,F,F,F,F,0,p,0)}}g.mask&&(g.mask.postRenderWebGL(t,i),u.setTexture2D(p,0))}}}}},function(t,e){t.exports=function(t,e,n,r,i){var o=e.emitters.list,s=o.length;if(0!==s){var a=t._tempMatrix1.copyFrom(r.matrix),u=t._tempMatrix2,c=t._tempMatrix3,h=t._tempMatrix4.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);a.multiply(h);var l=r.roundPixels,f=t.currentContext;f.save();for(var d=0;d<s;d++){var p=o[d],m=p.alive,v=m.length;if(p.visible&&0!==v){var g=r.scrollX*p.scrollFactorX,y=r.scrollY*p.scrollFactorY;i&&(a.multiplyWithOffset(i,-g,-y),g=0,y=0),f.globalCompositeOperation=t.blendModes[p.blendMode];for(var b=0;b<v;b++){var x=m[b],w=x.alpha*r.alpha;if(!(w<=0)){var E=x.frame,_=E.canvasData,S=-E.halfWidth,T=-E.halfHeight;c.applyITRS(0,0,x.rotation,x.scaleX,x.scaleY),c.e=x.x-g,c.f=x.y-y,a.multiply(c,u),f.globalAlpha=w,f.save(),u.copyToContext(f),l&&(S=Math.round(S),T=Math.round(T)),f.drawImage(E.source.image,_.x,_.y,_.width,_.height,S,T,_.width,_.height),f.restore()}}}}f.restore()}}},function(t,e,n){t.exports={DeathZone:n(559),EdgeZone:n(560),RandomZone:n(562)}},function(t,e,n){var r=n(2),i=n(2);r=n(1233),i=n(1234),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=e.frame,a=s.width,u=s.height,c=r.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,s.glTexture,a,u,e.x,e.y,a,u,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,u,c(e._tintTL,i.alpha*e._alphaTL),c(e._tintTR,i.alpha*e._alphaTR),c(e._tintBL,i.alpha*e._alphaBL),c(e._tintBR,i.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,i,o),t.setBlankTexture(!0)}},function(t,e){t.exports=function(t,e,n,r,i){t.batchSprite(e,e.frame,r,i)}},function(t,e,n){var r=n(1236),i=n(37),o={Parse:n(1237)};o=i(!1,o,r),t.exports=o},function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,e,n){var r=n(14);t.exports=function(t,e){var n=e.width,i=e.height,o=Math.floor(n/2),s=Math.floor(i/2),a=r(e,"chars","");if(""!==a){var u=r(e,"image",""),c=r(e,"offset.x",0),h=r(e,"offset.y",0),l=r(e,"spacing.x",0),f=r(e,"spacing.y",0),d=r(e,"lineSpacing",0),p=r(e,"charsPerRow",null);null===p&&(p=t.sys.textures.getFrame(u).width/n)>a.length&&(p=a.length);for(var m=c,v=h,g={retroFont:!0,font:u,size:n,lineHeight:i+d,chars:{}},y=0,b=0;b<a.length;b++){var x=a.charCodeAt(b);g.chars[x]={x:m,y:v,width:n,height:i,centerX:o,centerY:s,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{}},++y===p?(y=0,m=c,v+=i+f):m+=n+l}return{data:g,frame:null,texture:u}}}},function(t,e){t.exports=function(t,e,n){var r=t.canvas,i=t.context,o=t.style,s=[],a=0,u=n.length;o.maxLines>0&&o.maxLines<n.length&&(u=o.maxLines),o.syncFont(r,i);for(var c=0;c<u;c++){var h=o.strokeThickness;h+=i.measureText(n[c]).width,o.wordWrap&&(h-=i.measureText(" ").width),s[c]=Math.ceil(h),a=Math.max(a,s[c])}var l=e.fontSize+o.strokeThickness,f=l*u,d=t.lineSpacing;return u>1&&(f+=d*(u-1)),{width:a,height:f,lines:u,lineWidths:s,lineSpacing:d,lineHeight:l}}},function(t,e,n){var r=n(2),i=n(2);r=n(1240),i=n(1241),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){if(0!==e.width&&0!==e.height){var s=e.frame,a=s.width,u=s.height,c=r.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,s.glTexture,a,u,e.x,e.y,a/e.style.resolution,u/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,u,c(e._tintTL,i.alpha*e._alphaTL),c(e._tintTR,i.alpha*e._alphaTR),c(e._tintBL,i.alpha*e._alphaBL),c(e._tintBR,i.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,i,o)}}},function(t,e){t.exports=function(t,e,n,r,i){0!==e.width&&0!==e.height&&t.batchSprite(e,e.frame,r,i)}},function(t,e,n){var r=n(0),i=n(25),o=n(14),s=n(1243),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},u=new r({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(e,!1,!0);var n=o(e,"metrics",!1);this.metrics=n?{ascent:o(n,"ascent",0),descent:o(n,"descent",0),fontSize:o(n,"fontSize",0)}:s(this)},setStyle:function(t,e,n){for(var r in void 0===e&&(e=!0),void 0===n&&(n=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),a){var s=n?a[r][1]:this[r];this[r]="wordWrapCallback"===r||"wordWrapCallbackScope"===r?o(t,a[r][0],s):i(t,a[r][0],s)}var u=o(t,"font",null);null!==u&&this.setFont(u,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=o(t,"fill",null);return null!==c&&(this.color=c),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=s(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var n=t,r="",i="";if("string"!=typeof t)n=o(t,"fontFamily","Courier"),r=o(t,"fontSize","16px"),i=o(t,"fontStyle","");else{var s=t.split(" "),a=0;i=s.length>2?s[a++]:"",r=s[a++]||"16px",n=s[a++]||"Courier"}return n===this.fontFamily&&r===this.fontSize&&i===this.fontStyle||(this.fontFamily=n,this.fontSize=r,this.fontStyle=i,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,n,r,i,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n="#000"),void 0===r&&(r=0),void 0===i&&(i=!1),void 0===o&&(o=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=n,this.shadowBlur=r,this.shadowStroke=i,this.shadowFill=o,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in a)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=u},function(t,e,n){var r=n(51);t.exports=function(t){var e=r.create(this),n=e.getContext("2d");t.syncFont(e,n);var i=Math.ceil(n.measureText(t.testString).width*t.baselineX),o=i,s=2*o;o=o*t.baselineY|0,e.width=i,e.height=s,n.fillStyle="#f00",n.fillRect(0,0,i,s),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,o);var a={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,i,s))return a.ascent=o,a.descent=o+6,a.fontSize=a.ascent+a.descent,r.remove(e),a;var u,c,h=n.getImageData(0,0,i,s).data,l=h.length,f=4*i,d=0,p=!1;for(u=0;u<o;u++){for(c=0;c<f;c+=4)if(255!==h[d+c]){p=!0;break}if(p)break;d+=f}for(a.ascent=o-u,d=l-f,p=!1,u=s;u>o;u--){for(c=0;c<f;c+=4)if(255!==h[d+c]){p=!0;break}if(p)break;d-=f}return a.descent=u-o,a.fontSize=a.ascent+a.descent,r.remove(e),a}},function(t,e,n){var r=n(2),i=n(2);r=n(1245),i=n(1246),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){e.updateCanvas();var s=r.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,e.width,e.height,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*e.width,e.originY*e.height,0,0,e.width,e.height,s(e._tintTL,i.alpha*e._alphaTL),s(e._tintTR,i.alpha*e._alphaTR),s(e._tintBL,i.alpha*e._alphaBL),s(e._tintBR,i.alpha*e._alphaBR),e._isTinted&&e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,o)}},function(t,e){t.exports=function(t,e,n,r,i){e.updateCanvas(),t.batchSprite(e,e.frame,r,i)}},function(t,e,n){var r=n(2),i=n(2);r=n(1248),i=n(1249),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(183),i=n(128);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX,f=e._displayOriginY,d=o.alpha*e.alpha;e.isFilled&&r(a,h,e,d,l,f),e.isStroked&&i(a,e,d,l,f)}},function(t,e,n){var r=n(80),i=n(82),o=n(100),s=n(52);t.exports=function(t,e,n,a,u){var c=t.currentContext;if(s(t,c,e,a,u)){var h=e.radius;c.beginPath(),c.arc(h-e.originX*(2*h),h-e.originY*(2*h),h,r(e._startAngle),r(e._endAngle),e.anticlockwise),e.closePath&&c.closePath(),e.isFilled&&(i(c,e),c.fill()),e.isStroked&&(o(c,e),c.stroke()),c.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1251),i=n(1252),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(183),i=n(128);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX+e._curveBounds.x,f=e._displayOriginY+e._curveBounds.y,d=o.alpha*e.alpha;e.isFilled&&r(a,h,e,d,l,f),e.isStroked&&i(a,e,d,l,f)}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=e._displayOriginX+e._curveBounds.x,h=e._displayOriginY+e._curveBounds.y,l=e.pathData,f=l.length-1,d=l[0]-c,p=l[1]-h;u.beginPath(),u.moveTo(d,p),e.closePath||(f-=2);for(var m=2;m<f;m+=2){var v=l[m]-c,g=l[m+1]-h;u.lineTo(v,g)}e.closePath&&u.closePath(),e.isFilled&&(r(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1254),i=n(1255),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(183),i=n(128);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX,f=e._displayOriginY,d=o.alpha*e.alpha;e.isFilled&&r(a,h,e,d,l,f),e.isStroked&&i(a,e,d,l,f)}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=e._displayOriginX,h=e._displayOriginY,l=e.pathData,f=l.length-1,d=l[0]-c,p=l[1]-h;u.beginPath(),u.moveTo(d,p),e.closePath||(f-=2);for(var m=2;m<f;m+=2){var v=l[m]-c,g=l[m+1]-h;u.lineTo(v,g)}u.closePath(),e.isFilled&&(r(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1257),i=n(1258),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=this.pipeline,a=s._tempMatrix1,u=s._tempMatrix2,c=s._tempMatrix3;t.setPipeline(s),u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY),a.multiply(u,c),c.translate(-e._displayOriginX,-e._displayOriginY);var h,l,f=i.alpha*e.alpha,d=e.width,p=e.height,m=e.cellWidth,v=e.cellHeight,g=Math.ceil(d/m),y=Math.ceil(p/v),b=m,x=v,w=m-(g*m-d),E=v-(y*v-p),_=e.showCells,S=e.showAltCells,T=e.showOutline,A=0,M=0,C=0,O=0,N=0;if(T&&(b--,x--,w===m&&w--,E===v&&E--),_&&e.fillAlpha>0)for(h=s.fillTint,l=r.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*f),h.TL=l,h.TR=l,h.BL=l,h.BR=l,M=0;M<y;M++)for(S&&(C=M%2),A=0;A<g;A++)S&&C?C=0:(C++,O=A<g-1?b:w,N=M<y-1?x:E,s.setTexture2D(),s.batchFillRect(A*m,M*v,O,N));if(S&&e.altFillAlpha>0)for(h=s.fillTint,l=r.getTintAppendFloatAlphaAndSwap(e.altFillColor,e.altFillAlpha*f),h.TL=l,h.TR=l,h.BL=l,h.BR=l,M=0;M<y;M++)for(S&&(C=M%2),A=0;A<g;A++)!S||C?(C=0,O=A<g-1?b:w,N=M<y-1?x:E,s.setTexture2D(),s.batchFillRect(A*m,M*v,O,N)):C=1;if(T&&e.outlineFillAlpha>0){var k=s.strokeTint,R=r.getTintAppendFloatAlphaAndSwap(e.outlineFillColor,e.outlineFillAlpha*f);for(k.TL=R,k.TR=R,k.BL=R,k.BR=R,A=1;A<g;A++){var P=A*m;s.setTexture2D(),s.batchLine(P,0,P,p,1,1,1,0,!1)}for(M=1;M<y;M++){var I=M*v;s.setTexture2D(),s.batchLine(0,I,d,I,1,1,1,0,!1)}}}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=-e._displayOriginX,h=-e._displayOriginY,l=s.alpha*e.alpha,f=e.width,d=e.height,p=e.cellWidth,m=e.cellHeight,v=Math.ceil(f/p),g=Math.ceil(d/m),y=p,b=m,x=p-(v*p-f),w=m-(g*m-d),E=e.showCells,_=e.showAltCells,S=e.showOutline,T=0,A=0,M=0,C=0,O=0;if(S&&(y--,b--,x===p&&x--,w===m&&w--),E&&e.fillAlpha>0)for(r(u,e),A=0;A<g;A++)for(_&&(M=A%2),T=0;T<v;T++)_&&M?M=0:(M++,C=T<v-1?y:x,O=A<g-1?b:w,u.fillRect(c+T*p,h+A*m,C,O));if(_&&e.altFillAlpha>0)for(r(u,e,e.altFillColor,e.altFillAlpha*l),A=0;A<g;A++)for(_&&(M=A%2),T=0;T<v;T++)!_||M?(M=0,C=T<v-1?y:x,O=A<g-1?b:w,u.fillRect(c+T*p,h+A*m,C,O)):M=1;if(S&&e.outlineFillAlpha>0){for(i(u,e,e.outlineFillColor,e.outlineFillAlpha*l),T=1;T<v;T++){var N=T*p;u.beginPath(),u.moveTo(N+c,h),u.lineTo(N+c,d+h),u.stroke()}for(A=1;A<g;A++){var k=A*m;u.beginPath(),u.moveTo(c,k+h),u.lineTo(c+f,k+h),u.stroke()}}u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1260),i=n(1261),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=this.pipeline,a=s._tempMatrix1,u=s._tempMatrix2,c=s._tempMatrix3;t.setPipeline(s),u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY),a.multiply(u,c);var h,l,f,d,p,m,v,g,y,b=e.width,x=e.height,w=b/2,E=b/e.projection,_=i.alpha*e.alpha;e.isFilled&&(e.showTop&&(h=r.getTintAppendFloatAlphaAndSwap(e.fillTop,_),l=c.getX(-w,-x),f=c.getY(-w,-x),d=c.getX(0,-E-x),p=c.getY(0,-E-x),m=c.getX(w,-x),v=c.getY(w,-x),g=c.getX(0,E-x),y=c.getY(0,E-x),s.setTexture2D(),s.batchQuad(l,f,d,p,m,v,g,y,0,0,1,1,h,h,h,h,2)),e.showLeft&&(h=r.getTintAppendFloatAlphaAndSwap(e.fillLeft,_),l=c.getX(-w,0),f=c.getY(-w,0),d=c.getX(0,E),p=c.getY(0,E),m=c.getX(0,E-x),v=c.getY(0,E-x),g=c.getX(-w,-x),y=c.getY(-w,-x),s.setTexture2D(),s.batchQuad(l,f,d,p,m,v,g,y,0,0,1,1,h,h,h,h,2)),e.showRight&&(h=r.getTintAppendFloatAlphaAndSwap(e.fillRight,_),l=c.getX(w,0),f=c.getY(w,0),d=c.getX(0,E),p=c.getY(0,E),m=c.getX(0,E-x),v=c.getY(0,E-x),g=c.getX(w,-x),y=c.getY(w,-x),s.setTexture2D(),s.batchQuad(l,f,d,p,m,v,g,y,0,0,1,1,h,h,h,h,2)))}},function(t,e,n){var r=n(82),i=n(52);t.exports=function(t,e,n,o,s){var a=t.currentContext;if(i(t,a,e,o,s)&&e.isFilled){var u=e.width,c=e.height,h=u/2,l=u/e.projection;e.showTop&&(r(a,e,e.fillTop),a.beginPath(),a.moveTo(-h,-c),a.lineTo(0,-l-c),a.lineTo(h,-c),a.lineTo(h,-1),a.lineTo(0,l-1),a.lineTo(-h,-1),a.lineTo(-h,-c),a.fill()),e.showLeft&&(r(a,e,e.fillLeft),a.beginPath(),a.moveTo(-h,0),a.lineTo(0,l),a.lineTo(0,l-c),a.lineTo(-h,-c),a.lineTo(-h,0),a.fill()),e.showRight&&(r(a,e,e.fillRight),a.beginPath(),a.moveTo(h,0),a.lineTo(0,l),a.lineTo(0,l-c),a.lineTo(h,-c),a.lineTo(h,0),a.fill()),a.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1263),i=n(1264),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=this.pipeline,a=s._tempMatrix1,u=s._tempMatrix2,c=s._tempMatrix3;t.setPipeline(s),u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY),a.multiply(u,c);var h=e.width,l=e.height,f=h/2,d=h/e.projection,p=e.isReversed,m=i.alpha*e.alpha;if(e.isFilled){var v,g,y,b,x,w,E;if(e.showTop&&p){v=r.getTintAppendFloatAlphaAndSwap(e.fillTop,m),g=c.getX(-f,-l),y=c.getY(-f,-l),b=c.getX(0,-d-l),x=c.getY(0,-d-l),w=c.getX(f,-l),E=c.getY(f,-l);var _=c.getX(0,d-l),S=c.getY(0,d-l);s.setTexture2D(),s.batchQuad(g,y,b,x,w,E,_,S,0,0,1,1,v,v,v,v,2)}e.showLeft&&(v=r.getTintAppendFloatAlphaAndSwap(e.fillLeft,m),p?(g=c.getX(-f,-l),y=c.getY(-f,-l),b=c.getX(0,d),x=c.getY(0,d),w=c.getX(0,d-l),E=c.getY(0,d-l)):(g=c.getX(-f,0),y=c.getY(-f,0),b=c.getX(0,d),x=c.getY(0,d),w=c.getX(0,d-l),E=c.getY(0,d-l)),s.batchTri(g,y,b,x,w,E,0,0,1,1,v,v,v,2)),e.showRight&&(v=r.getTintAppendFloatAlphaAndSwap(e.fillRight,m),p?(g=c.getX(f,-l),y=c.getY(f,-l),b=c.getX(0,d),x=c.getY(0,d),w=c.getX(0,d-l),E=c.getY(0,d-l)):(g=c.getX(f,0),y=c.getY(f,0),b=c.getX(0,d),x=c.getY(0,d),w=c.getX(0,d-l),E=c.getY(0,d-l)),s.setTexture2D(),s.batchTri(g,y,b,x,w,E,0,0,1,1,v,v,v,2))}}},function(t,e,n){var r=n(82),i=n(52);t.exports=function(t,e,n,o,s){var a=t.currentContext;if(i(t,a,e,o,s)&&e.isFilled){var u=e.width,c=e.height,h=u/2,l=u/e.projection,f=e.isReversed;e.showTop&&f&&(r(a,e,e.fillTop),a.beginPath(),a.moveTo(-h,-c),a.lineTo(0,-l-c),a.lineTo(h,-c),a.lineTo(0,l-c),a.fill()),e.showLeft&&(r(a,e,e.fillLeft),a.beginPath(),f?(a.moveTo(-h,-c),a.lineTo(0,l),a.lineTo(0,l-c)):(a.moveTo(-h,0),a.lineTo(0,l),a.lineTo(0,l-c)),a.fill()),e.showRight&&(r(a,e,e.fillRight),a.beginPath(),f?(a.moveTo(h,-c),a.lineTo(0,l),a.lineTo(0,l-c)):(a.moveTo(h,0),a.lineTo(0,l),a.lineTo(0,l-c)),a.fill()),a.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1266),i=n(1267),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=this.pipeline,a=s._tempMatrix1,u=s._tempMatrix2;t.setPipeline(s),u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY);var c=e._displayOriginX,h=e._displayOriginY,l=i.alpha*e.alpha;if(e.isStroked){var f=s.strokeTint,d=r.getTintAppendFloatAlphaAndSwap(e.strokeColor,e.strokeAlpha*l);f.TL=d,f.TR=d,f.BL=d,f.BR=d;var p=e._startWidth,m=e._endWidth;s.setTexture2D(),s.batchLine(e.geom.x1-c,e.geom.y1-h,e.geom.x2-c,e.geom.y2-h,p,m,1,0,!1,u,a)}}},function(t,e,n){var r=n(100),i=n(52);t.exports=function(t,e,n,o,s){var a=t.currentContext;if(i(t,a,e,o,s)){var u=e._displayOriginX,c=e._displayOriginY;e.isStroked&&(r(a,e),a.beginPath(),a.moveTo(e.geom.x1-u,e.geom.y1-c),a.lineTo(e.geom.x2-u,e.geom.y2-c),a.stroke()),a.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1269),i=n(1270),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(183),i=n(128);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX,f=e._displayOriginY,d=o.alpha*e.alpha;e.isFilled&&r(a,h,e,d,l,f),e.isStroked&&i(a,e,d,l,f)}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=e._displayOriginX,h=e._displayOriginY,l=e.pathData,f=l.length-1,d=l[0]-c,p=l[1]-h;u.beginPath(),u.moveTo(d,p),e.closePath||(f-=2);for(var m=2;m<f;m+=2){var v=l[m]-c,g=l[m+1]-h;u.lineTo(v,g)}u.closePath(),e.isFilled&&(r(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1272),i=n(1273),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(128),i=n(21);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX,f=e._displayOriginY,d=o.alpha*e.alpha;if(e.isFilled){var p=a.fillTint,m=i.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*d);p.TL=m,p.TR=m,p.BL=m,p.BR=m,a.setTexture2D(),a.batchFillRect(-l,-f,e.width,e.height)}e.isStroked&&r(a,e,d,l,f)}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=e._displayOriginX,h=e._displayOriginY;e.isFilled&&(r(u,e),u.fillRect(-c,-h,e.width,e.height)),e.isStroked&&(i(u,e),u.beginPath(),u.rect(-c,-h,e.width,e.height),u.stroke()),u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1275),i=n(1276),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(183),i=n(128);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX,f=e._displayOriginY,d=o.alpha*e.alpha;e.isFilled&&r(a,h,e,d,l,f),e.isStroked&&i(a,e,d,l,f)}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=e._displayOriginX,h=e._displayOriginY,l=e.pathData,f=l.length-1,d=l[0]-c,p=l[1]-h;u.beginPath(),u.moveTo(d,p),e.closePath||(f-=2);for(var m=2;m<f;m+=2){var v=l[m]-c,g=l[m+1]-h;u.lineTo(v,g)}u.closePath(),e.isFilled&&(r(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1278),i=n(1279),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(128),i=n(21);t.exports=function(t,e,n,o,s){var a=this.pipeline,u=a._tempMatrix1,c=a._tempMatrix2,h=a._tempMatrix3;t.setPipeline(a),c.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),u.copyFrom(o.matrix),s?(u.multiplyWithOffset(s,-o.scrollX*e.scrollFactorX,-o.scrollY*e.scrollFactorY),c.e=e.x,c.f=e.y):(c.e-=o.scrollX*e.scrollFactorX,c.f-=o.scrollY*e.scrollFactorY),u.multiply(c,h);var l=e._displayOriginX,f=e._displayOriginY,d=o.alpha*e.alpha;if(e.isFilled){var p=a.fillTint,m=i.getTintAppendFloatAlphaAndSwap(e.fillColor,e.fillAlpha*d);p.TL=m,p.TR=m,p.BL=m,p.BR=m;var v=e.geom.x1-l,g=e.geom.y1-f,y=e.geom.x2-l,b=e.geom.y2-f,x=e.geom.x3-l,w=e.geom.y3-f;a.setTexture2D(),a.batchFillTriangle(v,g,y,b,x,w,c,u)}e.isStroked&&r(a,e,d,l,f)}},function(t,e,n){var r=n(82),i=n(100),o=n(52);t.exports=function(t,e,n,s,a){var u=t.currentContext;if(o(t,u,e,s,a)){var c=e._displayOriginX,h=e._displayOriginY,l=e.geom.x1-c,f=e.geom.y1-h,d=e.geom.x2-c,p=e.geom.y2-h,m=e.geom.x3-c,v=e.geom.y3-h;u.beginPath(),u.moveTo(l,f),u.lineTo(d,p),u.lineTo(m,v),u.closePath(),e.isFilled&&(r(u,e),u.fill()),e.isStroked&&(i(u,e),u.stroke()),u.restore()}}},function(t,e,n){var r=n(314);n(13).register("blitter",function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))})},function(t,e,n){var r=n(315);n(13).register("container",function(t,e,n){return this.displayList.add(new r(this.scene,t,e,n))})},function(t,e,n){var r=n(549);n(13).register("dom",function(t,e,n,i,o){var s=new r(this.scene,t,e,n,i,o);return this.displayList.add(s),this.updateList.add(s),s})},function(t,e,n){var r=n(316);n(13).register("dynamicBitmapText",function(t,e,n,i,o){return this.displayList.add(new r(this.scene,t,e,n,i,o))})},function(t,e,n){var r=n(551);n(13).register("extern",function(){var t=new r(this.scene);return this.displayList.add(t),this.updateList.add(t),t})},function(t,e,n){var r=n(317);n(13).register("graphics",function(t){return this.displayList.add(new r(this.scene,t))})},function(t,e,n){var r=n(181);n(13).register("group",function(t,e){return this.updateList.add(new r(this.scene,t,e))})},function(t,e,n){var r=n(152);n(13).register("image",function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))})},function(t,e,n){var r=n(13),i=n(320);r.register("particles",function(t,e,n){var r=new i(this.scene,t,e,n);return this.displayList.add(r),this.updateList.add(r),r})},function(t,e,n){var r=n(13),i=n(563);r.register("follower",function(t,e,n,r,o){var s=new i(this.scene,t,e,n,r,o);return this.displayList.add(s),this.updateList.add(s),s})},function(t,e,n){var r=n(13),i=n(321);r.register("renderTexture",function(t,e,n,r,o,s){return this.displayList.add(new i(this.scene,t,e,n,r,o,s))})},function(t,e,n){var r=n(13),i=n(99);r.register("sprite",function(t,e,n,r){var o=new i(this.scene,t,e,n,r);return this.displayList.add(o),this.updateList.add(o),o})},function(t,e,n){var r=n(229);n(13).register("bitmapText",function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))})},function(t,e,n){var r=n(322);n(13).register("text",function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))})},function(t,e,n){var r=n(323);n(13).register("tileSprite",function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))})},function(t,e,n){var r=n(206);n(13).register("zone",function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))})},function(t,e,n){var r=n(565),i=n(13);i.register("arc",function(t,e,n,i,o,s,a,u){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a,u))}),i.register("circle",function(t,e,n,i,o){return this.displayList.add(new r(this.scene,t,e,n,0,360,!1,i,o))})},function(t,e,n){var r=n(13),i=n(566);r.register("curve",function(t,e,n,r,o){return this.displayList.add(new i(this.scene,t,e,n,r,o))})},function(t,e,n){var r=n(567);n(13).register("ellipse",function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))})},function(t,e,n){var r=n(13),i=n(568);r.register("grid",function(t,e,n,r,o,s,a,u,c,h){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u,c,h))})},function(t,e,n){var r=n(13),i=n(569);r.register("isobox",function(t,e,n,r,o,s,a){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a))})},function(t,e,n){var r=n(13),i=n(570);r.register("isotriangle",function(t,e,n,r,o,s,a,u){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u))})},function(t,e,n){var r=n(13),i=n(571);r.register("line",function(t,e,n,r,o,s,a,u){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u))})},function(t,e,n){var r=n(13),i=n(572);r.register("polygon",function(t,e,n,r,o){return this.displayList.add(new i(this.scene,t,e,n,r,o))})},function(t,e,n){var r=n(13),i=n(577);r.register("rectangle",function(t,e,n,r,o,s){return this.displayList.add(new i(this.scene,t,e,n,r,o,s))})},function(t,e,n){var r=n(578);n(13).register("star",function(t,e,n,i,o,s,a){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a))})},function(t,e,n){var r=n(13),i=n(579);r.register("triangle",function(t,e,n,r,o,s,a,u,c,h){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u,c,h))})},function(t,e,n){var r=n(314),i=n(57),o=n(27),s=n(25);o.register("blitter",function(t,e){void 0===t&&(t={});var n=s(t,"key",null),o=s(t,"frame",null),a=new r(this.scene,0,0,n,o);return void 0!==e&&(t.add=e),i(this.scene,a,t),a})},function(t,e,n){var r=n(57),i=n(315),o=n(27),s=n(25);o.register("container",function(t,e){void 0===t&&(t={});var n=s(t,"x",0),o=s(t,"y",0),a=new i(this.scene,n,o);return void 0!==e&&(t.add=e),r(this.scene,a,t),a})},function(t,e,n){var r=n(316),i=n(57),o=n(27),s=n(25);o.register("dynamicBitmapText",function(t,e){void 0===t&&(t={});var n=s(t,"font",""),o=s(t,"text",""),a=s(t,"size",!1),u=new r(this.scene,0,0,n,o,a);return void 0!==e&&(t.add=e),i(this.scene,u,t),u})},function(t,e,n){var r=n(27),i=n(317);r.register("graphics",function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new i(this.scene,t);return t.add&&this.scene.sys.displayList.add(n),n})},function(t,e,n){var r=n(27),i=n(181);r.register("group",function(t){return new i(this.scene,null,t)})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(152);i.register("image",function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"frame",null),a=new s(this.scene,0,0,n,i);return void 0!==e&&(t.add=e),r(this.scene,a,t),a})},function(t,e,n){var r=n(27),i=n(25),o=n(1),s=n(320);r.register("particles",function(t,e){void 0===t&&(t={});var n=i(t,"key",null),r=i(t,"frame",null),a=o(t,"emitters",null),u=new s(this.scene,n,r,a);return void 0!==e&&(t.add=e),o(t,"add",!1)&&this.displayList.add(u),this.updateList.add(u),u})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(321);i.register("renderTexture",function(t,e){void 0===t&&(t={});var n=o(t,"x",0),i=o(t,"y",0),a=o(t,"width",32),u=o(t,"height",32),c=o(t,"key",void 0),h=o(t,"frame",void 0),l=new s(this.scene,n,i,a,u,c,h);return void 0!==e&&(t.add=e),r(this.scene,l,t),l})},function(t,e,n){var r=n(57),i=n(312),o=n(27),s=n(25),a=n(99);o.register("sprite",function(t,e){void 0===t&&(t={});var n=s(t,"key",null),o=s(t,"frame",null),u=new a(this.scene,0,0,n,o);return void 0!==e&&(t.add=e),r(this.scene,u,t),i(u,t),u})},function(t,e,n){var r=n(229),i=n(57),o=n(27),s=n(25),a=n(14);o.register("bitmapText",function(t,e){void 0===t&&(t={});var n=a(t,"font",""),o=s(t,"text",""),u=s(t,"size",!1),c=a(t,"align",0),h=new r(this.scene,0,0,n,o,u,c);return void 0!==e&&(t.add=e),i(this.scene,h,t),h})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(322);i.register("text",function(t,e){void 0===t&&(t={});var n=o(t,"text",""),i=o(t,"style",null),a=o(t,"padding",null);null!==a&&(i.padding=a);var u=new s(this.scene,0,0,n,i);return void 0!==e&&(t.add=e),r(this.scene,u,t),u.autoRound=o(t,"autoRound",!0),u.resolution=o(t,"resolution",1),u})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(323);i.register("tileSprite",function(t,e){void 0===t&&(t={});var n=o(t,"x",0),i=o(t,"y",0),a=o(t,"width",512),u=o(t,"height",512),c=o(t,"key",""),h=o(t,"frame",""),l=new s(this.scene,n,i,a,u,c,h);return void 0!==e&&(t.add=e),r(this.scene,l,t),l})},function(t,e,n){var r=n(27),i=n(25),o=n(206);r.register("zone",function(t){var e=i(t,"x",0),n=i(t,"y",0),r=i(t,"width",1),s=i(t,"height",r);return new o(this.scene,e,n,r,s)})},function(t,e,n){var r=n(2),i=n(2);r=n(1321),i=n(1322),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i,o){var s=this.pipeline;t.setPipeline(s,e);var a=s._tempMatrix1,u=s._tempMatrix2,c=s._tempMatrix3;u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y,a.multiply(u,c)):(u.e-=i.scrollX*e.scrollFactorX,u.f-=i.scrollY*e.scrollFactorY,a.multiply(u,c));var h=e.frame.glTexture,l=e.vertices,f=e.uv,d=e.colors,p=e.alphas,m=l.length,v=Math.floor(.5*m);s.vertexCount+v>s.vertexCapacity&&s.flush(),s.setTexture2D(h,0);for(var g=s.vertexViewF32,y=s.vertexViewU32,b=s.vertexCount*s.vertexComponentCount-1,x=0,w=e.tintFill,E=0;E<m;E+=2){var _=l[E+0],S=l[E+1],T=_*c.a+S*c.c+c.e,A=_*c.b+S*c.d+c.f;i.roundPixels&&(T=Math.round(T),A=Math.round(A)),g[++b]=T,g[++b]=A,g[++b]=f[E+0],g[++b]=f[E+1],g[++b]=w,y[++b]=r.getTintAppendFloatAlpha(d[x],i.alpha*p[x]),x++}s.vertexCount+=v}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(2),i=n(2);r=n(1324),i=n(1325),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r,i){if(e.shader){var o=t.currentPipeline;t.clearPipeline();var s=e._tempMatrix1,a=e._tempMatrix2,u=e._tempMatrix3;a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),s.copyFrom(r.matrix),i?(s.multiplyWithOffset(i,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),a.e=e.x,a.f=e.y):(a.e-=r.scrollX*e.scrollFactorX,a.f-=r.scrollY*e.scrollFactorY),s.multiply(a,u),t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(u.matrix),e.flush(),t.rebindPipeline(o)}}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(230);n(13).register("mesh",function(t,e,n,i,o,s,a,u){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a,u))})},function(t,e,n){var r=n(326);n(13).register("quad",function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))})},function(t,e,n){var r=n(327);n(13).register("shader",function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(14),a=n(230);i.register("mesh",function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"frame",null),u=s(t,"vertices",[]),c=s(t,"colors",[]),h=s(t,"alphas",[]),l=s(t,"uv",[]),f=new a(this.scene,0,0,u,l,c,h,n,i);return void 0!==e&&(t.add=e),r(this.scene,f,t),f})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(326);i.register("quad",function(t,e){void 0===t&&(t={});var n=o(t,"x",0),i=o(t,"y",0),a=o(t,"key",null),u=o(t,"frame",null),c=new s(this.scene,n,i,a,u);return void 0!==e&&(t.add=e),r(this.scene,c,t),c})},function(t,e,n){var r=n(57),i=n(27),o=n(25),s=n(327);i.register("shader",function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"x",0),a=o(t,"y",0),u=o(t,"width",128),c=o(t,"height",128),h=new s(this.scene,n,i,a,u,c);return void 0!==e&&(t.add=e),r(this.scene,h,t),h})},function(t,e,n){var r=n(0),i=n(584),o=n(29),s=n(34),a=new r({Extends:i,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(s.BOOT,this.boot,this),i.call(this)},boot:function(){var t=this.systems.events;t.on(s.SHUTDOWN,this.shutdown,this),t.on(s.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});o.register("LightsPlugin",a,"lights"),t.exports=a},function(t,e,n){var r=n(146);r.Area=n(1334),r.Circumference=n(417),r.CircumferencePoint=n(272),r.Clone=n(1335),r.Contains=n(95),r.ContainsPoint=n(1336),r.ContainsRect=n(1337),r.CopyFrom=n(1338),r.Equals=n(1339),r.GetBounds=n(1340),r.GetPoint=n(415),r.GetPoints=n(416),r.Offset=n(1341),r.OffsetPoint=n(1342),r.Random=n(273),t.exports=r},function(t,e){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,e,n){var r=n(146);t.exports=function(t){return new r(t.x,t.y,t.radius)}},function(t,e,n){var r=n(95);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,n){var r=n(95);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,n){var r=n(22);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,n){return t.x+=e,t.y+=n,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,n){var r=n(179);r.Area=n(1344),r.Circumference=n(554),r.CircumferencePoint=n(319),r.Clone=n(1345),r.Contains=n(180),r.ContainsPoint=n(1346),r.ContainsRect=n(1347),r.CopyFrom=n(1348),r.Equals=n(1349),r.GetBounds=n(1350),r.GetPoint=n(552),r.GetPoints=n(553),r.Offset=n(1351),r.OffsetPoint=n(1352),r.Random=n(281),t.exports=r},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,n){var r=n(179);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,n){var r=n(180);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,n){var r=n(180);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,n){var r=n(22);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,n){return t.x+=e,t.y+=n,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,n){var r=n(12),i=n(587);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o,s,a,u,c=t.x,h=t.y,l=t.radius,f=e.x,d=e.y,p=e.radius;if(h===d)0==(a=(s=-2*d)*s-4*(o=1)*(f*f+(u=(p*p-l*l-f*f+c*c)/(2*(c-f)))*u-2*f*u+d*d-p*p))?n.push(new r(u,-s/(2*o))):a>0&&(n.push(new r(u,(-s+Math.sqrt(a))/(2*o))),n.push(new r(u,(-s-Math.sqrt(a))/(2*o))));else{var m=(c-f)/(h-d),v=(p*p-l*l-f*f+c*c-d*d+h*h)/(2*(h-d));0==(a=(s=2*h*m-2*v*m-2*c)*s-4*(o=m*m+1)*(c*c+h*h+v*v-l*l-2*h*v))?(u=-s/(2*o),n.push(new r(u,v-u*m))):a>0&&(u=(-s+Math.sqrt(a))/(2*o),n.push(new r(u,v-u*m)),u=(-s-Math.sqrt(a))/(2*o),n.push(new r(u,v-u*m)))}}return n}},function(t,e,n){var r=n(328),i=n(588);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC(),u=e.getLineD();r(o,t,n),r(s,t,n),r(a,t,n),r(u,t,n)}return n}},function(t,e,n){var r=n(22),i=n(231);t.exports=function(t,e,n){return void 0===n&&(n=new r),i(t,e)&&(n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.width=Math.min(t.right,e.right)-n.x,n.height=Math.min(t.bottom,e.bottom)-n.y),n}},function(t,e,n){var r=n(330),i=n(231);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o=t.getLineA(),s=t.getLineB(),a=t.getLineC(),u=t.getLineD();r(o,e,n),r(s,e,n),r(a,e,n),r(u,e,n)}return n}},function(t,e,n){var r=n(590),i=n(330);t.exports=function(t,e,n){if(void 0===n&&(n=[]),r(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC();i(o,t,n),i(s,t,n),i(a,t,n)}return n}},function(t,e,n){var r=n(328),i=n(592);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o=t.getLineA(),s=t.getLineB(),a=t.getLineC();r(o,e,n),r(s,e,n),r(a,e,n)}return n}},function(t,e,n){var r=n(595),i=n(593);t.exports=function(t,e,n){if(void 0===n&&(n=[]),r(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC();i(t,o,n),i(t,s,n),i(t,a,n)}return n}},function(t,e,n){var r=n(597);t.exports=function(t,e){if(!r(t,e))return!1;var n=Math.min(e.x1,e.x2),i=Math.max(e.x1,e.x2),o=Math.min(e.y1,e.y2),s=Math.max(e.y1,e.y2);return t.x>=n&&t.x<=i&&t.y>=o&&t.y<=s}},function(t,e){t.exports=function(t,e,n,r,i,o){return void 0===o&&(o=0),!(e>t.right+o||n<t.left-o||r>t.bottom+o||i<t.top-o)}},function(t,e,n){var r=n(109);r.Angle=n(156),r.BresenhamPoints=n(438),r.CenterOn=n(1363),r.Clone=n(1364),r.CopyFrom=n(1365),r.Equals=n(1366),r.Extend=n(1367),r.GetMidPoint=n(1368),r.GetNearestPoint=n(1369),r.GetNormal=n(1370),r.GetPoint=n(425),r.GetPoints=n(276),r.GetShortestDistance=n(1371),r.Height=n(1372),r.Length=n(110),r.NormalAngle=n(598),r.NormalX=n(1373),r.NormalY=n(1374),r.Offset=n(1375),r.PerpSlope=n(1376),r.Random=n(277),r.ReflectAngle=n(1377),r.Rotate=n(1378),r.RotateAroundPoint=n(1379),r.RotateAroundXY=n(332),r.SetToAngle=n(1380),r.Slope=n(1381),r.Width=n(1382),t.exports=r},function(t,e){t.exports=function(t,e,n){var r=e-(t.x1+t.x2)/2,i=n-(t.y1+t.y2)/2;return t.x1+=r,t.y1+=i,t.x2+=r,t.y2+=i,t}},function(t,e,n){var r=n(109);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,n){var r=n(110);t.exports=function(t,e,n){void 0===n&&(n=e);var i=r(t),o=t.x2-t.x1,s=t.y2-t.y1;return e&&(t.x1=t.x1-o/i*e,t.y1=t.y1-s/i*e),n&&(t.x2=t.x2+o/i*n,t.y2=t.y2+s/i*n),t}},function(t,e,n){var r=n(12);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.x1,o=t.y1,s=t.x2,a=t.y2,u=(s-i)*(s-i)+(a-o)*(a-o);if(0===u)return n;var c=((e.x-i)*(s-i)+(e.y-o)*(a-o))/u;return n.x=i+c*(s-i),n.y=o+c*(a-o),n}},function(t,e,n){var r=n(41),i=n(156),o=n(12);t.exports=function(t,e){void 0===e&&(e=new o);var n=i(t)-r.TAU;return e.x=Math.cos(n),e.y=Math.sin(n),e}},function(t,e){t.exports=function(t,e){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,s=(i-n)*(i-n)+(o-r)*(o-r);if(0===s)return!1;var a=((r-e.y)*(i-n)-(n-e.x)*(o-r))/s;return Math.abs(a)*Math.sqrt(s)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,n){var r=n(41),i=n(156);t.exports=function(t){return Math.cos(i(t)-r.TAU)}},function(t,e,n){var r=n(41),i=n(156);t.exports=function(t){return Math.sin(i(t)-r.TAU)}},function(t,e){t.exports=function(t,e,n){return t.x1+=e,t.y1+=n,t.x2+=e,t.y2+=n,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,n){var r=n(156),i=n(598);t.exports=function(t,e){return 2*i(e)-Math.PI-r(t)}},function(t,e,n){var r=n(332);t.exports=function(t,e){var n=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2;return r(t,n,i,e)}},function(t,e,n){var r=n(332);t.exports=function(t,e,n){return r(t,e.x,e.y,n)}},function(t,e){t.exports=function(t,e,n,r,i){return t.x1=e,t.y1=n,t.x2=e+Math.cos(r)*i,t.y2=n+Math.sin(r)*i,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,n){var r=n(12);r.Ceil=n(1384),r.Clone=n(1385),r.CopyFrom=n(1386),r.Equals=n(1387),r.Floor=n(1388),r.GetCentroid=n(1389),r.GetMagnitude=n(599),r.GetMagnitudeSq=n(600),r.GetRectangleFromPoints=n(1390),r.Interpolate=n(1391),r.Invert=n(1392),r.Negative=n(1393),r.Project=n(1394),r.ProjectUnit=n(1395),r.SetMagnitude=n(1396),t.exports=r},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,n){var r=n(12);t.exports=function(t){return new r(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(void 0===e&&(e=new r),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var n=t.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(1===n)e.x=t[0].x,e.y=t[0].y;else{for(var i=0;i<n;i++)e.x+=t[i].x,e.y+=t[i].y;e.x/=n,e.y/=n}return e}},function(t,e,n){var r=n(22);t.exports=function(t,e){void 0===e&&(e=new r);for(var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=0;a<t.length;a++){var u=t[a];u.x>n&&(n=u.x),u.x<i&&(i=u.x),u.y>o&&(o=u.y),u.y<s&&(s=u.y)}return e.x=i,e.y=s,e.width=n-i,e.height=o-s,e}},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=new r),i.x=t.x+(e.x-t.x)*n,i.y=t.y+(e.y-t.y)*n,i}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,n){var r=n(12);t.exports=function(t,e){return void 0===e&&(e=new r),e.setTo(-t.x,-t.y)}},function(t,e,n){var r=n(12),i=n(600);t.exports=function(t,e,n){void 0===n&&(n=new r);var o=(t.x*e.x+t.y*e.y)/i(e);return 0!==o&&(n.x=o*e.x,n.y=o*e.y),n}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.x*e.x+t.y*e.y;return 0!==i&&(n.x=i*e.x,n.y=i*e.y),n}},function(t,e,n){var r=n(599);t.exports=function(t,e){if(0!==t.x||0!==t.y){var n=r(t);t.x/=n,t.y/=n}return t.x*=e,t.y*=e,t}},function(t,e,n){var r=n(324);r.Clone=n(1398),r.Contains=n(325),r.ContainsPoint=n(1399),r.GetAABB=n(573),r.GetNumberArray=n(1400),r.GetPoints=n(574),r.Perimeter=n(575),r.Reverse=n(1401),r.Smooth=n(576),t.exports=r},function(t,e,n){var r=n(324);t.exports=function(t){return new r(t.points)}},function(t,e,n){var r=n(325);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var n=0;n<t.points.length;n++)e.push(t.points[n].x),e.push(t.points[n].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,n){var r=n(22);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,n){var r=n(96);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,n){var r=n(333);t.exports=function(t,e){var n=r(t);return n<r(e)?t.setSize(e.height*n,e.height):t.setSize(e.width,e.width/n),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,n){var r=n(333);t.exports=function(t,e){var n=r(t);return n>r(e)?t.setSize(e.height*n,e.height):t.setSize(e.width,e.width/n),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,n){var r=n(12);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,n){var r=n(12);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.width,e.y=t.height,e}},function(t,e,n){var r=n(291);t.exports=function(t,e,n){var i=t.centerX,o=t.centerY;return t.setSize(t.width+2*e,t.height+2*n),r(t,i,o)}},function(t,e,n){var r=n(22),i=n(231);t.exports=function(t,e,n){return void 0===n&&(n=new r),i(t,e)?(n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.width=Math.min(t.right,e.right)-n.x,n.height=Math.min(t.bottom,e.bottom)-n.y):n.setEmpty(),n}},function(t,e){t.exports=function(t,e){for(var n=t.x,r=t.right,i=t.y,o=t.bottom,s=0;s<e.length;s++)n=Math.min(n,e[s].x),r=Math.max(r,e[s].x),i=Math.min(i,e[s].y),o=Math.max(o,e[s].y);return t.x=n,t.y=i,t.width=r-n,t.height=o-i,t}},function(t,e){t.exports=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.right,e.right);t.x=n,t.width=r-n;var i=Math.min(t.y,e.y),o=Math.max(t.bottom,e.bottom);return t.y=i,t.height=o-i,t}},function(t,e){t.exports=function(t,e,n){var r=Math.min(t.x,e),i=Math.max(t.right,e);t.x=r,t.width=i-r;var o=Math.min(t.y,n),s=Math.max(t.bottom,n);return t.y=o,t.height=s-o,t}},function(t,e){t.exports=function(t,e,n){return t.x+=e,t.y+=n,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,n){var r=n(12),i=n(80);t.exports=function(t,e,n){void 0===n&&(n=new r),e=i(e);var o=Math.sin(e),s=Math.cos(e),a=s>0?t.width/2:t.width/-2,u=o>0?t.height/2:t.height/-2;return Math.abs(a*o)<Math.abs(u*s)?u=a*o/s:a=u*s/o,n.x=a+t.centerX,n.y=u+t.centerY,n}},function(t,e,n){var r=n(297),i=n(602),o=n(12);t.exports=function(t,e,n){if(void 0===n&&(n=new o),i(t,e))switch(r(0,3)){case 0:n.x=t.x+Math.random()*(e.right-t.x),n.y=t.y+Math.random()*(e.top-t.y);break;case 1:n.x=e.x+Math.random()*(t.right-e.x),n.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:n.x=t.x+Math.random()*(e.x-t.x),n.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:n.x=e.right+Math.random()*(t.right-e.right),n.y=t.y+Math.random()*(e.bottom-t.y)}return n}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=e),t.width*=e,t.height*=n,t}},function(t,e,n){var r=n(129);r.Area=n(1428),r.BuildEquilateral=n(1429),r.BuildFromPolygon=n(1430),r.BuildRight=n(1431),r.CenterOn=n(1432),r.Centroid=n(603),r.CircumCenter=n(1433),r.CircumCircle=n(1434),r.Clone=n(1435),r.Contains=n(154),r.ContainsArray=n(331),r.ContainsPoint=n(1436),r.CopyFrom=n(1437),r.Decompose=n(596),r.Equals=n(1438),r.GetPoint=n(580),r.GetPoints=n(581),r.InCenter=n(605),r.Perimeter=n(1439),r.Offset=n(604),r.Random=n(282),r.Rotate=n(1440),r.RotateAroundPoint=n(1441),r.RotateAroundXY=n(334),t.exports=r},function(t,e){t.exports=function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.x3,s=t.y3;return Math.abs(((o-e)*(i-n)-(r-e)*(s-n))/2)}},function(t,e,n){var r=n(129);t.exports=function(t,e,n){var i=n*(Math.sqrt(3)/2);return new r(t,e,t+n/2,e+i,t-n/2,e+i)}},function(t,e,n){var r=n(123),i=n(129);t.exports=function(t,e,n,o,s){void 0===e&&(e=null),void 0===n&&(n=1),void 0===o&&(o=1),void 0===s&&(s=[]);for(var a,u,c,h,l,f,d,p,m,v=r(t,e),g=0;g<v.length;g+=3)a=v[g],u=v[g+1],c=v[g+2],h=t[2*a]*n,l=t[2*a+1]*o,f=t[2*u]*n,d=t[2*u+1]*o,p=t[2*c]*n,m=t[2*c+1]*o,s.push(new i(h,l,f,d,p,m));return s}},function(t,e,n){var r=n(129);t.exports=function(t,e,n,i){return void 0===i&&(i=n),new r(t,e,t,e-i,t+n,e)}},function(t,e,n){var r=n(603),i=n(604);t.exports=function(t,e,n,o){void 0===o&&(o=r);var s=o(t),a=e-s.x,u=n-s.y;return i(t,a,u)}},function(t,e,n){var r=n(8);function i(t,e,n,r){return t*r-e*n}t.exports=function(t,e){void 0===e&&(e=new r);var n=t.x3,o=t.y3,s=t.x1-n,a=t.y1-o,u=t.x2-n,c=t.y2-o,h=2*i(s,a,u,c),l=i(a,s*s+a*a,c,u*u+c*c),f=i(s,s*s+a*a,u,u*u+c*c);return e.x=n-l/h,e.y=o+f/h,e}},function(t,e,n){var r=n(146);t.exports=function(t,e){void 0===e&&(e=new r);var n,i,o=t.x1,s=t.y1,a=t.x2,u=t.y2,c=t.x3,h=t.y3,l=a-o,f=u-s,d=c-o,p=h-s,m=l*(o+a)+f*(s+u),v=d*(o+c)+p*(s+h),g=2*(l*(h-u)-f*(c-a));if(Math.abs(g)<1e-6){var y=Math.min(o,a,c),b=Math.min(s,u,h);n=.5*(Math.max(o,a,c)-y),i=.5*(Math.max(s,u,h)-b),e.x=y+n,e.y=b+i,e.radius=Math.sqrt(n*n+i*i)}else e.x=(p*m-f*v)/g,e.y=(l*v-d*m)/g,n=e.x-o,i=e.y-s,e.radius=Math.sqrt(n*n+i*i);return e}},function(t,e,n){var r=n(129);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,n){var r=n(154);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,n){var r=n(110);t.exports=function(t){var e=t.getLineA(),n=t.getLineB(),i=t.getLineC();return r(e)+r(n)+r(i)}},function(t,e,n){var r=n(334),i=n(605);t.exports=function(t,e){var n=i(t);return r(t,n.x,n.y,e)}},function(t,e,n){var r=n(334);t.exports=function(t,e,n){return r(t,e.x,e.y,n)}},function(t,e,n){var r=n(306),i=n(37),o={CreateInteractiveObject:n(606),Events:n(98),Gamepad:n(1443),InputManager:n(521),InputPlugin:n(1455),InputPluginCache:n(232),Keyboard:n(1457),Mouse:n(1474),Pointer:n(524),Touch:n(1475)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={Axis:n(607),Button:n(608),Events:n(335),Gamepad:n(609),GamepadPlugin:n(1450),Configs:n(1451)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,n){var r=n(0),i=n(20),o=n(335),s=n(609),a=n(14),u=n(232),c=n(98),h=new r({Extends:i,initialize:function(t){i.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(c.BOOT,this.boot,this),t.pluginEvents.on(c.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,n=t.config;this.enabled=a(e,"gamepad",n.inputGamepad)&&t.device.input.gamepads,this.target=a(e,"gamepad.target",n.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function(){this.enabled&&this.startListeners(),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,e=this.target,n=function(e){!e.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(e))};this.onGamepadHandler=n,e.addEventListener("gamepadconnected",n,!1),e.addEventListener("gamepaddisconnected",n,!1),this.sceneInputPlugin.pluginEvents.on(c.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(c.UPDATE,this.update)},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,n=0;n<t.length;n++){var r=t[n];if(r){var i=r.id,o=r.index,a=e[o];if(a)a.id!==i?(a.destroy(),e[o]=new s(this,r)):a.update(r);else{var u=new s(this,r);e[o]=u,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=u):this._pad3=u:this._pad2=u:this._pad1=u}}}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},getPad:function(t){for(var e=this.gamepads,n=0;n<e.length;n++)if(e[n]&&e[n].index===t)return e[n]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),n=0;n<t;n++){var r=e[n],i=this.getPad(r.gamepad.index);"gamepadconnected"===r.type?this.emit(o.CONNECTED,i,r):"gamepaddisconnected"===r.type&&this.emit(o.DISCONNECTED,i,r)}}},shutdown:function(){this.stopListeners(),this.disconnectAll(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});u.register("GamepadPlugin",h,"gamepad","gamepad","inputGamepad"),t.exports=h},function(t,e,n){t.exports={DUALSHOCK_4:n(1452),SNES_USB:n(1453),XBOX_360:n(1454)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,n){var r=n(146),i=n(95),o=n(0),s=n(306),a=n(606),u=n(1456),c=n(112),h=n(179),l=n(180),f=n(98),d=n(20),p=n(1),m=n(232),v=n(16),g=n(29),y=n(22),b=n(96),x=n(34),w=n(129),E=n(154),_=new o({Extends:d,initialize:function(t){d.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new d,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(x.BOOT,this.boot,this),t.sys.events.on(x.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(x.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var t=this.systems.events;t.on(x.TRANSITION_START,this.transitionIn,this),t.on(x.TRANSITION_OUT,this.transitionOut,this),t.on(x.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(x.PRE_UPDATE,this.preUpdate,this),t.once(x.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(t){this.isActive()&&this.emit(f.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(f.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,n=t.length,r=e.length;if(0!==n||0!==r){for(var i=this._list,o=0;o<n;o++){var s=t[o],a=i.indexOf(s);a>-1&&(i.splice(a,1),this.clear(s,!0))}t.length=0,this._pendingRemoval.length=0,this._list=i.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,t,e),0===this._list.length||this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var n=this.pollRate;if(-1===n)return!1;if(n>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}for(var r=this.manager,i=r.pointers,o=r.pointersTotal,s=!1,a=0;a<o;a++){var u=0,c=i[a];this._tempZones=[],this._temp=this.hitTestPointer(c),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),u+=this.processOverOutEvents(c),this.processDragThresholdEvent(c),u>0&&(s=!0)}return s},update:function(t,e){if(!this.isActive())return!1;for(var n=e.length,r=!1,i=0;i<n;i++){var o=0,a=e[i];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case s.MOUSE_DOWN:o+=this.processDragDownEvent(a),o+=this.processDownEvents(a),o+=this.processOverOutEvents(a);break;case s.MOUSE_UP:o+=this.processDragUpEvent(a),o+=this.processUpEvents(a),o+=this.processOverOutEvents(a);break;case s.TOUCH_START:o+=this.processDragDownEvent(a),o+=this.processDownEvents(a),o+=this.processOverEvents(a);break;case s.TOUCH_END:case s.TOUCH_CANCEL:o+=this.processDragUpEvent(a),o+=this.processUpEvents(a),o+=this.processOutEvents(a);break;case s.MOUSE_MOVE:case s.TOUCH_MOVE:o+=this.processDragMoveEvent(a),o+=this.processMoveEvents(a),o+=this.processOverOutEvents(a);break;case s.MOUSE_WHEEL:o+=this.processWheelEvent(a)}o>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(t,e){void 0===e&&(e=!1);var n=t.input;if(n){e||this.queueForRemoval(t),n.gameObject=void 0,n.target=void 0,n.hitArea=void 0,n.hitAreaCallback=void 0,n.callbackContext=void 0,this.manager.resetCursor(n),t.input=null;var r=this._draggable.indexOf(t);return r>-1&&this._draggable.splice(r,1),(r=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(r,1),(r=this._over[0].indexOf(t))>-1&&this._over[0].splice(r,1),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,n,r){return void 0===r&&(r=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,n),t.input&&r&&!t.input.dropZone&&(t.input.dropZone=r),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),n=0;n<e.length;n++){for(var r=e[n],i=this.manager.hitTest(t,this._list,r),o=0;o<i.length;o++){var s=i[o];s.input.dropZone&&this._tempZones.push(s)}if(i.length>0)return t.camera=r,i}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,n=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var o=!1,s=0;s<n.length;s++){var a=n[s];if(a.input){if(e++,a.emit(f.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,i),r.cancelled||!a.input){o=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,t,a,i),r.cancelled||!a.input){o=!0;break}}}return o||(t.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,t,n):this.emit(f.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var n=!1,r=this.dragTimeThreshold,i=this.dragDistanceThreshold;if(i>0&&c(t.x,t.y,t.downX,t.downY)>=i?n=!0:r>0&&e>=t.downTime+r&&(n=!0),n)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],n=0;n<e.length;n++){var r=e[n],i=r.input;i.dragState=2,i.dragStartX=r.x,i.dragStartY=r.y,i.dragStartXGlobal=t.x,i.dragStartYGlobal=t.y,i.dragX=i.dragStartXGlobal-i.dragStartX,i.dragY=i.dragStartYGlobal-i.dragStartY,r.emit(f.GAMEOBJECT_DRAG_START,t,i.dragX,i.dragY),this.emit(f.DRAG_START,t,r)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var n=[],r=0;r<e.length;r++){var i=e[r];i.input.draggable&&0===i.input.dragState&&n.push(i)}return 0===n.length?(this.setDragState(t,0),0):(n.length>1&&(this.sortGameObjects(n),this.topOnly&&n.splice(1)),this._drag[t.id]=n,0===this.dragDistanceThreshold||0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(4!==this.getDragState(t))return 0;for(var e=this._tempZones,n=this._drag[t.id],r=0;r<n.length;r++){var i,o,s=n[r],a=s.input,u=a.target;if(u){var c=e.indexOf(u);0===c?(s.emit(f.GAMEOBJECT_DRAG_OVER,t,u),this.emit(f.DRAG_OVER,t,s,u)):c>0?(s.emit(f.GAMEOBJECT_DRAG_LEAVE,t,u),this.emit(f.DRAG_LEAVE,t,s,u),a.target=e[0],u=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,u),this.emit(f.DRAG_ENTER,t,s,u)):(s.emit(f.GAMEOBJECT_DRAG_LEAVE,t,u),this.emit(f.DRAG_LEAVE,t,s,u),e[0]?(a.target=e[0],u=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,u),this.emit(f.DRAG_ENTER,t,s,u)):a.target=null)}else!u&&e[0]&&(a.target=e[0],u=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,u),this.emit(f.DRAG_ENTER,t,s,u));if(s.parentContainer){var h=t.x-a.dragStartXGlobal,l=t.y-a.dragStartYGlobal,d=s.getParentRotation(),p=h*Math.cos(d)+l*Math.sin(d),m=l*Math.cos(d)-h*Math.sin(d);i=p+a.dragStartX,o=m+a.dragStartY}else i=t.x-a.dragX,o=t.y-a.dragY;s.emit(f.GAMEOBJECT_DRAG,t,i,o),this.emit(f.DRAG,t,s,i,o)}return n.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],n=0;n<e.length;n++){var r=e[n],i=r.input;if(i&&2===i.dragState){i.dragState=0,i.dragX=i.localX-r.displayOriginX,i.dragY=i.localY-r.displayOriginY;var o=!1,s=i.target;s&&(r.emit(f.GAMEOBJECT_DROP,t,s),this.emit(f.DROP,t,r,s),i.target=null,o=!0),r.input&&(r.emit(f.GAMEOBJECT_DRAG_END,t,i.dragX,i.dragY,o),this.emit(f.DRAG_END,t,r,o))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,n=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var o=!1,s=0;s<n.length;s++){var a=n[s];if(a.input){if(e++,a.emit(f.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,i),r.cancelled||!a.input){o=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,t,a,i),r.cancelled||!a.input){o=!0;break}if(this.topOnly)break}}return o||this.emit(f.POINTER_MOVE,t,n),e},processWheelEvent:function(t){var e=0,n=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var o=!1,s=t.deltaX,a=t.deltaY,u=t.deltaZ,c=0;c<n.length;c++){var h=n[c];if(h.input){if(e++,h.emit(f.GAMEOBJECT_POINTER_WHEEL,t,s,a,u,i),r.cancelled||!h.input){o=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,t,h,s,a,u,i),r.cancelled||!h.input){o=!0;break}}}return o||this.emit(f.POINTER_WHEEL,t,n,s,a,u),e},processOverEvents:function(t){var e=this._temp,n=0,r=e.length,i=[];if(r>0){var o=this.manager,s=this._eventData,a=this._eventContainer;s.cancelled=!1;for(var u=!1,c=0;c<r;c++){var h=e[c];if(h.input){if(i.push(h),o.setCursor(h.input),h.emit(f.GAMEOBJECT_POINTER_OVER,t,h.input.localX,h.input.localY,a),n++,s.cancelled||!h.input){u=!0;break}if(this.emit(f.GAMEOBJECT_OVER,t,h,a),s.cancelled||!h.input){u=!0;break}}}u||this.emit(f.POINTER_OVER,t,i)}return this._over[t.id]=i,n},processOutEvents:function(t){var e=this._over[t.id],n=0,r=e.length;if(r>0){var i=this.manager,o=this._eventData,s=this._eventContainer;o.cancelled=!1;var a=!1;this.sortGameObjects(e);for(var u=0;u<r;u++){var c=e[u];for(u=0;u<r;u++)if((c=e[u]).input){if(i.resetCursor(c.input),c.emit(f.GAMEOBJECT_POINTER_OUT,t,s),n++,o.cancelled||!c.input){a=!0;break}if(this.emit(f.GAMEOBJECT_OUT,t,c,s),o.cancelled||!c.input){a=!0;break}}a||this.emit(f.POINTER_OUT,t,e)}this._over[t.id]=[]}return n},processOverOutEvents:function(t){var e,n,r=this._temp,i=[],o=[],s=[],a=this._over[t.id],u=this._drag[t.id],c=this.manager;for(e=0;e<a.length;e++)n=a[e],-1===r.indexOf(n)&&-1===u.indexOf(n)?i.push(n):s.push(n);for(e=0;e<r.length;e++)n=r[e],-1===a.indexOf(n)&&o.push(n);var h=i.length,l=0,d=this._eventData,p=this._eventContainer;d.cancelled=!1;var m=!1;if(h>0){for(this.sortGameObjects(i),e=0;e<h;e++)if((n=i[e]).input){if(c.resetCursor(n.input),n.emit(f.GAMEOBJECT_POINTER_OUT,t,p),l++,d.cancelled||!n.input){m=!0;break}if(this.emit(f.GAMEOBJECT_OUT,t,n,p),d.cancelled||!n.input){m=!0;break}}m||this.emit(f.POINTER_OUT,t,i)}if(h=o.length,d.cancelled=!1,m=!1,h>0){for(this.sortGameObjects(o),e=0;e<h;e++)if((n=o[e]).input){if(c.setCursor(n.input),n.emit(f.GAMEOBJECT_POINTER_OVER,t,n.input.localX,n.input.localY,p),l++,d.cancelled||!n.input){m=!0;break}if(this.emit(f.GAMEOBJECT_OVER,t,n,p),d.cancelled||!n.input){m=!0;break}}m||this.emit(f.POINTER_OVER,t,o)}return a=s.concat(o),this._over[t.id]=this.sortGameObjects(a),l},processUpEvents:function(t){var e=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var i=!1,o=0;o<e.length;o++){var s=e[o];if(s.input){if(s.emit(f.GAMEOBJECT_POINTER_UP,t,s.input.localX,s.input.localY,r),n.cancelled||!s.input){i=!0;break}if(this.emit(f.GAMEOBJECT_UP,t,s,r),n.cancelled||!s.input){i=!0;break}}}return i||(t.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,t,e):this.emit(f.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];r.input.draggable=e;var i=this._draggable.indexOf(r);e&&-1===i?this._draggable.push(r):!e&&i>-1&&this._draggable.splice(i,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return u(e,t)},setHitArea:function(t,e,n){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var r=!1,i=!1,o=!1,s=!1,u=!1;if(v(e)){var c=e;e=p(c,"hitArea",null),n=p(c,"hitAreaCallback",null),r=p(c,"draggable",!1),i=p(c,"dropZone",!1),o=p(c,"cursor",!1),s=p(c,"useHandCursor",!1),u=p(c,"pixelPerfect",!1);var h=p(c,"alphaTolerance",1);u&&(e={},n=this.makePixelPerfect(h)),e&&n||this.setHitAreaFromTexture(t)}else"function"!=typeof e||n||(n=e,e={});for(var l=0;l<t.length;l++){var f=t[l];if(u&&"Container"===f.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var d=f.input?f.input:a(f,e,n);d.customHitArea=!0,d.dropZone=i,d.cursor=s?"pointer":o,f.input=d,r&&this.setDraggable(f),this.queueForInsertion(f)}}return this},setHitAreaCircle:function(t,e,n,o,s){void 0===s&&(s=i);var a=new r(e,n,o);return this.setHitArea(t,a,s)},setHitAreaEllipse:function(t,e,n,r,i,o){void 0===o&&(o=l);var s=new h(e,n,r,i);return this.setHitArea(t,s,o)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=b),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n],i=r.frame,o=0,s=0;r.width?(o=r.width,s=r.height):i&&(o=i.realWidth,s=i.realHeight),"Container"!==r.type||0!==o&&0!==s?0!==o&&0!==s&&(r.input=a(r,new y(0,0,o,s),e),this.queueForInsertion(r)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,n,r,i,o){void 0===o&&(o=b);var s=new y(e,n,r,i);return this.setHitArea(t,s,o)},setHitAreaTriangle:function(t,e,n,r,i,o,s,a){void 0===a&&(a=E);var u=new w(e,n,r,i,o,s);return this.setHitArea(t,u,a)},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(t,e){if(!t.parentContainer&&!e.parentContainer)return this.displayList.getIndex(e)-this.displayList.getIndex(t);if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var n=t.getIndexList(),r=e.getIndexList(),i=Math.min(n.length,r.length),o=0;o<i;o++){var s=n[o],a=r[o];if(s!==a)return a-s}return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.systems.events;e.off(x.TRANSITION_START,this.transitionIn,this),e.off(x.TRANSITION_OUT,this.transitionOut,this),e.off(x.TRANSITION_COMPLETE,this.transitionComplete,this),e.off(x.PRE_UPDATE,this.preUpdate,this),this.manager.events.off(f.GAME_OUT,this.onGameOut,this),this.manager.events.off(f.GAME_OVER,this.onGameOver,this),e.off(x.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(x.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});g.register("InputPlugin",_,"input"),t.exports=_},function(t,e){t.exports=function(t,e){return function(n,r,i,o){var s=t.getPixelAlpha(r,i,o.texture.key,o.frame.name);return s&&s>=e}}},function(t,e,n){t.exports={Events:n(233),KeyboardManager:n(522),KeyboardPlugin:n(1465),Key:n(610),KeyCodes:n(222),KeyCombo:n(611),JustDown:n(1470),JustUp:n(1471),DownDuration:n(1472),UpDuration:n(1473)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,n){var r=n(0),i=n(20),o=n(233),s=n(60),a=n(14),u=n(98),c=n(232),h=n(610),l=n(222),f=n(611),d=n(1469),p=n(177),m=new r({Extends:i,initialize:function(t){i.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],t.pluginEvents.once(u.BOOT,this.boot,this),t.pluginEvents.on(u.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=a(t,"keyboard",!0);var e=a(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.on(u.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.on(u.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this),this.game.events.on(s.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var r={};if("string"==typeof t){t=t.split(",");for(var i=0;i<t.length;i++){var o=t[i].trim();o&&(r[o]=this.addKey(o,e,n))}}else for(var s in t)r[s]=this.addKey(t[s],e,n);return r},addKey:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var r=this.keys;if(t instanceof h){var i=r.indexOf(t);return i>-1?r[i]=t:r[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(n),t}return"string"==typeof t&&(t=l[t.toUpperCase()]),r[t]||(r[t]=new h(this,t),e&&this.addCapture(t),r[t].setEmitOnRepeat(n)),r[t]},removeKey:function(t,e){void 0===e&&(e=!1);var n,r=this.keys;if(t instanceof h){var i=r.indexOf(t);i>-1&&(n=this.keys[i],this.keys[i]=void 0)}else"string"==typeof t&&(t=l[t.toUpperCase()]);return r[t]&&(n=r[t],r[t]=void 0),n&&(n.plugin=null,e&&n.destroy()),this},createCombo:function(t,e){return new f(this,t,e)},checkDown:function(t,e){if(this.enabled&&t.isDown){var n=p(this.time-t.timeDown,e);if(n>t._tick)return t._tick=n,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var n=this.keys,r=0;r<e;r++){var i=t[r],s=i.keyCode,a=n[s],u=!1;void 0===i.cancelled&&(i.cancelled=0,i.stopImmediatePropagation=function(){i.cancelled=1},i.stopPropagation=function(){i.cancelled=-1}),-1!==i.cancelled&&("keydown"===i.type?(a&&(u=a.isDown,a.onDown(i)),i.cancelled||a&&u||(d[s]&&(this.emit(o.KEY_DOWN+d[s],i),this.emit("keydown_"+d[s],i)),i.cancelled||this.emit(o.ANY_KEY_DOWN,i))):(a&&a.onUp(i),i.cancelled||(d[s]&&(this.emit(o.KEY_UP+d[s],i),this.emit("keyup_"+d[s],i)),i.cancelled||this.emit(o.ANY_KEY_UP,i))),1===i.cancelled&&(i.cancelled=0))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.resetKeys(),this.sceneInputPlugin.manager.useQueue?this.sceneInputPlugin.pluginEvents.off(u.UPDATE,this.update,this):this.sceneInputPlugin.manager.events.off(u.MANAGER_PROCESS,this.update,this),this.game.events.off(s.BLUR,this.resetKeys),this.removeAllListeners(),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});c.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),t.exports=m},function(t,e,n){var r=n(1467);t.exports=function(t,e){if(e.matched)return!0;var n=!1,i=!1;if(t.keyCode===e.current)if(e.index>0&&e.maxKeyDelay>0){var o=e.timeLastMatched+e.maxKeyDelay;t.timeStamp<=o&&(i=!0,n=r(t,e))}else i=!0,n=r(t,e);return!i&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),n&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),n}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,n){var r=n(222),i={};for(var o in r)i[r[o]]=o;t.exports=i},function(t,e){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,e){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var n=t.plugin.game.loop.time-t.timeDown;return t.isDown&&n<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var n=t.plugin.game.loop.time-t.timeUp;return t.isUp&&n<e}},function(t,e,n){t.exports={MouseManager:n(523)}},function(t,e,n){t.exports={TouchManager:n(525)}},function(t,e,n){var r=n(35),i=n(37),o={Events:n(150),FileTypes:n(1477),File:n(38),FileTypesManager:n(17),GetURL:n(336),LoaderPlugin:n(1500),MergeXHRSettings:n(337),MultiFile:n(114),XHRLoader:n(612),XHRSettings:n(234)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={AnimationJSONFile:n(1478),AtlasJSONFile:n(1479),AtlasXMLFile:n(1480),AudioFile:n(613),AudioSpriteFile:n(1481),BinaryFile:n(1482),BitmapFontFile:n(1483),CSSFile:n(1484),GLSLFile:n(1485),HTML5AudioFile:n(614),HTMLFile:n(1486),HTMLTextureFile:n(1487),ImageFile:n(130),JSONFile:n(113),MultiAtlasFile:n(1488),MultiScriptFile:n(1489),PackFile:n(1490),PluginFile:n(1491),SceneFile:n(1492),ScenePluginFile:n(1493),ScriptFile:n(615),SpriteSheetFile:n(1494),SVGFile:n(1495),TextFile:n(616),TilemapCSVFile:n(1496),TilemapImpactFile:n(1497),TilemapJSONFile:n(1498),UnityAtlasFile:n(1499),XMLFile:n(338)}},function(t,e,n){var r=n(0),i=n(17),o=n(113),s=n(150),a=new r({Extends:o,initialize:function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.type="animationJSON"},onProcess:function(){this.loader.once(s.POST_PROCESS,this.onLoadComplete,this),o.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data),this.pendingDestroy()}});i.register("animation",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,e,r,n));return this}),t.exports=a},function(t,e,n){var r=n(0),i=n(17),o=n(1),s=n(130),a=n(16),u=n(113),c=n(114),h=new r({Extends:c,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new u(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","json"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new u(t,e,r,h);l.linkFile?c.call(this,t,"atlasjson",e,[l,f,l.linkFile]):c.call(this,t,"atlasjson",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,n),e.addToCache(),this.complete=!0}}});i.register("atlas",function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this}),t.exports=h},function(t,e,n){var r=n(0),i=n(17),o=n(1),s=n(130),a=n(16),u=n(114),c=n(338),h=new r({Extends:u,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new c(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","xml"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new c(t,e,r,h);l.linkFile?u.call(this,t,"atlasxml",e,[l,f,l.linkFile]):u.call(this,t,"atlasxml",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,n),e.addToCache(),this.complete=!0}}});i.register("atlasXML",function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this}),t.exports=h},function(t,e,n){var r=n(613),i=n(0),o=n(17),s=n(1),a=n(16),u=n(113),c=n(114),h=new i({Extends:c,initialize:function(t,e,n,i,o,h,l){if(a(e)){var f=e;e=s(f,"key"),n=s(f,"jsonURL"),i=s(f,"audioURL"),o=s(f,"audioConfig"),h=s(f,"audioXhrSettings"),l=s(f,"jsonXhrSettings")}var d;if(i){var p=r.create(t,e,i,o,h);p&&(d=new u(t,e,n,l),c.call(this,t,"audiosprite",e,[p,d]),this.config.resourceLoad=!1)}else d=new u(t,e,n,l),c.call(this,t,"audiosprite",e,[d]),this.config.resourceLoad=!0,this.config.audioConfig=o,this.config.audioXhrSettings=h},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,n=s(this.config,"audioConfig"),i=s(this.config,"audioXhrSettings"),o=r.create(this.loader,t.key,e,n,i);o&&(this.addToMultiFile(o),this.loader.addFile(o))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});o.register("audioSprite",function(t,e,n,r,i,o){var s,a=this.systems.game,u=a.config.audio,c=a.device.audio;if(u&&u.noAudio||!c.webAudio&&!c.audioData)return this;if(Array.isArray(t))for(var l=0;l<t.length;l++)(s=new h(this,t[l])).files&&this.addFile(s.files);else(s=new h(this,t,e,n,r,i,o)).files&&this.addFile(s.files);return this})},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r,i){var s="bin";if(u(e)){var c=e;e=a(c,"key"),n=a(c,"url"),r=a(c,"xhrSettings"),s=a(c,"extension",s),i=a(c,"dataType",i)}var h={type:"binary",cache:t.cacheManager.binary,extension:s,responseType:"arraybuffer",key:e,url:n,xhrSettings:r,config:{dataType:i}};o.call(this,t,h)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});s.register("binary",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r,n));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(17),o=n(1),s=n(130),a=n(16),u=n(114),c=n(313),h=n(338),l=new r({Extends:u,initialize:function(t,e,n,r,i,c){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new h(t,{key:e,url:o(d,"fontDataURL"),extension:o(d,"fontDataExtension","xml"),xhrSettings:o(d,"fontDataXhrSettings")})}else l=new s(t,e,n,i),f=new h(t,e,r,c);l.linkFile?u.call(this,t,"bitmapfont",e,[l,f,l.linkFile]):u.call(this,t,"bitmapfont",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.loader.cacheManager.bitmapFont.add(t.key,{data:c(e.data),texture:t.key,frame:null}),this.complete=!0}}});i.register("bitmapFont",function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new l(this,t[s]),this.addFile(o.files);else o=new l(this,t,e,n,r,i),this.addFile(o.files);return this}),t.exports=l},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r){var i="css";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"script",cache:!1,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("css",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=n(509),h=new r({Extends:o,initialize:function(t,e,n,r,i){var s="glsl";if(u(e)){var c=e;e=a(c,"key"),n=a(c,"url"),r=a(c,"shaderType","fragment"),i=a(c,"xhrSettings"),s=a(c,"extension",s)}else void 0===r&&(r="fragment");var h={type:"glsl",cache:t.cacheManager.shader,extension:s,responseType:"text",key:e,url:n,config:{shaderType:r},xhrSettings:i};o.call(this,t,h)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var n=this.getShaderName(e.header),r=this.getShaderType(e.header),i=this.getShaderUniforms(e.header),o=e.shader;if(this.cache.has(n)){var s=this.cache.get(n);"fragment"===r?s.fragmentSrc=o:s.vertexSrc=o,s.uniforms||(s.uniforms=i)}else"fragment"===r?this.cache.add(n,new c(n,o,"",i)):this.cache.add(n,new c(n,"",o,i));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var n=t[e].trim();if("name:"===n.substring(0,5))return n.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var n=t[e].trim();if("type:"===n.substring(0,5))return n.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},n=0;n<t.length;n++){var r=t[n].trim();if("uniform."===r.substring(0,8)){var i=r.indexOf(":");if(i){var o=r.substring(8,i);try{e[o]=JSON.parse(r.substring(i+1))}catch(t){console.warn("Invalid uniform JSON: "+o)}}}}return e},extractBlock:function(t,e){for(var n=-1,r=-1,i=-1,o=!1,s=!1,a=[],u=[],c=e;c<t.length;c++){var h=t[c].trim();if("---"===h)if(-1===n)n=c,o=!0;else{if(!o){s=!1;break}r=c,o=!1,s=!0}else o?a.push(h):s&&(u.push(h),i=c)}return o||-1===r?null:{header:a,shader:u.join("\n"),offset:i}}});s.register("glsl",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new h(this,t[i]));else this.addFile(new h(this,t,e,n,r));return this}),t.exports=h},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r){var i="html";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"text",cache:t.cacheManager.html,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("html",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r,i,s){void 0===r&&(r=512),void 0===i&&(i=512);var c="html";if(u(e)){var h=e;e=a(h,"key"),n=a(h,"url"),s=a(h,"xhrSettings"),c=a(h,"extension",c),r=a(h,"width",r),i=a(h,"height",i)}var l={type:"html",cache:t.textureManager,extension:c,responseType:"text",key:e,url:n,xhrSettings:s,config:{width:r,height:i}};o.call(this,t,l)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this.config.width,e=this.config.height,n=[];n.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),n.push('<foreignObject width="100%" height="100%">'),n.push('<body xmlns="http://www.w3.org/1999/xhtml">'),n.push(this.xhrLoader.responseText),n.push("</body>"),n.push("</foreignObject>"),n.push("</svg>");var r=[n.join("\n")],s=this;try{var a=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(t){return s.state=i.FILE_ERRORED,void s.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){o.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(s.data),s.onProcessError()},o.createObjectURL(this.data,a,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});s.register("htmlTexture",function(t,e,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,n,r,i));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(17),o=n(1),s=n(130),a=n(16),u=n(113),c=n(114),h=new r({Extends:c,initialize:function(t,e,n,r,i,s,h){if(a(e)){var l=e;e=o(l,"key"),n=o(l,"url"),s=o(l,"xhrSettings"),r=o(l,"path"),i=o(l,"baseURL"),h=o(l,"textureXhrSettings")}var f=new u(t,e,n,s);c.call(this,t,"multiatlas",e,[f]),this.config.path=r,this.config.baseURL=i,this.config.textureXhrSettings=h},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,n=this.config,r=this.loader,i=r.baseURL,a=r.path,u=r.prefix,c=o(n,"baseURL",i),h=o(n,"path",a),l=o(n,"prefix",u),f=o(n,"textureXhrSettings");r.setBaseURL(c),r.setPath(h),r.setPrefix(l);for(var d=0;d<e.length;d++){var p=e[d].image,m="_MA_"+p,v=new s(r,m,p,f);if(this.addToMultiFile(v),r.addFile(v),e[d].normalMap){var g=new s(r,m,e[d].normalMap,f);g.type="normalMap",v.setLink(g),this.addToMultiFile(g),r.addFile(g)}}r.setBaseURL(i),r.setPath(a),r.setPrefix(u)}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0];t.addToCache();for(var e=[],n=[],r=[],i=1;i<this.files.length;i++){var o=this.files[i];if("normalMap"!==o.type)for(var s=o.key.substr(4),a=o.data,u=0;u<t.data.textures.length;u++){var c=t.data.textures[u];if(c.image===s){n.push(a),e.push(c),o.linkFile&&r.push(o.linkFile.data);break}}}for(0===r.length&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,n,e,r),this.complete=!0,i=0;i<this.files.length;i++)this.files[i].pendingDestroy()}}});i.register("multiatlas",function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this}),t.exports=h},function(t,e,n){var r=n(0),i=n(17),o=n(1),s=n(16),a=n(114),u=n(615),c=new r({Extends:a,initialize:function(t,e,n,r){var i="js",c=[];if(s(e)){var h=e;e=o(h,"key"),n=o(h,"url"),r=o(h,"xhrSettings"),i=o(h,"extension",i)}Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var f=new u(t,{key:e+"_"+l.toString(),url:n[l],extension:i,xhrSettings:r});f.onProcess=function(){this.onProcessComplete()},c.push(f)}a.call(this,t,"scripts",e,c)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});i.register("scripts",function(t,e,n){var r;if(Array.isArray(t))for(var i=0;i<t.length;i++)r=new c(this,t[i]),this.addFile(r.files);else r=new c(this,t,e,n),this.addFile(r.files);return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(17),s=n(113),a=new r({Extends:s,initialize:function(t,e,n,r,i){s.call(this,t,e,n,r,i),this.type="packfile"},onProcess:function(){this.state!==i.FILE_POPULATED&&(this.state=i.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});o.register("pack",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,e,r,n));return this}),t.exports=a},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r,s,c){var h="js";if(u(e)){var l=e;e=a(l,"key"),n=a(l,"url"),c=a(l,"xhrSettings"),h=a(l,"extension",h),r=a(l,"start"),s=a(l,"mapping")}var f={type:"plugin",cache:!1,extension:h,responseType:"text",key:e,url:n,xhrSettings:c,config:{start:r,mapping:s}};o.call(this,t,f),"function"==typeof n&&(this.data=n,this.state=i.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,n=a(e,"start",!1),r=a(e,"mapping",null);if(this.state===i.FILE_POPULATED)t.install(this.key,this.data,n,r);else{this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var o=t.install(this.key,window[this.key],n,r);(n||r)&&(this.loader.systems[r]=o,this.loader.scene[r]=o)}this.onProcessComplete()}});s.register("plugin",function(t,e,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,n,r,i));return this}),t.exports=c},function(module,exports,__webpack_require__){var Class=__webpack_require__(0),CONST=__webpack_require__(35),File=__webpack_require__(38),FileTypesManager=__webpack_require__(17),GetFastValue=__webpack_require__(1),IsPlainObject=__webpack_require__(16),SceneFile=new Class({Extends:File,initialize:function(t,e,n,r){var i="js";if(IsPlainObject(e)){var o=e;e=GetFastValue(o,"key"),n=GetFastValue(o,"url"),r=GetFastValue(o,"xhrSettings"),i=GetFastValue(o,"extension",i)}var s={type:"text",cache:t.cacheManager.text,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};File.call(this,t,s)},onProcess:function(){this.state=CONST.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var code=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);");this.loader.sceneManager.add(this.key,eval(code)),this.complete=!0}});FileTypesManager.register("sceneFile",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new SceneFile(this,t[r]));else this.addFile(new SceneFile(this,t,e,n));return this}),module.exports=SceneFile},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r,s,c){var h="js";if(u(e)){var l=e;e=a(l,"key"),n=a(l,"url"),c=a(l,"xhrSettings"),h=a(l,"extension",h),r=a(l,"systemKey"),s=a(l,"sceneKey")}var f={type:"scenePlugin",cache:!1,extension:h,responseType:"text",key:e,url:n,xhrSettings:c,config:{systemKey:r,sceneKey:s}};o.call(this,t,f),"function"==typeof n&&(this.data=n,this.state=i.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,n=this.key,r=a(e,"systemKey",n),o=a(e,"sceneKey",n);this.state===i.FILE_POPULATED?t.installScenePlugin(r,this.data,o,this.loader.scene,!0):(this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(r,window[this.key],o,this.loader.scene,!0)),this.onProcessComplete()}});s.register("scenePlugin",function(t,e,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,n,r,i));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(17),o=n(130),s=new r({Extends:o,initialize:function(t,e,n,r,i){o.call(this,t,e,n,i,r),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});i.register("spritesheet",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new s(this,t[i]));else this.addFile(new s(this,t,e,n,r));return this}),t.exports=s},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=new r({Extends:o,initialize:function(t,e,n,r,i){var s="svg";if(u(e)){var c=e;e=a(c,"key"),n=a(c,"url"),r=a(c,"svgConfig",{}),i=a(c,"xhrSettings"),s=a(c,"extension",s)}var h={type:"svg",cache:t.textureManager,extension:s,responseType:"text",key:e,url:n,xhrSettings:i,config:{width:a(r,"width"),height:a(r,"height"),scale:a(r,"scale")}};o.call(this,t,h)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],n=this.config.width,r=this.config.height,s=this.config.scale;t:if(n&&r||s){var a=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],u=a.hasAttribute("viewBox"),c=parseFloat(a.getAttribute("width")),h=parseFloat(a.getAttribute("height"));if(!u&&c&&h)a.setAttribute("viewBox","0  0 "+c+" "+h);else if(u&&!c&&!h){var l=a.getAttribute("viewBox").split(/\s+|,/);c=l[2],h=l[3]}if(s){if(!c||!h)break t;n=c*s,r=h*s}a.setAttribute("width",n.toString()+"px"),a.setAttribute("height",r.toString()+"px"),e=[(new XMLSerializer).serializeToString(a)]}try{var f=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this,p=!1;this.data.onload=function(){p||o.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){p?d.onProcessError():(p=!0,o.revokeObjectURL(d.data),d.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},o.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});s.register("svg",function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,n,r));return this}),t.exports=c},function(t,e,n){var r=n(0),i=n(35),o=n(38),s=n(17),a=n(1),u=n(16),c=n(66),h=new r({Extends:o,initialize:function(t,e,n,r){var i="csv";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var h={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,h),this.tilemapFormat=c.CSV},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});s.register("tilemapCSV",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new h(this,t[r]));else this.addFile(new h(this,t,e,n));return this}),t.exports=h},function(t,e,n){var r=n(0),i=n(17),o=n(113),s=n(66),a=new r({Extends:o,initialize:function(t,e,n,r){o.call(this,t,e,n,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:s.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});i.register("tilemapImpact",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,n));return this}),t.exports=a},function(t,e,n){var r=n(0),i=n(17),o=n(113),s=n(66),a=new r({Extends:o,initialize:function(t,e,n,r){o.call(this,t,e,n,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:s.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});i.register("tilemapTiledJSON",function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,n));return this}),t.exports=a},function(t,e,n){var r=n(0),i=n(17),o=n(1),s=n(130),a=n(16),u=n(114),c=n(616),h=new r({Extends:u,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new c(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","txt"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new c(t,e,r,h);l.linkFile?u.call(this,t,"unityatlas",e,[l,f,l.linkFile]):u.call(this,t,"unityatlas",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,n),e.addToCache(),this.complete=!0}}});i.register("unityAtlas",function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this}),t.exports=h},function(t,e,n){var r=n(0),i=n(35),o=n(151),s=n(20),a=n(150),u=n(17),c=n(1),h=n(29),l=n(34),f=n(234),d=new r({Extends:s,initialize:function(t){s.call(this);var e=t.sys.game.config,n=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,u.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(c(n,"baseURL",e.loaderBaseURL)),this.setPath(c(n,"path",e.loaderPath)),this.setPrefix(c(n,"prefix",e.loaderPrefix)),this.maxParallelDownloads=c(n,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=f(c(n,"responseType",e.loaderResponseType),c(n,"async",e.loaderAsync),c(n,"user",e.loaderUser),c(n,"password",e.loaderPassword),c(n,"timeout",e.loaderTimeout)),this.crossOrigin=c(n,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new o,this.inflight=new o,this.queue=new o,this._deleteQueue=new o,this.totalFailed=0,this.totalComplete=0,this.state=i.LOADER_IDLE,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];this.keyExists(n)||(this.list.set(n),this.emit(a.ADD,n.key,n.type,this,n),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate(function(n){if(n.type===t.type&&n.key===t.key)return e=!0,!1}),!e&&this.isLoading()&&(this.inflight.iterate(function(n){if(n.type===t.type&&n.key===t.key)return e=!0,!1}),this.queue.iterate(function(n){if(n.type===t.type&&n.key===t.key)return e=!0,!1})),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var n=0,r=this.baseURL,i=this.path,o=this.prefix;for(var s in t){var a=t[s],u=c(a,"baseURL",r),h=c(a,"path",i),l=c(a,"prefix",o),f=c(a,"files",null),d=c(a,"defaultType","void");if(Array.isArray(f)){this.setBaseURL(u),this.setPath(h),this.setPrefix(l);for(var p=0;p<f.length;p++){var m=f[p],v=m.hasOwnProperty("type")?m.type:d;this[v]&&(this[v](m),n++)}}}return this.setBaseURL(r),this.setPath(i),this.setPrefix(o),n>0},isLoading:function(){return this.state===i.LOADER_LOADING||this.state===i.LOADER_PROCESSING},isReady:function(){return this.state===i.LOADER_IDLE||this.state===i.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=i.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===i.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(t){if((t.state===i.FILE_POPULATED||t.state===i.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===i.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===i.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=i.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,n){void 0===e&&(e="file.json"),void 0===n&&(n="application/json");var r=new Blob([t],{type:n}),i=URL.createObjectURL(r),o=document.createElement("a");return o.download=e,o.textContent="Download "+e,o.href=i,o.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(c(e,"baseURL",t.loaderBaseURL)),this.setPath(c(e,"path",t.loaderPath)),this.setPrefix(c(e,"prefix",t.loaderPrefix)),this.state=i.LOADER_IDLE},shutdown:function(){this.reset(),this.state=i.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=i.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});h.register("Loader",d,"load"),t.exports=d},function(t,e,n){t.exports={Arcade:n(1502),Impact:n(1533),Matter:n(1556)}},function(t,e,n){var r=n(101),i=n(37),o={ArcadePhysics:n(1503),Body:n(622),Collider:n(623),Components:n(339),Events:n(340),Factory:n(617),Group:n(619),Image:n(618),Sprite:n(235),StaticBody:n(629),StaticGroup:n(620),World:n(621)};o=i(!1,o,r),t.exports=o},function(t,e,n){var r=n(0),i=n(80),o=n(112),s=n(469),a=n(617),u=n(1),c=n(124),h=n(1516),l=n(29),f=n(34),d=n(8),p=n(621),m=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new p(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new p(this.scene,this.config),this.add=new a(this.world));var t=this.systems.events;t.on(f.UPDATE,this.world.update,this.world),t.on(f.POST_UPDATE,this.world.postUpdate,this.world),t.once(f.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return c(u(e,"arcade",{}),u(t,"arcade",{}))},overlap:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.world.collideObjects(t,e,n,r,i,!0)},collide:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.world.collideObjects(t,e,n,r,i,!1)},collideTiles:function(t,e,n,r,i){return this.world.collideTiles(t,e,n,r,i)},overlapTiles:function(t,e,n,r,i){return this.world.overlapTiles(t,e,n,r,i)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,n,r,i,o){void 0===r&&(r=60);var s=Math.atan2(n-t.y,e-t.x);return t.body.acceleration.setToPolar(s,r),void 0!==i&&void 0!==o&&t.body.maxVelocity.set(i,o),s},accelerateToObject:function(t,e,n,r,i){return this.accelerateTo(t,e.x,e.y,n,r,i)},closest:function(t){var e=this.world.bodies,n=Number.MAX_VALUE,r=null,i=t.x,o=t.y;return e.iterate(function(t){var e=s(i,o,t.x,t.y);e<n&&(r=t,n=e)}),r},furthest:function(t){var e=this.world.bodies,n=-1,r=null,i=t.x,o=t.y;return e.iterate(function(t){var e=s(i,o,t.x,t.y);e>n&&(r=t,n=e)}),r},moveTo:function(t,e,n,r,i){void 0===r&&(r=60),void 0===i&&(i=0);var s=Math.atan2(n-t.y,e-t.x);return i>0&&(r=o(t.x,t.y,e,n)/(i/1e3)),t.body.velocity.setToPolar(s,r),s},moveToObject:function(t,e,n,r){return this.moveTo(t,e.x,e.y,n,r)},velocityFromAngle:function(t,e,n){return void 0===e&&(e=60),void 0===n&&(n=new d),n.setToPolar(i(t),e)},velocityFromRotation:function(t,e,n){return void 0===e&&(e=60),void 0===n&&(n=new d),n.setToPolar(t,e)},overlapRect:function(t,e,n,r,i,o){return h(this.world,t,e,n,r,i,o)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(f.UPDATE,this.world.update,this.world),t.off(f.POST_UPDATE,this.world.postUpdate,this.world),t.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",m,"arcadePhysics"),t.exports=m},function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,n){return this.body.setCollideWorldBounds(t,e,n),this}}},function(t,e){t.exports={setDebug:function(t,e,n){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,e){var n={enableBody:function(t,e,n,r,i){return t&&this.body.reset(e,n),r&&(this.body.gameObject.active=!0),i&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};t.exports=n},function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,e){var n={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}};t.exports=n},function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,n){return this.body.setSize(t,e,n),this},setCircle:function(t,e,n){return this.body.setCircle(t,e,n),this}}},function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},function(t,e){t.exports=function(t,e,n,r,i,o,s){void 0===o&&(o=!0),void 0===s&&(s=!1);var a=[],u=[],c=t.treeMinMax;if(c.minX=e,c.minY=n,c.maxX=e+r,c.maxY=n+i,s&&(u=t.staticTree.search(c)),o&&t.useTree)a=t.tree.search(c);else if(o){var h=t.bodies,l={position:{x:e,y:n},left:e,top:n,right:e+r,bottom:n+i,isCircle:!1},f=t.intersects;h.iterate(function(t){f(t,l)&&a.push(t)})}return u.concat(a)}},function(t,e){t.exports="collide"},function(t,e){t.exports="overlap"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="tilecollide"},function(t,e){t.exports="tileoverlap"},function(t,e){t.exports="worldbounds"},function(t,e){t.exports="worldstep"},function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},function(t,e,n){var r=n(1527),i=n(1529),o=n(628);t.exports=function(t,e,n,s,a,u,c){var h=s.left,l=s.top,f=s.right,d=s.bottom,p=n.faceLeft||n.faceRight,m=n.faceTop||n.faceBottom;if(c||(p=!0,m=!0),!p&&!m)return!1;var v=0,g=0,y=0,b=1;if(e.deltaAbsX()>e.deltaAbsY()?y=-1:e.deltaAbsX()<e.deltaAbsY()&&(b=-1),0!==e.deltaX()&&0!==e.deltaY()&&p&&m&&(y=Math.min(Math.abs(e.position.x-f),Math.abs(e.right-h)),b=Math.min(Math.abs(e.position.y-d),Math.abs(e.bottom-l))),y<b){if(p&&0!==(v=r(e,n,h,f,u,c))&&!o(s,e))return!0;m&&(g=i(e,n,l,d,u,c))}else{if(m&&0!==(g=i(e,n,l,d,u,c))&&!o(s,e))return!0;p&&(v=r(e,n,h,f,u,c))}return 0!==v||0!==g}},function(t,e,n){var r=n(1528);t.exports=function(t,e,n,i,o,s){var a=0,u=e.faceLeft,c=e.faceRight,h=e.collideLeft,l=e.collideRight;return s||(u=!0,c=!0,h=!0,l=!0),t.deltaX()<0&&!t.blocked.left&&l&&t.checkCollision.left?c&&t.x<i&&(a=t.x-i)<-o&&(a=0):t.deltaX()>0&&!t.blocked.right&&h&&t.checkCollision.right&&u&&t.right>n&&(a=t.right-n)>o&&(a=0),0!==a&&(t.customSeparateX?t.overlapX=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):e>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,e,n){var r=n(1530);t.exports=function(t,e,n,i,o,s){var a=0,u=e.faceTop,c=e.faceBottom,h=e.collideUp,l=e.collideDown;return s||(u=!0,c=!0,h=!0,l=!0),t.deltaY()<0&&!t.blocked.up&&l&&t.checkCollision.up?c&&t.y<i&&(a=t.y-i)<-o&&(a=0):t.deltaY()>0&&!t.blocked.down&&h&&t.checkCollision.down&&u&&t.bottom>n&&(a=t.bottom-n)>o&&(a=0),0!==a&&(t.customSeparateY?t.overlapY=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):e>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,e,n){var r=n(624);t.exports=function(t,e,n,i){var o=r(t,e,n,i);if(n||0===o||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==o||t.embedded&&e.embedded;var s=t.velocity.x,a=e.velocity.x;if(t.immovable||e.immovable)t.immovable?(e.x+=o,e.velocity.x=s-a*e.bounce.x,t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y)):(t.x-=o,t.velocity.x=a-s*t.bounce.x,e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y));else{o*=.5,t.x-=o,e.x+=o;var u=Math.sqrt(a*a*e.mass/t.mass)*(a>0?1:-1),c=Math.sqrt(s*s*t.mass/e.mass)*(s>0?1:-1),h=.5*(u+c);u-=h,c-=h,t.velocity.x=h+u*t.bounce.x,e.velocity.x=h+c*e.bounce.x}return!0}},function(t,e,n){var r=n(625);t.exports=function(t,e,n,i){var o=r(t,e,n,i);if(n||0===o||t.immovable&&e.immovable||t.customSeparateY||e.customSeparateY)return 0!==o||t.embedded&&e.embedded;var s=t.velocity.y,a=e.velocity.y;if(t.immovable||e.immovable)t.immovable?(e.y+=o,e.velocity.y=s-a*e.bounce.y,t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x)):(t.y-=o,t.velocity.y=a-s*t.bounce.y,e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x));else{o*=.5,t.y-=o,e.y+=o;var u=Math.sqrt(a*a*e.mass/t.mass)*(a>0?1:-1),c=Math.sqrt(s*s*t.mass/e.mass)*(s>0?1:-1),h=.5*(u+c);u-=h,c-=h,t.velocity.y=h+u*t.bounce.y,e.velocity.y=h+c*e.bounce.y}return!0}},function(t,e,n){t.exports={Body:n(630),Events:n(341),COLLIDES:n(184),CollisionMap:n(631),Factory:n(632),Image:n(634),ImpactBody:n(633),ImpactPhysics:n(1552),Sprite:n(635),TYPE:n(185),World:n(636)}},function(t,e,n){var r=n(40);t.exports=function(t,e,n,i,o){if(n)return r(e+n*t,-o,o);if(i){var s=i*t;return e-s>0?e-s:e+s<0?e+s:0}return r(e,-o,o)}},function(t,e){t.exports=function(t,e){if(t.standing=!1,e.collision.y&&(t.bounciness>0&&Math.abs(t.vel.y)>t.minBounceVelocity?t.vel.y*=-t.bounciness:(t.vel.y>0&&(t.standing=!0),t.vel.y=0)),e.collision.x&&(t.bounciness>0&&Math.abs(t.vel.x)>t.minBounceVelocity?t.vel.x*=-t.bounciness:t.vel.x=0),e.collision.slope){var n=e.collision.slope;if(t.bounciness>0){var r=t.vel.x*n.nx+t.vel.y*n.ny;t.vel.x=(t.vel.x-n.nx*r*2)*t.bounciness,t.vel.y=(t.vel.y-n.ny*r*2)*t.bounciness}else{var i=n.x*n.x+n.y*n.y,o=(t.vel.x*n.x+t.vel.y*n.y)/i;t.vel.x=n.x*o,t.vel.y=n.y*o;var s=Math.atan2(n.x,n.y);s>t.slopeStanding.min&&s<t.slopeStanding.max&&(t.standing=!0)}}t.pos.x=e.pos.x,t.pos.y=e.pos.y}},function(t,e){t.exports="collide"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){var n=.5,r=1/3,i=2/3;t.exports={2:[0,1,1,0,!0],3:[0,1,1,n,!0],4:[0,n,1,0,!0],5:[0,1,1,i,!0],6:[0,i,1,r,!0],7:[0,r,1,0,!0],8:[n,1,0,0,!0],9:[1,0,n,1,!0],10:[n,1,1,0,!0],11:[0,0,n,1,!0],12:[0,0,1,0,!1],13:[1,1,0,0,!0],14:[1,n,0,0,!0],15:[1,1,0,n,!0],16:[1,r,0,0,!0],17:[1,i,0,r,!0],18:[1,1,0,i,!0],19:[1,1,n,0,!0],20:[n,0,0,1,!0],21:[0,1,n,0,!0],22:[n,0,1,1,!0],23:[1,1,0,1,!1],24:[0,0,1,1,!0],25:[0,0,1,n,!0],26:[0,n,1,1,!0],27:[0,0,1,r,!0],28:[0,r,1,i,!0],29:[0,i,1,1,!0],30:[r,1,0,0,!0],31:[1,0,i,1,!0],32:[i,1,1,0,!0],33:[0,0,r,1,!0],34:[1,0,1,1,!1],35:[1,0,0,1,!0],36:[1,n,0,1,!0],37:[1,0,0,n,!0],38:[1,i,0,1,!0],39:[1,r,0,i,!0],40:[1,0,0,r,!0],41:[i,1,r,0,!0],42:[i,0,r,1,!0],43:[r,1,i,0,!0],44:[r,0,i,1,!0],45:[0,1,0,0,!1],52:[1,1,i,0,!0],53:[r,0,0,1,!0],54:[0,1,r,0,!0],55:[i,0,1,1,!0]}},function(t,e){t.exports={setAccelerationX:function(t){return this.accel.x=t,this},setAccelerationY:function(t){return this.accel.y=t,this},setAcceleration:function(t,e){return this.accel.x=t,this.accel.y=e,this}}},function(t,e){var n={setBodySize:function(t,e){return void 0===e&&(e=t),this.body.size.x=Math.round(t),this.body.size.y=Math.round(e),this},setBodyScale:function(t,e){void 0===e&&(e=t);var n=this.body.gameObject;return n?(n.setScale(t,e),this.setBodySize(n.width*n.scaleX,n.height*n.scaleY)):this.setBodySize(this.body.size.x*t,this.body.size.y*e)}};t.exports=n},function(t,e,n){var r=n(185),i={getBodyType:function(){return this.body.type},setTypeNone:function(){return this.body.type=r.NONE,this},setTypeA:function(){return this.body.type=r.A,this},setTypeB:function(){return this.body.type=r.B,this}};t.exports=i},function(t,e){t.exports={setBounce:function(t){return this.body.bounciness=t,this},setMinBounceVelocity:function(t){return this.body.minBounceVelocity=t,this},bounce:{get:function(){return this.body.bounciness},set:function(t){this.body.bounciness=t}}}},function(t,e,n){var r=n(185),i={setAvsB:function(){return this.setTypeA(),this.setCheckAgainstB()},setBvsA:function(){return this.setTypeB(),this.setCheckAgainstA()},setCheckAgainstNone:function(){return this.body.checkAgainst=r.NONE,this},setCheckAgainstA:function(){return this.body.checkAgainst=r.A,this},setCheckAgainstB:function(){return this.body.checkAgainst=r.B,this},checkAgainst:{get:function(){return this.body.checkAgainst},set:function(t){this.body.checkAgainst=t}}};t.exports=i},function(t,e,n){var r=n(184),i={_collideCallback:null,_callbackScope:null,setCollideCallback:function(t,e){return this._collideCallback=t,e&&(this._callbackScope=e),this},setCollidesNever:function(){return this.body.collides=r.NEVER,this},setLiteCollision:function(){return this.body.collides=r.LITE,this},setPassiveCollision:function(){return this.body.collides=r.PASSIVE,this},setActiveCollision:function(){return this.body.collides=r.ACTIVE,this},setFixedCollision:function(){return this.body.collides=r.FIXED,this},collides:{get:function(){return this.body.collides},set:function(t){this.body.collides=t}}};t.exports=i},function(t,e){t.exports={setDebug:function(t,e,n){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setFriction:function(t,e){return this.friction.x=t,this.friction.y=e,this}}},function(t,e){t.exports={setGravity:function(t){return this.body.gravityFactor=t,this},gravity:{get:function(){return this.body.gravityFactor},set:function(t){this.body.gravityFactor=t}}}},function(t,e){t.exports={setOffset:function(t,e,n,r){return this.body.offset.x=t,this.body.offset.y=e,n&&this.setBodySize(n,r),this}}},function(t,e){var n={setGameObject:function(t,e){return void 0===e&&(e=!0),t?(this.body.gameObject=t,e&&this.syncGameObject()):this.body.gameObject=null,this},syncGameObject:function(){var t=this.body.gameObject;return t&&this.setBodySize(t.width*t.scaleX,t.height*t.scaleY),this}};t.exports=n},function(t,e){var n={setVelocityX:function(t){return this.vel.x=t,this},setVelocityY:function(t){return this.vel.y=t,this},setVelocity:function(t,e){return void 0===e&&(e=t),this.vel.x=t,this.vel.y=e,this},setMaxVelocity:function(t,e){return void 0===e&&(e=t),this.maxVel.x=t,this.maxVel.y=e,this}};t.exports=n},function(t,e,n){var r=n(0),i=n(632),o=n(1),s=n(124),a=n(29),u=n(34),c=n(636),h=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.start,this)},boot:function(){this.world=new c(this.scene,this.config),this.add=new i(this.world),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new c(this.scene,this.config),this.add=new i(this.world));var t=this.systems.events;t.on(u.UPDATE,this.world.update,this.world),t.once(u.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return s(o(e,"impact",{}),o(t,"impact",{}))},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},shutdown:function(){var t=this.systems.events;t.off(u.UPDATE,this.world.update,this.world),t.off(u.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});a.register("ImpactPhysics",h,"impactPhysics"),t.exports=h},function(t,e,n){var r=n(184),i=n(341),o=n(1554),s=n(1555);t.exports=function(t,e,n){var a=null;e.collides===r.LITE||n.collides===r.FIXED?a=e:n.collides!==r.LITE&&e.collides!==r.FIXED||(a=n),e.last.x+e.size.x>n.last.x&&e.last.x<n.last.x+n.size.x?(e.last.y<n.last.y?s(t,e,n,a):s(t,n,e,a),e.collideWith(n,"y"),n.collideWith(e,"y"),t.emit(i.COLLIDE,e,n,"y")):e.last.y+e.size.y>n.last.y&&e.last.y<n.last.y+n.size.y&&(e.last.x<n.last.x?o(t,e,n,a):o(t,n,e,a),e.collideWith(n,"x"),n.collideWith(e,"x"),t.emit(i.COLLIDE,e,n,"x"))}},function(t,e){t.exports=function(t,e,n,r){var i=e.pos.x+e.size.x-n.pos.x;if(r){var o=e===r?n:e;r.vel.x=-r.vel.x*r.bounciness+o.vel.x;var s=t.collisionMap.trace(r.pos.x,r.pos.y,r===e?-i:i,0,r.size.x,r.size.y);r.pos.x=s.pos.x}else{var a=(e.vel.x-n.vel.x)/2;e.vel.x=-a,n.vel.x=a;var u=t.collisionMap.trace(e.pos.x,e.pos.y,-i/2,0,e.size.x,e.size.y);e.pos.x=Math.floor(u.pos.x);var c=t.collisionMap.trace(n.pos.x,n.pos.y,i/2,0,n.size.x,n.size.y);n.pos.x=Math.ceil(c.pos.x)}}},function(t,e){t.exports=function(t,e,n,r){var i,o,s=e.pos.y+e.size.y-n.pos.y;if(r){var a=e===r?n:e;r.vel.y=-r.vel.y*r.bounciness+a.vel.y,i=0,r===e&&Math.abs(r.vel.y-a.vel.y)<r.minBounceVelocity&&(r.standing=!0,i=a.vel.x*t.delta);var u=t.collisionMap.trace(r.pos.x,r.pos.y,i,r===e?-s:s,r.size.x,r.size.y);r.pos.y=u.pos.y,r.pos.x=u.pos.x}else if(t.gravity&&(n.standing||e.vel.y>0))o=t.collisionMap.trace(e.pos.x,e.pos.y,0,-(e.pos.y+e.size.y-n.pos.y),e.size.x,e.size.y),e.pos.y=o.pos.y,e.bounciness>0&&e.vel.y>e.minBounceVelocity?e.vel.y*=-e.bounciness:(e.standing=!0,e.vel.y=0);else{var c=(e.vel.y-n.vel.y)/2;e.vel.y=-c,n.vel.y=c,i=n.vel.x*t.delta,o=t.collisionMap.trace(e.pos.x,e.pos.y,i,-s/2,e.size.x,e.size.y),e.pos.y=o.pos.y;var h=t.collisionMap.trace(n.pos.x,n.pos.y,0,s/2,n.size.x,n.size.y);n.pos.y=h.pos.y}}},function(t,e,n){t.exports={Factory:n(637),Image:n(640),Matter:n(348),MatterPhysics:n(1587),PolyDecomp:n(638),Sprite:n(641),TileBody:n(345),World:n(647)}},function(t,e,n){var r=n(236),i=n(1),o=n(8);t.exports=function(t,e,n){void 0===n&&(n={});var s=e.x,a=e.y;if(e.body={temp:!0,position:{x:s,y:a}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach(function(t){for(var n in t)(r=t[n]).get&&"function"==typeof r.get||r.set&&"function"==typeof r.set?Object.defineProperty(e,n,{get:t[n].get,set:t[n].set}):Object.defineProperty(e,n,{value:t[n]});var r}),e.world=t,e._tempVec2=new o(s,a),n.hasOwnProperty("type")&&"body"===n.type)e.setExistingBody(n,!0);else{var u=i(n,"shape",null);u||(u="rectangle"),e.setBody(u,n)}return e}},function(t,e){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(t,e){var n={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)e|=t[n];else e=t;return this.body.collisionFilter.mask=e,this}};t.exports=n},function(t,e,n){var r=n(42),i={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return r.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=i},function(t,e){var n={setFriction:function(t,e,n){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==n&&(this.body.frictionStatic=n),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};t.exports=n},function(t,e){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(t,e,n){var r=n(42),i=n(8),o={setMass:function(t){return r.setMass(this.body,t),this},setDensity:function(t){return r.setDensity(this.body,t),this},centerOfMass:{get:function(){return new i(this.body.render.sprite.xOffset*this.width,this.body.render.sprite.yOffset*this.height)}}};t.exports=o},function(t,e,n){var r=n(42),i={setStatic:function(t){return r.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=i},function(t,e){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(t,e,n){var r=n(102),i=n(42),o=n(1),s=n(1567),a=n(61),u={setRectangle:function(t,e,n){return this.setBody({type:"rectangle",width:t,height:e},n)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,n){return this.setBody({type:"polygon",sides:e,radius:t},n)},setTrapezoid:function(t,e,n,r){return this.setBody({type:"trapezoid",width:t,height:e,slope:n},r)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body),this.body=t;for(var n=0;n<t.parts.length;n++)t.parts[n].gameObject=this;var r=this;return t.destroy=function(){r.world.remove(r.body),r.body.gameObject=null},e&&this.world.add(t),this._originComponent&&this.setOrigin(t.render.sprite.xOffset,t.render.sprite.yOffset),this},setBody:function(t,e){if(!t)return this;var n;"string"==typeof t&&(t={type:t});var u=o(t,"type","rectangle"),c=o(t,"x",this._tempVec2.x),h=o(t,"y",this._tempVec2.y),l=o(t,"width",this.width),f=o(t,"height",this.height);switch(u){case"rectangle":n=r.rectangle(c,h,l,f,e);break;case"circle":var d=o(t,"radius",Math.max(l,f)/2),p=o(t,"maxSides",25);n=r.circle(c,h,d,e,p);break;case"trapezoid":var m=o(t,"slope",.5);n=r.trapezoid(c,h,l,f,m,e);break;case"polygon":var v=o(t,"sides",5),g=o(t,"radius",Math.max(l,f)/2);n=r.polygon(c,h,v,g,e);break;case"fromVertices":case"fromVerts":var y=o(t,"verts",null);if(y)if("string"==typeof y&&(y=a.fromPath(y)),this.body&&!this.body.hasOwnProperty("temp"))i.setVertices(this.body,y),n=this.body;else{var b=o(t,"flagInternal",!1),x=o(t,"removeCollinear",.01),w=o(t,"minimumArea",10);n=r.fromVertices(c,h,y,e,b,x,w)}break;case"fromPhysicsEditor":n=s.parseBody(c,h,l,f,t)}return n&&this.setExistingBody(n,t.addToWorld),this}};t.exports=u},function(t,e,n){var r=n(102),i=n(42),o=n(74),s=n(30),a=n(1),u=n(73),c=n(61),h={parseBody:function(t,e,n,r,o){for(var u=a(o,"fixtures",[]),c=[],h=0;h<u.length;h++)for(var l=this.parseFixture(u[h]),f=0;f<l.length;f++)c.push(l[f]);var d=s.extend({},!1,o);delete d.fixtures,delete d.type;var p=i.create(d);return i.setParts(p,c),p.render.sprite.xOffset=p.position.x/n,p.render.sprite.yOffset=p.position.y/r,i.setPosition(p,{x:t,y:e}),p},parseFixture:function(t){var e,n=s.extend({},!1,t);if(delete n.circle,delete n.vertices,t.circle){var i=a(t.circle,"x"),o=a(t.circle,"y"),u=a(t.circle,"radius");e=[r.circle(i,o,u,n)]}else t.vertices&&(e=this.parseVertices(t.vertices,n));return e},parseVertices:function(t,e){var n,r,a,h,l,f=[];for(e=e||{},h=0;h<t.length;h+=1)f.push(i.create(s.extend({position:c.centre(t[h]),vertices:t[h]},e)));for(n=0;n<f.length;n++){var d=f[n];for(r=n+1;r<f.length;r++){var p=f[r];if(o.overlaps(d.bounds,p.bounds)){var m=d.vertices,v=p.vertices;for(a=0;a<d.vertices.length;a++)for(l=0;l<p.vertices.length;l++){var g=u.magnitudeSquared(u.sub(m[(a+1)%m.length],v[l])),y=u.magnitudeSquared(u.sub(m[a],v[(l+1)%v.length]));g<5&&y<5&&(m[a].isInternal=!0,v[l].isInternal=!0)}}}}return f}};t.exports=h},function(t,e,n){var r=n(344),i=n(157),o={setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){if(t){var e=this.world;i.on(this.body,"sleepStart",function(t){e.emit(r.SLEEP_START,t,this)})}else i.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var e=this.world;i.on(this.body,"sleepEnd",function(t){e.emit(r.SLEEP_END,t,this)})}else i.off(this.body,"sleepEnd");return this}};t.exports=o},function(t,e){t.exports="afterupdate"},function(t,e){t.exports="beforeupdate"},function(t,e){t.exports="collisionactive"},function(t,e){t.exports="collisionend"},function(t,e){t.exports="collisionstart"},function(t,e){t.exports="dragend"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="sleepend"},function(t,e){t.exports="sleepstart"},function(t,e,n){var r=n(42),i=n(41),o=n(279),s=n(280),a={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),r.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,n=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,n),r.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,n=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,n),r.scale(this.body,this._scaleX,t)}},angle:{get:function(){return s(this.body.angle*i.RAD_TO_DEG)},set:function(t){this.rotation=s(t)*i.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=o(t),r.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),r.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=o(t),r.setAngle(this.body,t),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,r.setAngle(this.body,this.rotation),this},setScale:function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=t);var i=1/this._scaleX,o=1/this._scaleY;return this._scaleX=t,this._scaleY=e,r.scale(this.body,i,o,n),r.scale(this.body,t,e,n),this}};t.exports=a},function(t,e,n){var r=n(42),i={setAngularVelocity:function(t){return r.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),r.setVelocity(this.body,this._tempVec2),this}};t.exports=i},function(t,e,n){var r=n(74),i=n(0),o=n(131),s=n(158),a=n(346),u=n(344),c=n(98),h=n(124),l=n(186),f=n(8),d=n(61),p=new i({initialize:function(t,e,n){void 0===n&&(n={});this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=s.create(h(n,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},damping:0,length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(u.BEFORE_UPDATE,this.update,this),t.sys.input.on(c.POINTER_DOWN,this.onDown,this)},onDown:function(t){this.pointer||this.getBody(t)&&(this.pointer=t,this.camera=t.camera)},getBody:function(t){var e=this.position,n=this.constraint;t.camera.getWorldPoint(t.x,t.y,e);for(var i=o.allBodies(this.world.localWorld),s=0;s<i.length;s++){var c=i[s];if(!c.ignorePointer&&r.contains(c.bounds,e)&&a.canCollide(c.collisionFilter,n.collisionFilter)&&this.hitTestBody(c,e))return this.world.emit(u.DRAG_START,this.body,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var n=this.constraint,r=t.parts.length>1?1:0;r<t.parts.length;r++){var i=t.parts[r];if(d.contains(i.vertices,e))return n.bodyB=t,n.pointA.x=e.x,n.pointA.y=e.y,n.pointB.x=e.x-t.position.x,n.pointB.y=e.y-t.position.y,n.angleB=t.angle,l.set(t,!1),this.part=i,this.body=t,!0}return!1},update:function(){var t=this.body,e=this.pointer;if(this.active&&e&&t)if(e.isDown){var n=this.position,r=this.constraint;this.camera.getWorldPoint(e.x,e.y,n),l.set(t,!1),r.pointA.x=n.x,r.pointA.y=n.y,this.world.emit(u.DRAG,t,this)}else this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;t&&(this.world.emit(u.DRAG_END,t,this),this.pointer=null,this.body=null,this.part=null,e.bodyB=null)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(u.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this)}});t.exports=p},function(t,e,n){var r={};t.exports=r;var i=n(73),o=n(347),s=n(74),a=n(102),u=n(61);r.collides=function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(s.overlaps(i.bounds,t.bounds))for(var a=1===i.parts.length?0:1;a<i.parts.length;a++){var u=i.parts[a];if(s.overlaps(u.bounds,t.bounds)){var c=o.collides(u,t);if(c.collided){n.push(c);break}}}}return n},r.ray=function(t,e,n,o){o=o||1e-100;for(var s=i.angle(e,n),u=i.magnitude(i.sub(e,n)),c=.5*(n.x+e.x),h=.5*(n.y+e.y),l=a.rectangle(c,h,u,o,{angle:s}),f=r.collides(l,t),d=0;d<f.length;d+=1){var p=f[d];p.body=p.bodyB=p.bodyA}return f},r.region=function(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=t[i],a=s.overlaps(o.bounds,e);(a&&!n||!a&&n)&&r.push(o)}return r},r.point=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(s.contains(i.bounds,e))for(var o=1===i.parts.length?0:1;o<i.parts.length;o++){var a=i.parts[o];if(s.contains(a.bounds,e)&&u.contains(a.vertices,e)){n.push(i);break}}}return n}},function(t,e,n){var r={};t.exports=r;var i=n(131),o=n(30);r.create=function(t){return o.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},r.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},r.update=function(t,e){if(t.extended){var n=e.world,r=i.allBodies(n);t.collisions=t.narrowDetections,t.pairs=e.pairs.list.length,t.bodies=r.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(r.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,e,n){var r={};t.exports=r;n(74);var i=n(30);r.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||i.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,o,s,a,u,c,h,l,f,d,p,m=[],v=0,g=0,y=0;e=e||15;var b=function(t,e,n){var r=n%2==1&&n>1;if(!f||t!=f.x||e!=f.y){f&&r?(d=f.x,p=f.y):(d=0,p=0);var i={x:d+t,y:p+e};!r&&f||(f=i),m.push(i),g=d+t,y=p+e}},x=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":g=t.x,y=t.y;break;case"H":g=t.x;break;case"V":y=t.y}b(g,y,t.pathSegType)}};for(r._svgPathToAbsolute(t),s=t.getTotalLength(),c=[],n=0;n<t.pathSegList.numberOfItems;n+=1)c.push(t.pathSegList.getItem(n));for(h=c.concat();v<s;){if((u=c[t.getPathSegAtLength(v)])!=l){for(;h.length&&h[0]!=u;)x(h.shift());l=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(v),b(a.x,a.y,0)}v+=e}for(n=0,o=h.length;n<o;++n)x(h[n]);return m},r._svgPathToAbsolute=function(t){for(var e,n,r,i,o,s,a=t.pathSegList,u=0,c=0,h=a.numberOfItems,l=0;l<h;++l){var f=a.getItem(l),d=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(d))"x"in f&&(u=f.x),"y"in f&&(c=f.y);else switch("x1"in f&&(r=u+f.x1),"x2"in f&&(o=u+f.x2),"y1"in f&&(i=c+f.y1),"y2"in f&&(s=c+f.y2),"x"in f&&(u+=f.x),"y"in f&&(c+=f.y),d){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(u,c),l);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(u,c),l);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(u),l);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(c),l);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(u,c,r,i,o,s),l);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(u,c,o,s),l);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(u,c,r,i),l);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(u,c),l);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(u,c,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),l);break;case"z":case"Z":u=e,c=n}"M"!=d&&"m"!=d||(e=u,n=c)}}},function(t,e,n){var r=n(42),i=n(102),o=n(0),s=n(637),a=n(1),u=n(14),c=n(1588),h=n(642),l=n(1589),f=n(124),d=n(349),p=n(29),m=n(34),v=n(647),g=n(61),y=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.verts=g,this.body=r,this.bodies=i,u(this.config,"plugins.attractors",!1)&&(d.register(c),d.use(h,c)),u(this.config,"plugins.wrap",!1)&&(d.register(l),d.use(h,l)),t.sys.events.once(m.BOOT,this.boot,this),t.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new v(this.scene,this.config),this.add=new s(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new v(this.scene,this.config),this.add=new s(this.world));var t=this.systems.events;t.on(m.UPDATE,this.world.update,this.world),t.on(m.POST_UPDATE,this.world.postUpdate,this.world),t.once(m.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return f(a(e,"matter",{}),a(t,"matter",{}))},enableAttractorPlugin:function(){return d.register(c),d.use(h,c),this},enableWrapPlugin:function(){return d.register(l),d.use(h,l),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},shutdown:function(){var t=this.systems.events;t.off(m.UPDATE,this.world.update,this.world),t.off(m.POST_UPDATE,this.world.postUpdate,this.world),t.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});p.register("MatterPhysics",y,"matterPhysics"),t.exports=y},function(t,e,n){var r=n(348),i={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.13.1",silent:!0,install:function(t){t.after("Body.create",function(){i.Body.init(this)}),t.before("Engine.update",function(t){i.Engine.update(t)})},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=t.world,n=r.Composite.allBodies(e),i=0;i<n.length;i+=1){var o=n[i],s=o.plugin.attractors;if(s&&s.length>0)for(var a=i+1;a<n.length;a+=1)for(var u=n[a],c=0;c<s.length;c+=1){var h=s[c],l=h;r.Common.isFunction(h)&&(l=h(o,u)),l&&r.Body.applyForce(u,u.position,l)}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var n=r.Vector.sub(e.position,t.position),o=r.Vector.magnitudeSquared(n)||1e-4,s=r.Vector.normalise(n),a=-i.Attractors.gravityConstant*(t.mass*e.mass/o),u=r.Vector.mult(s,a);r.Body.applyForce(t,t.position,r.Vector.neg(u)),r.Body.applyForce(e,e.position,u)}}};t.exports=i},function(t,e,n){var r=n(348),i={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.13.1",silent:!0,install:function(t){t.after("Engine.update",function(){i.Engine.update(this)})},Engine:{update:function(t){for(var e=t.world,n=r.Composite.allBodies(e),o=r.Composite.allComposites(e),s=0;s<n.length;s+=1){var a=n[s];a.plugin.wrap&&i.Body.wrap(a,a.plugin.wrap)}for(s=0;s<o.length;s+=1){var u=o[s];u.plugin.wrap&&i.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(t,e){var n=null,r=null;if(void 0!==e.min.x&&void 0!==e.max.x&&(t.min.x>e.max.x?n=e.min.x-t.max.x:t.max.x<e.min.x&&(n=e.max.x-t.min.x)),void 0!==e.min.y&&void 0!==e.max.y&&(t.min.y>e.max.y?r=e.min.y-t.max.y:t.max.y<e.min.y&&(r=e.max.y-t.min.y)),null!==n||null!==r)return{x:n||0,y:r||0}}},Body:{wrap:function(t,e){var n=i.Bounds.wrap(t.bounds,e);return n&&r.Body.translate(t,n),n}},Composite:{bounds:function(t){for(var e=r.Composite.allBodies(t),n=[],i=0;i<e.length;i+=1){var o=e[i];n.push(o.bounds.min,o.bounds.max)}return r.Bounds.create(n)},wrap:function(t,e){var n=i.Bounds.wrap(i.Composite.bounds(t),e);return n&&r.Composite.translate(t,n),n}}};t.exports=i},function(t,e,n){t.exports={BasePlugin:n(648),DefaultPlugins:n(300),PluginCache:n(29),PluginManager:n(526),ScenePlugin:n(1591)}},function(t,e,n){var r=n(648),i=n(0),o=n(34),s=new i({Extends:r,initialize:function(t,e){r.call(this,e),this.scene=t,this.systems=t.sys,t.sys.events.once(o.BOOT,this.boot,this)},boot:function(){}});t.exports=s},function(t,e,n){t.exports={Canvas:n(1593),Snapshot:n(1594),WebGL:n(1595)}},function(t,e,n){t.exports={CanvasRenderer:n(490),GetBlendModes:n(492),SetTransform:n(52)}},function(t,e,n){t.exports={Canvas:n(491),WebGL:n(494)}},function(t,e,n){t.exports={Utils:n(21),WebGLPipeline:n(301),WebGLRenderer:n(493),Pipelines:n(1596),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4}},function(t,e,n){t.exports={BitmapMaskPipeline:n(495),ForwardDiffuseLightPipeline:n(496),TextureTintPipeline:n(302),ModelViewProjection:n(497)}},function(t,e,n){var r=n(37),i=n(304),o={Center:n(515),Events:n(176),Orientation:n(516),ScaleManager:n(527),ScaleModes:n(517),Zoom:n(518)};o=r(!1,o,i.CENTER),o=r(!1,o,i.ORIENTATION),o=r(!1,o,i.SCALE_MODE),o=r(!1,o,i.ZOOM),t.exports=o},function(t,e,n){var r=n(223),i=n(37),o={Events:n(34),SceneManager:n(529),ScenePlugin:n(1599),Settings:n(532),Systems:n(307)};o=i(!1,o,r),t.exports=o},function(t,e,n){var r=n(40),i=n(0),o=n(34),s=n(1),a=n(29),u=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=s(t,"target",!1),n=this.manager.getScene(e);if(!e||!this.checkValidTransition(n))return!1;var r=s(t,"duration",1e3);this._elapsed=0,this._target=n,this._duration=r,this._willSleep=s(t,"sleep",!1),this._willRemove=s(t,"remove",!1);var i=s(t,"onUpdate",null);i&&(this._onUpdate=i,this._onUpdateScope=s(t,"onUpdateScope",this.scene));var a=s(t,"allowInput",!1);this.settings.transitionAllowInput=a;var u=n.sys.settings;return u.isTransition=!0,u.transitionFrom=this.scene,u.transitionDuration=r,u.transitionAllowInput=a,s(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):s(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),n.sys.isSleeping()?n.sys.wake():this.manager.start(e,s(t,"data")),this.systems.events.emit(o.TRANSITION_OUT,n,r),this.systems.events.on(o.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(o.UPDATE,this.step,this),t.events.emit(o.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,n,r){return this.manager.add(t,e,n,r)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t),this},setActive:function(t,e,n){void 0===e&&(e=this.key);var r=this.manager.getScene(e);return r&&r.sys.setActive(t,n),this},setVisible:function(t,e){void 0===e&&(e=this.key);var n=this.manager.getScene(e);return n&&n.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(o.SHUTDOWN,this.shutdown,this),t.off(o.POST_UPDATE,this.step,this),t.off(o.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",u,"scenePlugin"),t.exports=u},function(t,e,n){t.exports={List:n(226),Map:n(286),ProcessQueue:n(626),RTree:n(627),Set:n(151),Size:n(528)}},function(t,e,n){var r=n(37),i=n(1602),o={Events:n(219),FilterMode:i,Frame:n(178),Parsers:n(535),Texture:n(308),TextureManager:n(533),TextureSource:n(534)};o=r(!1,o,i),t.exports=o},function(t,e){t.exports={LINEAR:0,NEAREST:1}},function(t,e,n){t.exports={Components:n(238),Parsers:n(1633),Formats:n(66),ImageCollection:n(659),ParseToTilemap:n(357),Tile:n(133),Tilemap:n(668),TilemapCreator:n(1642),TilemapFactory:n(1643),Tileset:n(242),LayerData:n(188),MapData:n(189),ObjectLayer:n(662),DynamicTilemapLayer:n(669),StaticTilemapLayer:n(670)}},function(t,e,n){var r=n(43),i=n(103);t.exports=function(t,e,n,o,s,a,u,c){t<0&&(t=0),e<0&&(e=0),void 0===u&&(u=!0);for(var h=r(t,e,n,o,null,c),l=s-t,f=a-e,d=0;d<h.length;d++){var p=h[d].x+l,m=h[d].y+f;p>=0&&p<c.width&&m>=0&&m<c.height&&c.data[m][p]&&c.data[m][p].copy(h[d])}u&&i(s-1,a-1,n+2,o+2,c)}},function(t,e,n){var r=n(240),i=n(241),o=n(43),s=n(649);t.exports=function(t,e,n,a,u,c){void 0===n&&(n={}),Array.isArray(t)||(t=[t]);var h=c.tilemapLayer;void 0===a&&(a=h.scene),void 0===u&&(u=a.cameras.main);var l,f=o(0,0,c.width,c.height,null,c),d=[];for(l=0;l<f.length;l++){var p=f[l];if(-1!==t.indexOf(p.index)){n.x=r(p.x,u,c),n.y=i(p.y,u,c);var m=a.make.sprite(n);d.push(m)}}if("number"==typeof e)for(l=0;l<t.length;l++)s(t[l],e,0,0,c.width,c.height,c);else if(Array.isArray(e))for(l=0;l<t.length;l++)s(t[l],e[l],0,0,c.width,c.height,c);return d}},function(t,e,n){var r=n(177),i=n(478);t.exports=function(t,e,n,o){void 0===n&&(n=[]),void 0===o&&(o=0),n.length=0;var s,a,u,c=t.tilemapLayer.tilemap,h=t.tilemapLayer,l=t.data,f=t.width,d=t.height,p=Math.floor(c.tileWidth*h.scaleX),m=Math.floor(c.tileHeight*h.scaleY),v=0,g=f,y=0,b=d;if(!h.skipCull&&1===h.scrollFactorX&&1===h.scrollFactorY){var x=r(e.worldView.x-h.x,p,0,!0)-h.cullPaddingX,w=i(e.worldView.right-h.x,p,0,!0)+h.cullPaddingX,E=r(e.worldView.y-h.y,m,0,!0)-h.cullPaddingY,_=i(e.worldView.bottom-h.y,m,0,!0)+h.cullPaddingY;v=Math.max(0,x),g=Math.min(f,w),y=Math.max(0,E),b=Math.min(d,_)}if(0===o)for(a=y;a<b;a++)for(s=v;l[a]&&s<g;s++)(u=l[a][s])&&-1!==u.index&&u.visible&&0!==u.alpha&&n.push(u);else if(1===o)for(a=y;a<b;a++)for(s=g;l[a]&&s>=v;s--)(u=l[a][s])&&-1!==u.index&&u.visible&&0!==u.alpha&&n.push(u);else if(2===o)for(a=b;a>=y;a--)for(s=v;l[a]&&s<g;s++)(u=l[a][s])&&-1!==u.index&&u.visible&&0!==u.alpha&&n.push(u);else if(3===o)for(a=b;a>=y;a--)for(s=g;l[a]&&s>=v;s--)(u=l[a][s])&&-1!==u.index&&u.visible&&0!==u.alpha&&n.push(u);return h.tilesDrawn=n.length,h.tilesTotal=f*d,n}},function(t,e,n){var r=n(43),i=n(103),o=n(132);t.exports=function(t,e,n,s,a,u,c){for(var h=-1!==c.collideIndexes.indexOf(t),l=r(e,n,s,a,null,c),f=0;f<l.length;f++)l[f].index=t,o(l[f],h);u&&i(e-1,n-1,s+2,a+2,c)}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s,a,u){return r(n,i,o,s,a,u).filter(t,e)}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1);var i,o,s,a=0;if(n){for(o=r.height-1;o>=0;o--)for(i=r.width-1;i>=0;i--)if((s=r.data[o][i])&&s.index===t){if(a===e)return s;a+=1}}else for(o=0;o<r.height;o++)for(i=0;i<r.width;i++)if((s=r.data[o][i])&&s.index===t){if(a===e)return s;a+=1}return null}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s,a,u){return r(n,i,o,s,a,u).find(t,e)||null}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s,a,u){r(n,i,o,s,a,u).forEach(t,e)}},function(t,e,n){var r=n(239),i=n(115),o=n(116);t.exports=function(t,e,n,s,a){var u=i(t,!0,s,a),c=o(e,!0,s,a);return r(u,c,n,a)}},function(t,e,n){var r=n(585),i=n(43),o=n(586),s=n(2),a=n(240),u=n(241),c=n(115),h=n(116),l=function(t,e){return o.RectangleToTriangle(e,t)};t.exports=function(t,e,n,f){if(void 0===t)return[];var d=s;t instanceof r.Circle?d=o.CircleToRectangle:t instanceof r.Rectangle?d=o.RectangleToRectangle:t instanceof r.Triangle?d=l:t instanceof r.Line&&(d=o.LineToRectangle);var p=c(t.left,!0,n,f),m=h(t.top,!0,n,f),v=Math.ceil(c(t.right,!1,n,f)),g=Math.ceil(h(t.bottom,!1,n,f)),y=Math.max(v-p,1),b=Math.max(g-m,1),x=i(p,m,y,b,e,f),w=f.tileWidth,E=f.tileHeight;f.tilemapLayer&&(w*=f.tilemapLayer.scaleX,E*=f.tilemapLayer.scaleY);for(var _=[],S=new r.Rectangle(0,0,w,E),T=0;T<x.length;T++){var A=x[T];S.x=a(A.x,n,f),S.y=u(A.y,n,f),d(t,S)&&_.push(A)}return _}},function(t,e,n){var r=n(43),i=n(115),o=n(116);t.exports=function(t,e,n,s,a,u,c){var h=i(t,!0,u,c),l=o(e,!0,u,c),f=Math.ceil(i(t+n,!1,u,c)),d=Math.ceil(o(e+s,!1,u,c));return r(h,l,f-h,d-l,a,c)}},function(t,e,n){var r=n(650),i=n(115),o=n(116);t.exports=function(t,e,n,s){var a=i(t,!0,n,s),u=o(e,!0,n,s);return r(a,u,s)}},function(t,e,n){var r=n(352),i=n(115),o=n(116);t.exports=function(t,e,n,s,a,u){var c=i(e,!0,a,u),h=o(n,!0,a,u);return r(t,c,h,s,u)}},function(t,e,n){var r=n(103),i=n(352);t.exports=function(t,e,n,o,s){if(!Array.isArray(t))return null;void 0===o&&(o=!0),Array.isArray(t[0])||(t=[t]);for(var a=t.length,u=t[0].length,c=0;c<a;c++)for(var h=0;h<u;h++){var l=t[c][h];i(l,e+h,n+c,!1,s)}o&&r(e-1,n-1,u+2,a+2,s)}},function(t,e,n){var r=n(43),i=n(311);t.exports=function(t,e,n,o,s,a){var u,c=r(t,e,n,o,null,a);if(void 0===s)for(s=[],u=0;u<c.length;u++)-1===s.indexOf(c[u].index)&&s.push(c[u].index);for(u=0;u<c.length;u++)c[u].index=i(s)}},function(t,e,n){var r=n(651),i=n(115),o=n(116);t.exports=function(t,e,n,s,a,u){var c=i(t,!0,a,u),h=o(e,!0,a,u);return r(c,h,n,s,u)}},function(t,e,n){var r=n(43),i=n(510),o=new i(105,210,231,150),s=new i(243,134,48,200),a=new i(40,39,37,150);t.exports=function(t,e,n){void 0===e&&(e={});var i=void 0!==e.tileColor?e.tileColor:o,u=void 0!==e.collidingTileColor?e.collidingTileColor:s,c=void 0!==e.faceColor?e.faceColor:a,h=r(0,0,n.width,n.height,null,n);t.translate(n.tilemapLayer.x,n.tilemapLayer.y),t.scale(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var l=0;l<h.length;l++){var f=h[l],d=f.width,p=f.height,m=f.pixelX,v=f.pixelY,g=f.collides?u:i;null!==g&&(t.fillStyle(g.color,g.alpha/255),t.fillRect(m,v,d,p)),m+=1,v+=1,d-=2,p-=2,null!==c&&(t.lineStyle(1,c.color,c.alpha/255),f.faceTop&&t.lineBetween(m,v,m+d,v),f.faceRight&&t.lineBetween(m+d,v,m+d,v+p),f.faceBottom&&t.lineBetween(m,v+p,m+d,v+p),f.faceLeft&&t.lineBetween(m,v,m,v+p))}}},function(t,e,n){var r=n(132),i=n(103),o=n(353);t.exports=function(t,e,n,s){void 0===e&&(e=!0),void 0===n&&(n=!0),Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++)o(t[a],e,s);for(var u=0;u<s.height;u++)for(var c=0;c<s.width;c++){var h=s.data[u][c];h&&-1!==t.indexOf(h.index)&&r(h,e)}n&&i(0,0,s.width,s.height,s)}},function(t,e,n){var r=n(132),i=n(103),o=n(353);t.exports=function(t,e,n,s,a){if(void 0===n&&(n=!0),void 0===s&&(s=!0),!(t>e)){for(var u=t;u<=e;u++)o(u,n,a);for(var c=0;c<a.height;c++)for(var h=0;h<a.width;h++){var l=a.data[c][h];l&&l.index>=t&&l.index<=e&&r(l,n)}s&&i(0,0,a.width,a.height,a)}}},function(t,e,n){var r=n(132),i=n(103),o=n(353);t.exports=function(t,e,n,s){void 0===e&&(e=!0),void 0===n&&(n=!0),Array.isArray(t)||(t=[t]);for(var a=0;a<s.height;a++)for(var u=0;u<s.width;u++){var c=s.data[a][u];c&&-1===t.indexOf(c.index)&&(r(c,e),o(c.index,e,s))}n&&i(0,0,s.width,s.height,s)}},function(t,e,n){var r=n(132),i=n(103),o=n(153);t.exports=function(t,e,n,s){void 0===e&&(e=!0),void 0===n&&(n=!0);for(var a=0;a<s.height;a++)for(var u=0;u<s.width;u++){var c=s.data[a][u];if(c)for(var h in t)if(o(c.properties,h)){var l=t[h];Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++)c.properties[h]===l[f]&&r(c,e)}}n&&i(0,0,s.width,s.height,s)}},function(t,e,n){var r=n(132),i=n(103);t.exports=function(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var o=0;o<n.height;o++)for(var s=0;s<n.width;s++){var a=n.data[o][s];if(a){var u=a.getCollisionGroup();u&&u.objects&&u.objects.length>0&&r(a,t)}}e&&i(0,0,n.width,n.height,n)}},function(t,e){t.exports=function(t,e,n,r){if("number"==typeof t)r.callbacks[t]=null!==e?{callback:e,callbackContext:n}:void 0;else for(var i=0,o=t.length;i<o;i++)r.callbacks[t[i]]=null!==e?{callback:e,callbackContext:n}:void 0}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s,a){for(var u=r(t,e,n,i,null,a),c=0;c<u.length;c++)u[c].setCollisionCallback(o,s)}},function(t,e,n){var r=n(43),i=n(211);t.exports=function(t,e,n,o,s){var a=r(t,e,n,o,null,s),u=a.map(function(t){return t.index});i(u);for(var c=0;c<a.length;c++)a[c].index=u[c]}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s,a){for(var u=r(n,i,o,s,null,a),c=0;c<u.length;c++)u[c]&&(u[c].index===t?u[c].index=e:u[c].index===e&&(u[c].index=t))}},function(t,e,n){var r=n(240),i=n(241),o=n(8);t.exports=function(t,e,n,s,a){return void 0===n&&(n=new o(0,0)),n.x=r(t,s,a),n.y=i(e,s,a),n}},function(t,e,n){var r=n(43);t.exports=function(t,e,n,i,o,s){if(void 0!==o){var a,u=r(t,e,n,i,null,s),c=0;for(a=0;a<o.length;a++)c+=o[a].weight;if(!(c<=0))for(a=0;a<u.length;a++){for(var h=Math.random()*c,l=0,f=-1,d=0;d<o.length;d++)if(h<=(l+=o[d].weight)){var p=o[d].index;f=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}u[a].index=f}}}},function(t,e,n){var r=n(115),i=n(116),o=n(8);t.exports=function(t,e,n,s,a,u){return void 0===s&&(s=new o(0,0)),s.x=r(t,n,a,u),s.y=i(e,n,a,u),s}},function(t,e,n){t.exports={Parse:n(652),Parse2DArray:n(354),ParseCSV:n(653),Impact:n(1634),Tiled:n(1635)}},function(t,e,n){t.exports={ParseTileLayers:n(666),ParseTilesets:n(667),ParseWeltmeister:n(665)}},function(t,e,n){t.exports={AssignTileProperties:n(664),Base64Decode:n(656),BuildTilesetIndex:n(663),ParseGID:n(355),ParseImageLayers:n(657),ParseJSONTiled:n(654),ParseObject:n(356),ParseObjectLayers:n(661),ParseTileLayers:n(655),ParseTilesets:n(658)}},function(t,e,n){var r=n(2),i=n(2);r=n(1637),i=n(1638),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i){e.cull(i);var o=e.culledTiles,s=o.length,a=i.alpha*e.alpha;if(!(0===s||a<=0))for(var u=e.gidMap,c=e.pipeline,h=r.getTintAppendFloatAlpha,l=e.scrollFactorX,f=e.scrollFactorY,d=e.x,p=e.y,m=e.scaleX,v=e.scaleY,g=e.tileset,y=0;y<g.length;y++)for(var b=g[y],x=b.glTexture,w=0;w<s;w++){var E=o[w],_=u[E.index];if(_===b){var S=_.getTileTextureCoordinates(E.index);if(null!==S){var T=E.width,A=E.height,M=S.x,C=S.y,O=.5*E.width,N=.5*E.height,k=h(E.tint,a*E.alpha);c.batchTexture(e,x,x.width,x.height,d+(O+E.pixelX)*m,p+(N+E.pixelY)*v,E.width,E.height,m,v,E.rotation,E.flipX,E.flipY,l,f,O,N,M,C,T,A,k,k,k,k,!1,0,0,i,null,!0)}}}}},function(t,e){t.exports=function(t,e,n,r,i){e.cull(r);var o=e.culledTiles,s=o.length;if(0!==s){var a=t._tempMatrix1,u=t._tempMatrix2,c=t._tempMatrix3;u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(r.matrix);var h=t.currentContext,l=e.gidMap;h.save(),i?(a.multiplyWithOffset(i,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y,a.multiply(u,c),c.copyToContext(h)):(u.e-=r.scrollX*e.scrollFactorX,u.f-=r.scrollY*e.scrollFactorY,u.copyToContext(h));for(var f=r.alpha*e.alpha,d=0;d<s;d++){var p=o[d],m=l[p.index];if(m){var v=m.image.getSourceImage(),g=m.getTileTextureCoordinates(p.index);if(g){var y=p.width/2,b=p.height/2;h.save(),h.translate(p.pixelX+y,p.pixelY+b),0!==p.rotation&&h.rotate(p.rotation),(p.flipX||p.flipY)&&h.scale(p.flipX?-1:1,p.flipY?-1:1),h.globalAlpha=f*p.alpha,h.drawImage(v,g.x,g.y,p.width,p.height,-y,-b,p.width,p.height),h.restore()}}}h.restore()}}},function(t,e,n){var r=n(2),i=n(2);r=n(1640),i=n(1641),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r){var i=e.tileset,o=e.pipeline,s=o.vertexBuffer;t.setPipeline(o),o.modelIdentity(),o.modelTranslate(e.x-r.scrollX*e.scrollFactorX,e.y-r.scrollY*e.scrollFactorY,0),o.modelScale(e.scaleX,e.scaleY,1),o.viewLoad2D(r.matrix.matrix);for(var a=0;a<i.length;a++)e.upload(r,a),e.vertexCount[a]>0&&(t.currentPipeline&&t.currentPipeline.vertexCount>0&&t.flush(),o.vertexBuffer=e.vertexBuffer[a],t.setPipeline(o),t.setTexture2D(i[a].glTexture,0),t.gl.drawArrays(o.topology,0,e.vertexCount[a]));o.vertexBuffer=s,o.viewIdentity(),o.modelIdentity()}},function(t,e){t.exports=function(t,e,n,r,i){e.cull(r);var o=e.culledTiles,s=o.length;if(0!==s){var a=t._tempMatrix1,u=t._tempMatrix2,c=t._tempMatrix3;u.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(r.matrix);var h=t.currentContext,l=e.gidMap;h.save(),i?(a.multiplyWithOffset(i,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),u.e=e.x,u.f=e.y,a.multiply(u,c),c.copyToContext(h)):(u.e-=r.scrollX*e.scrollFactorX,u.f-=r.scrollY*e.scrollFactorY,u.copyToContext(h));var f=r.alpha*e.alpha;h.globalAlpha=r.alpha*e.alpha;for(var d=0;d<s;d++){var p=o[d],m=l[p.index];if(m){var v=m.image.getSourceImage(),g=m.getTileTextureCoordinates(p.index);if(g){var y=m.tileWidth,b=m.tileHeight,x=y/2,w=b/2;h.save(),h.translate(p.pixelX+x,p.pixelY+w),0!==p.rotation&&h.rotate(p.rotation),(p.flipX||p.flipY)&&h.scale(p.flipX?-1:1,p.flipY?-1:1),h.globalAlpha=f*p.alpha,h.drawImage(v,g.x,g.y,y,b,-x,-w,y,b),h.restore()}}}h.restore()}}},function(t,e,n){var r=n(27),i=n(357);r.register("tilemap",function(t){var e=void 0!==t?t:{};return i(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)})},function(t,e,n){var r=n(13),i=n(357);r.register("tilemap",function(t,e,n,r,o,s,a){return null===t&&(t=void 0),null===e&&(e=void 0),null===n&&(n=void 0),null===r&&(r=void 0),null===o&&(o=void 0),i(this.scene,t,e,n,r,o,s,a)})},function(t,e,n){t.exports={Clock:n(1645),TimerEvent:n(671)}},function(t,e,n){var r=n(0),i=n(29),o=n(34),s=n(671),a=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.preUpdate,this),t.on(o.UPDATE,this.update,this),t.once(o.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e=new s(t);return this._pendingInsertion.push(e),e},delayedCall:function(t,e,n,r){return this.addEvent({delay:t,callback:e,args:n,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var n,r;for(n=0;n<t;n++){r=this._pendingRemoval[n];var i=this._active.indexOf(r);i>-1&&this._active.splice(i,1),r.destroy()}for(n=0;n<e;n++)r=this._pendingInsertion[n],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var n=0;n<this._active.length;n++){var r=this._active[n];if(!r.paused&&(r.elapsed+=e*r.timeScale,r.elapsed>=r.delay)){var i=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=i,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(o.PRE_UPDATE,this.preUpdate,this),e.off(o.UPDATE,this.update,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});i.register("Clock",a,"time"),t.exports=a},function(t,e,n){var r=n(174),i=n(37),o={Builders:n(1647),Events:n(677),TweenManager:n(1655),Tween:n(361),TweenData:n(362),Timeline:n(676)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={GetBoolean:n(173),GetEaseFunction:n(182),GetNewValue:n(243),GetProps:n(672),GetTargets:n(358),GetTweens:n(673),GetValueOp:n(359),NumberTweenBuilder:n(674),TimelineBuilder:n(675),TweenBuilder:n(244)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e,n){var r=n(221),i=n(0),o=n(674),s=n(29),a=n(34),u=n(675),c=n(174),h=n(244),l=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.preUpdate,this),t.on(a.UPDATE,this.update,this),t.once(a.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return u(this,t)},timeline:function(t){var e=u(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return h(this,t)},add:function(t){var e=h(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=o(this,t);return this._add.push(e),this._toProcess++,e},preUpdate:function(){if(0!==this._toProcess){var t,e,n=this._destroy,r=this._active,i=this._pending;for(t=0;t<n.length;t++){e=n[t];var o=r.indexOf(e);-1===o?(o=i.indexOf(e))>-1&&(e.state=c.REMOVED,i.splice(o,1)):(e.state=c.REMOVED,r.splice(o,1))}for(n.length=0,n=this._add,t=0;t<n.length;t++)(e=n[t]).state===c.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));n.length=0,this._toProcess=0}},update:function(t,e){var n,r=this._active;e*=this.timeScale;for(var i=0;i<r.length;i++)(n=r[i]).update(t,e)&&(this._destroy.push(n),this._toProcess++)},remove:function(t){return r(this._add,t),r(this._pending,t),r(this._active,t),r(this._destroy,t),t.state=c.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=c.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var n=[null],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var i in this.list)n[0]=this.list[i],t.apply(e,n)},getAllTweens:function(){for(var t=this._active,e=[],n=0;n<t.length;n++)e.push(t[n]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t){var e,n,r=this._active,i=[];if(Array.isArray(t))for(n=0;n<r.length;n++){e=r[n];for(var o=0;o<t.length;o++)e.hasTarget(t[o])&&i.push(e)}else for(n=0;n<r.length;n++)(e=r[n]).hasTarget(t)&&i.push(e);return i},isTweening:function(t){for(var e,n=this._active,r=0;r<n.length;r++)if((e=n[r]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),n=0;n<e.length;n++)e[n].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(a.PRE_UPDATE,this.preUpdate,this),t.off(a.UPDATE,this.update,this),t.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("TweenManager",l,"tweens"),t.exports=l},function(t,e,n){t.exports={Array:n(309),Base64:n(1657),Objects:n(1659),String:n(1663)}},function(t,e,n){t.exports={ArrayBufferToBase64:n(1658),Base64ToArrayBuffer:n(542)}},function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var r=new Uint8Array(t),i=r.length,o=e?"data:"+e+";base64,":"",s=0;s<i;s+=3)o+=n[r[s]>>2],o+=n[(3&r[s])<<4|r[s+1]>>4],o+=n[(15&r[s+1])<<2|r[s+2]>>6],o+=n[63&r[s+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o}},function(t,e,n){t.exports={Clone:n(125),Extend:n(37),GetAdvancedValue:n(25),GetFastValue:n(1),GetMinMaxValue:n(1660),GetValue:n(14),HasAll:n(1661),HasAny:n(561),HasValue:n(153),IsPlainObject:n(16),Merge:n(124),MergeRight:n(1662),Pick:n(660),SetValue:n(582)}},function(t,e,n){var r=n(14),i=n(40);t.exports=function(t,e,n,o,s){void 0===s&&(s=n);var a=r(t,e,s);return i(a,n,o)}},function(t,e){t.exports=function(t,e){for(var n=0;n<e.length;n++)if(!t.hasOwnProperty(e[n]))return!1;return!0}},function(t,e,n){var r=n(125);t.exports=function(t,e){var n=r(t);for(var i in e)n.hasOwnProperty(i)&&(n[i]=e[i]);return n}},function(t,e,n){t.exports={Format:n(1664),Pad:n(287),Reverse:n(1665),UppercaseFirst:n(531),UUID:n(564)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,function(t,n){return e[Number(n)-1]})}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e,n){t.exports={SoundManagerCreator:n(536),Events:n(126),BaseSound:n(225),BaseSoundManager:n(224),WebAudioSound:n(543),WebAudioSoundManager:n(541),HTML5AudioSound:n(538),HTML5AudioSoundManager:n(537),NoAudioSound:n(540),NoAudioSoundManager:n(539)}},function(t,e,n){t.exports={Camera:n(363),CameraManager:n(1668),OrthographicCamera:n(678),PerspectiveCamera:n(679)}},function(t,e,n){var r=n(0),i=n(678),o=n(679),s=n(29),a=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.cameras=[],t.sys.events.once("boot",this.boot,this),t.sys.events.on("start",this.start,this)},boot:function(){this.systems.events.once("destroy",this.destroy,this)},start:function(){var t=this.systems.events;t.on("update",this.update,this),t.once("shutdown",this.shutdown,this)},add:function(t,e,n){return this.addPerspectiveCamera(t,e,n)},addOrthographicCamera:function(t,e){var n=this.scene.sys.game.config;void 0===t&&(t=n.width),void 0===e&&(e=n.height);var r=new i(this.scene,t,e);return this.cameras.push(r),r},addPerspectiveCamera:function(t,e,n){var r=this.scene.sys.game.config;void 0===t&&(t=80),void 0===e&&(e=r.width),void 0===n&&(n=r.height);var i=new o(this.scene,t,e,n);return this.cameras.push(i),i},getCamera:function(t){for(var e=0;e<this.cameras.length;e++)if(this.cameras[e].name===t)return this.cameras[e];return null},removeCamera:function(t){var e=this.cameras.indexOf(t);-1!==e&&this.cameras.splice(e,1)},removeAll:function(){for(;this.cameras.length>0;){this.cameras.pop().destroy()}return this.main},update:function(t,e){for(var n=0,r=this.cameras.length;n<r;++n)this.cameras[n].update(t,e)},shutdown:function(){var t=this.systems.events;t.off("update",this.update,this),t.off("shutdown",this.shutdown,this),this.removeAll()},destroy:function(){this.shutdown(),this.scene.sys.events.off("start",this.start,this),this.scene=null,this.systems=null}});s.register("CameraManager3D",a,"cameras3d"),t.exports=a},function(t,e,n){var r=n(245);n(13).register("sprite3D",function(t,e,n,i,o){var s=new r(this.scene,t,e,n,i,o);return this.displayList.add(s.gameObject),this.updateList.add(s.gameObject),s})},function(t,e,n){var r=n(57),i=n(312),o=n(27),s=n(25),a=n(245);o.register("sprite3D",function(t,e){void 0===t&&(t={});var n=s(t,"key",null),o=s(t,"frame",null),u=new a(this.scene,0,0,n,o);return void 0!==e&&(t.add=e),r(this.scene,u,t),i(u,t),u})},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,u=1,c={},h=!1,l=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},f.clearImmediate=d}function d(t){delete c[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=c[t];if(e){h=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(50),n(81))},function(t,e,n){"use strict";var r=n(1673);t.exports=function t(e){var i=r.create(e);return i.create=t,i.import(n(1679)),i}()},function(t,e,n){"use strict";n(1674);var r=n(15).isFactory,i=n(681),o=n(682),s=n(1677),a=n(1678);e.create=function(t){if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var e=[],n=[],u=o.mixin({});u.type={},u.expression={transform:{},mathWithTransform:{}},u.typed=i.create(u.type);var c={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function h(t){if(!r(t))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var i,o=e.indexOf(t);return-1===o?(i=!0===t.math?t.factory(u.type,c,h,u.typed,u):t.factory(u.type,c,h,u.typed),e.push(t),n.push(i)):i=n[o],i}return u.import=h(s),u.config=h(a),u.expression.mathWithTransform.config=u.config,t&&u.config(t),u}},function(t,e,n){"use strict";Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isNaN=Number.isNaN||function(t){return t!=t}},function(t,e,n){"use strict";var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){function t(){return!0}function e(){return!1}function n(){}return function r(){var i=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t&&t.constructor===Object}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],o={name:"any",test:t},s=[],a=[],u={types:i,conversions:a,ignore:s};function c(t){var e=F(u.types,function(e){return e.name===t});if(e)return e;if("any"===t)return o;var n=F(u.types,function(e){return e.name.toLowerCase()===t.toLowerCase()});throw new TypeError('Unknown type "'+t+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function h(t){return t===o?999:u.types.indexOf(t)}function l(t){var e=F(u.types,function(e){return e.test(t)});if(e)return e.name;throw new TypeError("Value has unknown type. Value: "+t)}function f(t){return t.map(function(t){var e=t.types.map(x);return(t.restParam?"...":"")+e.join("|")}).join(",")}function d(t,e){var n=0===t.indexOf("..."),r=n?t.length>3?t.slice(3):"any":t,i=r.split("|").map(k).filter(R).filter(N),o=function(t,e){var n={};return t.forEach(function(t){-1!==e.indexOf(t.from)||-1===e.indexOf(t.to)||n[t.from]||(n[t.from]=t)}),Object.keys(n).map(function(t){return n[t]})}(e,i),s=i.map(function(t){var e=c(t);return{name:t,typeIndex:h(e),test:e.test,conversion:null,conversionIndex:-1}}),a=o.map(function(t){var n=c(t.from);return{name:t.from,typeIndex:h(n),test:n.test,conversion:t,conversionIndex:e.indexOf(t)}});return{types:s.concat(a),restParam:n}}function p(t){var e=D(t);return!!e&&e.restParam}function m(t){return t.types.some(function(t){return null!=t.conversion})}function v(e){if(e&&0!==e.types.length){if(1===e.types.length)return c(e.types[0].name).test;if(2===e.types.length){var n=c(e.types[0].name).test,r=c(e.types[1].name).test;return function(t){return n(t)||r(t)}}var i=e.types.map(function(t){return c(t.name).test});return function(t){for(var e=0;e<i.length;e++)if(i[e](t))return!0;return!1}}return t}function g(t){var e,n,r,i;if(p(t)){var o=(e=(i=t,i.slice(0,i.length-1)).map(v)).length,s=v(D(t));return function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return function(t){for(var e=o;e<t.length;e++)if(!s(t[e]))return!1;return!0}(t)&&t.length>=o+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(n=v(t[0]),function(t){return n(t[0])&&1===t.length}):2===t.length?(n=v(t[0]),r=v(t[1]),function(t){return n(t[0])&&r(t[1])&&2===t.length}):(e=t.map(v),function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return t.length===e.length})}function y(t,e){return e<t.params.length?t.params[e]:p(t.params)?D(t.params):null}function b(t,e,n){var r=y(t,e),i=r?n?r.types.filter(w):r.types:[];return i.map(x)}function x(t){return t.name}function w(t){return null===t.conversion||void 0===t.conversion}function E(t,e){var n=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return Object.keys(e)}(z(t,function(t){return b(t,e,!1)}));return-1!==n.indexOf("any")?["any"]:n}function _(t){for(var e=999,n=0;n<t.types.length;n++)w(t.types[n])&&(e=Math.min(e,t.types[n].typeIndex));return e}function S(t){for(var e=999,n=0;n<t.types.length;n++)w(t.types[n])||(e=Math.min(e,t.types[n].conversionIndex));return e}function T(t,e){var n;return 0!=(n=t.restParam-e.restParam)?n:0!=(n=m(t)-m(e))?n:0!=(n=_(t)-_(e))?n:S(t)-S(e)}function A(t,e){var n,r,i=Math.min(t.params.length,e.params.length);if(0!=(r=t.params.some(m)-e.params.some(m)))return r;for(n=0;n<i;n++)if(0!=(r=m(t.params[n])-m(e.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=T(t.params[n],e.params[n])))return r;return t.params.length-e.params.length}function M(t){var e,n,r,i,o=[],s=[];switch(t.types.forEach(function(t){t.conversion&&(o.push(c(t.conversion.from).test),s.push(t.conversion.convert))}),s.length){case 0:return function(t){return t};case 1:return e=o[0],r=s[0],function(t){return e(t)?r(t):t};case 2:return e=o[0],n=o[1],r=s[0],i=s[1],function(t){return e(t)?r(t):n(t)?i(t):t};default:return function(t){for(var e=0;e<s.length;e++)if(o[e](t))return s[e](t);return t}}}function C(t,e){return function t(n,r,i){if(r<n.length){var o,s=n[r],a=e?s.types.filter(w):s.types;if(s.restParam){var u=a.filter(w);o=u.length<a.length?[u,a]:[a]}else o=a.map(function(t){return[t]});return z(o,function(e){return t(n,r+1,i.concat([e]))})}var c=i.map(function(t,e){return{types:t,restParam:e===n.length-1&&p(n)}});return[c]}(t,0,[])}function O(t,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map(function(t){return function(t,e,n){var r=[];return""!==t.trim()&&(r=t.split(",").map(k).map(function(t,e,r){var i=d(t,n);if(i.restParam&&e!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+t+'": only allowed for the last parameter');return i})),r.some(I)?null:{params:r,fn:e}}(t,r[t],u.conversions)}).filter(P).forEach(function(t){var e=F(i,function(e){return function(t,e){for(var n=Math.max(t.params.length,e.params.length),r=0;r<n;r++){var i=b(t,r,!0),o=b(e,r,!0);if(!B(i,o))return!1}var s=t.params.length,a=e.params.length,u=p(t.params),c=p(e.params);return u?c?s===a:a>=s:c?s>=a:s===a}(e,t)});if(e)throw new TypeError('Conflicting signatures "'+f(e.params)+'" and "'+f(t.params)+'".');i.push(t)});var o=z(i,function(t){var e=t?C(t.params,!1):[];return e.map(function(e){return{params:e,fn:t.fn}})}).filter(P);o.sort(A);var s=o[0]&&o[0].params.length<=2&&!p(o[0].params),a=o[1]&&o[1].params.length<=2&&!p(o[1].params),c=o[2]&&o[2].params.length<=2&&!p(o[2].params),h=o[3]&&o[3].params.length<=2&&!p(o[3].params),x=o[4]&&o[4].params.length<=2&&!p(o[4].params),w=o[5]&&o[5].params.length<=2&&!p(o[5].params),_=s&&a&&c&&h&&x&&w,S=o.map(function(t){return g(t.params)}),T=s?v(o[0].params[0]):e,O=a?v(o[1].params[0]):e,N=c?v(o[2].params[0]):e,R=h?v(o[3].params[0]):e,D=x?v(o[4].params[0]):e,j=w?v(o[5].params[0]):e,U=s?v(o[0].params[1]):e,Y=a?v(o[1].params[1]):e,W=c?v(o[2].params[1]):e,X=h?v(o[3].params[1]):e,G=x?v(o[4].params[1]):e,V=w?v(o[5].params[1]):e,q=o.map(function(t){return function(t,e){var n=e;if(t.some(m)){var r=p(t),i=t.map(M);n=function(){for(var t=[],n=r?arguments.length-1:arguments.length,o=0;o<n;o++)t[o]=i[o](arguments[o]);return r&&(t[n]=arguments[n].map(i[n])),e.apply(null,t)}}var o=n;if(p(t)){var s=t.length-1;o=function(){return n.apply(null,L(arguments,0,s).concat([L(arguments,s)]))}}return o}(t.params,t.fn)}),H=s?q[0]:n,K=a?q[1]:n,$=c?q[2]:n,J=h?q[3]:n,Z=x?q[4]:n,Q=w?q[5]:n,tt=s?o[0].params.length:-1,et=a?o[1].params.length:-1,nt=c?o[2].params.length:-1,rt=h?o[3].params.length:-1,it=x?o[4].params.length:-1,ot=w?o[5].params.length:-1,st=_?6:0,at=o.length,ut=function(){for(var e=st;e<at;e++)if(S[e](arguments))return q[e].apply(null,arguments);throw function(t,e,n){var r,i,o,s=t||"unnamed",a=n;for(o=0;o<e.length;o++){var u=a.filter(function(t){var n=v(y(t,o));return(o<t.params.length||p(t.params))&&n(e[o])});if(0===u.length){if((i=E(a,o)).length>0){var c=l(e[o]);return(r=new TypeError("Unexpected type of argument in function "+s+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+o+")")).data={category:"wrongType",fn:s,index:o,actual:c,expected:i},r}}else a=u}var h=a.map(function(t){return p(t.params)?1/0:t.params.length});if(e.length<Math.min.apply(null,h))return i=E(a,o),(r=new TypeError("Too few arguments in function "+s+" (expected: "+i.join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:s,index:e.length,expected:i},r;var f=Math.max.apply(null,h);return e.length>f?((r=new TypeError("Too many arguments in function "+s+" (expected: "+f+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:s,index:e.length,expectedLength:f},r):((r=new TypeError('Arguments of type "'+e.join(", ")+'" do not match any of the defined signatures of function '+s+".")).data={category:"mismatch",actual:e.map(l)},r)}(t,arguments,o)},ct=function(t,e){return arguments.length===tt&&T(t)&&U(e)?H.apply(null,arguments):arguments.length===et&&O(t)&&Y(e)?K.apply(null,arguments):arguments.length===nt&&N(t)&&W(e)?$.apply(null,arguments):arguments.length===rt&&R(t)&&X(e)?J.apply(null,arguments):arguments.length===it&&D(t)&&G(e)?Z.apply(null,arguments):arguments.length===ot&&j(t)&&V(e)?Q.apply(null,arguments):ut.apply(null,arguments)};try{Object.defineProperty(ct,"name",{value:t})}catch(t){}return ct.signatures=function(t){var e={};return t.forEach(function(t){t.params.some(m)||C(t.params,!0).forEach(function(n){e[f(n)]=t.fn})}),e}(o),ct}function N(t){return-1===u.ignore.indexOf(t)}function k(t){return t.trim()}function R(t){return!!t}function P(t){return null!==t}function I(t){return 0===t.types.length}function D(t){return t[t.length-1]}function L(t,e,n){return Array.prototype.slice.call(t,e,n)}function B(t,e){for(var n=0;n<t.length;n++)if(r=e,i=t[n],-1!==r.indexOf(i))return!0;var r,i;return!1}function F(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function z(t,e){return Array.prototype.concat.apply([],t.map(e))}function j(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(("object"==typeof r.signatures||"string"==typeof r.signature)&&""!==r.name)if(""===e)e=r.name;else if(e!==r.name){var i=new Error("Function names do not match (expected: "+e+", actual: "+r.name+")");throw i.data={actual:r.name,expected:e},i}}return e}function U(t){var e,n={};function r(t,r){if(n.hasOwnProperty(t)&&r!==n[t])throw(e=new Error('Signature "'+t+'" is defined twice')).data={signature:t},e}for(var i=0;i<t.length;i++){var o=t[i];if("object"==typeof o.signatures)for(var s in o.signatures)o.signatures.hasOwnProperty(s)&&(r(s,o.signatures[s]),n[s]=o.signatures[s]);else{if("string"!=typeof o.signature)throw(e=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},e;r(o.signature,o),n[o.signature]=o}}return n}return(u=O("typed",{"string, Object":O,Object:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);var r=j(e);return O(r,t)},"...Function":function(t){return O(j(t),U(t))},"string, ...Function":function(t,e){return O(t,U(e))}})).create=r,u.types=i,u.conversions=a,u.ignore=s,u.convert=function(t,e){var n=l(t);if(e===n)return t;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===e)return i.convert(t)}throw new Error("Cannot convert from "+n+" to "+e)},u.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof e){n=e.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");n=e}var i=n.join(","),o=t.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(t,e){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==e)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,t);u.types.push(t)},u.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(t)},u}()})?r.apply(e,i):r)||(t.exports=o)},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,s=r.length;o<s;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(15).lazy,o=n(15).isFactory,s=n(15).traverse,a=n(191);e.math=!0,e.name="import",e.factory=function(t,e,n,u,c){function h(t,e,n){if(n.wrap&&"function"==typeof e&&(i=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var i=arguments[e];t[e]=i&&i.valueOf()}return r.apply(c,t)},(r=e).transform&&(i.transform=r.transform),e=i),m(c[t])&&m(e))return e=n.override?u(t,e.signatures):u(c[t],e),c[t]=e,l(t,e),void c.emit("import",t,function(){return e});var r,i;if(void 0===c[t]||n.override)return c[t]=e,l(t,e),void c.emit("import",t,function(){return e});if(!n.silent)throw new Error('Cannot import "'+t+'": already exists')}function l(t,e){e&&"function"==typeof e.transform?(c.expression.transform[t]=e.transform,v(t)&&(c.expression.mathWithTransform[t]=e.transform)):(delete c.expression.transform[t],v(t)&&(c.expression.mathWithTransform[t]=e))}function f(t){delete c.expression.transform[t],v(t)?c.expression.mathWithTransform[t]=c[t]:delete c.expression.mathWithTransform[t]}function d(t,e){if("string"==typeof t.name){var r=t.name,o=r in c.expression.transform,a=t.path?s(c,t.path):c,h=a.hasOwnProperty(r)?a[r]:void 0,l=function(){var i=n(t);if(i&&"function"==typeof i.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(m(h)&&m(i))return e.override||(i=u(h,i)),i;if(void 0===h||e.override)return i;if(!e.silent)throw new Error('Cannot import "'+r+'": already exists')};!1!==t.lazy?(i(a,r,l),o?f(r):("expression.transform"===t.path||g(t))&&i(c.expression.mathWithTransform,r,l)):(a[r]=l(),o?f(r):("expression.transform"===t.path||g(t))&&(c.expression.mathWithTransform[r]=l())),c.emit("import",r,l,t.path)}else n(t)}function p(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&t.isUnit(e)||e&&t.isComplex(e)||e&&t.isBigNumber(e)||e&&t.isFraction(e)||e&&t.isMatrix(e)||e&&Array.isArray(e)}function m(t){return"function"==typeof t&&"object"===r(t.signatures)}function v(t){return!y.hasOwnProperty(t)}function g(t){return void 0===t.path&&!y.hasOwnProperty(t.name)}var y={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function t(e,n){var i=arguments.length;if(1!==i&&2!==i)throw new a("import",i,1,2);if(n||(n={}),o(e))d(e,n);else if(Array.isArray(e))e.forEach(function(e){t(e,n)});else if("object"===r(e)){for(var s in e)if(e.hasOwnProperty(s)){var u=e[s];p(u)?h(s,u,n):o(e)?d(e,n):t(u,n)}}else if(!n.silent)throw new TypeError("Factory, Object, or Array expected")}},e.lazy=!0},function(t,e,n){"use strict";var r=n(15);function i(t,e,n){if(void 0!==t[e]&&(i=n,o=t[e],-1===i.indexOf(o))){var r=function(t,e){return t.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())}(n,t[e]);-1!==r?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+n[r]+'" instead of "'+t[e]+'".'),t[e]=n[r]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}var i,o}e.name="config",e.math=!0,e.factory=function(t,e,n,o,s){var a=["Matrix","Array"],u=["number","BigNumber","Fraction"];function c(t){if(t){var n=r.map(e,r.clone);i(t,"matrix",a),i(t,"number",u),r.deepExtend(e,t);var o=r.map(e,r.clone),c=r.map(t,r.clone);return s.emit("config",o,n,c),o}return r.map(e,r.clone)}return c.MATRIX=a,c.NUMBER=u,c}},function(t,e,n){"use strict";t.exports=[n(1680),n(1712),n(1714),n(1866),n(2096),n(2098)]},function(t,e,n){"use strict";t.exports=[n(1681),n(1684),n(1685),n(1689),n(1693),n(1696),n(248),n(249),n(1704),n(1705),n(1706)]},function(t,e,n){"use strict";t.exports=[n(1682),n(683)]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.factory=function(t,e,n,r,o){var s=i.default.clone({precision:e.precision});return s.prototype.type="BigNumber",s.prototype.isBigNumber=!0,s.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},s.fromJSON=function(t){return new s(t.value)},o.on("config",function(t,e){t.precision!==e.precision&&s.config({precision:t.precision})}),s},e.math=e.path=e.name=void 0;var r,i=(r=n(1683))&&r.__esModule?r:{default:r};e.name="BigNumber";e.path="type";e.math=!0},function(t,e,n){var r;!function(i){"use strict";var o,s,a,u=9e15,c=1e9,h="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",d={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},p=!0,m="[DecimalError] ",v=m+"Invalid argument: ",g=m+"Precision limit exceeded",y=m+"crypto unavailable",b=Math.floor,x=Math.pow,w=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,E=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,S=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,T=1e7,A=7,M=l.length-1,C=f.length-1,O={name:"[object Decimal]"};function N(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",(n=A-r.length)&&(o+=U(n)),o+=r;s=t[e],(n=A-(r=s+"").length)&&(o+=U(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function k(t,e,n){if(t!==~~t||t<e||t>n)throw Error(v+t)}function R(t,e,n,r){var i,o,s,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=A,i=0):(i=Math.ceil((e+1)/A),e%=A),o=x(10,A-e),a=t[i]%o|0,null==r?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),s=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(t[i+1]/o/100|0)==x(10,e-2)-1||(a==o/2||0==a)&&0==(t[i+1]/o/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),s=(r||n<4)&&9999==a||!r&&n>3&&4999==a):s=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(t[i+1]/o/1e3|0)==x(10,e-3)-1,s}function P(t,e,n){for(var r,i,o=[0],s=0,a=t.length;s<a;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=h.indexOf(t.charAt(s++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}O.absoluteValue=O.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),D(t)},O.ceil=function(){return D(new this.constructor(this),this.e+1,2)},O.comparedTo=O.cmp=function(t){var e,n,r,i,o=this,s=o.d,a=(t=new o.constructor(t)).d,u=o.s,c=t.s;if(!s||!a)return u&&c?u!==c?u:s===a?0:!s^u<0?1:-1:NaN;if(!s[0]||!a[0])return s[0]?u:a[0]?-c:0;if(u!==c)return u;if(o.e!==t.e)return o.e>t.e^u<0?1:-1;for(e=0,n=(r=s.length)<(i=a.length)?r:i;e<n;++e)if(s[e]!==a[e])return s[e]>a[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},O.cosine=O.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+A,r.rounding=1,n=function(t,e){var n,r,i=e.d.length;i<32?(n=Math.ceil(i/3),r=(1/J(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10");t.precision+=n,e=$(t,1,e.times(r),new t(1));for(var o=n;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}(r,Z(r,n)),r.precision=t,r.rounding=e,D(2==a||3==a?n.neg():n,t,e,!0)):new r(1):new r(NaN)},O.cubeRoot=O.cbrt=function(){var t,e,n,r,i,o,s,a,u,c,h=this,l=h.constructor;if(!h.isFinite()||h.isZero())return new l(h);for(p=!1,(o=h.s*x(h.s*h,1/3))&&Math.abs(o)!=1/0?r=new l(o.toString()):(n=N(h.d),(o=((t=h.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=x(n,1/3),t=b((t+1)/3)-(t%3==(t<0?-1:2)),(r=new l(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=h.s),s=(t=l.precision)+3;;)if(c=(u=(a=r).times(a).times(a)).plus(h),r=I(c.plus(h).times(a),c.plus(u),s+2,1),N(a.d).slice(0,s)===(n=N(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(D(r,t+1,1),e=!r.times(r).times(r).eq(h));break}if(!i&&(D(a,t+1,0),a.times(a).times(a).eq(h))){r=a;break}s+=4,i=1}return p=!0,D(r,t,l.rounding,e)},O.decimalPlaces=O.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-b(this.e/A))*A,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},O.dividedBy=O.div=function(t){return I(this,new this.constructor(t))},O.dividedToIntegerBy=O.divToInt=function(t){var e=this.constructor;return D(I(this,new e(t),0,1,1),e.precision,e.rounding)},O.equals=O.eq=function(t){return 0===this.cmp(t)},O.floor=function(){return D(new this.constructor(this),this.e+1,3)},O.greaterThan=O.gt=function(t){return this.cmp(t)>0},O.greaterThanOrEqualTo=O.gte=function(t){var e=this.cmp(t);return 1==e||0===e},O.hyperbolicCosine=O.cosh=function(){var t,e,n,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,(i=o.d.length)<32?e=(1/J(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=$(s,1,o.times(e),new s(1),!0);for(var u,c=t,h=new s(8);c--;)u=o.times(o),o=a.minus(u.times(h.minus(u.times(h))));return D(o,s.precision=n,s.rounding=r,!0)},O.hyperbolicSine=O.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=$(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=$(o,2,i=i.times(1/J(5,t)),i,!0);for(var s,a=new o(5),u=new o(16),c=new o(20);t--;)s=i.times(i),i=i.times(a.plus(s.times(u.times(s).plus(c))))}return o.precision=e,o.rounding=n,D(i,e,n,!0)},O.hyperbolicTangent=O.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,I(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},O.inverseCosine=O.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?e.isNeg()?z(n,i,o):new n(0):new n(NaN):e.isZero()?z(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=z(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},O.inverseHyperbolicCosine=O.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,p=!1,n=n.times(n).minus(1).sqrt().plus(n),p=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},O.inverseHyperbolicSine=O.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,p=!1,n=n.times(n).plus(1).sqrt().plus(n),p=!0,r.precision=t,r.rounding=e,n.ln())},O.inverseHyperbolicTangent=O.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?D(new o(i),t,e,!0):(o.precision=n=r-i.e,i=I(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},O.inverseSine=O.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=z(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},O.inverseTangent=O.atan=function(){var t,e,n,r,i,o,s,a,u,c=this,h=c.constructor,l=h.precision,f=h.rounding;if(c.isFinite()){if(c.isZero())return new h(c);if(c.abs().eq(1)&&l+4<=C)return(s=z(h,l+4,f).times(.25)).s=c.s,s}else{if(!c.s)return new h(NaN);if(l+4<=C)return(s=z(h,l+4,f).times(.5)).s=c.s,s}for(h.precision=a=l+10,h.rounding=1,t=n=Math.min(28,a/A+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(p=!1,e=Math.ceil(a/A),r=1,u=c.times(c),s=new h(c),i=c;-1!==t;)if(i=i.times(u),o=s.minus(i.div(r+=2)),i=i.times(u),void 0!==(s=o.plus(i.div(r+=2))).d[e])for(t=e;s.d[t]===o.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),p=!0,D(s,h.precision=l,h.rounding=f,!0)},O.isFinite=function(){return!!this.d},O.isInteger=O.isInt=function(){return!!this.d&&b(this.e/A)>this.d.length-2},O.isNaN=function(){return!this.s},O.isNegative=O.isNeg=function(){return this.s<0},O.isPositive=O.isPos=function(){return this.s>0},O.isZero=function(){return!!this.d&&0===this.d[0]},O.lessThan=O.lt=function(t){return this.cmp(t)<0},O.lessThanOrEqualTo=O.lte=function(t){return this.cmp(t)<1},O.logarithm=O.log=function(t){var e,n,r,i,o,s,a,u,c=this.constructor,h=c.precision,l=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(p=!1,s=V(this,a=h+5),r=e?F(c,a+10):V(t,a),R((u=I(s,r,a,1)).d,i=h,l))do{if(s=V(this,a+=10),r=e?F(c,a+10):V(t,a),u=I(s,r,a,1),!o){+N(u.d).slice(i+1,i+15)+1==1e14&&(u=D(u,h+1,0));break}}while(R(u.d,i+=10,l));return p=!0,D(u,h,l)},O.minus=O.sub=function(t){var e,n,r,i,o,s,a,u,c,h,l,f,d=this,m=d.constructor;if(t=new m(t),!d.d||!t.d)return d.s&&t.s?d.d?t.s=-t.s:t=new m(t.d||d.s!==t.s?d:NaN):t=new m(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(c=d.d,f=t.d,a=m.precision,u=m.rounding,!c[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!c[0])return new m(3===u?-0:0);t=new m(d)}return p?D(t,a,u):t}if(n=b(t.e/A),h=b(d.e/A),c=c.slice(),o=h-n){for((l=o<0)?(e=c,o=-o,s=f.length):(e=f,n=h,s=c.length),o>(r=Math.max(Math.ceil(a/A),s)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((l=(r=c.length)<(s=f.length))&&(s=r),r=0;r<s;r++)if(c[r]!=f[r]){l=c[r]<f[r];break}o=0}for(l&&(e=c,c=f,f=e,t.s=-t.s),s=c.length,r=f.length-s;r>0;--r)c[s++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&0===c[--i];)c[i]=T-1;--c[i],c[r]+=T}c[r]-=f[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=B(c,n),p?D(t,a,u):t):new m(3===u?-0:0)},O.modulo=O.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?D(new r(n),r.precision,r.rounding):(p=!1,9==r.modulo?(e=I(n,t.abs(),0,3,1)).s*=t.s:e=I(n,t,0,r.modulo,1),e=e.times(t),p=!0,n.minus(e))},O.naturalExponential=O.exp=function(){return G(this)},O.naturalLogarithm=O.ln=function(){return V(this)},O.negated=O.neg=function(){var t=new this.constructor(this);return t.s=-t.s,D(t)},O.plus=O.add=function(t){var e,n,r,i,o,s,a,u,c,h,l=this,f=l.constructor;if(t=new f(t),!l.d||!t.d)return l.s&&t.s?l.d||(t=new f(t.d||l.s===t.s?l:NaN)):t=new f(NaN),t;if(l.s!=t.s)return t.s=-t.s,l.minus(t);if(c=l.d,h=t.d,a=f.precision,u=f.rounding,!c[0]||!h[0])return h[0]||(t=new f(l)),p?D(t,a,u):t;if(o=b(l.e/A),r=b(t.e/A),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,s=h.length):(n=h,r=o,s=c.length),i>(s=(o=Math.ceil(a/A))>s?o+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=h.length)<0&&(i=s,n=h,h=c,c=n),e=0;i;)e=(c[--i]=c[i]+h[i]+e)/T|0,c[i]%=T;for(e&&(c.unshift(e),++r),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=B(c,r),p?D(t,a,u):t},O.precision=O.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(v+t);return n.d?(e=j(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},O.round=function(){var t=this,e=t.constructor;return D(new e(t),t.e+1,e.rounding)},O.sine=O.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+A,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return $(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=e.times(1/J(5,n)),e=$(t,2,e,e);for(var i,o=new t(5),s=new t(16),a=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(s.times(i).minus(a))));return e}(r,Z(r,n)),r.precision=t,r.rounding=e,D(a>2?n.neg():n,t,e,!0)):new r(NaN)},O.squareRoot=O.sqrt=function(){var t,e,n,r,i,o,s=this,a=s.d,u=s.e,c=s.s,h=s.constructor;if(1!==c||!a||!a[0])return new h(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);for(p=!1,0==(c=Math.sqrt(+s))||c==1/0?(((e=N(a)).length+u)%2==0&&(e+="0"),c=Math.sqrt(e),u=b((u+1)/2)-(u<0||u%2),r=new h(e=c==1/0?"1e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):r=new h(c.toString()),n=(u=h.precision)+3;;)if(r=(o=r).plus(I(s,o,n+2,1)).times(.5),N(o.d).slice(0,n)===(e=N(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(D(r,u+1,1),t=!r.times(r).eq(s));break}if(!i&&(D(o,u+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}return p=!0,D(r,u,h.rounding,t)},O.tangent=O.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=I(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,D(2==a||4==a?n.neg():n,t,e,!0)):new r(NaN)},O.times=O.mul=function(t){var e,n,r,i,o,s,a,u,c,h=this,l=h.constructor,f=h.d,d=(t=new l(t)).d;if(t.s*=h.s,!(f&&f[0]&&d&&d[0]))return new l(!t.s||f&&!f[0]&&!d||d&&!d[0]&&!f?NaN:f&&d?0*t.s:t.s/0);for(n=b(h.e/A)+b(t.e/A),(u=f.length)<(c=d.length)&&(o=f,f=d,d=o,s=u,u=c,c=s),o=[],r=s=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=u+r;i>r;)a=o[i]+d[r]*f[i-r-1]+e,o[i--]=a%T|0,e=a/T|0;o[i]=(o[i]+e)%T|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=B(o,n),p?D(t,l.precision,l.rounding):t},O.toBinary=function(t,e){return Q(this,2,t,e)},O.toDecimalPlaces=O.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(k(t,0,c),void 0===e?e=r.rounding:k(e,0,8),D(n,t+n.e+1,e))},O.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=L(r,!0):(k(t,0,c),void 0===e?e=i.rounding:k(e,0,8),n=L(r=D(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},O.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=L(i):(k(t,0,c),void 0===e?e=o.rounding:k(e,0,8),n=L(r=D(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},O.toFraction=function(t){var e,n,r,i,o,s,a,u,c,h,l,f,d=this,m=d.d,g=d.constructor;if(!m)return new g(d);if(c=n=new g(1),r=u=new g(0),s=(o=(e=new g(r)).e=j(m)-d.e-1)%A,e.d[0]=x(10,s<0?A+s:s),null==t)t=o>0?e:c;else{if(!(a=new g(t)).isInt()||a.lt(c))throw Error(v+a);t=a.gt(e)?o>0?e:c:a}for(p=!1,a=new g(N(m)),h=g.precision,g.precision=o=m.length*A*2;l=I(a,e,0,1,1),1!=(i=n.plus(l.times(r))).cmp(t);)n=r,r=i,i=c,c=u.plus(l.times(i)),u=i,i=e,e=a.minus(l.times(i)),a=i;return i=I(t.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=d.s,f=I(c,r,o,1).minus(d).abs().cmp(I(u,n,o,1).minus(d).abs())<1?[c,r]:[u,n],g.precision=h,p=!0,f},O.toHexadecimal=O.toHex=function(t,e){return Q(this,16,t,e)},O.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:k(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(p=!1,n=I(n,t,0,e,1).times(t),p=!0,D(n)):(t.s=n.s,n=t),n},O.toNumber=function(){return+this},O.toOctal=function(t,e){return Q(this,8,t,e)},O.toPower=O.pow=function(t){var e,n,r,i,o,s,a=this,u=a.constructor,c=+(t=new u(t));if(!(a.d&&t.d&&a.d[0]&&t.d[0]))return new u(x(+a,c));if((a=new u(a)).eq(1))return a;if(r=u.precision,o=u.rounding,t.eq(1))return D(a,r,o);if((e=b(t.e/A))>=t.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=Y(u,a,n,r),t.s<0?new u(1).div(i):D(i,r,o);if((s=a.s)<0){if(e<t.d.length-1)return new u(NaN);if(0==(1&t.d[e])&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(e=0!=(n=x(+a,c))&&isFinite(n)?new u(n+"").e:b(c*(Math.log("0."+N(a.d))/Math.LN10+a.e+1)))>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(p=!1,u.rounding=a.s=1,n=Math.min(12,(e+"").length),(i=G(t.times(V(a,r+n)),r)).d&&R((i=D(i,r+5,1)).d,r,o)&&(e=r+10,+N((i=D(G(t.times(V(a,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=D(i,r+1,0))),i.s=s,p=!0,u.rounding=o,D(i,r,o))},O.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=L(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(k(t,1,c),void 0===e?e=i.rounding:k(e,0,8),n=L(r=D(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},O.toSignificantDigits=O.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(k(t,1,c),void 0===e?e=n.rounding:k(e,0,8)),D(new n(this),t,e)},O.toString=function(){var t=this,e=t.constructor,n=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},O.truncated=O.trunc=function(){return D(new this.constructor(this),this.e+1,1)},O.valueOf=O.toJSON=function(){var t=this,e=t.constructor,n=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var I=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a,u,c){var h,l,f,d,p,m,v,g,y,x,w,E,_,S,M,C,O,N,k,R,P=r.constructor,I=r.s==i.s?1:-1,L=r.d,B=i.d;if(!(L&&L[0]&&B&&B[0]))return new P(r.s&&i.s&&(L?!B||L[0]!=B[0]:B)?L&&0==L[0]||!B?0*I:I/0:NaN);for(c?(p=1,l=r.e-i.e):(c=T,p=A,l=b(r.e/p)-b(i.e/p)),k=B.length,O=L.length,x=(y=new P(I)).d=[],f=0;B[f]==(L[f]||0);f++);if(B[f]>(L[f]||0)&&l--,null==o?(S=o=P.precision,a=P.rounding):S=u?o+(r.e-i.e)+1:o,S<0)x.push(1),m=!0;else{if(S=S/p+2|0,f=0,1==k){for(d=0,B=B[0],S++;(f<O||d)&&S--;f++)M=d*c+(L[f]||0),x[f]=M/B|0,d=M%B|0;m=d||f<O}else{for((d=c/(B[0]+1)|0)>1&&(B=t(B,d,c),L=t(L,d,c),k=B.length,O=L.length),C=k,E=(w=L.slice(0,k)).length;E<k;)w[E++]=0;(R=B.slice()).unshift(0),N=B[0],B[1]>=c/2&&++N;do{d=0,(h=e(B,w,k,E))<0?(_=w[0],k!=E&&(_=_*c+(w[1]||0)),(d=_/N|0)>1?(d>=c&&(d=c-1),1==(h=e(v=t(B,d,c),w,g=v.length,E=w.length))&&(d--,n(v,k<g?R:B,g,c))):(0==d&&(h=d=1),v=B.slice()),(g=v.length)<E&&v.unshift(0),n(w,v,E,c),-1==h&&(h=e(B,w,k,E=w.length))<1&&(d++,n(w,k<E?R:B,E,c)),E=w.length):0===h&&(d++,w=[0]),x[f++]=d,h&&w[0]?w[E++]=L[C]||0:(w=[L[C]],E=1)}while((C++<O||void 0!==w[0])&&S--);m=void 0!==w[0]}x[0]||x.shift()}if(1==p)y.e=l,s=m;else{for(f=1,d=x[0];d>=10;d/=10)f++;y.e=f+l*p-1,D(y,u?o+y.e+1:o,a,m)}return y}}();function D(t,e,n,r){var i,o,s,a,u,c,h,l,f,d=t.constructor;t:if(null!=e){if(!(l=t.d))return t;for(i=1,a=l[0];a>=10;a/=10)i++;if((o=e-i)<0)o+=A,s=e,u=(h=l[f=0])/x(10,i-s-1)%10|0;else if((f=Math.ceil((o+1)/A))>=(a=l.length)){if(!r)break t;for(;a++<=f;)l.push(0);h=u=0,i=1,s=(o%=A)-A+1}else{for(h=a=l[f],i=1;a>=10;a/=10)i++;u=(s=(o%=A)-A+i)<0?0:h/x(10,i-s-1)%10|0}if(r=r||e<0||void 0!==l[f+1]||(s<0?h:h%x(10,i-s-1)),c=n<4?(u||r)&&(0==n||n==(t.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?s>0?h/x(10,i-s):0:l[f-1])%10&1||n==(t.s<0?8:7)),e<1||!l[0])return l.length=0,c?(e-=t.e+1,l[0]=x(10,(A-e%A)%A),t.e=-e||0):l[0]=t.e=0,t;if(0==o?(l.length=f,a=1,f--):(l.length=f+1,a=x(10,A-o),l[f]=s>0?(h/x(10,i-s)%x(10,s)|0)*a:0),c)for(;;){if(0==f){for(o=1,s=l[0];s>=10;s/=10)o++;for(s=l[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(t.e++,l[0]==T&&(l[0]=1));break}if(l[f]+=a,l[f]!=T)break;l[f--]=0,a=1}for(o=l.length;0===l[--o];)l.pop()}return p&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function L(t,e,n){if(!t.isFinite())return q(t);var r,i=t.e,o=N(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+U(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+U(-i-1)+o,n&&(r=n-s)>0&&(o+=U(r))):i>=s?(o+=U(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+U(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=U(r))),o}function B(t,e){var n=t[0];for(e*=A;n>=10;n/=10)e++;return e}function F(t,e,n){if(e>M)throw p=!0,n&&(t.precision=n),Error(g);return D(new t(l),e,1,!0)}function z(t,e,n){if(e>C)throw Error(g);return D(new t(f),e,n,!0)}function j(t){var e=t.length-1,n=e*A+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function U(t){for(var e="";t--;)e+="0";return e}function Y(t,e,n,r){var i,o=new t(1),s=Math.ceil(r/A+4);for(p=!1;;){if(n%2&&tt((o=o.times(e)).d,s)&&(i=!0),0===(n=b(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}tt((e=e.times(e)).d,s)}return p=!0,o}function W(t){return 1&t.d[t.d.length-1]}function X(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;){if(!(r=new t(e[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function G(t,e){var n,r,i,o,s,a,u,c=0,h=0,l=0,f=t.constructor,d=f.rounding,m=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(p=!1,u=m):u=e,a=new f(.03125);t.e>-2;)t=t.times(a),l+=5;for(u+=r=Math.log(x(2,l))/Math.LN10*2+5|0,n=o=s=new f(1),f.precision=u;;){if(o=D(o.times(t),u,1),n=n.times(++h),N((a=s.plus(I(o,n,u,1))).d).slice(0,u)===N(s.d).slice(0,u)){for(i=l;i--;)s=D(s.times(s),u,1);if(null!=e)return f.precision=m,s;if(!(c<3&&R(s.d,u-r,d,c)))return D(s,f.precision=m,d,p=!0);f.precision=u+=10,n=o=a=new f(1),h=0,c++}s=a}}function V(t,e){var n,r,i,o,s,a,u,c,h,l,f,d=1,m=t,v=m.d,g=m.constructor,y=g.rounding,b=g.precision;if(m.s<0||!v||!v[0]||!m.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=m.s?NaN:v?0:m);if(null==e?(p=!1,h=b):h=e,g.precision=h+=10,r=(n=N(v)).charAt(0),!(Math.abs(o=m.e)<15e14))return c=F(g,h+2,b).times(o+""),m=V(new g(r+"."+n.slice(1)),h-10).plus(c),g.precision=b,null==e?D(m,b,y,p=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=N((m=m.times(t)).d)).charAt(0),d++;for(o=m.e,r>1?(m=new g("0."+n),o++):m=new g(r+"."+n.slice(1)),l=m,u=s=m=I(m.minus(1),m.plus(1),h,1),f=D(m.times(m),h,1),i=3;;){if(s=D(s.times(f),h,1),N((c=u.plus(I(s,new g(i),h,1))).d).slice(0,h)===N(u.d).slice(0,h)){if(u=u.times(2),0!==o&&(u=u.plus(F(g,h+2,b).times(o+""))),u=I(u,new g(d),h,1),null!=e)return g.precision=b,u;if(!R(u.d,h-10,y,a))return D(u,g.precision=b,y,p=!0);g.precision=h+=10,c=s=m=I(l.minus(1),l.plus(1),h,1),f=D(m.times(m),h,1),i=a=1}u=c,i+=2}}function q(t){return String(t.s*t.s/0)}function H(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%A,n<0&&(r+=A),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=A;r<i;)t.d.push(+e.slice(r,r+=A));e=e.slice(r),r=A-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),p&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function K(t,e){var n,r,i,s,a,u,c,h,l;if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(E.test(e))n=16,e=e.toLowerCase();else if(w.test(e))n=2;else{if(!_.test(e))throw Error(v+e);n=8}for((s=e.search(/p/i))>0?(c=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),a=(s=e.indexOf("."))>=0,r=t.constructor,a&&(s=(u=(e=e.replace(".","")).length)-s,i=Y(r,new r(n),s,2*s)),s=l=(h=P(e,n,T)).length-1;0===h[s];--s)h.pop();return s<0?new r(0*t.s):(t.e=B(h,l),t.d=h,p=!1,a&&(t=I(t,i,4*u)),c&&(t=t.times(Math.abs(c)<54?x(2,c):o.pow(2,c))),p=!0,t)}function $(t,e,n,r,i){var o,s,a,u,c=t.precision,h=Math.ceil(c/A);for(p=!1,u=n.times(n),a=new t(r);;){if(s=I(a.times(u),new t(e++*e++),c,1),a=i?r.plus(s):r.minus(s),r=I(s.times(u),new t(e++*e++),c,1),void 0!==(s=a.plus(r)).d[h]){for(o=h;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=r,r=s,s=o,0}return p=!0,s.d.length=h+1,s}function J(t,e){for(var n=t;--e;)n*=t;return n}function Z(t,e){var n,r=e.s<0,i=z(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return a=r?4:1,e;if((n=e.divToInt(i)).isZero())a=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return a=W(n)?r?2:3:r?4:1,e;a=W(n)?r?1:4:r?3:2}return e.minus(i).abs()}function Q(t,e,n,r){var i,o,a,u,l,f,d,p,m,v=t.constructor,g=void 0!==n;if(g?(k(n,1,c),void 0===r?r=v.rounding:k(r,0,8)):(n=v.precision,r=v.rounding),t.isFinite()){for(g?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,(a=(d=L(t)).indexOf("."))>=0&&(d=d.replace(".",""),(m=new v(1)).e=d.length-a,m.d=P(L(m),10,i),m.e=m.d.length),o=l=(p=P(d,10,i)).length;0==p[--l];)p.pop();if(p[0]){if(a<0?o--:((t=new v(t)).d=p,t.e=o,p=(t=I(t,m,n,r,0,i)).d,o=t.e,f=s),a=p[n],u=i/2,f=f||void 0!==p[n+1],f=r<4?(void 0!==a||f)&&(0===r||r===(t.s<0?3:2)):a>u||a===u&&(4===r||f||6===r&&1&p[n-1]||r===(t.s<0?8:7)),p.length=n,f)for(;++p[--n]>i-1;)p[n]=0,n||(++o,p.unshift(1));for(l=p.length;!p[l-1];--l);for(a=0,d="";a<l;a++)d+=h.charAt(p[a]);if(g){if(l>1)if(16==e||8==e){for(a=16==e?4:3,--l;l%a;l++)d+="0";for(l=(p=P(d,i,e)).length;!p[l-1];--l);for(a=1,d="1.";a<l;a++)d+=h.charAt(p[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)d="0"+d;d="0."+d}else if(++o>l)for(o-=l;o--;)d+="0";else o<l&&(d=d.slice(0,o)+"."+d.slice(o))}else d=g?"0p+0":"0";d=(16==e?"0x":2==e?"0b":8==e?"0o":"")+d}else d=q(t);return t.s<0?"-"+d:d}function tt(t,e){if(t.length>e)return t.length=e,!0}function et(t){return new this(t).abs()}function nt(t){return new this(t).acos()}function rt(t){return new this(t).acosh()}function it(t,e){return new this(t).plus(e)}function ot(t){return new this(t).asin()}function st(t){return new this(t).asinh()}function at(t){return new this(t).atan()}function ut(t){return new this(t).atanh()}function ct(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?z(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=z(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(I(t,e,o,1)),e=z(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(I(t,e,o,1)):(n=z(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function ht(t){return new this(t).cbrt()}function lt(t){return D(t=new this(t),t.e+1,2)}function ft(t){if(!t||"object"!=typeof t)throw Error(m+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,c,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=d[n]),void 0!==(r=t[n])){if(!(b(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(v+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=d[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(v+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function dt(t){return new this(t).cos()}function pt(t){return new this(t).cosh()}function mt(t,e){return new this(t).div(e)}function vt(t){return new this(t).exp()}function gt(t){return D(t=new this(t),t.e+1,3)}function yt(){var t,e,n=new this(0);for(p=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return p=!0,new this(1/0);n=e}return p=!0,n.sqrt()}function bt(t){return t instanceof o||t&&"[object Decimal]"===t.name||!1}function xt(t){return new this(t).ln()}function wt(t,e){return new this(t).log(e)}function Et(t){return new this(t).log(2)}function _t(t){return new this(t).log(10)}function St(){return X(this,arguments,"lt")}function Tt(){return X(this,arguments,"gt")}function At(t,e){return new this(t).mod(e)}function Mt(t,e){return new this(t).mul(e)}function Ct(t,e){return new this(t).pow(e)}function Ot(t){var e,n,r,i,o=0,s=new this(1),a=[];if(void 0===t?t=this.precision:k(t,1,c),r=Math.ceil(t/A),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(y);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(i%1e7),o+=4);o=r/4}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(r=a[--o],t%=A,r&&t&&(i=x(10,A-t),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=A)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<A&&(n-=A-r)}return s.e=n,s.d=a,s}function Nt(t){return D(t=new this(t),t.e+1,this.rounding)}function kt(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Rt(t){return new this(t).sin()}function Pt(t){return new this(t).sinh()}function It(t){return new this(t).sqrt()}function Dt(t,e){return new this(t).sub(e)}function Lt(t){return new this(t).tan()}function Bt(t){return new this(t).tanh()}function Ft(t){return D(t=new this(t),t.e+1,1)}(o=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,t instanceof o)return i.s=t.s,void(p?!t.d||t.e>o.maxE?(i.e=NaN,i.d=null):t.e<o.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"==(r=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(p?e>o.maxE?(i.e=NaN,i.d=null):e<o.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):H(i,t.toString())}if("string"!==r)throw Error(v+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===n&&(t=t.slice(1)),i.s=1),S.test(t)?H(i,t):K(i,t)}if(o.prototype=O,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=ft,o.clone=t,o.isDecimal=bt,o.abs=et,o.acos=nt,o.acosh=rt,o.add=it,o.asin=ot,o.asinh=st,o.atan=at,o.atanh=ut,o.atan2=ct,o.cbrt=ht,o.ceil=lt,o.cos=dt,o.cosh=pt,o.div=mt,o.exp=vt,o.floor=gt,o.hypot=yt,o.ln=xt,o.log=wt,o.log10=_t,o.log2=Et,o.max=St,o.min=Tt,o.mod=At,o.mul=Mt,o.pow=Ct,o.random=Ot,o.round=Nt,o.sign=kt,o.sin=Rt,o.sinh=Pt,o.sqrt=It,o.sub=Dt,o.tan=Lt,o.tanh=Bt,o.trunc=Ft,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(d)).default=o.Decimal=o,l=new o(l),f=new o(f),void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){"use strict";var r=n(4);e.name="boolean",e.factory=function(t,e,n,i){var o=i("bool",{"":function(){return!1},boolean:function(t){return t},number:function(t){return!!t},null:function(t){return!1},BigNumber:function(t){return!t.isZero()},string:function(t){var e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;var n=Number(t);if(""!==t&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+t+'" to a boolean')},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";t.exports=[n(1686),n(1688)]},function(t,e,n){"use strict";var r=n(26).format,i=n(15).lazy;e.name="Chain",e.path="type",e.factory=function(t,e,n,o,s){function a(e){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");t.isChain(e)?this.value=e.value:this.value=e}function u(t,e){"function"==typeof e&&(a.prototype[t]=c(e))}function c(t){return function(){for(var e=[this.value],n=0;n<arguments.length;n++)e[n+1]=arguments[n];return new a(t.apply(t,e))}}return a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return r(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(t){return new a(t.value)},a.createProxy=function(t,e){if("string"==typeof t)u(t,e);else for(var n in t)t.hasOwnProperty(n)&&u(n,t[n])},a.createProxy(s),s.on("import",function(t,e,n){void 0===n&&function(t,e){i(a.prototype,t,function(){var t=e();if("function"==typeof t)return c(t)})}(t,e)}),a},e.math=!0,e.lazy=!1},function(t,e,n){"use strict";var r=n(15);e.format=function(t,n){if("function"==typeof n)return n(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var i,o="auto";switch(void 0!==n&&(n.notation&&(o=n.notation),"number"==typeof n?i=n:n.precision&&(i=n.precision)),o){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"engineering":return e.toEngineering(t,i);case"auto":if(n&&n.exponential&&(void 0!==n.exponential.lower||void 0!==n.exponential.upper)){var s=r.map(n,function(t){return t});return s.exponential=void 0,void 0!==n.exponential.lower&&(s.lowerExp=Math.round(Math.log(n.exponential.lower)/Math.LN10)),void 0!==n.exponential.upper&&(s.upperExp=Math.round(Math.log(n.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(n)+" with "+JSON.stringify(s)),e.format(t,s)}var a=n&&void 0!==n.lowerExp?n.lowerExp:-3,u=n&&void 0!==n.upperExp?n.upperExp:5;if(t.isZero())return"0";var c=t.e;return(c>=a&&c<u?t.toSignificantDigits(i).toFixed():e.toExponential(t,i)).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+o+'". Choose "auto", "exponential", or "fixed".')}},e.toEngineering=function(t,e){var n=t.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),o=i.toPrecision(e);return-1!==o.indexOf("e")&&(o=i.toString()),o+"e"+(n>=0?"+":"")+r.toString()},e.toExponential=function(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()},e.toFixed=function(t,e){return t.toFixed(e)}},function(t,e,n){"use strict";e.name="chain",e.factory=function(t,e,n,r){return r("chain",{"":function(){return new t.Chain},any:function(e){return new t.Chain(e)}})}},function(t,e,n){"use strict";t.exports=[n(365),n(1691)]},function(t,e,n){var r;!function(n){"use strict";var i=function(t){return.5*(Math.exp(t)+Math.exp(-t))},o=function(t){return.5*(Math.exp(t)-Math.exp(-t))},s=function(){throw SyntaxError("Invalid Param")};function a(t,e){var n=Math.abs(t),r=Math.abs(e);return 0===t?Math.log(r):0===e?Math.log(n):n<3e3&&r<3e3?.5*Math.log(t*t+e*e):Math.log(t/Math.cos(Math.atan2(e,t)))}var u=function(t,e){var n={re:0,im:0};if(null==t)n.re=n.im=0;else if(void 0!==e)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return c.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return c.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else 2===t.length?(n.re=t[0],n.im=t[1]):s();break;case"string":n.im=n.re=0;var r=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;null===r&&s();for(var a=0;a<r.length;a++){var u=r[a];" "===u||"\t"===u||"\n"===u||("+"===u?i++:"-"===u?o++:"i"===u||"I"===u?(i+o===0&&s()," "===r[a+1]||isNaN(r[a+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+r[a+1]),a++),i=o=0):((i+o===0||isNaN(u))&&s(),"i"===r[a+1]||"I"===r[a+1]?(n.im+=parseFloat((o%2?"-":"")+u),a++):n.re+=parseFloat((o%2?"-":"")+u),i=o=0))}i+o>0&&s();break;case"number":n.im=0,n.re=t;break;default:s()}return isNaN(n.re)||isNaN(n.im),n};function c(t,e){if(!(this instanceof c))return new c(t,e);var n=u(t,e);this.re=n.re,this.im=n.im}c.prototype={re:0,im:0,sign:function(){var t=this.abs();return new c(this.re/t,this.im/t)},add:function(t,e){var n=new c(t,e);return this.isInfinite()&&n.isInfinite()?c.NAN:this.isInfinite()||n.isInfinite()?c.INFINITY:new c(this.re+n.re,this.im+n.im)},sub:function(t,e){var n=new c(t,e);return this.isInfinite()&&n.isInfinite()?c.NAN:this.isInfinite()||n.isInfinite()?c.INFINITY:new c(this.re-n.re,this.im-n.im)},mul:function(t,e){var n=new c(t,e);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?c.NAN:this.isInfinite()||n.isInfinite()?c.INFINITY:0===n.im&&0===this.im?new c(this.re*n.re,0):new c(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){var n=new c(t,e);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return c.NAN;if(this.isInfinite()||n.isZero())return c.INFINITY;if(this.isZero()||n.isInfinite())return c.ZERO;t=this.re,e=this.im;var r,i,o=n.re,s=n.im;return 0===s?new c(t/o,e/o):Math.abs(o)<Math.abs(s)?new c((t*(i=o/s)+e)/(r=o*i+s),(e*i-t)/r):new c((t+e*(i=s/o))/(r=s*i+o),(e-t*i)/r)},pow:function(t,e){var n=new c(t,e);if(t=this.re,e=this.im,n.isZero())return c.ONE;if(0===n.im){if(0===e&&t>=0)return new c(Math.pow(t,n.re),0);if(0===t)switch((n.re%4+4)%4){case 0:return new c(Math.pow(e,n.re),0);case 1:return new c(0,Math.pow(e,n.re));case 2:return new c(-Math.pow(e,n.re),0);case 3:return new c(0,-Math.pow(e,n.re))}}if(0===t&&0===e&&n.re>0&&n.im>=0)return c.ZERO;var r=Math.atan2(e,t),i=a(t,e);return t=Math.exp(n.re*i-n.im*r),e=n.im*i+n.re*r,new c(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new c(Math.sqrt(n),0);t=.5*Math.sqrt(2*(i+n))}else t=Math.abs(r)/Math.sqrt(2*(i-n));return e=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new c(t,r<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new c(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new c(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(t<-e||t>e)return Math.cos(t)-1;var n=t*t;return n*(n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3)))))))-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new c(a(t,e),Math.atan2(e,t))},abs:function(){return t=this.re,e=this.im,n=Math.abs(t),r=Math.abs(e),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=t/e):r=e/t,n*Math.sqrt(1+r*r));var t,e,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new c(Math.sin(t)*i(e),Math.cos(t)*o(e))},cos:function(){var t=this.re,e=this.im;return new c(Math.cos(t)*i(e),-Math.sin(t)*o(e))},tan:function(){var t=2*this.re,e=2*this.im,n=Math.cos(t)+i(e);return new c(Math.sin(t)/n,o(e)/n)},cot:function(){var t=2*this.re,e=2*this.im,n=Math.cos(t)-i(e);return new c(-Math.sin(t)/n,o(e)/n)},sec:function(){var t=this.re,e=this.im,n=.5*i(2*e)+.5*Math.cos(2*t);return new c(Math.cos(t)*i(e)/n,Math.sin(t)*o(e)/n)},csc:function(){var t=this.re,e=this.im,n=.5*i(2*e)-.5*Math.cos(2*t);return new c(Math.sin(t)*i(e)/n,-Math.cos(t)*o(e)/n)},asin:function(){var t=this.re,e=this.im,n=new c(e*e-t*t+1,-2*t*e).sqrt(),r=new c(n.re-e,n.im+t).log();return new c(r.im,-r.re)},acos:function(){var t=this.re,e=this.im,n=new c(e*e-t*t+1,-2*t*e).sqrt(),r=new c(n.re-e,n.im+t).log();return new c(Math.PI/2-r.im,r.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new c(0,1/0);if(-1===e)return new c(0,-1/0)}var n=t*t+(1-e)*(1-e),r=new c((1-e*e-t*t)/n,-2*t/n).log();return new c(-.5*r.im,.5*r.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new c(Math.atan2(1,t),0);var n=t*t+e*e;return 0!==n?new c(t/n,-e/n).atan():new c(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new c(0,1/0);var n=t*t+e*e;return 0!==n?new c(t/n,-e/n).acos():new c(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new c(Math.PI/2,1/0);var n=t*t+e*e;return 0!==n?new c(t/n,-e/n).asin():new c(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new c(o(t)*Math.cos(e),i(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new c(i(t)*Math.cos(e),o(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,n=i(t)+Math.cos(e);return new c(o(t)/n,Math.sin(e)/n)},coth:function(){var t=2*this.re,e=2*this.im,n=i(t)-Math.cos(e);return new c(o(t)/n,-Math.sin(e)/n)},csch:function(){var t=this.re,e=this.im,n=Math.cos(2*e)-i(2*t);return new c(-2*o(t)*Math.cos(e)/n,2*i(t)*Math.sin(e)/n)},sech:function(){var t=this.re,e=this.im,n=Math.cos(2*e)+i(2*t);return new c(2*i(t)*Math.cos(e)/n,-2*o(t)*Math.sin(e)/n)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else{e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){var t=this.re,e=this.im,n=t>1&&0===e,r=1-t,i=1+t,o=r*r+e*e,s=0!==o?new c((i*r-e*e)/o,(e*r+i*e)/o):new c(-1!==t?t/0:0,0!==e?e/0:0),u=s.re;return s.re=a(s.re,s.im)/2,s.im=Math.atan2(s.im,u)/2,n&&(s.im=-s.im),s},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new c(0,Math.PI/2);var n=t*t+e*e;return 0!==n?new c(t/n,-e/n).atanh():new c(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new c(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var n=t*t+e*e;return 0!==n?new c(t/n,-e/n).asinh():new c(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return c.INFINITY;var n=t*t+e*e;return 0!==n?new c(t/n,-e/n).acosh():new c(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var t=this.re,e=this.im,n=t*t+e*e;return new c(t/n,-e/n)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new c(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new c(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new c(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var n=new c(t,e);return Math.abs(n.re-this.re)<=c.EPSILON&&Math.abs(n.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==t&&(n+=t),0!==e&&(0!==t?n+=e<0?" - ":" + ":e<0&&(n+="-"),1!==(e=Math.abs(e))&&(n+=e),n+="i"),n||"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return!(0!==this.re&&-0!==this.re||0!==this.im&&-0!==this.im)},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-16,void 0===(r=function(){return c}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";var r=n(4);e.name="complex",e.factory=function(t,e,i,o){var s=n(9),a=o("complex",{"":function(){return t.Complex.ZERO},number:function(e){return new t.Complex(e,0)},"number, number":function(e,n){return new t.Complex(e,n)},"BigNumber, BigNumber":function(e,n){return new t.Complex(e.toNumber(),n.toNumber())},Complex:function(t){return t.clone()},string:function(e){return t.Complex(e)},null:function(e){return t.Complex(0)},Object:function(e){if("re"in e&&"im"in e)return new t.Complex(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new t.Complex(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(s.symbols.i,"\\cdot\\left(${args[1]}\\right)\\right)")},a}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},o={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},s=function(t,e){return r({},t,e)};t.exports=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.preserveFormatting,a=void 0!==n&&n,u=e.escapeMapFn,c=void 0===u?s:u,h=String(t),l="",f=c(r({},i),a?r({},o):{}),d=Object.keys(f),p=function(){var t=!1;d.forEach(function(e,n){t||h.length>=e.length&&h.slice(0,e.length)===e&&(l+=f[d[n]],h=h.slice(e.length,h.length),t=!0)}),t||(l+=h.slice(0,1),h=h.slice(1,h.length))};h;)p();return l}},function(t,e,n){"use strict";t.exports=[n(1694),n(366)]},function(t,e,n){"use strict";var r=n(1695);r.prototype.type="Fraction",r.prototype.isFraction=!0,r.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},r.fromJSON=function(t){return new r(t)},e.name="Fraction",e.path="type",e.factory=function(t,e,n,i){return r}},function(t,e,n){var r;!function(n){"use strict";var i=2e3,o={s:1,n:0,d:1};function s(t){function e(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message}function n(){}return n.prototype=Error.prototype,e.prototype=new n,e}var a=d.DivisionByZero=s("DivisionByZero"),u=d.InvalidParameter=s("InvalidParameter");function c(t,e){return isNaN(t=parseInt(t,10))&&h(),t*e}function h(){throw new u}var l=function(t,e){var n,r=0,i=1,s=1,u=0,l=0,f=0,d=1,p=1,m=0,v=1,g=1,y=1,b=1e7;if(null==t);else if(void 0!==e)s=(r=t)*(i=e);else switch(typeof t){case"object":"d"in t&&"n"in t?(r=t.n,i=t.d,"s"in t&&(r*=t.s)):0 in t?(r=t[0],1 in t&&(i=t[1])):h(),s=r*i;break;case"number":if(t<0&&(s=t,t=-t),t%1==0)r=t;else if(t>0){for(t>=1&&(t/=p=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));v<=b&&y<=b;){if(t===(n=(m+g)/(v+y))){v+y<=b?(r=m+g,i=v+y):y>v?(r=g,i=y):(r=m,i=v);break}t>n?(m+=g,v+=y):(g+=m,y+=v),v>b?(r=g,i=y):(r=m,i=v)}r*=p}else(isNaN(t)||isNaN(e))&&(i=r=NaN);break;case"string":if(null===(v=t.match(/\d+|./g))&&h(),"-"===v[m]?(s=-1,m++):"+"===v[m]&&m++,v.length===m+1?l=c(v[m++],s):"."===v[m+1]||"."===v[m]?("."!==v[m]&&(u=c(v[m++],s)),(++m+1===v.length||"("===v[m+1]&&")"===v[m+3]||"'"===v[m+1]&&"'"===v[m+3])&&(l=c(v[m],s),d=Math.pow(10,v[m].length),m++),("("===v[m]&&")"===v[m+2]||"'"===v[m]&&"'"===v[m+2])&&(f=c(v[m+1],s),p=Math.pow(10,v[m+1].length)-1,m+=3)):"/"===v[m+1]||":"===v[m+1]?(l=c(v[m],s),d=c(v[m+2],1),m+=3):"/"===v[m+3]&&" "===v[m+1]&&(u=c(v[m],s),l=c(v[m+2],s),d=c(v[m+4],1),m+=5),v.length<=m){s=r=f+(i=d*p)*u+p*l;break}default:h()}if(0===i)throw new a;o.s=s<0?-1:1,o.n=Math.abs(r),o.d=Math.abs(i)};function f(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function d(t,e){if(!(this instanceof d))return new d(t,e);l(t,e),t=d.REDUCE?f(o.d,o.n):1,this.s=o.s,this.n=o.n/t,this.d=o.d/t}d.REDUCE=1,d.prototype={s:1,n:0,d:1,abs:function(){return new d(this.n,this.d)},neg:function(){return new d(-this.s*this.n,this.d)},add:function(t,e){return l(t,e),new d(this.s*this.n*o.d+o.s*this.d*o.n,this.d*o.d)},sub:function(t,e){return l(t,e),new d(this.s*this.n*o.d-o.s*this.d*o.n,this.d*o.d)},mul:function(t,e){return l(t,e),new d(this.s*o.s*this.n*o.n,this.d*o.d)},div:function(t,e){return l(t,e),new d(this.s*o.s*this.n*o.d,this.d*o.n)},clone:function(){return new d(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new d(NaN):void 0===t?new d(this.s*this.n%this.d,1):(l(t,e),0===o.n&&0===this.d&&d(0,0),new d(this.s*(o.d*this.n)%(o.n*this.d),o.d*this.d))},gcd:function(t,e){return l(t,e),new d(f(o.n,this.n)*f(o.d,this.d),o.d*this.d)},lcm:function(t,e){return l(t,e),0===o.n&&0===this.n?new d:new d(o.n*this.n,f(o.n,this.n)*f(o.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new d(this.s*this.d,this.n)},pow:function(t){return t<0?new d(Math.pow(this.s*this.d,-t),Math.pow(this.n,-t)):new d(Math.pow(this.s*this.n,t),Math.pow(this.d,t))},equals:function(t,e){return l(t,e),this.s*this.n*o.d==o.s*o.n*this.d},compare:function(t,e){l(t,e);var n=this.s*this.n*o.d-o.s*o.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;var e=this.abs().toContinued();function n(t){return 1===t.length?new d(t[0]):n(t.slice(1)).inverse().add(t[0])}t=t||.001;for(var r=0;r<e.length;r++){var i=n(e.slice(0,r+1));if(i.sub(this.abs()).abs().valueOf()<t)return i.mul(this.s)}return this},divisible:function(t,e){return l(t,e),!(!(o.n*this.d)||this.n*o.d%(o.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(t&&(e=Math.floor(r/i))>0&&(n+=e,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(t){var e,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(t&&(e=Math.floor(r/i))>0&&(n+=e,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,r=[];if(isNaN(this.n)||isNaN(this.d))return r;do{r.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return r},toString:function(t){var e,n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";d.REDUCE||(n/=e=f(n,r),r/=e),t=t||15;var o=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,r=1;1!==n;r++)if(n=10*n%e,r>i)return 0;return r}(0,r),s=function(t,e,n){for(var r=1,i=function(t,e,n){for(var r=1;e>0;t=t*t%n,e>>=1)1&e&&(r=r*t%n);return r}(10,n,e),o=0;o<300;o++){if(r===i)return o;r=10*r%e,i=10*i%e}return 0}(0,r,o),a=-1===this.s?"-":"";if(a+=n/r|0,n%=r,(n*=10)&&(a+="."),o){for(var u=s;u--;)a+=n/r|0,n%=r,n*=10;a+="(";for(u=o;u--;)a+=n/r|0,n%=r,n*=10;a+=")"}else for(u=t;n&&u--;)a+=n/r|0,n%=r,n*=10;return a}},void 0===(r=function(){return d}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";t.exports=[n(367),n(160),n(1698),n(1699),n(1700),n(1701),n(67),n(684),n(1702),n(3),n(1703),n(247)]},function(t,e,n){"use strict";e.isBoolean=function(t){return"boolean"==typeof t}},function(t,e,n){"use strict";var r=n(104),i=n(39),o=r.array,s=r.object,a=r.string,u=r.number,c=Array.isArray,h=u.isNumber,l=u.isInteger,f=a.isString,d=o.validateIndex;e.name="SparseMatrix",e.path="type",e.factory=function(t,e,p,m){var v=p(n(367)),g=p(n(31)),y=p(n(247));function b(e,n){if(!(this instanceof b))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!f(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))!function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?s.clone(e._values):void 0,t._index=s.clone(e._index),t._ptr=s.clone(e._ptr),t._size=s.clone(e._size),t._datatype=n||e._datatype):x(t,e.valueOf(),n||e._datatype)}(this,e,n);else if(e&&c(e.index)&&c(e.ptr)&&c(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=n||e.datatype;else if(c(e))x(this,e,n);else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=n}}function x(t,e,n){t._values=[],t._index=[],t._ptr=[],t._datatype=n;var r=e.length,i=0,o=g,s=0;if(f(n)&&(o=m.find(g,[n,n])||g,s=m.convert(0,n)),r>0){var a=0;do{t._ptr.push(t._index.length);for(var u=0;u<r;u++){var h=e[u];if(c(h)){if(0===a&&i<h.length&&(i=h.length),a<h.length){var l=h[a];o(l,s)||(t._values.push(l),t._index.push(u))}}else 0===a&&i<1&&(i=1),o(h,s)||(t._values.push(h),t._index.push(u))}a++}while(a<i)}t._ptr.push(t._index.length),t._size=[r,i]}function w(t,e,n,r){if(n-e==0)return n;for(var i=e;i<n;i++)if(r[i]===t)return i;return e}function E(t,e,n,r,i,o,s){i.splice(t,0,r),o.splice(t,0,e);for(var a=n+1;a<s.length;a++)s[a]++}function _(t,e,n,r){var i=r||0,o=g,s=0;f(t._datatype)&&(o=m.find(g,[t._datatype,t._datatype])||g,s=m.convert(0,t._datatype),i=m.convert(i,t._datatype));var a,u,c,h=!o(i,s),l=t._size[0],d=t._size[1];if(n>d){for(u=d;u<n;u++)if(t._ptr[u]=t._values.length,h)for(a=0;a<l;a++)t._values.push(i),t._index.push(a);t._ptr[n]=t._values.length}else n<d&&(t._ptr.splice(n+1,d-n),t._values.splice(t._ptr[n],t._values.length),t._index.splice(t._ptr[n],t._index.length));if(d=n,e>l){if(h){var p=0;for(u=0;u<d;u++){t._ptr[u]=t._ptr[u]+p,c=t._ptr[u+1]+p;var v=0;for(a=l;a<e;a++,v++)t._values.splice(c+v,0,i),t._index.splice(c+v,0,a),p++}t._ptr[d]=t._values.length}}else if(e<l){var y=0;for(u=0;u<d;u++){t._ptr[u]=t._ptr[u]-y;var b=t._ptr[u],x=t._ptr[u+1]-y;for(c=b;c<x;c++)(a=t._index[c])>e-1&&(t._values.splice(c,1),t._index.splice(c,1),y++)}t._ptr[u]=t._values.length}return t._size[0]=e,t._size[1]=n,t}function S(t,e,n,r,i){var o,a,u=r[0],c=r[1],h=[];for(o=0;o<u;o++)for(h[o]=[],a=0;a<c;a++)h[o][a]=0;for(a=0;a<c;a++)for(var l=n[a],f=n[a+1],d=l;d<f;d++)h[o=e[d]][a]=t?i?s.clone(t[d]):t[d]:1;return h}return b.prototype=new v,b.prototype.type="SparseMatrix",b.prototype.isSparseMatrix=!0,b.prototype.getDataType=function(){return y(this._values)},b.prototype.storage=function(){return"sparse"},b.prototype.datatype=function(){return this._datatype},b.prototype.create=function(t,e){return new b(t,e)},b.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},b.prototype.subset=function(e,n,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r,o,s,a,u=n.size();if(u.length!==e._size.length)throw new i(u.length,e._size.length);var c=n.min(),h=n.max();for(r=0,o=e._size.length;r<o;r++)d(c[r],e._size[r]),d(h[r],e._size[r]);var l=e._values,f=e._index,p=e._ptr,m=n.dimension(0),v=n.dimension(1),g=[],y=[];m.forEach(function(t,e){y[t]=e[0],g[t]=!0});var x=l?[]:void 0,w=[],E=[];return v.forEach(function(t){for(E.push(w.length),s=p[t],a=p[t+1];s<a;s++)r=f[s],!0===g[r]&&(w.push(y[r]),x&&x.push(l[s]))}),E.push(w.length),new b({values:x,index:w,ptr:E,size:u,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,n,r,a){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var u,c=n.size(),h=n.isScalar();if(t.isMatrix(r)?(u=r.size(),r=r.toArray()):u=o.size(r),h){if(0!==u.length)throw new TypeError("Scalar expected");e.set(n.min(),r,a)}else{if(1!==c.length&&2!==c.length)throw new i(c.length,e._size.length,"<");if(u.length<c.length){for(var l=0,f=0;1===c[l]&&1===u[l];)l++;for(;1===c[l];)f++,l++;r=o.unsqueeze(r,c.length,f,u)}if(!s.deepEqual(c,u))throw new i(c,u,">");for(var d=n.min()[0],p=n.min()[1],m=u[0],v=u[1],g=0;g<m;g++)for(var y=0;y<v;y++){var b=r[g][y];e.set([g+d,y+p],b,a)}}return e}(this,e,n,r);default:throw new SyntaxError("Wrong number of arguments")}},b.prototype.get=function(t){if(!c(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];d(e,this._size[0]),d(n,this._size[1]);var r=w(e,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===e?this._values[r]:0},b.prototype.set=function(t,e,n){if(!c(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var r=t[0],o=t[1],s=this._size[0],a=this._size[1],u=g,h=0;f(this._datatype)&&(u=m.find(g,[this._datatype,this._datatype])||g,h=m.convert(0,this._datatype)),(r>s-1||o>a-1)&&(_(this,Math.max(r+1,s),Math.max(o+1,a),n),s=this._size[0],a=this._size[1]),d(r,s),d(o,a);var l=w(r,this._ptr[o],this._ptr[o+1],this._index);return l<this._ptr[o+1]&&this._index[l]===r?u(e,h)?function(t,e,n,r,i){n.splice(t,1),r.splice(t,1);for(var o=e+1;o<i.length;o++)i[o]--}(l,o,this._values,this._index,this._ptr):this._values[l]=e:E(l,r,o,e,this._values,this._index,this._ptr),this},b.prototype.resize=function(t,e,n){if(!c(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");return t.forEach(function(e){if(!u.isNumber(e)||!u.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+a.format(t)+")")}),_(n?this.clone():this,t[0],t[1],e)},b.prototype.reshape=function(t,e){if(!c(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach(function(e){if(!u.isNumber(e)||!u.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+a.format(t)+")")}),this._size[0]*this._size[1]!=t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++)r.push(i);for(var s=n._values.slice(),h=n._index.slice(),l=0;l<n._index.length;l++){var f=h[l],d=r[l],p=f*n._size[1]+d;r[l]=p%t[1],h[l]=Math.floor(p/t[1])}n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice();for(var m=0;m<n._ptr.length;m++)n._ptr[m]=0;for(var v=0;v<s.length;v++){var g=h[v],y=r[v],b=s[v];E(w(g,n._ptr[y],n._ptr[y+1],n._index),g,y,b,n._values,n._index,n._ptr)}return n},b.prototype.clone=function(){return new b({values:this._values?s.clone(this._values):void 0,index:s.clone(this._index),ptr:s.clone(this._ptr),size:s.clone(this._size),datatype:this._datatype})},b.prototype.size=function(){return this._size.slice(0)},b.prototype.map=function(t,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var n=this;return function(t,e,n,r,i,o,s){var a=[],u=[],c=[],h=g,l=0;f(t._datatype)&&(h=m.find(g,[t._datatype,t._datatype])||g,l=m.convert(0,t._datatype));for(var d=function(t,e,n){t=o(t,e,n),h(t,l)||(a.push(t),u.push(e))},p=r;p<=i;p++){c.push(a.length);var v=t._ptr[p],y=t._ptr[p+1];if(s)for(var x=v;x<y;x++){var w=t._index[x];w>=e&&w<=n&&d(t._values[x],w-e,p-r)}else{for(var E={},_=v;_<y;_++){var S=t._index[_];E[S]=t._values[_]}for(var T=e;T<=n;T++){var A=T in E?E[T]:0;d(A,T-e,p-r)}}}return c.push(a.length),new b({values:a,index:u,ptr:c,size:[n-e+1,i-r+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(e,r,i){return t(e,[r,i],n)},e)},b.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var o=this._ptr[i],s=this._ptr[i+1];if(e)for(var a=o;a<s;a++){var u=this._index[a];t(this._values[a],[u,i],this)}else{for(var c={},h=o;h<s;h++)c[this._index[h]]=this._values[h];for(var l=0;l<n;l++)t(l in c?c[l]:0,[l,i],this)}}},b.prototype.toArray=function(){return S(this._values,this._index,this._ptr,this._size,!0)},b.prototype.valueOf=function(){return S(this._values,this._index,this._ptr,this._size,!1)},b.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+a.format(e,t)+" x "+a.format(n,t)+"] density: "+a.format(r,t)+"\n",o=0;o<n;o++)for(var s=this._ptr[o],u=this._ptr[o+1],c=s;c<u;c++){var h=this._index[c];i+="\n    ("+a.format(h,t)+", "+a.format(o,t)+") ==> "+(this._values?a.format(this._values[c],t):"X")}return i},b.prototype.toString=function(){return a.format(this.toArray())},b.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},b.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!h(e)||!l(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var n=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],s=Math.min(i-r,o-n),a=[],u=[],c=[];c[0]=0;for(var f=n;f<o&&a.length<s;f++)for(var d=this._ptr[f],p=this._ptr[f+1],m=d;m<p;m++){var v=this._index[m];if(v===f-n+r){a.push(this._values[m]),u[a.length-1]=v-r;break}}return c.push(a.length),new b({values:a,index:u,ptr:c,size:[s,1]})},b.fromJSON=function(t){return new b(t)},b.diagonal=function(e,n,r,i,o){if(!c(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!h(e)||!l(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!h(r)||!l(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var s=g,a=0;f(o)&&(s=m.find(g,[o,o])||g,a=m.convert(0,o));var u,d=r>0?r:0,p=r<0?-r:0,v=e[0],y=e[1],x=Math.min(v-p,y-d);if(c(n)){if(n.length!==x)throw new Error("Invalid value array length");u=function(t){return n[t]}}else if(t.isMatrix(n)){var w=n.size();if(1!==w.length||w[0]!==x)throw new Error("Invalid matrix length");u=function(t){return n.get([t])}}else u=function(){return n};for(var E=[],_=[],S=[],T=0;T<y;T++){S.push(E.length);var A=T-d;if(A>=0&&A<x){var M=u(A);s(M,a)||(_.push(A+p),E.push(M))}}return S.push(E.length),new b({values:E,index:_,ptr:S,size:[v,y]})},b.prototype.swapRows=function(t,e){if(!(h(t)&&l(t)&&h(e)&&l(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return d(t,this._size[0]),d(e,this._size[0]),b._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},b._forEachRow=function(t,e,n,r,i){for(var o=r[t],s=r[t+1],a=o;a<s;a++)i(n[a],e[a])},b._swapRows=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=o[s],u=o[s+1],c=w(t,a,u,i),h=w(e,a,u,i);if(c<u&&h<u&&i[c]===t&&i[h]===e){if(r){var l=r[c];r[c]=r[h],r[h]=l}}else if(c<u&&i[c]===t&&(h>=u||i[h]!==e)){var f=r?r[c]:void 0;i.splice(h,0,e),r&&r.splice(h,0,f),i.splice(h<=c?c+1:c,1),r&&r.splice(h<=c?c+1:c,1)}else if(h<u&&i[h]===e&&(c>=u||i[c]!==t)){var d=r?r[h]:void 0;i.splice(c,0,t),r&&r.splice(c,0,d),i.splice(c<=h?h+1:h,1),r&&r.splice(c<=h?h+1:h,1)}}},t.Matrix._storage.sparse=b,b},e.lazy=!1},function(t,e,n){"use strict";e.name="Spa",e.path="type",e.factory=function(t,e,r){var i=r(n(47)),o=r(n(31));function s(){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t.FibonacciHeap}return s.prototype.type="Spa",s.prototype.isSpa=!0,s.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var n=this._heap.insert(t,e);this._values[t]=n}},s.prototype.get=function(t){var e=this._values[t];return e?e.value:0},s.prototype.accumulate=function(t,e){var n=this._values[t];n?n.value=i(n.value,e):(n=this._heap.insert(t,e),this._values[t]=n)},s.prototype.forEach=function(t,e,n){var r=this._heap,i=this._values,s=[],a=r.extractMinimum();for(a&&s.push(a);a&&a.key<=e;)a.key>=t&&(o(a.value,0)||n(a.key,a.value,this)),(a=r.extractMinimum())&&s.push(a);for(var u=0;u<s.length;u++){var c=s[u];i[(a=r.insert(c.key,c.value)).key]=a}},s.prototype.swap=function(t,e){var n=this._values[t],r=this._values[e];if(!n&&r)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(n&&!r)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},s}},function(t,e,n){"use strict";e.name="FibonacciHeap",e.path="type",e.factory=function(t,e,r,i){var o=r(n(119)),s=r(n(106)),a=1/Math.log((1+Math.sqrt(5))/2);function u(){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function c(t,e,n){e.left.right=e.right,e.right.left=e.left,n.degree--,n.child===e&&(n.child=e.right),0===n.degree&&(n.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1}u.prototype.type="FibonacciHeap",u.prototype.isFibonacciHeap=!0,u.prototype.insert=function(t,e){var n={key:t,value:e,degree:0};if(this._minimum){var r=this._minimum;n.left=r,n.right=r.right,r.right=n,n.right.left=n,o(t,r.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},u.prototype.size=function(){return this._size},u.prototype.clear=function(){this._minimum=null,this._size=0},u.prototype.isEmpty=function(){return 0===this._size},u.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var e=this._minimum,n=t.degree,r=t.child;n>0;){var i=r.right;r.left.right=r.right,r.right.left=r.left,r.left=e,r.right=e.right,e.right=r,r.right.left=r,r.parent=null,r=i,n--}return t.left.right=t.right,t.right.left=t.left,e=t===t.right?null:function(t,e){var n,r=Math.floor(Math.log(e)*a)+1,i=new Array(r),u=0,c=t;if(c)for(u++,c=c.right;c!==t;)u++,c=c.right;for(;u>0;){for(var l=c.degree,f=c.right;n=i[l];){if(s(c.key,n.key)){var d=n;n=c,c=d}h(n,c),i[l]=null,l++}i[l]=c,c=f,u--}t=null;for(var p=0;p<r;p++)(n=i[p])&&(t?(n.left.right=n.right,n.right.left=n.left,n.left=t,n.right=t.right,t.right=n,n.right.left=n,o(n.key,t.key)&&(t=n)):t=n);return t}(e=t.right,this._size),this._size--,this._minimum=e,t},u.prototype.remove=function(t){this._minimum=function(t,e,n){e.key=n;var r=e.parent;return r&&o(e.key,r.key)&&(c(t,e,r),function t(e,n){var r=n.parent;r&&(n.mark?(c(e,n,r),t(r)):n.mark=!0)}(t,r)),o(e.key,t.key)&&(t=e),t}(this._minimum,t,-1),this.extractMinimum()};var h=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1};return u}},function(t,e,n){"use strict";var r=n(104),i=r.string,o=r.object,s=Array.isArray,a=i.isString;e.name="ImmutableDenseMatrix",e.path="type",e.factory=function(t,e,i){var u=i(n(160)),c=i(n(119));function h(e,n){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!a(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e)||s(e)){var i=new u(e,n);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&s(e.data)&&s(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n,this._min=null,this._max=null}}return h.prototype=new u,h.prototype.type="ImmutableDenseMatrix",h.prototype.isImmutableDenseMatrix=!0,h.prototype.subset=function(e){switch(arguments.length){case 1:var n=u.prototype.subset.call(this,e);return t.isMatrix(n)?new h({data:n._data,size:n._size,datatype:n._datatype}):n;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},h.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},h.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},h.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},h.prototype.clone=function(){return new h({data:o.clone(this._data),size:o.clone(this._size),datatype:this._datatype})},h.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},h.fromJSON=function(t){return new h(t)},h.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},h.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(e){(null===t||c(e,t))&&(t=e)}),this._min=null!==t?t:void 0}return this._min},h.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(e){(null===t||c(t,e))&&(t=e)}),this._max=null!==t?t:void 0}return this._max},h}},function(t,e,n){"use strict";e.name="index",e.factory=function(t,e,n,r){return r("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var n=e.map(function(e){return t.isBigNumber(e)?e.toNumber():Array.isArray(e)||t.isMatrix(e)?e.map(function(e){return t.isBigNumber(e)?e.toNumber():e}):e}),r=new t.Index;return t.Index.apply(r,n),r}})}},function(t,e,n){"use strict";e.name="sparse",e.factory=function(t,e,n,r){var i=t.SparseMatrix,o=r("sparse",{"":function(){return new i([])},string:function(t){return new i([],t)},"Array | Matrix":function(t){return new i(t)},"Array | Matrix, string":function(t,e){return new i(t,e)}});return o.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";t.exports=[n(685)]},function(t,e,n){"use strict";var r=n(4),i=n(7);e.name="string",e.factory=function(t,e,n,o){var s=o("string",{"":function(){return""},number:i.format,null:function(t){return"null"},boolean:function(t){return t+""},string:function(t){return t},"Array | Matrix":function(t){return r(t,s)},any:function(t){return String(t)}});return s.toTex={0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";t.exports=[n(1707),n(1708),n(1709),n(1710),n(1711)]},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var o=n(26).endsWith,s=n(15).clone,a=n(686);e.name="Unit",e.path="type",e.factory=function(t,e,u,c,h){var l,f,d,p=u(n(53)),m=u(n(48)),v=u(n(62)),g=u(n(44)),y=u(n(135)),b=u(n(68)),x=u(n(687)),w=u(n(251)),E=u(n(162)),_=u(n(163)),S=u(n(690)),T=u(n(75)),A=u(n(248)),M=u(n(365));function C(e,n){if(!(this instanceof C))throw new Error("Constructor must be called with the new operator");if(null!=e&&!_(e)&&!t.isComplex(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==n&&("string"!=typeof n||""===n))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==n){var r=C.parse(n);this.units=r.units,this.dimensions=r.dimensions}else{this.units=[{unit:Y,prefix:F.NONE,power:0}],this.dimensions=[];for(var i=0;i<z.length;i++)this.dimensions[i]=0}this.value=null!=e?this._normalize(e):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function O(){for(;" "===d||"\t"===d;)k()}function N(t){return t>="0"&&t<="9"}function k(){f++,d=l.charAt(f)}function R(t){f=t,d=l.charAt(f)}function P(){var t,e="";if(t=f,"+"===d?k():"-"===d&&(e+=d,k()),!function(t){return t>="0"&&t<="9"||"."===t}(d))return R(t),null;if("."===d){if(e+=d,k(),!N(d))return R(t),null}else{for(;N(d);)e+=d,k();"."===d&&(e+=d,k())}for(;N(d);)e+=d,k();if("E"===d||"e"===d){var n="",r=f;if(n+=d,k(),"+"!==d&&"-"!==d||(n+=d,k()),!N(d))return R(r),e;for(e+=n;N(d);)e+=d,k()}return e}function I(){for(var t="",e=l.charCodeAt(f);e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122;)t+=d,k(),e=l.charCodeAt(f);return((e=t.charCodeAt(0))>=65&&e<=90||e>=97&&e<=122)&&t||null}function D(t){return d===t?(k(),t):null}function L(t){if(W.hasOwnProperty(t)){var e=W[t];return{unit:e,prefix:e.prefixes[""]}}for(var n in W)if(W.hasOwnProperty(n)&&o(t,n)){var r=W[n],i=t.length-n.length,s=t.substring(0,i),a=r.prefixes.hasOwnProperty(s)?r.prefixes[s]:void 0;if(void 0!==a)return{unit:r,prefix:a}}return null}function B(t){return t.equalBase(j.NONE)&&null!==t.value&&!e.predictable?t.value:t}C.prototype.type="Unit",C.prototype.isUnit=!0,C.parse=function(n,r){if(r=r||{},f=-1,d="","string"!=typeof(l=n))throw new TypeError("Invalid argument in Unit.parse, string expected");var i=new C;i.units=[];var o=1,s=!1;k(),O();var a=P(),u=null;a&&(u="BigNumber"===e.number?new t.BigNumber(a):"Fraction"===e.number?new t.Fraction(a):parseFloat(a),O(),D("*")?(o=1,s=!0):D("/")&&(o=-1,s=!0));for(var c=[],h=1;;){for(O();"("===d;)c.push(o),h*=o,o=1,k(),O();var p=void 0;if(!d)break;var m=d;if(null===(p=I()))throw new SyntaxError('Unexpected "'+m+'" in "'+l+'" at index '+f.toString());var v=L(p);if(null===v)throw new SyntaxError('Unit "'+p+'" not found.');var g=o*h;if(O(),D("^")){O();var y=P();if(null===y)throw new SyntaxError('In "'+n+'", "^" must be followed by a floating-point number');g*=y}i.units.push({unit:v.unit,prefix:v.prefix,power:g});for(var b=0;b<z.length;b++)i.dimensions[b]+=(v.unit.dimensions[b]||0)*g;for(O();")"===d;){if(0===c.length)throw new SyntaxError('Unmatched ")" in "'+l+'" at index '+f.toString());h/=c.pop(),k(),O()}if(s=!1,D("*")?(o=1,s=!0):D("/")?(o=-1,s=!0):o=1,v.unit.base){var x=v.unit.base.key;V.auto[x]={unit:v.unit,prefix:v.prefix}}}if(O(),d)throw new SyntaxError('Could not parse: "'+n+'"');if(s)throw new SyntaxError('Trailing characters: "'+n+'"');if(0!==c.length)throw new SyntaxError('Unmatched "(" in "'+l+'"');if(0===i.units.length&&!r.allowNoUnits)throw new SyntaxError('"'+n+'" contains no units');return i.value=void 0!==u?i._normalize(u):null,i},C.prototype.clone=function(){var t=new C;t.fixPrefix=this.fixPrefix,t.skipAutomaticSimplification=this.skipAutomaticSimplification,t.value=s(this.value),t.dimensions=this.dimensions.slice(0),t.units=[];for(var e=0;e<this.units.length;e++)for(var n in t.units[e]={},this.units[e])this.units[e].hasOwnProperty(n)&&(t.units[e][n]=this.units[e][n]);return t},C.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},C.prototype._normalize=function(t){var e,n,r,i,o;if(null==t||0===this.units.length)return t;if(this._isDerived()){var s=t;o=C._getNumberConverter(T(t));for(var a=0;a<this.units.length;a++)e=o(this.units[a].unit.value),i=o(this.units[a].prefix.value),r=o(this.units[a].power),s=v(s,y(v(e,i),r));return s}return e=(o=C._getNumberConverter(T(t)))(this.units[0].unit.value),n=o(this.units[0].unit.offset),i=o(this.units[0].prefix.value),v(p(t,n),v(e,i))},C.prototype._denormalize=function(t,e){var n,r,i,o,s;if(null==t||0===this.units.length)return t;if(this._isDerived()){var a=t;s=C._getNumberConverter(T(t));for(var u=0;u<this.units.length;u++)n=s(this.units[u].unit.value),o=s(this.units[u].prefix.value),i=s(this.units[u].power),a=g(a,y(v(n,o),i));return a}return n=(s=C._getNumberConverter(T(t)))(this.units[0].unit.value),o=s(this.units[0].prefix.value),r=s(this.units[0].unit.offset),m(g(g(t,n),null==e?o:e),r)},C.isValuelessUnit=function(t){return null!==L(t)},C.prototype.hasBase=function(t){if("string"==typeof t&&(t=j[t]),!t)return!1;for(var e=0;e<z.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},C.prototype.equalBase=function(t){for(var e=0;e<z.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},C.prototype.equals=function(t){return this.equalBase(t)&&E(this.value,t.value)},C.prototype.multiply=function(t){for(var e=this.clone(),n=0;n<z.length;n++)e.dimensions[n]=(this.dimensions[n]||0)+(t.dimensions[n]||0);for(var r=0;r<t.units.length;r++){var i={};for(var o in t.units[r])i[o]=t.units[r][o];e.units.push(i)}if(null!==this.value||null!==t.value){var s=null===this.value?this._normalize(1):this.value,a=null===t.value?t._normalize(1):t.value;e.value=v(s,a)}else e.value=null;return e.skipAutomaticSimplification=!1,B(e)},C.prototype.divide=function(t){for(var e=this.clone(),n=0;n<z.length;n++)e.dimensions[n]=(this.dimensions[n]||0)-(t.dimensions[n]||0);for(var r=0;r<t.units.length;r++){var i={};for(var o in t.units[r])i[o]=t.units[r][o];i.power=-i.power,e.units.push(i)}if(null!==this.value||null!==t.value){var s=null===this.value?this._normalize(1):this.value,a=null===t.value?t._normalize(1):t.value;e.value=g(s,a)}else e.value=null;return e.skipAutomaticSimplification=!1,B(e)},C.prototype.pow=function(t){for(var e=this.clone(),n=0;n<z.length;n++)e.dimensions[n]=(this.dimensions[n]||0)*t;for(var r=0;r<e.units.length;r++)e.units[r].power*=t;return null!==e.value?e.value=y(e.value,t):e.value=null,e.skipAutomaticSimplification=!1,B(e)},C.prototype.abs=function(){var t=this.clone();for(var e in t.value=null!==t.value?b(t.value):null,t.units)"VA"!==t.units[e].unit.name&&"VAR"!==t.units[e].unit.name||(t.units[e].unit=W.W);return t},C.prototype.to=function(e){var n,r=null===this.value?this._normalize(1):this.value;if("string"==typeof e){if(n=C.parse(e),!this.equalBase(n))throw new Error("Units do not match ('".concat(n.toString(),"' != '").concat(this.toString(),"')"));if(null!==n.value)throw new Error("Cannot convert to a unit with a value");return n.value=s(r),n.fixPrefix=!0,n.skipAutomaticSimplification=!0,n}if(t.isUnit(e)){if(!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(n=e.clone()).value=s(r),n.fixPrefix=!0,n.skipAutomaticSimplification=!0,n}throw new Error("String or Unit expected as parameter")},C.prototype.toNumber=function(t){return A(this.toNumeric(t))},C.prototype.toNumeric=function(t){var e;return(e=t?this.to(t):this.clone())._isDerived()?e._denormalize(e.value):e._denormalize(e.value,e.units[0].prefix.value)},C.prototype.toString=function(){return this.format()},C.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},C.fromJSON=function(t){var e=new C(t.value,t.unit);return e.fixPrefix=t.fixPrefix||!1,e},C.prototype.valueOf=C.prototype.toString,C.prototype.simplify=function(){var t,e,n=this.clone(),r=[];for(var i in q)if(n.hasBase(j[i])){t=i;break}if("NONE"===t)n.units=[];else if(t&&q.hasOwnProperty(t)&&(e=q[t]),e)n.units=[{unit:e.unit,prefix:e.prefix,power:1}];else{for(var o=!1,s=0;s<z.length;s++){var a=z[s];Math.abs(n.dimensions[s]||0)>1e-12&&(q.hasOwnProperty(a)?r.push({unit:q[a].unit,prefix:q[a].prefix,power:n.dimensions[s]||0}):o=!0)}r.length<n.units.length&&!o&&(n.units=r)}return n},C.prototype.toSI=function(){for(var t=this.clone(),e=[],n=0;n<z.length;n++){var r=z[n];if(Math.abs(t.dimensions[n]||0)>1e-12){if(!V.si.hasOwnProperty(r))throw new Error("Cannot express custom unit "+r+" in SI units");e.push({unit:V.si[r].unit,prefix:V.si[r].prefix,power:t.dimensions[n]||0})}}return t.units=e,t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},C.prototype.formatUnits=function(){for(var t="",e="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,t+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(t+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(var o=0;o<this.units.length;o++)this.units[o].power<0&&(n>0?(e+=" "+this.units[o].prefix.name+this.units[o].unit.name,Math.abs(this.units[o].power+1)>1e-15&&(e+="^"+-this.units[o].power)):(e+=" "+this.units[o].prefix.name+this.units[o].unit.name,e+="^"+this.units[o].power));t=t.substr(1),e=e.substr(1),n>1&&r>0&&(t="("+t+")"),r>1&&n>0&&(e="("+e+")");var s=t;return n>0&&r>0&&(s+=" / "),s+=e},C.prototype.format=function(e){var n=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var i in void 0!==n.value&&null!==n.value&&t.isComplex(n.value)&&(r=Math.abs(n.value.re)<1e-14),n.units)n.units[i].unit&&("VA"===n.units[i].unit.name&&r?n.units[i].unit=W.VAR:"VAR"!==n.units[i].unit.name||r||(n.units[i].unit=W.VA));1!==n.units.length||n.fixPrefix||Math.abs(n.units[0].power-Math.round(n.units[0].power))<1e-14&&(n.units[0].prefix=n._bestPrefix());var o=n._denormalize(n.value),s=null!==n.value?S(o,e||{}):"",a=n.formatUnits();return n.value&&t.isComplex(n.value)&&(s="("+s+")"),a.length>0&&s.length>0&&(s+=" "),s+=a},C.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var t=null!==this.value?b(this.value):0,e=b(this.units[0].unit.value),n=this.units[0].prefix;if(0===t)return n;var r=this.units[0].power,i=Math.log(t/Math.pow(n.value*e,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var o=this.units[0].unit.prefixes;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];if(a.scientific){var u=Math.abs(Math.log(t/Math.pow(a.value*e,r))/Math.LN10-1.2);(u<i||u===i&&a.name.length<n.name.length)&&(n=a,i=u)}}return n},C.prototype.splitUnit=function(t){for(var e=this.clone(),n=[],r=0;r<t.length&&(e=e.to(t[r]),r!==t.length-1);r++){var i=e.toNumeric(),o=w(i),s=new C(E(o,i)?o:x(e.toNumeric()),t[r].toString());n.push(s),e=m(e,s)}for(var a=0,u=0;u<n.length;u++)a=p(a,n[u].value);return E(a,this.value)&&(e.value=0),n.push(e),n};var F={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};F.SHORTLONG=i(F.SHORT,F.LONG),F.BINARY_SHORT=i(F.BINARY_SHORT_SI,F.BINARY_SHORT_IEC),F.BINARY_LONG=i(F.BINARY_LONG_SI,F.BINARY_LONG_IEC);var z=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],j={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var U in j)j[U].key=U;var Y={name:"",base:{},value:1,offset:0,dimensions:z.map(function(t){return 0})},W={meter:{name:"meter",base:j.LENGTH,prefixes:F.LONG,value:1,offset:0},inch:{name:"inch",base:j.LENGTH,prefixes:F.NONE,value:.0254,offset:0},foot:{name:"foot",base:j.LENGTH,prefixes:F.NONE,value:.3048,offset:0},yard:{name:"yard",base:j.LENGTH,prefixes:F.NONE,value:.9144,offset:0},mile:{name:"mile",base:j.LENGTH,prefixes:F.NONE,value:1609.344,offset:0},link:{name:"link",base:j.LENGTH,prefixes:F.NONE,value:.201168,offset:0},rod:{name:"rod",base:j.LENGTH,prefixes:F.NONE,value:5.0292,offset:0},chain:{name:"chain",base:j.LENGTH,prefixes:F.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:j.LENGTH,prefixes:F.NONE,value:1e-10,offset:0},m:{name:"m",base:j.LENGTH,prefixes:F.SHORT,value:1,offset:0},in:{name:"in",base:j.LENGTH,prefixes:F.NONE,value:.0254,offset:0},ft:{name:"ft",base:j.LENGTH,prefixes:F.NONE,value:.3048,offset:0},yd:{name:"yd",base:j.LENGTH,prefixes:F.NONE,value:.9144,offset:0},mi:{name:"mi",base:j.LENGTH,prefixes:F.NONE,value:1609.344,offset:0},li:{name:"li",base:j.LENGTH,prefixes:F.NONE,value:.201168,offset:0},rd:{name:"rd",base:j.LENGTH,prefixes:F.NONE,value:5.02921,offset:0},ch:{name:"ch",base:j.LENGTH,prefixes:F.NONE,value:20.1168,offset:0},mil:{name:"mil",base:j.LENGTH,prefixes:F.NONE,value:254e-7,offset:0},m2:{name:"m2",base:j.SURFACE,prefixes:F.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:j.SURFACE,prefixes:F.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:j.SURFACE,prefixes:F.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:j.SURFACE,prefixes:F.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:j.SURFACE,prefixes:F.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:j.SURFACE,prefixes:F.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:j.SURFACE,prefixes:F.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:j.SURFACE,prefixes:F.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:j.SURFACE,prefixes:F.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:j.SURFACE,prefixes:F.NONE,value:1e4,offset:0},m3:{name:"m3",base:j.VOLUME,prefixes:F.CUBIC,value:1,offset:0},L:{name:"L",base:j.VOLUME,prefixes:F.SHORT,value:.001,offset:0},l:{name:"l",base:j.VOLUME,prefixes:F.SHORT,value:.001,offset:0},litre:{name:"litre",base:j.VOLUME,prefixes:F.LONG,value:.001,offset:0},cuin:{name:"cuin",base:j.VOLUME,prefixes:F.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:j.VOLUME,prefixes:F.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:j.VOLUME,prefixes:F.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:j.VOLUME,prefixes:F.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:j.VOLUME,prefixes:F.NONE,value:15e-6,offset:0},drop:{name:"drop",base:j.VOLUME,prefixes:F.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:j.VOLUME,prefixes:F.NONE,value:5e-8,offset:0},minim:{name:"minim",base:j.VOLUME,prefixes:F.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:j.VOLUME,prefixes:F.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:j.VOLUME,prefixes:F.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:j.VOLUME,prefixes:F.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:j.VOLUME,prefixes:F.NONE,value:1e-6,offset:0},cup:{name:"cup",base:j.VOLUME,prefixes:F.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:j.VOLUME,prefixes:F.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:j.VOLUME,prefixes:F.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:j.VOLUME,prefixes:F.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:j.VOLUME,prefixes:F.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:j.VOLUME,prefixes:F.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:j.VOLUME,prefixes:F.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:j.VOLUME,prefixes:F.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:j.VOLUME,prefixes:F.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:j.VOLUME,prefixes:F.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:j.VOLUME,prefixes:F.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:j.VOLUME,prefixes:F.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:j.VOLUME,prefixes:F.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:j.VOLUME,prefixes:F.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:j.VOLUME,prefixes:F.NONE,value:.1173478,offset:0},obl:{name:"obl",base:j.VOLUME,prefixes:F.NONE,value:.1589873,offset:0},g:{name:"g",base:j.MASS,prefixes:F.SHORT,value:.001,offset:0},gram:{name:"gram",base:j.MASS,prefixes:F.LONG,value:.001,offset:0},ton:{name:"ton",base:j.MASS,prefixes:F.SHORT,value:907.18474,offset:0},tonne:{name:"tonne",base:j.MASS,prefixes:F.SHORT,value:1e3,offset:0},grain:{name:"grain",base:j.MASS,prefixes:F.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:j.MASS,prefixes:F.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:j.MASS,prefixes:F.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:j.MASS,prefixes:F.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:j.MASS,prefixes:F.NONE,value:45.359237,offset:0},stick:{name:"stick",base:j.MASS,prefixes:F.NONE,value:.115,offset:0},stone:{name:"stone",base:j.MASS,prefixes:F.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:j.MASS,prefixes:F.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:j.MASS,prefixes:F.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:j.MASS,prefixes:F.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:j.MASS,prefixes:F.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:j.MASS,prefixes:F.NONE,value:45.359237,offset:0},s:{name:"s",base:j.TIME,prefixes:F.SHORT,value:1,offset:0},min:{name:"min",base:j.TIME,prefixes:F.NONE,value:60,offset:0},h:{name:"h",base:j.TIME,prefixes:F.NONE,value:3600,offset:0},second:{name:"second",base:j.TIME,prefixes:F.LONG,value:1,offset:0},sec:{name:"sec",base:j.TIME,prefixes:F.LONG,value:1,offset:0},minute:{name:"minute",base:j.TIME,prefixes:F.NONE,value:60,offset:0},hour:{name:"hour",base:j.TIME,prefixes:F.NONE,value:3600,offset:0},day:{name:"day",base:j.TIME,prefixes:F.NONE,value:86400,offset:0},week:{name:"week",base:j.TIME,prefixes:F.NONE,value:604800,offset:0},month:{name:"month",base:j.TIME,prefixes:F.NONE,value:2629800,offset:0},year:{name:"year",base:j.TIME,prefixes:F.NONE,value:31557600,offset:0},decade:{name:"decade",base:j.TIME,prefixes:F.NONE,value:315576e3,offset:0},century:{name:"century",base:j.TIME,prefixes:F.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:j.TIME,prefixes:F.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:j.FREQUENCY,prefixes:F.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:j.FREQUENCY,prefixes:F.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:j.ANGLE,prefixes:F.SHORT,value:1,offset:0},radian:{name:"radian",base:j.ANGLE,prefixes:F.LONG,value:1,offset:0},deg:{name:"deg",base:j.ANGLE,prefixes:F.SHORT,value:null,offset:0},degree:{name:"degree",base:j.ANGLE,prefixes:F.LONG,value:null,offset:0},grad:{name:"grad",base:j.ANGLE,prefixes:F.SHORT,value:null,offset:0},gradian:{name:"gradian",base:j.ANGLE,prefixes:F.LONG,value:null,offset:0},cycle:{name:"cycle",base:j.ANGLE,prefixes:F.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:j.ANGLE,prefixes:F.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:j.ANGLE,prefixes:F.NONE,value:null,offset:0},A:{name:"A",base:j.CURRENT,prefixes:F.SHORT,value:1,offset:0},ampere:{name:"ampere",base:j.CURRENT,prefixes:F.LONG,value:1,offset:0},K:{name:"K",base:j.TEMPERATURE,prefixes:F.NONE,value:1,offset:0},degC:{name:"degC",base:j.TEMPERATURE,prefixes:F.NONE,value:1,offset:273.15},degF:{name:"degF",base:j.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:j.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:j.TEMPERATURE,prefixes:F.NONE,value:1,offset:0},celsius:{name:"celsius",base:j.TEMPERATURE,prefixes:F.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:j.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:j.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:j.AMOUNT_OF_SUBSTANCE,prefixes:F.SHORT,value:1,offset:0},mole:{name:"mole",base:j.AMOUNT_OF_SUBSTANCE,prefixes:F.LONG,value:1,offset:0},cd:{name:"cd",base:j.LUMINOUS_INTENSITY,prefixes:F.NONE,value:1,offset:0},candela:{name:"candela",base:j.LUMINOUS_INTENSITY,prefixes:F.NONE,value:1,offset:0},N:{name:"N",base:j.FORCE,prefixes:F.SHORT,value:1,offset:0},newton:{name:"newton",base:j.FORCE,prefixes:F.LONG,value:1,offset:0},dyn:{name:"dyn",base:j.FORCE,prefixes:F.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:j.FORCE,prefixes:F.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:j.FORCE,prefixes:F.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:j.FORCE,prefixes:F.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:j.FORCE,prefixes:F.LONG,value:4448.2216,offset:0},J:{name:"J",base:j.ENERGY,prefixes:F.SHORT,value:1,offset:0},joule:{name:"joule",base:j.ENERGY,prefixes:F.SHORT,value:1,offset:0},erg:{name:"erg",base:j.ENERGY,prefixes:F.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:j.ENERGY,prefixes:F.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:j.ENERGY,prefixes:F.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:j.ENERGY,prefixes:F.SHORT,value:1.602176565e-19,offset:0},electronvolt:{name:"electronvolt",base:j.ENERGY,prefixes:F.LONG,value:1.602176565e-19,offset:0},W:{name:"W",base:j.POWER,prefixes:F.SHORT,value:1,offset:0},watt:{name:"watt",base:j.POWER,prefixes:F.LONG,value:1,offset:0},hp:{name:"hp",base:j.POWER,prefixes:F.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:j.POWER,prefixes:F.SHORT,value:M.I,offset:0},VA:{name:"VA",base:j.POWER,prefixes:F.SHORT,value:1,offset:0},Pa:{name:"Pa",base:j.PRESSURE,prefixes:F.SHORT,value:1,offset:0},psi:{name:"psi",base:j.PRESSURE,prefixes:F.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:j.PRESSURE,prefixes:F.NONE,value:101325,offset:0},bar:{name:"bar",base:j.PRESSURE,prefixes:F.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:j.PRESSURE,prefixes:F.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:j.PRESSURE,prefixes:F.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:j.PRESSURE,prefixes:F.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:j.PRESSURE,prefixes:F.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:j.ELECTRIC_CHARGE,prefixes:F.LONG,value:1,offset:0},C:{name:"C",base:j.ELECTRIC_CHARGE,prefixes:F.SHORT,value:1,offset:0},farad:{name:"farad",base:j.ELECTRIC_CAPACITANCE,prefixes:F.LONG,value:1,offset:0},F:{name:"F",base:j.ELECTRIC_CAPACITANCE,prefixes:F.SHORT,value:1,offset:0},volt:{name:"volt",base:j.ELECTRIC_POTENTIAL,prefixes:F.LONG,value:1,offset:0},V:{name:"V",base:j.ELECTRIC_POTENTIAL,prefixes:F.SHORT,value:1,offset:0},ohm:{name:"ohm",base:j.ELECTRIC_RESISTANCE,prefixes:F.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:j.ELECTRIC_INDUCTANCE,prefixes:F.LONG,value:1,offset:0},H:{name:"H",base:j.ELECTRIC_INDUCTANCE,prefixes:F.SHORT,value:1,offset:0},siemens:{name:"siemens",base:j.ELECTRIC_CONDUCTANCE,prefixes:F.LONG,value:1,offset:0},S:{name:"S",base:j.ELECTRIC_CONDUCTANCE,prefixes:F.SHORT,value:1,offset:0},weber:{name:"weber",base:j.MAGNETIC_FLUX,prefixes:F.LONG,value:1,offset:0},Wb:{name:"Wb",base:j.MAGNETIC_FLUX,prefixes:F.SHORT,value:1,offset:0},tesla:{name:"tesla",base:j.MAGNETIC_FLUX_DENSITY,prefixes:F.LONG,value:1,offset:0},T:{name:"T",base:j.MAGNETIC_FLUX_DENSITY,prefixes:F.SHORT,value:1,offset:0},b:{name:"b",base:j.BIT,prefixes:F.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:j.BIT,prefixes:F.BINARY_LONG,value:1,offset:0},B:{name:"B",base:j.BIT,prefixes:F.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:j.BIT,prefixes:F.BINARY_LONG,value:8,offset:0}},X={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole"};function G(e){if("BigNumber"===e.number){var n=a.pi(t.BigNumber);W.rad.value=new t.BigNumber(1),W.deg.value=n.div(180),W.grad.value=n.div(200),W.cycle.value=n.times(2),W.arcsec.value=n.div(648e3),W.arcmin.value=n.div(10800)}else W.rad.value=1,W.deg.value=Math.PI/180,W.grad.value=Math.PI/200,W.cycle.value=2*Math.PI,W.arcsec.value=Math.PI/648e3,W.arcmin.value=Math.PI/10800;W.radian.value=W.rad.value,W.degree.value=W.deg.value,W.gradian.value=W.grad.value}G(e),h.on("config",function(t,e){t.number!==e.number&&G(t)});var V={si:{NONE:{unit:Y,prefix:F.NONE[""]},LENGTH:{unit:W.m,prefix:F.SHORT[""]},MASS:{unit:W.g,prefix:F.SHORT.k},TIME:{unit:W.s,prefix:F.SHORT[""]},CURRENT:{unit:W.A,prefix:F.SHORT[""]},TEMPERATURE:{unit:W.K,prefix:F.SHORT[""]},LUMINOUS_INTENSITY:{unit:W.cd,prefix:F.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:W.mol,prefix:F.SHORT[""]},ANGLE:{unit:W.rad,prefix:F.SHORT[""]},BIT:{unit:W.bit,prefix:F.SHORT[""]},FORCE:{unit:W.N,prefix:F.SHORT[""]},ENERGY:{unit:W.J,prefix:F.SHORT[""]},POWER:{unit:W.W,prefix:F.SHORT[""]},PRESSURE:{unit:W.Pa,prefix:F.SHORT[""]},ELECTRIC_CHARGE:{unit:W.C,prefix:F.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:W.F,prefix:F.SHORT[""]},ELECTRIC_POTENTIAL:{unit:W.V,prefix:F.SHORT[""]},ELECTRIC_RESISTANCE:{unit:W.ohm,prefix:F.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:W.H,prefix:F.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:W.S,prefix:F.SHORT[""]},MAGNETIC_FLUX:{unit:W.Wb,prefix:F.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:W.T,prefix:F.SHORT[""]},FREQUENCY:{unit:W.Hz,prefix:F.SHORT[""]}}};V.cgs=JSON.parse(JSON.stringify(V.si)),V.cgs.LENGTH={unit:W.m,prefix:F.SHORT.c},V.cgs.MASS={unit:W.g,prefix:F.SHORT[""]},V.cgs.FORCE={unit:W.dyn,prefix:F.SHORT[""]},V.cgs.ENERGY={unit:W.erg,prefix:F.NONE[""]},V.us=JSON.parse(JSON.stringify(V.si)),V.us.LENGTH={unit:W.ft,prefix:F.NONE[""]},V.us.MASS={unit:W.lbm,prefix:F.NONE[""]},V.us.TEMPERATURE={unit:W.degF,prefix:F.NONE[""]},V.us.FORCE={unit:W.lbf,prefix:F.NONE[""]},V.us.ENERGY={unit:W.BTU,prefix:F.BTU[""]},V.us.POWER={unit:W.hp,prefix:F.NONE[""]},V.us.PRESSURE={unit:W.psi,prefix:F.NONE[""]},V.auto=JSON.parse(JSON.stringify(V.si));var q=V.auto;for(var H in C.setUnitSystem=function(t){if(!V.hasOwnProperty(t))throw new Error("Unit system "+t+" does not exist. Choices are: "+Object.keys(V).join(", "));q=V[t]},C.getUnitSystem=function(){for(var t in V)if(V[t]===q)return t},C.typeConverters={BigNumber:function(e){return new t.BigNumber(e+"")},Fraction:function(e){return new t.Fraction(e)},Complex:function(t){return t},number:function(t){return t}},C._getNumberConverter=function(t){if(!C.typeConverters[t])throw new TypeError('Unsupported type "'+t+'"');return C.typeConverters[t]},W){var K=W[H];K.dimensions=K.base.dimensions}for(var $ in X)if(X.hasOwnProperty($)){var J=W[X[$]],Z={};for(var Q in J)J.hasOwnProperty(Q)&&(Z[Q]=J[Q]);Z.name=$,W[$]=Z}return C.createUnit=function(t,e){if("object"!==r(t))throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(e&&e.override)for(var n in t)if(t.hasOwnProperty(n)&&C.deleteUnit(n),t[n].aliases)for(var i=0;i<t[n].aliases.length;i++)C.deleteUnit(t[n].aliases[i]);var o;for(var s in t)t.hasOwnProperty(s)&&(o=C.createUnitSingle(s,t[s]));return o},C.createUnitSingle=function(t,e,n){if(null==e&&(e={}),"string"!=typeof t)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(W.hasOwnProperty(t))throw new Error('Cannot create unit "'+t+'": a unit with that name already exists');!function(t){for(var e=0;e<t.length;e++){var n=t.charAt(e),r=function(t){return/^[a-zA-Z]$/.test(t)};if(0===e&&!r(n))throw new Error('Invalid unit name (must begin with alpha character): "'+t+'"');if(e>0&&!r(n)&&!function(t){return t>="0"&&t<="9"}(n))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+t+'"')}}(t);var i,o,s=null,a=[],u=0;if(e&&"Unit"===e.type)s=e.clone();else if("string"==typeof e)""!==e&&(i=e);else{if("object"!==r(e))throw new TypeError('Cannot create unit "'+t+'" from "'+e.toString()+'": expecting "string" or "Unit" or "Object"');i=e.definition,o=e.prefixes,u=e.offset,e.aliases&&(a=e.aliases.valueOf())}if(a)for(var c=0;c<a.length;c++)if(W.hasOwnProperty(a[c]))throw new Error('Cannot create alias "'+a[c]+'": a unit with that name already exists');if(i&&"string"==typeof i&&!s)try{s=C.parse(i,{allowNoUnits:!0})}catch(e){throw e.message='Could not create unit "'+t+'" from "'+i+'": '+e.message,e}else i&&"Unit"===i.type&&(s=i.clone());a=a||[],u=u||0,o=o&&o.toUpperCase&&F[o.toUpperCase()]||F.NONE;var h={};if(s){h={name:t,value:s.value,dimensions:s.dimensions.slice(0),prefixes:o,offset:u};var l=!1;for(var f in j)if(j.hasOwnProperty(f)){for(var d=!0,p=0;p<z.length;p++)if(Math.abs((h.dimensions[p]||0)-(j[f].dimensions[p]||0))>1e-12){d=!1;break}if(d){l=!0,h.base=j[f];break}}if(!l){var m=t+"_STUFF",v={dimensions:s.dimensions.slice(0)};v.key=m,j[m]=v,q[m]={unit:h,prefix:F.NONE[""]},h.base=j[m]}}else{var g=t+"_STUFF";if(z.indexOf(g)>=0)throw new Error('Cannot create new base unit "'+t+'": a base unit with that name already exists (and cannot be overridden)');for(var y in z.push(g),j)j.hasOwnProperty(y)&&(j[y].dimensions[z.length-1]=0);for(var b={dimensions:[]},x=0;x<z.length;x++)b.dimensions[x]=0;b.dimensions[z.length-1]=1,b.key=g,j[g]=b,h={name:t,value:1,dimensions:j[g].dimensions.slice(0),prefixes:o,offset:u,base:j[g]},q[g]={unit:h,prefix:F.NONE[""]}}C.UNITS[t]=h;for(var w=0;w<a.length;w++){var E=a[w],_={};for(var S in h)h.hasOwnProperty(S)&&(_[S]=h[S]);_.name=E,C.UNITS[E]=_}return new C(null,t)},C.deleteUnit=function(t){delete C.UNITS[t]},C.PREFIXES=F,C.BASE_DIMENSIONS=z,C.BASE_UNITS=j,C.UNIT_SYSTEMS=V,C.UNITS=W,C},e.math=!0},function(t,e,n){"use strict";var r=n(4);e.name="unit",e.factory=function(t,e,n,i){var o=i("unit",{Unit:function(t){return t.clone()},string:function(e){return t.Unit.isValuelessUnit(e)?new t.Unit(null,e):t.Unit.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(e,n){return new t.Unit(e,n)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},o}},function(t,e,n){"use strict";e.name="createUnit",e.factory=function(t,e,n,r){return r("createUnit",{"Object, Object":function(e,n){return t.Unit.createUnit(e,n)},Object:function(e){return t.Unit.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,n,r){var i={};return i[e]=n,t.Unit.createUnit(i,r)},"string, Unit | string | Object":function(e,n){var r={};return r[e]=n,t.Unit.createUnit(r,{})},string:function(e){var n={};return n[e]={},t.Unit.createUnit(n,{})}})}},function(t,e,n){"use strict";e.name="splitUnit",e.factory=function(t,e,n,r){return r("splitUnit",{"Unit, Array":function(t,e){return t.splitUnit(e)}})}},function(t,e,n){"use strict";var r=n(15).lazy;function i(t,e,n){r(t,e,n),r(t.expression.mathWithTransform,e,n)}e.factory=function(t,e,n,r,o){function s(e){var n=t.Unit.parse(e);return n.fixPrefix=!0,n}i(o,"speedOfLight",function(){return s("299792458 m s^-1")}),i(o,"gravitationConstant",function(){return s("6.6738480e-11 m^3 kg^-1 s^-2")}),i(o,"planckConstant",function(){return s("6.626069311e-34 J s")}),i(o,"reducedPlanckConstant",function(){return s("1.05457172647e-34 J s")}),i(o,"magneticConstant",function(){return s("1.2566370614e-6 N A^-2")}),i(o,"electricConstant",function(){return s("8.854187817e-12 F m^-1")}),i(o,"vacuumImpedance",function(){return s("376.730313461 ohm")}),i(o,"coulomb",function(){return s("8.9875517873681764e9 N m^2 C^-2")}),i(o,"elementaryCharge",function(){return s("1.60217656535e-19 C")}),i(o,"bohrMagneton",function(){return s("9.2740096820e-24 J T^-1")}),i(o,"conductanceQuantum",function(){return s("7.748091734625e-5 S")}),i(o,"inverseConductanceQuantum",function(){return s("12906.403721742 ohm")}),i(o,"magneticFluxQuantum",function(){return s("2.06783375846e-15 Wb")}),i(o,"nuclearMagneton",function(){return s("5.0507835311e-27 J T^-1")}),i(o,"klitzing",function(){return s("25812.807443484 ohm")}),i(o,"bohrRadius",function(){return s("5.291772109217e-11 m")}),i(o,"classicalElectronRadius",function(){return s("2.817940326727e-15 m")}),i(o,"electronMass",function(){return s("9.1093829140e-31 kg")}),i(o,"fermiCoupling",function(){return s("1.1663645e-5 GeV^-2")}),i(o,"fineStructure",function(){return.007297352569824}),i(o,"hartreeEnergy",function(){return s("4.3597443419e-18 J")}),i(o,"protonMass",function(){return s("1.67262177774e-27 kg")}),i(o,"deuteronMass",function(){return s("3.3435830926e-27 kg")}),i(o,"neutronMass",function(){return s("1.6749271613e-27 kg")}),i(o,"quantumOfCirculation",function(){return s("3.636947552024e-4 m^2 s^-1")}),i(o,"rydberg",function(){return s("10973731.56853955 m^-1")}),i(o,"thomsonCrossSection",function(){return s("6.65245873413e-29 m^2")}),i(o,"weakMixingAngle",function(){return.222321}),i(o,"efimovFactor",function(){return 22.7}),i(o,"atomicMass",function(){return s("1.66053892173e-27 kg")}),i(o,"avogadro",function(){return s("6.0221412927e23 mol^-1")}),i(o,"boltzmann",function(){return s("1.380648813e-23 J K^-1")}),i(o,"faraday",function(){return s("96485.336521 C mol^-1")}),i(o,"firstRadiation",function(){return s("3.7417715317e-16 W m^2")}),i(o,"loschmidt",function(){return s("2.686780524e25 m^-3")}),i(o,"gasConstant",function(){return s("8.314462175 J K^-1 mol^-1")}),i(o,"molarPlanckConstant",function(){return s("3.990312717628e-10 J s mol^-1")}),i(o,"molarVolume",function(){return s("2.241396820e-10 m^3 mol^-1")}),i(o,"sackurTetrode",function(){return-1.164870823}),i(o,"secondRadiation",function(){return s("1.438777013e-2 m K")}),i(o,"stefanBoltzmann",function(){return s("5.67037321e-8 W m^-2 K^-4")}),i(o,"wienDisplacement",function(){return s("2.897772126e-3 m K")}),i(o,"molarMass",function(){return s("1e-3 kg mol^-1")}),i(o,"molarMassC12",function(){return s("1.2e-2 kg mol^-1")}),i(o,"gravity",function(){return s("9.80665 m s^-2")}),i(o,"planckLength",function(){return s("1.61619997e-35 m")}),i(o,"planckMass",function(){return s("2.1765113e-8 kg")}),i(o,"planckTime",function(){return s("5.3910632e-44 s")}),i(o,"planckCharge",function(){return s("1.87554595641e-18 C")}),i(o,"planckTemperature",function(){return s("1.41683385e+32 K")})},e.lazy=!1,e.math=!0},function(t,e,n){"use strict";var r=n(15),i=n(686);function o(t,e,n){t[e]=n,t.expression.mathWithTransform[e]=n}function s(t,e,n){r.lazy(t,e,n),r.lazy(t.expression.mathWithTransform,e,n)}e.factory=function t(e,r,a,u,c){c.on("config",function(n,i){n.number!==i.number&&t(e,r,a,u,c)}),o(c,"true",!0),o(c,"false",!1),o(c,"null",null),o(c,"uninitialized","Error: Constant uninitialized is removed since v4.0.0. Use null instead"),"BigNumber"===r.number?(o(c,"Infinity",new e.BigNumber(1/0)),o(c,"NaN",new e.BigNumber(NaN)),s(c,"pi",function(){return i.pi(e.BigNumber)}),s(c,"tau",function(){return i.tau(e.BigNumber)}),s(c,"e",function(){return i.e(e.BigNumber)}),s(c,"phi",function(){return i.phi(e.BigNumber)}),s(c,"E",function(){return c.e}),s(c,"LN2",function(){return new e.BigNumber(2).ln()}),s(c,"LN10",function(){return new e.BigNumber(10).ln()}),s(c,"LOG2E",function(){return new e.BigNumber(1).div(new e.BigNumber(2).ln())}),s(c,"LOG10E",function(){return new e.BigNumber(1).div(new e.BigNumber(10).ln())}),s(c,"PI",function(){return c.pi}),s(c,"SQRT1_2",function(){return new e.BigNumber("0.5").sqrt()}),s(c,"SQRT2",function(){return new e.BigNumber(2).sqrt()})):(o(c,"Infinity",1/0),o(c,"NaN",NaN),o(c,"pi",Math.PI),o(c,"tau",2*Math.PI),o(c,"e",Math.E),o(c,"phi",1.618033988749895),o(c,"E",c.e),o(c,"LN2",Math.LN2),o(c,"LN10",Math.LN10),o(c,"LOG2E",Math.LOG2E),o(c,"LOG10E",Math.LOG10E),o(c,"PI",c.pi),o(c,"SQRT1_2",Math.SQRT1_2),o(c,"SQRT2",Math.SQRT2)),e.Complex&&o(c,"i",e.Complex.I),o(c,"version",n(1713))},e.lazy=!1,e.math=!0},function(t,e,n){"use strict";t.exports="5.10.3"},function(t,e,n){"use strict";t.exports=[n(1715),n(1736),n(1757),n(1770),n(1774),n(1778),n(1781),n(1785),n(1805),n(1814),n(1817),n(1825),n(1827),n(1832),n(1834),n(1860),n(1862)]},function(t,e,n){"use strict";t.exports=[n(1716),n(369),n(1719),n(1720),n(370),n(710),n(714),n(1734),n(715)]},function(t,e,n){"use strict";e.name="derivative",e.factory=function(t,e,r,i){var o=r(n(137)),s=r(n(369)),a=r(n(162)),u=r(n(194)),c=r(n(75)),h=r(n(249)),l=r(n(192)),f=r(n(253)),d=r(n(193)),p=r(n(252)),m=r(n(165)),v=i("derivative",{"Node, SymbolNode, Object":function(t,e,n){var r={};y(r,t,e.name);var i=b(t,r);return n.simplify?s(i):i},"Node, SymbolNode":function(t,e){return v(t,e,{simplify:!0})},"string, SymbolNode":function(t,e){return v(o(t),e)},"string, SymbolNode, Object":function(t,e,n){return v(o(t),e,n)},"string, string":function(t,e){return v(o(t),o(e))},"string, string, Object":function(t,e,n){return v(o(t),o(e),n)},"Node, string":function(t,e){return v(t,o(e))},"Node, string, Object":function(t,e,n){return v(t,o(e),n)}});v._simplify=!0,v.toTex=function(t){return g.apply(null,t.args)};var g=i("_derivTex",{"Node, SymbolNode":function(e,n){return t.isConstantNode(e)&&"string"===c(e.value)?g(o(e.value).toString(),n.toString(),1):g(e.toString(),n.toString(),1)},"Node, ConstantNode":function(t,e){if("string"===c(e.value))return g(t,o(e.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(t,e,n){return g(t.toString(),e.name,n.value)},"string, string, number":function(t,e,n){return(1===n?"{d\\over d"+e+"}":"{d^{"+n+"}\\over d"+e+"^{"+n+"}}")+"\\left[".concat(t,"\\right]")}}),y=i("constTag",{"Object, ConstantNode, string":function(t,e){return t[e]=!0,!0},"Object, SymbolNode, string":function(t,e,n){return e.name!==n&&(t[e]=!0,!0)},"Object, ParenthesisNode, string":function(t,e,n){return y(t,e.content,n)},"Object, FunctionAssignmentNode, string":function(t,e,n){return-1===e.params.indexOf(n)?(t[e]=!0,!0):y(t,e.expr,n)},"Object, FunctionNode | OperatorNode, string":function(t,e,n){if(e.args.length>0){for(var r=y(t,e.args[0],n),i=1;i<e.args.length;++i)r=y(t,e.args[i],n)&&r;if(r)return t[e]=!0,!0}return!1}}),b=i("_derivative",{"ConstantNode, Object":function(t){return x(0)},"SymbolNode, Object":function(t,e){return void 0!==e[t]?x(0):x(1)},"ParenthesisNode, Object":function(t,e){return new p(b(t.content,e))},"FunctionAssignmentNode, Object":function(t,e){return void 0!==e[t]?x(0):b(t.expr,e)},"FunctionNode, Object":function(t,e){if(1!==t.args.length&&function(t){if("log"!==t.name&&"nthRoot"!==t.name&&"pow"!==t.name||2!==t.args.length){for(var e=0;e<t.args.length;++e)t.args[e]=x(0);throw t.compile().eval(),new Error("Expected TypeError, but none found")}}(t),void 0!==e[t])return x(0);var n,r,i,o,s=t.args[0],a=!1,u=!1;switch(t.name){case"cbrt":a=!0,r=new d("*","multiply",[x(3),new d("^","pow",[s,new d("/","divide",[x(2),x(3)])])]);break;case"sqrt":case"nthRoot":if(1===t.args.length)a=!0,r=new d("*","multiply",[x(2),new f("sqrt",[s])]);else if(2===t.args.length)return e[n=new d("/","divide",[x(1),t.args[1]])]=e[t.args[1]],b(new d("^","pow",[s,n]),e);break;case"log10":n=x(10);case"log":if(n||1!==t.args.length){if(1===t.args.length&&n||2===t.args.length&&void 0!==e[t.args[1]])r=new d("*","multiply",[s.clone(),new f("log",[n||t.args[1]])]),a=!0;else if(2===t.args.length)return b(new d("/","divide",[new f("log",[s]),new f("log",[t.args[1]])]),e)}else r=s.clone(),a=!0;break;case"pow":return e[n]=e[t.args[1]],b(new d("^","pow",[s,t.args[1]]),e);case"exp":r=new f("exp",[s.clone()]);break;case"sin":r=new f("cos",[s.clone()]);break;case"cos":r=new d("-","unaryMinus",[new f("sin",[s.clone()])]);break;case"tan":r=new d("^","pow",[new f("sec",[s.clone()]),x(2)]);break;case"sec":r=new d("*","multiply",[t,new f("tan",[s.clone()])]);break;case"csc":u=!0,r=new d("*","multiply",[t,new f("cot",[s.clone()])]);break;case"cot":u=!0,r=new d("^","pow",[new f("csc",[s.clone()]),x(2)]);break;case"asin":a=!0,r=new f("sqrt",[new d("-","subtract",[x(1),new d("^","pow",[s.clone(),x(2)])])]);break;case"acos":a=!0,u=!0,r=new f("sqrt",[new d("-","subtract",[x(1),new d("^","pow",[s.clone(),x(2)])])]);break;case"atan":a=!0,r=new d("+","add",[new d("^","pow",[s.clone(),x(2)]),x(1)]);break;case"asec":a=!0,r=new d("*","multiply",[new f("abs",[s.clone()]),new f("sqrt",[new d("-","subtract",[new d("^","pow",[s.clone(),x(2)]),x(1)])])]);break;case"acsc":a=!0,u=!0,r=new d("*","multiply",[new f("abs",[s.clone()]),new f("sqrt",[new d("-","subtract",[new d("^","pow",[s.clone(),x(2)]),x(1)])])]);break;case"acot":a=!0,u=!0,r=new d("+","add",[new d("^","pow",[s.clone(),x(2)]),x(1)]);break;case"sinh":r=new f("cosh",[s.clone()]);break;case"cosh":r=new f("sinh",[s.clone()]);break;case"tanh":r=new d("^","pow",[new f("sech",[s.clone()]),x(2)]);break;case"sech":u=!0,r=new d("*","multiply",[t,new f("tanh",[s.clone()])]);break;case"csch":u=!0,r=new d("*","multiply",[t,new f("coth",[s.clone()])]);break;case"coth":u=!0,r=new d("^","pow",[new f("csch",[s.clone()]),x(2)]);break;case"asinh":a=!0,r=new f("sqrt",[new d("+","add",[new d("^","pow",[s.clone(),x(2)]),x(1)])]);break;case"acosh":a=!0,r=new f("sqrt",[new d("-","subtract",[new d("^","pow",[s.clone(),x(2)]),x(1)])]);break;case"atanh":a=!0,r=new d("-","subtract",[x(1),new d("^","pow",[s.clone(),x(2)])]);break;case"asech":a=!0,u=!0,r=new d("*","multiply",[s.clone(),new f("sqrt",[new d("-","subtract",[x(1),new d("^","pow",[s.clone(),x(2)])])])]);break;case"acsch":a=!0,u=!0,r=new d("*","multiply",[new f("abs",[s.clone()]),new f("sqrt",[new d("+","add",[new d("^","pow",[s.clone(),x(2)]),x(1)])])]);break;case"acoth":a=!0,u=!0,r=new d("-","subtract",[x(1),new d("^","pow",[s.clone(),x(2)])]);break;case"abs":r=new d("/","divide",[new f(new m("abs"),[s.clone()]),s.clone()]);break;case"gamma":default:throw new Error('Function "'+t.name+'" is not supported by derivative, or a wrong number of arguments is passed')}a?(i="/",o="divide"):(i="*",o="multiply");var c=b(s,e);return u&&(c=new d("-","unaryMinus",[c])),new d(i,o,[c,r])},"OperatorNode, Object":function(e,n){if(void 0!==n[e])return x(0);if("+"===e.op)return new d(e.op,e.fn,e.args.map(function(t){return b(t,n)}));if("-"===e.op){if(e.isUnary())return new d(e.op,e.fn,[b(e.args[0],n)]);if(e.isBinary())return new d(e.op,e.fn,[b(e.args[0],n),b(e.args[1],n)])}if("*"===e.op){var r=e.args.filter(function(t){return void 0!==n[t]});if(r.length>0){var i=e.args.filter(function(t){return void 0===n[t]}),o=1===i.length?i[0]:new d("*","multiply",i),s=r.concat(b(o,n));return new d("*","multiply",s)}return new d("+","add",e.args.map(function(t){return new d("*","multiply",e.args.map(function(e){return e===t?b(e,n):e.clone()}))}))}if("/"===e.op&&e.isBinary()){var c=e.args[0],h=e.args[1];return void 0!==n[h]?new d("/","divide",[b(c,n),h]):void 0!==n[c]?new d("*","multiply",[new d("-","unaryMinus",[c]),new d("/","divide",[b(h,n),new d("^","pow",[h.clone(),x(2)])])]):new d("/","divide",[new d("-","subtract",[new d("*","multiply",[b(c,n),h.clone()]),new d("*","multiply",[c.clone(),b(h,n)])]),new d("^","pow",[h.clone(),x(2)])])}if("^"===e.op&&e.isBinary()){var l=e.args[0],p=e.args[1];if(void 0!==n[l])return t.isConstantNode(l)&&(u(l.value)||a(l.value,1))?x(0):new d("*","multiply",[e,new d("*","multiply",[new f("log",[l.clone()]),b(p.clone(),n)])]);if(void 0!==n[p]){if(t.isConstantNode(p)){if(u(p.value))return x(0);if(a(p.value,1))return b(l,n)}var m=new d("^","pow",[l.clone(),new d("-","subtract",[p,x(1)])]);return new d("*","multiply",[p.clone(),new d("*","multiply",[b(l,n),m])])}return new d("*","multiply",[new d("^","pow",[l.clone(),p.clone()]),new d("+","add",[new d("*","multiply",[b(l,n),new d("/","divide",[p.clone(),l.clone()])]),new d("*","multiply",[b(p,n),new f("log",[l.clone()])])])])}throw new Error('Operator "'+e.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function x(t,n){return new l(h(t,n||e.number))}return v}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(63).transform,o=n(45).setSafeProperty;e.factory=function(t,e,s,a){var u=s(n(64)),c=s(n(3));return function(t,e,n){try{if(Array.isArray(t))return c(t).subset(e,n).valueOf();if(t&&"function"==typeof t.subset)return t.subset(e,n);if("string"==typeof t)return u(t,e,n);if("object"===r(t)){if(!e.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return o(t,e.getObjectProperty(),n),t}throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw i(t)}}}},function(t,e,n){"use strict";e.math=!0,e.name="resolve",e.path="algebra.simplify",e.factory=function(t,e,n,r,i){var o=i.expression.node.Node,s=i.expression.node.OperatorNode,a=i.expression.node.FunctionNode,u=i.expression.node.ParenthesisNode;return function e(n,r){if(!r)return n;if(t.isSymbolNode(n)){var c=r[n.name];if(c instanceof o)return e(c,r);if("number"==typeof c)return i.parse(String(c))}else{if(t.isOperatorNode(n)){var h=n.args.map(function(t){return e(t,r)});return new s(n.op,n.fn,h,n.implicit)}if(t.isParenthesisNode(n))return new u(e(n.content,r));if(t.isFunctionNode(n)){var l=n.args.map(function(t){return e(t,r)});return new a(n.name,l)}}return n}}},function(t,e,n){"use strict";e.name="rationalize",e.factory=function(t,e,r,i){var o=r(n(369)),s=r(n(705)),a=r(n(703)),u=r(n(707)),c=n(7),h=r(n(192)),l=r(n(193)),f=r(n(165)),d=i("rationalize",{string:function(t){return d(u(t),{},!1)},"string, boolean":function(t,e){return d(u(t),{},e)},"string, Object":function(t,e){return d(u(t),e,!1)},"string, Object, boolean":function(t,e,n){return d(u(t),e,n)},Node:function(t){return d(t,{},!1)},"Node, boolean":function(t,e){return d(t,{},e)},"Node, Object":function(t,e){return d(t,e,!1)},"Node, Object, boolean":function(t,e,n){var r=function(){var t=[s,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},a,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],e=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],r={};return r.firstRules=t.concat(e,n),r.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r.sucDivRules=n,r.firstRulesAgain=t.concat(e),r.finalRules=[s,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},a,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],r}(),i=function(t,e,n,r){var i=[],s=o(t,r,e,{exactFractions:!1}),a="+-*"+((n=!!n)?"/":"");!function t(e){var n=e.type;if("FunctionNode"===n)throw new Error("There is an unsolved function call");if("OperatorNode"===n)if("^"===e.op){if("unaryMinus"===e.args[1].fn&&(e=e.args[0]),"ConstantNode"!==e.args[1].type||!c.isInteger(parseFloat(e.args[1].value)))throw new Error("There is a non-integer exponent");t(e.args[0])}else{if(-1===a.indexOf(e.op))throw new Error("Operator "+e.op+" invalid in polynomial expression");for(var r=0;r<e.args.length;r++)t(e.args[r])}else if("SymbolNode"===n){var o=e.name,s=i.indexOf(o);-1===s&&i.push(o)}else if("ParenthesisNode"===n)t(e.content);else if("ConstantNode"!==n)throw new Error("type "+n+" is not allowed in polynomial expression")}(s);var u={};return u.expression=s,u.variables=i,u}(t,e,!0,r.firstRules),u=i.variables.length;if(t=i.expression,u>=1){var f,d;t=function t(e,n,r){var i=e.type,o=arguments.length>1;if("OperatorNode"===i&&e.isBinary()){var s,a=!1;if("^"===e.op&&("ParenthesisNode"!==e.args[0].type&&"OperatorNode"!==e.args[0].type||"ConstantNode"!==e.args[1].type||(s=parseFloat(e.args[1].value),a=s>=2&&c.isInteger(s))),a){if(s>2){var u=e.args[0],f=new l("^","pow",[e.args[0].cloneDeep(),new h(s-1)]);e=new l("*","multiply",[u,f])}else e=new l("*","multiply",[e.args[0],e.args[0].cloneDeep()]);o&&("content"===r?n.content=e:n.args[r]=e)}}if("ParenthesisNode"===i)t(e.content,e,"content");else if("ConstantNode"!==i&&"SymbolNode"!==i)for(var d=0;d<e.args.length;d++)t(e.args[d],e,d);if(!o)return e}(t);var m,v=!0,g=!1;for(t=o(t,r.firstRules,{},{exactFractions:!1});d=v?r.distrDivRules:r.sucDivRules,v=!v,(m=(t=o(t,d)).toString())!==f;)g=!0,f=m;g&&(t=o(t,r.firstRulesAgain,{},{exactFractions:!1})),t=o(t,r.finalRules,{},{exactFractions:!1})}var y=[],b={};return"OperatorNode"===t.type&&t.isBinary()&&"/"===t.op?(1===u&&(t.args[0]=p(t.args[0],y),t.args[1]=p(t.args[1])),n&&(b.numerator=t.args[0],b.denominator=t.args[1])):(1===u&&(t=p(t,y)),n&&(b.numerator=t,b.denominator=null)),n?(b.coefficients=y,b.variables=i.variables,b.expression=t,b):t}});function p(t,e){void 0===e&&(e=[]),e[0]=0;var n={cte:1,oper:"+",fire:""},r=0,i="";!function t(n,o,s){var a=n.type;if("FunctionNode"===a)throw new Error("There is an unsolved function call");if("OperatorNode"===a){if(-1==="+-*^".indexOf(n.op))throw new Error("Operator "+n.op+" invalid");if(null!==o){if(("unaryMinus"===n.fn||"pow"===n.fn)&&"add"!==o.fn&&"subtract"!==o.fn&&"multiply"!==o.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"multiply"===n.fn)&&"add"!==o.fn&&"subtract"!==o.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"unaryMinus"===n.fn)&&0!==s.noFil)throw new Error("Invalid "+n.op+" placing")}"^"!==n.op&&"*"!==n.op||(s.fire=n.op);for(var u=0;u<n.args.length;u++)"unaryMinus"===n.fn&&(s.oper="-"),"+"!==n.op&&"subtract"!==n.fn||(s.fire="",s.cte=1,s.oper=0===u?"+":n.op),s.noFil=u,t(n.args[u],n,s)}else if("SymbolNode"===a){if(n.name!==i&&""!==i)throw new Error("There is more than one variable");if(i=n.name,null===o)return void(e[1]=1);if("^"===o.op&&0!==s.noFil)throw new Error("In power the variable should be the first parameter");if("*"===o.op&&1!==s.noFil)throw new Error("In multiply the variable should be the second parameter");""!==s.fire&&"*"!==s.fire||(r<1&&(e[1]=0),e[1]+=s.cte*("+"===s.oper?1:-1),r=Math.max(1,r))}else{if("ConstantNode"!==a)throw new Error("Type "+a+" is not allowed");var h=parseFloat(n.value);if(null===o)return void(e[0]=h);if("^"===o.op){if(1!==s.noFil)throw new Error("Constant cannot be powered");if(!c.isInteger(h)||h<=0)throw new Error("Non-integer exponent is not allowed");for(var l=r+1;l<h;l++)e[l]=0;return h>r&&(e[h]=0),e[h]+=s.cte*("+"===s.oper?1:-1),void(r=Math.max(h,r))}s.cte=h,""===s.fire&&(e[0]+=s.cte*("+"===s.oper?1:-1))}}(t,null,n);for(var o,s=!0,a=r=e.length-1;a>=0;a--)if(0!==e[a]){var u=new h(s?e[a]:Math.abs(e[a])),d=e[a]<0?"-":"+";if(a>0){var p=new f(i);if(a>1){var m=new h(a);p=new l("^","pow",[p,m])}u=-1===e[a]&&s?new l("-","unaryMinus",[p]):1===Math.abs(e[a])?p:new l("*","multiply",[u,p])}o=s?u:"+"===d?new l("+","add",[o,u]):new l("-","subtract",[o,u]),s=!1}return s?new h(0):o}return d}},function(t,e,n){"use strict";e.name="qr",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(136)),a=r(n(161)),u=r(n(194)),c=r(n(708)),h=r(n(709)),l=r(n(139)),f=r(n(255)),d=r(n(120)),p=r(n(53)),m=r(n(44)),v=r(n(62)),g=r(n(48));function y(t){var e,n,r,i=t._size[0],o=t._size[1],y=a([i],"dense"),b=y._data,x=t.clone(),w=x._data,E=s([i],"");for(r=0;r<Math.min(o,i);++r){var _=w[r][r],S=d(h(_)),T=f(S),A=0;for(e=r;e<i;e++)A=p(A,v(w[e][r],f(w[e][r])));var M=v(S,l(A));if(!u(M)){var C=g(_,M);for(E[r]=1,e=r+1;e<i;e++)E[e]=m(w[e][r],C);var O=d(f(m(C,M))),N=void 0;for(n=r;n<o;n++){for(N=0,e=r;e<i;e++)N=p(N,v(f(E[e]),w[e][n]));for(N=v(N,O),e=r;e<i;e++)w[e][n]=v(g(w[e][n],v(E[e],N)),T)}for(e=0;e<i;e++){for(N=0,n=r;n<i;n++)N=p(N,v(b[e][n],E[n]));for(N=v(N,O),n=r;n<i;++n)b[e][n]=m(g(b[e][n],v(N,f(E[n]))),T)}}}for(e=0;e<i;++e)for(n=0;n<e&&n<o;++n){if(c(0,m(w[e][n],1e5)))throw new Error("math.qr(): unknown error - R is not lower triangular (element ("+e+", "+n+")  = "+w[e][n]+")");w[e][n]=v(w[e][n],0)}return{Q:y,R:x,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}return i("qr",{DenseMatrix:function(t){return y(t)},SparseMatrix:function(t){return function(t){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(t){var e=y(o(t));return{Q:e.Q.valueOf(),R:e.R.valueOf()}}})}},function(t,e,n){"use strict";e.name="csSqr",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(1722)),o=r(n(1724)),s=r(n(1725)),a=r(n(1726)),u=r(n(1727));return function(t,e,n){var r,c=e._ptr,h=e._size[1],l={};if(l.q=i(t,e),t&&!l.q)return null;if(n){var f=t?o(e,null,l.q,0):e;l.parent=s(f,1);var d=a(l.parent,h);if(l.cp=u(f,l.parent,d,1),f&&l.parent&&l.cp&&function(t,e){var n=t._ptr,r=t._index,i=t._size,o=i[0],s=i[1];e.pinv=[],e.leftmost=[];var a,u,c,h,l,f=e.parent,d=e.pinv,p=e.leftmost,m=[],v=o,g=o+s,y=o+2*s;for(u=0;u<s;u++)m[v+u]=-1,m[g+u]=-1,m[y+u]=0;for(a=0;a<o;a++)p[a]=-1;for(u=s-1;u>=0;u--)for(h=n[u],l=n[u+1],c=h;c<l;c++)p[r[c]]=u;for(a=o-1;a>=0;a--)d[a]=-1,-1!==(u=p[a])&&(0==m[y+u]++&&(m[g+u]=a),m[0+a]=m[v+u],m[v+u]=a);for(e.lnz=0,e.m2=o,u=0;u<s;u++)if(a=m[v+u],e.lnz++,a<0&&(a=e.m2++),d[a]=u,!(--y[u]<=0)){e.lnz+=m[y+u];var b=f[u];-1!==b&&(0===m[y+b]&&(m[g+b]=m[g+u]),m[0+m[g+u]]=m[v+b],m[v+b]=m[0+a],m[y+b]+=m[y+u])}for(a=0;a<o;a++)d[a]<0&&(d[a]=u++);return!0}(f,l))for(l.unz=0,r=0;r<h;r++)l.unz+=l.cp[r]}else l.unz=4*c[h]+h,l.lnz=l.unz;return l}}},function(t,e,n){"use strict";e.name="csAmd",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(371)),o=r(n(1723)),s=r(n(711)),a=r(n(47)),u=r(n(28)),c=r(n(256));function h(t,e,n,r,i){if(t<2||t+e<0){for(var o=0;o<i;o++)0!==n[r+o]&&(n[r+o]=1);t=2}return t}function l(t,e){return t!==e}return function(t,e){if(!e||t<=0||t>3)return null;var n=e._size,r=n[0],f=n[1],d=0,p=Math.max(16,10*Math.sqrt(f)),m=function(t,e,n,r,i){var o=c(e);if(1===t&&r===n)return a(e,o);if(2===t){for(var s=o._index,h=o._ptr,l=0,f=0;f<n;f++){var d=h[f];if(h[f]=l,!(h[f+1]-d>i))for(var p=h[f+1];d<p;d++)s[l++]=s[d]}return h[n]=l,e=c(o),u(o,e)}return u(o,e)}(t,e,r,f,p=Math.min(f-2,p));o(m,l,null);for(var v,g,y,b,x,w,E,_,S,T,A,M,C,O,N,k,R=m._index,P=m._ptr,I=P[f],D=[],L=[],B=f+1,F=2*(f+1),z=3*(f+1),j=4*(f+1),U=5*(f+1),Y=6*(f+1),W=7*(f+1),X=D,G=function(t,e,n,r,i,o,s,a,u,c,l,f){for(var d=0;d<t;d++)n[r+d]=e[d+1]-e[d];n[r+t]=0;for(var p=0;p<=t;p++)n[i+p]=-1,o[p]=-1,n[s+p]=-1,n[a+p]=-1,n[u+p]=1,n[c+p]=1,n[l+p]=0,n[f+p]=n[r+p];var m=h(0,0,n,c,t);return n[l+t]=-2,e[t]=-1,n[c+t]=0,m}(f,P,L,0,z,X,F,W,B,Y,j,U),V=function(t,e,n,r,o,s,a,u,c,h,l){for(var f=0,d=0;d<t;d++){var p=n[r+d];if(0===p)n[o+d]=-2,f++,e[d]=-1,n[s+d]=0;else if(p>a)n[u+d]=0,n[o+d]=-1,f++,e[d]=i(t),n[u+t]++;else{var m=n[c+p];-1!==m&&(h[m]=d),n[l+d]=n[c+p],n[c+p]=d}}return f}(f,P,L,U,j,Y,p,B,z,X,F),q=0;V<f;){for(y=-1;q<f&&-1===(y=L[z+q]);q++);-1!==L[F+y]&&(X[L[F+y]]=-1),L[z+q]=L[F+y];var H=L[j+y],K=L[B+y];V+=K;var $=0;L[B+y]=-K;var J=P[y],Z=0===H?J:I,Q=Z;for(b=1;b<=H+1;b++){for(b>H?(w=y,E=J,_=L[0+y]-H):(E=P[w=R[J++]],_=L[0+w]),x=1;x<=_;x++)(S=L[B+(v=R[E++])])<=0||($+=S,L[B+v]=-S,R[Q++]=v,-1!==L[F+v]&&(X[L[F+v]]=X[v]),-1!==X[v]?L[F+X[v]]=L[F+v]:L[z+L[U+v]]=L[F+v]);w!==y&&(P[w]=i(y),L[Y+w]=0)}for(0!==H&&(I=Q),L[U+y]=$,P[y]=Z,L[0+y]=Q-Z,L[j+y]=-2,G=h(G,d,L,Y,f),T=Z;T<Q;T++)if(!((A=L[j+(v=R[T])])<=0)){var tt=G-(S=-L[B+v]);for(J=P[v],M=P[v]+A-1;J<=M;J++)L[Y+(w=R[J])]>=G?L[Y+w]-=S:0!==L[Y+w]&&(L[Y+w]=L[U+w]+tt)}for(T=Z;T<Q;T++){for(C=(M=P[v=R[T]])+L[j+v]-1,O=M,N=0,k=0,J=M;J<=C;J++)if(0!==L[Y+(w=R[J])]){var et=L[Y+w]-G;et>0?(k+=et,R[O++]=w,N+=w):(P[w]=i(y),L[Y+w]=0)}L[j+v]=O-M+1;var nt=O,rt=M+L[0+v];for(J=C+1;J<rt;J++){var it=L[B+(g=R[J])];it<=0||(k+=it,R[O++]=g,N+=g)}0===k?(P[v]=i(y),$-=S=-L[B+v],K+=S,V+=S,L[B+v]=0,L[j+v]=-1):(L[U+v]=Math.min(L[U+v],k),R[O]=R[nt],R[nt]=R[M],R[M]=y,L[0+v]=O-M+1,N=(N<0?-N:N)%f,L[F+v]=L[W+N],L[W+N]=v,X[v]=N)}for(L[U+y]=$,G=h(G+(d=Math.max(d,$)),d,L,Y,f),T=Z;T<Q;T++)if(!(L[B+(v=R[T])]>=0))for(v=L[W+(N=X[v])],L[W+N]=-1;-1!==v&&-1!==L[F+v];v=L[F+v],G++){for(_=L[0+v],A=L[j+v],J=P[v]+1;J<=P[v]+_-1;J++)L[Y+R[J]]=G;var ot=v;for(g=L[F+v];-1!==g;){var st=L[0+g]===_&&L[j+g]===A;for(J=P[g]+1;st&&J<=P[g]+_-1;J++)L[Y+R[J]]!==G&&(st=0);st?(P[g]=i(v),L[B+v]+=L[B+g],L[B+g]=0,L[j+g]=-1,g=L[F+g],L[F+ot]=g):(ot=g,g=L[F+g])}}for(J=Z,T=Z;T<Q;T++)(S=-L[B+(v=R[T])])<=0||(L[B+v]=S,k=L[U+v]+$-S,-1!==L[z+(k=Math.min(k,f-V-S))]&&(X[L[z+k]]=v),L[F+v]=L[z+k],X[v]=-1,L[z+k]=v,q=Math.min(q,k),L[U+v]=k,R[J++]=v);L[B+y]=K,0==(L[0+y]=J-Z)&&(P[y]=-1,L[Y+y]=0),0!==H&&(I=J)}for(v=0;v<f;v++)P[v]=i(P[v]);for(g=0;g<=f;g++)L[z+g]=-1;for(g=f;g>=0;g--)L[B+g]>0||(L[F+g]=L[z+P[g]],L[z+P[g]]=g);for(w=f;w>=0;w--)L[B+w]<=0||-1!==P[w]&&(L[F+w]=L[z+P[w]],L[z+P[w]]=w);for(y=0,v=0;v<=f;v++)-1===P[v]&&(y=s(v,y,L,z,F,D,Y));return D.splice(D.length-1,1),D}}},function(t,e,n){"use strict";e.name="csFkeep",e.path="algebra.sparse",e.factory=function(){return function(t,e,n){for(var r=t._values,i=t._index,o=t._ptr,s=t._size[1],a=0,u=0;u<s;u++){var c=o[u];for(o[u]=a;c<o[u+1];c++)e(i[c],u,r?r[c]:1,n)&&(i[a]=i[c],r&&(r[a]=r[c]),a++)}return o[s]=a,i.splice(a,i.length-a),r&&r.splice(a,r.length-a),a}}},function(t,e,n){"use strict";e.name="csPermute",e.path="algebra.sparse",e.factory=function(t){var e=t.SparseMatrix;return function(t,n,r,i){for(var o=t._values,s=t._index,a=t._ptr,u=t._size,c=t._datatype,h=u[0],l=u[1],f=i&&t._values?[]:null,d=[],p=[],m=0,v=0;v<l;v++){p[v]=m;for(var g=r?r[v]:v,y=a[g],b=a[g+1],x=y;x<b;x++){var w=n?n[s[x]]:s[x];d[m]=w,f&&(f[m]=o[x]),m++}}return p[l]=m,new e({values:f,index:d,ptr:p,size:[h,l],datatype:c})}}},function(t,e,n){"use strict";e.name="csEtree",e.path="algebra.sparse",e.factory=function(){return function(t,e){if(!t)return null;var n,r,i=t._index,o=t._ptr,s=t._size,a=s[0],u=s[1],c=[],h=[],l=u;if(e)for(n=0;n<a;n++)h[l+n]=-1;for(var f=0;f<u;f++){c[f]=-1,h[0+f]=-1;for(var d=o[f],p=o[f+1],m=d;m<p;m++){var v=i[m];for(n=e?h[l+v]:v;-1!==n&&n<f;n=r)r=h[0+n],h[0+n]=f,-1===r&&(c[n]=f);e&&(h[l+v]=f)}}return c}}},function(t,e,n){"use strict";e.name="csPost",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(711));return function(t,e){if(!t)return null;var n,r=0,o=[],s=[],a=e,u=2*e;for(n=0;n<e;n++)s[0+n]=-1;for(n=e-1;n>=0;n--)-1!==t[n]&&(s[a+n]=s[0+t[n]],s[0+t[n]]=n);for(n=0;n<e;n++)-1===t[n]&&(r=i(n,r,s,0,a,o,u));return o}}},function(t,e,n){"use strict";e.name="csCounts",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(256)),o=r(n(1728));return function(t,e,n,r){if(!t||!e||!n)return null;var s,a,u,c,h,l,f,d=t._size,p=d[0],m=d[1],v=4*m+(r?m+p+1:0),g=[],y=m,b=2*m,x=3*m,w=4*m,E=5*m+1;for(u=0;u<v;u++)g[u]=-1;var _=[],S=i(t),T=S._index,A=S._ptr;for(u=0;u<m;u++)for(_[a=n[u]]=-1===g[x+a]?1:0;-1!==a&&-1===g[x+a];a=e[a])g[x+a]=u;if(r){for(u=0;u<m;u++)g[n[u]]=u;for(s=0;s<p;s++){for(u=m,l=A[s],f=A[s+1],h=l;h<f;h++)u=Math.min(u,g[T[h]]);g[E+s]=g[w+u],g[w+u]=s}}for(s=0;s<m;s++)g[0+s]=s;for(u=0;u<m;u++){for(-1!==e[a=n[u]]&&_[e[a]]--,c=r?g[w+u]:a;-1!==c;c=r?g[E+c]:-1)for(h=A[c];h<A[c+1];h++){s=T[h];var M=o(s,a,g,x,y,b,0);M.jleaf>=1&&_[a]++,2===M.jleaf&&_[M.q]--}-1!==e[a]&&(g[0+a]=e[a])}for(a=0;a<m;a++)-1!==e[a]&&(_[e[a]]+=_[a]);return _}}},function(t,e,n){"use strict";e.name="csLeaf",e.path="algebra.sparse",e.factory=function(){return function(t,e,n,r,i,o,s){var a,u,c,h,l=0;if(t<=e||n[r+e]<=n[i+t])return-1;if(n[i+t]=n[r+e],c=n[o+t],n[o+t]=e,-1===c)l=1,h=t;else{for(l=2,h=c;h!==n[s+h];h=n[s+h]);for(a=c;a!==h;a=u)u=n[s+a],n[s+a]=h}return{jleaf:l,q:h}}}},function(t,e,n){"use strict";e.name="csLu",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(68)),o=r(n(44)),s=r(n(28)),a=r(n(106)),u=r(n(372)),c=r(n(1730)),h=t.SparseMatrix;return function(t,e,n){if(!t)return null;var r,l=t._size[1],f=100,d=100;e&&(r=e.q,f=e.lnz||f,d=e.unz||d);var p,m,v=[],g=[],y=[],b=new h({values:v,index:g,ptr:y,size:[l,l]}),x=[],w=[],E=[],_=new h({values:x,index:w,ptr:E,size:[l,l]}),S=[],T=[],A=[];for(p=0;p<l;p++)T[p]=0,S[p]=-1,y[p+1]=0;f=0,d=0;for(var M=0;M<l;M++){y[M]=f,E[M]=d;var C=r?r[M]:M,O=c(b,t,C,A,T,S,1),N=-1,k=-1;for(m=O;m<l;m++)if(S[p=A[m]]<0){var R=i(T[p]);a(R,k)&&(k=R,N=p)}else w[d]=S[p],x[d++]=T[p];if(-1===N||k<=0)return null;S[C]<0&&u(i(T[C]),s(k,n))&&(N=C);var P=T[N];for(w[d]=M,x[d++]=P,S[N]=M,g[f]=N,v[f++]=1,m=O;m<l;m++)S[p=A[m]]<0&&(g[f]=p,v[f++]=o(T[p],P)),T[p]=0}for(y[l]=f,E[l]=d,m=0;m<f;m++)g[m]=S[g[m]];return v.splice(f,v.length-f),g.splice(f,g.length-f),x.splice(d,x.length-d),w.splice(d,w.length-d),{L:b,U:_,pinv:S}}}},function(t,e,n){"use strict";e.name="csSpsolve",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(44)),o=r(n(28)),s=r(n(48)),a=r(n(1731));return function(t,e,n,r,u,c,h){var l,f,d,p,m=t._values,v=t._index,g=t._ptr,y=t._size[1],b=e._values,x=e._index,w=e._ptr,E=a(t,e,n,r,c);for(l=E;l<y;l++)u[r[l]]=0;for(f=w[n],d=w[n+1],l=f;l<d;l++)u[x[l]]=b[l];for(var _=E;_<y;_++){var S=r[_],T=c?c[S]:S;if(!(T<0))for(f=g[T],d=g[T+1],u[S]=i(u[S],m[h?f:d-1]),l=h?f+1:f,p=h?d:d-1;l<p;l++){var A=v[l];u[A]=s(u[A],o(m[l],u[S]))}}return E}}},function(t,e,n){"use strict";e.name="csReach",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(1732)),o=r(n(712)),s=r(n(713));return function(t,e,n,r,a){var u,c,h,l=t._ptr,f=t._size,d=e._index,p=e._ptr,m=f[1],v=m;for(c=p[n],h=p[n+1],u=c;u<h;u++){var g=d[u];o(l,g)||(v=i(g,t,v,r,a))}for(u=v;u<m;u++)s(l,r[u]);return v}}},function(t,e,n){"use strict";e.name="csDfs",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(712)),o=r(n(713)),s=r(n(1733));return function(t,e,n,r,a){var u,c,h,l=e._index,f=e._ptr,d=e._size[1],p=0;for(r[0]=t;p>=0;){t=r[p];var m=a?a[t]:t;i(f,t)||(o(f,t),r[d+p]=m<0?0:s(f[m]));var v=1;for(c=r[d+p],h=m<0?0:s(f[m+1]);c<h;c++)if(u=l[c],!i(f,u)){r[d+p]=c,r[++p]=u,v=0;break}v&&(p--,r[--n]=t)}return n}}},function(t,e,n){"use strict";e.name="csUnflip",e.path="algebra.sparse",e.factory=function(t,e,r){var i=r(n(371));return function(t){return t<0?i(t):t}}},function(t,e,n){"use strict";var r=Array.isArray;e.name="lusolve",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(370)),u=i(n(710)),c=i(n(1735)),h=i(n(373)),l=i(n(715)),f=i(n(714)),d=o("lusolve",{"Array, Array | Matrix":function(t,e){t=s(t);var n=a(t);return m(n.L,n.U,n.p,null,e).valueOf()},"DenseMatrix, Array | Matrix":function(t,e){var n=a(t);return m(n.L,n.U,n.p,null,e)},"SparseMatrix, Array | Matrix":function(t,e){var n=a(t);return m(n.L,n.U,n.p,null,e)},"SparseMatrix, Array | Matrix, number, number":function(t,e,n,r){var i=u(t,n,r);return m(i.L,i.U,i.p,i.q,e)},"Object, Array | Matrix":function(t,e){return m(t.L,t.U,t.p,t.q,e)}}),p=function(e){if(t.isMatrix(e))return e;if(r(e))return s(e);throw new TypeError("Invalid Matrix LU decomposition")};function m(t,e,n,r,i){t=p(t),e=p(e),i=h(t,i,!1),n&&(i._data=c(n,i._data));var o=f(t,i),s=l(e,o);return r&&(s._data=c(r,s._data)),s}return d}},function(t,e,n){"use strict";e.name="csIpvec",e.path="algebra.sparse",e.factory=function(){return function(t,e){var n,r=e.length,i=[];if(t)for(n=0;n<r;n++)i[t[n]]=e[n];else for(n=0;n<r;n++)i[n]=e[n];return i}}},function(t,e,n){"use strict";t.exports=[n(68),n(47),n(53),n(1737),n(688),n(1738),n(138),n(716),n(1739),n(1740),n(1741),n(1742),n(687),n(689),n(1743),n(1744),n(1745),n(374),n(1747),n(1748),n(1749),n(1750),n(28),n(1751),n(1752),n(1753),n(135),n(251),n(709),n(139),n(1754),n(48),n(120),n(1755),n(1756)]},function(t,e,n){"use strict";var r=n(4);var i=Math.cbrt||function(t){if(0===t)return t;var e,n=t<0;return n&&(t=-t),e=isFinite(t)?(t/((e=Math.exp(Math.log(t)/3))*e)+2*e)/3:t,n?-e:e};e.name="cbrt",e.factory=function(t,e,o,s){var a=o(n(120)),u=o(n(195)),c=o(n(3)),h=s("cbrt",{number:i,Complex:l,"Complex, boolean":l,BigNumber:function(t){return t.cbrt()},Unit:function(e){if(e.value&&t.isComplex(e.value)){var n=e.clone();return n.value=1,(n=n.pow(1/3)).value=l(e.value),n}var r,i=u(e.value);i&&(e.value=a(e.value)),r=t.isBigNumber(e.value)?new t.BigNumber(1).div(3):t.isFraction(e.value)?new t.Fraction(1,3):1/3;var o=e.pow(r);return i&&(o.value=a(o.value)),o},"Array | Matrix":function(t){return r(t,h,!0)}});function l(n,r){var o=n.arg()/3,s=n.abs(),a=new t.Complex(i(s),0).mul(new t.Complex(0,o).exp());if(r){var u=[a,new t.Complex(i(s),0).mul(new t.Complex(0,o+2*Math.PI/3).exp()),new t.Complex(i(s),0).mul(new t.Complex(0,o-2*Math.PI/3).exp())];return"Array"===e.matrix?u:c(u)}return a}return h.toTex={1:"\\sqrt[3]{${args[0]}}"},h}},function(t,e,n){"use strict";var r=n(4);e.name="cube",e.factory=function(t,e,n,i){var o=i("cube",{number:function(t){return t*t*t},Complex:function(t){return t.mul(t).mul(t)},BigNumber:function(t){return t.times(t).times(t)},Fraction:function(t){return t.pow(3)},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.pow(3)}});return o.toTex={1:"\\left(${args[0]}\\right)^3"},o}},function(t,e,n){"use strict";e.name="dotMultiply",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(62)),a=n(9),u=r(n(76)),c=r(n(717)),h=r(n(56)),l=r(n(19)),f=r(n(18)),d=i("dotMultiply",{"any, any":s,"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,s,!1)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,s,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,s,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,s)},"Array, Array":function(t,e){return d(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return d(o(t),e)},"Matrix, Array":function(t,e){return d(t,o(e))},"SparseMatrix, any":function(t,e){return h(t,e,s,!1)},"DenseMatrix, any":function(t,e){return f(t,e,s,!1)},"any, SparseMatrix":function(t,e){return h(e,t,s,!0)},"any, DenseMatrix":function(t,e){return f(e,t,s,!0)},"Array, any":function(t,e){return f(o(t),e,s,!1).valueOf()},"any, Array":function(t,e){return f(o(e),t,s,!0).valueOf()}});return d.toTex={2:"\\left(${args[0]}".concat(a.operators.dotMultiply,"${args[1]}\\right)")},d}},function(t,e,n){"use strict";e.name="dotPow",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(135)),a=n(9),u=r(n(54)),c=r(n(83)),h=r(n(56)),l=r(n(55)),f=r(n(19)),d=r(n(18)),p=i("dotPow",{"any, any":s,"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,s,!1)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,s,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,s,!1)},"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,s)},"Array, Array":function(t,e){return p(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return p(o(t),e)},"Matrix, Array":function(t,e){return p(t,o(e))},"SparseMatrix, any":function(t,e){return h(t,e,p,!1)},"DenseMatrix, any":function(t,e){return d(t,e,p,!1)},"any, SparseMatrix":function(t,e){return l(e,t,p,!0)},"any, DenseMatrix":function(t,e){return d(e,t,p,!0)},"Array, any":function(t,e){return d(o(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(o(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(a.operators.dotPow,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(4);e.name="exp",e.factory=function(t,e,n,i){var o=i("exp",{number:Math.exp,Complex:function(t){return t.exp()},BigNumber:function(t){return t.exp()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\exp\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="expm1",e.factory=function(t,e,i,o){var s=n(9),a=o("expm1",{number:Math.expm1||function(t){return t>=2e-4||t<=-2e-4?Math.exp(t)-1:t+t*t/2+t*t*t/6},Complex:function(e){var n=Math.exp(e.re);return new t.Complex(n*Math.cos(e.im)-1,n*Math.sin(e.im))},BigNumber:function(t){return t.exp().minus(1)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex="\\left(e".concat(s.operators.pow,"{${args[0]}}-1\\right)"),a}},function(t,e,n){"use strict";var r=n(7).isInteger;function i(t,e){if(!r(t)||!r(e))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!==e;)n=t%e,t=e,e=n;return t<0?-t:t}e.name="gcd",e.factory=function(t,e,r,o){var s=r(n(3)),a=r(n(118)),u=r(n(368)),c=r(n(134)),h=r(n(19)),l=r(n(18)),f=o("gcd",{"number, number":i,"BigNumber, BigNumber":function(e,n){if(!e.isInt()||!n.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var r=new t.BigNumber(0);!n.isZero();){var i=e.mod(n);e=n,n=i}return e.lt(r)?e.neg():e},"Fraction, Fraction":function(t,e){return t.gcd(e)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,f)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,f,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,f,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,f)},"Array, Array":function(t,e){return f(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return f(s(t),e)},"Matrix, Array":function(t,e){return f(t,s(e))},"SparseMatrix, number | BigNumber":function(t,e){return c(t,e,f,!1)},"DenseMatrix, number | BigNumber":function(t,e){return l(t,e,f,!1)},"number | BigNumber, SparseMatrix":function(t,e){return c(e,t,f,!0)},"number | BigNumber, DenseMatrix":function(t,e){return l(e,t,f,!0)},"Array, number | BigNumber":function(t,e){return l(s(t),e,f,!1).valueOf()},"number | BigNumber, Array":function(t,e){return l(s(e),t,f,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(t,e,n){for(var r=f(t,e),i=0;i<n.length;i++)r=f(r,n[i]);return r}});return f.toTex="\\gcd\\left(${args}\\right)",f}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="hypot",e.factory=function(t,e,i,o){var s=i(n(68)),a=i(n(53)),u=i(n(44)),c=i(n(62)),h=i(n(139)),l=i(n(119)),f=i(n(257)),d=o("hypot",{"... number | BigNumber":function(t){for(var e=0,n=0,r=0;r<t.length;r++){var i=s(t[r]);l(n,i)?(e=c(e,c(u(n,i),u(n,i))),e=a(e,1),n=i):e=a(e,f(i)?c(u(i,n),u(i,n)):i)}return c(n,h(e))},Array:function(t){return d.apply(d,r(t))},Matrix:function(t){return d.apply(d,r(t.toArray()))}});return d.toTex="\\hypot\\left(${args}\\right)",d}},function(t,e,n){"use strict";var r=n(7).isInteger;function i(t,e){if(!r(t)||!r(e))throw new Error("Parameters in function lcm must be integer numbers");if(0===t||0===e)return 0;for(var n,i=t*e;0!==e;)e=t%(n=e),t=n;return Math.abs(i/t)}e.name="lcm",e.factory=function(t,e,r,o){var s=r(n(3)),a=r(n(76)),u=r(n(258)),c=r(n(56)),h=r(n(19)),l=r(n(18)),f=o("lcm",{"number, number":i,"BigNumber, BigNumber":function(e,n){if(!e.isInt()||!n.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero()||n.isZero())return new t.BigNumber(0);for(var r=e.times(n);!n.isZero();){var i=n;n=e.mod(i),e=i}return r.div(e).abs()},"Fraction, Fraction":function(t,e){return t.lcm(e)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,f)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,f,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,f,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,f)},"Array, Array":function(t,e){return f(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return f(s(t),e)},"Matrix, Array":function(t,e){return f(t,s(e))},"SparseMatrix, number | BigNumber":function(t,e){return c(t,e,f,!1)},"DenseMatrix, number | BigNumber":function(t,e){return l(t,e,f,!1)},"number | BigNumber, SparseMatrix":function(t,e){return c(e,t,f,!0)},"number | BigNumber, DenseMatrix":function(t,e){return l(e,t,f,!0)},"Array, number | BigNumber":function(t,e){return l(s(t),e,f,!1).valueOf()},"number | BigNumber, Array":function(t,e){return l(s(e),t,f,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(t,e,n){for(var r=f(t,e),i=0;i<n.length;i++)r=f(r,n[i]);return r}});return f.toTex=void 0,f}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,s,a,u,c,h){var l,f,d,p,m=t._values,v=t._index,g=t._ptr,y=s._index;if(r)for(f=g[e],d=g[e+1],l=f;l<d;l++)n[p=v[l]]!==o?(n[p]=o,y.push(p),c?(r[p]=u?a(m[l],h):a(h,m[l]),i[p]=o):r[p]=m[l]):(r[p]=u?a(m[l],r[p]):a(r[p],m[l]),i[p]=o);else for(f=g[e],d=g[e+1],l=f;l<d;l++)n[p=v[l]]!==o?(n[p]=o,y.push(p)):i[p]=o}},function(t,e,n){"use strict";var r=n(4);var i=Math.log10||function(t){return Math.log(t)/Math.LN10};e.name="log10",e.factory=function(t,e,n,o){var s=o("log10",{number:function(n){return n>=0||e.predictable?i(n):new t.Complex(n,0).log().div(Math.LN10)},Complex:function(e){return new t.Complex(e).log().div(Math.LN10)},BigNumber:function(n){return!n.isNegative()||e.predictable?n.log():new t.Complex(n.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:"\\log_{10}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="log1p",e.factory=function(t,e,i,o){var s=i(n(44)),a=i(n(374)),u=o("log1p",{number:function(n){return n>=-1||e.predictable?Math.log1p?Math.log1p(n):Math.log(n+1):c(new t.Complex(n,0))},Complex:c,BigNumber:function(n){var r=n.plus(1);return!r.isNegative()||e.predictable?r.ln():c(new t.Complex(n.toNumber(),0))},"Array | Matrix":function(t){return r(t,u)},"any, any":function(t,e){return s(u(t),a(e))}});function c(e){var n=e.re+1;return new t.Complex(Math.log(Math.sqrt(n*n+e.im*e.im)),Math.atan2(e.im,n))}return u.toTex={1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},u}},function(t,e,n){"use strict";var r=n(4);e.name="log2",e.factory=function(t,e,n,i){var o=i("log2",{number:function(n){return n>=0||e.predictable?Math.log2?Math.log2(n):Math.log(n)/Math.LN2:s(new t.Complex(n,0))},Complex:s,BigNumber:function(n){return!n.isNegative()||e.predictable?n.log(2):s(new t.Complex(n.toNumber(),0))},"Array | Matrix":function(t){return r(t,o)}});function s(e){var n=Math.sqrt(e.re*e.re+e.im*e.im);return new t.Complex(Math.log2?Math.log2(n):Math.log(n)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}return o.toTex="\\log_{2}\\left(${args[0]}\\right)",o}},function(t,e,n){"use strict";e.name="mod",e.factory=function(t,e,r,i){var o=r(n(3)),s=n(9),a=r(n(76)),u=r(n(54)),c=r(n(250)),h=r(n(56)),l=r(n(55)),f=r(n(19)),d=r(n(18)),p=i("mod",{"number, number":function(t,e){if(e>0)return t-e*Math.floor(t/e);if(0===e)return t;throw new Error("Cannot calculate mod for a negative divisor")},"BigNumber, BigNumber":function(t,e){return e.isZero()?t:t.mod(e)},"Fraction, Fraction":function(t,e){return t.mod(e)},"SparseMatrix, SparseMatrix":function(t,e){return c(t,e,p,!1)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,p)},"Array, Array":function(t,e){return p(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return p(o(t),e)},"Matrix, Array":function(t,e){return p(t,o(e))},"SparseMatrix, any":function(t,e){return h(t,e,p,!1)},"DenseMatrix, any":function(t,e){return d(t,e,p,!1)},"any, SparseMatrix":function(t,e){return l(e,t,p,!0)},"any, DenseMatrix":function(t,e){return d(e,t,p,!0)},"Array, any":function(t,e){return d(o(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(o(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(s.operators.mod,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";e.name="norm",e.factory=function(t,e,r,i){var o=r(n(68)),s=r(n(47)),a=r(n(135)),u=r(n(255)),c=r(n(139)),h=r(n(28)),l=r(n(31)),f=r(n(106)),d=r(n(119)),p=r(n(3)),m=i("norm",{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},boolean:function(t){return Math.abs(t)},Array:function(t){return v(p(t),2)},Matrix:function(t){return v(t,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(t){return m(t)},"Array, number | BigNumber | string":function(t,e){return v(p(t),e)},"Matrix, number | BigNumber | string":function(t,e){return v(t,e)}});function v(t,e){var n=t.size();if(1===n.length){if(e===Number.POSITIVE_INFINITY||"inf"===e){var r=0;return t.forEach(function(t){var e=o(t);f(e,r)&&(r=e)},!0),r}var i;if(e===Number.NEGATIVE_INFINITY||"-inf"===e)return t.forEach(function(t){var e=o(t);i&&!d(e,i)||(i=e)},!0),i||0;if("fro"===e)return v(t,2);if("number"==typeof e&&!isNaN(e)){if(!l(e,0)){var p=0;return t.forEach(function(t){p=s(a(o(t),e),p)},!0),a(p,1/e)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}if(2===n.length){if(1===e){var m=[],g=0;return t.forEach(function(t,e){var n=e[1],r=s(m[n]||0,o(t));f(r,g)&&(g=r),m[n]=r},!0),g}if(e===Number.POSITIVE_INFINITY||"inf"===e){var y=[],b=0;return t.forEach(function(t,e){var n=e[0],r=s(y[n]||0,o(t));f(r,b)&&(b=r),y[n]=r},!0),b}if("fro"===e){var x=0;return t.forEach(function(t,e){x=s(x,h(t,u(t)))}),o(c(x))}if(2===e)throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw new Error("Unsupported parameter value")}}return m.toTex={1:"\\left\\|${args[0]}\\right\\|",2:void 0},m}},function(t,e,n){"use strict";function r(t,e){var n=e<0;if(n&&(e=-e),0===e)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===t)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}e.name="nthRoot",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(118)),u=i(n(76)),c=i(n(258)),h=i(n(56)),l=i(n(19)),f=i(n(18)),d="Complex number not supported in function nthRoot. Use nthRoots instead.",p=o("nthRoot",{number:function(t){return r(t,2)},"number, number":r,BigNumber:function(e){return m(e,new t.BigNumber(2))},Complex:function(t){throw new Error(d)},"Complex, number":function(t,e){throw new Error(d)},"BigNumber, BigNumber":m,"Array | Matrix":function(t){return p(t,2)},"SparseMatrix, SparseMatrix":function(t,e){if(1===e.density())return c(t,e,p);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){if(1===e.density())return a(t,e,p,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,p)},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"SparseMatrix, number | BigNumber":function(t,e){return h(t,e,p,!1)},"DenseMatrix, number | BigNumber":function(t,e){return f(t,e,p,!1)},"number | BigNumber, SparseMatrix":function(t,e){if(1===e.density())return h(e,t,p,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(t,e){return f(e,t,p,!0)},"Array, number | BigNumber":function(t,e){return p(s(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return p(t,s(e)).valueOf()}});return p.toTex={2:"\\sqrt[${args[1]}]{${args[0]}}"},p;function m(e,n){var r=t.BigNumber.precision,i=t.BigNumber.clone({precision:r+2}),o=new t.BigNumber(0),s=new i(1),a=n.isNegative();if(a&&(n=n.neg()),n.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!n.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return a?new i(1/0):0;if(!e.isFinite())return a?o:e;var u=e.abs().pow(s.div(n));return u=e.isNeg()?u.neg():u,new t.BigNumber((a?s.div(u):u).toPrecision(r))}}},function(t,e,n){"use strict";var r=n(365),i=n(681),o=r.factory("Complex",{},"",i,{on:function(t,e){}});var s=[function(t){return o(t)},function(t){return o(0,t)},function(t){return o(-t)},function(t){return o(0,-t)}];function a(t,e){if(e<0)throw new Error("Root must be greater than zero");if(0===e)throw new Error("Root must be non-zero");if(e%1!=0)throw new Error("Root must be an integer");if(0===t||0===t.abs())return[o(0)];var n,r="number"==typeof t;(r||0===t.re||0===t.im)&&(n=r?2*+(t<0):0===t.im?2*+(t.re<0):2*+(t.im<0)+1);for(var i=t.arg(),a=t.abs(),u=[],c=Math.pow(a,1/e),h=0;h<e;h++){var l=(n+4*h)/e;l!==Math.round(l)?u.push(o({r:c,phi:(i+2*Math.PI*h)/e})):u.push(s[l%4](c))}return u}e.name="nthRoots",e.factory=function(t,e,n,r){var i=r("nthRoots",{Complex:function(t){return a(t,2)},"Complex, number":a});return i.toTex={2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},i}},function(t,e,n){"use strict";var r=n(4);e.name="square",e.factory=function(t,e,n,i){var o=i("square",{number:function(t){return t*t},Complex:function(t){return t.mul(t)},BigNumber:function(t){return t.times(t)},Fraction:function(t){return t.mul(t)},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.pow(2)}});return o.toTex={1:"\\left(${args[0]}\\right)^2"},o}},function(t,e,n){"use strict";var r=n(4);e.name="unaryPlus",e.factory=function(t,e,i,o){var s=n(9),a=o("unaryPlus",{number:function(t){return t},Complex:function(t){return t},BigNumber:function(t){return t},Fraction:function(t){return t},Unit:function(t){return t.clone()},"Array | Matrix":function(t){return r(t,a,!0)},"boolean | string":function(n){return"BigNumber"===e.number?new t.BigNumber(+n):+n}});return a.toTex={1:"".concat(s.operators.unaryPlus,"\\left(${args[0]}\\right)")},a}},function(t,e,n){"use strict";var r=n(7).isInteger;e.name="xgcd",e.factory=function(t,e,i,o){var s=i(n(3)),a=o("xgcd",{"number, number":function(t,n){var i,o,a,u,c=0,h=1,l=1,f=0;if(!r(t)||!r(n))throw new Error("Parameters in function xgcd must be integer numbers");for(;n;)o=Math.floor(t/n),a=t-o*n,i=c,c=h-o*c,h=i,i=l,l=f-o*l,f=i,t=n,n=a;return u=t<0?[-t,-h,-f]:[t,t?h:0,f],"Array"===e.matrix?u:s(u)},"BigNumber, BigNumber":function(n,r){var i,o,a,u,c=new t.BigNumber(0),h=new t.BigNumber(1),l=c,f=h,d=h,p=c;if(!n.isInt()||!r.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!r.isZero();)o=n.div(r).floor(),a=n.mod(r),i=l,l=f.minus(o.times(l)),f=i,i=d,d=p.minus(o.times(d)),p=i,n=r,r=a;return u=n.lt(c)?[n.neg(),f.neg(),p.neg()]:[n,n.isZero()?0:f,p],"Array"===e.matrix?u:s(u)}});return a.toTex=void 0,a}},function(t,e,n){"use strict";t.exports=[n(1758),n(1760),n(1761),n(1763),n(1765),n(1767),n(1769)]},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(1759);e.name="bitAnd",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=o(n(76)),h=o(n(258)),l=o(n(56)),f=o(n(19)),d=o(n(18)),p=s("bitAnd",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function bitAnd");return t&e},"BigNumber, BigNumber":i,"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,p,!1)},"SparseMatrix, DenseMatrix":function(t,e){return c(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return c(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,p)},"Array, Array":function(t,e){return p(u(t),u(e)).valueOf()},"Array, Matrix":function(t,e){return p(u(t),e)},"Matrix, Array":function(t,e){return p(t,u(e))},"SparseMatrix, any":function(t,e){return l(t,e,p,!1)},"DenseMatrix, any":function(t,e){return d(t,e,p,!1)},"any, SparseMatrix":function(t,e){return l(e,t,p,!0)},"any, DenseMatrix":function(t,e){return d(e,t,p,!0)},"Array, any":function(t,e){return d(u(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(u(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(a.operators.bitAnd,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(375);t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return r(t,e,function(t,e){return t&e})}},function(t,e,n){"use strict";var r=n(4),i=n(376),o=n(7).isInteger;e.name="bitNot",e.factory=function(t,e,s,a){var u=n(9),c=a("bitNot",{number:function(t){if(!o(t))throw new Error("Integer expected in function bitNot");return~t},BigNumber:i,"Array | Matrix":function(t){return r(t,c)}});return c.toTex={1:u.operators.bitNot+"\\left(${args[0]}\\right)"},c}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(1762);e.name="bitOr",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=o(n(118)),h=o(n(368)),l=o(n(134)),f=o(n(19)),d=o(n(18)),p=s("bitOr",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function bitOr");return t|e},"BigNumber, BigNumber":i,"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return c(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return c(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,p)},"Array, Array":function(t,e){return p(u(t),u(e)).valueOf()},"Array, Matrix":function(t,e){return p(u(t),e)},"Matrix, Array":function(t,e){return p(t,u(e))},"SparseMatrix, any":function(t,e){return l(t,e,p,!1)},"DenseMatrix, any":function(t,e){return d(t,e,p,!1)},"any, SparseMatrix":function(t,e){return l(e,t,p,!0)},"any, DenseMatrix":function(t,e){return d(e,t,p,!0)},"Array, any":function(t,e){return d(u(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(u(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(a.operators.bitOr,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(375);t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var i=new n(-1);return t.isZero()||e.eq(i)||t.eq(e)?e:e.isZero()||t.eq(i)?t:t.isFinite()&&e.isFinite()?r(t,e,function(t,e){return t|e}):!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?i:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(1764);e.name="bitXor",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=o(n(54)),h=o(n(83)),l=o(n(55)),f=o(n(19)),d=o(n(18)),p=s("bitXor",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function bitXor");return t^e},"BigNumber, BigNumber":i,"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return c(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return c(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,p)},"Array, Array":function(t,e){return p(u(t),u(e)).valueOf()},"Array, Matrix":function(t,e){return p(u(t),e)},"Matrix, Array":function(t,e){return p(t,u(e))},"SparseMatrix, any":function(t,e){return l(t,e,p,!1)},"DenseMatrix, any":function(t,e){return d(t,e,p,!1)},"any, SparseMatrix":function(t,e){return l(e,t,p,!0)},"any, DenseMatrix":function(t,e){return d(e,t,p,!0)},"Array, any":function(t,e){return d(u(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(u(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(a.operators.bitXor,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";var r=n(375),i=n(376);t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var o=new n(-1);return t.eq(o)?i(e):e.eq(o)?i(t):t.isFinite()&&e.isFinite()?r(t,e,function(t,e){return t^e}):t.isFinite()||e.isFinite()?new n(t.isNegative()===e.isNegative()?1/0:-1/0):o}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(1766);e.name="leftShift",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=o(n(31)),h=o(n(136)),l=o(n(118)),f=o(n(76)),d=o(n(377)),p=o(n(134)),m=o(n(56)),v=o(n(19)),g=o(n(18)),y=s("leftShift",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function leftShift");return t<<e},"BigNumber, BigNumber":i,"SparseMatrix, SparseMatrix":function(t,e){return d(t,e,y,!1)},"SparseMatrix, DenseMatrix":function(t,e){return f(e,t,y,!0)},"DenseMatrix, SparseMatrix":function(t,e){return l(t,e,y,!1)},"DenseMatrix, DenseMatrix":function(t,e){return v(t,e,y)},"Array, Array":function(t,e){return y(u(t),u(e)).valueOf()},"Array, Matrix":function(t,e){return y(u(t),e)},"Matrix, Array":function(t,e){return y(t,u(e))},"SparseMatrix, number | BigNumber":function(t,e){return c(e,0)?t.clone():m(t,e,y,!1)},"DenseMatrix, number | BigNumber":function(t,e){return c(e,0)?t.clone():g(t,e,y,!1)},"number | BigNumber, SparseMatrix":function(t,e){return c(t,0)?h(e.size(),e.storage()):p(e,t,y,!0)},"number | BigNumber, DenseMatrix":function(t,e){return c(t,0)?h(e.size(),e.storage()):g(e,t,y,!0)},"Array, number | BigNumber":function(t,e){return y(u(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return y(t,u(e)).valueOf()}});return y.toTex={2:"\\left(${args[0]}".concat(a.operators.leftShift,"${args[1]}\\right)")},y}},function(t,e,n){"use strict";t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:t.isFinite()||e.isFinite()?e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e)):new n(NaN)}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(1768);e.name="rightArithShift",e.factory=function(t,e,o,s){var a=n(9),u=o(n(3)),c=o(n(31)),h=o(n(136)),l=o(n(118)),f=o(n(76)),d=o(n(377)),p=o(n(134)),m=o(n(56)),v=o(n(19)),g=o(n(18)),y=s("rightArithShift",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function rightArithShift");return t>>e},"BigNumber, BigNumber":i,"SparseMatrix, SparseMatrix":function(t,e){return d(t,e,y,!1)},"SparseMatrix, DenseMatrix":function(t,e){return f(e,t,y,!0)},"DenseMatrix, SparseMatrix":function(t,e){return l(t,e,y,!1)},"DenseMatrix, DenseMatrix":function(t,e){return v(t,e,y)},"Array, Array":function(t,e){return y(u(t),u(e)).valueOf()},"Array, Matrix":function(t,e){return y(u(t),e)},"Matrix, Array":function(t,e){return y(t,u(e))},"SparseMatrix, number | BigNumber":function(t,e){return c(e,0)?t.clone():m(t,e,y,!1)},"DenseMatrix, number | BigNumber":function(t,e){return c(e,0)?t.clone():g(t,e,y,!1)},"number | BigNumber, SparseMatrix":function(t,e){return c(t,0)?h(e.size(),e.storage()):p(e,t,y,!0)},"number | BigNumber, DenseMatrix":function(t,e){return c(t,0)?h(e.size(),e.storage()):g(e,t,y,!0)},"Array, number | BigNumber":function(t,e){return y(u(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return y(t,u(e)).valueOf()}});return y.toTex={2:"\\left(${args[0]}".concat(a.operators.rightArithShift,"${args[1]}\\right)")},y}},function(t,e,n){"use strict";t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}},function(t,e,n){"use strict";var r=n(7).isInteger;e.name="rightLogShift",e.factory=function(t,e,i,o){var s=n(9),a=i(n(3)),u=i(n(31)),c=i(n(136)),h=i(n(118)),l=i(n(76)),f=i(n(377)),d=i(n(134)),p=i(n(56)),m=i(n(19)),v=i(n(18)),g=o("rightLogShift",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function rightLogShift");return t>>>e},"SparseMatrix, SparseMatrix":function(t,e){return f(t,e,g,!1)},"SparseMatrix, DenseMatrix":function(t,e){return l(e,t,g,!0)},"DenseMatrix, SparseMatrix":function(t,e){return h(t,e,g,!1)},"DenseMatrix, DenseMatrix":function(t,e){return m(t,e,g)},"Array, Array":function(t,e){return g(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return g(a(t),e)},"Matrix, Array":function(t,e){return g(t,a(e))},"SparseMatrix, number | BigNumber":function(t,e){return u(e,0)?t.clone():p(t,e,g,!1)},"DenseMatrix, number | BigNumber":function(t,e){return u(e,0)?t.clone():v(t,e,g,!1)},"number | BigNumber, SparseMatrix":function(t,e){return u(t,0)?c(e.size(),e.storage()):d(e,t,g,!0)},"number | BigNumber, DenseMatrix":function(t,e){return u(t,0)?c(e.size(),e.storage()):v(e,t,g,!0)},"Array, number | BigNumber":function(t,e){return g(a(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return g(t,a(e)).valueOf()}});return g.toTex={2:"\\left(${args[0]}".concat(s.operators.rightLogShift,"${args[1]}\\right)")},g}},function(t,e,n){"use strict";t.exports=[n(1771),n(1772),n(718),n(1773)]},function(t,e,n){"use strict";e.name="bellNumbers",e.factory=function(t,e,r,i){var o=r(n(47)),s=r(n(718)),a=r(n(195)),u=r(n(107)),c=i("bellNumbers",{"number | BigNumber":function(t){if(!u(t)||a(t))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var e=0,n=0;n<=t;n++)e=o(e,s(t,n));return e}});return c.toTex={1:"\\mathrm{B}_{${args[0]}}"},c}},function(t,e,n){"use strict";e.name="composition",e.factory=function(t,e,r,i){var o=r(n(260)),s=r(n(53)),a=r(n(257)),u=r(n(107)),c=r(n(106)),h=i("composition",{"number | BigNumber, number | BigNumber":function(t,e){if(!(u(t)&&a(t)&&u(e)&&a(e)))throw new TypeError("Positive integer value expected in function composition");if(c(e,t))throw new TypeError("k must be less than or equal to n in function composition");return o(s(t,-1),s(e,-1))}});return h.toTex=void 0,h}},function(t,e,n){"use strict";e.name="catalan",e.factory=function(t,e,r,i){var o=r(n(47)),s=r(n(138)),a=r(n(28)),u=r(n(260)),c=r(n(195)),h=r(n(107)),l=i("catalan",{"number | BigNumber":function(t){if(!h(t)||c(t))throw new TypeError("Non-negative integer value expected in function catalan");return s(u(a(t,2),t),o(t,1))}});return l.toTex={1:"\\mathrm{C}_{${args[0]}}"},l}},function(t,e,n){"use strict";t.exports=[n(1775),n(255),n(1776),n(1777)]},function(t,e,n){"use strict";var r=n(4);e.name="arg",e.factory=function(t,e,n,i){var o=i("arg",{number:function(t){return Math.atan2(0,t)},BigNumber:function(e){return t.BigNumber.atan2(0,e)},Complex:function(t){return t.arg()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\arg\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="im",e.factory=function(t,e,n,i){var o=i("im",{number:function(t){return 0},BigNumber:function(e){return new t.BigNumber(0)},Complex:function(t){return t.im},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},o}},function(t,e,n){"use strict";var r=n(4);e.name="re",e.factory=function(t,e,n,i){var o=i("re",{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.re},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},o}},function(t,e,n){"use strict";t.exports=[n(1779),n(1780)]},function(t,e,n){"use strict";e.name="intersect",e.factory=function(t,e,r,i){var o=r(n(68)),s=r(n(47)),a=r(n(53)),u=r(n(3)),c=r(n(28)),h=r(n(62)),l=r(n(44)),f=r(n(48)),d=r(n(119)),p=r(n(31)),m=i("intersect",{"Array, Array, Array":function(t,e,n){if(!y(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!y(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(t){return 4===t.length&&v(t[0])&&v(t[1])&&v(t[2])&&v(t[3])}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(t,e,n,r,i,o,s,u,c,d){var p=h(t,s),m=h(r,s),v=h(e,u),g=h(i,u),y=h(n,c),b=h(o,c),x=l(f(f(f(d,p),v),y),f(f(f(a(a(m,g),b),p),v),y)),w=a(t,h(x,f(r,t))),E=a(e,h(x,f(i,e))),_=a(n,h(x,f(o,n)));return[w,E,_]}(t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2],n[3])},"Array, Array, Array, Array":function(t,n,r,i){if(2===t.length){if(!g(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!g(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!g(r))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!g(i))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(t,n,r,i){var u=t,p=r,m=f(u,n),v=f(p,i),g=f(h(m[0],v[1]),h(v[0],m[1]));if(d(o(g),e.epsilon))return null;var y=h(v[0],u[1]),b=h(v[1],u[0]),x=h(v[0],p[1]),w=h(v[1],p[0]),E=l(a(f(f(y,b),x),w),g);return s(c(m,E),u)}(t,n,r,i)}if(3===t.length){if(!y(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!y(n))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!y(r))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!y(i))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return u=t[0],m=t[1],v=t[2],x=n[0],w=n[1],E=n[2],_=r[0],S=r[1],T=r[2],A=i[0],M=i[1],C=i[2],O=b(u,_,A,_,m,S,M,S,v,T,C,T),N=b(A,_,x,u,M,S,w,m,C,T,E,v),k=b(u,_,x,u,m,S,w,m,v,T,E,v),R=b(A,_,A,_,M,S,M,S,C,T,C,T),P=b(x,u,x,u,w,m,w,m,E,v,E,v),I=l(f(h(O,N),h(k,R)),f(h(P,R),h(N,N))),D=l(a(O,h(I,N)),R),L=a(u,h(I,f(x,u))),B=a(m,h(I,f(w,m))),F=a(v,h(I,f(E,v))),z=a(_,h(D,f(A,_))),j=a(S,h(D,f(M,S))),U=a(T,h(D,f(C,T))),p(L,z)&&p(B,j)&&p(F,U)?[L,B,F]:null}throw new TypeError("Arrays with two or thee dimensional points expected");var u,m,v,x,w,E,_,S,T,A,M,C,O,N,k,R,P,I,D,L,B,F,z,j,U},"Matrix, Matrix, Matrix":function(t,e,n){return u(m(t.valueOf(),e.valueOf(),n.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(t,e,n,r){return u(m(t.valueOf(),e.valueOf(),n.valueOf(),r.valueOf()))}});function v(e){return"number"==typeof e||t.isBigNumber(e)}function g(t){return 2===t.length&&v(t[0])&&v(t[1])}function y(t){return 3===t.length&&v(t[0])&&v(t[1])&&v(t[2])}function b(t,e,n,r,i,o,s,u,c,l,d,p){var m=h(f(t,e),f(n,r)),v=h(f(i,o),f(s,u)),g=h(f(c,l),f(d,p));return a(a(m,v),g)}return m}},function(t,e,n){"use strict";e.name="distance",e.factory=function(t,e,r,i){var o=r(n(53)),s=r(n(48)),a=r(n(62)),u=r(n(44)),c=r(n(120)),h=r(n(139)),l=r(n(68));function f(e){return"number"==typeof e||t.isBigNumber(e)}function d(t){return t.constructor!==Array&&(t=v(t)),f(t[0])&&f(t[1])}function p(t){return t.constructor!==Array&&(t=v(t)),f(t[0])&&f(t[1])&&f(t[2])}function m(t){return t.constructor!==Array&&(t=v(t)),f(t[0])&&f(t[1])&&f(t[2])&&f(t[3])&&f(t[4])&&f(t[5])}function v(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n}function g(t,e,n,r,i){var s=l(o(o(a(n,t),a(r,e)),i)),c=h(o(a(n,n),a(r,r)));return u(s,c)}function y(t,e,n,r,i,c,l,f,d){var p=[s(a(s(i,e),d),a(s(c,n),f)),s(a(s(c,n),l),a(s(r,t),d)),s(a(s(r,t),f),a(s(i,e),l))];p=h(o(o(a(p[0],p[0]),a(p[1],p[1])),a(p[2],p[2])));var m=h(o(o(a(l,l),a(f,f)),a(d,d)));return u(p,m)}function b(t,e,n,r){var i=s(r,e),u=s(n,t),c=o(a(i,i),a(u,u));return h(c)}function x(t,e,n,r,i,u){var c=s(u,n),l=s(i,e),f=s(r,t),d=o(o(a(c,c),a(l,l)),a(f,f));return h(d)}return i("distance",{"Array, Array, Array":function(t,e,n){if(2===t.length&&2===e.length&&2===n.length){if(!d(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!d(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var r=u(s(n[1],n[0]),s(e[1],e[0])),i=a(a(r,r),e[0]),o=c(a(r,e[0])),h=t[1];return g(t[0],t[1],i,o,h)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(t,e,n){if(2===Object.keys(t).length&&2===Object.keys(e).length&&2===Object.keys(n).length){if(!d(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(e))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!d(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(t.hasOwnProperty("pointX")&&t.hasOwnProperty("pointY")&&e.hasOwnProperty("lineOnePtX")&&e.hasOwnProperty("lineOnePtY")&&n.hasOwnProperty("lineTwoPtX")&&n.hasOwnProperty("lineTwoPtY")){var r=u(s(n.lineTwoPtY,n.lineTwoPtX),s(e.lineOnePtY,e.lineOnePtX)),i=a(a(r,r),e.lineOnePtX),o=c(a(r,e.lineOnePtX)),h=t.pointX;return g(t.pointX,t.pointY,i,o,h)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(t,e){if(2===t.length&&3===e.length){if(!d(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return g(t[0],t[1],e[0],e[1],e[2])}if(3===t.length&&6===e.length){if(!p(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(e))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(t[0],t[1],t[2],e[0],e[1],e[2],e[3],e[4],e[5])}if(2===t.length&&2===e.length){if(!d(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");return b(t[0],t[1],e[0],e[1])}if(3===t.length&&3===e.length){if(!p(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!p(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return x(t[0],t[1],t[2],e[0],e[1],e[2])}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(t,e){if(2===Object.keys(t).length&&3===Object.keys(e).length){if(!d(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(e))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if(t.hasOwnProperty("pointX")&&t.hasOwnProperty("pointY")&&e.hasOwnProperty("xCoeffLine")&&e.hasOwnProperty("yCoeffLine")&&e.hasOwnProperty("constant"))return g(t.pointX,t.pointY,e.xCoeffLine,e.yCoeffLine,e.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(t).length&&6===Object.keys(e).length){if(!p(t))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!m(e))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if(t.hasOwnProperty("pointX")&&t.hasOwnProperty("pointY")&&e.hasOwnProperty("x0")&&e.hasOwnProperty("y0")&&e.hasOwnProperty("z0")&&e.hasOwnProperty("a")&&e.hasOwnProperty("b")&&e.hasOwnProperty("c"))return y(t.pointX,t.pointY,t.pointZ,e.x0,e.y0,e.z0,e.a,e.b,e.c);throw new TypeError("Key names do not match")}if(2===Object.keys(t).length&&2===Object.keys(e).length){if(!d(t))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!d(e))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if(t.hasOwnProperty("pointOneX")&&t.hasOwnProperty("pointOneY")&&e.hasOwnProperty("pointTwoX")&&e.hasOwnProperty("pointTwoY"))return b(t.pointOneX,t.pointOneY,e.pointTwoX,e.pointTwoY);throw new TypeError("Key names do not match")}if(3===Object.keys(t).length&&3===Object.keys(e).length){if(!p(t))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!p(e))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if(t.hasOwnProperty("pointOneX")&&t.hasOwnProperty("pointOneY")&&t.hasOwnProperty("pointOneZ")&&e.hasOwnProperty("pointTwoX")&&e.hasOwnProperty("pointTwoY")&&e.hasOwnProperty("pointTwoZ"))return x(t.pointOneX,t.pointOneY,t.pointOneZ,e.pointTwoX,e.pointTwoY,e.pointTwoZ);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(t){if(!function(t){if(2===t[0].length&&f(t[0][0])&&f(t[0][1])){for(var e in t)if(2!==t[e].length||!f(t[e][0])||!f(t[e][1]))return!1}else{if(!(3===t[0].length&&f(t[0][0])&&f(t[0][1])&&f(t[0][2])))return!1;for(var n in t)if(3!==t[n].length||!f(t[n][0])||!f(t[n][1])||!f(t[n][2]))return!1}return!0}(t))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(t){for(var e=[],n=0;n<t.length-1;n++)for(var r=n+1;r<t.length;r++)2===t[0].length?e.push(b(t[n][0],t[n][1],t[r][0],t[r][1])):3===t[0].length&&e.push(x(t[n][0],t[n][1],t[n][2],t[r][0],t[r][1],t[r][2]));return e}(t)}})}},function(t,e,n){"use strict";t.exports=[n(1782),n(720),n(1783),n(1784)]},function(t,e,n){"use strict";e.name="and",e.factory=function(t,e,r,i){var o=n(9),s=r(n(3)),a=r(n(136)),u=r(n(720)),c=r(n(76)),h=r(n(258)),l=r(n(56)),f=r(n(19)),d=r(n(18)),p=i("and",{"number, number":function(t,e){return!(!t||!e)},"Complex, Complex":function(t,e){return!(0===t.re&&0===t.im||0===e.re&&0===e.im)},"BigNumber, BigNumber":function(t,e){return!(t.isZero()||e.isZero()||t.isNaN()||e.isNaN())},"Unit, Unit":function(t,e){return p(t.value||0,e.value||0)},"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,p,!1)},"SparseMatrix, DenseMatrix":function(t,e){return c(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return c(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return f(t,e,p)},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"SparseMatrix, any":function(t,e){return u(e)?a(t.size(),t.storage()):l(t,e,p,!1)},"DenseMatrix, any":function(t,e){return u(e)?a(t.size(),t.storage()):d(t,e,p,!1)},"any, SparseMatrix":function(t,e){return u(t)?a(t.size(),t.storage()):l(e,t,p,!0)},"any, DenseMatrix":function(t,e){return u(t)?a(t.size(),t.storage()):d(e,t,p,!0)},"Array, any":function(t,e){return p(s(t),e).valueOf()},"any, Array":function(t,e){return p(t,s(e)).valueOf()}});return p.toTex={2:"\\left(${args[0]}".concat(o.operators.and,"${args[1]}\\right)")},p}},function(t,e,n){"use strict";e.name="or",e.factory=function(t,e,r,i){var o=n(9),s=r(n(3)),a=r(n(54)),u=r(n(250)),c=r(n(55)),h=r(n(19)),l=r(n(18)),f=i("or",{"number, number":function(t,e){return!(!t&&!e)},"Complex, Complex":function(t,e){return 0!==t.re||0!==t.im||0!==e.re||0!==e.im},"BigNumber, BigNumber":function(t,e){return!t.isZero()&&!t.isNaN()||!e.isZero()&&!e.isNaN()},"Unit, Unit":function(t,e){return f(t.value||0,e.value||0)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,f)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,f,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,f,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,f)},"Array, Array":function(t,e){return f(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return f(s(t),e)},"Matrix, Array":function(t,e){return f(t,s(e))},"SparseMatrix, any":function(t,e){return c(t,e,f,!1)},"DenseMatrix, any":function(t,e){return l(t,e,f,!1)},"any, SparseMatrix":function(t,e){return c(e,t,f,!0)},"any, DenseMatrix":function(t,e){return l(e,t,f,!0)},"Array, any":function(t,e){return l(s(t),e,f,!1).valueOf()},"any, Array":function(t,e){return l(s(e),t,f,!0).valueOf()}});return f.toTex={2:"\\left(${args[0]}".concat(o.operators.or,"${args[1]}\\right)")},f}},function(t,e,n){"use strict";e.name="xor",e.factory=function(t,e,r,i){var o=n(9),s=r(n(3)),a=r(n(54)),u=r(n(83)),c=r(n(55)),h=r(n(19)),l=r(n(18)),f=i("xor",{"number, number":function(t,e){return!!t!=!!e},"Complex, Complex":function(t,e){return(0!==t.re||0!==t.im)!=(0!==e.re||0!==e.im)},"BigNumber, BigNumber":function(t,e){return(!t.isZero()&&!t.isNaN())!=(!e.isZero()&&!e.isNaN())},"Unit, Unit":function(t,e){return f(t.value||0,e.value||0)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,f)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,f,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,f,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,f)},"Array, Array":function(t,e){return f(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return f(s(t),e)},"Matrix, Array":function(t,e){return f(t,s(e))},"SparseMatrix, any":function(t,e){return c(t,e,f,!1)},"DenseMatrix, any":function(t,e){return l(t,e,f,!1)},"any, SparseMatrix":function(t,e){return c(e,t,f,!0)},"any, DenseMatrix":function(t,e){return l(e,t,f,!0)},"Array, any":function(t,e){return l(s(t),e,f,!1).valueOf()},"any, Array":function(t,e){return l(s(e),t,f,!0).valueOf()}});return f.toTex={2:"\\left(${args[0]}".concat(o.operators.xor,"${args[1]}\\right)")},f}},function(t,e,n){"use strict";t.exports=[n(379),n(721),n(262),n(1786),n(1787),n(706),n(1788),n(1789),n(1790),n(1791),n(1792),n(1793),n(1794),n(161),n(254),n(1795),n(723),n(1796),n(380),n(261),n(1797),n(1798),n(724),n(77),n(1799),n(1801),n(1802),n(64),n(1803),n(256),n(136),n(1804)]},function(t,e,n){"use strict";var r=n(5);e.name="cross",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(48)),u=i(n(28)),c=o("cross",{"Matrix, Matrix":function(t,e){return s(h(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return s(h(t.toArray(),e))},"Array, Matrix":function(t,e){return s(h(t,e.toArray()))},"Array, Array":h});return c.toTex={2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},c;function h(t,e){var n=Math.max(r.size(t).length,r.size(e).length);t=r.squeeze(t),e=r.squeeze(e);var i=r.size(t),o=r.size(e);if(1!==i.length||1!==o.length||3!==i[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+i.join(", ")+"], B = ["+o.join(", ")+"])");var s=[a(u(t[1],e[2]),u(t[2],e[1])),a(u(t[2],e[0]),u(t[0],e[2])),a(u(t[0],e[1]),u(t[1],e[0]))];return n>1?[s]:s}}},function(t,e,n){"use strict";e.name="ctranspose",e.factory=function(t,e,r,i){var o=r(n(256)),s=r(n(255)),a=n(9),u=i("ctranspose",{any:function(t){return s(o(t))}});return u.toTex={1:"\\left(${args[0]}\\right)".concat(a.operators.ctranspose)},u}},function(t,e,n){"use strict";var r=n(5),i=n(7).isInteger;e.name="diag",e.factory=function(t,e,o,s){var a=o(n(3)),u=s("diag",{Array:function(t){return c(t,0,r.size(t),null)},"Array, number":function(t,e){return c(t,e,r.size(t),null)},"Array, BigNumber":function(t,e){return c(t,e.toNumber(),r.size(t),null)},"Array, string":function(t,e){return c(t,0,r.size(t),e)},"Array, number, string":function(t,e,n){return c(t,e,r.size(t),n)},"Array, BigNumber, string":function(t,e,n){return c(t,e.toNumber(),r.size(t),n)},Matrix:function(t){return c(t,0,t.size(),t.storage())},"Matrix, number":function(t,e){return c(t,e,t.size(),t.storage())},"Matrix, BigNumber":function(t,e){return c(t,e.toNumber(),t.size(),t.storage())},"Matrix, string":function(t,e){return c(t,0,t.size(),e)},"Matrix, number, string":function(t,e,n){return c(t,e,t.size(),n)},"Matrix, BigNumber, string":function(t,e,n){return c(t,e.toNumber(),t.size(),n)}});return u.toTex=void 0,u;function c(e,n,r,o){if(!i(n))throw new TypeError("Second parameter in function diag must be an integer");var s=n>0?n:0,u=n<0?-n:0;switch(r.length){case 1:return function(e,n,r,i,o,s){var a=[i+o,i+s],u=t.Matrix.storage(r||"dense").diagonal(a,e,n);return null!==r?u:u.valueOf()}(e,n,o,r[0],u,s);case 2:return function(e,n,r,i,o,s){if(t.isMatrix(e)){var u=e.diagonal(n);return null!==r?r!==u.storage()?a(u,r):u:u.valueOf()}for(var c=Math.min(i[0]-o,i[1]-s),h=[],l=0;l<c;l++)h[l]=e[l+o][l+s];return null!==r?a(h):h}(e,n,o,r,u,s)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}},function(t,e,n){"use strict";var r=n(5).size;e.name="dot",e.factory=function(t,e,i,o){var s=i(n(47)),a=i(n(28)),u=o("dot",{"Matrix, Matrix":function(t,e){return c(t.toArray(),e.toArray())},"Matrix, Array":function(t,e){return c(t.toArray(),e)},"Array, Matrix":function(t,e){return c(t,e.toArray())},"Array, Array":c});return u.toTex={2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},u;function c(t,e){var n=r(t),i=r(e),o=n[0];if(1!==n.length||1!==i.length)throw new RangeError("Vector expected");if(n[0]!==i[0])throw new RangeError("Vectors must have equal length ("+n[0]+" != "+i[0]+")");if(0===o)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var u=0,c=0;c<o;c++)u=s(u,a(t[c],e[c]));return u}}},function(t,e,n){"use strict";e.name="eye",e.factory=function(t,e,n,r){return function(){throw new Error('Function "eye" is renamed to "identity" since mathjs version 5.0.0. To keep eye working, create an alias for it using "math.import({eye: math.identity}, {override: true})"')}}},function(t,e,n){"use strict";var r=n(26).format;e.name="expm",e.factory=function(t,e,i,o){var s=i(n(68)),a=i(n(47)),u=i(n(161)),c=i(n(254)),h=i(n(28)),l=t.SparseMatrix,f=o("expm",{Matrix:function(e){var n=e.size();if(2!==n.length||n[0]!==n[1])throw new RangeError("Matrix must be square (size: "+r(n)+")");for(var i=n[0],o=function(t,e){for(var n=0;n<30;n++)for(var r=0;r<=n;r++){var i=n-r;if(d(t,r,i)<e)return{q:r,j:i}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(t){for(var e=t.size()[0],n=0,r=0;r<e;r++){for(var i=0,o=0;o<e;o++)i+=s(t.get([r,o]));n=Math.max(i,n)}return n}(e),1e-15),f=o.q,p=o.j,m=h(e,Math.pow(2,-p)),v=u(i),g=u(i),y=1,b=m,x=-1,w=1;w<=f;w++)w>1&&(b=h(b,m),x=-x),v=a(v,h(y=y*(f-w+1)/((2*f-w+1)*w),b)),g=a(g,h(y*x,b));for(var E=h(c(g),v),_=0;_<p;_++)E=h(E,E);return t.isSparseMatrix(e)?new l(E):E}});function d(t,e,n){for(var r=1,i=2;i<=e;i++)r*=i;for(var o=r,s=e+1;s<=2*e;s++)o*=s;var a=o*(2*e+1);return 8*Math.pow(t/Math.pow(2,n),2*e)*r*r/(o*a)}return f.toTex={1:"\\exp\\left(${args[0]}\\right)"},f}},function(t,e,n){"use strict";var r=n(5).filter,i=n(5).filterRegExp,o=n(117).maxArgumentCount;function s(t,e){var n=o(e);return r(t,function(t,r,i){return 1===n?e(t):2===n?e(t,[r]):e(t,[r],i)})}e.name="filter",e.factory=function(t,e,r,o){var a=r(n(3)),u=o("filter",{"Array, function":s,"Matrix, function":function(t,e){return a(s(t.toArray(),e))},"Array, RegExp":i,"Matrix, RegExp":function(t,e){return a(i(t.toArray(),e))}});return u.toTex=void 0,u}},function(t,e,n){"use strict";var r=n(15).clone,i=n(5).flatten;e.name="flatten",e.factory=function(t,e,o,s){var a=o(n(3)),u=s("flatten",{Array:function(t){return i(r(t))},Matrix:function(t){var e=i(r(t.toArray()));return a(e)}});return u.toTex=void 0,u}},function(t,e,n){"use strict";var r=n(117).maxArgumentCount,i=n(5).forEach;function o(t,e){var n=r(e);!function r(o,s){Array.isArray(o)?i(o,function(t,e){r(t,s.concat(e))}):1===n?e(o):2===n?e(o,s):e(o,s,t)}(t,[])}e.name="forEach",e.factory=function(t,e,n,r){var i=r("forEach",{"Array, function":o,"Matrix, function":function(t,e){return t.forEach(e)}});return i.toTex=void 0,i}},function(t,e,n){"use strict";var r=n(5).size;e.name="kron",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(62));return o("kron",{"Matrix, Matrix":function(t,e){return s(u(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return s(u(t.toArray(),e))},"Array, Matrix":function(t,e){return s(u(t,e.toArray()))},"Array, Array":u});function u(t,e){if(1===r(t).length&&(t=[t]),1===r(e).length&&(e=[e]),r(t).length>2||r(e).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(t.length)+", y = "+JSON.stringify(e.length)+")");var n=[],i=[];return t.map(function(t){return e.map(function(e){return i=[],n.push(i),t.map(function(t){return e.map(function(e){return i.push(a(t,e))})})})})&&n}}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(5).resize;e.name="ones",e.factory=function(t,e,o,s){var a=o(n(3)),u=s("ones",{"":function(){return"Array"===e.matrix?c([]):c([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var n=t.pop();return c(t,n)}return"Array"===e.matrix?c(t):c(t,"default")},Array:c,Matrix:function(t){var e=t.storage();return c(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return c(t.valueOf(),e)}});return u.toTex=void 0,u;function c(e,n){var o=function(e){var n=!1;return e.forEach(function(e,r,i){t.isBigNumber(e)&&(n=!0,i[r]=e.toNumber())}),n}(e)?new t.BigNumber(1):1;if(function(t){t.forEach(function(t){if("number"!=typeof t||!r(t)||t<0)throw new Error("Parameters in function ones must be positive integers")})}(e),n){var s=a(n);return e.length>0?s.resize(e,o):s}var u=[];return e.length>0?i(u,e,o):u}}},function(t,e,n){"use strict";var r=n(5);e.name="reshape",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(107)),u=o("reshape",{"Matrix, Array":function(t,e){return t.reshape?t.reshape(e):s(r.reshape(t.valueOf(),e))},"Array, Array":function(t,e){return e.forEach(function(t){if(!a(t))throw new TypeError("Invalid size for dimension: "+t)}),r.reshape(t,e)}});return u.toTex=void 0,u}},function(t,e,n){"use strict";var r=n(39),i=n(191),o=n(7).isInteger,s=n(26).format,a=n(15).clone,u=n(5);e.name="resize",e.factory=function(t,e,c,h){var l=c(n(3)),f=function(n,c,h){if(2!==arguments.length&&3!==arguments.length)throw new i("resize",arguments.length,2,3);if(t.isMatrix(c)&&(c=c.valueOf()),t.isBigNumber(c[0])&&(c=c.map(function(e){return t.isBigNumber(e)?e.toNumber():e})),t.isMatrix(n))return n.resize(c,h,!0);if("string"==typeof n)return function(t,e,n){if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==e.length)throw new r(e.length,1);var i=e[0];if("number"!=typeof i||!o(i))throw new TypeError("Invalid size, must contain positive integers (size: "+s(e)+")");if(t.length>i)return t.substring(0,i);if(t.length<i){for(var a=t,u=0,c=i-t.length;u<c;u++)a+=n;return a}return t}(n,c,h);var f=!Array.isArray(n)&&"Array"!==e.matrix;if(0===c.length){for(;Array.isArray(n);)n=n[0];return a(n)}Array.isArray(n)||(n=[n]),n=a(n);var d=u.resize(n,c,h);return f?l(d):d};return f.toTex=void 0,f}},function(t,e,n){"use strict";var r=n(5).size;e.name="sort",e.factory=function(t,e,i,o){var s=i(n(3)),a=i(n(166)),u=function(t,e){return-a(t,e)},c=i(n(84)),h=o("sort",{Array:function(t){return f(t),t.sort(a)},Matrix:function(t){return d(t),s(t.toArray().sort(a),t.storage())},"Array, function":function(t,e){return f(t),t.sort(e)},"Matrix, function":function(t,e){return d(t),s(t.toArray().sort(e),t.storage())},"Array, string":function(t,e){return f(t),t.sort(l(e))},"Matrix, string":function(t,e){return d(t),s(t.toArray().sort(l(e)),t.storage())}});function l(t){if("asc"===t)return a;if("desc"===t)return u;if("natural"===t)return c;throw new Error('String "asc", "desc", or "natural" expected')}function f(t){if(1!==r(t).length)throw new Error("One dimensional array expected")}function d(t){if(1!==t.size().length)throw new Error("One dimensional matrix expected")}return h.toTex=void 0,h}},function(t,e){t.exports=function t(e,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,h=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},l=h(e).replace(s,"")||"",f=h(n).replace(s,"")||"",d=l.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(l.match(u),16)||1!==d.length&&l.match(a)&&Date.parse(l),v=parseInt(f.match(u),16)||m&&f.match(a)&&Date.parse(f)||null;if(v){if(m<v)return-1;if(m>v)return 1}for(var g=0,y=Math.max(d.length,p.length);g<y;g++){if(r=!(d[g]||"").match(c)&&parseFloat(d[g])||d[g]||0,i=!(p[g]||"").match(c)&&parseFloat(p[g])||p[g]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},function(t,e,n){"use strict";var r=n(5),i=n(9),o=n(26);e.name="sqrtm",e.factory=function(t,e,s,a){var u=s(n(68)),c=s(n(47)),h=s(n(28)),l=s(n(139)),f=s(n(48)),d=s(n(254)),p=s(n(77)),m=s(n(381)),v=s(n(161)),g=a("sqrtm",{"Array | Matrix":function(e){var n=t.isMatrix(e)?e.size():r.size(e);switch(n.length){case 1:if(1===n[0])return l(e);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");case 2:if(n[0]===n[1])return x(e);throw new RangeError("Matrix must be square (size: "+o.format(n)+")")}}}),y=1e3,b=1e-6;function x(t){var e,n=0,r=t,i=v(p(t));do{var o=r;if(r=h(.5,c(o,d(i))),i=h(.5,c(i,d(o))),(e=m(u(f(r,o))))>b&&++n>y)throw new Error("computing square root of matrix: iterative method could not converge")}while(e>b);return r}return g.toTex={1:"{${args[0]}}".concat(i.operators.pow,"{\\frac{1}{2}}")},g}},function(t,e,n){"use strict";var r=n(15),i=n(5);e.name="squeeze",e.factory=function(t,e,o,s){var a=o(n(3)),u=s("squeeze",{Array:function(t){return i.squeeze(r.clone(t))},Matrix:function(t){var e=i.squeeze(t.toArray());return Array.isArray(e)?a(e):e},any:function(t){return r.clone(t)}});return u.toTex=void 0,u}},function(t,e,n){"use strict";var r=n(15).clone,i=n(26).format;e.name="trace",e.factory=function(t,e,o,s){var a=o(n(3)),u=o(n(47)),c=s("trace",{Array:function(t){return h(a(t))},SparseMatrix:function(t){var e=t._values,n=t._index,r=t._ptr,o=t._size,s=o[0],a=o[1];if(s===a){var c=0;if(e.length>0)for(var h=0;h<a;h++)for(var l=r[h],f=r[h+1],d=l;d<f;d++){var p=n[d];if(p===h){c=u(c,e[d]);break}if(p>h)break}return c}throw new RangeError("Matrix must be square (size: "+i(o)+")")},DenseMatrix:h,any:r});function h(t){var e=t._size,n=t._data;switch(e.length){case 1:if(1===e[0])return r(n[0]);throw new RangeError("Matrix must be square (size: "+i(e)+")");case 2:var o=e[0];if(o===e[1]){for(var s=0,a=0;a<o;a++)s=u(s,n[a][a]);return s}throw new RangeError("Matrix must be square (size: "+i(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+i(e)+")")}}return c.toTex={1:"\\mathrm{tr}\\left(${args[0]}\\right)"},c}},function(t,e,n){"use strict";e.name="getMatrixDataType",e.factory=function(t,e,r,i){var o=r(n(247));return i("getMatrixDataType",{Array:function(t){return o(t)},Matrix:function(t){return t.getDataType()}})}},function(t,e,n){"use strict";t.exports=[n(260),n(259),n(719),n(1806),n(1807),n(1808),n(1809),n(1812),n(1813)]},function(t,e,n){"use strict";e.name="kldivergence",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(138)),a=r(n(382)),u=r(n(28)),c=r(n(716)),h=r(n(374)),l=r(n(163));function f(t,e){var n=e.size().length,r=t.size().length;if(n>1)throw new Error("first object must be one dimensional");if(r>1)throw new Error("second object must be one dimensional");if(n!==r)throw new Error("Length of two vectors must be equal");if(0===a(t))throw new Error("Sum of elements in first object must be non zero");if(0===a(e))throw new Error("Sum of elements in second object must be non zero");var i=s(t,a(t)),o=s(e,a(e)),f=a(u(i,h(c(i,o))));return l(f)?f:Number.NaN}return i("kldivergence",{"Array, Array":function(t,e){return f(o(t),o(e))},"Matrix, Array":function(t,e){return f(t,o(e))},"Array, Matrix":function(t,e){return f(o(t),e)},"Matrix, Matrix":function(t,e){return f(t,e)}})}},function(t,e,n){"use strict";var r=n(140);e.name="multinomial",e.factory=function(t,e,i,o){var s=i(n(47)),a=i(n(28)),u=i(n(138)),c=i(n(259)),h=i(n(107)),l=i(n(257));return o("multinomial",{"Array | Matrix":function(t){var e=0,n=1;return r(t,function(t){if(!h(t)||!l(t))throw new TypeError("Positive integer value expected in function multinomial");e=s(e,t),n=a(n,c(t))}),u(c(e),n)}})}},function(t,e,n){"use strict";var r=n(7).isInteger;function i(t){return t.isInteger()&&t.gte(0)}e.name="permutations",e.factory=function(t,e,o,s){var a=o(n(259)),u=n(378),c=s("permutations",{"number | BigNumber":a,"number, number":function(t,e){if(!r(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(!r(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(e>t)throw new TypeError("second argument k must be less than or equal to first argument n");return u(t-e+1,t)},"BigNumber, BigNumber":function(e,n){var r,o;if(!i(e)||!i(n))throw new TypeError("Positive integer value expected in function permutations");if(n.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(r=new t.BigNumber(1),o=e.minus(n).plus(1);o.lte(e);o=o.plus(1))r=r.times(o);return r}});return c.toTex=void 0,c}},function(t,e,n){"use strict";e.name="pickRandom",e.factory=function(t,e,r,i){var o=r(n(383))("uniform").pickRandom;return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(1811),i=r();e.factory=function(t,e,n,o,s){var a;function u(t){a=null===t?i:r(String(t))}return u(e.randomSeed),s.on("config",function(t,e,n){void 0!==n.randomSeed&&u(t.randomSeed)}),function(){return a()}},e.math=!0},function(t,e,n){"use strict";(function(e){var n=256,r=[],i=void 0===e?window:e,o=Math.pow(n,6),s=Math.pow(2,52),a=2*s,u=n-1,c=Math.random;function h(t){var e,r=t.length,i=this,o=0,s=i.i=i.j=0,a=i.S=[];for(r||(t=[r++]);o<n;)a[o]=o++;for(o=0;o<n;o++)a[o]=a[s=u&s+t[o%r]+(e=a[o])],a[s]=e;(i.g=function(t){for(var e,r=0,o=i.i,s=i.j,a=i.S;t--;)e=a[o=u&o+1],r=r*n+a[u&(a[o]=a[s=u&s+e])+(a[s]=e)];return i.i=o,i.j=s,r})(n)}function l(t,e){for(var n,r=t+"",i=0;i<r.length;)e[u&i]=u&(n^=19*e[u&i])+r.charCodeAt(i++);return f(e)}function f(t){return String.fromCharCode.apply(0,t)}t.exports=function(e,u){if(u&&!0===u.global)return u.global=!1,Math.random=t.exports(e,u),u.global=!0,Math.random;var c=[],d=(l(function t(e,n){var r,i=[],o=(typeof e)[0];if(n&&"o"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"s"==o?e:e+"\0"}(u&&u.entropy||!1?[e,f(r)]:0 in arguments?e:function(t){try{return i.crypto.getRandomValues(t=new Uint8Array(n)),f(t)}catch(t){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,f(r)]}}(),3),c),new h(c));return l(f(d.S),r),function(){for(var t=d.g(6),e=o,r=0;t<s;)t=(t+r)*n,e*=n,r=d.g(1);for(;t>=a;)t/=2,e/=2,r>>>=1;return(t+r)/e}},t.exports.resetGlobal=function(){Math.random=c},l(Math.random(),r)}).call(this,n(50))},function(t,e,n){"use strict";e.name="random",e.factory=function(t,e,r,i){var o=r(n(383))("uniform").random;return o.toTex=void 0,o}},function(t,e,n){"use strict";e.name="randomInt",e.factory=function(t,e,r,i){var o=r(n(383))("uniform").randomInt;return o.toTex=void 0,o}},function(t,e,n){"use strict";t.exports=[n(166),n(84),n(725),n(1815),n(162),n(1816),n(106),n(372),n(119),n(722),n(708)]},function(t,e,n){"use strict";e.name="deepEqual",e.factory=function(t,e,r,i){var o=r(n(162)),s=i("deepEqual",{"any, any":function(t,e){return function t(e,n){if(Array.isArray(e)){if(Array.isArray(n)){var r=e.length;if(r!==n.length)return!1;for(var i=0;i<r;i++)if(!t(e[i],n[i]))return!1;return!0}return!1}return!Array.isArray(n)&&o(e,n)}(t.valueOf(),e.valueOf())}});return s.toTex=void 0,s}},function(t,e,n){"use strict";e.name="equalText",e.factory=function(t,e,r,i){var o=r(n(725)),s=r(n(194)),a=i("equalText",{"any, any":function(t,e){return s(o(t,e))}});return a.toTex=void 0,a}},function(t,e,n){"use strict";t.exports=[n(1818),n(726),n(1819),n(727),n(1820),n(1821),n(1822),n(1823),n(728),n(1824)]},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setCartesian",e.factory=function(t,e,i,o){var s=i(n(67)),a=i(n(160)),u=i(n(77)),c=i(n(64)),h=i(n(84));return o("setCartesian",{"Array | Matrix, Array | Matrix":function(t,e){var n=[];if(0!==c(u(t),new s(0))&&0!==c(u(e),new s(0))){var i=r(Array.isArray(t)?t:t.toArray()).sort(h),o=r(Array.isArray(e)?e:e.toArray()).sort(h);n=[];for(var l=0;l<i.length;l++)for(var f=0;f<o.length;f++)n.push([i[l],o[f]])}return Array.isArray(t)&&Array.isArray(e)?n:new a(n)}})}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setDistinct",e.factory=function(t,e,i,o){var s=i(n(67)),a=i(n(160)),u=i(n(77)),c=i(n(64)),h=i(n(84));return o("setDistinct",{"Array | Matrix":function(t){var e;if(0===c(u(t),new s(0)))e=[];else{var n=r(Array.isArray(t)?t:t.toArray()).sort(h);(e=[]).push(n[0]);for(var i=1;i<n.length;i++)0!==h(n[i],n[i-1])&&e.push(n[i])}return Array.isArray(t)?e:new a(e)}})}},function(t,e,n){"use strict";var r=n(5).flatten,i=n(5).identify;e.name="setIsSubset",e.factory=function(t,e,o,s){var a=o(n(67)),u=o(n(77)),c=o(n(64)),h=o(n(84));return s("setIsSubset",{"Array | Matrix, Array | Matrix":function(t,e){if(0===c(u(t),new a(0)))return!0;if(0===c(u(e),new a(0)))return!1;for(var n,o=i(r(Array.isArray(t)?t:t.toArray()).sort(h)),s=i(r(Array.isArray(e)?e:e.toArray()).sort(h)),l=0;l<o.length;l++){n=!1;for(var f=0;f<s.length;f++)if(0===h(o[l].value,s[f].value)&&o[l].identifier===s[f].identifier){n=!0;break}if(!1===n)return!1}return!0}})}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setMultiplicity",e.factory=function(t,e,i,o){var s=i(n(84)),a=i(n(67)),u=i(n(77)),c=i(n(64));return o("setMultiplicity",{"number | BigNumber | Fraction | Complex, Array | Matrix":function(t,e){if(0===c(u(e),new a(0)))return 0;for(var n=r(Array.isArray(e)?e:e.toArray()),i=0,o=0;o<n.length;o++)0===s(n[o],t)&&i++;return i}})}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setPowerset",e.factory=function(t,e,i,o){var s=i(n(67)),a=i(n(77)),u=i(n(64)),c=i(n(84));return o("setPowerset",{"Array | Matrix":function(t){if(0===u(a(t),new s(0)))return[];for(var e=r(Array.isArray(t)?t:t.toArray()).sort(c),n=[],i=0;i.toString(2).length<=e.length;)n.push(h(e,i.toString(2).split("").reverse())),i++;return function(t){for(var e=[],n=t.length-1;n>0;n--)for(var r=0;r<n;r++)t[r].length>t[r+1].length&&(e=t[r],t[r]=t[r+1],t[r+1]=e);return t}(n)}});function h(t,e){for(var n=[],r=0;r<e.length;r++)"1"===e[r]&&n.push(t[r]);return n}}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setSize",e.factory=function(t,e,i,o){var s=i(n(84));return o("setSize",{"Array | Matrix":function(t){return Array.isArray(t)?r(t).length:r(t.toArray()).length},"Array | Matrix, boolean":function(t,e){if(!1===e||0===t.length)return Array.isArray(t)?r(t).length:r(t.toArray()).length;for(var n=r(Array.isArray(t)?t:t.toArray()).sort(s),i=1,o=1;o<n.length;o++)0!==s(n[o],n[o-1])&&i++;return i}})}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="setUnion",e.factory=function(t,e,i,o){var s=i(n(67)),a=i(n(262)),u=i(n(77)),c=i(n(64)),h=i(n(727)),l=i(n(728));return o("setUnion",{"Array | Matrix, Array | Matrix":function(t,e){if(0===c(u(t),new s(0)))return r(e);if(0===c(u(e),new s(0)))return r(t);var n=r(t),i=r(e);return a(l(n,i),h(n,i))}})}},function(t,e,n){"use strict";t.exports=[n(1826)]},function(t,e,n){"use strict";var r=n(4),i=n(7).sign;var o=.46875,s=.5641895835477563,a=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],u=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],c=Math.pow(2,53);e.name="erf",e.factory=function(t,e,n,h){var l=h("erf",{number:function(t){var e=Math.abs(t);return e>=c?i(t):e<=o?i(t)*function(t){var e,n=t*t,r=a[0][4]*n,i=n;for(e=0;e<3;e+=1)r=(r+a[0][e])*n,i=(i+u[0][e])*n;return t*(r+a[0][3])/(i+u[0][3])}(e):e<=4?i(t)*(1-function(t){var e,n=a[1][8]*t,r=t;for(e=0;e<7;e+=1)n=(n+a[1][e])*t,r=(r+u[1][e])*t;var i=(n+a[1][7])/(r+u[1][7]),o=parseInt(16*t)/16,s=(t-o)*(t+o);return Math.exp(-o*o)*Math.exp(-s)*i}(e)):i(t)*(1-function(t){var e,n=1/(t*t),r=a[2][5]*n,i=n;for(e=0;e<4;e+=1)r=(r+a[2][e])*n,i=(i+u[2][e])*n;var o=n*(r+a[2][4])/(i+u[2][4]);o=(s-o)/t,n=parseInt(16*t)/16;var c=(t-n)*(t+n);return Math.exp(-n*n)*Math.exp(-c)*o}(e))},BigNumber:function(e){return new t.BigNumber(l(e.toNumber()))},"Array | Matrix":function(t){return r(t,l)}});return l.toTex={1:"erf\\left(${args[0]}\\right)"},l}},function(t,e,n){"use strict";t.exports=[n(1828),n(381),n(730),n(729),n(731),n(1829),n(1830),n(1831),n(732),n(382),n(384)]},function(t,e,n){"use strict";var r=n(5).flatten;e.name="mad",e.factory=function(t,e,i,o){var s=i(n(68)),a=i(n(723)),u=i(n(729)),c=i(n(48)),h=i(n(121)),l=o("mad",{"Array | Matrix":f,"...":function(t){return f(t)}});return l.toTex=void 0,l;function f(t){if(0===(t=r(t.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var e=u(t);return u(a(t,function(t){return s(c(t,e))}))}catch(t){throw t instanceof TypeError&&-1!==t.message.indexOf("median")?new TypeError(t.message.replace("median","mad")):h(t,"mad")}}}},function(t,e,n){"use strict";var r=n(5).flatten;e.name="mode",e.factory=function(t,e,i,o){var s=i(n(263)),a=i(n(163));return o("mode",{"Array | Matrix":u,"...":function(t){return u(t)}});function u(t){if(0===(t=r(t.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var e={},n=[],i=0,o=0;o<t.length;o++){var u=t[o];if(a(u)&&s(u))throw new Error("Cannot calculate mode of an array containing NaN values");u in e||(e[u]=0),e[u]++,e[u]===i?n.push(u):e[u]>i&&(i=e[u],n=[u])}return n}}},function(t,e,n){"use strict";var r=n(140);e.name="prod",e.factory=function(t,e,i,o){var s=i(n(62)),a=i(n(121)),u=o("prod",{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("prod(A, dim) is not yet supported")},"...":function(t){return c(t)}});return u.toTex=void 0,u;function c(t){var e;if(r(t,function(t){try{e=void 0===e?t:s(e,t)}catch(e){throw a(e,"prod",t)}}),void 0===e)throw new Error("Cannot calculate prod of an empty array");return e}}},function(t,e,n){"use strict";var r=n(7).isInteger,i=n(7).isNumber,o=n(5).flatten,s=n(108);e.name="quantileSeq",e.factory=function(t,e,a,u){var c=a(n(47)),h=a(n(28)),l=a(n(380)),f=a(n(166));function d(t,e,n){var r=o(t),s=r.length;if(0===s)throw new Error("Cannot calculate quantile of an empty sequence");if(i(e)){var a=e*(s-1),u=a%1;if(0===u){var d=n?r[a]:l(r,a);return p(d),d}var m,v,g=Math.floor(a);if(n)m=r[g],v=r[g+1];else{v=l(r,g+1),m=r[g];for(var y=0;y<g;++y)f(r[y],m)>0&&(m=r[y])}return p(m),p(v),c(h(m,1-u),h(v,u))}var b=e.times(s-1);if(b.isInteger()){b=b.toNumber();var x=n?r[b]:l(r,b);return p(x),x}var w,E,_=b.floor(),S=b.minus(_),T=_.toNumber();if(n)w=r[T],E=r[T+1];else{E=l(r,T+1),w=r[T];for(var A=0;A<T;++A)f(r[A],w)>0&&(w=r[A])}p(w),p(E);var M=new S.constructor(1);return c(h(w,M.minus(S)),h(E,S))}var p=u({"number | BigNumber | Unit":function(t){return t}});return function(e,n,o){var a,u,c;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(s(e)){if("boolean"==typeof(o=o||!1)){if(u=e.valueOf(),i(n)){if(n<0)throw new Error("N/prob must be non-negative");if(n<=1)return d(u,n,o);if(n>1){if(!r(n))throw new Error("N must be a positive integer");var h=n+1;a=new Array(n);for(var l=0;l<n;)a[l]=d(u,++l/h,o);return a}}if(t.isBigNumber(n)){if(n.isNegative())throw new Error("N/prob must be non-negative");if(c=new n.constructor(1),n.lte(c))return new t.BigNumber(d(u,n,o));if(n.gt(c)){if(!n.isInteger())throw new Error("N must be a positive integer");var f=n.toNumber();if(f>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var p=new t.BigNumber(f+1);a=new Array(f);for(var m=0;m<f;)a[m]=new t.BigNumber(d(u,new t.BigNumber(++m).div(p),o));return a}}if(Array.isArray(n)){a=new Array(n.length);for(var v=0;v<a.length;++v){var g=n[v];if(i(g)){if(g<0||g>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!t.isBigNumber(g))throw new TypeError("Unexpected type of argument in function quantileSeq");if(c=new g.constructor(1),g.isNegative()||g.gt(c))throw new Error("Probability must be between 0 and 1, inclusive")}a[v]=d(u,g,o)}return a}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}}},function(t,e,n){"use strict";t.exports=[n(690),n(1833)]},function(t,e,n){"use strict";var r=n(26).isString,i=n(26).format;function o(t,e,n){return t.replace(/\$([\w.]+)/g,function(t,o){for(var s=o.split("."),a=e[s.shift()];s.length&&void 0!==a;){var u=s.shift();a=u?a[u]:a+"."}return void 0!==a?r(a)?a:i(a,n):t})}e.name="print",e.factory=function(t,e,n,r){var i=r("print",{"string, Object | Array":o,"string, Object | Array, number | Object":o});return i.toTex=void 0,i}},function(t,e,n){"use strict";t.exports=[n(1835),n(1836),n(1837),n(1838),n(1839),n(1840),n(1841),n(1842),n(1843),n(1844),n(1845),n(1846),n(1847),n(1848),n(1849),n(1850),n(1851),n(1852),n(1853),n(1854),n(1855),n(1856),n(1857),n(1858),n(1859)]},function(t,e,n){"use strict";var r=n(4);e.name="acos",e.factory=function(t,e,n,i){var o=i("acos",{number:function(n){return n>=-1&&n<=1||e.predictable?Math.acos(n):new t.Complex(n,0).acos()},Complex:function(t){return t.acos()},BigNumber:function(t){return t.acos()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cos^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);var i=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)};e.name="acosh",e.factory=function(t,e,n,o){var s=o("acosh",{number:function(n){return n>=1||e.predictable?i(n):n<=-1?new t.Complex(Math.log(Math.sqrt(n*n-1)-n),Math.PI):new t.Complex(n,0).acosh()},Complex:function(t){return t.acosh()},BigNumber:function(t){return t.acosh()},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:"\\cosh^{-1}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="acot",e.factory=function(t,e,n,i){var o=i("acot",{number:function(t){return Math.atan(1/t)},Complex:function(t){return t.acot()},BigNumber:function(e){return new t.BigNumber(1).div(e).atan()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cot^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="acoth",e.factory=function(t,e,n,i){var o=i("acoth",{number:function(n){return n>=1||n<=-1||e.predictable?isFinite(n)?(Math.log((n+1)/n)+Math.log(n/(n-1)))/2:0:new t.Complex(n,0).acoth()},Complex:function(t){return t.acoth()},BigNumber:function(e){return new t.BigNumber(1).div(e).atanh()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\coth^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="acsc",e.factory=function(t,e,n,i){var o=i("acsc",{number:function(n){return n<=-1||n>=1||e.predictable?Math.asin(1/n):new t.Complex(n,0).acsc()},Complex:function(t){return t.acsc()},BigNumber:function(e){return new t.BigNumber(1).div(e).asin()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\csc^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="acsch",e.factory=function(t,e,n,i){var o=i("acsch",{number:function(t){return t=1/t,Math.log(t+Math.sqrt(t*t+1))},Complex:function(t){return t.acsch()},BigNumber:function(e){return new t.BigNumber(1).div(e).asinh()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="asec",e.factory=function(t,e,n,i){var o=i("asec",{number:function(n){return n<=-1||n>=1||e.predictable?Math.acos(1/n):new t.Complex(n,0).asec()},Complex:function(t){return t.asec()},BigNumber:function(e){return new t.BigNumber(1).div(e).acos()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\sec^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="asech",e.factory=function(t,e,n,i){var o=i("asech",{number:function(n){if(n<=1&&n>=-1||e.predictable){n=1/n;var r=Math.sqrt(n*n-1);return n>0||e.predictable?Math.log(r+n):new t.Complex(Math.log(r-n),Math.PI)}return new t.Complex(n,0).asech()},Complex:function(t){return t.asech()},BigNumber:function(e){return new t.BigNumber(1).div(e).acosh()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="asin",e.factory=function(t,e,n,i){var o=i("asin",{number:function(n){return n>=-1&&n<=1||e.predictable?Math.asin(n):new t.Complex(n,0).asin()},Complex:function(t){return t.asin()},BigNumber:function(t){return t.asin()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\sin^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="asinh",e.factory=function(t,e,n,i){var o=i("asinh",{number:Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},Complex:function(t){return t.asinh()},BigNumber:function(t){return t.asinh()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\sinh^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);e.name="atan",e.factory=function(t,e,n,i){var o=i("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\tan^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";e.name="atan2",e.factory=function(t,e,r,i){var o=r(n(3)),s=r(n(76)),a=r(n(54)),u=r(n(717)),c=r(n(56)),h=r(n(55)),l=r(n(19)),f=r(n(18)),d=i("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function(e,n){return t.BigNumber.atan2(e,n)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,d,!1)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,d,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,d,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,d)},"Array, Array":function(t,e){return d(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return d(o(t),e)},"Matrix, Array":function(t,e){return d(t,o(e))},"SparseMatrix, number | BigNumber":function(t,e){return c(t,e,d,!1)},"DenseMatrix, number | BigNumber":function(t,e){return f(t,e,d,!1)},"number | BigNumber, SparseMatrix":function(t,e){return h(e,t,d,!0)},"number | BigNumber, DenseMatrix":function(t,e){return f(e,t,d,!0)},"Array, number | BigNumber":function(t,e){return f(o(t),e,d,!1).valueOf()},"number | BigNumber, Array":function(t,e){return f(o(e),t,d,!0).valueOf()}});return d.toTex={2:"\\mathrm{atan2}\\left(${args}\\right)"},d}},function(t,e,n){"use strict";var r=n(4);var i=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2};e.name="atanh",e.factory=function(t,e,n,o){var s=o("atanh",{number:function(n){return n<=1&&n>=-1||e.predictable?i(n):new t.Complex(n,0).atanh()},Complex:function(t){return t.atanh()},BigNumber:function(t){return t.atanh()},"Array | Matrix":function(t){return r(t,s,!0)}});return s.toTex={1:"\\tanh^{-1}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="cos",e.factory=function(t,e,n,i){var o=i("cos",{number:Math.cos,Complex:function(t){return t.cos()},BigNumber:function(t){return t.cos()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cos\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);var i=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2};e.name="cosh",e.factory=function(t,e,n,o){var s=o("cosh",{number:i,Complex:function(t){return t.cosh()},BigNumber:function(t){return t.cosh()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return s(e.value)},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:"\\cosh\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="cot",e.factory=function(t,e,n,i){var o=i("cot",{number:function(t){return 1/Math.tan(t)},Complex:function(t){return t.cot()},BigNumber:function(e){return new t.BigNumber(1).div(e.tan())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cot\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);function i(t){var e=Math.exp(2*t);return(e+1)/(e-1)}e.name="coth",e.factory=function(t,e,n,o){var s=o("coth",{number:i,Complex:function(t){return t.coth()},BigNumber:function(e){return new t.BigNumber(1).div(e.tanh())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return s(e.value)},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:"\\coth\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="csc",e.factory=function(t,e,n,i){var o=i("csc",{number:function(t){return 1/Math.sin(t)},Complex:function(t){return t.csc()},BigNumber:function(e){return new t.BigNumber(1).div(e.sin())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\csc\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4),i=n(7).sign;function o(t){return 0===t?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*i(t)}e.name="csch",e.factory=function(t,e,n,i){var s=i("csch",{number:o,Complex:function(t){return t.csch()},BigNumber:function(e){return new t.BigNumber(1).div(e.sinh())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return s(e.value)},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:"\\mathrm{csch}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="sec",e.factory=function(t,e,n,i){var o=i("sec",{number:function(t){return 1/Math.cos(t)},Complex:function(t){return t.sec()},BigNumber:function(e){return new t.BigNumber(1).div(e.cos())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\sec\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);function i(t){return 2/(Math.exp(t)+Math.exp(-t))}e.name="sech",e.factory=function(t,e,n,o){var s=o("sech",{number:i,Complex:function(t){return t.sech()},BigNumber:function(e){return new t.BigNumber(1).div(e.cosh())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return s(e.value)},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:"\\mathrm{sech}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="sin",e.factory=function(t,e,n,i){var o=i("sin",{number:Math.sin,Complex:function(t){return t.sin()},BigNumber:function(t){return t.sin()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\sin\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);var i=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2};e.name="sinh",e.factory=function(t,e,n,o){var s=o("sinh",{number:i,Complex:function(t){return t.sinh()},BigNumber:function(t){return t.sinh()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return s(e.value)},"Array | Matrix":function(t){return r(t,s,!0)}});return s.toTex={1:"\\sinh\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(4);e.name="tan",e.factory=function(t,e,n,i){var o=i("tan",{number:Math.tan,Complex:function(t){return t.tan()},BigNumber:function(t){return t.tan()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\tan\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(4);var i=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};e.name="tanh",e.factory=function(t,e,n,o){var s=o("tanh",{number:i,Complex:function(t){return t.tanh()},BigNumber:function(t){return t.tanh()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return s(e.value)},"Array | Matrix":function(t){return r(t,s,!0)}});return s.toTex={1:"\\tanh\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";t.exports=[n(1861)]},function(t,e,n){"use strict";e.name="to",e.factory=function(t,e,r,i){var o=n(9),s=r(n(3)),a=r(n(19)),u=r(n(18)),c=i("to",{"Unit, Unit | string":function(t,e){return t.to(e)},"Matrix, Matrix":function(t,e){return a(t,e,c)},"Array, Array":function(t,e){return c(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return c(s(t),e)},"Matrix, Array":function(t,e){return c(t,s(e))},"Matrix, any":function(t,e){return u(t,e,c,!1)},"any, Matrix":function(t,e){return u(e,t,c,!0)},"Array, any":function(t,e){return u(s(t),e,c,!1).valueOf()},"any, Array":function(t,e){return u(s(e),t,c,!0).valueOf()}});return c.toTex={2:"\\left(${args[0]}".concat(o.operators.to,"${args[1]}\\right)")},c}},function(t,e,n){"use strict";t.exports=[n(1863),n(107),n(195),n(163),n(1864),n(257),n(1865),n(194),n(263),n(75)]},function(t,e,n){"use strict";var r=n(15);e.name="clone",e.factory=function(t,e,n,i){var o=i("clone",{any:r.clone});return o.toTex=void 0,o}},function(t,e,n){"use strict";e.name="hasNumericValue",e.factory=function(t,e,r,i){var o=r(n(163));return i("hasNumericValue",{string:function(t){return t.trim().length>0&&!isNaN(Number(t))},any:function(t){return o(t)}})}},function(t,e,n){"use strict";var r=n(4);e.name="isPrime",e.factory=function(t,e,n,i){var o=i("isPrime",{number:function(t){if(t<2)return!1;if(2===t)return!0;if(t%2==0)return!1;for(var e=3;e*e<=t;e+=2)if(t%e==0)return!1;return!0},BigNumber:function(e){if(e.lt(2))return!1;if(e.equals(2))return!0;if(e.mod(2).isZero())return!1;for(var n=t.BigNumber(3);n.times(n).lte(e);n=n.plus(1))if(e.mod(n).isZero())return!1;return!0},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";t.exports=[n(733),n(2072),n(2076),n(2078),n(2095),n(137),n(737)]},function(t,e,n){"use strict";t.exports={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]}},function(t,e,n){"use strict";t.exports={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]}},function(t,e,n){"use strict";t.exports={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]}},function(t,e,n){"use strict";t.exports={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]}},function(t,e,n){"use strict";t.exports={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]}},function(t,e,n){"use strict";t.exports={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]}},function(t,e,n){"use strict";t.exports={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]}},function(t,e,n){"use strict";t.exports={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]}},function(t,e,n){"use strict";t.exports={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]}},function(t,e,n){"use strict";t.exports={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]}},function(t,e,n){"use strict";t.exports={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]}},function(t,e,n){"use strict";t.exports={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]}},function(t,e,n){"use strict";t.exports={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]}},function(t,e,n){"use strict";t.exports={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]}},function(t,e,n){"use strict";t.exports={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]}},function(t,e,n){"use strict";t.exports={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]}},function(t,e,n){"use strict";t.exports={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.eval({x: 3})"],seealso:["simplify","parse","eval"]}},function(t,e,n){"use strict";t.exports={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]}},function(t,e,n){"use strict";t.exports={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]}},function(t,e,n){"use strict";t.exports={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]}},function(t,e,n){"use strict";t.exports={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.eval({x: 2})"],seealso:["derivative","parse","eval"]}},function(t,e,n){"use strict";t.exports={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]}},function(t,e,n){"use strict";t.exports={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]}},function(t,e,n){"use strict";t.exports={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]}},function(t,e,n){"use strict";t.exports={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]}},function(t,e,n){"use strict";t.exports={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]}},function(t,e,n){"use strict";t.exports={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]}},function(t,e,n){"use strict";t.exports={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]}},function(t,e,n){"use strict";t.exports={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]}},function(t,e,n){"use strict";t.exports={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]}},function(t,e,n){"use strict";t.exports={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]}},function(t,e,n){"use strict";t.exports={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]}},function(t,e,n){"use strict";t.exports={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]}},function(t,e,n){"use strict";t.exports={name:"dotpow",category:"Operators",syntax:["x .^ y","dotpow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]}},function(t,e,n){"use strict";t.exports={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]}},function(t,e,n){"use strict";t.exports={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]}},function(t,e,n){"use strict";t.exports={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]}},function(t,e,n){"use strict";t.exports={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]}},function(t,e,n){"use strict";t.exports={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]}},function(t,e,n){"use strict";t.exports={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]}},function(t,e,n){"use strict";t.exports={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]}},function(t,e,n){"use strict";t.exports={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]}},function(t,e,n){"use strict";t.exports={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]}},function(t,e,n){"use strict";t.exports={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]}},function(t,e,n){"use strict";t.exports={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]}},function(t,e,n){"use strict";t.exports={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]}},function(t,e,n){"use strict";t.exports={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]}},function(t,e,n){"use strict";t.exports={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]}},function(t,e,n){"use strict";t.exports={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']}},function(t,e,n){"use strict";t.exports={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]}},function(t,e,n){"use strict";t.exports={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]}},function(t,e,n){"use strict";t.exports={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]}},function(t,e,n){"use strict";t.exports={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]}},function(t,e,n){"use strict";t.exports={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]}},function(t,e,n){"use strict";t.exports={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]}},function(t,e,n){"use strict";t.exports={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]}},function(t,e,n){"use strict";t.exports={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]}},function(t,e,n){"use strict";t.exports={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]}},function(t,e,n){"use strict";t.exports={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]}},function(t,e,n){"use strict";t.exports={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]}},function(t,e,n){"use strict";t.exports={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]}},function(t,e,n){"use strict";t.exports={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(t,e,n){"use strict";t.exports={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(t,e,n){"use strict";t.exports={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(t,e,n){"use strict";t.exports={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]}},function(t,e,n){"use strict";t.exports={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]}},function(t,e,n){"use strict";t.exports={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]}},function(t,e,n){"use strict";t.exports={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]}},function(t,e,n){"use strict";t.exports={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]}},function(t,e,n){"use strict";t.exports={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]}},function(t,e,n){"use strict";t.exports={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]}},function(t,e,n){"use strict";t.exports={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]}},function(t,e,n){"use strict";t.exports={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]}},function(t,e,n){"use strict";t.exports={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]}},function(t,e,n){"use strict";t.exports={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]}},function(t,e,n){"use strict";t.exports={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]}},function(t,e,n){"use strict";t.exports={name:"eval",category:"Expression",syntax:["eval(expression)","eval([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['eval("2 + 3")','eval("sqrt(" + 4 + ")")'],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]}},function(t,e,n){"use strict";t.exports={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]}},function(t,e,n){"use strict";t.exports={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]}},function(t,e,n){"use strict";t.exports={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]}},function(t,e,n){"use strict";t.exports={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]}},function(t,e,n){"use strict";t.exports={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]}},function(t,e,n){"use strict";t.exports={name:"transpose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]}},function(t,e,n){"use strict";t.exports={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]}},function(t,e,n){"use strict";t.exports={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeof"]}},function(t,e,n){"use strict";t.exports={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]}},function(t,e,n){"use strict";t.exports={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]}},function(t,e,n){"use strict";t.exports={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]}},function(t,e,n){"use strict";t.exports={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]}},function(t,e,n){"use strict";t.exports={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]}},function(t,e,n){"use strict";t.exports={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]}},function(t,e,n){"use strict";t.exports={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]}},function(t,e,n){"use strict";t.exports={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]}},function(t,e,n){"use strict";t.exports={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]}},function(t,e,n){"use strict";t.exports={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]}},function(t,e,n){"use strict";t.exports={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]}},function(t,e,n){"use strict";t.exports={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]}},function(t,e,n){"use strict";t.exports={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]}},function(t,e,n){"use strict";t.exports={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["permutations","factorial"]}},function(t,e,n){"use strict";t.exports={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","permutations","gamma"]}},function(t,e,n){"use strict";t.exports={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]}},function(t,e,n){"use strict";t.exports={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]}},function(t,e,n){"use strict";t.exports={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","factorial"]}},function(t,e,n){"use strict";t.exports={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]}},function(t,e,n){"use strict";t.exports={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]}},function(t,e,n){"use strict";t.exports={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]}},function(t,e,n){"use strict";t.exports={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]}},function(t,e,n){"use strict";t.exports={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]}},function(t,e,n){"use strict";t.exports={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]}},function(t,e,n){"use strict";t.exports={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]}},function(t,e,n){"use strict";t.exports={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]}},function(t,e,n){"use strict";t.exports={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]}},function(t,e,n){"use strict";t.exports={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}},function(t,e,n){"use strict";t.exports={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]}},function(t,e,n){"use strict";t.exports={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]}},function(t,e,n){"use strict";t.exports={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]}},function(t,e,n){"use strict";t.exports={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},function(t,e,n){"use strict";t.exports={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]}},function(t,e,n){"use strict";t.exports={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]}},function(t,e,n){"use strict";t.exports={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]}},function(t,e,n){"use strict";t.exports={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]}},function(t,e,n){"use strict";t.exports={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]}},function(t,e,n){"use strict";t.exports={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]}},function(t,e,n){"use strict";t.exports={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]}},function(t,e,n){"use strict";t.exports={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]}},function(t,e,n){"use strict";t.exports={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]}},function(t,e,n){"use strict";t.exports={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]}},function(t,e,n){"use strict";t.exports={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]}},function(t,e,n){"use strict";t.exports={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","var","quantileSeq"]}},function(t,e,n){"use strict";t.exports={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(var(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","var"]}},function(t,e,n){"use strict";t.exports={name:"var",category:"Statistics",syntax:["var(a, b, c, ...)","var(A)","var(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["var(2, 4, 6)","var([2, 4, 6, 8])",'var([2, 4, 6, 8], "uncorrected")','var([2, 4, 6, 8], "biased")',"var([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]}},function(t,e,n){"use strict";t.exports={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]}},function(t,e,n){"use strict";t.exports={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]}},function(t,e,n){"use strict";t.exports={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]}},function(t,e,n){"use strict";t.exports={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]}},function(t,e,n){"use strict";t.exports={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]}},function(t,e,n){"use strict";t.exports={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]}},function(t,e,n){"use strict";t.exports={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]}},function(t,e,n){"use strict";t.exports={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]}},function(t,e,n){"use strict";t.exports={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]}},function(t,e,n){"use strict";t.exports={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]}},function(t,e,n){"use strict";t.exports={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]}},function(t,e,n){"use strict";t.exports={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]}},function(t,e,n){"use strict";t.exports={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]}},function(t,e,n){"use strict";t.exports={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]}},function(t,e,n){"use strict";t.exports={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]}},function(t,e,n){"use strict";t.exports={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]}},function(t,e,n){"use strict";t.exports={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]}},function(t,e,n){"use strict";t.exports={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]}},function(t,e,n){"use strict";t.exports={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]}},function(t,e,n){"use strict";t.exports={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]}},function(t,e,n){"use strict";t.exports={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]}},function(t,e,n){"use strict";t.exports={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]}},function(t,e,n){"use strict";t.exports={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]}},function(t,e,n){"use strict";t.exports={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]}},function(t,e,n){"use strict";t.exports={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]}},function(t,e,n){"use strict";t.exports={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]}},function(t,e,n){"use strict";t.exports={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]}},function(t,e,n){"use strict";t.exports={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},function(t,e,n){"use strict";t.exports={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},function(t,e,n){"use strict";t.exports={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]}},function(t,e,n){"use strict";t.exports={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]}},function(t,e,n){"use strict";t.exports={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]}},function(t,e,n){"use strict";t.exports={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},function(t,e,n){"use strict";t.exports={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},function(t,e,n){"use strict";t.exports={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]}},function(t,e,n){"use strict";t.exports={name:"typeof",category:"Utils",syntax:["typeof(x)"],description:"Get the type of a variable.",examples:["typeof(3.5)","typeof(2 - 4i)","typeof(45 deg)",'typeof("hello world")'],seealso:["getMatrixDataType"]}},function(t,e,n){"use strict";t.exports=[n(2073),n(2074),n(2075),n(707),n(736)]},function(t,e,n){"use strict";var r=n(4);e.name="compile",e.factory=function(t,e,i,o){var s=i(n(137));return o("compile",{string:function(t){return s(t).compile()},"Array | Matrix":function(t){return r(t,function(t){return s(t).compile()})}})}},function(t,e,n){"use strict";var r=n(4);e.name="eval",e.factory=function(t,e,i,o){var s=i(n(137));return o("compile",{string:function(t){return s(t).compile().eval({})},"string, Object":function(t,e){return s(t).compile().eval(e)},"Array | Matrix":function(t){var e={};return r(t,function(t){return s(t).compile().eval(e)})},"Array | Matrix, Object":function(t,e){return r(t,function(t){return s(t).compile().eval(e)})}})}},function(t,e,n){"use strict";var r=n(45).getSafeProperty;e.math=!0,e.name="help",e.factory=function(t,e,i,o,s){var a=i(n(733));return o("help",{any:function(e){var n,i=e;if("string"!=typeof e)for(n in s)if(s.hasOwnProperty(n)&&e===s[n]){i=n;break}var o=r(a,i);if(!o)throw new Error('No documentation found on "'+i+'"');return new t.Help(o)}})}},function(t,e,n){"use strict";t.exports=[n(691),n(694),n(695),n(696),n(697),n(192),n(699),n(698),n(253),n(49),n(700),n(193),n(252),n(701),n(702),n(165),n(2077)]},function(t,e,n){"use strict";e.name="UpdateNode",e.path="expression.node",e.factory=function(t,e,n,r){return function(){throw new Error("UpdateNode is deprecated. Use AssignmentNode instead.")}}},function(t,e,n){"use strict";t.exports=[n(2079),n(2080),n(2081),n(2082),n(2083),n(2084),n(2085),n(2086),n(2087),n(2088),n(2089),n(2090),n(2091),n(2092),n(2093),n(2094)]},function(t,e,n){"use strict";var r=n(63).transform;e.name="apply",e.path="expression.transform",e.factory=function(t,e,i,o){var s=i(n(379));return o("apply",{"...any":function(e){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1));try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform;e.name="column",e.path="expression.transform",e.factory=function(t,e,i,o){var s=i(n(721));return o("column",{"...any":function(e){var n=e.length-1,i=e[n];t.isNumber(i)&&(e[n]=i-1);try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform;e.name="concat",e.path="expression.transform",e.factory=function(t,e,i,o){var s=i(n(262));return o("concat",{"...any":function(e){var n=e.length-1,i=e[n];t.isNumber(i)?e[n]=i-1:t.isBigNumber(i)&&(e[n]=i.minus(1));try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(5).filter,i=n(5).filterRegExp,o=n(117).maxArgumentCount;function s(t,e){var n=o(e);return r(t,function(t,r,i){return 1===n?e(t):2===n?e(t,[r+1]):e(t,[r+1],i)})}e.name="filter",e.path="expression.transform",e.factory=function(t,e,r,o){var a=r(n(385)),u=r(n(3));function c(e,n,r){var i,o;return e[0]&&(i=e[0].compile().eval(r)),e[1]&&(o=t.isSymbolNode(e[1])||t.isFunctionAssignmentNode(e[1])?e[1].compile().eval(r):a(e[1],n,r)),h(i,o)}c.rawArgs=!0;var h=o("filter",{"Array, function":s,"Matrix, function":function(t,e){return u(s(t.toArray(),e))},"Array, RegExp":i,"Matrix, RegExp":function(t,e){return u(i(t.toArray(),e))}});return h.toTex=void 0,c}},function(t,e,n){"use strict";var r=n(117).maxArgumentCount,i=n(5).forEach;e.name="forEach",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(385));function u(e,n,r){var i,o;return e[0]&&(i=e[0].compile().eval(r)),e[1]&&(o=t.isSymbolNode(e[1])||t.isFunctionAssignmentNode(e[1])?e[1].compile().eval(r):a(e[1],n,r)),c(i,o)}u.rawArgs=!0;var c=s("forEach",{"Array | Matrix, function":function(t,e){var n=r(e);!function r(o,s){Array.isArray(o)?i(o,function(t,e){r(t,s.concat(e+1))}):1===n?e(o):2===n?e(o,s):e(o,s,t)}(t.valueOf(),[])}});return u}},function(t,e,n){"use strict";e.name="index",e.path="expression.transform",e.factory=function(t,e,n){return function(){for(var e=[],n=0,r=arguments.length;n<r;n++){var i=arguments[n];if(t.isRange(i))i.start--,i.end-=i.step>0?0:2;else if(i&&!0===i.isSet)i=i.map(function(t){return t-1});else if(t.isArray(i)||t.isMatrix(i))i=i.map(function(t){return t-1});else if(t.isNumber(i))i--;else if(t.isBigNumber(i))i=i.toNumber()-1;else if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[n]=i}var o=new t.Index;return t.Index.apply(o,e),o}}},function(t,e,n){"use strict";var r=n(117).maxArgumentCount,i=n(5).map;function o(t,e,n){var o=r(e);return function t(r,s){return Array.isArray(r)?i(r,function(e,n){return t(e,s.concat(n+1))}):1===o?e(r):2===o?e(r,s):e(r,s,n)}(t,[])}e.name="map",e.path="expression.transform",e.factory=function(t,e,r,i){var s=r(n(385)),a=r(n(3));function u(e,n,r){var i,o;return e[0]&&(i=e[0].compile().eval(r)),e[1]&&(o=t.isSymbolNode(e[1])||t.isFunctionAssignmentNode(e[1])?e[1].compile().eval(r):s(e[1],n,r)),c(i,o)}u.rawArgs=!0;var c=i("map",{"Array, function":function(t,e){return o(t,e,t)},"Matrix, function":function(t,e){return a(o(t.valueOf(),e,t))}});return u}},function(t,e,n){"use strict";var r=n(63).transform,i=n(108);e.name="max",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(381));return s("max",{"...any":function(e){if(2===e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform,i=n(108);e.name="mean",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(730));return s("mean",{"...any":function(e){if(2===e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform,i=n(108);e.name="min",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(731));return s("min",{"...any":function(e){if(2===e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";e.name="range",e.path="expression.transform",e.factory=function(t,e,r,i){var o=r(n(261));return i("range",{"...any":function(t){return"boolean"!=typeof t[t.length-1]&&t.push(!0),o.apply(null,t)}})}},function(t,e,n){"use strict";var r=n(63).transform,i=n(108);e.name="std",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(732));return s("std",{"...any":function(e){if(e.length>=2&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform;e.name="row",e.path="expression.transform",e.factory=function(t,e,i,o){var s=i(n(724));return o("row",{"...any":function(e){var n=e.length-1,i=e[n];t.isNumber(i)&&(e[n]=i-1);try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform;e.name="subset",e.path="expression.transform",e.factory=function(t,e,i,o){var s=i(n(64));return o("subset",{"...any":function(t){try{return s.apply(null,t)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform,i=n(108);e.name="sum",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(382));return s("sum",{"...any":function(e){if(2===e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(63).transform,i=n(108);e.name="var",e.path="expression.transform",e.factory=function(t,e,o,s){var a=o(n(384));return s("var",{"...any":function(e){if(e.length>=2&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(15),i=n(26);e.name="Help",e.path="type",e.factory=function(t,e,o,s){var a=o(n(736))();function u(t){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(!t)throw new Error('Argument "doc" missing');this.doc=t}return u.prototype.type="Help",u.prototype.isHelp=!0,u.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var r=0;r<e.examples.length;r++){var o=e.examples[r];n+="    "+o+"\n";var s=void 0;try{s=a.eval(o)}catch(t){s=t}void 0===s||t.isHelp(s)||(n+="        "+i.format(s,{precision:14})+"\n")}n+="\n"}return e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n},u.prototype.toJSON=function(){var t=r.clone(this.doc);return t.mathjs="Help",t},u.fromJSON=function(t){var e={};for(var n in t)"mathjs"!==n&&(e[n]=t[n]);return new u(e)},u.prototype.valueOf=u.prototype.toString,u}},function(t,e,n){"use strict";t.exports=[n(2097)]},function(t,e,n){"use strict";e.name="reviver",e.path="json",e.factory=function(t,e,n,r,i){return function(e,n){var r=t[n&&n.mathjs]||i.expression&&i.expression.node[n&&n.mathjs];return r&&"function"==typeof r.fromJSON?r.fromJSON(n):n}},e.math=!0},function(t,e,n){"use strict";var r=n(191),i=n(39),o=n(159);t.exports=[{name:"ArgumentsError",path:"error",factory:function(){return r}},{name:"DimensionError",path:"error",factory:function(){return i}},{name:"IndexError",path:"error",factory:function(){return o}}]},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,h=s>0?r-4:r,l=0;l<h;l+=4)e=i[t.charCodeAt(l)]<<18|i[t.charCodeAt(l+1)]<<12|i[t.charCodeAt(l+2)]<<6|i[t.charCodeAt(l+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=i[t.charCodeAt(l)]<<2|i[t.charCodeAt(l+1)]>>4,a[u++]=255&e);1===s&&(e=i[t.charCodeAt(l)]<<10|i[t.charCodeAt(l+1)]<<4|i[t.charCodeAt(l+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*m}},function(t,e,n){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n(167),e.createHash=e.Hash=n(197),e.createHmac=e.Hmac=n(746);var r=n(2116),i=Object.keys(r),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var s=n(749);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync;var a=n(2118);e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var u=n(2135);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var c=n(2141);e.createSign=c.createSign,e.Sign=c.Sign,e.createVerify=c.createVerify,e.Verify=c.Verify,e.createECDH=n(2175);var h=n(2176);e.publicEncrypt=h.publicEncrypt,e.privateEncrypt=h.privateEncrypt,e.publicDecrypt=h.publicDecrypt,e.privateDecrypt=h.privateDecrypt;var l=n(2179);e.randomFill=l.randomFill,e.randomFillSync=l.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e){},function(t,e,n){"use strict";var r=n(11).Buffer,i=n(2104);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(50))},function(t,e,n){"use strict";t.exports=o;var r=n(743),i=n(198);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(10),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(390)},function(t,e,n){t.exports=n(141)},function(t,e,n){t.exports=n(389).Transform},function(t,e,n){t.exports=n(389).PassThrough},function(t,e,n){var r=n(10),i=n(168),o=n(11).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(t){return t<<30|t>>>2}function h(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,l=0;l<16;++l)n[l]=t.readInt32BE(4*l);for(;l<80;++l)n[l]=n[l-3]^n[l-8]^n[l-14]^n[l-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((e=r)<<5|e>>>27)+h(d,i,o,a)+u+n[f]+s[d];u=a,a=o,o=c(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,n){var r=n(10),i=n(168),o=n(11).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(t){return t<<5|t>>>27}function h(t){return t<<30|t>>>2}function l(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,f=0;f<16;++f)n[f]=t.readInt32BE(4*f);for(;f<80;++f)n[f]=(e=n[f-3]^n[f-8]^n[f-14]^n[f-16])<<1|e>>>31;for(var d=0;d<80;++d){var p=~~(d/20),m=c(r)+l(p,i,o,a)+u+n[d]+s[p]|0;u=a,a=o,o=h(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,n){var r=n(10),i=n(744),o=n(168),s=n(11).Buffer,a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}r(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},function(t,e,n){var r=n(10),i=n(745),o=n(168),s=n(11).Buffer,a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}r(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=s.allocUnsafe(48);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},function(t,e,n){"use strict";var r=n(10),i=n(11).Buffer,o=n(122),s=i.alloc(128),a=64;function u(t,e){o.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=i.concat([e,s],a));for(var n=this._ipad=i.allocUnsafe(a),r=this._opad=i.allocUnsafe(a),u=0;u<a;u++)n[u]=54^e[u],r[u]=92^e[u];this._hash=[n]}r(u,o),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=u},function(t,e,n){t.exports=n(748)},function(t,e,n){(function(e,r){var i,o=n(750),s=n(751),a=n(752),u=n(11).Buffer,c=e.crypto&&e.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function f(t,e,n,r,i){return c.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return c.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:i}},t,r<<3)}).then(function(t){return u.from(t)})}t.exports=function(t,n,d,p,m,v){"function"==typeof m&&(v=m,m=void 0);var g=h[(m=m||"sha1").toLowerCase()];if(!g||"function"!=typeof e.Promise)return r.nextTick(function(){var e;try{e=a(t,n,d,p,m)}catch(t){return v(t)}v(null,e)});if(o(t,n,d,p),"function"!=typeof v)throw new Error("No callback provided to pbkdf2");u.isBuffer(t)||(t=u.from(t,s)),u.isBuffer(n)||(n=u.from(n,s)),function(t,e){t.then(function(t){r.nextTick(function(){e(null,t)})},function(t){r.nextTick(function(){e(t)})})}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==l[t])return l[t];var n=f(i=i||u.alloc(8),i,10,128,t).then(function(){return!0}).catch(function(){return!1});return l[t]=n,n}(g).then(function(e){return e?f(t,n,d,p,g):a(t,n,d,p,m)}),v)}}).call(this,n(50),n(81))},function(t,e,n){var r=n(2119),i=n(395),o=n(396),s=n(2134),a=n(267);function u(t,e,n){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,n);if(s[t])return new r({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function c(t,e,n){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,n);if(s[t])return new r({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var n,r;if(t=t.toLowerCase(),o[t])n=o[t].key,r=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");n=8*s[t].key,r=s[t].iv}var i=a(e,!1,n,r);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var n,r;if(t=t.toLowerCase(),o[t])n=o[t].key,r=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");n=8*s[t].key,r=s[t].iv}var i=a(e,!1,n,r);return c(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(s).concat(i.getCiphers())}},function(t,e,n){var r=n(122),i=n(394),o=n(10),s=n(11).Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){r.call(this);var e,n=t.mode.toLowerCase(),i=a[n];e=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=s.concat([o,o.slice(0,8)]));var u=t.iv;s.isBuffer(u)||(u=s.from(u)),this._des=i.create({key:o,iv:u,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=u,o(u,r),u.prototype._update=function(t){return s.from(this._des.update(t))},u.prototype._final=function(){return s.from(this._des.final())}},function(t,e,n){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,n){t[0+n]=e>>>24,t[1+n]=e>>>16&255,t[2+n]=e>>>8&255,t[3+n]=255&e},e.ip=function(t,e,n,r){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1}n[r+0]=i>>>0,n[r+1]=o>>>0},e.rip=function(t,e,n,r){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=e>>>a+s&1,i<<=1,i|=t>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=e>>>a+s&1,o<<=1,o|=t>>>a+s&1;n[r+0]=i>>>0,n[r+1]=o>>>0},e.pc1=function(t,e,n,r){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;n[r+0]=i>>>0,n[r+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,n,i){for(var o=0,s=0,a=r.length>>>1,u=0;u<a;u++)o<<=1,o|=t>>>r[u]&1;for(u=a;u<r.length;u++)s<<=1,s|=e>>>r[u]&1;n[i+0]=o>>>0,n[i+1]=s>>>0},e.expand=function(t,e,n){var r=0,i=0;r=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[n+0]=r>>>0,e[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var n=0,r=0;r<4;r++){n<<=4,n|=i[64*r+(t>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=i[256+64*r+(e>>>18-6*r&63)]}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,n=0;n<o.length;n++)e<<=1,e|=t>>>o[n]&1;return e>>>0},e.padSplit=function(t,e,n){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var i=[],o=0;o<e;o+=n)i.push(r.slice(o,o+n));return i.join(" ")}},function(t,e,n){"use strict";var r=n(69);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<n;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,n=0,r=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,n),n+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,n=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),n+=this._flushBuffer(i,n);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,n;return t&&(e=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(n):n},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,n){"use strict";var r=n(69),i=n(10),o=n(394),s=o.utils,a=o.Cipher;function u(){this.tmp=new Array(2),this.keys=null}function c(t){a.call(this,t);var e=new u;this._desState=e,this.deriveKeys(e,t.key)}i(c,a),t.exports=c,c.create=function(t){return new c(t)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var n=s.readUInt32BE(e,0),i=s.readUInt32BE(e,4);s.pc1(n,i,t.tmp,0),n=t.tmp[0],i=t.tmp[1];for(var o=0;o<t.keys.length;o+=2){var a=h[o>>>1];n=s.r28shl(n,a),i=s.r28shl(i,a),s.pc2(n,i,t.keys,o)}},c.prototype._update=function(t,e,n,r){var i=this._desState,o=s.readUInt32BE(t,e),a=s.readUInt32BE(t,e+4);s.ip(o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,a,i.tmp,0):this._decrypt(i,o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],s.writeUInt32BE(n,o,r),s.writeUInt32BE(n,a,r+4)},c.prototype._pad=function(t,e){for(var n=t.length-e,r=e;r<t.length;r++)t[r]=n;return!0},c.prototype._unpad=function(t){for(var e=t[t.length-1],n=t.length-e;n<t.length;n++)r.equal(t[n],e);return t.slice(0,t.length-e)},c.prototype._encrypt=function(t,e,n,r,i){for(var o=e,a=n,u=0;u<t.keys.length;u+=2){var c=t.keys[u],h=t.keys[u+1];s.expand(a,t.tmp,0),c^=t.tmp[0],h^=t.tmp[1];var l=s.substitute(c,h),f=a;a=(o^s.permute(l))>>>0,o=f}s.rip(a,o,r,i)},c.prototype._decrypt=function(t,e,n,r,i){for(var o=n,a=e,u=t.keys.length-2;u>=0;u-=2){var c=t.keys[u],h=t.keys[u+1];s.expand(o,t.tmp,0),c^=t.tmp[0],h^=t.tmp[1];var l=s.substitute(c,h),f=o;o=(a^s.permute(l))>>>0,a=f}s.rip(o,a,r,i)}},function(t,e,n){"use strict";var r=n(69),i=n(10),o={};function s(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var n=Object.keys(o),r=0;r<n.length;r++){var s=n[r];e.prototype[s]=o[s]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new s(this.options.iv);this._cbcState=t},o._update=function(t,e,n,r){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=t[e+a];o._update.call(this,s,0,n,r);for(a=0;a<this.blockSize;a++)s[a]=n[r+a]}else{o._update.call(this,t,e,n,r);for(a=0;a<this.blockSize;a++)n[r+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=t[e+a]}}},function(t,e,n){"use strict";var r=n(69),i=n(10),o=n(394),s=o.Cipher,a=o.DES;function u(t,e){r.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:n})]}function c(t){s.call(this,t);var e=new u(this.type,this.options.key);this._edeState=e}i(c,s),t.exports=c,c.create=function(t){return new c(t)},c.prototype._update=function(t,e,n,r){var i=this._edeState;i.ciphers[0]._update(t,e,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},c.prototype._pad=a.prototype._pad,c.prototype._unpad=a.prototype._unpad},function(t,e,n){var r=n(396),i=n(756),o=n(11).Buffer,s=n(757),a=n(122),u=n(266),c=n(267);function h(t,e,n){a.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(n),this._mode=t,this._autopadding=!0}n(10)(h,a),h.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get();)n=this._mode.encrypt(this,e),r.push(n);return o.concat(r)};var l=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function d(t,e,n){var a=r[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===a.type?new s(a.module,e,n):"auth"===a.type?new i(a.module,e,n):new h(a.module,e,n)}h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return o.concat([this.cache,e])},e.createCipheriv=d,e.createCipher=function(t,e){var n=r[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(e,!1,n.key,n.iv);return d(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,n){var r=n(199);e.encrypt=function(t,e){var n=r(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},e.decrypt=function(t,e){var n=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return r(i,n)}},function(t,e,n){var r=n(11).Buffer,i=n(199);function o(t,e,n){var o=e.length,s=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=r.concat([t._prev,n?e:s]),s}e.encrypt=function(t,e,n){for(var i,s=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){s=r.concat([s,o(t,e,n)]);break}i=t._cache.length,s=r.concat([s,o(t,e.slice(0,i),n)]),e=e.slice(i)}return s}},function(t,e,n){var r=n(11).Buffer;function i(t,e,n){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([n?e:i])]),i}e.encrypt=function(t,e,n){for(var o=e.length,s=r.allocUnsafe(o),a=-1;++a<o;)s[a]=i(t,e[a],n);return s}},function(t,e,n){var r=n(11).Buffer;function i(t,e,n){for(var r,i,s=-1,a=0;++s<8;)r=e&1<<7-s?128:0,a+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^r))>>s%8,t._prev=o(t._prev,n?r:i);return a}function o(t,e){var n=t.length,i=-1,o=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++i<n;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,n){for(var o=e.length,s=r.allocUnsafe(o),a=-1;++a<o;)s[a]=i(t,e[a],n);return s}},function(t,e,n){(function(t){var r=n(199);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,o)}}).call(this,n(46).Buffer)},function(t,e,n){var r=n(11).Buffer,i=r.alloc(16,0);function o(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function s(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}s.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},s.prototype._multiply=function(){for(var t,e,n,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=o(i)},s.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},s.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=s},function(t,e,n){var r=n(756),i=n(11).Buffer,o=n(396),s=n(757),a=n(122),u=n(266),c=n(267);function h(t,e,n){a.call(this),this._cache=new l,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(n),this._mode=t,this._autopadding=!0}function l(){this.cache=i.allocUnsafe(0)}function f(t,e,n){var a=o[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof e&&(e=i.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new s(a.module,e,n,!0):"auth"===a.type?new r(a.module,e,n,!0):new h(a.module,e,n)}n(10)(h,a),h.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),r.push(n);return i.concat(r)},h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},l.prototype.add=function(t){this.cache=i.concat([this.cache,t])},l.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var n=o[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(e,!1,n.key,n.iv);return f(t,r.key,r.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,n){(function(t){var r=n(758),i=n(2139),o=n(2140);var s={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var n=new t(i[e].prime,"hex"),r=new t(i[e].gen,"hex");return new o(n,r)},e.createDiffieHellman=e.DiffieHellman=function e(n,i,a,u){return t.isBuffer(i)||void 0===s[i]?e(n,"binary",i,a):(i=i||"binary",u=u||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,u)),"number"==typeof n?new o(r(n,a),a,!0):(t.isBuffer(n)||(n=new t(n,i)),new o(n,a,!0)))}}).call(this,n(46).Buffer)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){},function(t,e){},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,n){(function(e){var r=n(32),i=new(n(759)),o=new r(24),s=new r(11),a=new r(10),u=new r(3),c=new r(7),h=n(758),l=n(167);function f(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._pub=new r(t),this}function d(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._priv=new r(t),this}t.exports=m;var p={};function m(t,e,n){this.setGenerator(e),this.__prime=new r(t),this._prime=r.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=f,this.setPrivateKey=d):this._primeCode=8}function v(t,n){var r=new e(t.toArray());return n?r.toString(n):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var n=e.toString("hex"),r=[n,t.toString(16)].join("_");if(r in p)return p[r];var l,f=0;if(t.isEven()||!h.simpleSieve||!h.fermatTest(t)||!i.test(t))return f+=1,f+="02"===n||"05"===n?8:4,p[r]=f,f;switch(i.test(t.shrn(1))||(f+=2),n){case"02":t.mod(o).cmp(s)&&(f+=8);break;case"05":(l=t.mod(a)).cmp(u)&&l.cmp(c)&&(f+=8);break;default:f+=4}return p[r]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(l(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var n=(t=(t=new r(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(n.toArray()),o=this.getPrime();if(i.length<o.length){var s=new e(o.length-i.length);s.fill(0),i=e.concat([s,i])}return i},m.prototype.getPublicKey=function(t){return v(this._pub,t)},m.prototype.getPrivateKey=function(t){return v(this._priv,t)},m.prototype.getPrime=function(t){return v(this.__prime,t)},m.prototype.getGenerator=function(t){return v(this._gen,t)},m.prototype.setGenerator=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.__gen=t,this._gen=new r(t),this}}).call(this,n(46).Buffer)},function(t,e,n){(function(e){var r=n(197),i=n(387),o=n(10),s=n(2142),a=n(2174),u=n(748);function c(t){i.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=r(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){i.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hash=r(e.hash),this._tag=e.id,this._signType=e.sign}function l(t){return new c(t)}function f(t){return new h(t)}Object.keys(u).forEach(function(t){u[t].id=new e(u[t].id,"hex"),u[t.toLowerCase()]=u[t]}),o(c,i.Writable),c.prototype._write=function(t,e,n){this._hash.update(t),n()},c.prototype.update=function(t,n){return"string"==typeof t&&(t=new e(t,n)),this._hash.update(t),this},c.prototype.sign=function(t,e){this.end();var n=this._hash.digest(),r=s(n,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},o(h,i.Writable),h.prototype._write=function(t,e,n){this._hash.update(t),n()},h.prototype.update=function(t,n){return"string"==typeof t&&(t=new e(t,n)),this._hash.update(t),this},h.prototype.verify=function(t,n,r){"string"==typeof n&&(n=new e(n,r)),this.end();var i=this._hash.digest();return a(n,i,t,this._signType,this._tag)},t.exports={Sign:l,Verify:f,createSign:l,createVerify:f}}).call(this,n(46).Buffer)},function(t,e,n){(function(e){var r=n(746),i=n(398),o=n(399).ec,s=n(32),a=n(269),u=n(769);function c(t,n,i,o){if((t=new e(t.toArray())).length<n.byteLength()){var s=new e(n.byteLength()-t.length);s.fill(0),t=e.concat([s,t])}var a=i.length,u=function(t,n){t=(t=h(t,n)).mod(n);var r=new e(t.toArray());if(r.length<n.byteLength()){var i=new e(n.byteLength()-r.length);i.fill(0),r=e.concat([i,r])}return r}(i,n),c=new e(a);c.fill(1);var l=new e(a);return l.fill(0),l=r(o,l).update(c).update(new e([0])).update(t).update(u).digest(),c=r(o,l).update(c).digest(),{k:l=r(o,l).update(c).update(new e([1])).update(t).update(u).digest(),v:c=r(o,l).update(c).digest()}}function h(t,e){var n=new s(t),r=(t.length<<3)-e.bitLength();return r>0&&n.ishrn(r),n}function l(t,n,i){var o,s;do{for(o=new e(0);8*o.length<t.bitLength();)n.v=r(i,n.k).update(n.v).digest(),o=e.concat([o,n.v]);s=h(o,t),n.k=r(i,n.k).update(n.v).update(new e([0])).digest(),n.v=r(i,n.k).update(n.v).digest()}while(-1!==s.cmp(t));return s}function f(t,e,n,r){return t.toRed(s.mont(n)).redPow(e).fromRed().mod(r)}t.exports=function(t,n,r,d,p){var m=a(n);if(m.curve){if("ecdsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong private key type");return function(t,n){var r=u[n.curve.join(".")];if(!r)throw new Error("unknown curve "+n.curve.join("."));var i=new o(r).keyFromPrivate(n.privateKey).sign(t);return new e(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==d)throw new Error("wrong private key type");return function(t,n,r){for(var i,o=n.params.priv_key,a=n.params.p,u=n.params.q,d=n.params.g,p=new s(0),m=h(t,u).mod(u),v=!1,g=c(o,u,t,r);!1===v;)i=l(u,g,r),p=f(d,i,a,u),0===(v=i.invm(u).imul(m.add(o.mul(p))).mod(u)).cmpn(0)&&(v=!1,p=new s(0));return function(t,n){t=t.toArray(),n=n.toArray(),128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n));var r=[48,t.length+n.length+4,2,t.length];return r=r.concat(t,[2,n.length],n),new e(r)}(p,v)}(t,m,r)}if("rsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong private key type");t=e.concat([p,t]);for(var v=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<v;)g.push(255);g.push(0);for(var y=-1;++y<t.length;)g.push(t[y]);return i(g,m)},t.exports.getKey=c,t.exports.makeKey=l}).call(this,n(46).Buffer)},function(t){t.exports=JSON.parse('{"_from":"elliptic@^6.0.0","_id":"elliptic@6.5.0","_inBundle":false,"_integrity":"sha512-eFOJTMyCYb7xtE/caJ6JJu+bhi67WCYNbkGSknu20pmM8Ke/bqOfdnZWxyoGN26JgfxTbXrsCkEw4KheCT/KGg==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.0.0","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.0.0","saveSpec":null,"fetchSpec":"^6.0.0"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.0.tgz","_shasum":"2b8ed4c891b7de3200e14412a5b8248c7af505ca","_spec":"elliptic@^6.0.0","_where":"D:\\\\Coding\\\\Code\\\\braitenberg-vehicle-simulation\\\\node_modules\\\\browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^2.11.3","grunt":"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2","istanbul":"^0.4.2","jscs":"^2.9.0","jshint":"^2.6.0","mocha":"^2.1.0"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.0"}')},function(t,e,n){"use strict";var r=n(70),i=n(32),o=n(10),s=n(268),a=r.assert;function u(t){s.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,n,r){s.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(t,e,n,r){s.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,s),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:(n=o[1],a(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map(function(t){return{a:new i(t.a,16),b:new i(t.b,16)}}):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),n=new i(2).toRed(e).redInvm(),r=n.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,n,r,o,s,a,u,c,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),m=new i(0),v=new i(0),g=new i(1),y=0;0!==f.cmpn(0);){var b=d.div(f);c=d.sub(b.mul(f)),h=v.sub(b.mul(p));var x=g.sub(b.mul(m));if(!r&&c.cmp(l)<0)e=u.neg(),n=p,r=c.neg(),o=h;else if(r&&2==++y)break;u=c,d=f,f=c,v=p,p=h,g=m,m=x}s=c.neg(),a=h;var w=r.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(w)>=0&&(s=e,a=n),r.negative&&(r=r.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:r,b:o},{a:s,b:a}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),s=i.mul(n.a),a=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:t.sub(s).sub(a),k2:u.add(c).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),r[2*o]=a,r[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),h=0;h<2*o;h++)r[h]=null,i[h]=null;return c},o(c,s.BasePoint),u.prototype.point=function(t,e,n){return new c(this,t,e,n)},u.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,n){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new i(t,16),this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(h,s.BasePoint),u.prototype.jpoint=function(t,e,n){return new h(this,t,e,n)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(n.redMul(this.z)),a=r.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),h=c.redMul(a),l=r.redMul(c),f=u.redSqr().redIAdd(h).redISub(l).redISub(l),d=u.redMul(l.redISub(f)).redISub(o.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},h.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=n.redSub(r),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),h=n.redMul(u),l=a.redSqr().redIAdd(c).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(l,f,d)},h.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}var r=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(n=0;n<t;n++){var h=o.redSqr(),l=c.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(r.redMul(u)),p=o.redMul(l),m=d.redSqr().redISub(p.redAdd(p)),v=p.redISub(m),g=d.redMul(v);g=g.redIAdd(g).redISub(f);var y=c.redMul(a);n+1<t&&(u=u.redMul(f)),o=m,a=y,c=g}return this.curve.jpoint(o,c.redMul(i),a)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=a.redMul(s.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),m=p.redSqr(),v=f.redIAdd(f);v=(v=v.redIAdd(v)).redIAdd(v),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(v),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},h.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=a.redMul(s.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var v=l.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),e=d.redMul(p.redISub(t)).redISub(v)}return this.curve.jpoint(t,e,n)},h.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(s),h=a.redSqr().redISub(c.redAdd(c)),l=c.redISub(h),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(l).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(h,d,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),h=e.redMul(c);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(l,f,d)},h.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},h.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},h.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,n){"use strict";var r=n(32),i=n(10),o=n(268),s=n(70);function a(t){o.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,n){o.BasePoint.call(this,t,"projective"),null===e&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,n=e.redSqr(),r=n.redMul(e).redAdd(n.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},i(u,o.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},a.prototype.point=function(t,e){return new u(this,t,e)},a.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),n=t.redSub(e),r=t.redMul(e),i=n.redMul(e.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(n),s=i.redMul(r),a=e.z.redMul(o.redAdd(s).redSqr()),u=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,u)},u.prototype.mul=function(t){for(var e=t.clone(),n=this,r=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,n){"use strict";var r=n(70),i=n(32),o=n(10),s=n(268),a=r.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,n,r,o){s.BasePoint.call(this,t,"projective"),null===e&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,s),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,n,r){return this.point(t,e,n,r)},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=r.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var u=a.fromRed().isOdd();return(e&&!u||!e&&u)&&(a=a.redNeg()),this.point(t,a)},u.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),n=t.y.redSqr(),r=e.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(n)));return 0===r.cmp(i)},o(c,s.BasePoint),u.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},u.prototype.point=function(t,e,n,r){return new c(this,t,e,n,r)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=r.redAdd(e),s=o.redSub(n),a=r.redSub(e),u=i.redMul(s),c=o.redMul(a),h=i.redMul(a),l=s.redMul(o);return this.curve.point(u,c,l,h)},c.prototype._projDbl=function(){var t,e,n,r=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=(c=this.curve._mulA(i)).redAdd(o);if(this.zOne)t=r.redSub(i).redSub(o).redMul(s.redSub(this.curve.two)),e=s.redMul(c.redSub(o)),n=s.redSqr().redSub(s).redSub(s);else{var a=this.z.redSqr(),u=s.redSub(a).redISub(a);t=r.redSub(i).redISub(o).redMul(u),e=s.redMul(c.redSub(o)),n=s.redMul(u)}}else{var c=i.redAdd(o);a=this.curve._mulC(this.z).redSqr(),u=c.redSub(a).redSub(a);t=this.curve._mulC(r.redISub(c)).redMul(u),e=this.curve._mulC(c).redMul(i.redISub(o)),n=c.redMul(u)}return this.curve.point(t,e,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(e),s=i.redSub(r),a=i.redAdd(r),u=n.redAdd(e),c=o.redMul(s),h=a.redMul(u),l=o.redMul(u),f=s.redMul(a);return this.curve.point(c,h,f,l)},c.prototype._projAdd=function(t){var e,n,r=this.z.redMul(t.z),i=r.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),u=i.redSub(a),c=i.redAdd(a),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),l=r.redMul(u).redMul(h);return this.curve.twisted?(e=r.redMul(c).redMul(s.redSub(this.curve._mulA(o))),n=u.redMul(c)):(e=r.redMul(c).redMul(s.redSub(o)),n=this.curve._mulC(u).redMul(c)),this.curve.point(l,e,n)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!1)},c.prototype.jmulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var n=t.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(t,e,n){"use strict";e.sha1=n(2148),e.sha224=n(2149),e.sha256=n(763),e.sha384=n(2150),e.sha512=n(764)},function(t,e,n){"use strict";var r=n(85),i=n(200),o=n(762),s=r.rotl32,a=r.sum32,u=r.sum32_5,c=o.ft_1,h=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(f,h),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=s(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],h=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),m=u(s(i,5),c(p,o,h,f),d,n[r],l[p]);d=f,f=h,h=s(o,30),o=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],h),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(85),i=n(763);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(t,e,n){"use strict";var r=n(85),i=n(764);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(t,e,n){"use strict";var r=n(85),i=n(200),o=r.rotl32,s=r.sum32,a=r.sum32_3,u=r.sum32_4,c=i.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(h,c),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],h=this.h[4],y=n,b=r,x=i,w=c,E=h,_=0;_<80;_++){var S=s(o(u(n,l(_,r,i,c),t[p[_]+e],f(_)),v[_]),h);n=h,h=c,c=o(i,10),i=r,r=S,S=s(o(u(y,l(79-_,b,x,w),t[m[_]+e],d(_)),g[_]),E),y=E,E=w,w=o(x,10),x=b,b=S}S=a(this.h[1],i,w),this.h[1]=a(this.h[2],c,E),this.h[2]=a(this.h[3],h,y),this.h[3]=a(this.h[4],n,b),this.h[4]=a(this.h[0],r,x),this.h[0]=S},h.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,n){"use strict";var r=n(85),i=n(69);function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,n){"use strict";var r=n(32),i=n(2155),o=n(70),s=n(400),a=n(397),u=o.assert,c=n(2156),h=n(2157);function l(t){if(!(this instanceof l))return new l(t);"string"==typeof t&&(u(s.hasOwnProperty(t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=l,l.prototype.keyPair=function(t){return new c(this,t)},l.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},l.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},l.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var s=new r(e.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},l.prototype.sign=function(t,e,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new r(t,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),u=t.toArray("be",s),c=new i({hash:this.hash,entropy:a,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),l=this.n.sub(new r(1)),f=0;;f++){var d=o.k?o.k(f):new r(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(l)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),v=m.umod(this.n);if(0!==v.cmpn(0)){var g=d.invm(this.n).mul(v.mul(e.getPrivate()).iadd(t));if(0!==(g=g.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(v)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new h({r:v,s:g,recoveryParam:y})}}}}}},l.prototype.verify=function(t,e,n,i){t=this._truncateToN(new r(t,16)),n=this.keyFromPublic(n,i);var o=(e=new h(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(t).umod(this.n),l=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,n.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,n.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},l.prototype.recoverPubKey=function(t,e,n,i){u((3&n)===n,"The recovery param is more than two bits"),e=new h(e,i);var o=this.n,s=new r(t),a=e.r,c=e.s,l=1&n,f=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),l):this.curve.pointFromX(a,l);var d=e.r.invm(o),p=o.sub(s).mul(d).umod(o),m=c.mul(d).umod(o);return this.g.mulAdd(p,a,m)},l.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new h(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,n){"use strict";var r=n(401),i=n(760),o=n(69);function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),n=i.toArray(t.nonce,t.nonceEnc||"hex"),r=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}t.exports=s,s.prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,e,n,r){"string"!=typeof e&&(r=n,n=e,e=null),t=i.toArray(t,e),n=i.toArray(n,r),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},s.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=n,n=e,e=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,i.encode(s,e)}},function(t,e,n){"use strict";var r=n(32),i=n(70).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,n){return e instanceof o?e:new o(t,{pub:e,pubEnc:n})},o.fromPrivate=function(t,e,n){return e instanceof o?e:new o(t,{priv:e,privEnc:n})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,n){"use strict";var r=n(32),i=n(70),o=i.assert;function s(t,e){if(t instanceof s)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function u(t,e){var n=t[e.place++];if(!(128&n))return n;for(var r=15&n,i=0,o=0,s=e.place;o<r;o++,s++)i<<=8,i|=t[s];return e.place=s,i}function c(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function h(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}t.exports=s,s.prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new a;if(48!==t[n.place++])return!1;if(u(t,n)+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var o=u(t,n),s=t.slice(n.place,o+n.place);if(n.place+=o,2!==t[n.place++])return!1;var c=u(t,n);if(t.length!==c+n.place)return!1;var h=t.slice(n.place,c+n.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===h[0]&&128&h[1]&&(h=h.slice(1)),this.r=new r(s),this.s=new r(h),this.recoveryParam=null,!0},s.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=c(e),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];h(r,e.length),(r=r.concat(e)).push(2),h(r,n.length);var o=r.concat(n),s=[48];return h(s,o.length),s=s.concat(o),i.encode(s,t)}},function(t,e,n){"use strict";var r=n(401),i=n(400),o=n(70),s=o.assert,a=o.parseBytes,u=n(2159),c=n(2160);function h(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof h))return new h(t);t=i[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=h,h.prototype.sign=function(t,e){t=a(t);var n=this.keyFromSecret(e),r=this.hashInt(n.messagePrefix(),t),i=this.g.mul(r),o=this.encodePoint(i),s=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),u=r.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},h.prototype.verify=function(t,e,n){t=a(t),e=this.makeSignature(e);var r=this.keyFromPublic(n),i=this.hashInt(e.Rencoded(),r.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(r.pub().mul(i)).eq(o)},h.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},h.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},h.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},h.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},h.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,n=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),i=o.intFromLE(n);return this.curve.pointFromY(i,r)},h.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(t){return o.intFromLE(t)},h.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,n){"use strict";var r=n(70),i=r.assert,o=r.parseBytes,s=r.cachedProperty;function a(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),s(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),s(a,"privBytes",function(){var t=this.eddsa,e=this.hash(),n=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r}),s(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),s(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),s(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},a.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=a},function(t,e,n){"use strict";var r=n(32),i=n(70),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),s(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),s(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),s(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},function(t,e,n){"use strict";var r=n(201);e.certificate=n(2171);var i=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=i;var o=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=o;var s=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});e.PublicKey=s;var a=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});e.PrivateKey=u;var c=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=c;var h=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=h,e.DSAparam=r.define("DSAparam",function(){this.int()});var l=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=l;var f=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(t,e,n){var r=n(201),i=n(10);function o(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new o(t,e)},o.prototype._createNamed=function(t){var e;try{e=n(2163).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(t){e=function(t){this._initNamed(t)}}return i(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},o.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r.decoders[t])),this.decoders[t]},o.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},o.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r.encoders[t])),this.encoders[t]},o.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var o=Object_keys(n),s=r.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),function(n){t[n]=e[n]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}},function(t,e,n){var r=n(10);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,n){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){var e=this._reporterState,n=e.obj;return e.obj=t,n},i.prototype.error=function(t){var e,n=this._reporterState,r=t instanceof o;if(e=r?t:new o(n.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!n.options.partial)throw e;return r||n.errors.push(e),e},i.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,n){var r=n(202).Reporter,i=n(202).EncoderBuffer,o=n(202).DecoderBuffer,s=n(69),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(t,e){var n={};this._baseState=n,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=c;var h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var t=this._baseState,e={};h.forEach(function(n){e[n]=t[n]});var n=new this.constructor(e.parent);return n._baseState=e,n},c.prototype._wrap=function(){var t=this._baseState;u.forEach(function(e){this[e]=function(){var n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}},this)},c.prototype._init=function(t){var e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),s.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(t){var e=this._baseState,n=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==n.length&&(s(null===e.children),e.children=n,n.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(n){n==(0|n)&&(n|=0);var r=t[n];e[r]=n}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){c.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),a.forEach(function(t){c.prototype[t]=function(){var e=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(n),this}}),c.prototype.use=function(t){s(t);var e=this._baseState;return s(null===e.use),e.use=t,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(t){var e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},c.prototype.explicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},c.prototype.implicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},c.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},c.prototype.key=function(t){var e=this._baseState;return s(null===e.key),e.key=t,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(t){var e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},c.prototype.contains=function(t){var e=this._baseState;return s(null===e.use),e.contains=t,this},c.prototype._decode=function(t,e){var n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,e));var r,i=n.default,s=!0,a=null;if(null!==n.key&&(a=t.enterKey(n.key)),n.optional){var u=null;if(null!==n.explicit?u=n.explicit:null!==n.implicit?u=n.implicit:null!==n.tag&&(u=n.tag),null!==u||n.any){if(s=this._peekTag(t,u,n.any),t.isError(s))return s}else{var c=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),s=!0}catch(t){s=!1}t.restore(c)}}if(n.obj&&s&&(r=t.enterObject()),s){if(null!==n.explicit){var h=this._decodeTag(t,n.explicit);if(t.isError(h))return h;t=h}var l=t.offset;if(null===n.use&&null===n.choice){if(n.any)c=t.save();var f=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any);if(t.isError(f))return f;n.any?i=t.raw(c):t=f}if(e&&e.track&&null!==n.tag&&e.track(t.path(),l,t.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(t.path(),t.offset,t.length,"content"),i=n.any?i:null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),t.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(t,e)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var d=new o(i);i=this._getUse(n.contains,t._reporterState.obj)._decode(d,e)}}return n.obj&&s&&(i=t.leaveObject(r)),null===n.key||null===i&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,n.key,i),i},c.prototype._decodeGeneric=function(t,e,n){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],n):/str$/.test(t)?this._decodeStr(e,t,n):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],n):"objid"===t?this._decodeObjid(e,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(e,t,n):"null_"===t?this._decodeNull(e,n):"bool"===t?this._decodeBool(e,n):"objDesc"===t?this._decodeStr(e,t,n):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+t)},c.prototype._getUse=function(t,e){var n=this._baseState;return n.useDecoder=this._use(t,e),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(t,e){var n=this._baseState,r=null,i=!1;return Object.keys(n.choice).some(function(o){var s=t.save(),a=n.choice[o];try{var u=a._decode(t,e);if(t.isError(u))return!1;r={type:o,value:u},i=!0}catch(e){return t.restore(s),!1}return!0},this),i?r:t.error("Choice not matched")},c.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},c.prototype._encode=function(t,e,n){var r=this._baseState;if(null===r.default||r.default!==t){var i=this._encodeValue(t,e,n);if(void 0!==i&&!this._skipDefault(i,e,n))return i}},c.prototype._encodeValue=function(t,e,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new r);var o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}var s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)s=this._getUse(i.contains,n)._encode(t,e),a=!0;else if(i.children)s=i.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var r=e.enterKey(n._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var i=n._encode(t[n._baseState.key],e,t);return e.leaveKey(r),i},this).filter(function(t){return t}),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(n){var r=this._baseState;return this._getUse(r.args[0],t)._encode(n,e)},u))}else null!==i.use?o=this._getUse(i.use,n)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,h=null===i.implicit?"universal":"context";null===c?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(c,a,h,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(t,e){var n=this._baseState,r=n.choice[t.type];return r||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(t.value,e)},c.prototype._encodePrimitive=function(t,e){var n=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},c.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},c.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},function(t,e,n){var r=n(766);e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r._reverse(e.tag)},function(t,e,n){var r=e;r.der=n(767),r.pem=n(2168)},function(t,e,n){var r=n(10),i=n(46).Buffer,o=n(767);function s(t){o.call(this,t),this.enc="pem"}r(s,o),t.exports=s,s.prototype.decode=function(t,e){for(var n=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,u=-1,c=0;c<n.length;c++){var h=n[c].match(s);if(null!==h&&h[2]===r){if(-1!==a){if("END"!==h[1])break;u=c;break}if("BEGIN"!==h[1])break;a=c}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+r);var l=n.slice(a+1,u).join("");l.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new i(l,"base64");return o.prototype.decode.call(this,f,e)}},function(t,e,n){var r=e;r.der=n(768),r.pem=n(2170)},function(t,e,n){var r=n(10),i=n(768);function o(t){i.call(this,t),this.enc="pem"}r(o,i),t.exports=o,o.prototype.encode=function(t,e){for(var n=i.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"],o=0;o<n.length;o+=64)r.push(n.slice(o,o+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},function(t,e,n){"use strict";var r=n(201),i=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}),u=r.define("RelativeDistinguishedName",function(){this.setof(o)}),c=r.define("RDNSequence",function(){this.seqof(u)}),h=r.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),l=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),f=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),d=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(h),this.key("validity").use(l),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),p=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())});t.exports=p},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,n){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,s=n(267),a=n(395),u=n(11).Buffer;t.exports=function(t,e){var n,c=t.toString(),h=c.match(r);if(h){var l="aes"+h[1],f=u.from(h[2],"hex"),d=u.from(h[3].replace(/[\r\n]/g,""),"base64"),p=s(e,f.slice(0,8),parseInt(h[1],10)).key,m=[],v=a.createDecipheriv(l,p,f);m.push(v.update(d)),m.push(v.final()),n=u.concat(m)}else{var g=c.match(o);n=new u(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(i)[1],data:n}}},function(t,e,n){(function(e){var r=n(32),i=n(399).ec,o=n(269),s=n(769);function a(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,n,u,c,h){var l=o(u);if("ec"===l.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(t,e,n){var r=s[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var o=new i(r),a=n.data.subjectPrivateKey.data;return o.verify(e,t,a)}(t,n,l)}if("dsa"===l.type){if("dsa"!==c)throw new Error("wrong public key type");return function(t,e,n){var i=n.data.p,s=n.data.q,u=n.data.g,c=n.data.pub_key,h=o.signature.decode(t,"der"),l=h.s,f=h.r;a(l,s),a(f,s);var d=r.mont(i),p=l.invm(s);return 0===u.toRed(d).redPow(new r(e).mul(p).mod(s)).fromRed().mul(c.toRed(d).redPow(f.mul(p).mod(s)).fromRed()).mod(i).mod(s).cmp(f)}(t,n,l)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");n=e.concat([h,n]);for(var f=l.modulus.byteLength(),d=[1],p=0;n.length+d.length+2<f;)d.push(255),p++;d.push(0);for(var m=-1;++m<n.length;)d.push(n[m]);d=new e(d);var v=r.mont(l.modulus);t=(t=new r(t).toRed(v)).redPow(new r(l.publicExponent)),t=new e(t.fromRed().toArray());var g=p<8?1:0;for(f=Math.min(t.length,d.length),t.length!==d.length&&(g=1),m=-1;++m<f;)g|=t[m]^d[m];return 0===g}}).call(this,n(46).Buffer)},function(t,e,n){(function(e){var r=n(399),i=n(32);t.exports=function(t){return new s(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function a(t,n,r){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(r&&i.length<r){var o=new e(r-i.length);o.fill(0),i=e.concat([o,i])}return n?i.toString(n):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},s.prototype.computeSecret=function(t,n,r){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),a(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},s.prototype.getPublicKey=function(t,e){var n=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(n[n.length-1]%2?n[0]=7:n[0]=6),a(n,t)},s.prototype.getPrivateKey=function(t){return a(this.keys.getPrivate(),t)},s.prototype.setPublicKey=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.keys._importPublic(t),this},s.prototype.setPrivateKey=function(t,n){n=n||"utf8",e.isBuffer(t)||(t=new e(t,n));var r=new i(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,n(46).Buffer)},function(t,e,n){e.publicEncrypt=n(2177),e.privateDecrypt=n(2178),e.privateEncrypt=function(t,n){return e.publicEncrypt(t,n,!0)},e.publicDecrypt=function(t,n){return e.privateDecrypt(t,n,!0)}},function(t,e,n){var r=n(269),i=n(167),o=n(197),s=n(770),a=n(771),u=n(32),c=n(772),h=n(398),l=n(11).Buffer;t.exports=function(t,e,n){var f;f=t.padding?t.padding:n?1:4;var d,p=r(t);if(4===f)d=function(t,e){var n=t.modulus.byteLength(),r=e.length,c=o("sha1").update(l.alloc(0)).digest(),h=c.length,f=2*h;if(r>n-f-2)throw new Error("message too long");var d=l.alloc(n-r-f-2),p=n-h-1,m=i(h),v=a(l.concat([c,d,l.alloc(1,1),e],p),s(m,p)),g=a(m,s(v,h));return new u(l.concat([l.alloc(1),g,v],n))}(p,e);else if(1===f)d=function(t,e,n){var r,o=e.length,s=t.modulus.byteLength();if(o>s-11)throw new Error("message too long");r=n?l.alloc(s-o-3,255):function(t){var e,n=l.allocUnsafe(t),r=0,o=i(2*t),s=0;for(;r<t;)s===o.length&&(o=i(2*t),s=0),(e=o[s++])&&(n[r++]=e);return n}(s-o-3);return new u(l.concat([l.from([0,n?1:2]),r,l.alloc(1),e],s))}(p,e,n);else{if(3!==f)throw new Error("unknown padding");if((d=new u(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?h(d,p):c(d,p)}},function(t,e,n){var r=n(269),i=n(770),o=n(771),s=n(32),a=n(398),u=n(197),c=n(772),h=n(11).Buffer;t.exports=function(t,e,n){var l;l=t.padding?t.padding:n?1:4;var f,d=r(t),p=d.modulus.byteLength();if(e.length>p||new s(e).cmp(d.modulus)>=0)throw new Error("decryption error");f=n?c(new s(e),d):a(e,d);var m=h.alloc(p-f.length);if(f=h.concat([m,f],p),4===l)return function(t,e){var n=t.modulus.byteLength(),r=u("sha1").update(h.alloc(0)).digest(),s=r.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,s+1),c=e.slice(s+1),l=o(a,i(c,s)),f=o(c,i(l,n-s-1));if(function(t,e){t=h.from(t),e=h.from(e);var n=0,r=t.length;t.length!==e.length&&(n++,r=Math.min(t.length,e.length));var i=-1;for(;++i<r;)n+=t[i]^e[i];return n}(r,f.slice(0,s)))throw new Error("decryption error");var d=s;for(;0===f[d];)d++;if(1!==f[d++])throw new Error("decryption error");return f.slice(d)}(d,f);if(1===l)return function(t,e,n){var r=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var s=e.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,n);if(3===l)return f;throw new Error("unknown padding")}},function(t,e,n){"use strict";(function(t,r){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=n(11),s=n(167),a=o.Buffer,u=o.kMaxLength,c=t.crypto||t.msCrypto,h=Math.pow(2,32)-1;function l(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>h||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>h||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>u)throw new RangeError("buffer too small")}function d(t,e,n,i){if(r.browser){var o=t.buffer,a=new Uint8Array(o,e,n);return c.getRandomValues(a),i?void r.nextTick(function(){i(null,t)}):t}if(!i)return s(n).copy(t,e),t;s(n,function(n,r){if(n)return i(n);r.copy(t,e),i(null,t)})}c&&c.getRandomValues||!r.browser?(e.randomFill=function(e,n,r,i){if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)i=n,n=0,r=e.length;else if("function"==typeof r)i=r,r=e.length-n;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return l(n,e.length),f(r,n,e.length),d(e,n,r,i)},e.randomFillSync=function(e,n,r){void 0===n&&(n=0);if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');l(n,e.length),void 0===r&&(r=e.length-n);return f(r,n,e.length),d(e,n,r)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,n(50),n(81))},function(t,e){},function(t,e,n){var r=n(2182);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(203)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){var r=n(2185);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(203)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){},function(t,e,n){var r=n(2187);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(203)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){},function(t,e,n){var r=n(2189);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(203)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){},function(t,e,n){var r=n(2191);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(203)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(6),i=n.n(r),o=n(169),s=n.n(o),a=n(78),u=n.n(a);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"id",void 0),h(this,"components",[]),this.id=t.numOfEntities,t.numOfEntities+=1}var e,n,r;return e=t,(n=[{key:"addComponent",value:function(t){return this.getMultipleComponents(t.name).length>=t.getMaxAmount()?(new u.a({text:"Die Entität besitzt bereits die maximale Anzahl an Komponenten des Typs ".concat(t.name)}).show(),-1):(this.components.push(t),t.id)}},{key:"removeComponent",value:function(t){var e=this.components.indexOf(t);if(e>=0)return this.components.splice(e,1)[0]}},{key:"getComponent",value:function(t){return this.components.find(function(e){return e.name===t})}},{key:"getMultipleComponents",value:function(t){return this.components.filter(function(e){return e.name===t})}},{key:"hasComponents",value:function(){for(var t=this.components.map(function(t){return t.name}),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.every(function(e){return t.includes(e)})}},{key:"getAllComponents",value:function(){return this.components}},{key:"serialize",value:function(){return{id:this.id,components:this.components.map(function(t){return t.serialize()})}}}])&&c(e.prototype,n),r&&c(e,r),t}();function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}h(l,"numOfEntities",0);var d,p,m,v,g,y,b=new(function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={},(n="handlers")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n,r;return e=t,(n=[{key:"publish",value:function(t,e){this.handlers[t]&&this.handlers[t].forEach(function(t){t(e)})}},{key:"subscribe",value:function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)}}])&&f(e.prototype,n),r&&f(e,r),t}());function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.RECTANGLE="Rechteck",t.CIRCLE="Kreis"}(d||(d={})),function(t){t.SOLID_BODY="Körper",t.SENSOR="Sensor",t.RENDER="Rendering",t.MOTOR="Motor",t.SOURCE="Quelle",t.TRANSFORMABLE="Transform",t.CONNECTION="Verbindung"}(p||(p={})),function(t){t.LIGHT="Licht",t.BARRIER="Hindernis"}(m||(m={})),function(t){t.GAUSSIAN="GAUSSIAN",t.FLAT="FLAT"}(v||(v={})),function(t){t.EXCITATORY="EXCITATORY",t.INHIBITORY="INHIBITORY"}(g||(g={})),function(t){t.APPLY_FORCE="APPLY_FORCE",t.SENSOR_ACTIVE="SENSOR_ACTIVE",t.REACTION="REACTION",t.ENTITY_CREATED="ENTITY_CREATED",t.ENTITY_DESTROYED="ENTITY_DESTROYED",t.ENTITY_SELECTED="ENTITY_SELECTED",t.ENTITY_COMPONENT_ADDED="ENTITY_COMPONENT_ADDED",t.ENTITY_COMPONENT_REMOVED="ENTITY_COMPONENT_REMOVED",t.SOURCE_CREATED="SOURCE_CREATED",t.SENSOR_CREATED="SENSOR_CREATED",t.SOURCE_DESTROYED="SOURCE_DESTROYED",t.SENSOR_DESTROYED="SENSOR_DESTROYED",t.SIDEBAR_CLOSED="SIDEBAR_CLOSED"}(y||(y={}));var E=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"value",void 0),w(this,"createElement",void 0),w(this,"el",null),w(this,"changeHanlers",[]),this.value=e,this.createElement=n}var e,n,r;return e=t,(n=[{key:"get",value:function(){return this.value}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.value;this.value=t,this.el&&!e&&(this.el.value=t),t===n||e||this.changeHanlers.forEach(function(e){return e(t,n)})}},{key:"onChange",value:function(t){this.changeHanlers.push(t)}},{key:"removeHandler",value:function(t){var e=this.changeHanlers.findIndex(function(e){return e===t});e&&this.changeHanlers.splice(e,1)}},{key:"render",value:function(t,e){return this.el=this.createElement(t,this,e),this.el.init(),this.el}},{key:"renderedAs",value:function(t){return this.createElement===t}}])&&x(e.prototype,n),r&&x(e,r),t}();function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"name",void 0),S(this,"id",void 0),S(this,"maxAmount",1/0),S(this,"deletable",!0),S(this,"infoTip",""),this.id=t.count,t.count+=1}var e,n,r;return e=t,(n=[{key:"getMaxAmount",value:function(){return this.maxAmount}},{key:"isDeletable",value:function(){return this.deletable}},{key:"getInfo",value:function(){return this.infoTip}},{key:"serializeAttributes",value:function(){var t=this,e={};return Object.keys(this).forEach(function(n){t[n]instanceof E&&(e[n]=t[n].get())}),e}},{key:"serialize",value:function(){var t=this.serializeAttributes();return{id:this.id,name:this.name,attributes:t}}}])&&_(e.prototype,n),r&&_(e,r),t}();S(T,"count",0);var A=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},M=n(33),C=function(){return M.a.Date.now()},O=M.a.Symbol,N=Object.prototype,k=N.hasOwnProperty,R=N.toString,P=O?O.toStringTag:void 0;var I=function(t){var e=k.call(t,P),n=t[P];try{t[P]=void 0;var r=!0}catch(t){}var i=R.call(t);return r&&(e?t[P]=n:delete t[P]),i},D=Object.prototype.toString;var L=function(t){return D.call(t)},B="[object Null]",F="[object Undefined]",z=O?O.toStringTag:void 0;var j=function(t){return null==t?void 0===t?F:B:z&&z in Object(t)?I(t):L(t)};var U=function(t){return null!=t&&"object"==typeof t},Y="[object Symbol]";var W=function(t){return"symbol"==typeof t||U(t)&&j(t)==Y},X=NaN,G=/^\s+|\s+$/g,V=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,H=/^0o[0-7]+$/i,K=parseInt;var $=function(t){if("number"==typeof t)return t;if(W(t))return X;if(A(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=A(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(G,"");var n=q.test(t);return n||H.test(t)?K(t.slice(2),n?2:8):V.test(t)?X:+t},J="Expected a function",Z=Math.max,Q=Math.min;var tt=function(t,e,n){var r,i,o,s,a,u,c=0,h=!1,l=!1,f=!0;if("function"!=typeof t)throw new TypeError(J);function d(e){var n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n)}function p(t){var n=t-u;return void 0===u||n>=e||n<0||l&&t-c>=o}function m(){var t=C();if(p(t))return v(t);a=setTimeout(m,function(t){var n=e-(t-u);return l?Q(n,o-(t-c)):n}(t))}function v(t){return a=void 0,f&&r?d(t):(r=i=void 0,s)}function g(){var t=C(),n=p(t);if(r=arguments,i=this,u=t,n){if(void 0===a)return function(t){return c=t,a=setTimeout(m,e),h?d(t):s}(u);if(l)return clearTimeout(a),a=setTimeout(m,e),d(u)}return void 0===a&&(a=setTimeout(m,e)),s}return e=$(e)||0,A(n)&&(h=!!n.leading,o=(l="maxWait"in n)?Z($(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),g.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=u=i=a=void 0},g.flush=function(){return void 0===a?s:v(C())},g},et="Expected a function";var nt=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(et);return A(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),tt(t,e,{leading:r,maxWait:e,trailing:i})};var rt=function(){this.__data__=[],this.size=0};var it=function(t,e){return t===e||t!=t&&e!=e};var ot=function(t,e){for(var n=t.length;n--;)if(it(t[n][0],e))return n;return-1},st=Array.prototype.splice;var at=function(t){var e=this.__data__,n=ot(e,t);return!(n<0||(n==e.length-1?e.pop():st.call(e,n,1),--this.size,0))};var ut=function(t){var e=this.__data__,n=ot(e,t);return n<0?void 0:e[n][1]};var ct=function(t){return ot(this.__data__,t)>-1};var ht=function(t,e){var n=this.__data__,r=ot(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function lt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lt.prototype.clear=rt,lt.prototype.delete=at,lt.prototype.get=ut,lt.prototype.has=ct,lt.prototype.set=ht;var ft=lt;var dt=function(){this.__data__=new ft,this.size=0};var pt=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var mt=function(t){return this.__data__.get(t)};var vt=function(t){return this.__data__.has(t)},gt="[object AsyncFunction]",yt="[object Function]",bt="[object GeneratorFunction]",xt="[object Proxy]";var wt,Et=function(t){if(!A(t))return!1;var e=j(t);return e==yt||e==bt||e==gt||e==xt},_t=M.a["__core-js_shared__"],St=(wt=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var Tt=function(t){return!!St&&St in t},At=Function.prototype.toString;var Mt=function(t){if(null!=t){try{return At.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Ct=/^\[object .+?Constructor\]$/,Ot=Function.prototype,Nt=Object.prototype,kt=Ot.toString,Rt=Nt.hasOwnProperty,Pt=RegExp("^"+kt.call(Rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var It=function(t){return!(!A(t)||Tt(t))&&(Et(t)?Pt:Ct).test(Mt(t))};var Dt=function(t,e){return null==t?void 0:t[e]};var Lt=function(t,e){var n=Dt(t,e);return It(n)?n:void 0},Bt=Lt(M.a,"Map"),Ft=Lt(Object,"create");var zt=function(){this.__data__=Ft?Ft(null):{},this.size=0};var jt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ut="__lodash_hash_undefined__",Yt=Object.prototype.hasOwnProperty;var Wt=function(t){var e=this.__data__;if(Ft){var n=e[t];return n===Ut?void 0:n}return Yt.call(e,t)?e[t]:void 0},Xt=Object.prototype.hasOwnProperty;var Gt=function(t){var e=this.__data__;return Ft?void 0!==e[t]:Xt.call(e,t)},Vt="__lodash_hash_undefined__";var qt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ft&&void 0===e?Vt:e,this};function Ht(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ht.prototype.clear=zt,Ht.prototype.delete=jt,Ht.prototype.get=Wt,Ht.prototype.has=Gt,Ht.prototype.set=qt;var Kt=Ht;var $t=function(){this.size=0,this.__data__={hash:new Kt,map:new(Bt||ft),string:new Kt}};var Jt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Zt=function(t,e){var n=t.__data__;return Jt(e)?n["string"==typeof e?"string":"hash"]:n.map};var Qt=function(t){var e=Zt(this,t).delete(t);return this.size-=e?1:0,e};var te=function(t){return Zt(this,t).get(t)};var ee=function(t){return Zt(this,t).has(t)};var ne=function(t,e){var n=Zt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function re(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}re.prototype.clear=$t,re.prototype.delete=Qt,re.prototype.get=te,re.prototype.has=ee,re.prototype.set=ne;var ie=re,oe=200;var se=function(t,e){var n=this.__data__;if(n instanceof ft){var r=n.__data__;if(!Bt||r.length<oe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(t,e),this.size=n.size,this};function ae(t){var e=this.__data__=new ft(t);this.size=e.size}ae.prototype.clear=dt,ae.prototype.delete=pt,ae.prototype.get=mt,ae.prototype.has=vt,ae.prototype.set=se;var ue=ae,ce="__lodash_hash_undefined__";var he=function(t){return this.__data__.set(t,ce),this};var le=function(t){return this.__data__.has(t)};function fe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ie;++e<n;)this.add(t[e])}fe.prototype.add=fe.prototype.push=he,fe.prototype.has=le;var de=fe;var pe=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var me=function(t,e){return t.has(e)},ve=1,ge=2;var ye=function(t,e,n,r,i,o){var s=n&ve,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var h=-1,l=!0,f=n&ge?new de:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var d=t[h],p=e[h];if(r)var m=s?r(p,d,h,e,t,o):r(d,p,h,t,e,o);if(void 0!==m){if(m)continue;l=!1;break}if(f){if(!pe(e,function(t,e){if(!me(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){l=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){l=!1;break}}return o.delete(t),o.delete(e),l},be=M.a.Uint8Array;var xe=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var we=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Ee=1,_e=2,Se="[object Boolean]",Te="[object Date]",Ae="[object Error]",Me="[object Map]",Ce="[object Number]",Oe="[object RegExp]",Ne="[object Set]",ke="[object String]",Re="[object Symbol]",Pe="[object ArrayBuffer]",Ie="[object DataView]",De=O?O.prototype:void 0,Le=De?De.valueOf:void 0;var Be=function(t,e,n,r,i,o,s){switch(n){case Ie:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Pe:return!(t.byteLength!=e.byteLength||!o(new be(t),new be(e)));case Se:case Te:case Ce:return it(+t,+e);case Ae:return t.name==e.name&&t.message==e.message;case Oe:case ke:return t==e+"";case Me:var a=xe;case Ne:var u=r&Ee;if(a||(a=we),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=_e,s.set(t,e);var h=ye(a(t),a(e),r,i,o,s);return s.delete(t),h;case Re:if(Le)return Le.call(t)==Le.call(e)}return!1};var Fe=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},ze=Array.isArray;var je=function(t,e,n){var r=e(t);return ze(t)?r:Fe(r,n(t))};var Ue=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o};var Ye=function(){return[]},We=Object.prototype.propertyIsEnumerable,Xe=Object.getOwnPropertySymbols,Ge=Xe?function(t){return null==t?[]:(t=Object(t),Ue(Xe(t),function(e){return We.call(t,e)}))}:Ye;var Ve=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},qe="[object Arguments]";var He=function(t){return U(t)&&j(t)==qe},Ke=Object.prototype,$e=Ke.hasOwnProperty,Je=Ke.propertyIsEnumerable,Ze=He(function(){return arguments}())?He:function(t){return U(t)&&$e.call(t,"callee")&&!Je.call(t,"callee")},Qe=n(204),tn=9007199254740991,en=/^(?:0|[1-9]\d*)$/;var nn=function(t,e){var n=typeof t;return!!(e=null==e?tn:e)&&("number"==n||"symbol"!=n&&en.test(t))&&t>-1&&t%1==0&&t<e},rn=9007199254740991;var on=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=rn},sn={};sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object Boolean]"]=sn["[object DataView]"]=sn["[object Date]"]=sn["[object Error]"]=sn["[object Function]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object WeakMap]"]=!1;var an=function(t){return U(t)&&on(t.length)&&!!sn[j(t)]};var un=function(t){return function(e){return t(e)}},cn=n(402),hn=cn.a&&cn.a.isTypedArray,ln=hn?un(hn):an,fn=Object.prototype.hasOwnProperty;var dn=function(t,e){var n=ze(t),r=!n&&Ze(t),i=!n&&!r&&Object(Qe.a)(t),o=!n&&!r&&!i&&ln(t),s=n||r||i||o,a=s?Ve(t.length,String):[],u=a.length;for(var c in t)!e&&!fn.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||nn(c,u))||a.push(c);return a},pn=Object.prototype;var mn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pn)};var vn=function(t,e){return function(n){return t(e(n))}},gn=vn(Object.keys,Object),yn=Object.prototype.hasOwnProperty;var bn=function(t){if(!mn(t))return gn(t);var e=[];for(var n in Object(t))yn.call(t,n)&&"constructor"!=n&&e.push(n);return e};var xn=function(t){return null!=t&&on(t.length)&&!Et(t)};var wn=function(t){return xn(t)?dn(t):bn(t)};var En=function(t){return je(t,wn,Ge)},_n=1,Sn=Object.prototype.hasOwnProperty;var Tn=function(t,e,n,r,i,o){var s=n&_n,a=En(t),u=a.length;if(u!=En(e).length&&!s)return!1;for(var c=u;c--;){var h=a[c];if(!(s?h in e:Sn.call(e,h)))return!1}var l=o.get(t);if(l&&o.get(e))return l==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++c<u;){var p=t[h=a[c]],m=e[h];if(r)var v=s?r(m,p,h,e,t,o):r(p,m,h,t,e,o);if(!(void 0===v?p===m||i(p,m,n,r,o):v)){f=!1;break}d||(d="constructor"==h)}if(f&&!d){var g=t.constructor,y=e.constructor;g!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f},An=Lt(M.a,"DataView"),Mn=Lt(M.a,"Promise"),Cn=Lt(M.a,"Set"),On=Lt(M.a,"WeakMap"),Nn=Mt(An),kn=Mt(Bt),Rn=Mt(Mn),Pn=Mt(Cn),In=Mt(On),Dn=j;(An&&"[object DataView]"!=Dn(new An(new ArrayBuffer(1)))||Bt&&"[object Map]"!=Dn(new Bt)||Mn&&"[object Promise]"!=Dn(Mn.resolve())||Cn&&"[object Set]"!=Dn(new Cn)||On&&"[object WeakMap]"!=Dn(new On))&&(Dn=function(t){var e=j(t),n="[object Object]"==e?t.constructor:void 0,r=n?Mt(n):"";if(r)switch(r){case Nn:return"[object DataView]";case kn:return"[object Map]";case Rn:return"[object Promise]";case Pn:return"[object Set]";case In:return"[object WeakMap]"}return e});var Ln=Dn,Bn=1,Fn="[object Arguments]",zn="[object Array]",jn="[object Object]",Un=Object.prototype.hasOwnProperty;var Yn=function(t,e,n,r,i,o){var s=ze(t),a=ze(e),u=s?zn:Ln(t),c=a?zn:Ln(e),h=(u=u==Fn?jn:u)==jn,l=(c=c==Fn?jn:c)==jn,f=u==c;if(f&&Object(Qe.a)(t)){if(!Object(Qe.a)(e))return!1;s=!0,h=!1}if(f&&!h)return o||(o=new ue),s||ln(t)?ye(t,e,n,r,i,o):Be(t,e,u,n,r,i,o);if(!(n&Bn)){var d=h&&Un.call(t,"__wrapped__"),p=l&&Un.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,v=p?e.value():e;return o||(o=new ue),i(m,v,n,r,o)}}return!!f&&(o||(o=new ue),Tn(t,e,n,r,i,o))};var Wn=function t(e,n,r,i,o){return e===n||(null==e||null==n||!U(e)&&!U(n)?e!=e&&n!=n:Yn(e,n,r,i,t,o))};var Xn=function(t,e){return Wn(t,e)};function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qn(t){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jn=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==Gn(e)&&"function"!=typeof e?Hn(t):e}(this,qn(e).call(this,t,0,0)),$n(Hn(i),"m_value",void 0),$n(Hn(i),"attribute",void 0),$n(Hn(i),"updateValue",void 0),$n(Hn(i),"config",void 0),$n(Hn(i),"entity",void 0),$n(Hn(i),"showDefaultLabel",!0),i.m_value=n.get(),i.attribute=n,i.config=o,i.updateValue=nt(i.onUpdate,60),i.entity=r,t.add.existing(Hn(i)),i}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(e,i.a.GameObjects.DOMElement),n=e,o=[{key:"create",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n,r,i){return new t(n,r,i,e)}}}],(r=[{key:"init",value:function(){var t=document.createElement("div");if(t.className="base-input-container",this.showDefaultLabel&&this.config.label){var e=document.createElement("span");e.innerText=this.config.label,e.style.display="block",t.appendChild(e)}var n=this.create(this.entity);t.appendChild(n),this.setElement(t),this.onAfterAppend(t)}},{key:"onUpdate",value:function(){}},{key:"onAfterAppend",value:function(t){}},{key:"value",set:function(t){var e=this.m_value;this.m_value=t,this.updateValue(),Xn(e,t)||this.attribute.set(t)},get:function(){return this.m_value}}])&&Vn(n.prototype,r),o&&Vn(n,o),e}();function Zn(t){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tr(t){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function er(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nr(t,e){return(nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rr=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==Zn(e)&&"function"!=typeof e?er(t):e}(this,(t=tr(e)).call.apply(t,[this].concat(a))),r=er(n),o=null,(i="inputElement")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this,e=document.createElement("input"),n=void 0!==this.config.min?this.config.min:-1/0,r=void 0!==this.config.max?this.config.max:1/0;return e.type="number",e.step=this.config.step||"any",e.min=n,e.max=r,e.value=this.toString(this.value),e.addEventListener("change",function(){if(Number.isNaN(e.value))e.reportValidity();else{var i=Number(e.value);i>=n&&i<=r&&(t.value=Number(e.value)),e.reportValidity()}}),this.inputElement=e,e}},{key:"onUpdate",value:function(){this.inputElement&&(this.inputElement.value=this.toString(this.value))}},{key:"toString",value:function(t){return this.config.toFixed?t.toFixed(this.config.toFixed):t.toString()}}])&&Qn(n.prototype,r),i&&Qn(n,i),e}(),ir=n(774),or=n.n(ir);function sr(t){return(new DOMParser).parseFromString(t.trim(),"text/html")}function ar(t,e){return t.querySelector(e)}function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dr=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==ur(e)&&"function"!=typeof e?lr(t):e}(this,(t=hr(e)).call.apply(t,[this].concat(a))),r=lr(n),o={x:0,y:0},(i="position")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(t){var e,n,r,o,s,a=this,u=t.getComponent(p.SOLID_BODY),c={width:100,height:100},h=1,l=1;if(u){var f=u,d=(f.shape,f.size);e=d.get().width,n=d.get().height,r=100,o=100,s=Math.min(r/e,o/n),h=(c={width:e*s,height:n*s}).width/d.get().width,l=c.height/d.get().height}this.position.x=c.width/2-this.value.x*h,this.position.y=c.height/2-this.value.y*l;var m=sr('\n      <div class="position-background" style="width:'.concat(c.width,"px;height:").concat(c.height,'px;">\n        <div class="direction-indicator" style="left:').concat(c.width/2-5,'px"></div>\n        <div class="draggable position-indicator"></div>\n      </div>\n    ')),v=ar(m,".position-indicator");v.style.transform="translate(".concat(this.position.x,"px, ").concat(this.position.y,"px)");return or()(v).draggable({}).on("dragmove",nt(function(t){var e=t.target,n=t.dx,r=t.dy;a.position.x=i.a.Math.Clamp(a.position.x+n,0,c.width),a.position.y=i.a.Math.Clamp(a.position.y+r,0,c.height);var o=10*Math.round(a.position.x/10/h)*h,s=10*Math.round(a.position.y/10/l)*l;o=i.a.Math.Clamp(Math.round(o),0,c.width),s=i.a.Math.Clamp(Math.round(s),0,c.height),e.style.transform="translate(".concat(o,"px, ").concat(s,"px)")})).on("dragend",function(){var t=Math.floor(a.position.x/h),e=Math.floor(a.position.y/l);a.value={x:c.width/h/2-t,y:c.height/l/2-e}}),m.body.childNodes[0]}}])&&cr(n.prototype,r),o&&cr(n,o),e}();function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t,e){return(yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var br=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==pr(e)&&"function"!=typeof e?gr(t):e}(this,(t=vr(e)).call.apply(t,[this].concat(a))),r=gr(n),o=null,(i="inputElement")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this,e=document.createElement("input");return e.value=this.value,e.addEventListener("change",function(){t.value=e.value}),this.inputElement=e,e}},{key:"onUpdate",value:function(){this.inputElement&&(this.inputElement.value=this.value.toString())}}])&&mr(n.prototype,r),i&&mr(n,i),e}();function xr(t){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sr(t,e){return(Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tr=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==xr(e)&&"function"!=typeof e?_r(t):e}(this,(t=Er(e)).call.apply(t,[this].concat(a))),r=_r(n),o=!1,(i="showDefaultLabel")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=document.createElement("div");return t.style.minHeight="0px",t.style.height="0px",t.style.display="none",t}}])&&wr(n.prototype,r),i&&wr(n,i),e}();function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mr(t){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Or(t,e){return(Or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Ar(e)&&"function"!=typeof e?Cr(t):e}(this,Mr(e).call(this)),Nr(Cr(n),"name",p.MOTOR),Nr(Cr(n),"position",void 0),Nr(Cr(n),"defaultSpeed",void 0),Nr(Cr(n),"maxSpeed",void 0),Nr(Cr(n),"throttle",void 0),Nr(Cr(n),"visualThrottle",void 0),n.position=new E(t.position,dr.create({label:"Position"})),n.maxSpeed=new E(t.maxSpeed||50,rr.create({label:"Maximalgeschwindigkeit",min:1,max:50})),n.defaultSpeed=new E(t.defaultSpeed||0,rr.create({label:"Mindestgeschwindigkeit",min:0,max:n.maxSpeed.get()})),n.throttle=new E(0,Tr.create()),n.visualThrottle=new E("0",br.create({label:"Aktuelle Geschwindigkeit"})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Or(t,e)}(e,T),e}();function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ir(t,e){return!e||"object"!==Rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lr(t,e){return(Lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Br=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ir(this,Dr(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this,e=document.createElement("select");if(!this.config.options)throw new Error('Die Konfiguration "options" muss für die Klasse "SelectInput" definiert sein.');var n=this.config.options;Object.keys(n).forEach(function(t){var r=document.createElement("option"),i=Number.isInteger(n[t]);r.value=i?"+".concat(n[t]):n[t],r.innerHTML=t,e.appendChild(r)});var r=Number.isInteger(this.value);return e.value=r?"+".concat(this.value):this.value,e.addEventListener("change",function(){"+"===e.value.charAt(0)?t.value=Number(e.value.substr(1)):t.value=e.value}),e}},{key:"onUpdate",value:function(){}}])&&Pr(n.prototype,r),i&&Pr(n,i),e}();function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xr=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?Ur(t):e}(this,(t=jr(e)).call.apply(t,[this].concat(i))),Wr(Ur(n),"inputElement",null),Wr(Ur(n),"showDefaultLabel",!1),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this,e=sr('\n      <label>\n        <input type="checkbox">\n        <span class="checkable">'.concat(this.config.label,"</span>\n      </label>\n    ")),n=ar(e,"input");return n.checked=this.value,n.addEventListener("change",function(){t.value=n.checked}),this.inputElement=n,e.body.childNodes[0]}},{key:"onUpdate",value:function(){this.inputElement&&(this.inputElement.checked=this.value)}}])&&zr(n.prototype,r),i&&zr(n,i),e}();function Gr(t){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $r=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==Gr(e)&&"function"!=typeof e?Hr(t):e}(this,(t=qr(e)).call.apply(t,[this].concat(a))),r=Hr(n),o=!1,(i="showDefaultLabel")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this,e=void 0!==this.config.min?this.config.min:-1/0,n=void 0!==this.config.max?this.config.max:1/0,r=sr('\n      <div>\n        <label>Breite</label>\n        <input name="width" type="number" min="'.concat(e,'" max="').concat(n,'"></input>\n        <label>Höhe</label>\n        <input name="height" type="number" min="').concat(e,'" max="').concat(n,'"></input>\n      </div>\n    ')),i=ar(r,'input[name="width"]'),o=ar(r,'input[name="height"]');return i.value=String(this.value.width),o.value=String(this.value.height),i.addEventListener("change",function(){var r=Number(i.value);r>=e&&r<=n&&(t.value={width:Number(i.value),height:Number(o.value)}),i.reportValidity()}),o.addEventListener("change",function(){var r=Number(o.value);r>=e&&r<=n&&(t.value={width:Number(i.value),height:Number(o.value)}),o.reportValidity()}),r.body.childNodes[0]}}])&&Vr(n.prototype,r),i&&Vr(n,i),e}();function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ti(t,e){return(ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ni=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Jr(e)&&"function"!=typeof e?Qr(t):e}(this,Zr(e).call(this)),ei(Qr(n),"name",p.SOLID_BODY),ei(Qr(n),"size",void 0),ei(Qr(n),"shape",void 0),ei(Qr(n),"isStatic",void 0),ei(Qr(n),"maxAmount",1),"number"==typeof t.size?n.size=new E({width:t.size,height:t.size},$r.create({label:"Größe",min:20,max:500})):n.size=new E(t.size||{width:50,height:50},$r.create({label:"Größe",min:20,max:500})),n.shape=new E(t.shape||d.RECTANGLE,Br.create({label:"Form",options:d})),n.isStatic=new E(t.isStatic||!1,Xr.create({label:"Statisch"})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ti(t,e)}(e,T),e}();function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oi(t){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ai(t,e){return(ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ci=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?si(t):e}(this,(t=oi(e)).call.apply(t,[this].concat(i))),ui(si(n),"spanX",null),ui(si(n),"spanY",null),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ai(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this.value.x.toFixed(2),e=this.value.y.toFixed(2),n=sr('\n      <div>\n        X: <span name="pos-x">'.concat(t,'</span>, Y: <span name="pos-y">').concat(e,"</span>\n      </div>\n    ")),r=ar(n,'span[name="pos-x"]'),i=ar(n,'span[name="pos-y"]');return this.spanX=r,this.spanY=i,n.body.childNodes[0]}},{key:"onUpdate",value:function(){this.spanX&&(this.spanX.innerHTML=this.value.x.toFixed(2)),this.spanY&&(this.spanY.innerHTML=this.value.y.toFixed(2))}}])&&ii(n.prototype,r),i&&ii(n,i),e}();function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function di(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vi=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(t,e){return!e||"object"!==hi(e)&&"function"!=typeof e?di(t):e}(this,(t=fi(e)).call.apply(t,[this].concat(i))),mi(di(n),"inputElement",null),mi(di(n),"canvasElement",null),mi(di(n),"size",50),mi(di(n),"radius",n.size/2),mi(di(n),"showInDegree",!0),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,Jn),n=e,(r=[{key:"create",value:function(){var t=this,e=document.createElement("div"),n=this.createCanvas();this.canvasElement=n,this.addEvents(n);var r=document.createElement("input");return r.value=this.value,r.addEventListener("change",function(){var e=(Number(r.value)+180)%360*Math.PI/180;t.value=e,r.blur()}),this.inputElement=r,this.onUpdate(),e.append(n,r),e}},{key:"draw",value:function(){var t=this.canvasElement.getContext("2d"),e=this.radius,n=t.lineWidth,r=this.value+Math.PI/2,i=e+e*Math.cos(r),o=e+e*Math.sin(r);t.clearRect(0,0,this.size,this.size),t.beginPath(),t.arc(e,e,e-n/2,0,2*Math.PI),t.moveTo(e,e),t.lineTo(i,o),t.fill(),t.stroke()}},{key:"onUpdate",value:function(){if(document.activeElement!==this.inputElement){var t=(Math.round(180*this.value/Math.PI)+180)%360;this.inputElement.value=t.toFixed(2)}this.draw()}},{key:"createCanvas",value:function(){var t=document.createElement("canvas");t.width=this.size,t.height=this.size,t.style.cursor="pointer";var e=t.getContext("2d");return e&&(e.fillStyle="transparent",e.strokeStyle="black",e.lineWidth=2),t}},{key:"addEvents",value:function(t){var e=this,n=!1,r=!1;t.addEventListener("mousedown",function(t){t.button||(r=!0,n=!0,e.setByEvent(t))}),t.addEventListener("mousemove",function(t){n&&r&&e.setByEvent(t)}),t.addEventListener("mouseup",function(){n=!1}),t.addEventListener("mouseleave",function(){r=!1}),t.addEventListener("mouseenter",function(){r=!0})}},{key:"setByEvent",value:function(t){var e=t.offsetX-this.radius,n=t.offsetY-this.radius,r=Math.atan2(n,e);this.value=r-Math.PI/2,this.draw()}}])&&li(n.prototype,r),i&&li(n,i),e}();function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xi(t,e){return(xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ei=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==gi(e)&&"function"!=typeof e?bi(t):e}(this,yi(e).call(this)),wi(bi(n),"name",p.TRANSFORMABLE),wi(bi(n),"position",void 0),wi(bi(n),"angle",void 0),wi(bi(n),"maxAmount",1),wi(bi(n),"deletable",!1),n.position=new E(t.position||{x:0,y:0},ci.create({label:"Position"})),n.angle=new E(t.angle||0,vi.create({label:"Rotation"})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xi(t,e)}(e,T),e}(),_i=n(775),Si=n.n(_i),Ti=n(776),Ai=n.n(Ti),Mi=n(777),Ci=n.n(Mi),Oi=n(778),Ni=n.n(Oi),ki=n(779),Ri=n.n(ki),Pi=n(780),Ii=n.n(Pi),Di=n(781),Li=n.n(Di),Bi=n(782),Fi=n.n(Bi);function zi(t){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ui(t,e){return!e||"object"!==zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yi(t){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ui(this,Yi(e).call(this,{key:"LoadingScene"}))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(e,i.a.Scene),n=e,o=[{key:"userOptions",value:function(){return{Vehikel:"vehicle",Quelle:"prefab-source",Blank:"prefab-blank"}}},{key:"setNotificationsOptions",value:function(){u.a.overrideDefaults({layout:"topCenter",theme:"relax",timeout:1500,progressBar:!1,animation:{open:"animated fadeInDown faster",close:"animated fadeOut faster"}})}}],(r=[{key:"preload",value:function(){this.createProgress(),this.load.image("vehicle",Ai.a),this.load.image("prefab-2a",Ci.a),this.load.image("prefab-2b",Ni.a),this.load.image("prefab-3a",Ri.a),this.load.image("prefab-3b",Ii.a),this.load.image("prefab-source",Li.a),this.load.image("prefab-blank",Fi.a),this.load.spritesheet("button",Si.a,{frameWidth:50,frameHeight:48})}},{key:"create",value:function(){e.setNotificationsOptions(),this.scene.start("MainScene")}},{key:"createProgress",value:function(){var t=this.add.graphics();this.load.on("progress",function(e){t.clear(),t.fillStyle(16777215,1),t.fillRect(0,270,800*e,60)}),this.load.on("complete",function(){t.destroy()})}}])&&ji(n.prototype,r),o&&ji(n,o),e}();function Gi(t){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){$i(t,e,n[e])})}return t}function qi(t){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ki(t,e){return(Ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ji=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Gi(e)&&"function"!=typeof e?Hi(t):e}(this,qi(e).call(this)),$i(Hi(n),"name",p.RENDER),$i(Hi(n),"asset",void 0),$i(Hi(n),"size",void 0),$i(Hi(n),"blendMode",void 0),$i(Hi(n),"maxAmount",1),$i(Hi(n),"deletable",!1),$i(Hi(n),"infoTip","Achtung! Diese Komponente bestimmt nur die visuelle Darstellung und ist unabhängig von der Komponente für einen festen Körper."),n.asset=new E(t.asset,Br.create({label:"Anzeige",options:Vi({},Xi.userOptions(),{"Farbe: Grau":13421772,"Farbe: Rot":13713746,"Farbe: Grün":5744185,"Farbe: Blau":1791363})})),n.blendMode=new E(t.blendMode||i.a.BlendModes.NORMAL,Tr.create()),"number"==typeof t.size?n.size=new E({width:t.size,height:0},$r.create({label:"Größe",min:0,max:4e3})):n.size=new E(t.size||{width:50,height:50},$r.create({label:"Größe",min:0,max:4e3})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ki(t,e)}(e,T),e}();function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qi(t){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function to(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eo(t,e){return(eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function no(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ro=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Zi(e)&&"function"!=typeof e?to(t):e}(this,Qi(e).call(this)),no(to(n),"name",p.SENSOR),no(to(n),"range",void 0),no(to(n),"angle",void 0),no(to(n),"position",void 0),no(to(n),"activation",void 0),no(to(n),"reactsTo",void 0),n.position=new E(t.position,dr.create({label:"Position"})),n.range=new E(t.range,rr.create({label:"Reichweite"})),n.angle=new E(t.angle,rr.create({label:"Öffnungswinkel"})),n.reactsTo=new E(t.reactsTo||m.LIGHT,Br.create({label:"Reagiert auf",options:m})),n.activation=new E(0,rr.create({label:"Grad der Aktivierung",toFixed:4})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eo(t,e)}(e,T),e}(),io=n(36);function oo(t){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ho=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==oo(e)&&"function"!=typeof e?uo(t):e}(this,(t=ao(e)).call.apply(t,[this].concat(a))),r=uo(n),o=!1,(i="showDefaultLabel")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&co(t,e)}(e,Jn),n=e,i=[{key:"line",value:function(t,e){var n=t.offsetLeft+7,r=t.offsetTop+7,i=e.offsetLeft+7,o=e.offsetTop+7,s=Math.sqrt((n-i)*(n-i)+(r-o)*(r-o)),a=180*Math.atan2(o-r,i-n)/Math.PI;return{width:s,transform:"rotate(".concat(a,"deg)"),offsetLeft:n,offsetTop:r}}}],(r=[{key:"create",value:function(t){var e=this.value,n=e.inputs.map(function(t){return'<div\n        data-input-id="'.concat(t,'"\n        class="connection-draggable connection-input-indicator tooltip-top"\n        data-tooltip="').concat(t,'"\n      ></div>')}),r=e.outputs.map(function(t){return'<div\n        data-output-id="'.concat(t,'"\n        class="connection-dropzone connection-output-indicator tooltip-top"\n        data-tooltip="').concat(t,'"\n      ></div>')}),i=[];return e.inputs.forEach(function(t){e.outputs.forEach(function(e){i.push('<div\n        data-connection-from="'.concat(t,'"\n        data-connection-to="').concat(e,'"\n        class="connection-line"\n      ></div>'))})}),sr('\n      <div class="connection-network-background">\n        <div>'.concat(i.join(""),'</div>\n        <div class="text-center">Sensoren</div>\n        <div class="connection-inputs">').concat(n.join(""),'</div>\n        <div class="connection-outputs">').concat(r.join(""),'</div>\n        <div class="text-center">Motoren</div>\n      </div>\n    ')).body.childNodes[0]}},{key:"onAfterAppend",value:function(t){var n=this;t.querySelectorAll(".connection-line").forEach(function(r){var i=r.dataset.connectionFrom,o=r.dataset.connectionTo,s=ar(t,'[data-input-id="'.concat(i,'"')),a=ar(t,'[data-output-id="'.concat(o,'"')),u=n.value.inputs.indexOf(Number(i)),c=n.value.outputs.indexOf(Number(o)),h=e.line(s,a),l=n.value.weights[u][c];r.style.width="".concat(h.width,"px"),r.style.left="".concat(h.offsetLeft,"px"),r.style.top="".concat(h.offsetTop,"px"),r.style.transform=h.transform,r.style.opacity=String(Math.max(Math.abs(l),.1)),r.style.backgroundColor=Math.sign(l)>=0?"black":"red",r.addEventListener("click",function(t){n.promptForValue("Trage hier das Gewicht zwischen -1 und 1 ein (".concat(i," -> ").concat(o,")"),r,u,c)})})}},{key:"promptForValue",value:function(t,e,n,r){var i=this;s()({text:t,buttons:{cancel:{text:"Abbrechen",value:"__EXIT__",visible:!0},confirm:{text:"Übernehmen"}},content:{element:"input",attributes:{placeholder:"Bitte tippe hier das Gewicht ein.",value:this.value.weights[n][r]}}}).then(function(o){if("__EXIT__"!==o&&""!==o)if(!o||Number.isNaN(Number(o))||Number(o)<-1||Number(o)>1)s()("Der Wert muss zwischen -1 und 1 liegen. ").then(function(){i.promptForValue(t,e,n,r)});else{var a=Number(o);i.value.weights[n][r]=a,e.style.opacity=String(Math.max(Math.abs(a),.1)),e.style.backgroundColor=Math.sign(a)>=0?"black":"red"}})}}])&&so(n.prototype,r),i&&so(n,i),e}();function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function po(t){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vo(t,e){return(vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function go(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yo=function(t){function e(t){var n,r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==lo(e)&&"function"!=typeof e?mo(t):e}(this,po(e).call(this)),go(mo(n),"name",p.CONNECTION),go(mo(n),"network",void 0),go(mo(n),"maxAmount",1),void 0===t.weights){var i=Object(io.matrix)(Object(io.ones)(t.inputIds.length,t.outputIds.length).toArray());r=2!==i.size().length?[[]]:i.toArray()}else r=t.weights;return n.network=new E({inputs:t.inputIds,outputs:t.outputIds,weights:r},ho.create({label:"Verbindungen"})),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}(e,T),n=e,(r=[{key:"serializeAttributes",value:function(){return{inputIds:this.network.get().inputs,outputIds:this.network.get().outputs,weights:this.network.get().weights}}}])&&fo(n.prototype,r),i&&fo(n,i),e}();function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eo(t,e){return(Eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var So=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==bo(e)&&"function"!=typeof e?wo(t):e}(this,xo(e).call(this)),_o(wo(n),"name",p.SOURCE),_o(wo(n),"range",void 0),_o(wo(n),"substance",void 0),_o(wo(n),"emissionType",void 0),n.range=new E(t.range,rr.create({label:"Reichweite"})),n.substance=new E(t.substance||m.LIGHT,Br.create({label:"Substanz",options:m})),n.emissionType=new E(t.emissionType||v.GAUSSIAN,Br.create({label:"Charakteristik",options:v})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eo(t,e)}(e,T),e}();function To(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ao=new(function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={},(n="entities")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n,r;return e=t,r=[{key:"getComponent",value:function(t,e){switch(t){case p.TRANSFORMABLE:return new Ei(e);case p.SOURCE:return new So(e);case p.SOLID_BODY:return new ni(e);case p.RENDER:return new Ji(e);case p.MOTOR:return new kr(e);case p.SENSOR:return new ro(e);case p.CONNECTION:return new yo(e);default:return}}}],(n=[{key:"addExistingEntity",value:function(t){this.entities[t.id]=t,b.publish(y.ENTITY_CREATED,t)}},{key:"createEntity",value:function(){for(var t=new l,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){t.addComponent(e)}),this.entities[t.id]=t,b.publish(y.ENTITY_CREATED,t),t}},{key:"destroyEntity",value:function(t){var e=this.entities[t];b.publish(y.ENTITY_DESTROYED,e),delete this.entities[t]}},{key:"addComponent",value:function(t,e){var n=this.entities[t];if(n){if(-1!==n.addComponent(e))return b.publish(y.ENTITY_COMPONENT_ADDED,{entity:n,component:e}),n}else new u.a({text:"Entität mit ID ".concat(t," konnte nicht gefunden werden")}).show()}},{key:"removeComponent",value:function(t,e){var n=this.entities[t];n?(n.removeComponent(e),b.publish(y.ENTITY_COMPONENT_REMOVED,{entity:n,component:e})):new u.a({text:"Entität mit ID ".concat(t," konnte nicht gefunden werden")}).show()}},{key:"getEntities",value:function(){return Object.values(this.entities)}},{key:"loadEntities",value:function(e){var n=this;e.forEach(function(e){var r=new l;e.components.forEach(function(e){var n=e.name,i=e.id,o=e.attributes,s=t.getComponent(n,o);s&&(s.id=i,r.addComponent(s))}),n.addExistingEntity(r)})}}])&&To(e.prototype,n),r&&To(e,r),t}());function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oo(t){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function No(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ro=function(t){function e(t,n,r,i,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=function(t,e){return!e||"object"!==Mo(e)&&"function"!=typeof e?No(t):e}(this,Oo(e).call(this,t,n,r,"button",i)),t.add.existing(No(s)),s.setInteractive({useHandCursor:!0}),s.on("pointerover",function(){s.setTint(16448250)}),s.on("pointerout",function(){s.setTint(16777215)}),s.on("pointerdown",function(){s.handleClick(o)}),s}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)}(e,i.a.GameObjects.Sprite),n=e,(r=[{key:"handleClick",value:function(t){t(this)}},{key:"getWidth",value:function(){return this.width}}])&&Co(n.prototype,r),o&&Co(n,o),e}();function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Do(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lo(t,e,n){return(Lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bo(t){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fo(t,e){return(Fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jo=function(t){function e(t,n,r){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==Po(e)&&"function"!=typeof e?Do(t):e}(this,Bo(e).call(this,t)),zo(Do(i),"scrollOffset",0),zo(Do(i),"scrollbar",void 0),zo(Do(i),"visibleWidth",void 0),zo(Do(i),"visibleHeight",void 0),zo(Do(i),"scrollHandler",void 0),i.visibleWidth=n,i.visibleHeight=r,i.scrollbar=t.add.rectangle(0,0,10,10,14211288),i.scrollbar.setInteractive({draggable:!0}),i.scrollbar.setOrigin(1,0),i.scrollbar.on("drag",function(t,e,n){var r=n-i.scrollbar.y;i.scroll(r)}),i.scrollbar.setDepth(999),t.add.existing(Do(i)),t.children.bringToTop(Do(i)),t.children.bringToTop(i.scrollbar);var o=!1,s=0;return i.scrollHandler=function(t){s+=100===t.deltaY||-100===t.deltaY?3*Math.sign(t.deltaY):t.deltaY,o||(window.requestAnimationFrame(function(){i.getBounds().contains(t.x,t.y)&&(i.scroll(20*s),s=0),o=!1}),o=!0)},window.addEventListener("wheel",i.scrollHandler),i}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fo(t,e)}(e,i.a.GameObjects.Container),n=e,(r=[{key:"scroll",value:function(t){if(!(this.height<=this.visibleHeight)){var n=t;this.scrollOffset+n<0?n=-this.scrollOffset:this.scrollOffset+this.scrollbar.height+n>this.visibleHeight&&(n=this.visibleHeight-this.scrollOffset-this.scrollbar.height),this.scrollOffset=i.a.Math.Clamp(this.scrollOffset+n,0,this.visibleHeight),this.scrollbar.setPosition(this.scrollbar.x,i.a.Math.Clamp(this.scrollbar.y+n,0,this.visibleHeight-this.scrollbar.height));var r=this.y-n/(this.visibleHeight-this.scrollbar.height)*(this.height-this.visibleHeight);Lo(Bo(e.prototype),"setPosition",this).call(this,this.x,r)}}},{key:"setHeight",value:function(t){if(this.height=t,t>this.visibleHeight){var e=this.visibleHeight/t*this.visibleHeight;this.scrollbar.input.hitArea.setSize(this.scrollbar.width,e),this.scrollbar.height=e,this.scrollbar.setVisible(!0)}else this.scrollbar.setVisible(!1)}},{key:"reset",value:function(){this.height=0,this.scrollbar.input.hitArea.setSize(this.scrollbar.width,1),this.scrollbar.height=1,this.scrollbar.setVisible(!1),this.scrollOffset=0,this.setPosition(this.x,0)}},{key:"getBounds",value:function(){return new i.a.Geom.Rectangle(this.x,this.y,this.visibleWidth,this.height)}},{key:"setPosition",value:function(t,n){var r=this.y;return Lo(Bo(e.prototype),"setPosition",this).call(this,t,n),this.scrollbar&&this.scrollbar.setPosition(this.x+this.visibleWidth,this.scrollbar.y+n-r),this}},{key:"preDestroy",value:function(){window.removeEventListener("wheel",this.scrollHandler),Lo(Bo(e.prototype),"preDestroy",this).call(this),this.scrollbar.destroy()}}])&&Io(n.prototype,r),o&&Io(n,o),e}();function Uo(t){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Uo(e)&&"function"!=typeof e?Xo(t):e}(this,Wo(e).call(this,{key:t})),Vo(Xo(n),"container",null),Vo(Xo(n),"background",null),Vo(Xo(n),"closeButton",null),Vo(Xo(n),"key",void 0),Vo(Xo(n),"handler",void 0),n.key=t,n.handler=n.handleResize.bind(Xo(n)),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Go(t,e)}(e,i.a.Scene),n=e,o=[{key:"getWidth",value:function(){return 256}}],(r=[{key:"create",value:function(){var t=this;this.scale.on("resize",this.handler),this.background=this.add.rectangle(0,0,e.getWidth(),this.cameras.main.displayHeight,16316664),this.background.setOrigin(0),this.background.setPosition(this.cameras.main.displayWidth,0),this.background.setDepth(0);var n=new jo(this,e.getWidth(),this.cameras.main.displayHeight);n.setPosition(this.cameras.main.displayWidth,0),this.container=n,this.container.setDepth(1),this.closeButton=new Ro(this,this.cameras.main.displayWidth-35,35,19,function(){t.tweens.add({targets:[t.container,t.background],x:"+=".concat(e.getWidth()),y:0,duration:100,ease:"Expo.easeInOut",onComplete:function(){return t.close()}})});for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];this.onCreate.apply(this,[n].concat(i)),this.tweens.add({targets:[this.container,this.background,this.closeButton],x:"-=".concat(e.getWidth()),duration:200,ease:"Expo.easeInOut",onComplete:function(){n.setPosition(n.x,n.y)}})}},{key:"close",value:function(){b.publish(y.SIDEBAR_CLOSED,null),this.scale.off("resize",this.handler),this.scene.stop(this.key)}},{key:"pack",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.container)for(var r=n?15:0,i=0,o=0;o<t.length;o+=1){var s=t[o];if(s){var a=s.height;s.setPosition(e.getWidth()/2,this.container.height+a/2+r),this.container.add(s),s.getData("ignoreHeight")?s.setPosition(e.getWidth()/2,this.container.height-i/2):(this.container.setHeight(this.container.height+a+r),i=a)}}}},{key:"handleResize",value:function(t){this.container&&this.container.setPosition(t.width-e.getWidth(),this.container.y),this.closeButton&&this.closeButton.setPosition(t.width-e.getWidth()-35,35),this.background&&(this.background.setPosition(t.width-e.getWidth(),0),this.background.setSize(e.getWidth(),t.height))}}])&&Yo(n.prototype,r),o&&Yo(n,o),e}();function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ko(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $o(t,e){return!e||"object"!==Ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jo(t){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zo(t,e){return(Zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$o(this,Jo(e).call(this,"EditorScene"))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zo(t,e)}(e,qo),n=e,(r=[{key:"onCreate",value:function(t){var e=this.add.image(0,0,"prefab-blank").setFlipY(!0),n=this.add.image(0,0,"prefab-source"),r=this.add.image(0,0,"prefab-2a").setFlipY(!0),i=this.add.image(0,0,"prefab-2b").setFlipY(!0),o=this.add.image(0,0,"prefab-3a").setFlipY(!0),s=this.add.image(0,0,"prefab-3b").setFlipY(!0);this.makeInteractable(e,function(t){Ao.createEntity(new Ei({position:t,angle:Math.PI}),new Ji({asset:"prefab-blank",size:100}))}),this.makeInteractable(n,function(t){Ao.createEntity(new Ei({position:t}),new So({range:100}),new Ji({asset:"prefab-source",size:100}))}),this.makeInteractable(r,function(t){var e=new l,n=new Ei({position:t,angle:Math.PI});e.addComponent(n),e.addComponent(new ni({size:{width:100,height:150}})),e.addComponent(new Ji({asset:"vehicle",size:100}));var r=e.addComponent(new kr({position:{x:-50,y:0},maxSpeed:30,defaultSpeed:1})),i=e.addComponent(new kr({position:{x:50,y:0},maxSpeed:30,defaultSpeed:1})),o=e.addComponent(new ro({position:{x:-50,y:75},range:20,angle:.4})),s=e.addComponent(new ro({position:{x:50,y:75},range:20,angle:.4}));e.addComponent(new yo({inputIds:[o,s],outputIds:[r,i],weights:[[1,0],[0,1]]})),Ao.addExistingEntity(e)}),this.makeInteractable(i,function(t){var e=new l,n=new Ei({position:t,angle:Math.PI});n.angle.set(-Math.PI/2),e.addComponent(n),e.addComponent(new ni({size:{width:100,height:150}})),e.addComponent(new Ji({asset:"vehicle",size:100}));var r=e.addComponent(new kr({position:{x:-50,y:0},maxSpeed:30,defaultSpeed:1})),i=e.addComponent(new kr({position:{x:50,y:0},maxSpeed:30,defaultSpeed:1})),o=e.addComponent(new ro({position:{x:-50,y:75},range:20,angle:.4})),s=e.addComponent(new ro({position:{x:50,y:75},range:20,angle:.4}));e.addComponent(new yo({inputIds:[o,s],outputIds:[r,i],weights:[[0,1],[1,0]]})),Ao.addExistingEntity(e)}),this.makeInteractable(o,function(t){var e=new l,n=new Ei({position:t,angle:Math.PI});n.angle.set(-Math.PI/2),e.addComponent(n),e.addComponent(new ni({size:{width:100,height:150}})),e.addComponent(new Ji({asset:"vehicle",size:100}));var r=e.addComponent(new kr({position:{x:-50,y:0},maxSpeed:30,defaultSpeed:1})),i=e.addComponent(new kr({position:{x:50,y:0},maxSpeed:30,defaultSpeed:1})),o=e.addComponent(new ro({position:{x:-50,y:75},range:20,angle:.4})),s=e.addComponent(new ro({position:{x:50,y:75},range:20,angle:.4}));e.addComponent(new yo({inputIds:[o,s],outputIds:[r,i],weights:[[-1,0],[0,-1]]})),Ao.addExistingEntity(e)}),this.makeInteractable(s,function(t){var e=new l,n=new Ei({position:t,angle:Math.PI});n.angle.set(-Math.PI/2),e.addComponent(n),e.addComponent(new ni({size:{width:100,height:150}})),e.addComponent(new Ji({asset:"vehicle",size:100}));var r=e.addComponent(new kr({position:{x:-50,y:0},maxSpeed:30,defaultSpeed:1})),i=e.addComponent(new kr({position:{x:50,y:0},maxSpeed:30,defaultSpeed:1})),o=e.addComponent(new ro({position:{x:-50,y:75},range:20,angle:.4})),s=e.addComponent(new ro({position:{x:50,y:75},range:20,angle:.4}));e.addComponent(new yo({inputIds:[o,s],outputIds:[r,i],weights:[[0,-1],[-1,0]]})),Ao.addExistingEntity(e)}),this.pack([e,n,r,i,o,s])}},{key:"makeInteractable",value:function(t,e){var n=this;t.setInteractive({draggable:!0}),t.on("dragstart",function(){n.children.bringToTop(t)}),t.on("drag",function(e,n,r){t.setPosition(n,r)}),t.on("dragend",function(r,i,o,s){if(n.container){var a={x:0,y:0};n.container.getWorldTransformMatrix().transformPoint(t.x,t.y,a),e(a)}t.setPosition(t.input.dragStartX,t.input.dragStartY)})}}])&&Ko(n.prototype,r),i&&Ko(n,i),e}();function ts(t){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function es(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rs(t,e){return!e||"object"!==ts(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function is(t){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function os(t,e){return(os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ss=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rs(this,is(e).call(this,"SettingScene"))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&os(t,e)}(e,qo),n=e,(r=[{key:"createComponentSelect",value:function(t){var e=this,n=this.add.dom(0,0).createFromHTML('<div class="base-input-container">\n      <select style="width: 85%" name="components">\n      <option value="'.concat(p.MOTOR,'">Motor</option>\n      <option value="').concat(p.SENSOR,'">Sensor</option>\n      <option value="').concat(p.SOURCE,'">Quelle</option>\n      <option value="').concat(p.SOLID_BODY,'">Fester Körper</option>\n      <option value="').concat(p.CONNECTION,'">Verbindungsnetzwerk</option>\n      </select>\n    </div>')),r=n.getChildByName("components"),i=this.add.dom(0,0).createFromHTML('<i class="fa fa-plus"></i>').setClassName("deleteButton");return i.setData("ignoreHeight",!0),i.addListener("click"),i.on("click",function(){var n,i=r.value;switch(i){case p.MOTOR:n=Ao.addComponent(t.id,new kr({position:{x:0,y:0},maxSpeed:50,defaultSpeed:5}));break;case p.SENSOR:n=Ao.addComponent(t.id,new ro({position:{x:0,y:0},range:20,angle:.3}));break;case p.SOURCE:n=Ao.addComponent(t.id,new So({range:100}));break;case p.SOLID_BODY:n=Ao.addComponent(t.id,new ni({}));break;case p.CONNECTION:var o=t.getMultipleComponents(p.SENSOR).map(function(t){return t.id}),s=t.getMultipleComponents(p.MOTOR).map(function(t){return t.id});n=Ao.addComponent(t.id,new yo({inputIds:o,outputIds:s}))}void 0!==n&&(new u.a({text:"Komponente ".concat(i," hinzugefügt.")}).show(),e.container.removeAll(!0),e.container.height=0,e.onCreate(e.container,t))}),[n,i]}},{key:"onCreate",value:function(t,e){var n=this,r=this.add.dom(0,0,"button","","Entität Löschen").setClassName("error base-input-container");r.addListener("click"),r.on("click",function(){Ao.destroyEntity(e.id),n.close()});var i=this.createComponentSelect(e),o=this.add.dom(0,0,"hr").setClassName("sidepar-seperator base-input-container"),s=e.getAllComponents().map(function(r){var i,o=r.getInfo()?' <span class="tooltip-left" data-tooltip="'.concat(r.getInfo(),'"><i class="fa fa-xs fa-info-circle"></i></span>'):"",s=n.add.dom(0,0).createFromHTML("<h3>".concat(r.name,' <span class="component-title-info">[ID: ').concat(r.id,"]").concat(o,"</span></h3>")).setClassName("component-title");r.isDeletable()&&((i=n.add.dom(0,0,"div","","✖").setClassName("deleteButton")).setData("ignoreHeight",!0),i.addListener("click"),i.on("click",function(){Ao.removeComponent(e.id,r),t.removeAll(!0),t.reset(),n.onCreate(t,e)}));var a=Object.keys(r).map(function(t){if(r[t]instanceof E)return r[t].render(n,e)});return[s,i].concat(es(a))});this.pack([r].concat(es(i),[o],es(s.flat())))}}])&&ns(n.prototype,r),i&&ns(n,i),e}();var as=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},us=1,cs=2;var hs=function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],c=t[u],h=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var l=new ue;if(r)var f=r(c,h,u,t,e,l);if(!(void 0===f?Wn(h,c,us|cs,r,l):f))return!1}}return!0};var ls=function(t){return t==t&&!A(t)};var fs=function(t){for(var e=wn(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ls(i)]}return e};var ds=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var ps=function(t){var e=fs(t);return 1==e.length&&e[0][2]?ds(e[0][0],e[0][1]):function(n){return n===t||hs(n,t,e)}},ms=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vs=/^\w*$/;var gs=function(t,e){if(ze(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!W(t))||vs.test(t)||!ms.test(t)||null!=e&&t in Object(e)},ys="Expected a function";function bs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(ys);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(bs.Cache||ie),n}bs.Cache=ie;var xs=bs,ws=500;var Es=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_s=/\\(\\)?/g,Ss=function(t){var e=xs(t,function(t){return n.size===ws&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Es,function(t,n,r,i){e.push(r?i.replace(_s,"$1"):n||t)}),e}),Ts=1/0,As=O?O.prototype:void 0,Ms=As?As.toString:void 0;var Cs=function t(e){if("string"==typeof e)return e;if(ze(e))return as(e,t)+"";if(W(e))return Ms?Ms.call(e):"";var n=e+"";return"0"==n&&1/e==-Ts?"-0":n};var Os=function(t){return null==t?"":Cs(t)};var Ns=function(t,e){return ze(t)?t:gs(t,e)?[t]:Ss(Os(t))},ks=1/0;var Rs=function(t){if("string"==typeof t||W(t))return t;var e=t+"";return"0"==e&&1/t==-ks?"-0":e};var Ps=function(t,e){for(var n=0,r=(e=Ns(e,t)).length;null!=t&&n<r;)t=t[Rs(e[n++])];return n&&n==r?t:void 0};var Is=function(t,e,n){var r=null==t?void 0:Ps(t,e);return void 0===r?n:r};var Ds=function(t,e){return null!=t&&e in Object(t)};var Ls=function(t,e,n){for(var r=-1,i=(e=Ns(e,t)).length,o=!1;++r<i;){var s=Rs(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&on(i)&&nn(s,i)&&(ze(t)||Ze(t))};var Bs=function(t,e){return null!=t&&Ls(t,e,Ds)},Fs=1,zs=2;var js=function(t,e){return gs(t)&&ls(e)?ds(Rs(t),e):function(n){var r=Is(n,t);return void 0===r&&r===e?Bs(n,t):Wn(e,r,Fs|zs)}};var Us=function(t){return t};var Ys=function(t){return function(e){return null==e?void 0:e[t]}};var Ws=function(t){return function(e){return Ps(e,t)}};var Xs=function(t){return gs(t)?Ys(Rs(t)):Ws(t)};var Gs=function(t){return"function"==typeof t?t:null==t?Us:"object"==typeof t?ze(t)?js(t[0],t[1]):ps(t):Xs(t)},Vs=function(){try{var t=Lt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var qs=function(t,e,n){"__proto__"==e&&Vs?Vs(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Hs=Object.prototype.hasOwnProperty;var Ks=function(t,e,n){var r=t[e];Hs.call(t,e)&&it(r,n)&&(void 0!==n||e in t)||qs(t,e,n)};var $s=function(t,e,n,r){if(!A(t))return t;for(var i=-1,o=(e=Ns(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u=Rs(e[i]),c=n;if(i!=s){var h=a[u];void 0===(c=r?r(h,u,a):void 0)&&(c=A(h)?h:nn(e[i+1])?[]:{})}Ks(a,u,c),a=a[u]}return t};var Js=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Ps(t,s);n(a,s)&&$s(o,Ns(s,t),a)}return o},Zs=vn(Object.getPrototypeOf,Object),Qs=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Fe(e,Ge(t)),t=Zs(t);return e}:Ye;var ta=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},ea=Object.prototype.hasOwnProperty;var na=function(t){if(!A(t))return ta(t);var e=mn(t),n=[];for(var r in t)("constructor"!=r||!e&&ea.call(t,r))&&n.push(r);return n};var ra=function(t){return xn(t)?dn(t,!0):na(t)};var ia=function(t){return je(t,ra,Qs)};var oa=function(t,e){if(null==t)return{};var n=as(ia(t),function(t){return[t]});return e=Gs(e),Js(t,n,function(t,n){return e(t,n[0])})};function sa(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function aa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ua(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ca=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ua(this,"expectedComponents",[]),ua(this,"entities",[]),ua(this,"scene",void 0),ua(this,"isPaused",!1),this.scene=e,b.subscribe(y.ENTITY_CREATED,function(t){t.hasComponents.apply(t,sa(n.expectedComponents))&&(n.onEntityCreated(t),n.entities.push(t))}),b.subscribe(y.ENTITY_DESTROYED,function(t){if(t.hasComponents.apply(t,sa(n.expectedComponents))){n.onEntityDestroyed(t);var e=n.entities.findIndex(function(e){return e.id===t.id});e>-1&&n.entities.splice(e,1)}}),b.subscribe(y.ENTITY_COMPONENT_ADDED,function(t){var e=t.entity,r=t.component,i=e.hasComponents.apply(e,sa(n.expectedComponents)),o=n.entities.includes(e);i&&!o&&n.entities.push(e),n.onEntityComponentAdded(e,r)}),b.subscribe(y.ENTITY_COMPONENT_REMOVED,function(t){var e=t.entity,r=t.component,i=e.hasComponents.apply(e,sa(n.expectedComponents));if(n.onEntityComponentRemoved(e,r),!i){var o=n.entities.findIndex(function(t){return t.id===e.id});o>-1&&n.entities.splice(o,1)}})}var e,n,r;return e=t,(n=[{key:"pause",value:function(t){this.isPaused=t}},{key:"onEntityCreated",value:function(t){}},{key:"onEntityDestroyed",value:function(t){}},{key:"onEntityComponentAdded",value:function(t,e){}},{key:"onEntityComponentRemoved",value:function(t,e){}}])&&aa(e.prototype,n),r&&aa(e,r),t}();function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function la(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function da(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pa(t,e){return(pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ma(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var va=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==ha(e)&&"function"!=typeof e?da(t):e}(this,fa(e).call(this,t)),ma(da(n),"expectedComponents",[p.TRANSFORMABLE,p.SOLID_BODY]),ma(da(n),"physicsObjects",{}),ma(da(n),"bodiesGraphic",void 0),b.subscribe(y.APPLY_FORCE,n.applyForce.bind(da(n))),n.bodiesGraphic=n.scene.sys.add.graphics({x:0,y:0}),n.bodiesGraphic.setDepth(Number.MAX_VALUE),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pa(t,e)}(e,ca),n=e,o=[{key:"getBody",value:function(t){switch(t.shape.get()){case d.CIRCLE:var e={friction:.1,frictionAir:.3,isStatic:t.isStatic.get()};return i.a.Physics.Matter.Matter.Bodies.circle(0,0,t.size.get().width,oa(e,function(t){return void 0!==t}));case d.RECTANGLE:default:var n={friction:.7,frictionAir:.6,isStatic:t.isStatic.get()};return i.a.Physics.Matter.Matter.Bodies.rectangle(0,0,t.size.get().width,t.size.get().height,oa(n,function(t){return void 0!==t}))}}}],(r=[{key:"update",value:function(){this.renderBodies()}},{key:"renderBodies",value:function(){this.bodiesGraphic.clear();for(var t,e,n=this.bodiesGraphic,r=Object.values(this.physicsObjects),i=0;i<r.length;i+=1)if((t=r[i].body).render.visible)for(var o=t.parts.length>1?1:0;o<t.parts.length;o+=1)if((e=t.parts[o]).render.visible){if(n.lineStyle(1,10066329,e.render.opacity),n.fillStyle(10066329,e.render.opacity),e.circleRadius)n.beginPath(),n.arc(e.position.x,e.position.y,e.circleRadius,0,2*Math.PI);else{n.beginPath(),n.moveTo(e.vertices[0].x,e.vertices[0].y);for(var s=e.vertices.length,a=1;a<s;a+=1)e.vertices[a-1].isInternal?n.moveTo(e.vertices[a].x,e.vertices[a].y):n.lineTo(e.vertices[a].x,e.vertices[a].y),e.vertices[a].isInternal&&n.moveTo(e.vertices[(a+1)%e.vertices.length].x,e.vertices[(a+1)%e.vertices.length].y);n.lineTo(e.vertices[0].x,e.vertices[0].y),n.closePath()}n.strokePath()}}},{key:"onEntityCreated",value:function(t){var e=this,n=t.getComponent(p.SOLID_BODY);n.shape.onChange(function(r){e.onEntityDestroyed(t),e.createBody(t,n)}),n.size.onChange(function(n,r){var o=e.physicsObjects[t.id].body;i.a.Physics.Matter.Matter.Body.rotate(o,-o.angle),i.a.Physics.Matter.Matter.Body.scale(o,n.width/r.width,n.height/r.height),i.a.Physics.Matter.Matter.Body.rotate(o,o.angle)}),n.isStatic.onChange(function(n){e.physicsObjects[t.id].body.isStatic=n}),this.createBody(t,n)}},{key:"createBody",value:function(t,n){var r=e.getBody(n),i=this.attachSynchronization(r,t);this.scene.matter.world.add(r),this.physicsObjects[t.id]={body:r,eventBeforeUpdate:i[0],eventAfterUpdate:i[1]}}},{key:"onEntityDestroyed",value:function(t){var e=this.physicsObjects[t.id],n=e.body,r=e.eventBeforeUpdate,i=e.eventAfterUpdate;this.scene.matter.world.off("beforeupdate",r),this.scene.matter.world.off("afterupdate",i),this.scene.matter.world.remove(n,!1),delete this.physicsObjects[t.id]}},{key:"onEntityComponentAdded",value:function(t,e){e.name===p.SOLID_BODY&&this.onEntityCreated(t)}},{key:"onEntityComponentRemoved",value:function(t,e){e.name===p.SOLID_BODY&&this.onEntityDestroyed(t)}},{key:"attachSynchronization",value:function(t,e){var n=e.getComponent(p.TRANSFORMABLE),r=function(){i.a.Physics.Matter.Matter.Body.setPosition(t,n.position.get()),i.a.Physics.Matter.Matter.Body.setAngle(t,n.angle.get())};this.scene.matter.world.on("beforeupdate",r);var o=function(){n.position.set(t.position),n.angle.set(t.angle)};return this.scene.matter.world.on("afterupdate",o),[r,o]}},{key:"applyForce",value:function(t){if(this.physicsObjects[t.id]){var e=this.physicsObjects[t.id].body;if(e){var n=t.offset,r=t.force,o=i.a.Physics.Matter.Matter.Vector,s=o.cross(o.neg(n),r);e.torque-=Math.pow(s+Math.sign(s),5),i.a.Physics.Matter.Matter.Body.applyForce(e,{x:e.position.x+n.x,y:e.position.y+n.y},r)}}}}])&&la(n.prototype,r),o&&la(n,o),e}();function ga(t){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wa(t,e){return(wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ea(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _a=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==ga(e)&&"function"!=typeof e?xa(t):e}(this,ba(e).call(this,t)),Ea(xa(n),"expectedComponents",[p.TRANSFORMABLE,p.RENDER]),Ea(xa(n),"renderObjects",{}),Ea(xa(n),"selected",null),b.subscribe(y.ENTITY_SELECTED,function(t){n.removeHighlight(),n.highlight(t)}),b.subscribe(y.SIDEBAR_CLOSED,function(){n.removeHighlight()}),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wa(t,e)}(e,ca),n=e,(r=[{key:"highlight",value:function(t){var e=this.renderObjects[t.id];e&&(this.selected=e,this.selected.setData("originalDepth",e.depth),this.selected.setDepth(999),e instanceof i.a.GameObjects.Image&&e.setTint(14540287),e instanceof i.a.GameObjects.Rectangle&&(this.selected.setData("originalColor",e.fillColor),e.setFillStyle(14540287)))}},{key:"removeHighlight",value:function(){if(this.selected&&this.scene.children.exists(this.selected)){if(this.selected instanceof i.a.GameObjects.Image&&this.selected.setTint(16777215),this.selected instanceof i.a.GameObjects.Rectangle){var t=this.selected.getData("originalColor")||13421772;this.selected.setFillStyle(t)}this.selected.setDepth(this.selected.getData("originalDepth")||0)}this.selected=null}},{key:"update",value:function(){var t=this;this.entities.forEach(function(e){var n=e.getComponent(p.TRANSFORMABLE),r=t.renderObjects[e.id];r.setPosition(n.position.get().x,n.position.get().y),r.setRotation(n.angle.get())})}},{key:"onEntityCreated",value:function(t){var e=this,n=t.getComponent(p.RENDER);n.asset.onChange(function(r){e.onEntityDestroyed(t),e.createImage(t,n)}),n.size.onChange(function(n){var r=e.renderObjects[t.id],i=n.width/r.width,o=0===n.height?i:n.height/r.height;r.setScale(i,o)}),this.createImage(t,n)}},{key:"createImage",value:function(t,e){var n,r=t.getComponent(p.TRANSFORMABLE),i=t.getComponent(p.SOLID_BODY);if(i&&"number"==typeof e.asset.get()||"number"==typeof e.asset.get()){var o=0===e.size.get().height?e.size.get().width:e.size.get().height;n=this.scene.add.rectangle(r.position.get().x,r.position.get().y,i?i.size.get().width:e.size.get().width,i?i.size.get().height:o,e.asset.get())}else{n=this.scene.add.image(r.position.get().x,r.position.get().y,e.asset.get());var s=e.size.get().width/n.width,a=0===e.size.get().height?s:e.size.get().height/n.height;n.setScale(s,a)}e.blendMode.get()&&n.setBlendMode(e.blendMode.get()),n.setInteractive({draggable:!0,useHandCursor:!0}),n.on("drag",function(t,e,n){r.position.set({x:e,y:n})}),n.on("pointerup",function(e){e.getDistance()>1||b.publish(y.ENTITY_SELECTED,t)}),this.renderObjects[t.id]=n}},{key:"onEntityDestroyed",value:function(t){this.renderObjects[t.id].destroy(),delete this.renderObjects[t.id]}},{key:"onEntityComponentAdded",value:function(t,e){e.name===p.RENDER&&this.onEntityCreated(t)}},{key:"onEntityComponentRemoved",value:function(t,e){e.name===p.RENDER&&this.onEntityDestroyed(t)}}])&&ya(n.prototype,r),o&&ya(n,o),e}();function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Aa(t){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ma(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oa=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==Sa(e)&&"function"!=typeof e?Ma(t):e}(this,(t=Aa(e)).call.apply(t,[this].concat(a))),r=Ma(n),i="expectedComponents",o=[p.TRANSFORMABLE,p.MOTOR],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(e,ca),n=e,(r=[{key:"update",value:function(){this.isPaused||this.entities.forEach(function(t){var e=t.getComponent(p.TRANSFORMABLE);t.getMultipleComponents(p.MOTOR).forEach(function(n){var r=i.a.Physics.Matter.Matter.Vector.rotate(n.position.get(),e.angle.get()),o=Number(n.defaultSpeed.get()),s=o+(Number(n.maxSpeed.get())-o)*n.throttle.get();n.visualThrottle.set(s.toFixed(2));var a=i.a.Physics.Matter.Matter.Vector.rotate({x:0,y:.001*s},e.angle.get());b.publish(y.APPLY_FORCE,{id:t.id,offset:r,force:a})})})}}])&&Ta(n.prototype,r),o&&Ta(n,o),e}();function Na(t,e){var n=t.x||0,r=t.y||0,i=e.x||0,o=e.y||0,s=2*Math.pow(i,2),a=2*Math.pow(o,2);return function(t,e){var i=-(Math.pow(t-n,2)/s+Math.pow(e-r,2)/a);return Math.exp(i)}}var ka=function(){for(var t=Math.PI/16,e=[],n=0;n<=2*Math.PI;n+=t)e.push(n);return e}();function Ra(t){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Da(t){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ba(t,e){return(Ba=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var za=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(t,e){return!e||"object"!==Ra(e)&&"function"!=typeof e?La(t):e}(this,(t=Da(e)).call.apply(t,[this].concat(i))),Fa(La(n),"expectedComponents",[p.SENSOR,p.TRANSFORMABLE]),Fa(La(n),"textures",{}),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ba(t,e)}(e,ca),n=e,(r=[{key:"update",value:function(){var t=this;this.entities.forEach(function(e){var n,r,o=e.getComponent(p.TRANSFORMABLE),s=e.getMultipleComponents(p.SENSOR),a=(n=o.angle.get(),r=2*Math.PI,(n%r+r)%r),u=ka.reduce(function(t,e){return Math.abs(e-a)<Math.abs(t-a)?e:t});s.forEach(function(e){t.textures[e.id]&&Object.entries(t.textures[e.id]).forEach(function(t){var n=Pa(t,2),r=n[0],s=n[1];if(r===String(u)){var a=o.position.get(),c=i.a.Physics.Matter.Matter.Vector.rotate(e.position.get(),o.angle.get()),h=a.x+c.x,l=a.y+c.y;s.setPosition(h,l),s.setVisible(!0)}else s.setVisible(!1)})})})}},{key:"onEntityCreated",value:function(t){var e=this;t.getMultipleComponents(p.SENSOR).forEach(function(n){e.addSensorObject(t,n),n.angle.onChange(function(r){e.removeSensorObject(n),e.addSensorObject(t,n)}),n.range.onChange(function(r){e.removeSensorObject(n),e.addSensorObject(t,n)}),n.reactsTo.onChange(function(r){e.removeSensorObject(n),e.addSensorObject(t,n)})})}},{key:"onEntityDestroyed",value:function(t){var e=this;t.getMultipleComponents(p.SENSOR).forEach(function(t){e.removeSensorObject(t)})}},{key:"onEntityComponentAdded",value:function(t,e){var n=this;if(e.name===p.SENSOR){var r=e;this.addSensorObject(t,r),r.angle.onChange(function(e){n.removeSensorObject(r),n.addSensorObject(t,r)}),r.range.onChange(function(e){n.removeSensorObject(r),n.addSensorObject(t,r)}),r.reactsTo.onChange(function(e){n.removeSensorObject(r),n.addSensorObject(t,r)})}}},{key:"onEntityComponentRemoved",value:function(t,e){e.name===p.SENSOR&&this.removeSensorObject(e)}},{key:"addSensorObject",value:function(t,e){var n=this,r=t.getComponent(p.TRANSFORMABLE),i=Math.ceil(3*e.range.get()/6),o=Math.ceil(3*e.range.get()/6),s=2*i,a=2*o,u=ka,c=Na({x:0,y:0},{x:e.angle.get(),y:e.range.get()}),h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t&&0===e)return 1;var r=Math.cos(-n)*t-Math.sin(-n)*e,i=Math.sin(-n)*t+Math.cos(-n)*e,o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),s=Math.atan2(r,i);return c(s,o)},l={},f={};u.forEach(function(t){for(var u=n.scene.textures.createCanvas("sensor_texture_".concat(e.id,"_").concat(t),s,a),c=u.getContext(),d=new Float32Array(s*a),p=0;p<a;p+=1)for(var m=0;m<s;m+=1){var v=h(6*(m-i),6*(p-o),t);d[p*s+m]=v,c.fillStyle="rgba(50, 50, 100, ".concat(.6*v,")"),c.fillRect(m,p,1,1)}u.refresh();var g=r.position.get().x+e.position.get().x,y=r.position.get().y+e.position.get().y,b=n.scene.add.image(g,y,"sensor_texture_".concat(e.id,"_").concat(t));b.setScale(6),b.setVisible(!1),b.setDepth(99),n.scene.children.bringToTop(b),l[t]=b,f[t]=d}),this.textures[e.id]=l,b.publish(y.SENSOR_CREATED,{id:e.id,type:e.reactsTo.get(),values:f,width:s,height:a})}},{key:"removeSensorObject",value:function(t){var e=this,n=this.textures[t.id];Object.keys(n).forEach(function(r){n[r].destroy(),e.scene.textures.remove("sensor_texture_".concat(t.id,"_").concat(r))}),delete this.textures[t.id],b.publish(y.SENSOR_DESTROYED,{id:t.id,type:t.reactsTo.get()})}}])&&Ia(n.prototype,r),o&&Ia(n,o),e}();function ja(t){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ua(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xa(t,e){return(Xa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ga=function(t){function e(){var t,n,r,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=function(t,e){return!e||"object"!==ja(e)&&"function"!=typeof e?Wa(t):e}(this,(t=Ya(e)).call.apply(t,[this].concat(a))),r=Wa(n),i="expectedComponents",o=[p.CONNECTION,p.MOTOR,p.SENSOR],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xa(t,e)}(e,ca),n=e,(r=[{key:"update",value:function(){this.isPaused||this.entities.forEach(function(t){var e=t.getComponent(p.CONNECTION),n=t.getMultipleComponents(p.MOTOR),r=t.getMultipleComponents(p.SENSOR),i=e.network.get().inputs.map(function(t){var e=r.find(function(e){return e.id===t});return e?e.activation.get():0}),o=Object(io.multiply)(i,e.network.get().weights);e.network.get().outputs.forEach(function(t,e){var r=n.find(function(e){return e.id===t});if(r){var i=o[e];-1===Math.sign(o[e])&&(i+=1),r.throttle.set(i)}})})}},{key:"onEntityComponentAdded",value:function(t,e){if((e.name===p.MOTOR||e.name===p.SENSOR)&&t.hasComponents(p.CONNECTION)){var n,r=t.getComponent(p.CONNECTION),i=t.getMultipleComponents(p.MOTOR),o=t.getMultipleComponents(p.SENSOR),s=Object(io.matrix)(r.network.get().weights),a=s.size(),u=r.network.get(),c=u.inputs,h=u.outputs;e.name===p.MOTOR&&(n=a[1]>0?Object(io.resize)(s,[a[0],a[1]+1]).toArray():Object(io.zeros)(o.length,1).toArray()),e.name===p.SENSOR&&(n=a[1]>0?Object(io.resize)(s,[a[0]+1,a[1]]).toArray():Object(io.zeros)(1,i.length).toArray()),c=o.map(function(t){return t.id}),h=i.map(function(t){return t.id}),r.network.set({inputs:c,outputs:h,weights:n})}}},{key:"onEntityComponentRemoved",value:function(t,e){if((e.name===p.MOTOR||e.name===p.SENSOR)&&t.hasComponents(p.CONNECTION)){var n=t.getComponent(p.CONNECTION),r=Object(io.matrix)(n.network.get().weights),i=r.size(),o=n.network.get(),s=o.inputs,a=o.outputs,u=o.weights;if(e.name===p.MOTOR){var c=a.findIndex(function(t){return t===e.id}),h=Object(io.range)(0,i[0]).toArray(),l=Object(io.range)(0,i[1]).toArray();l.splice(c,1),u=l.length>0?Object(io.subset)(r,Object(io.index)(h,l)).toArray():[[]],a=t.getMultipleComponents(p.MOTOR).map(function(t){return t.id})}if(e.name===p.SENSOR){var f=s.findIndex(function(t){return t===e.id}),d=Object(io.range)(0,i[0]).toArray(),m=Object(io.range)(0,i[1]).toArray();d.splice(f,1),u=d.length>0?Object(io.subset)(r,Object(io.index)(d,m)).toArray():[[]],s=t.getMultipleComponents(p.SENSOR).map(function(t){return t.id})}n.network.set({inputs:s,outputs:a,weights:u})}}}])&&Ua(n.prototype,r),i&&Ua(n,i),e}();function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ha(t){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ka(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $a(t,e){return($a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ja(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Za=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=function(t,e){return!e||"object"!==Va(e)&&"function"!=typeof e?Ka(t):e}(this,(t=Ha(e)).call.apply(t,[this].concat(i))),Ja(Ka(n),"expectedComponents",[p.SOURCE,p.TRANSFORMABLE]),Ja(Ka(n),"textures",{}),Ja(Ka(n),"handlers",{}),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$a(t,e)}(e,ca),n=e,(r=[{key:"update",value:function(){}},{key:"addHandler",value:function(t,e){return this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e),e}},{key:"onEntityCreated",value:function(t){var e=this;t.getMultipleComponents(p.SOURCE).forEach(function(n){e.addSourceObject(t,n),e.addHandlers(t,n)})}},{key:"addHandlers",value:function(t,e){var n=this,r=t.getComponent(p.TRANSFORMABLE),i=e.substance.get(),o=this.addHandler(e.id,function(){n.removeSourceObject(e,i),n.addSourceObject(t,e)});e.emissionType.onChange(o),e.range.onChange(o),e.substance.onChange(o);var s=this.addHandler(e.id,tt(function(){n.removeSourceObject(e,i),n.addSourceObject(t,e)},200));r.position.onChange(s),r.angle.onChange(s)}},{key:"onEntityDestroyed",value:function(t){var e=this;t.getMultipleComponents(p.SOURCE).forEach(function(t){e.removeSourceObject(t,t.substance.get())})}},{key:"onEntityComponentAdded",value:function(t,e){if(e.name===p.SOURCE){var n=e;this.addSourceObject(t,n),this.addHandlers(t,n)}}},{key:"onEntityComponentRemoved",value:function(t,e){if(e.name===p.SOURCE){var n=e;this.removeSourceObject(n,n.substance.get());var r=t.getComponent(p.TRANSFORMABLE);(this.handlers[e.id]||[]).forEach(function(t){r.position.removeHandler(t),r.angle.removeHandler(t)})}}},{key:"addSourceObject",value:function(t,e){for(var n=e.emissionType.get()===v.GAUSSIAN,r=t.getComponent(p.SOLID_BODY),o=t.getComponent(p.TRANSFORMABLE),s=Math.ceil(this.scene.cameras.main.width/6),a=Math.ceil(this.scene.cameras.main.height/6),u=this.scene.textures.createCanvas("source_texture_".concat(e.id),s,a),c=u.getContext(),h=new Float32Array(s*a),l=n?Na(o.position.get(),{x:e.range.get(),y:e.range.get()}):function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=t.x||0,s=t.y||0,a=new i.a.Geom.Rectangle(o,s,e,n),u=o+e/2,c=s+n/2,h=Math.sin(-r),l=Math.cos(-r);return function(t,e){var n=t-u,r=e-c,i=n*l-r*h,o=n*h+r*l;return a.contains(i+u,o+c)?3:0}}(i.a.Physics.Matter.Matter.Vector.sub(o.position.get(),{x:(r?r.size.get().width:e.range.get())/2,y:(r?r.size.get().height:e.range.get())/2}),r?r.size.get().width:e.range.get(),r?r.size.get().height:e.range.get(),o.angle.get()),f=0;f<a;f+=1)for(var d=0;d<s;d+=1){var g=l(6*d,6*f);h[f*s+d]=g,e.substance.get()===m.BARRIER?(g=Math.round(255*g),c.fillStyle="rgb(".concat(g,", ",0,", ",0,")"),c.fillRect(d,f,1,1)):e.substance.get()===m.LIGHT&&(g=Math.round(255*g),c.fillStyle="rgb(".concat(g,", ").concat(g,", ",0,")"),c.fillRect(d,f,1,1))}u.refresh();var x=this.scene.add.image(0,0,"source_texture_".concat(e.id));x.setOrigin(0),x.setScale(6),x.setBlendMode(i.a.BlendModes.SCREEN),x.setDepth(99),this.scene.children.bringToTop(x),this.textures[e.id]=x,b.publish(y.SOURCE_CREATED,{id:e.id,values:h,type:e.substance.get(),width:s,height:a})}},{key:"removeSourceObject",value:function(t,e){b.publish(y.SOURCE_DESTROYED,{id:t.id,type:e}),this.textures[t.id]&&(this.textures[t.id].destroy(),this.scene.textures.remove("source_texture_".concat(t.id)),delete this.textures[t.id])}}])&&qa(n.prototype,r),o&&qa(n,o),e}(),Qa=n(170);function tu(t,e){return t+function(){for(var t=0,e=0;e<6;e+=1)t+=Math.random();return t/6}()*(e-t)}function eu(t){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ru(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iu(t){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ou(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function su(t,e){return(su=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uu=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==eu(e)&&"function"!=typeof e?ou(t):e}(this,iu(e).call(this,t)),au(ou(n),"expectedComponents",[p.TRANSFORMABLE,p.SENSOR]),au(ou(n),"sensors",{}),au(ou(n),"sources",{}),au(ou(n),"correlations",{}),au(ou(n),"sourcesCombined",{}),au(ou(n),"width",0),au(ou(n),"height",0),au(ou(n),"maxValue",0),au(ou(n),"compute",void 0),n.compute=tt(function(){var t=new u.a({text:'<i class="fa fa-sync-alt fa-spin"></i> Berechnung wird durchgeführt...',timeout:!1,animation:{open:null}});t.show(),setTimeout(function(){n.maxValue=0;var e=Object.values(m).map(function(t){return n.computeCorrelation(t)});Promise.all(e).then(function(){return t.close()})},10)},100),b.subscribe(y.SENSOR_CREATED,n.onSensorCreated.bind(ou(n))),b.subscribe(y.SOURCE_CREATED,n.onSourceCreated.bind(ou(n))),b.subscribe(y.SENSOR_DESTROYED,n.onSensorDestroyed.bind(ou(n))),b.subscribe(y.SOURCE_DESTROYED,n.onSourceDestroyed.bind(ou(n))),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&su(t,e)}(e,ca),n=e,(r=[{key:"update",value:function(){var t=this;this.isPaused||this.entities.forEach(function(e){var n,r,o=e.getComponent(p.TRANSFORMABLE),s=e.getMultipleComponents(p.SENSOR),a=(n=o.angle.get(),r=2*Math.PI,(n%r+r)%r),u=ka.reduce(function(t,e){return Math.abs(e-a)<Math.abs(t-a)?e:t});s.forEach(function(e){var n="".concat(e.id,":").concat(u);if(t.correlations[n]){var r=o.position.get(),s=i.a.Physics.Matter.Matter.Vector.rotate(e.position.get(),o.angle.get()),a=Math.floor((r.x+s.x)/6),c=Math.floor((r.y+s.y)/6);if(t.correlations[n][c]&&void 0!==t.correlations[n][c][a]&&!Number.isNaN(t.correlations[n][c][a])){var h=t.correlations[n][c][a],l=tu(-3e-4,3e-4);e.activation.set(h+l)}else e.activation.set(0)}})})}},{key:"computeCorrelation",value:function(t){var e=this;return new Promise(function(n,r){var i=Object.values(e.sensors).filter(function(e){return e.type===t}),o=e.width,s=e.height;i.forEach(function(r){Object.entries(r.values).forEach(function(i){var a=nu(i,2),u=a[0],c=a[1],h="".concat(r.id,":").concat(u);Object(Qa.d)(function(){var i=Object(Qa.c)(c,[r.height,r.width,1,1]),a=Object(Qa.c)(e.sourcesCombined[t],[1,s,o,1]),u=Object(Qa.b)(Object(Qa.a)(a,i,1,"same")),l=u.max();u.div(l).array().then(function(t){e.correlations[h]=t,n()})})})})})}},{key:"computeCombinedSources",value:function(t){for(var e=new Float32Array(this.width*this.height),n=Object.values(this.sources).filter(function(e){return e.type===t}),r=function(t){var r=n.reduce(function(e,n){return void 0!==n.values[t]?Math.max(e,n.values[t]):e},0);e[t]=r},i=0;i<e.length;i+=1)r(i);this.sourcesCombined[t]=e}},{key:"onSourceCreated",value:function(t){this.sources[t.id]=t,this.width=t.width,this.height=t.height,this.computeCombinedSources(t.type),this.compute()}},{key:"onSensorCreated",value:function(t){this.sensors[t.id]=t,this.compute()}},{key:"onSourceDestroyed",value:function(t){delete this.sources[t.id],this.computeCombinedSources(t.type),this.compute()}},{key:"onSensorDestroyed",value:function(t){delete this.sensors[t.id],this.compute()}}])&&ru(n.prototype,r),o&&ru(n,o),e}();function cu(t){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lu(t){return(lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function du(t,e){return(du=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mu=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=function(t,e){return!e||"object"!==cu(e)&&"function"!=typeof e?fu(t):e}(this,lu(e).call(this,{key:"MainScene"})),pu(fu(t),"systems",[]),pu(fu(t),"running",!1),t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&du(t,e)}(e,i.a.Scene),n=e,o=[{key:"createSnapshot",value:function(){var t=Ao.getEntities().map(function(t){return t.serialize()});localStorage.setItem("snapshot",JSON.stringify(t))}},{key:"loadSnapshot",value:function(){var t,e=Ao.getEntities(),n=localStorage.getItem("snapshot");n?(t=JSON.parse(n),e.forEach(function(t){return Ao.destroyEntity(t.id)}),Ao.loadEntities(t)):s()("Es konnte keine Scene geladen werden! Bitte verwenden Sie zunächst den Speichern Knopf.")}},{key:"exportJson",value:function(){var t=Ao.getEntities().map(function(t){return t.serialize()}),e=JSON.stringify(t),n="data:application/json;charset=utf-8,".concat(encodeURIComponent(e)),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","data.json"),document.body.append(r),r.click(),r.remove()}},{key:"importJson",value:function(){var t=Ao.getEntities(),e=document.createElement("input");e.type="file",e.accept="application/json",e.addEventListener("change",function(){var n=e.files||[];if(n.length<=0)s()("Es wurde keine korrete Datei ausgewählt.");else{var r=new FileReader;r.addEventListener("load",function(){if(null!==r.result){var e=JSON.parse(r.result);t.forEach(function(t){return Ao.destroyEntity(t.id)}),Ao.loadEntities(e)}}),r.readAsText(n[0])}}),e.click()}}],(r=[{key:"create",value:function(){var t=this;this.createSystems(),this.pause(!0),this.scene.launch("MainInterfaceScene"),this.scale.on("resize",this.handleResize.bind(this)),this.matter.world.setBounds(),this.scene.add("editor",Qo,!1),this.scene.add("settings",ss,!1),b.subscribe(y.ENTITY_SELECTED,function(e){t.scene.launch("SettingScene",e)}),Ao.createEntity(new Ei({position:{x:600,y:450}}),new ni({size:{width:20,height:400},shape:d.RECTANGLE,isStatic:!0}),new So({range:100,substance:m.BARRIER,emissionType:v.FLAT}),new Ji({asset:13421772,size:110}));var e=new l,n=new Ei({position:{x:100,y:500}});n.angle.set(-Math.PI/2),e.addComponent(n),e.addComponent(new ni({size:{width:100,height:150}})),e.addComponent(new Ji({asset:"vehicle",size:100}));var r=e.addComponent(new kr({position:{x:-50,y:0},maxSpeed:30,defaultSpeed:1})),i=e.addComponent(new kr({position:{x:50,y:0},maxSpeed:30,defaultSpeed:1})),o=e.addComponent(new ro({position:{x:-50,y:75},range:20,angle:.4})),s=e.addComponent(new ro({position:{x:50,y:75},range:20,angle:.4})),a=e.addComponent(new ro({position:{x:-50,y:75},range:30,angle:.4,reactsTo:m.BARRIER})),u=e.addComponent(new ro({position:{x:50,y:75},range:30,angle:.4,reactsTo:m.BARRIER}));e.addComponent(new yo({inputIds:[o,s,a,u],outputIds:[r,i],weights:[[0,1],[1,0],[1,0],[0,1]]})),Ao.addExistingEntity(e),Ao.createEntity(new Ei({position:{x:950,y:350}}),new Ji({asset:"prefab-source",size:100}),new So({range:200}))}},{key:"createSystems",value:function(){this.systems=[new va(this),new Za(this),new Oa(this),new za(this),new Ga(this),new uu(this),new _a(this)]}},{key:"update",value:function(t,e){this.systems.forEach(function(t){return t.update(e)})}},{key:"isRunning",value:function(){return this.running}},{key:"pause",value:function(t){this.running=t,this.systems.forEach(function(e){return e.pause(t)}),t&&e.createSnapshot()}},{key:"handleResize",value:function(){this.matter.world.setBounds()}}])&&hu(n.prototype,r),o&&hu(n,o),e}();function vu(t){return(vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yu(t){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xu(t,e){return(xu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Eu=function(t){function e(t,n,r,i,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(t,e){return!e||"object"!==vu(e)&&"function"!=typeof e?bu(t):e}(this,yu(e).call(this,t,n,r,i,s)),wu(bu(a),"pressed",!1),wu(bu(a),"activeIcon",void 0),wu(bu(a),"deactiveIcon",void 0),a.activeIcon=o,a.deactiveIcon=i,a}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xu(t,e)}(e,Ro),n=e,(r=[{key:"handleClick",value:function(t){t(this),!1===this.pressed?(this.setFrame(this.activeIcon),this.pressed=!0):(this.setFrame(this.deactiveIcon),this.pressed=!1)}},{key:"isPressed",value:function(){return this.pressed}}])&&gu(n.prototype,r),i&&gu(n,i),e}();function _u(t){return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Su(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tu(t){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Au(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mu(t,e){return(Mu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cu=function(t){function e(){var t,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=function(t,e){return!e||"object"!==_u(e)&&"function"!=typeof e?Au(t):e}(this,Tu(e).call(this,{key:"MainInterfaceScene"})),n=Au(t),i=[],(r="buttons")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mu(t,e)}(e,i.a.Scene),n=e,(r=[{key:"create",value:function(){var t=this;this.scale.on("resize",this.handleResize.bind(this));var e=this.scene.get("MainScene"),n=new Eu(this,35,35,6,9,function(){e.pause(!e.isRunning())}),r=new Ro(this,45+n.getWidth(),35,1,function(){mu.loadSnapshot()}),i=new Ro(this,110+n.getWidth(),35,18,function(){mu.createSnapshot()}),o=new Ro(this,this.cameras.main.displayWidth-35,35,17,function(){t.scene.launch("EditorScene")}),s=new Ro(this,175+n.getWidth(),35,4,function(){mu.importJson()});new Ro(this,240+n.getWidth(),35,0,function(){mu.exportJson()});this.buttons.push(n,r,o,i,s)}},{key:"handleResize",value:function(t){this.buttons[2].setPosition(t.width-35,35)}}])&&Su(n.prototype,r),o&&Su(n,o),e}(),Ou=(n(2181),n(2184),n(2186),n(2188),n(2190),{type:i.a.AUTO,backgroundColor:"#EAEAEA",parent:"body",scale:{mode:i.a.Scale.RESIZE,width:"100%",height:"100%"},dom:{createContainer:!0},input:{windowEvents:!1},scene:[Xi,mu,Cu],physics:{default:"matter",matter:{gravity:{y:0}}}});new i.a.Game(Ou)}]);